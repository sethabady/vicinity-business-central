/*! Hammer.JS - v2.0.8 - 2016-04-23
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(j(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function i(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&la(d,c)}function j(a,b){return function(){return a.apply(b,arguments)}}function k(a,b){return typeof a==oa?a.apply(b?b[0]||d:d,b):a}function l(a,b){return a===d?b:a}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1)})}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1)})}function o(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function p(a,b){return a.indexOf(b)>-1}function q(a){return a.trim().split(/\s+/g)}function r(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function s(a){return Array.prototype.slice.call(a,0)}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ma.length;){if(c=ma[g],e=c?c+f:b,e in a)return e;g++}return d}function v(){return ua++}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b)},this.init()}function y(a){var b,c=a.options.inputClass;return new(b=c?c:xa?M:ya?P:wa?R:L)(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Ea&&d-e===0,g=b&(Ga|Ha)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=ra(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=qa(j.x)>qa(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==Ea&&f.eventType!==Ga||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ha&&(i>Da||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=qa(l.x)>qa(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:pa(a.pointers[c].clientX),clientY:pa(a.pointers[c].clientY)},c++;return{timeStamp:ra(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b)return{x:pa(a[0].clientX),y:pa(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:pa(c/b),y:pa(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?Ia:qa(a)>=qa(b)?0>a?Ja:Ka:0>b?La:Ma}function H(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Ra)+I(a[1],a[0],Ra)}function K(a,b){return H(b[0],b[1],Ra)/H(a[0],a[1],Ra)}function L(){this.evEl=Ta,this.evWin=Ua,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Xa,this.evWin=Ya,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$a,this.evWin=_a,this.started=!1,x.apply(this,arguments)}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ga|Ha)&&(c=t(c.concat(d),"identifier",!0)),[c,d]}function P(){this.evTarget=bb,this.targetIds={},x.apply(this,arguments)}function Q(a,b){var c=s(a.touches),d=this.targetIds;if(b&(Ea|Fa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i)}),b===Ea)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ga|Ha)&&delete d[g[e].identifier],e++;return h.length?[t(f.concat(h),"identifier",!0),h]:void 0}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function S(a,b){a&Ea?(this.primaryTouch=b.changedPointers[0].identifier,T.call(this,b)):a&(Ga|Ha)&&T.call(this,b)}function T(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function(){var a=d.indexOf(c);a>-1&&d.splice(a,1)};setTimeout(e,cb)}}function U(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(db>=f&&db>=g)return!0}return!1}function V(a,b){this.manager=a,this.set(b)}function W(a){if(p(a,jb))return jb;var b=p(a,kb),c=p(a,lb);return b&&c?jb:b||c?b?kb:lb:p(a,ib)?ib:hb}function X(){if(!fb)return!1;var b={},c=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=c?a.CSS.supports("touch-action",d):!0}),b}function Y(a){this.options=la({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=nb,this.simultaneous={},this.requireFail=[]}function Z(a){return a&sb?"cancel":a&qb?"end":a&pb?"move":a&ob?"start":""}function $(a){return a==Ma?"down":a==La?"up":a==Ja?"left":a==Ka?"right":""}function _(a,b){var c=b.manager;return c?c.get(a):a}function aa(){Y.apply(this,arguments)}function ba(){aa.apply(this,arguments),this.pX=null,this.pY=null}function ca(){aa.apply(this,arguments)}function da(){Y.apply(this,arguments),this._timer=null,this._input=null}function ea(){aa.apply(this,arguments)}function fa(){aa.apply(this,arguments)}function ga(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ha(a,b){return b=b||{},b.recognizers=l(b.recognizers,ha.defaults.preset),new ia(a,b)}function ia(a,b){this.options=la({},ha.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=y(this),this.touchAction=new V(this,this.options.touchAction),ja(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ja(a,b){var c=a.element;if(c.style){var d;g(a.options.cssProps,function(e,f){d=u(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""}),b||(a.oldCssProps={})}}function ka(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var la,ma=["","webkit","Moz","MS","ms","o"],na=b.createElement("div"),oa="function",pa=Math.round,qa=Math.abs,ra=Date.now;la="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e)for(var f in e)e.hasOwnProperty(f)&&(b[f]=e[f])}return b}:Object.assign;var sa=h(function(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a},"extend","Use `assign`."),ta=h(function(a,b){return sa(a,b,!0)},"merge","Use `assign`."),ua=1,va=/mobile|tablet|ip(ad|hone|od)|android/i,wa="ontouchstart"in a,xa=u(a,"PointerEvent")!==d,ya=wa&&va.test(navigator.userAgent),za="touch",Aa="pen",Ba="mouse",Ca="kinect",Da=25,Ea=1,Fa=2,Ga=4,Ha=8,Ia=1,Ja=2,Ka=4,La=8,Ma=16,Na=Ja|Ka,Oa=La|Ma,Pa=Na|Oa,Qa=["x","y"],Ra=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Sa={mousedown:Ea,mousemove:Fa,mouseup:Ga},Ta="mousedown",Ua="mousemove mouseup";i(L,x,{handler:function(a){var b=Sa[a.type];b&Ea&&0===a.button&&(this.pressed=!0),b&Fa&&1!==a.which&&(b=Ga),this.pressed&&(b&Ga&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Ba,srcEvent:a}))}});var Va={pointerdown:Ea,pointermove:Fa,pointerup:Ga,pointercancel:Ha,pointerout:Ha},Wa={2:za,3:Aa,4:Ba,5:Ca},Xa="pointerdown",Ya="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Xa="MSPointerDown",Ya="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Va[d],f=Wa[a.pointerType]||a.pointerType,g=f==za,h=r(b,a.pointerId,"pointerId");e&Ea&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ga|Ha)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Za={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},$a="touchstart",_a="touchstart touchmove touchend touchcancel";i(N,x,{handler:function(a){var b=Za[a.type];if(b===Ea&&(this.started=!0),this.started){var c=O.call(this,a,b);b&(Ga|Ha)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}}});var ab={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},bb="touchstart touchmove touchend touchcancel";i(P,x,{handler:function(a){var b=ab[a.type],c=Q.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}});var cb=2500,db=25;i(R,x,{handler:function(a,b,c){var d=c.pointerType==za,e=c.pointerType==Ba;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)S.call(this,b,c);else if(e&&U.call(this,c))return;this.callback(a,b,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var eb=u(na.style,"touchAction"),fb=eb!==d,gb="compute",hb="auto",ib="manipulation",jb="none",kb="pan-x",lb="pan-y",mb=X();V.prototype={set:function(a){a==gb&&(a=this.compute()),fb&&this.manager.element.style&&mb[a]&&(this.manager.element.style[eb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){k(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),W(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=p(d,jb)&&!mb[jb],f=p(d,lb)&&!mb[lb],g=p(d,kb)&&!mb[kb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j)return}return g&&f?void 0:e||f&&c&Na||g&&c&Oa?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var nb=1,ob=2,pb=4,qb=8,rb=qb,sb=16,tb=32;Y.prototype={defaults:{},set:function(a){return la(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=_(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=_(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=_(a,this),-1===r(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=_(a,this);var b=r(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;qb>d&&b(c.options.event+Z(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=qb&&b(c.options.event+Z(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=tb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(tb|nb)))return!1;a++}return!0},recognize:function(a){var b=la({},a);return k(this.options.enable,[this,b])?(this.state&(rb|sb|tb)&&(this.state=nb),this.state=this.process(b),void(this.state&(ob|pb|qb|sb)&&this.tryEmit(b))):(this.reset(),void(this.state=tb))},process:function(a){},getTouchAction:function(){},reset:function(){}},i(aa,Y,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(ob|pb),e=this.attrTest(a);return d&&(c&Ha||!e)?b|sb:d||e?c&Ga?b|qb:b&ob?b|pb:ob:tb}}),i(ba,aa,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,b=[];return a&Na&&b.push(lb),a&Oa&&b.push(kb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Na?(e=0===f?Ia:0>f?Ja:Ka,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ia:0>g?La:Ma,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return aa.prototype.attrTest.call(this,a)&&(this.state&ob||!(this.state&ob)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),i(ca,aa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&ob)},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),i(da,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ga|Ha)&&!f)this.reset();else if(a.eventType&Ea)this.reset(),this._timer=e(function(){this.state=rb,this.tryEmit()},b.time,this);else if(a.eventType&Ga)return rb;return tb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===rb&&(a&&a.eventType&Ga?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ra(),this.manager.emit(this.options.event,this._input)))}}),i(ea,aa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&ob)}}),i(fa,aa,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Na|Oa,pointers:1},getTouchAction:function(){return ba.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Na|Oa)?b=a.overallVelocity:c&Na?b=a.overallVelocityX:c&Oa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&qa(b)>this.options.velocity&&a.eventType&Ga},emit:function(a){var b=$(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),i(ga,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ib]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&Ea&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ga)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=rb,this.tryEmit()},b.interval,this),ob):rb}return tb},failTimeout:function(){return this._timer=e(function(){this.state=tb},this.options.interval,this),tb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ha.VERSION="2.0.8",ha.defaults={domEvents:!1,touchAction:gb,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[ca,{enable:!1},["rotate"]],[fa,{direction:Na}],[ba,{direction:Na},["swipe"]],[ga],[ga,{event:"doubletap",taps:2},["tap"]],[da]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ub=1,vb=2;ia.prototype={set:function(a){return la(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?vb:ub},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&rb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===vb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(ob|pb|qb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Y)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers,c=r(b,a);-1!==c&&(b.splice(c,1),this.touchAction.update())}return this},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return g(q(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this}},off:function(a,b){if(a!==d){var c=this.handlers;return g(q(a),function(a){b?c[a]&&c[a].splice(r(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&ka(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ja(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},la(ha,{INPUT_START:Ea,INPUT_MOVE:Fa,INPUT_END:Ga,INPUT_CANCEL:Ha,STATE_POSSIBLE:nb,STATE_BEGAN:ob,STATE_CHANGED:pb,STATE_ENDED:qb,STATE_RECOGNIZED:rb,STATE_CANCELLED:sb,STATE_FAILED:tb,DIRECTION_NONE:Ia,DIRECTION_LEFT:Ja,DIRECTION_RIGHT:Ka,DIRECTION_UP:La,DIRECTION_DOWN:Ma,DIRECTION_HORIZONTAL:Na,DIRECTION_VERTICAL:Oa,DIRECTION_ALL:Pa,Manager:ia,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:Y,AttrRecognizer:aa,Tap:ga,Pan:ba,Swipe:fa,Pinch:ca,Rotate:ea,Press:da,on:m,off:n,each:g,merge:ta,extend:sa,assign:la,inherit:i,bindFn:j,prefixed:u});var wb="undefined"!=typeof a?a:"undefined"!=typeof self?self:{};wb.Hammer=ha,"function"==typeof define&&define.amd?define(function(){return ha}):"undefined"!=typeof module&&module.exports?module.exports=ha:a[c]=ha}(window,document,"Hammer");
//# sourceMappingURL=hammer.min.js.map
// https://d3js.org v7.8.5 Copyright 2010-2023 Mike Bostock
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).d3=t.d3||{})}(this,(function(t){"use strict";function n(t,n){return null==t||null==n?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function e(t,n){return null==t||null==n?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function r(t){let r,o,a;function u(t,n,e=0,i=t.length){if(e<i){if(0!==r(n,n))return i;do{const r=e+i>>>1;o(t[r],n)<0?e=r+1:i=r}while(e<i)}return e}return 2!==t.length?(r=n,o=(e,r)=>n(t(e),r),a=(n,e)=>t(n)-e):(r=t===n||t===e?t:i,o=t,a=t),{left:u,center:function(t,n,e=0,r=t.length){const i=u(t,n,e,r-1);return i>e&&a(t[i-1],n)>-a(t[i],n)?i-1:i},right:function(t,n,e=0,i=t.length){if(e<i){if(0!==r(n,n))return i;do{const r=e+i>>>1;o(t[r],n)<=0?e=r+1:i=r}while(e<i)}return e}}}function i(){return 0}function o(t){return null===t?NaN:+t}const a=r(n),u=a.right,c=a.left,f=r(o).center;var s=u;const l=d(y),h=d((function(t){const n=y(t);return(t,e,r,i,o)=>{n(t,e,(r<<=2)+0,(i<<=2)+0,o<<=2),n(t,e,r+1,i+1,o),n(t,e,r+2,i+2,o),n(t,e,r+3,i+3,o)}}));function d(t){return function(n,e,r=e){if(!((e=+e)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:o,height:a}=n;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((a=Math.floor(void 0!==a?a:i.length/o))>=0))throw new RangeError("invalid height");if(!o||!a||!e&&!r)return n;const u=e&&t(e),c=r&&t(r),f=i.slice();return u&&c?(p(u,f,i,o,a),p(u,i,f,o,a),p(u,f,i,o,a),g(c,i,f,o,a),g(c,f,i,o,a),g(c,i,f,o,a)):u?(p(u,i,f,o,a),p(u,f,i,o,a),p(u,i,f,o,a)):c&&(g(c,i,f,o,a),g(c,f,i,o,a),g(c,i,f,o,a)),n}}function p(t,n,e,r,i){for(let o=0,a=r*i;o<a;)t(n,e,o,o+=r,1)}function g(t,n,e,r,i){for(let o=0,a=r*i;o<r;++o)t(n,e,o,o+a,r)}function y(t){const n=Math.floor(t);if(n===t)return function(t){const n=2*t+1;return(e,r,i,o,a)=>{if(!((o-=a)>=i))return;let u=t*r[i];const c=a*t;for(let t=i,n=i+c;t<n;t+=a)u+=r[Math.min(o,t)];for(let t=i,f=o;t<=f;t+=a)u+=r[Math.min(o,t+c)],e[t]=u/n,u-=r[Math.max(i,t-c)]}}(t);const e=t-n,r=2*t+1;return(t,i,o,a,u)=>{if(!((a-=u)>=o))return;let c=n*i[o];const f=u*n,s=f+u;for(let t=o,n=o+f;t<n;t+=u)c+=i[Math.min(a,t)];for(let n=o,l=a;n<=l;n+=u)c+=i[Math.min(a,n+f)],t[n]=(c+e*(i[Math.max(o,n-s)]+i[Math.min(a,n+s)]))/r,c-=i[Math.max(o,n-f)]}}function v(t,n){let e=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&++e;else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(i=+i)>=i&&++e}return e}function _(t){return 0|t.length}function b(t){return!(t>0)}function m(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function x(t,n){let e,r=0,i=0,o=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(e=n-i,i+=e/++r,o+=e*(n-i));else{let a=-1;for(let u of t)null!=(u=n(u,++a,t))&&(u=+u)>=u&&(e=u-i,i+=e/++r,o+=e*(u-i))}if(r>1)return o/(r-1)}function w(t,n){const e=x(t,n);return e?Math.sqrt(e):e}function M(t,n){let e,r;if(void 0===n)for(const n of t)null!=n&&(void 0===e?n>=n&&(e=r=n):(e>n&&(e=n),r<n&&(r=n)));else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(void 0===e?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}class T{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const i=n[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(n[e++]=a),t=o}return n[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let n,e,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(n=o,e=t[--i],o=n+e,r=e-(o-n),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(e=2*r,n=o+e,e==n-o&&(o=n))}return o}}class InternMap extends Map{constructor(t,n=N){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const[n,e]of t)this.set(n,e)}get(t){return super.get(A(this,t))}has(t){return super.has(A(this,t))}set(t,n){return super.set(S(this,t),n)}delete(t){return super.delete(E(this,t))}}class InternSet extends Set{constructor(t,n=N){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const n of t)this.add(n)}has(t){return super.has(A(this,t))}add(t){return super.add(S(this,t))}delete(t){return super.delete(E(this,t))}}function A({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function S({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function E({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function N(t){return null!==t&&"object"==typeof t?t.valueOf():t}function k(t){return t}function C(t,...n){return F(t,k,k,n)}function P(t,...n){return F(t,Array.from,k,n)}function z(t,n){for(let e=1,r=n.length;e<r;++e)t=t.flatMap((t=>t.pop().map((([n,e])=>[...t,n,e]))));return t}function $(t,n,...e){return F(t,k,n,e)}function D(t,n,...e){return F(t,Array.from,n,e)}function R(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function F(t,n,e,r){return function t(i,o){if(o>=r.length)return e(i);const a=new InternMap,u=r[o++];let c=-1;for(const t of i){const n=u(t,++c,i),e=a.get(n);e?e.push(t):a.set(n,[t])}for(const[n,e]of a)a.set(n,t(e,o));return n(a)}(t,0)}function q(t,n){return Array.from(n,(n=>t[n]))}function U(t,...n){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[e]=n;if(e&&2!==e.length||n.length>1){const r=Uint32Array.from(t,((t,n)=>n));return n.length>1?(n=n.map((n=>t.map(n))),r.sort(((t,e)=>{for(const r of n){const n=O(r[t],r[e]);if(n)return n}}))):(e=t.map(e),r.sort(((t,n)=>O(e[t],e[n])))),q(t,r)}return t.sort(I(e))}function I(t=n){if(t===n)return O;if("function"!=typeof t)throw new TypeError("compare is not a function");return(n,e)=>{const r=t(n,e);return r||0===r?r:(0===t(e,e))-(0===t(n,n))}}function O(t,n){return(null==t||!(t>=t))-(null==n||!(n>=n))||(t<n?-1:t>n?1:0)}var B=Array.prototype.slice;function Y(t){return()=>t}const L=Math.sqrt(50),j=Math.sqrt(10),H=Math.sqrt(2);function X(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=L?10:o>=j?5:o>=H?2:1;let u,c,f;return i<0?(f=Math.pow(10,-i)/a,u=Math.round(t*f),c=Math.round(n*f),u/f<t&&++u,c/f>n&&--c,f=-f):(f=Math.pow(10,i)*a,u=Math.round(t/f),c=Math.round(n/f),u*f<t&&++u,c*f>n&&--c),c<u&&.5<=e&&e<2?X(t,n,2*e):[u,c,f]}function G(t,n,e){if(!((e=+e)>0))return[];if((t=+t)===(n=+n))return[t];const r=n<t,[i,o,a]=r?X(n,t,e):X(t,n,e);if(!(o>=i))return[];const u=o-i+1,c=new Array(u);if(r)if(a<0)for(let t=0;t<u;++t)c[t]=(o-t)/-a;else for(let t=0;t<u;++t)c[t]=(o-t)*a;else if(a<0)for(let t=0;t<u;++t)c[t]=(i+t)/-a;else for(let t=0;t<u;++t)c[t]=(i+t)*a;return c}function V(t,n,e){return X(t=+t,n=+n,e=+e)[2]}function W(t,n,e){e=+e;const r=(n=+n)<(t=+t),i=r?V(n,t,e):V(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}function Z(t,n,e){let r;for(;;){const i=V(t,n,e);if(i===r||0===i||!isFinite(i))return[t,n];i>0?(t=Math.floor(t/i)*i,n=Math.ceil(n/i)*i):i<0&&(t=Math.ceil(t*i)/i,n=Math.floor(n*i)/i),r=i}}function K(t){return Math.max(1,Math.ceil(Math.log(v(t))/Math.LN2)+1)}function Q(){var t=k,n=M,e=K;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,a,u=r.length,c=new Array(u);for(i=0;i<u;++i)c[i]=t(r[i],i,r);var f=n(c),l=f[0],h=f[1],d=e(c,l,h);if(!Array.isArray(d)){const t=h,e=+d;if(n===M&&([l,h]=Z(l,h,e)),(d=G(l,h,e))[0]<=l&&(a=V(l,h,e)),d[d.length-1]>=h)if(t>=h&&n===M){const t=V(l,h,e);isFinite(t)&&(t>0?h=(Math.floor(h/t)+1)*t:t<0&&(h=(Math.ceil(h*-t)+1)/-t))}else d.pop()}for(var p=d.length,g=0,y=p;d[g]<=l;)++g;for(;d[y-1]>h;)--y;(g||y<p)&&(d=d.slice(g,y),p=y-g);var v,_=new Array(p+1);for(i=0;i<=p;++i)(v=_[i]=[]).x0=i>0?d[i-1]:l,v.x1=i<p?d[i]:h;if(isFinite(a)){if(a>0)for(i=0;i<u;++i)null!=(o=c[i])&&l<=o&&o<=h&&_[Math.min(p,Math.floor((o-l)/a))].push(r[i]);else if(a<0)for(i=0;i<u;++i)if(null!=(o=c[i])&&l<=o&&o<=h){const t=Math.floor((l-o)*a);_[Math.min(p,t+(d[t]<=o))].push(r[i])}}else for(i=0;i<u;++i)null!=(o=c[i])&&l<=o&&o<=h&&_[s(d,o,0,p)].push(r[i]);return _}return r.value=function(n){return arguments.length?(t="function"==typeof n?n:Y(n),r):t},r.domain=function(t){return arguments.length?(n="function"==typeof t?t:Y([t[0],t[1]]),r):n},r.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Y(Array.isArray(t)?B.call(t):t),r):e},r}function J(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e<n||void 0===e&&n>=n)&&(e=n);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e<i||void 0===e&&i>=i)&&(e=i)}return e}function tt(t,n){let e,r=-1,i=-1;if(void 0===n)for(const n of t)++i,null!=n&&(e<n||void 0===e&&n>=n)&&(e=n,r=i);else for(let o of t)null!=(o=n(o,++i,t))&&(e<o||void 0===e&&o>=o)&&(e=o,r=i);return r}function nt(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e>n||void 0===e&&n>=n)&&(e=n);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e>i||void 0===e&&i>=i)&&(e=i)}return e}function et(t,n){let e,r=-1,i=-1;if(void 0===n)for(const n of t)++i,null!=n&&(e>n||void 0===e&&n>=n)&&(e=n,r=i);else for(let o of t)null!=(o=n(o,++i,t))&&(e>o||void 0===e&&o>=o)&&(e=o,r=i);return r}function rt(t,n,e=0,r=1/0,i){if(n=Math.floor(n),e=Math.floor(Math.max(0,e)),r=Math.floor(Math.min(t.length-1,r)),!(e<=n&&n<=r))return t;for(i=void 0===i?O:I(i);r>e;){if(r-e>600){const o=r-e+1,a=n-e+1,u=Math.log(o),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(o-c)/o)*(a-o/2<0?-1:1);rt(t,n,Math.max(e,Math.floor(n-a*c/o+f)),Math.min(r,Math.floor(n+(o-a)*c/o+f)),i)}const o=t[n];let a=e,u=r;for(it(t,e,n),i(t[r],o)>0&&it(t,e,r);a<u;){for(it(t,a,u),++a,--u;i(t[a],o)<0;)++a;for(;i(t[u],o)>0;)--u}0===i(t[e],o)?it(t,e,u):(++u,it(t,u,r)),u<=n&&(e=u+1),n<=u&&(r=u-1)}return t}function it(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function ot(t,e=n){let r,i=!1;if(1===e.length){let o;for(const a of t){const t=e(a);(i?n(t,o)>0:0===n(t,t))&&(r=a,o=t,i=!0)}}else for(const n of t)(i?e(n,r)>0:0===e(n,n))&&(r=n,i=!0);return r}function at(t,n,e){if(t=Float64Array.from(function*(t,n){if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let e=-1;for(let r of t)null!=(r=n(r,++e,t))&&(r=+r)>=r&&(yield r)}}(t,e)),(r=t.length)&&!isNaN(n=+n)){if(n<=0||r<2)return nt(t);if(n>=1)return J(t);var r,i=(r-1)*n,o=Math.floor(i),a=J(rt(t,o).subarray(0,o+1));return a+(nt(t.subarray(o+1))-a)*(i-o)}}function ut(t,n,e=o){if((r=t.length)&&!isNaN(n=+n)){if(n<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,i=(r-1)*n,a=Math.floor(i),u=+e(t[a],a,t);return u+(+e(t[a+1],a+1,t)-u)*(i-a)}}function ct(t,n,e=o){if(!isNaN(n=+n)){if(r=Float64Array.from(t,((n,r)=>o(e(t[r],r,t)))),n<=0)return et(r);if(n>=1)return tt(r);var r,i=Uint32Array.from(t,((t,n)=>n)),a=r.length-1,u=Math.floor(a*n);return rt(i,u,0,a,((t,n)=>O(r[t],r[n]))),(u=ot(i.subarray(0,u+1),(t=>r[t])))>=0?u:-1}}function ft(t){return Array.from(function*(t){for(const n of t)yield*n}(t))}function st(t,n){return[t,n]}function lt(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}function ht(t,e=n){if(1===e.length)return et(t,e);let r,i=-1,o=-1;for(const n of t)++o,(i<0?0===e(n,n):e(n,r)<0)&&(r=n,i=o);return i}var dt=pt(Math.random);function pt(t){return function(n,e=0,r=n.length){let i=r-(e=+e);for(;i;){const r=t()*i--|0,o=n[i+e];n[i+e]=n[r+e],n[r+e]=o}return n}}function gt(t){if(!(i=t.length))return[];for(var n=-1,e=nt(t,yt),r=new Array(e);++n<e;)for(var i,o=-1,a=r[n]=new Array(i);++o<i;)a[o]=t[o][n];return r}function yt(t){return t.length}function vt(t){return t instanceof InternSet?t:new InternSet(t)}function _t(t,n){const e=t[Symbol.iterator](),r=new Set;for(const t of n){const n=bt(t);if(r.has(n))continue;let i,o;for(;({value:i,done:o}=e.next());){if(o)return!1;const t=bt(i);if(r.add(t),Object.is(n,t))break}}return!0}function bt(t){return null!==t&&"object"==typeof t?t.valueOf():t}function mt(t){return t}var xt=1,wt=2,Mt=3,Tt=4,At=1e-6;function St(t){return"translate("+t+",0)"}function Et(t){return"translate(0,"+t+")"}function Nt(t){return n=>+t(n)}function kt(t,n){return n=Math.max(0,t.bandwidth()-2*n)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function Ct(){return!this.__axis}function Pt(t,n){var e=[],r=null,i=null,o=6,a=6,u=3,c="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,f=t===xt||t===Tt?-1:1,s=t===Tt||t===wt?"x":"y",l=t===xt||t===Mt?St:Et;function h(h){var d=null==r?n.ticks?n.ticks.apply(n,e):n.domain():r,p=null==i?n.tickFormat?n.tickFormat.apply(n,e):mt:i,g=Math.max(o,0)+u,y=n.range(),v=+y[0]+c,_=+y[y.length-1]+c,b=(n.bandwidth?kt:Nt)(n.copy(),c),m=h.selection?h.selection():h,x=m.selectAll(".domain").data([null]),w=m.selectAll(".tick").data(d,n).order(),M=w.exit(),T=w.enter().append("g").attr("class","tick"),A=w.select("line"),S=w.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(T),A=A.merge(T.append("line").attr("stroke","currentColor").attr(s+"2",f*o)),S=S.merge(T.append("text").attr("fill","currentColor").attr(s,f*g).attr("dy",t===xt?"0em":t===Mt?"0.71em":"0.32em")),h!==m&&(x=x.transition(h),w=w.transition(h),A=A.transition(h),S=S.transition(h),M=M.transition(h).attr("opacity",At).attr("transform",(function(t){return isFinite(t=b(t))?l(t+c):this.getAttribute("transform")})),T.attr("opacity",At).attr("transform",(function(t){var n=this.parentNode.__axis;return l((n&&isFinite(n=n(t))?n:b(t))+c)}))),M.remove(),x.attr("d",t===Tt||t===wt?a?"M"+f*a+","+v+"H"+c+"V"+_+"H"+f*a:"M"+c+","+v+"V"+_:a?"M"+v+","+f*a+"V"+c+"H"+_+"V"+f*a:"M"+v+","+c+"H"+_),w.attr("opacity",1).attr("transform",(function(t){return l(b(t)+c)})),A.attr(s+"2",f*o),S.attr(s,f*g).text(p),m.filter(Ct).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===wt?"start":t===Tt?"end":"middle"),m.each((function(){this.__axis=b}))}return h.scale=function(t){return arguments.length?(n=t,h):n},h.ticks=function(){return e=Array.from(arguments),h},h.tickArguments=function(t){return arguments.length?(e=null==t?[]:Array.from(t),h):e.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(o=a=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(a=+t,h):a},h.tickPadding=function(t){return arguments.length?(u=+t,h):u},h.offset=function(t){return arguments.length?(c=+t,h):c},h}var zt={value:()=>{}};function $t(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Dt(r)}function Dt(t){this._=t}function Rt(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function Ft(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=zt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}Dt.prototype=$t.prototype={constructor:Dt,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))),a=-1,u=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++a<u;)if(e=(t=o[a]).type)i[e]=Ft(i[e],t.name,n);else if(null==n)for(e in i)i[e]=Ft(i[e],t.name,null);return this}for(;++a<u;)if((e=(t=o[a]).type)&&(e=Rt(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Dt(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var qt="http://www.w3.org/1999/xhtml",Ut={svg:"http://www.w3.org/2000/svg",xhtml:qt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function It(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Ut.hasOwnProperty(n)?{space:Ut[n],local:t}:t}function Ot(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===qt&&n.documentElement.namespaceURI===qt?n.createElement(t):n.createElementNS(e,t)}}function Bt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Yt(t){var n=It(t);return(n.local?Bt:Ot)(n)}function Lt(){}function jt(t){return null==t?Lt:function(){return this.querySelector(t)}}function Ht(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Xt(){return[]}function Gt(t){return null==t?Xt:function(){return this.querySelectorAll(t)}}function Vt(t){return function(){return this.matches(t)}}function Wt(t){return function(n){return n.matches(t)}}var Zt=Array.prototype.find;function Kt(){return this.firstElementChild}var Qt=Array.prototype.filter;function Jt(){return Array.from(this.children)}function tn(t){return new Array(t.length)}function nn(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function en(t,n,e,r,i,o){for(var a,u=0,c=n.length,f=o.length;u<f;++u)(a=n[u])?(a.__data__=o[u],r[u]=a):e[u]=new nn(t,o[u]);for(;u<c;++u)(a=n[u])&&(i[u]=a)}function rn(t,n,e,r,i,o,a){var u,c,f,s=new Map,l=n.length,h=o.length,d=new Array(l);for(u=0;u<l;++u)(c=n[u])&&(d[u]=f=a.call(c,c.__data__,u,n)+"",s.has(f)?i[u]=c:s.set(f,c));for(u=0;u<h;++u)f=a.call(t,o[u],u,o)+"",(c=s.get(f))?(r[u]=c,c.__data__=o[u],s.delete(f)):e[u]=new nn(t,o[u]);for(u=0;u<l;++u)(c=n[u])&&s.get(d[u])===c&&(i[u]=c)}function on(t){return t.__data__}function an(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function un(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function cn(t){return function(){this.removeAttribute(t)}}function fn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function sn(t,n){return function(){this.setAttribute(t,n)}}function ln(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function hn(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function dn(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function pn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function gn(t){return function(){this.style.removeProperty(t)}}function yn(t,n,e){return function(){this.style.setProperty(t,n,e)}}function vn(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function _n(t,n){return t.style.getPropertyValue(n)||pn(t).getComputedStyle(t,null).getPropertyValue(n)}function bn(t){return function(){delete this[t]}}function mn(t,n){return function(){this[t]=n}}function xn(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function wn(t){return t.trim().split(/^|\s+/)}function Mn(t){return t.classList||new Tn(t)}function Tn(t){this._node=t,this._names=wn(t.getAttribute("class")||"")}function An(t,n){for(var e=Mn(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Sn(t,n){for(var e=Mn(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function En(t){return function(){An(this,t)}}function Nn(t){return function(){Sn(this,t)}}function kn(t,n){return function(){(n.apply(this,arguments)?An:Sn)(this,t)}}function Cn(){this.textContent=""}function Pn(t){return function(){this.textContent=t}}function zn(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function $n(){this.innerHTML=""}function Dn(t){return function(){this.innerHTML=t}}function Rn(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function Fn(){this.nextSibling&&this.parentNode.appendChild(this)}function qn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Un(){return null}function In(){var t=this.parentNode;t&&t.removeChild(this)}function On(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Bn(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Yn(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?n.length=i:delete this.__on}}}function Ln(t,n,e){return function(){var r,i=this.__on,o=function(t){return function(n){t.call(this,n,this.__data__)}}(n);if(i)for(var a=0,u=i.length;a<u;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),void(r.value=n);this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function jn(t,n,e){var r=pn(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function Hn(t,n){return function(){return jn(this,t,n)}}function Xn(t,n){return function(){return jn(this,t,n.apply(this,arguments))}}nn.prototype={constructor:nn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Tn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Gn=[null];function Vn(t,n){this._groups=t,this._parents=n}function Wn(){return new Vn([[document.documentElement]],Gn)}function Zn(t){return"string"==typeof t?new Vn([[document.querySelector(t)]],[document.documentElement]):new Vn([[t]],Gn)}Vn.prototype=Wn.prototype={constructor:Vn,select:function(t){"function"!=typeof t&&(t=jt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,u=n[i],c=u.length,f=r[i]=new Array(c),s=0;s<c;++s)(o=u[s])&&(a=t.call(o,o.__data__,s,u))&&("__data__"in o&&(a.__data__=o.__data__),f[s]=a);return new Vn(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return Ht(t.apply(this,arguments))}}(t):Gt(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a,u=n[o],c=u.length,f=0;f<c;++f)(a=u[f])&&(r.push(t.call(a,a.__data__,f,u)),i.push(a));return new Vn(r,i)},selectChild:function(t){return this.select(null==t?Kt:function(t){return function(){return Zt.call(this.children,t)}}("function"==typeof t?t:Wt(t)))},selectChildren:function(t){return this.selectAll(null==t?Jt:function(t){return function(){return Qt.call(this.children,t)}}("function"==typeof t?t:Wt(t)))},filter:function(t){"function"!=typeof t&&(t=Vt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,c=r[i]=[],f=0;f<u;++f)(o=a[f])&&t.call(o,o.__data__,f,a)&&c.push(o);return new Vn(r,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,on);var e=n?rn:en,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,a=new Array(o),u=new Array(o),c=new Array(o),f=0;f<o;++f){var s=r[f],l=i[f],h=l.length,d=an(t.call(s,s&&s.__data__,f,r)),p=d.length,g=u[f]=new Array(p),y=a[f]=new Array(p);e(s,l,g,y,c[f]=new Array(h),d,n);for(var v,_,b=0,m=0;b<p;++b)if(v=g[b]){for(b>=m&&(m=b+1);!(_=y[m])&&++m<p;);v._next=_||null}}return(a=new Vn(a,r))._enter=u,a._exit=c,a},enter:function(){return new Vn(this._enter||this._groups.map(tn),this._parents)},exit:function(){return new Vn(this._exit||this._groups.map(tn),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=n&&(i=n(i))&&(i=i.selection()),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,a=Math.min(i,o),u=new Array(i),c=0;c<a;++c)for(var f,s=e[c],l=r[c],h=s.length,d=u[c]=new Array(h),p=0;p<h;++p)(f=s[p]||l[p])&&(d[p]=f);for(;c<i;++c)u[c]=e[c];return new Vn(u,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=un);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,u=e[o],c=u.length,f=i[o]=new Array(c),s=0;s<c;++s)(a=u[s])&&(f[s]=a);f.sort(n)}return new Vn(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const n of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=It(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?fn:cn:"function"==typeof n?e.local?dn:hn:e.local?ln:sn)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?gn:"function"==typeof n?vn:yn)(t,n,null==e?"":e)):_n(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?bn:"function"==typeof n?xn:mn)(t,n)):this.node()[t]},classed:function(t,n){var e=wn(t+"");if(arguments.length<2){for(var r=Mn(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?kn:n?En:Nn)(e,n))},text:function(t){return arguments.length?this.each(null==t?Cn:("function"==typeof t?zn:Pn)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?$n:("function"==typeof t?Rn:Dn)(t)):this.node().innerHTML},raise:function(){return this.each(Fn)},lower:function(){return this.each(qn)},append:function(t){var n="function"==typeof t?t:Yt(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,n){var e="function"==typeof t?t:Yt(t),r=null==n?Un:"function"==typeof n?n:jt(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(In)},clone:function(t){return this.select(t?Bn:On)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}(t+""),a=o.length;if(!(arguments.length<2)){for(u=n?Ln:Yn,r=0;r<a;++r)this.each(u(o[r],n,e));return this}var u=this.node().__on;if(u)for(var c,f=0,s=u.length;f<s;++f)for(r=0,c=u[f];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,n){return this.each(("function"==typeof n?Xn:Hn)(t,n))},[Symbol.iterator]:function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,i=t[n],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var Kn=0;function Qn(){return new Jn}function Jn(){this._="@"+(++Kn).toString(36)}function te(t){let n;for(;n=t.sourceEvent;)t=n;return t}function ne(t,n){if(t=te(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(n.getScreenCTM().inverse())).x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}Jn.prototype=Qn.prototype={constructor:Jn,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};const ee={passive:!1},re={capture:!0,passive:!1};function ie(t){t.stopImmediatePropagation()}function oe(t){t.preventDefault(),t.stopImmediatePropagation()}function ae(t){var n=t.document.documentElement,e=Zn(t).on("dragstart.drag",oe,re);"onselectstart"in n?e.on("selectstart.drag",oe,re):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function ue(t,n){var e=t.document.documentElement,r=Zn(t).on("dragstart.drag",null);n&&(r.on("click.drag",oe,re),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var ce=t=>()=>t;function fe(t,{sourceEvent:n,subject:e,target:r,identifier:i,active:o,x:a,y:u,dx:c,dy:f,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:s}})}function se(t){return!t.ctrlKey&&!t.button}function le(){return this.parentNode}function he(t,n){return null==n?{x:t.x,y:t.y}:n}function de(){return navigator.maxTouchPoints||"ontouchstart"in this}function pe(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function ge(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function ye(){}fe.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var ve=.7,_e=1/ve,be="\\s*([+-]?\\d+)\\s*",me="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",we=/^#([0-9a-f]{3,8})$/,Me=new RegExp(`^rgb\\(${be},${be},${be}\\)$`),Te=new RegExp(`^rgb\\(${xe},${xe},${xe}\\)$`),Ae=new RegExp(`^rgba\\(${be},${be},${be},${me}\\)$`),Se=new RegExp(`^rgba\\(${xe},${xe},${xe},${me}\\)$`),Ee=new RegExp(`^hsl\\(${me},${xe},${xe}\\)$`),Ne=new RegExp(`^hsla\\(${me},${xe},${xe},${me}\\)$`),ke={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ce(){return this.rgb().formatHex()}function Pe(){return this.rgb().formatRgb()}function ze(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=we.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?$e(n):3===e?new qe(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?De(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?De(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=Me.exec(t))?new qe(n[1],n[2],n[3],1):(n=Te.exec(t))?new qe(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Ae.exec(t))?De(n[1],n[2],n[3],n[4]):(n=Se.exec(t))?De(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=Ee.exec(t))?Le(n[1],n[2]/100,n[3]/100,1):(n=Ne.exec(t))?Le(n[1],n[2]/100,n[3]/100,n[4]):ke.hasOwnProperty(t)?$e(ke[t]):"transparent"===t?new qe(NaN,NaN,NaN,0):null}function $e(t){return new qe(t>>16&255,t>>8&255,255&t,1)}function De(t,n,e,r){return r<=0&&(t=n=e=NaN),new qe(t,n,e,r)}function Re(t){return t instanceof ye||(t=ze(t)),t?new qe((t=t.rgb()).r,t.g,t.b,t.opacity):new qe}function Fe(t,n,e,r){return 1===arguments.length?Re(t):new qe(t,n,e,null==r?1:r)}function qe(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Ue(){return`#${Ye(this.r)}${Ye(this.g)}${Ye(this.b)}`}function Ie(){const t=Oe(this.opacity);return`${1===t?"rgb(":"rgba("}${Be(this.r)}, ${Be(this.g)}, ${Be(this.b)}${1===t?")":`, ${t})`}`}function Oe(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Be(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ye(t){return((t=Be(t))<16?"0":"")+t.toString(16)}function Le(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Xe(t,n,e,r)}function je(t){if(t instanceof Xe)return new Xe(t.h,t.s,t.l,t.opacity);if(t instanceof ye||(t=ze(t)),!t)return new Xe;if(t instanceof Xe)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,u=o-i,c=(o+i)/2;return u?(a=n===o?(e-r)/u+6*(e<r):e===o?(r-n)/u+2:(n-e)/u+4,u/=c<.5?o+i:2-o-i,a*=60):u=c>0&&c<1?0:a,new Xe(a,u,c,t.opacity)}function He(t,n,e,r){return 1===arguments.length?je(t):new Xe(t,n,e,null==r?1:r)}function Xe(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Ge(t){return(t=(t||0)%360)<0?t+360:t}function Ve(t){return Math.max(0,Math.min(1,t||0))}function We(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}pe(ye,ze,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ce,formatHex:Ce,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return je(this).formatHsl()},formatRgb:Pe,toString:Pe}),pe(qe,Fe,ge(ye,{brighter(t){return t=null==t?_e:Math.pow(_e,t),new qe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?ve:Math.pow(ve,t),new qe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qe(Be(this.r),Be(this.g),Be(this.b),Oe(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ue,formatHex:Ue,formatHex8:function(){return`#${Ye(this.r)}${Ye(this.g)}${Ye(this.b)}${Ye(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ie,toString:Ie})),pe(Xe,He,ge(ye,{brighter(t){return t=null==t?_e:Math.pow(_e,t),new Xe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?ve:Math.pow(ve,t),new Xe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new qe(We(t>=240?t-240:t+120,i,r),We(t,i,r),We(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Xe(Ge(this.h),Ve(this.s),Ve(this.l),Oe(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Oe(this.opacity);return`${1===t?"hsl(":"hsla("}${Ge(this.h)}, ${100*Ve(this.s)}%, ${100*Ve(this.l)}%${1===t?")":`, ${t})`}`}}));const Ze=Math.PI/180,Ke=180/Math.PI,Qe=.96422,Je=1,tr=.82521,nr=4/29,er=6/29,rr=3*er*er,ir=er*er*er;function or(t){if(t instanceof ur)return new ur(t.l,t.a,t.b,t.opacity);if(t instanceof pr)return gr(t);t instanceof qe||(t=Re(t));var n,e,r=lr(t.r),i=lr(t.g),o=lr(t.b),a=cr((.2225045*r+.7168786*i+.0606169*o)/Je);return r===i&&i===o?n=e=a:(n=cr((.4360747*r+.3850649*i+.1430804*o)/Qe),e=cr((.0139322*r+.0971045*i+.7141733*o)/tr)),new ur(116*a-16,500*(n-a),200*(a-e),t.opacity)}function ar(t,n,e,r){return 1===arguments.length?or(t):new ur(t,n,e,null==r?1:r)}function ur(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function cr(t){return t>ir?Math.pow(t,1/3):t/rr+nr}function fr(t){return t>er?t*t*t:rr*(t-nr)}function sr(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function lr(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function hr(t){if(t instanceof pr)return new pr(t.h,t.c,t.l,t.opacity);if(t instanceof ur||(t=or(t)),0===t.a&&0===t.b)return new pr(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Ke;return new pr(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function dr(t,n,e,r){return 1===arguments.length?hr(t):new pr(t,n,e,null==r?1:r)}function pr(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function gr(t){if(isNaN(t.h))return new ur(t.l,0,0,t.opacity);var n=t.h*Ze;return new ur(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}pe(ur,ar,ge(ye,{brighter(t){return new ur(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new ur(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new qe(sr(3.1338561*(n=Qe*fr(n))-1.6168667*(t=Je*fr(t))-.4906146*(e=tr*fr(e))),sr(-.9787684*n+1.9161415*t+.033454*e),sr(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),pe(pr,dr,ge(ye,{brighter(t){return new pr(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new pr(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return gr(this).rgb()}}));var yr=-.14861,vr=1.78277,_r=-.29227,br=-.90649,mr=1.97294,xr=mr*br,wr=mr*vr,Mr=vr*_r-br*yr;function Tr(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof Ar)return new Ar(t.h,t.s,t.l,t.opacity);t instanceof qe||(t=Re(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(Mr*r+xr*n-wr*e)/(Mr+xr-wr),o=r-i,a=(mr*(e-i)-_r*o)/br,u=Math.sqrt(a*a+o*o)/(mr*i*(1-i)),c=u?Math.atan2(a,o)*Ke-120:NaN;return new Ar(c<0?c+360:c,u,i,t.opacity)}(t):new Ar(t,n,e,null==r?1:r)}function Ar(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Sr(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}function Er(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,u=r<n-1?t[r+2]:2*o-i;return Sr((e-r/n)*n,a,i,o,u)}}function Nr(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],a=t[(r+1)%n],u=t[(r+2)%n];return Sr((e-r/n)*n,i,o,a,u)}}pe(Ar,Tr,ge(ye,{brighter(t){return t=null==t?_e:Math.pow(_e,t),new Ar(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?ve:Math.pow(ve,t),new Ar(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Ze,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new qe(255*(n+e*(yr*r+vr*i)),255*(n+e*(_r*r+br*i)),255*(n+e*(mr*r)),this.opacity)}}));var kr=t=>()=>t;function Cr(t,n){return function(e){return t+e*n}}function Pr(t,n){var e=n-t;return e?Cr(t,e>180||e<-180?e-360*Math.round(e/360):e):kr(isNaN(t)?n:t)}function zr(t){return 1==(t=+t)?$r:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):kr(isNaN(n)?e:n)}}function $r(t,n){var e=n-t;return e?Cr(t,e):kr(isNaN(t)?n:t)}var Dr=function t(n){var e=zr(n);function r(t,n){var r=e((t=Fe(t)).r,(n=Fe(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),a=$r(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function Rr(t){return function(n){var e,r,i=n.length,o=new Array(i),a=new Array(i),u=new Array(i);for(e=0;e<i;++e)r=Fe(n[e]),o[e]=r.r||0,a[e]=r.g||0,u[e]=r.b||0;return o=t(o),a=t(a),u=t(u),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=u(t),r+""}}}var Fr=Rr(Er),qr=Rr(Nr);function Ur(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(o){for(e=0;e<r;++e)i[e]=t[e]*(1-o)+n[e]*o;return i}}function Ir(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Or(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=Gr(t[e],n[e]);for(;e<r;++e)a[e]=n[e];return function(t){for(e=0;e<i;++e)a[e]=o[e](t);return a}}function Br(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function Yr(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function Lr(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=Gr(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}var jr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hr=new RegExp(jr.source,"g");function Xr(t,n){var e,r,i,o=jr.lastIndex=Hr.lastIndex=0,a=-1,u=[],c=[];for(t+="",n+="";(e=jr.exec(t))&&(r=Hr.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,c.push({i:a,x:Yr(e,r)})),o=Hr.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?function(t){return function(n){return t(n)+""}}(c[0].x):function(t){return function(){return t}}(n):(n=c.length,function(t){for(var e,r=0;r<n;++r)u[(e=c[r]).i]=e.x(t);return u.join("")})}function Gr(t,n){var e,r=typeof n;return null==n||"boolean"===r?kr(n):("number"===r?Yr:"string"===r?(e=ze(n))?(n=e,Dr):Xr:n instanceof ze?Dr:n instanceof Date?Br:Ir(n)?Ur:Array.isArray(n)?Or:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?Lr:Yr)(t,n)}function Vr(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var Wr,Zr=180/Math.PI,Kr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qr(t,n,e,r,i,o){var a,u,c;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(c=t*e+n*r)&&(e-=t*c,r-=n*c),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,c/=u),t*r<n*e&&(t=-t,n=-n,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Zr,skewX:Math.atan(c)*Zr,scaleX:a,scaleY:u}}function Jr(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],c=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var c=a.push("translate(",null,n,null,e);u.push({i:c-4,x:Yr(t,i)},{i:c-2,x:Yr(r,o)})}else(i||o)&&a.push("translate("+i+n+o+e)}(o.translateX,o.translateY,a.translateX,a.translateY,u,c),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:Yr(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,a.rotate,u,c),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:Yr(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,a.skewX,u,c),function(t,n,e,r,o,a){if(t!==e||n!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:Yr(t,e)},{i:u-2,x:Yr(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,c),o=a=null,function(t){for(var n,e=-1,r=c.length;++e<r;)u[(n=c[e]).i]=n.x(t);return u.join("")}}}var ti=Jr((function(t){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Kr:Qr(n.a,n.b,n.c,n.d,n.e,n.f)}),"px, ","px)","deg)"),ni=Jr((function(t){return null==t?Kr:(Wr||(Wr=document.createElementNS("http://www.w3.org/2000/svg","g")),Wr.setAttribute("transform",t),(t=Wr.transform.baseVal.consolidate())?Qr((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Kr)}),", ",")",")");function ei(t){return((t=Math.exp(t))+1/t)/2}var ri=function t(n,e,r){function i(t,i){var o,a,u=t[0],c=t[1],f=t[2],s=i[0],l=i[1],h=i[2],d=s-u,p=l-c,g=d*d+p*p;if(g<1e-12)a=Math.log(h/f)/n,o=function(t){return[u+t*d,c+t*p,f*Math.exp(n*t*a)]};else{var y=Math.sqrt(g),v=(h*h-f*f+r*g)/(2*f*e*y),_=(h*h-f*f-r*g)/(2*h*e*y),b=Math.log(Math.sqrt(v*v+1)-v),m=Math.log(Math.sqrt(_*_+1)-_);a=(m-b)/n,o=function(t){var r=t*a,i=ei(b),o=f/(e*y)*(i*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(n*r+b)-function(t){return((t=Math.exp(t))-1/t)/2}(b));return[u+o*d,c+o*p,f*i/ei(n*r+b)]}}return o.duration=1e3*a*n/Math.SQRT2,o}return i.rho=function(n){var e=Math.max(.001,+n),r=e*e;return t(e,r,r*r)},i}(Math.SQRT2,2,4);function ii(t){return function(n,e){var r=t((n=He(n)).h,(e=He(e)).h),i=$r(n.s,e.s),o=$r(n.l,e.l),a=$r(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=i(t),n.l=o(t),n.opacity=a(t),n+""}}}var oi=ii(Pr),ai=ii($r);function ui(t){return function(n,e){var r=t((n=dr(n)).h,(e=dr(e)).h),i=$r(n.c,e.c),o=$r(n.l,e.l),a=$r(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=o(t),n.opacity=a(t),n+""}}}var ci=ui(Pr),fi=ui($r);function si(t){return function n(e){function r(n,r){var i=t((n=Tr(n)).h,(r=Tr(r)).h),o=$r(n.s,r.s),a=$r(n.l,r.l),u=$r(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(Math.pow(t,e)),n.opacity=u(t),n+""}}return e=+e,r.gamma=n,r}(1)}var li=si(Pr),hi=si($r);function di(t,n){void 0===n&&(n=t,t=Gr);for(var e=0,r=n.length-1,i=n[0],o=new Array(r<0?0:r);e<r;)o[e]=t(i,i=n[++e]);return function(t){var n=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[n](t-n)}}var pi,gi,yi=0,vi=0,_i=0,bi=1e3,mi=0,xi=0,wi=0,Mi="object"==typeof performance&&performance.now?performance:Date,Ti="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ai(){return xi||(Ti(Si),xi=Mi.now()+wi)}function Si(){xi=0}function Ei(){this._call=this._time=this._next=null}function Ni(t,n,e){var r=new Ei;return r.restart(t,n,e),r}function ki(){Ai(),++yi;for(var t,n=pi;n;)(t=xi-n._time)>=0&&n._call.call(void 0,t),n=n._next;--yi}function Ci(){xi=(mi=Mi.now())+wi,yi=vi=0;try{ki()}finally{yi=0,function(){var t,n,e=pi,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:pi=n);gi=t,zi(r)}(),xi=0}}function Pi(){var t=Mi.now(),n=t-mi;n>bi&&(wi-=n,mi=t)}function zi(t){yi||(vi&&(vi=clearTimeout(vi)),t-xi>24?(t<1/0&&(vi=setTimeout(Ci,t-Mi.now()-wi)),_i&&(_i=clearInterval(_i))):(_i||(mi=Mi.now(),_i=setInterval(Pi,bi)),yi=1,Ti(Ci)))}function $i(t,n,e){var r=new Ei;return n=null==n?0:+n,r.restart((e=>{r.stop(),t(e+n)}),n,e),r}Ei.prototype=Ni.prototype={constructor:Ei,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?Ai():+e)+(null==n?0:+n),this._next||gi===this||(gi?gi._next=this:pi=this,gi=this),this._call=t,this._time=e,zi()},stop:function(){this._call&&(this._call=null,this._time=1/0,zi())}};var Di=$t("start","end","cancel","interrupt"),Ri=[],Fi=0,qi=1,Ui=2,Ii=3,Oi=4,Bi=5,Yi=6;function Li(t,n,e,r,i,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function o(t){e.state=qi,e.timer.restart(a,e.delay,e.time),e.delay<=t&&a(t-e.delay)}function a(o){var f,s,l,h;if(e.state!==qi)return c();for(f in i)if((h=i[f]).name===e.name){if(h.state===Ii)return $i(a);h.state===Oi?(h.state=Yi,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[f]):+f<n&&(h.state=Yi,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[f])}if($i((function(){e.state===Ii&&(e.state=Oi,e.timer.restart(u,e.delay,e.time),u(o))})),e.state=Ui,e.on.call("start",t,t.__data__,e.index,e.group),e.state===Ui){for(e.state=Ii,r=new Array(l=e.tween.length),f=0,s=-1;f<l;++f)(h=e.tween[f].value.call(t,t.__data__,e.index,e.group))&&(r[++s]=h);r.length=s+1}}function u(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(c),e.state=Bi,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);e.state===Bi&&(e.on.call("end",t,t.__data__,e.index,e.group),c())}function c(){for(var r in e.state=Yi,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=Ni(o,0,e.time)}(t,e,{name:n,index:r,group:i,on:Di,tween:Ri,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Fi})}function ji(t,n){var e=Xi(t,n);if(e.state>Fi)throw new Error("too late; already scheduled");return e}function Hi(t,n){var e=Xi(t,n);if(e.state>Ii)throw new Error("too late; already running");return e}function Xi(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Gi(t,n){var e,r,i,o=t.__transition,a=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>Ui&&e.state<Bi,e.state=Yi,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[i]):a=!1;a&&delete t.__transition}}function Vi(t,n){var e,r;return function(){var i=Hi(this,t),o=i.tween;if(o!==e)for(var a=0,u=(r=e=o).length;a<u;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}i.tween=r}}function Wi(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=Hi(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:n,value:e},c=0,f=i.length;c<f;++c)if(i[c].name===n){i[c]=u;break}c===f&&i.push(u)}o.tween=i}}function Zi(t,n,e){var r=t._id;return t.each((function(){var t=Hi(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return Xi(t,r).value[n]}}function Ki(t,n){var e;return("number"==typeof n?Yr:n instanceof ze?Dr:(e=ze(n))?(n=e,Dr):Xr)(t,n)}function Qi(t){return function(){this.removeAttribute(t)}}function Ji(t){return function(){this.removeAttributeNS(t.space,t.local)}}function to(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=n(r=a,e)}}function no(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=n(r=a,e)}}function eo(t,n,e){var r,i,o;return function(){var a,u,c=e(this);if(null!=c)return(a=this.getAttribute(t))===(u=c+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,c));this.removeAttribute(t)}}function ro(t,n,e){var r,i,o;return function(){var a,u,c=e(this);if(null!=c)return(a=this.getAttributeNS(t.space,t.local))===(u=c+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,c));this.removeAttributeNS(t.space,t.local)}}function io(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}(t,i)),e}return i._value=n,i}function oo(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}(t,i)),e}return i._value=n,i}function ao(t,n){return function(){ji(this,t).delay=+n.apply(this,arguments)}}function uo(t,n){return n=+n,function(){ji(this,t).delay=n}}function co(t,n){return function(){Hi(this,t).duration=+n.apply(this,arguments)}}function fo(t,n){return n=+n,function(){Hi(this,t).duration=n}}var so=Wn.prototype.constructor;function lo(t){return function(){this.style.removeProperty(t)}}var ho=0;function po(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function go(t){return Wn().transition(t)}function yo(){return++ho}var vo=Wn.prototype;po.prototype=go.prototype={constructor:po,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=jt(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,c,f=r[a],s=f.length,l=o[a]=new Array(s),h=0;h<s;++h)(u=f[h])&&(c=t.call(u,u.__data__,h,f))&&("__data__"in u&&(c.__data__=u.__data__),l[h]=c,Li(l[h],n,e,h,l,Xi(u,e)));return new po(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Gt(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var c,f=r[u],s=f.length,l=0;l<s;++l)if(c=f[l]){for(var h,d=t.call(c,c.__data__,l,f),p=Xi(c,e),g=0,y=d.length;g<y;++g)(h=d[g])&&Li(h,n,e,g,d,p);o.push(d),a.push(c)}return new po(o,a,n,e)},selectChild:vo.selectChild,selectChildren:vo.selectChildren,filter:function(t){"function"!=typeof t&&(t=Vt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,c=r[i]=[],f=0;f<u;++f)(o=a[f])&&t.call(o,o.__data__,f,a)&&c.push(o);return new po(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,f=n[u],s=e[u],l=f.length,h=a[u]=new Array(l),d=0;d<l;++d)(c=f[d]||s[d])&&(h[d]=c);for(;u<r;++u)a[u]=n[u];return new po(a,this._parents,this._name,this._id)},selection:function(){return new so(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=yo(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,f=0;f<c;++f)if(a=u[f]){var s=Xi(a,n);Li(a,t,e,f,u,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new po(r,this._parents,t,e)},call:vo.call,nodes:vo.nodes,node:vo.node,size:vo.size,empty:vo.empty,each:vo.each,on:function(t,n){var e=this._id;return arguments.length<2?Xi(this.node(),e).on.on(t):this.each(function(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}(n)?ji:Hi;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(n,e),a.on=i}}(e,t,n))},attr:function(t,n){var e=It(t),r="transform"===e?ni:Ki;return this.attrTween(t,"function"==typeof n?(e.local?ro:eo)(e,r,Zi(this,"attr."+t,n)):null==n?(e.local?Ji:Qi)(e):(e.local?no:to)(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=It(t);return this.tween(e,(r.local?io:oo)(r,n))},style:function(t,n,e){var r="transform"==(t+="")?ti:Ki;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=_n(this,t),a=(this.style.removeProperty(t),_n(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}(t,r)).on("end.style."+t,lo(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,i,o;return function(){var a=_n(this,t),u=e(this),c=u+"";return null==u&&(this.style.removeProperty(t),c=u=_n(this,t)),a===c?null:a===r&&c===i?o:(i=c,o=n(r=a,u))}}(t,r,Zi(this,"style."+t,n))).each(function(t,n){var e,r,i,o,a="style."+n,u="end."+a;return function(){var c=Hi(this,t),f=c.on,s=null==c.value[a]?o||(o=lo(n)):void 0;f===e&&i===s||(r=(e=f).copy()).on(u,i=s),c.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,i,o=e+"";return function(){var a=_n(this,t);return a===o?null:a===r?i:i=n(r=a,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}(t,o,e)),r}return o._value=n,o}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(Zi(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,function(t){var n,e;function r(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&function(t){return function(n){this.textContent=t.call(this,n)}}(r)),n}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Xi(this.node(),e).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?Vi:Wi)(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?ao:uo)(n,t)):Xi(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?co:fo)(n,t)):Xi(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){Hi(this,t).ease=n}}(n,t)):Xi(this.node(),n).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;Hi(this,t).ease=e}}(this._id,t))},end:function(){var t,n,e=this,r=e._id,i=e.size();return new Promise((function(o,a){var u={value:a},c={value:function(){0==--i&&o()}};e.each((function(){var e=Hi(this,r),i=e.on;i!==t&&((n=(t=i).copy())._.cancel.push(u),n._.interrupt.push(u),n._.end.push(c)),e.on=n})),0===i&&o()}))},[Symbol.iterator]:vo[Symbol.iterator]};function _o(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function bo(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var mo=function t(n){function e(t){return Math.pow(t,n)}return n=+n,e.exponent=t,e}(3),xo=function t(n){function e(t){return 1-Math.pow(1-t,n)}return n=+n,e.exponent=t,e}(3),wo=function t(n){function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,e.exponent=t,e}(3),Mo=Math.PI,To=Mo/2;function Ao(t){return(1-Math.cos(Mo*t))/2}function So(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function Eo(t){return((t*=2)<=1?So(1-t):2-So(t-1))/2}function No(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var ko=4/11,Co=6/11,Po=8/11,zo=3/4,$o=9/11,Do=10/11,Ro=15/16,Fo=21/22,qo=63/64,Uo=1/ko/ko;function Io(t){return(t=+t)<ko?Uo*t*t:t<Po?Uo*(t-=Co)*t+zo:t<Do?Uo*(t-=$o)*t+Ro:Uo*(t-=Fo)*t+qo}var Oo=1.70158,Bo=function t(n){function e(t){return(t=+t)*t*(n*(t-1)+t)}return n=+n,e.overshoot=t,e}(Oo),Yo=function t(n){function e(t){return--t*t*((t+1)*n+t)+1}return n=+n,e.overshoot=t,e}(Oo),Lo=function t(n){function e(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}return n=+n,e.overshoot=t,e}(Oo),jo=2*Math.PI,Ho=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=jo);function i(t){return n*So(- --t)*Math.sin((r-t)/e)}return i.amplitude=function(n){return t(n,e*jo)},i.period=function(e){return t(n,e)},i}(1,.3),Xo=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=jo);function i(t){return 1-n*So(t=+t)*Math.sin((t+r)/e)}return i.amplitude=function(n){return t(n,e*jo)},i.period=function(e){return t(n,e)},i}(1,.3),Go=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=jo);function i(t){return((t=2*t-1)<0?n*So(-t)*Math.sin((r-t)/e):2-n*So(t)*Math.sin((r+t)/e))/2}return i.amplitude=function(n){return t(n,e*jo)},i.period=function(e){return t(n,e)},i}(1,.3),Vo={time:null,delay:0,duration:250,ease:bo};function Wo(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}Wn.prototype.interrupt=function(t){return this.each((function(){Gi(this,t)}))},Wn.prototype.transition=function(t){var n,e;t instanceof po?(n=t._id,t=t._name):(n=yo(),(e=Vo).time=Ai(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,f=0;f<c;++f)(a=u[f])&&Li(a,t,n,f,u,e||Wo(a,n));return new po(r,this._parents,t,n)};var Zo=[null];var Ko=t=>()=>t;function Qo(t,{sourceEvent:n,target:e,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Jo(t){t.preventDefault(),t.stopImmediatePropagation()}var ta={name:"drag"},na={name:"space"},ea={name:"handle"},ra={name:"center"};const{abs:ia,max:oa,min:aa}=Math;function ua(t){return[+t[0],+t[1]]}function ca(t){return[ua(t[0]),ua(t[1])]}var fa={name:"x",handles:["w","e"].map(va),input:function(t,n){return null==t?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},sa={name:"y",handles:["n","s"].map(va),input:function(t,n){return null==t?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},la={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(va),input:function(t){return null==t?null:ca(t)},output:function(t){return t}},ha={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},da={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},pa={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ga={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ya={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function va(t){return{type:t}}function _a(t){return!t.ctrlKey&&!t.button}function ba(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function ma(){return navigator.maxTouchPoints||"ontouchstart"in this}function xa(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function wa(t){var n,e=ba,r=_a,i=ma,o=!0,a=$t("start","brush","end"),u=6;function c(n){var e=n.property("__brush",g).selectAll(".overlay").data([va("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ha.overlay).merge(e).each((function(){var t=xa(this).extent;Zn(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),n.selectAll(".selection").data([va("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ha.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=n.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return ha[t.type]})),n.each(f).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(i).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(){var t=Zn(this),n=xa(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?n[1][0]-u/2:n[0][0]-u/2})).attr("y",(function(t){return"s"===t.type[0]?n[1][1]-u/2:n[0][1]-u/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+u:u})).attr("height",(function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+u:u}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function s(t,n,e){var r=t.__brush.emitter;return!r||e&&r.clean?new l(t,n,e):r}function l(t,n,e){this.that=t,this.args=n,this.state=t.__brush,this.active=0,this.clean=e}function h(e){if((!n||e.touches)&&r.apply(this,arguments)){var i,a,u,c,l,h,d,p,g,y,v,_=this,b=e.target.__data__.type,m="selection"===(o&&e.metaKey?b="overlay":b)?ta:o&&e.altKey?ra:ea,x=t===sa?null:ga[b],w=t===fa?null:ya[b],M=xa(_),T=M.extent,A=M.selection,S=T[0][0],E=T[0][1],N=T[1][0],k=T[1][1],C=0,P=0,z=x&&w&&o&&e.shiftKey,$=Array.from(e.touches||[e],(t=>{const n=t.identifier;return(t=ne(t,_)).point0=t.slice(),t.identifier=n,t}));Gi(_);var D=s(_,arguments,!0).beforestart();if("overlay"===b){A&&(g=!0);const n=[$[0],$[1]||$[0]];M.selection=A=[[i=t===sa?S:aa(n[0][0],n[1][0]),u=t===fa?E:aa(n[0][1],n[1][1])],[l=t===sa?N:oa(n[0][0],n[1][0]),d=t===fa?k:oa(n[0][1],n[1][1])]],$.length>1&&I(e)}else i=A[0][0],u=A[0][1],l=A[1][0],d=A[1][1];a=i,c=u,h=l,p=d;var R=Zn(_).attr("pointer-events","none"),F=R.selectAll(".overlay").attr("cursor",ha[b]);if(e.touches)D.moved=U,D.ended=O;else{var q=Zn(e.view).on("mousemove.brush",U,!0).on("mouseup.brush",O,!0);o&&q.on("keydown.brush",(function(t){switch(t.keyCode){case 16:z=x&&w;break;case 18:m===ea&&(x&&(l=h-C*x,i=a+C*x),w&&(d=p-P*w,u=c+P*w),m=ra,I(t));break;case 32:m!==ea&&m!==ra||(x<0?l=h-C:x>0&&(i=a-C),w<0?d=p-P:w>0&&(u=c-P),m=na,F.attr("cursor",ha.selection),I(t));break;default:return}Jo(t)}),!0).on("keyup.brush",(function(t){switch(t.keyCode){case 16:z&&(y=v=z=!1,I(t));break;case 18:m===ra&&(x<0?l=h:x>0&&(i=a),w<0?d=p:w>0&&(u=c),m=ea,I(t));break;case 32:m===na&&(t.altKey?(x&&(l=h-C*x,i=a+C*x),w&&(d=p-P*w,u=c+P*w),m=ra):(x<0?l=h:x>0&&(i=a),w<0?d=p:w>0&&(u=c),m=ea),F.attr("cursor",ha[b]),I(t));break;default:return}Jo(t)}),!0),ae(e.view)}f.call(_),D.start(e,m.name)}function U(t){for(const n of t.changedTouches||[t])for(const t of $)t.identifier===n.identifier&&(t.cur=ne(n,_));if(z&&!y&&!v&&1===$.length){const t=$[0];ia(t.cur[0]-t[0])>ia(t.cur[1]-t[1])?v=!0:y=!0}for(const t of $)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);g=!0,Jo(t),I(t)}function I(t){const n=$[0],e=n.point0;var r;switch(C=n[0]-e[0],P=n[1]-e[1],m){case na:case ta:x&&(C=oa(S-i,aa(N-l,C)),a=i+C,h=l+C),w&&(P=oa(E-u,aa(k-d,P)),c=u+P,p=d+P);break;case ea:$[1]?(x&&(a=oa(S,aa(N,$[0][0])),h=oa(S,aa(N,$[1][0])),x=1),w&&(c=oa(E,aa(k,$[0][1])),p=oa(E,aa(k,$[1][1])),w=1)):(x<0?(C=oa(S-i,aa(N-i,C)),a=i+C,h=l):x>0&&(C=oa(S-l,aa(N-l,C)),a=i,h=l+C),w<0?(P=oa(E-u,aa(k-u,P)),c=u+P,p=d):w>0&&(P=oa(E-d,aa(k-d,P)),c=u,p=d+P));break;case ra:x&&(a=oa(S,aa(N,i-C*x)),h=oa(S,aa(N,l+C*x))),w&&(c=oa(E,aa(k,u-P*w)),p=oa(E,aa(k,d+P*w)))}h<a&&(x*=-1,r=i,i=l,l=r,r=a,a=h,h=r,b in da&&F.attr("cursor",ha[b=da[b]])),p<c&&(w*=-1,r=u,u=d,d=r,r=c,c=p,p=r,b in pa&&F.attr("cursor",ha[b=pa[b]])),M.selection&&(A=M.selection),y&&(a=A[0][0],h=A[1][0]),v&&(c=A[0][1],p=A[1][1]),A[0][0]===a&&A[0][1]===c&&A[1][0]===h&&A[1][1]===p||(M.selection=[[a,c],[h,p]],f.call(_),D.brush(t,m.name))}function O(t){if(function(t){t.stopImmediatePropagation()}(t),t.touches){if(t.touches.length)return;n&&clearTimeout(n),n=setTimeout((function(){n=null}),500)}else ue(t.view,g),q.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);R.attr("pointer-events","all"),F.attr("cursor",ha.overlay),M.selection&&(A=M.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(A)&&(M.selection=null,f.call(_)),D.end(t,m.name)}}function d(t){s(this,arguments).moved(t)}function p(t){s(this,arguments).ended(t)}function g(){var n=this.__brush||{selection:null};return n.extent=ca(e.apply(this,arguments)),n.dim=t,n}return c.move=function(n,e,r){n.tween?n.on("start.brush",(function(t){s(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){s(this,arguments).end(t)})).tween("brush",(function(){var n=this,r=n.__brush,i=s(n,arguments),o=r.selection,a=t.input("function"==typeof e?e.apply(this,arguments):e,r.extent),u=Gr(o,a);function c(t){r.selection=1===t&&null===a?null:u(t),f.call(n),i.brush()}return null!==o&&null!==a?c:c(1)})):n.each((function(){var n=this,i=arguments,o=n.__brush,a=t.input("function"==typeof e?e.apply(n,i):e,o.extent),u=s(n,i).beforestart();Gi(n),o.selection=null===a?null:a,f.call(n),u.start(r).brush(r).end(r)}))},c.clear=function(t,n){c.move(t,null,n)},l.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,n){return this.starting?(this.starting=!1,this.emit("start",t,n)):this.emit("brush",t),this},brush:function(t,n){return this.emit("brush",t,n),this},end:function(t,n){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,n)),this},emit:function(n,e,r){var i=Zn(this.that).datum();a.call(n,this.that,new Qo(n,{sourceEvent:e,target:c,selection:t.output(this.state.selection),mode:r,dispatch:a}),i)}},c.extent=function(t){return arguments.length?(e="function"==typeof t?t:Ko(ca(t)),c):e},c.filter=function(t){return arguments.length?(r="function"==typeof t?t:Ko(!!t),c):r},c.touchable=function(t){return arguments.length?(i="function"==typeof t?t:Ko(!!t),c):i},c.handleSize=function(t){return arguments.length?(u=+t,c):u},c.keyModifiers=function(t){return arguments.length?(o=!!t,c):o},c.on=function(){var t=a.on.apply(a,arguments);return t===a?c:t},c}var Ma=Math.abs,Ta=Math.cos,Aa=Math.sin,Sa=Math.PI,Ea=Sa/2,Na=2*Sa,ka=Math.max,Ca=1e-12;function Pa(t,n){return Array.from({length:n-t},((n,e)=>t+e))}function za(t,n){var e=0,r=null,i=null,o=null;function a(a){var u,c=a.length,f=new Array(c),s=Pa(0,c),l=new Array(c*c),h=new Array(c),d=0;a=Float64Array.from({length:c*c},n?(t,n)=>a[n%c][n/c|0]:(t,n)=>a[n/c|0][n%c]);for(let n=0;n<c;++n){let e=0;for(let r=0;r<c;++r)e+=a[n*c+r]+t*a[r*c+n];d+=f[n]=e}u=(d=ka(0,Na-e*c)/d)?e:Na/c;{let n=0;r&&s.sort(((t,n)=>r(f[t],f[n])));for(const e of s){const r=n;if(t){const t=Pa(1+~c,c).filter((t=>t<0?a[~t*c+e]:a[e*c+t]));i&&t.sort(((t,n)=>i(t<0?-a[~t*c+e]:a[e*c+t],n<0?-a[~n*c+e]:a[e*c+n])));for(const r of t)if(r<0){(l[~r*c+e]||(l[~r*c+e]={source:null,target:null})).target={index:e,startAngle:n,endAngle:n+=a[~r*c+e]*d,value:a[~r*c+e]}}else{(l[e*c+r]||(l[e*c+r]={source:null,target:null})).source={index:e,startAngle:n,endAngle:n+=a[e*c+r]*d,value:a[e*c+r]}}h[e]={index:e,startAngle:r,endAngle:n,value:f[e]}}else{const t=Pa(0,c).filter((t=>a[e*c+t]||a[t*c+e]));i&&t.sort(((t,n)=>i(a[e*c+t],a[e*c+n])));for(const r of t){let t;if(e<r?(t=l[e*c+r]||(l[e*c+r]={source:null,target:null}),t.source={index:e,startAngle:n,endAngle:n+=a[e*c+r]*d,value:a[e*c+r]}):(t=l[r*c+e]||(l[r*c+e]={source:null,target:null}),t.target={index:e,startAngle:n,endAngle:n+=a[e*c+r]*d,value:a[e*c+r]},e===r&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const n=t.source;t.source=t.target,t.target=n}}h[e]={index:e,startAngle:r,endAngle:n,value:f[e]}}n+=u}}return(l=Object.values(l)).groups=h,o?l.sort(o):l}return a.padAngle=function(t){return arguments.length?(e=ka(0,t),a):e},a.sortGroups=function(t){return arguments.length?(r=t,a):r},a.sortSubgroups=function(t){return arguments.length?(i=t,a):i},a.sortChords=function(t){return arguments.length?(null==t?o=null:(n=t,o=function(t,e){return n(t.source.value+t.target.value,e.source.value+e.target.value)})._=t,a):o&&o._;var n},a}const $a=Math.PI,Da=2*$a,Ra=1e-6,Fa=Da-Ra;function qa(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}let Ua=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?qa:function(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return qa;const e=10**n;return function(t){this._+=t[0];for(let n=1,r=t.length;n<r;++n)this._+=Math.round(arguments[n]*e)/e+t[n]}}(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,e,r){this._append`Q${+t},${+n},${this._x1=+e},${this._y1=+r}`}bezierCurveTo(t,n,e,r,i,o){this._append`C${+t},${+n},${+e},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,e,r,i){if(t=+t,n=+n,e=+e,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,u=e-t,c=r-n,f=o-t,s=a-n,l=f*f+s*s;if(null===this._x1)this._append`M${this._x1=t},${this._y1=n}`;else if(l>Ra)if(Math.abs(s*u-c*f)>Ra&&i){let h=e-o,d=r-a,p=u*u+c*c,g=h*h+d*d,y=Math.sqrt(p),v=Math.sqrt(l),_=i*Math.tan(($a-Math.acos((p+l-g)/(2*y*v)))/2),b=_/v,m=_/y;Math.abs(b-1)>Ra&&this._append`L${t+b*f},${n+b*s}`,this._append`A${i},${i},0,0,${+(s*h>f*d)},${this._x1=t+m*u},${this._y1=n+m*c}`}else this._append`L${this._x1=t},${this._y1=n}`;else;}arc(t,n,e,r,i,o){if(t=+t,n=+n,o=!!o,(e=+e)<0)throw new Error(`negative radius: ${e}`);let a=e*Math.cos(r),u=e*Math.sin(r),c=t+a,f=n+u,s=1^o,l=o?r-i:i-r;null===this._x1?this._append`M${c},${f}`:(Math.abs(this._x1-c)>Ra||Math.abs(this._y1-f)>Ra)&&this._append`L${c},${f}`,e&&(l<0&&(l=l%Da+Da),l>Fa?this._append`A${e},${e},0,1,${s},${t-a},${n-u}A${e},${e},0,1,${s},${this._x1=c},${this._y1=f}`:l>Ra&&this._append`A${e},${e},0,${+(l>=$a)},${s},${this._x1=t+e*Math.cos(i)},${this._y1=n+e*Math.sin(i)}`)}rect(t,n,e,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${e=+e}v${+r}h${-e}Z`}toString(){return this._}};function Ia(){return new Ua}Ia.prototype=Ua.prototype;var Oa=Array.prototype.slice;function Ba(t){return function(){return t}}function Ya(t){return t.source}function La(t){return t.target}function ja(t){return t.radius}function Ha(t){return t.startAngle}function Xa(t){return t.endAngle}function Ga(){return 0}function Va(){return 10}function Wa(t){var n=Ya,e=La,r=ja,i=ja,o=Ha,a=Xa,u=Ga,c=null;function f(){var f,s=n.apply(this,arguments),l=e.apply(this,arguments),h=u.apply(this,arguments)/2,d=Oa.call(arguments),p=+r.apply(this,(d[0]=s,d)),g=o.apply(this,d)-Ea,y=a.apply(this,d)-Ea,v=+i.apply(this,(d[0]=l,d)),_=o.apply(this,d)-Ea,b=a.apply(this,d)-Ea;if(c||(c=f=Ia()),h>Ca&&(Ma(y-g)>2*h+Ca?y>g?(g+=h,y-=h):(g-=h,y+=h):g=y=(g+y)/2,Ma(b-_)>2*h+Ca?b>_?(_+=h,b-=h):(_-=h,b+=h):_=b=(_+b)/2),c.moveTo(p*Ta(g),p*Aa(g)),c.arc(0,0,p,g,y),g!==_||y!==b)if(t){var m=v-+t.apply(this,arguments),x=(_+b)/2;c.quadraticCurveTo(0,0,m*Ta(_),m*Aa(_)),c.lineTo(v*Ta(x),v*Aa(x)),c.lineTo(m*Ta(b),m*Aa(b))}else c.quadraticCurveTo(0,0,v*Ta(_),v*Aa(_)),c.arc(0,0,v,_,b);if(c.quadraticCurveTo(0,0,p*Ta(g),p*Aa(g)),c.closePath(),f)return c=null,f+""||null}return t&&(f.headRadius=function(n){return arguments.length?(t="function"==typeof n?n:Ba(+n),f):t}),f.radius=function(t){return arguments.length?(r=i="function"==typeof t?t:Ba(+t),f):r},f.sourceRadius=function(t){return arguments.length?(r="function"==typeof t?t:Ba(+t),f):r},f.targetRadius=function(t){return arguments.length?(i="function"==typeof t?t:Ba(+t),f):i},f.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:Ba(+t),f):o},f.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:Ba(+t),f):a},f.padAngle=function(t){return arguments.length?(u="function"==typeof t?t:Ba(+t),f):u},f.source=function(t){return arguments.length?(n=t,f):n},f.target=function(t){return arguments.length?(e=t,f):e},f.context=function(t){return arguments.length?(c=null==t?null:t,f):c},f}var Za=Array.prototype.slice;function Ka(t,n){return t-n}var Qa=t=>()=>t;function Ja(t,n){for(var e,r=-1,i=n.length;++r<i;)if(e=tu(t,n[r]))return e;return 0}function tu(t,n){for(var e=n[0],r=n[1],i=-1,o=0,a=t.length,u=a-1;o<a;u=o++){var c=t[o],f=c[0],s=c[1],l=t[u],h=l[0],d=l[1];if(nu(c,l,n))return 0;s>r!=d>r&&e<(h-f)*(r-s)/(d-s)+f&&(i=-i)}return i}function nu(t,n,e){var r,i,o,a;return function(t,n,e){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])}(t,n,e)&&(i=t[r=+(t[0]===n[0])],o=e[r],a=n[r],i<=o&&o<=a||a<=o&&o<=i)}function eu(){}var ru=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function iu(){var t=1,n=1,e=K,r=u;function i(t){var n=e(t);if(Array.isArray(n))n=n.slice().sort(Ka);else{const e=M(t,ou);for(n=G(...Z(e[0],e[1],n),n);n[n.length-1]>=e[1];)n.pop();for(;n[1]<e[0];)n.shift()}return n.map((n=>o(t,n)))}function o(e,i){const o=null==i?NaN:+i;if(isNaN(o))throw new Error(`invalid value: ${i}`);var u=[],c=[];return function(e,r,i){var o,u,c,f,s,l,h=new Array,d=new Array;o=u=-1,f=au(e[0],r),ru[f<<1].forEach(p);for(;++o<t-1;)c=f,f=au(e[o+1],r),ru[c|f<<1].forEach(p);ru[f<<0].forEach(p);for(;++u<n-1;){for(o=-1,f=au(e[u*t+t],r),s=au(e[u*t],r),ru[f<<1|s<<2].forEach(p);++o<t-1;)c=f,f=au(e[u*t+t+o+1],r),l=s,s=au(e[u*t+o+1],r),ru[c|f<<1|s<<2|l<<3].forEach(p);ru[f|s<<3].forEach(p)}o=-1,s=e[u*t]>=r,ru[s<<2].forEach(p);for(;++o<t-1;)l=s,s=au(e[u*t+o+1],r),ru[s<<2|l<<3].forEach(p);function p(t){var n,e,r=[t[0][0]+o,t[0][1]+u],c=[t[1][0]+o,t[1][1]+u],f=a(r),s=a(c);(n=d[f])?(e=h[s])?(delete d[n.end],delete h[e.start],n===e?(n.ring.push(c),i(n.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete d[n.end],n.ring.push(c),d[n.end=s]=n):(n=h[s])?(e=d[f])?(delete h[n.start],delete d[e.end],n===e?(n.ring.push(c),i(n.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete h[n.start],n.ring.unshift(r),h[n.start=f]=n):h[f]=d[s]={start:f,end:s,ring:[r,c]}}ru[s<<3].forEach(p)}(e,o,(function(t){r(t,e,o),function(t){for(var n=0,e=t.length,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r}(t)>0?u.push([t]):c.push(t)})),c.forEach((function(t){for(var n,e=0,r=u.length;e<r;++e)if(-1!==Ja((n=u[e])[0],t))return void n.push(t)})),{type:"MultiPolygon",value:i,coordinates:u}}function a(n){return 2*n[0]+n[1]*(t+1)*4}function u(e,r,i){e.forEach((function(e){var o=e[0],a=e[1],u=0|o,c=0|a,f=uu(r[c*t+u]);o>0&&o<t&&u===o&&(e[0]=cu(o,uu(r[c*t+u-1]),f,i)),a>0&&a<n&&c===a&&(e[1]=cu(a,uu(r[(c-1)*t+u]),f,i))}))}return i.contour=o,i.size=function(e){if(!arguments.length)return[t,n];var r=Math.floor(e[0]),o=Math.floor(e[1]);if(!(r>=0&&o>=0))throw new Error("invalid size");return t=r,n=o,i},i.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Array.isArray(t)?Qa(Za.call(t)):Qa(t),i):e},i.smooth=function(t){return arguments.length?(r=t?u:eu,i):r===u},i}function ou(t){return isFinite(t)?t:NaN}function au(t,n){return null!=t&&+t>=n}function uu(t){return null==t||isNaN(t=+t)?-1/0:t}function cu(t,n,e,r){const i=r-n,o=e-n,a=isFinite(i)||isFinite(o)?i/o:Math.sign(i)/Math.sign(o);return isNaN(a)?t:t+a-.5}function fu(t){return t[0]}function su(t){return t[1]}function lu(){return 1}const hu=134217729,du=33306690738754706e-32;function pu(t,n,e,r,i){let o,a,u,c,f=n[0],s=r[0],l=0,h=0;s>f==s>-f?(o=f,f=n[++l]):(o=s,s=r[++h]);let d=0;if(l<t&&h<e)for(s>f==s>-f?(a=f+o,u=o-(a-f),f=n[++l]):(a=s+o,u=o-(a-s),s=r[++h]),o=a,0!==u&&(i[d++]=u);l<t&&h<e;)s>f==s>-f?(a=o+f,c=a-o,u=o-(a-c)+(f-c),f=n[++l]):(a=o+s,c=a-o,u=o-(a-c)+(s-c),s=r[++h]),o=a,0!==u&&(i[d++]=u);for(;l<t;)a=o+f,c=a-o,u=o-(a-c)+(f-c),f=n[++l],o=a,0!==u&&(i[d++]=u);for(;h<e;)a=o+s,c=a-o,u=o-(a-c)+(s-c),s=r[++h],o=a,0!==u&&(i[d++]=u);return 0===o&&0!==d||(i[d++]=o),d}function gu(t){return new Float64Array(t)}const yu=22204460492503146e-32,vu=11093356479670487e-47,_u=gu(4),bu=gu(8),mu=gu(12),xu=gu(16),wu=gu(4);function Mu(t,n,e,r,i,o){const a=(n-o)*(e-i),u=(t-i)*(r-o),c=a-u,f=Math.abs(a+u);return Math.abs(c)>=33306690738754716e-32*f?c:-function(t,n,e,r,i,o,a){let u,c,f,s,l,h,d,p,g,y,v,_,b,m,x,w,M,T;const A=t-i,S=e-i,E=n-o,N=r-o;m=A*N,h=hu*A,d=h-(h-A),p=A-d,h=hu*N,g=h-(h-N),y=N-g,x=p*y-(m-d*g-p*g-d*y),w=E*S,h=hu*E,d=h-(h-E),p=E-d,h=hu*S,g=h-(h-S),y=S-g,M=p*y-(w-d*g-p*g-d*y),v=x-M,l=x-v,_u[0]=x-(v+l)+(l-M),_=m+v,l=_-m,b=m-(_-l)+(v-l),v=b-w,l=b-v,_u[1]=b-(v+l)+(l-w),T=_+v,l=T-_,_u[2]=_-(T-l)+(v-l),_u[3]=T;let k=function(t,n){let e=n[0];for(let r=1;r<t;r++)e+=n[r];return e}(4,_u),C=yu*a;if(k>=C||-k>=C)return k;if(l=t-A,u=t-(A+l)+(l-i),l=e-S,f=e-(S+l)+(l-i),l=n-E,c=n-(E+l)+(l-o),l=r-N,s=r-(N+l)+(l-o),0===u&&0===c&&0===f&&0===s)return k;if(C=vu*a+du*Math.abs(k),k+=A*s+N*u-(E*f+S*c),k>=C||-k>=C)return k;m=u*N,h=hu*u,d=h-(h-u),p=u-d,h=hu*N,g=h-(h-N),y=N-g,x=p*y-(m-d*g-p*g-d*y),w=c*S,h=hu*c,d=h-(h-c),p=c-d,h=hu*S,g=h-(h-S),y=S-g,M=p*y-(w-d*g-p*g-d*y),v=x-M,l=x-v,wu[0]=x-(v+l)+(l-M),_=m+v,l=_-m,b=m-(_-l)+(v-l),v=b-w,l=b-v,wu[1]=b-(v+l)+(l-w),T=_+v,l=T-_,wu[2]=_-(T-l)+(v-l),wu[3]=T;const P=pu(4,_u,4,wu,bu);m=A*s,h=hu*A,d=h-(h-A),p=A-d,h=hu*s,g=h-(h-s),y=s-g,x=p*y-(m-d*g-p*g-d*y),w=E*f,h=hu*E,d=h-(h-E),p=E-d,h=hu*f,g=h-(h-f),y=f-g,M=p*y-(w-d*g-p*g-d*y),v=x-M,l=x-v,wu[0]=x-(v+l)+(l-M),_=m+v,l=_-m,b=m-(_-l)+(v-l),v=b-w,l=b-v,wu[1]=b-(v+l)+(l-w),T=_+v,l=T-_,wu[2]=_-(T-l)+(v-l),wu[3]=T;const z=pu(P,bu,4,wu,mu);m=u*s,h=hu*u,d=h-(h-u),p=u-d,h=hu*s,g=h-(h-s),y=s-g,x=p*y-(m-d*g-p*g-d*y),w=c*f,h=hu*c,d=h-(h-c),p=c-d,h=hu*f,g=h-(h-f),y=f-g,M=p*y-(w-d*g-p*g-d*y),v=x-M,l=x-v,wu[0]=x-(v+l)+(l-M),_=m+v,l=_-m,b=m-(_-l)+(v-l),v=b-w,l=b-v,wu[1]=b-(v+l)+(l-w),T=_+v,l=T-_,wu[2]=_-(T-l)+(v-l),wu[3]=T;const $=pu(z,mu,4,wu,xu);return xu[$-1]}(t,n,e,r,i,o,f)}const Tu=Math.pow(2,-52),Au=new Uint32Array(512);class Su{static from(t,n=zu,e=$u){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=n(r),i[2*o+1]=e(r)}return new Su(i)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const e=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*e),this._halfedges=new Int32Array(3*e),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:e,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let a=1/0,u=1/0,c=-1/0,f=-1/0;for(let n=0;n<o;n++){const e=t[2*n],r=t[2*n+1];e<a&&(a=e),r<u&&(u=r),e>c&&(c=e),r>f&&(f=r),this._ids[n]=n}const s=(a+c)/2,l=(u+f)/2;let h,d,p,g=1/0;for(let n=0;n<o;n++){const e=Eu(s,l,t[2*n],t[2*n+1]);e<g&&(h=n,g=e)}const y=t[2*h],v=t[2*h+1];g=1/0;for(let n=0;n<o;n++){if(n===h)continue;const e=Eu(y,v,t[2*n],t[2*n+1]);e<g&&e>0&&(d=n,g=e)}let _=t[2*d],b=t[2*d+1],m=1/0;for(let n=0;n<o;n++){if(n===h||n===d)continue;const e=ku(y,v,_,b,t[2*n],t[2*n+1]);e<m&&(p=n,m=e)}let x=t[2*p],w=t[2*p+1];if(m===1/0){for(let n=0;n<o;n++)this._dists[n]=t[2*n]-t[0]||t[2*n+1]-t[1];Cu(this._ids,this._dists,0,o-1);const n=new Uint32Array(o);let e=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(n[e++]=i,r=this._dists[i])}return this.hull=n.subarray(0,e),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Mu(y,v,_,b,x,w)<0){const t=d,n=_,e=b;d=p,_=x,b=w,p=t,x=n,w=e}const M=function(t,n,e,r,i,o){const a=e-t,u=r-n,c=i-t,f=o-n,s=a*a+u*u,l=c*c+f*f,h=.5/(a*f-u*c),d=t+(f*s-u*l)*h,p=n+(a*l-c*s)*h;return{x:d,y:p}}(y,v,_,b,x,w);this._cx=M.x,this._cy=M.y;for(let n=0;n<o;n++)this._dists[n]=Eu(t[2*n],t[2*n+1],M.x,M.y);Cu(this._ids,this._dists,0,o-1),this._hullStart=h;let T=3;e[h]=n[p]=d,e[d]=n[h]=p,e[p]=n[d]=h,r[h]=0,r[d]=1,r[p]=2,i.fill(-1),i[this._hashKey(y,v)]=h,i[this._hashKey(_,b)]=d,i[this._hashKey(x,w)]=p,this.trianglesLen=0,this._addTriangle(h,d,p,-1,-1,-1);for(let o,a,u=0;u<this._ids.length;u++){const c=this._ids[u],f=t[2*c],s=t[2*c+1];if(u>0&&Math.abs(f-o)<=Tu&&Math.abs(s-a)<=Tu)continue;if(o=f,a=s,c===h||c===d||c===p)continue;let l=0;for(let t=0,n=this._hashKey(f,s);t<this._hashSize&&(l=i[(n+t)%this._hashSize],-1===l||l===e[l]);t++);l=n[l];let g,y=l;for(;g=e[y],Mu(f,s,t[2*y],t[2*y+1],t[2*g],t[2*g+1])>=0;)if(y=g,y===l){y=-1;break}if(-1===y)continue;let v=this._addTriangle(y,c,e[y],-1,-1,r[y]);r[c]=this._legalize(v+2),r[y]=v,T++;let _=e[y];for(;g=e[_],Mu(f,s,t[2*_],t[2*_+1],t[2*g],t[2*g+1])<0;)v=this._addTriangle(_,c,g,r[c],-1,r[_]),r[c]=this._legalize(v+2),e[_]=_,T--,_=g;if(y===l)for(;g=n[y],Mu(f,s,t[2*g],t[2*g+1],t[2*y],t[2*y+1])<0;)v=this._addTriangle(g,c,y,-1,r[y],r[g]),this._legalize(v+2),r[g]=v,e[y]=y,T--,y=g;this._hullStart=n[c]=y,e[y]=n[_]=c,e[c]=_,i[this._hashKey(f,s)]=c,i[this._hashKey(t[2*y],t[2*y+1])]=y}this.hull=new Uint32Array(T);for(let t=0,n=this._hullStart;t<T;t++)this.hull[t]=n,n=e[n];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function(t,n){const e=t/(Math.abs(t)+Math.abs(n));return(n>0?3-e:1+e)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:e,coords:r}=this;let i=0,o=0;for(;;){const a=e[t],u=t-t%3;if(o=u+(t+2)%3,-1===a){if(0===i)break;t=Au[--i];continue}const c=a-a%3,f=u+(t+1)%3,s=c+(a+2)%3,l=n[o],h=n[t],d=n[f],p=n[s];if(Nu(r[2*l],r[2*l+1],r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){n[t]=p,n[a]=l;const r=e[s];if(-1===r){let n=this._hullStart;do{if(this._hullTri[n]===s){this._hullTri[n]=t;break}n=this._hullPrev[n]}while(n!==this._hullStart)}this._link(t,r),this._link(a,e[o]),this._link(o,s);const u=c+(a+1)%3;i<Au.length&&(Au[i++]=u)}else{if(0===i)break;t=Au[--i]}}return o}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,e,r,i,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=e,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function Eu(t,n,e,r){const i=t-e,o=n-r;return i*i+o*o}function Nu(t,n,e,r,i,o,a,u){const c=t-a,f=n-u,s=e-a,l=r-u,h=i-a,d=o-u,p=s*s+l*l,g=h*h+d*d;return c*(l*g-p*d)-f*(s*g-p*h)+(c*c+f*f)*(s*d-l*h)<0}function ku(t,n,e,r,i,o){const a=e-t,u=r-n,c=i-t,f=o-n,s=a*a+u*u,l=c*c+f*f,h=.5/(a*f-u*c),d=(f*s-u*l)*h,p=(a*l-c*s)*h;return d*d+p*p}function Cu(t,n,e,r){if(r-e<=20)for(let i=e+1;i<=r;i++){const r=t[i],o=n[r];let a=i-1;for(;a>=e&&n[t[a]]>o;)t[a+1]=t[a--];t[a+1]=r}else{let i=e+1,o=r;Pu(t,e+r>>1,i),n[t[e]]>n[t[r]]&&Pu(t,e,r),n[t[i]]>n[t[r]]&&Pu(t,i,r),n[t[e]]>n[t[i]]&&Pu(t,e,i);const a=t[i],u=n[a];for(;;){do{i++}while(n[t[i]]<u);do{o--}while(n[t[o]]>u);if(o<i)break;Pu(t,i,o)}t[e+1]=t[o],t[o]=a,r-i+1>=o-e?(Cu(t,n,i,r),Cu(t,n,e,o-1)):(Cu(t,n,e,o-1),Cu(t,n,i,r))}}function Pu(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function zu(t){return t[0]}function $u(t){return t[1]}const Du=1e-6;class Ru{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,e){const r=(t=+t)+(e=+e),i=n=+n;if(e<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>Du||Math.abs(this._y1-i)>Du)&&(this._+="L"+r+","+i),e&&(this._+=`A${e},${e},0,1,1,${t-e},${n}A${e},${e},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,n,e,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+e}v${+r}h${-e}Z`}value(){return this._||null}}class Fu{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class qu{constructor(t,[n,e,r,i]=[0,0,960,500]){if(!((r=+r)>=(n=+n)&&(i=+i)>=(e=+e)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=n,this.ymax=i,this.ymin=e,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:e},vectors:r}=this;let i,o;const a=this.circumcenters=this._circumcenters.subarray(0,e.length/3*2);for(let r,u,c=0,f=0,s=e.length;c<s;c+=3,f+=2){const s=2*e[c],l=2*e[c+1],h=2*e[c+2],d=t[s],p=t[s+1],g=t[l],y=t[l+1],v=t[h],_=t[h+1],b=g-d,m=y-p,x=v-d,w=_-p,M=2*(b*w-m*x);if(Math.abs(M)<1e-9){if(void 0===i){i=o=0;for(const e of n)i+=t[2*e],o+=t[2*e+1];i/=n.length,o/=n.length}const e=1e9*Math.sign((i-d)*w-(o-p)*x);r=(d+v)/2-e*w,u=(p+_)/2+e*x}else{const t=1/M,n=b*b+m*m,e=x*x+w*w;r=d+(w*n-m*e)*t,u=p+(b*e-x*n)*t}a[f]=r,a[f+1]=u}let u,c,f,s=n[n.length-1],l=4*s,h=t[2*s],d=t[2*s+1];r.fill(0);for(let e=0;e<n.length;++e)s=n[e],u=l,c=h,f=d,l=4*s,h=t[2*s],d=t[2*s+1],r[u+2]=r[l]=f-d,r[u+3]=r[l+1]=h-c}render(t){const n=null==t?t=new Ru:void 0,{delaunay:{halfedges:e,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let n=0,r=e.length;n<r;++n){const r=e[n];if(r<n)continue;const i=2*Math.floor(n/3),a=2*Math.floor(r/3),u=o[i],c=o[i+1],f=o[a],s=o[a+1];this._renderSegment(u,c,f,s,t)}let u,c=i[i.length-1];for(let n=0;n<i.length;++n){u=c,c=i[n];const e=2*Math.floor(r[c]/3),f=o[e],s=o[e+1],l=4*u,h=this._project(f,s,a[l+2],a[l+3]);h&&this._renderSegment(f,s,h[0],h[1],t)}return n&&n.value()}renderBounds(t){const n=null==t?t=new Ru:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const e=null==n?n=new Ru:void 0,r=this._clip(t);if(null===r||!r.length)return;n.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let t=2;t<i;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||n.lineTo(r[t],r[t+1]);return n.closePath(),e&&e.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,e=t.length/2;n<e;++n){const t=this.cellPolygon(n);t&&(t.index=n,yield t)}}cellPolygon(t){const n=new Fu;return this.renderCell(t,n),n.value()}_renderSegment(t,n,e,r,i){let o;const a=this._regioncode(t,n),u=this._regioncode(e,r);0===a&&0===u?(i.moveTo(t,n),i.lineTo(e,r)):(o=this._clipSegment(t,n,e,r,a,u))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,n,e){return(n=+n)==n&&(e=+e)==e&&this.delaunay._step(t,n,e)===t}*neighbors(t){const n=this._clip(t);if(n)for(const e of this.delaunay.neighbors(t)){const t=this._clip(e);if(t)t:for(let r=0,i=n.length;r<i;r+=2)for(let o=0,a=t.length;o<a;o+=2)if(n[r]===t[o]&&n[r+1]===t[o+1]&&n[(r+2)%i]===t[(o+a-2)%a]&&n[(r+3)%i]===t[(o+a-1)%a]){yield e;break t}}}_cell(t){const{circumcenters:n,delaunay:{inedges:e,halfedges:r,triangles:i}}=this,o=e[t];if(-1===o)return null;const a=[];let u=o;do{const e=Math.floor(u/3);if(a.push(n[2*e],n[2*e+1]),u=u%3==2?u-2:u+1,i[u]!==t)break;u=r[u]}while(u!==o&&-1!==u);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(null===n)return null;const{vectors:e}=this,r=4*t;return this._simplify(e[r]||e[r+1]?this._clipInfinite(t,n,e[r],e[r+1],e[r+2],e[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const e=n.length;let r,i,o,a,u=null,c=n[e-2],f=n[e-1],s=this._regioncode(c,f),l=0;for(let h=0;h<e;h+=2)if(r=c,i=f,c=n[h],f=n[h+1],o=s,s=this._regioncode(c,f),0===o&&0===s)a=l,l=0,u?u.push(c,f):u=[c,f];else{let n,e,h,d,p;if(0===o){if(null===(n=this._clipSegment(r,i,c,f,o,s)))continue;[e,h,d,p]=n}else{if(null===(n=this._clipSegment(c,f,r,i,s,o)))continue;[d,p,e,h]=n,a=l,l=this._edgecode(e,h),a&&l&&this._edge(t,a,l,u,u.length),u?u.push(e,h):u=[e,h]}a=l,l=this._edgecode(d,p),a&&l&&this._edge(t,a,l,u,u.length),u?u.push(d,p):u=[d,p]}if(u)a=l,l=this._edgecode(u[0],u[1]),a&&l&&this._edge(t,a,l,u,u.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(t,n,e,r,i,o){const a=i<o;for(a&&([t,n,e,r,i,o]=[e,r,t,n,o,i]);;){if(0===i&&0===o)return a?[e,r,t,n]:[t,n,e,r];if(i&o)return null;let u,c,f=i||o;8&f?(u=t+(e-t)*(this.ymax-n)/(r-n),c=this.ymax):4&f?(u=t+(e-t)*(this.ymin-n)/(r-n),c=this.ymin):2&f?(c=n+(r-n)*(this.xmax-t)/(e-t),u=this.xmax):(c=n+(r-n)*(this.xmin-t)/(e-t),u=this.xmin),i?(t=u,n=c,i=this._regioncode(t,n)):(e=u,r=c,o=this._regioncode(e,r))}}_clipInfinite(t,n,e,r,i,o){let a,u=Array.from(n);if((a=this._project(u[0],u[1],e,r))&&u.unshift(a[0],a[1]),(a=this._project(u[u.length-2],u[u.length-1],i,o))&&u.push(a[0],a[1]),u=this._clipFinite(t,u))for(let n,e=0,r=u.length,i=this._edgecode(u[r-2],u[r-1]);e<r;e+=2)n=i,i=this._edgecode(u[e],u[e+1]),n&&i&&(e=this._edge(t,n,i,u,e),r=u.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}_edge(t,n,e,r,i){for(;n!==e;){let e,o;switch(n){case 5:n=4;continue;case 4:n=6,e=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,e=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,e=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,e=this.xmin,o=this.ymin}r[i]===e&&r[i+1]===o||!this.contains(t,e,o)||(r.splice(i,0,e,o),i+=2)}return i}_project(t,n,e,r){let i,o,a,u=1/0;if(r<0){if(n<=this.ymin)return null;(i=(this.ymin-n)/r)<u&&(a=this.ymin,o=t+(u=i)*e)}else if(r>0){if(n>=this.ymax)return null;(i=(this.ymax-n)/r)<u&&(a=this.ymax,o=t+(u=i)*e)}if(e>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/e)<u&&(o=this.xmax,a=n+(u=i)*r)}else if(e<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/e)<u&&(o=this.xmin,a=n+(u=i)*r)}return[o,a]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const e=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[e]&&t[e]===t[r]||t[n+1]===t[e+1]&&t[e+1]===t[r+1])&&(t.splice(e,2),n-=2)}t.length||(t=null)}return t}}const Uu=2*Math.PI,Iu=Math.pow;function Ou(t){return t[0]}function Bu(t){return t[1]}function Yu(t,n,e){return[t+Math.sin(t+n)*e,n+Math.cos(t-n)*e]}class Lu{static from(t,n=Ou,e=Bu,r){return new Lu("length"in t?function(t,n,e,r){const i=t.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=t[a];o[2*a]=n.call(r,i,a,t),o[2*a+1]=e.call(r,i,a,t)}return o}(t,n,e,r):Float64Array.from(function*(t,n,e,r){let i=0;for(const o of t)yield n.call(r,o,i,t),yield e.call(r,o,i,t),++i}(t,n,e,r)))}constructor(t){this._delaunator=new Su(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:n,coords:e}=t;for(let t=0;t<n.length;t+=3){const r=2*n[t],i=2*n[t+1],o=2*n[t+2];if((e[o]-e[r])*(e[i+1]-e[r+1])-(e[i]-e[r])*(e[o+1]-e[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},((t,n)=>n)).sort(((t,e)=>n[2*t]-n[2*e]||n[2*t+1]-n[2*e+1]));const t=this.collinear[0],e=this.collinear[this.collinear.length-1],r=[n[2*t],n[2*t+1],n[2*e],n[2*e+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let t=0,e=n.length/2;t<e;++t){const e=Yu(n[2*t],n[2*t+1],i);n[2*t]=e[0],n[2*t+1]=e[1]}this._delaunator=new Su(n)}else delete this.collinear;const e=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let t=0,n=e.length;t<n;++t){const n=i[t%3==2?t-2:t+1];-1!==e[t]&&-1!==o[n]||(o[n]=t)}for(let t=0,n=r.length;t<n;++t)a[r[t]]=t;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,2===r.length&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new qu(this,t)}*neighbors(t){const{inedges:n,hull:e,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const n=a.indexOf(t);return n>0&&(yield a[n-1]),void(n<a.length-1&&(yield a[n+1]))}const u=n[t];if(-1===u)return;let c=u,f=-1;do{if(yield f=o[c],c=c%3==2?c-2:c+1,o[c]!==t)return;if(c=i[c],-1===c){const n=e[(r[t]+1)%e.length];return void(n!==f&&(yield n))}}while(c!==u)}find(t,n,e=0){if((t=+t)!=t||(n=+n)!=n)return-1;const r=e;let i;for(;(i=this._step(e,t,n))>=0&&i!==e&&i!==r;)e=i;return i}_step(t,n,e){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:u,points:c}=this;if(-1===r[t]||!c.length)return(t+1)%(c.length>>1);let f=t,s=Iu(n-c[2*t],2)+Iu(e-c[2*t+1],2);const l=r[t];let h=l;do{let r=u[h];const l=Iu(n-c[2*r],2)+Iu(e-c[2*r+1],2);if(l<s&&(s=l,f=r),h=h%3==2?h-2:h+1,u[h]!==t)break;if(h=a[h],-1===h){if(h=i[(o[t]+1)%i.length],h!==r&&Iu(n-c[2*h],2)+Iu(e-c[2*h+1],2)<s)return h;break}}while(h!==l);return f}render(t){const n=null==t?t=new Ru:void 0,{points:e,halfedges:r,triangles:i}=this;for(let n=0,o=r.length;n<o;++n){const o=r[n];if(o<n)continue;const a=2*i[n],u=2*i[o];t.moveTo(e[a],e[a+1]),t.lineTo(e[u],e[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){void 0!==n||t&&"function"==typeof t.moveTo||(n=t,t=null),n=null==n?2:+n;const e=null==t?t=new Ru:void 0,{points:r}=this;for(let e=0,i=r.length;e<i;e+=2){const i=r[e],o=r[e+1];t.moveTo(i+n,o),t.arc(i,o,n,0,Uu)}return e&&e.value()}renderHull(t){const n=null==t?t=new Ru:void 0,{hull:e,points:r}=this,i=2*e[0],o=e.length;t.moveTo(r[i],r[i+1]);for(let n=1;n<o;++n){const i=2*e[n];t.lineTo(r[i],r[i+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Fu;return this.renderHull(t),t.value()}renderTriangle(t,n){const e=null==n?n=new Ru:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],a=2*i[t+1],u=2*i[t+2];return n.moveTo(r[o],r[o+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[u],r[u+1]),n.closePath(),e&&e.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,e=t.length/3;n<e;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Fu;return this.renderTriangle(t,n),n.value()}}var ju={},Hu={},Xu=34,Gu=10,Vu=13;function Wu(t){return new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'})).join(",")+"}")}function Zu(t){var n=Object.create(null),e=[];return t.forEach((function(t){for(var r in t)r in n||e.push(n[r]=r)})),e}function Ku(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function Qu(t){var n,e=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((n=t.getUTCFullYear())<0?"-"+Ku(-n,6):n>9999?"+"+Ku(n,6):Ku(n,4))+"-"+Ku(t.getUTCMonth()+1,2)+"-"+Ku(t.getUTCDate(),2)+(o?"T"+Ku(e,2)+":"+Ku(r,2)+":"+Ku(i,2)+"."+Ku(o,3)+"Z":i?"T"+Ku(e,2)+":"+Ku(r,2)+":"+Ku(i,2)+"Z":r||e?"T"+Ku(e,2)+":"+Ku(r,2)+"Z":"")}function Ju(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],o=t.length,a=0,u=0,c=o<=0,f=!1;function s(){if(c)return Hu;if(f)return f=!1,ju;var n,r,i=a;if(t.charCodeAt(i)===Xu){for(;a++<o&&t.charCodeAt(a)!==Xu||t.charCodeAt(++a)===Xu;);return(n=a)>=o?c=!0:(r=t.charCodeAt(a++))===Gu?f=!0:r===Vu&&(f=!0,t.charCodeAt(a)===Gu&&++a),t.slice(i+1,n-1).replace(/""/g,'"')}for(;a<o;){if((r=t.charCodeAt(n=a++))===Gu)f=!0;else if(r===Vu)f=!0,t.charCodeAt(a)===Gu&&++a;else if(r!==e)continue;return t.slice(i,n)}return c=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===Gu&&--o,t.charCodeAt(o-1)===Vu&&--o;(r=s())!==Hu;){for(var l=[];r!==ju&&r!==Hu;)l.push(r),r=s();n&&null==(l=n(l,u++))||i.push(l)}return i}function i(n,e){return n.map((function(n){return e.map((function(t){return a(n[t])})).join(t)}))}function o(n){return n.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?Qu(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,o=r(t,(function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=Wu(t);return function(r,i){return n(e(r),i,t)}}(t,n):Wu(t)}));return o.columns=i||[],o},parseRows:r,format:function(n,e){return null==e&&(e=Zu(n)),[e.map(a).join(t)].concat(i(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=Zu(t)),i(t,n).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}var tc=Ju(","),nc=tc.parse,ec=tc.parseRows,rc=tc.format,ic=tc.formatBody,oc=tc.formatRows,ac=tc.formatRow,uc=tc.formatValue,cc=Ju("\t"),fc=cc.parse,sc=cc.parseRows,lc=cc.format,hc=cc.formatBody,dc=cc.formatRows,pc=cc.formatRow,gc=cc.formatValue;const yc=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function vc(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function _c(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function bc(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function mc(t,n){return fetch(t,n).then(bc)}function xc(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=void 0),mc(n,e).then((function(n){return t(n,r)}))}}var wc=xc(nc),Mc=xc(fc);function Tc(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function Ac(t){return(n,e)=>mc(n,e).then((n=>(new DOMParser).parseFromString(n,t)))}var Sc=Ac("application/xml"),Ec=Ac("text/html"),Nc=Ac("image/svg+xml");function kc(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,a,u,c,f,s,l,h,d=t._root,p={data:r},g=t._x0,y=t._y0,v=t._x1,_=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((f=n>=(o=(g+v)/2))?g=o:v=o,(s=e>=(a=(y+_)/2))?y=a:_=a,i=d,!(d=d[l=s<<1|f]))return i[l]=p,t;if(u=+t._x.call(null,d.data),c=+t._y.call(null,d.data),n===u&&e===c)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(f=n>=(o=(g+v)/2))?g=o:v=o,(s=e>=(a=(y+_)/2))?y=a:_=a}while((l=s<<1|f)==(h=(c>=a)<<1|u>=o));return i[h]=d,i[l]=p,t}function Cc(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function Pc(t){return t[0]}function zc(t){return t[1]}function $c(t,n,e){var r=new Dc(null==n?Pc:n,null==e?zc:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Dc(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Rc(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var Fc=$c.prototype=Dc.prototype;function qc(t){return function(){return t}}function Uc(t){return 1e-6*(t()-.5)}function Ic(t){return t.x+t.vx}function Oc(t){return t.y+t.vy}function Bc(t){return t.index}function Yc(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}Fc.copy=function(){var t,n,e=new Dc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=Rc(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=Rc(n));return e},Fc.add=function(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return kc(this.cover(n,e),n,e,t)},Fc.addAll=function(t){var n,e,r,i,o=t.length,a=new Array(o),u=new Array(o),c=1/0,f=1/0,s=-1/0,l=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(a[e]=r,u[e]=i,r<c&&(c=r),r>s&&(s=r),i<f&&(f=i),i>l&&(l=i));if(c>s||f>l)return this;for(this.cover(c,f).cover(s,l),e=0;e<o;++e)kc(this,a[e],u[e],t[e]);return this},Fc.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{for(var a,u,c=i-e||1,f=this._root;e>t||t>=i||r>n||n>=o;)switch(u=(n<r)<<1|t<e,(a=new Array(4))[u]=f,f=a,c*=2,u){case 0:i=e+c,o=r+c;break;case 1:e=i-c,o=r+c;break;case 2:i=e+c,r=o-c;break;case 3:e=i-c,r=o-c}this._root&&this._root.length&&(this._root=f)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},Fc.data=function(){var t=[];return this.visit((function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)})),t},Fc.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Fc.find=function(t,n,e){var r,i,o,a,u,c,f,s=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new Cc(g,s,l,h,d)),null==e?e=1/0:(s=t-e,l=n-e,h=t+e,d=n+e,e*=e);c=p.pop();)if(!(!(g=c.node)||(i=c.x0)>h||(o=c.y0)>d||(a=c.x1)<s||(u=c.y1)<l))if(g.length){var y=(i+a)/2,v=(o+u)/2;p.push(new Cc(g[3],y,v,a,u),new Cc(g[2],i,v,y,u),new Cc(g[1],y,o,a,v),new Cc(g[0],i,o,y,v)),(f=(n>=v)<<1|t>=y)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-f],p[p.length-1-f]=c)}else{var _=t-+this._x.call(null,g.data),b=n-+this._y.call(null,g.data),m=_*_+b*b;if(m<e){var x=Math.sqrt(e=m);s=t-x,l=n-x,h=t+x,d=n+x,r=g.data}}return r},Fc.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var n,e,r,i,o,a,u,c,f,s,l,h,d=this._root,p=this._x0,g=this._y0,y=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((f=o>=(u=(p+y)/2))?p=u:y=u,(s=a>=(c=(g+v)/2))?g=c:v=c,n=d,!(d=d[l=s<<1|f]))return this;if(!d.length)break;(n[l+1&3]||n[l+2&3]||n[l+3&3])&&(e=n,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):n?(i?n[l]=i:delete n[l],(d=n[0]||n[1]||n[2]||n[3])&&d===(n[3]||n[2]||n[1]||n[0])&&!d.length&&(e?e[h]=d:this._root=d),this):(this._root=i,this)},Fc.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},Fc.root=function(){return this._root},Fc.size=function(){var t=0;return this.visit((function(n){if(!n.length)do{++t}while(n=n.next)})),t},Fc.visit=function(t){var n,e,r,i,o,a,u=[],c=this._root;for(c&&u.push(new Cc(c,this._x0,this._y0,this._x1,this._y1));n=u.pop();)if(!t(c=n.node,r=n.x0,i=n.y0,o=n.x1,a=n.y1)&&c.length){var f=(r+o)/2,s=(i+a)/2;(e=c[3])&&u.push(new Cc(e,f,s,o,a)),(e=c[2])&&u.push(new Cc(e,r,s,f,a)),(e=c[1])&&u.push(new Cc(e,f,i,o,s)),(e=c[0])&&u.push(new Cc(e,r,i,f,s))}return this},Fc.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new Cc(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,a=n.x0,u=n.y0,c=n.x1,f=n.y1,s=(a+c)/2,l=(u+f)/2;(o=i[0])&&e.push(new Cc(o,a,u,s,l)),(o=i[1])&&e.push(new Cc(o,s,u,c,l)),(o=i[2])&&e.push(new Cc(o,a,l,s,f)),(o=i[3])&&e.push(new Cc(o,s,l,c,f))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},Fc.x=function(t){return arguments.length?(this._x=t,this):this._x},Fc.y=function(t){return arguments.length?(this._y=t,this):this._y};const Lc=1664525,jc=1013904223,Hc=4294967296;function Xc(t){return t.x}function Gc(t){return t.y}var Vc=Math.PI*(3-Math.sqrt(5));function Wc(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function Zc(t){return(t=Wc(Math.abs(t)))?t[1]:NaN}var Kc,Qc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jc(t){if(!(n=Qc.exec(t)))throw new Error("invalid format: "+t);var n;return new tf({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function tf(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function nf(t,n){var e=Wc(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Jc.prototype=tf.prototype,tf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var ef={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>nf(100*t,n),r:nf,s:function(t,n){var e=Wc(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(Kc=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Wc(t,Math.max(0,n+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function rf(t){return t}var of,af=Array.prototype.map,uf=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function cf(t){var n,e,r=void 0===t.grouping||void 0===t.thousands?rf:(n=af.call(t.grouping,Number),e=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,u=n[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),o.push(t.substring(i-=u,i+u)),!((c+=u+1)>r));)u=n[a=(a+1)%n.length];return o.reverse().join(e)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?rf:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(af.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",f=void 0===t.minus?"−":t.minus+"",s=void 0===t.nan?"NaN":t.nan+"";function l(t){var n=(t=Jc(t)).fill,e=t.align,l=t.sign,h=t.symbol,d=t.zero,p=t.width,g=t.comma,y=t.precision,v=t.trim,_=t.type;"n"===_?(g=!0,_="g"):ef[_]||(void 0===y&&(y=12),v=!0,_="g"),(d||"0"===n&&"="===e)&&(d=!0,n="0",e="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",m="$"===h?o:/[%p]/.test(_)?c:"",x=ef[_],w=/[defgprs%]/.test(_);function M(t){var i,o,c,h=b,M=m;if("c"===_)M=x(t)+M,t="";else{var T=(t=+t)<0||1/t<0;if(t=isNaN(t)?s:x(Math.abs(t),y),v&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),T&&0==+t&&"+"!==l&&(T=!1),h=(T?"("===l?l:f:"-"===l||"("===l?"":l)+h,M=("s"===_?uf[8+Kc/3]:"")+M+(T&&"("===l?")":""),w)for(i=-1,o=t.length;++i<o;)if(48>(c=t.charCodeAt(i))||c>57){M=(46===c?a+t.slice(i+1):t.slice(i))+M,t=t.slice(0,i);break}}g&&!d&&(t=r(t,1/0));var A=h.length+t.length+M.length,S=A<p?new Array(p-A+1).join(n):"";switch(g&&d&&(t=r(S+t,S.length?p-M.length:1/0),S=""),e){case"<":t=h+t+M+S;break;case"=":t=h+S+t+M;break;case"^":t=S.slice(0,A=S.length>>1)+h+t+M+S.slice(A);break;default:t=S+h+t+M}return u(t)}return y=void 0===y?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),M.toString=function(){return t+""},M}return{format:l,formatPrefix:function(t,n){var e=l(((t=Jc(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Zc(n)/3))),i=Math.pow(10,-r),o=uf[8+r/3];return function(t){return e(i*t)+o}}}}function ff(n){return of=cf(n),t.format=of.format,t.formatPrefix=of.formatPrefix,of}function sf(t){return Math.max(0,-Zc(Math.abs(t)))}function lf(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Zc(n)/3)))-Zc(Math.abs(t)))}function hf(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Zc(n)-Zc(t))+1}t.format=void 0,t.formatPrefix=void 0,ff({thousands:",",grouping:[3],currency:["$",""]});var df=1e-6,pf=1e-12,gf=Math.PI,yf=gf/2,vf=gf/4,_f=2*gf,bf=180/gf,mf=gf/180,xf=Math.abs,wf=Math.atan,Mf=Math.atan2,Tf=Math.cos,Af=Math.ceil,Sf=Math.exp,Ef=Math.hypot,Nf=Math.log,kf=Math.pow,Cf=Math.sin,Pf=Math.sign||function(t){return t>0?1:t<0?-1:0},zf=Math.sqrt,$f=Math.tan;function Df(t){return t>1?0:t<-1?gf:Math.acos(t)}function Rf(t){return t>1?yf:t<-1?-yf:Math.asin(t)}function Ff(t){return(t=Cf(t/2))*t}function qf(){}function Uf(t,n){t&&Of.hasOwnProperty(t.type)&&Of[t.type](t,n)}var If={Feature:function(t,n){Uf(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)Uf(e[r].geometry,n)}},Of={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Bf(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Bf(e[r],n,0)},Polygon:function(t,n){Yf(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Yf(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)Uf(e[r],n)}};function Bf(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function Yf(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Bf(t[e],n,1);n.polygonEnd()}function Lf(t,n){t&&If.hasOwnProperty(t.type)?If[t.type](t,n):Uf(t,n)}var jf,Hf,Xf,Gf,Vf,Wf,Zf,Kf,Qf,Jf,ts,ns,es,rs,is,os,as=new T,us=new T,cs={point:qf,lineStart:qf,lineEnd:qf,polygonStart:function(){as=new T,cs.lineStart=fs,cs.lineEnd=ss},polygonEnd:function(){var t=+as;us.add(t<0?_f+t:t),this.lineStart=this.lineEnd=this.point=qf},sphere:function(){us.add(_f)}};function fs(){cs.point=ls}function ss(){hs(jf,Hf)}function ls(t,n){cs.point=hs,jf=t,Hf=n,Xf=t*=mf,Gf=Tf(n=(n*=mf)/2+vf),Vf=Cf(n)}function hs(t,n){var e=(t*=mf)-Xf,r=e>=0?1:-1,i=r*e,o=Tf(n=(n*=mf)/2+vf),a=Cf(n),u=Vf*a,c=Gf*o+u*Tf(i),f=u*r*Cf(i);as.add(Mf(f,c)),Xf=t,Gf=o,Vf=a}function ds(t){return[Mf(t[1],t[0]),Rf(t[2])]}function ps(t){var n=t[0],e=t[1],r=Tf(e);return[r*Tf(n),r*Cf(n),Cf(e)]}function gs(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function ys(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function vs(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function _s(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function bs(t){var n=zf(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var ms,xs,ws,Ms,Ts,As,Ss,Es,Ns,ks,Cs,Ps,zs,$s,Ds,Rs,Fs={point:qs,lineStart:Is,lineEnd:Os,polygonStart:function(){Fs.point=Bs,Fs.lineStart=Ys,Fs.lineEnd=Ls,rs=new T,cs.polygonStart()},polygonEnd:function(){cs.polygonEnd(),Fs.point=qs,Fs.lineStart=Is,Fs.lineEnd=Os,as<0?(Wf=-(Kf=180),Zf=-(Qf=90)):rs>df?Qf=90:rs<-df&&(Zf=-90),os[0]=Wf,os[1]=Kf},sphere:function(){Wf=-(Kf=180),Zf=-(Qf=90)}};function qs(t,n){is.push(os=[Wf=t,Kf=t]),n<Zf&&(Zf=n),n>Qf&&(Qf=n)}function Us(t,n){var e=ps([t*mf,n*mf]);if(es){var r=ys(es,e),i=ys([r[1],-r[0],0],r);bs(i),i=ds(i);var o,a=t-Jf,u=a>0?1:-1,c=i[0]*bf*u,f=xf(a)>180;f^(u*Jf<c&&c<u*t)?(o=i[1]*bf)>Qf&&(Qf=o):f^(u*Jf<(c=(c+360)%360-180)&&c<u*t)?(o=-i[1]*bf)<Zf&&(Zf=o):(n<Zf&&(Zf=n),n>Qf&&(Qf=n)),f?t<Jf?js(Wf,t)>js(Wf,Kf)&&(Kf=t):js(t,Kf)>js(Wf,Kf)&&(Wf=t):Kf>=Wf?(t<Wf&&(Wf=t),t>Kf&&(Kf=t)):t>Jf?js(Wf,t)>js(Wf,Kf)&&(Kf=t):js(t,Kf)>js(Wf,Kf)&&(Wf=t)}else is.push(os=[Wf=t,Kf=t]);n<Zf&&(Zf=n),n>Qf&&(Qf=n),es=e,Jf=t}function Is(){Fs.point=Us}function Os(){os[0]=Wf,os[1]=Kf,Fs.point=qs,es=null}function Bs(t,n){if(es){var e=t-Jf;rs.add(xf(e)>180?e+(e>0?360:-360):e)}else ts=t,ns=n;cs.point(t,n),Us(t,n)}function Ys(){cs.lineStart()}function Ls(){Bs(ts,ns),cs.lineEnd(),xf(rs)>df&&(Wf=-(Kf=180)),os[0]=Wf,os[1]=Kf,es=null}function js(t,n){return(n-=t)<0?n+360:n}function Hs(t,n){return t[0]-n[0]}function Xs(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var Gs={sphere:qf,point:Vs,lineStart:Zs,lineEnd:Js,polygonStart:function(){Gs.lineStart=tl,Gs.lineEnd=nl},polygonEnd:function(){Gs.lineStart=Zs,Gs.lineEnd=Js}};function Vs(t,n){t*=mf;var e=Tf(n*=mf);Ws(e*Tf(t),e*Cf(t),Cf(n))}function Ws(t,n,e){++ms,ws+=(t-ws)/ms,Ms+=(n-Ms)/ms,Ts+=(e-Ts)/ms}function Zs(){Gs.point=Ks}function Ks(t,n){t*=mf;var e=Tf(n*=mf);$s=e*Tf(t),Ds=e*Cf(t),Rs=Cf(n),Gs.point=Qs,Ws($s,Ds,Rs)}function Qs(t,n){t*=mf;var e=Tf(n*=mf),r=e*Tf(t),i=e*Cf(t),o=Cf(n),a=Mf(zf((a=Ds*o-Rs*i)*a+(a=Rs*r-$s*o)*a+(a=$s*i-Ds*r)*a),$s*r+Ds*i+Rs*o);xs+=a,As+=a*($s+($s=r)),Ss+=a*(Ds+(Ds=i)),Es+=a*(Rs+(Rs=o)),Ws($s,Ds,Rs)}function Js(){Gs.point=Vs}function tl(){Gs.point=el}function nl(){rl(Ps,zs),Gs.point=Vs}function el(t,n){Ps=t,zs=n,t*=mf,n*=mf,Gs.point=rl;var e=Tf(n);$s=e*Tf(t),Ds=e*Cf(t),Rs=Cf(n),Ws($s,Ds,Rs)}function rl(t,n){t*=mf;var e=Tf(n*=mf),r=e*Tf(t),i=e*Cf(t),o=Cf(n),a=Ds*o-Rs*i,u=Rs*r-$s*o,c=$s*i-Ds*r,f=Ef(a,u,c),s=Rf(f),l=f&&-s/f;Ns.add(l*a),ks.add(l*u),Cs.add(l*c),xs+=s,As+=s*($s+($s=r)),Ss+=s*(Ds+(Ds=i)),Es+=s*(Rs+(Rs=o)),Ws($s,Ds,Rs)}function il(t){return function(){return t}}function ol(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function al(t,n){return xf(t)>gf&&(t-=Math.round(t/_f)*_f),[t,n]}function ul(t,n,e){return(t%=_f)?n||e?ol(fl(t),sl(n,e)):fl(t):n||e?sl(n,e):al}function cl(t){return function(n,e){return xf(n+=t)>gf&&(n-=Math.round(n/_f)*_f),[n,e]}}function fl(t){var n=cl(t);return n.invert=cl(-t),n}function sl(t,n){var e=Tf(t),r=Cf(t),i=Tf(n),o=Cf(n);function a(t,n){var a=Tf(n),u=Tf(t)*a,c=Cf(t)*a,f=Cf(n),s=f*e+u*r;return[Mf(c*i-s*o,u*e-f*r),Rf(s*i+c*o)]}return a.invert=function(t,n){var a=Tf(n),u=Tf(t)*a,c=Cf(t)*a,f=Cf(n),s=f*i-c*o;return[Mf(c*i+f*o,u*e+s*r),Rf(s*e-u*r)]},a}function ll(t){function n(n){return(n=t(n[0]*mf,n[1]*mf))[0]*=bf,n[1]*=bf,n}return t=ul(t[0]*mf,t[1]*mf,t.length>2?t[2]*mf:0),n.invert=function(n){return(n=t.invert(n[0]*mf,n[1]*mf))[0]*=bf,n[1]*=bf,n},n}function hl(t,n,e,r,i,o){if(e){var a=Tf(n),u=Cf(n),c=r*e;null==i?(i=n+r*_f,o=n-c/2):(i=dl(a,i),o=dl(a,o),(r>0?i<o:i>o)&&(i+=r*_f));for(var f,s=i;r>0?s>o:s<o;s-=c)f=ds([a,-u*Tf(s),-u*Cf(s)]),t.point(f[0],f[1])}}function dl(t,n){(n=ps(n))[0]-=t,bs(n);var e=Df(-n[1]);return((-n[2]<0?-e:e)+_f-df)%_f}function pl(){var t,n=[];return{point:function(n,e,r){t.push([n,e,r])},lineStart:function(){n.push(t=[])},lineEnd:qf,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function gl(t,n){return xf(t[0]-n[0])<df&&xf(t[1]-n[1])<df}function yl(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function vl(t,n,e,r,i){var o,a,u=[],c=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],a=t[n];if(gl(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2*df}u.push(e=new yl(r,t,null,!0)),c.push(e.o=new yl(r,null,e,!1)),u.push(e=new yl(a,t,null,!1)),c.push(e.o=new yl(a,null,e,!0))}})),u.length){for(c.sort(n),_l(u),_l(c),o=0,a=c.length;o<a;++o)c[o].e=e=!e;for(var f,s,l=u[0];;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;f=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=f.length;o<a;++o)i.point((s=f[o])[0],s[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(f=h.p.z,o=f.length-1;o>=0;--o)i.point((s=f[o])[0],s[1]);else r(h.x,h.p.x,-1,i);h=h.p}f=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function _l(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function bl(t){return xf(t[0])<=gf?t[0]:Pf(t[0])*((xf(t[0])+gf)%_f-gf)}function ml(t,n){var e=bl(n),r=n[1],i=Cf(r),o=[Cf(e),-Tf(e),0],a=0,u=0,c=new T;1===i?r=yf+df:-1===i&&(r=-yf-df);for(var f=0,s=t.length;f<s;++f)if(h=(l=t[f]).length)for(var l,h,d=l[h-1],p=bl(d),g=d[1]/2+vf,y=Cf(g),v=Tf(g),_=0;_<h;++_,p=m,y=w,v=M,d=b){var b=l[_],m=bl(b),x=b[1]/2+vf,w=Cf(x),M=Tf(x),A=m-p,S=A>=0?1:-1,E=S*A,N=E>gf,k=y*w;if(c.add(Mf(k*S*Cf(E),v*M+k*Tf(E))),a+=N?A+S*_f:A,N^p>=e^m>=e){var C=ys(ps(d),ps(b));bs(C);var P=ys(o,C);bs(P);var z=(N^A>=0?-1:1)*Rf(P[2]);(r>z||r===z&&(C[0]||C[1]))&&(u+=N^A>=0?1:-1)}}return(a<-df||a<df&&c<-pf)^1&u}function xl(t,n,e,r){return function(i){var o,a,u,c=n(i),f=pl(),s=n(f),l=!1,h={point:d,lineStart:g,lineEnd:y,polygonStart:function(){h.point=v,h.lineStart=_,h.lineEnd=b,a=[],o=[]},polygonEnd:function(){h.point=d,h.lineStart=g,h.lineEnd=y,a=ft(a);var t=ml(o,r);a.length?(l||(i.polygonStart(),l=!0),vl(a,Ml,t,e,i)):t&&(l||(i.polygonStart(),l=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(n,e){t(n,e)&&i.point(n,e)}function p(t,n){c.point(t,n)}function g(){h.point=p,c.lineStart()}function y(){h.point=d,c.lineEnd()}function v(t,n){u.push([t,n]),s.point(t,n)}function _(){s.lineStart(),u=[]}function b(){v(u[0][0],u[0][1]),s.lineEnd();var t,n,e,r,c=s.clean(),h=f.result(),d=h.length;if(u.pop(),o.push(u),u=null,d)if(1&c){if((n=(e=h[0]).length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else d>1&&2&c&&h.push(h.pop().concat(h.shift())),a.push(h.filter(wl))}return h}}function wl(t){return t.length>1}function Ml(t,n){return((t=t.x)[0]<0?t[1]-yf-df:yf-t[1])-((n=n.x)[0]<0?n[1]-yf-df:yf-n[1])}al.invert=al;var Tl=xl((function(){return!0}),(function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var u=o>0?gf:-gf,c=xf(o-e);xf(c-gf)<df?(t.point(e,r=(r+a)/2>0?yf:-yf),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&c>=gf&&(xf(e-i)<df&&(e-=i*df),xf(o-u)<df&&(o-=u*df),r=function(t,n,e,r){var i,o,a=Cf(t-e);return xf(a)>df?wf((Cf(n)*(o=Tf(r))*Cf(e)-Cf(r)*(i=Tf(n))*Cf(t))/(i*o*a)):(n+r)/2}(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=a),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var i;if(null==t)i=e*yf,r.point(-gf,i),r.point(0,i),r.point(gf,i),r.point(gf,0),r.point(gf,-i),r.point(0,-i),r.point(-gf,-i),r.point(-gf,0),r.point(-gf,i);else if(xf(t[0]-n[0])>df){var o=t[0]<n[0]?gf:-gf;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}),[-gf,-yf]);function Al(t){var n=Tf(t),e=6*mf,r=n>0,i=xf(n)>df;function o(t,e){return Tf(t)*Tf(e)>n}function a(t,e,r){var i=[1,0,0],o=ys(ps(t),ps(e)),a=gs(o,o),u=o[0],c=a-u*u;if(!c)return!r&&t;var f=n*a/c,s=-n*u/c,l=ys(i,o),h=_s(i,f);vs(h,_s(o,s));var d=l,p=gs(h,d),g=gs(d,d),y=p*p-g*(gs(h,h)-1);if(!(y<0)){var v=zf(y),_=_s(d,(-p-v)/g);if(vs(_,h),_=ds(_),!r)return _;var b,m=t[0],x=e[0],w=t[1],M=e[1];x<m&&(b=m,m=x,x=b);var T=x-m,A=xf(T-gf)<df;if(!A&&M<w&&(b=w,w=M,M=b),A||T<df?A?w+M>0^_[1]<(xf(_[0]-m)<df?w:M):w<=_[1]&&_[1]<=M:T>gf^(m<=_[0]&&_[0]<=x)){var S=_s(d,(-p+v)/g);return vs(S,h),[_,ds(S)]}}}function u(n,e){var i=r?t:gf-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return xl(o,(function(t){var n,e,c,f,s;return{lineStart:function(){f=c=!1,s=1},point:function(l,h){var d,p=[l,h],g=o(l,h),y=r?g?0:u(l,h):g?u(l+(l<0?gf:-gf),h):0;if(!n&&(f=c=g)&&t.lineStart(),g!==c&&(!(d=a(n,p))||gl(n,d)||gl(p,d))&&(p[2]=1),g!==c)s=0,g?(t.lineStart(),d=a(p,n),t.point(d[0],d[1])):(d=a(n,p),t.point(d[0],d[1],2),t.lineEnd()),n=d;else if(i&&n&&r^g){var v;y&e||!(v=a(p,n,!0))||(s=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!g||n&&gl(n,p)||t.point(p[0],p[1]),n=p,c=g,e=y},lineEnd:function(){c&&t.lineEnd(),n=null},clean:function(){return s|(f&&c)<<1}}}),(function(n,r,i,o){hl(o,t,e,i,n,r)}),r?[0,-t]:[-gf,t-gf])}var Sl,El,Nl,kl,Cl=1e9,Pl=-Cl;function zl(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,u,f){var s=0,l=0;if(null==i||(s=a(i,u))!==(l=a(o,u))||c(i,o)<0^u>0)do{f.point(0===s||3===s?t:e,s>1?r:n)}while((s=(s+u+4)%4)!==l);else f.point(o[0],o[1])}function a(r,i){return xf(r[0]-t)<df?i>0?0:3:xf(r[0]-e)<df?i>0?2:1:xf(r[1]-n)<df?i>0?1:0:i>0?3:2}function u(t,n){return c(t.x,n.x)}function c(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var c,f,s,l,h,d,p,g,y,v,_,b=a,m=pl(),x={point:w,lineStart:function(){x.point=M,f&&f.push(s=[]);v=!0,y=!1,p=g=NaN},lineEnd:function(){c&&(M(l,h),d&&y&&m.rejoin(),c.push(m.result()));x.point=w,y&&b.lineEnd()},polygonStart:function(){b=m,c=[],f=[],_=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=f.length;e<i;++e)for(var o,a,u=f[e],c=1,s=u.length,l=u[0],h=l[0],d=l[1];c<s;++c)o=h,a=d,h=(l=u[c])[0],d=l[1],a<=r?d>r&&(h-o)*(r-a)>(d-a)*(t-o)&&++n:d<=r&&(h-o)*(r-a)<(d-a)*(t-o)&&--n;return n}(),e=_&&n,i=(c=ft(c)).length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&vl(c,u,n,o,a),a.polygonEnd());b=a,c=f=s=null}};function w(t,n){i(t,n)&&b.point(t,n)}function M(o,a){var u=i(o,a);if(f&&s.push([o,a]),v)l=o,h=a,d=u,v=!1,u&&(b.lineStart(),b.point(o,a));else if(u&&y)b.point(o,a);else{var c=[p=Math.max(Pl,Math.min(Cl,p)),g=Math.max(Pl,Math.min(Cl,g))],m=[o=Math.max(Pl,Math.min(Cl,o)),a=Math.max(Pl,Math.min(Cl,a))];!function(t,n,e,r,i,o){var a,u=t[0],c=t[1],f=0,s=1,l=n[0]-u,h=n[1]-c;if(a=e-u,l||!(a>0)){if(a/=l,l<0){if(a<f)return;a<s&&(s=a)}else if(l>0){if(a>s)return;a>f&&(f=a)}if(a=i-u,l||!(a<0)){if(a/=l,l<0){if(a>s)return;a>f&&(f=a)}else if(l>0){if(a<f)return;a<s&&(s=a)}if(a=r-c,h||!(a>0)){if(a/=h,h<0){if(a<f)return;a<s&&(s=a)}else if(h>0){if(a>s)return;a>f&&(f=a)}if(a=o-c,h||!(a<0)){if(a/=h,h<0){if(a>s)return;a>f&&(f=a)}else if(h>0){if(a<f)return;a<s&&(s=a)}return f>0&&(t[0]=u+f*l,t[1]=c+f*h),s<1&&(n[0]=u+s*l,n[1]=c+s*h),!0}}}}}(c,m,t,n,e,r)?u&&(b.lineStart(),b.point(o,a),_=!1):(y||(b.lineStart(),b.point(c[0],c[1])),b.point(m[0],m[1]),u||b.lineEnd(),_=!1)}p=o,g=a,y=u}return x}}var $l={sphere:qf,point:qf,lineStart:function(){$l.point=Rl,$l.lineEnd=Dl},lineEnd:qf,polygonStart:qf,polygonEnd:qf};function Dl(){$l.point=$l.lineEnd=qf}function Rl(t,n){El=t*=mf,Nl=Cf(n*=mf),kl=Tf(n),$l.point=Fl}function Fl(t,n){t*=mf;var e=Cf(n*=mf),r=Tf(n),i=xf(t-El),o=Tf(i),a=r*Cf(i),u=kl*e-Nl*r*o,c=Nl*e+kl*r*o;Sl.add(Mf(zf(a*a+u*u),c)),El=t,Nl=e,kl=r}function ql(t){return Sl=new T,Lf(t,$l),+Sl}var Ul=[null,null],Il={type:"LineString",coordinates:Ul};function Ol(t,n){return Ul[0]=t,Ul[1]=n,ql(Il)}var Bl={Feature:function(t,n){return Ll(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if(Ll(e[r].geometry,n))return!0;return!1}},Yl={Sphere:function(){return!0},Point:function(t,n){return jl(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(jl(e[r],n))return!0;return!1},LineString:function(t,n){return Hl(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Hl(e[r],n))return!0;return!1},Polygon:function(t,n){return Xl(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Xl(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if(Ll(e[r],n))return!0;return!1}};function Ll(t,n){return!(!t||!Yl.hasOwnProperty(t.type))&&Yl[t.type](t,n)}function jl(t,n){return 0===Ol(t,n)}function Hl(t,n){for(var e,r,i,o=0,a=t.length;o<a;o++){if(0===(r=Ol(t[o],n)))return!0;if(o>0&&(i=Ol(t[o],t[o-1]))>0&&e<=i&&r<=i&&(e+r-i)*(1-Math.pow((e-r)/i,2))<pf*i)return!0;e=r}return!1}function Xl(t,n){return!!ml(t.map(Gl),Vl(n))}function Gl(t){return(t=t.map(Vl)).pop(),t}function Vl(t){return[t[0]*mf,t[1]*mf]}function Wl(t,n,e){var r=lt(t,n-df,e).concat(n);return function(t){return r.map((function(n){return[t,n]}))}}function Zl(t,n,e){var r=lt(t,n-df,e).concat(n);return function(t){return r.map((function(n){return[n,t]}))}}function Kl(){var t,n,e,r,i,o,a,u,c,f,s,l,h=10,d=h,p=90,g=360,y=2.5;function v(){return{type:"MultiLineString",coordinates:_()}}function _(){return lt(Af(r/p)*p,e,p).map(s).concat(lt(Af(u/g)*g,a,g).map(l)).concat(lt(Af(n/h)*h,t,h).filter((function(t){return xf(t%p)>df})).map(c)).concat(lt(Af(o/d)*d,i,d).filter((function(t){return xf(t%g)>df})).map(f))}return v.lines=function(){return _().map((function(t){return{type:"LineString",coordinates:t}}))},v.outline=function(){return{type:"Polygon",coordinates:[s(r).concat(l(a).slice(1),s(e).reverse().slice(1),l(u).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],u=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),u>a&&(t=u,u=a,a=t),v.precision(y)):[[r,u],[e,a]]},v.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],i=+e[1][1],n>t&&(e=n,n=t,t=e),o>i&&(e=o,o=i,i=e),v.precision(y)):[[n,o],[t,i]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(p=+t[0],g=+t[1],v):[p,g]},v.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],v):[h,d]},v.precision=function(h){return arguments.length?(y=+h,c=Wl(o,i,90),f=Zl(n,t,y),s=Wl(u,a,90),l=Zl(r,e,y),v):y},v.extentMajor([[-180,-90+df],[180,90-df]]).extentMinor([[-180,-80-df],[180,80+df]])}var Ql,Jl,th,nh,eh=t=>t,rh=new T,ih=new T,oh={point:qf,lineStart:qf,lineEnd:qf,polygonStart:function(){oh.lineStart=ah,oh.lineEnd=fh},polygonEnd:function(){oh.lineStart=oh.lineEnd=oh.point=qf,rh.add(xf(ih)),ih=new T},result:function(){var t=rh/2;return rh=new T,t}};function ah(){oh.point=uh}function uh(t,n){oh.point=ch,Ql=th=t,Jl=nh=n}function ch(t,n){ih.add(nh*t-th*n),th=t,nh=n}function fh(){ch(Ql,Jl)}var sh=oh,lh=1/0,hh=lh,dh=-lh,ph=dh,gh={point:function(t,n){t<lh&&(lh=t);t>dh&&(dh=t);n<hh&&(hh=n);n>ph&&(ph=n)},lineStart:qf,lineEnd:qf,polygonStart:qf,polygonEnd:qf,result:function(){var t=[[lh,hh],[dh,ph]];return dh=ph=-(hh=lh=1/0),t}};var yh,vh,_h,bh,mh=gh,xh=0,wh=0,Mh=0,Th=0,Ah=0,Sh=0,Eh=0,Nh=0,kh=0,Ch={point:Ph,lineStart:zh,lineEnd:Rh,polygonStart:function(){Ch.lineStart=Fh,Ch.lineEnd=qh},polygonEnd:function(){Ch.point=Ph,Ch.lineStart=zh,Ch.lineEnd=Rh},result:function(){var t=kh?[Eh/kh,Nh/kh]:Sh?[Th/Sh,Ah/Sh]:Mh?[xh/Mh,wh/Mh]:[NaN,NaN];return xh=wh=Mh=Th=Ah=Sh=Eh=Nh=kh=0,t}};function Ph(t,n){xh+=t,wh+=n,++Mh}function zh(){Ch.point=$h}function $h(t,n){Ch.point=Dh,Ph(_h=t,bh=n)}function Dh(t,n){var e=t-_h,r=n-bh,i=zf(e*e+r*r);Th+=i*(_h+t)/2,Ah+=i*(bh+n)/2,Sh+=i,Ph(_h=t,bh=n)}function Rh(){Ch.point=Ph}function Fh(){Ch.point=Uh}function qh(){Ih(yh,vh)}function Uh(t,n){Ch.point=Ih,Ph(yh=_h=t,vh=bh=n)}function Ih(t,n){var e=t-_h,r=n-bh,i=zf(e*e+r*r);Th+=i*(_h+t)/2,Ah+=i*(bh+n)/2,Sh+=i,Eh+=(i=bh*t-_h*n)*(_h+t),Nh+=i*(bh+n),kh+=3*i,Ph(_h=t,bh=n)}var Oh=Ch;function Bh(t){this._context=t}Bh.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,_f)}},result:qf};var Yh,Lh,jh,Hh,Xh,Gh=new T,Vh={point:qf,lineStart:function(){Vh.point=Wh},lineEnd:function(){Yh&&Zh(Lh,jh),Vh.point=qf},polygonStart:function(){Yh=!0},polygonEnd:function(){Yh=null},result:function(){var t=+Gh;return Gh=new T,t}};function Wh(t,n){Vh.point=Zh,Lh=Hh=t,jh=Xh=n}function Zh(t,n){Hh-=t,Xh-=n,Gh.add(zf(Hh*Hh+Xh*Xh)),Hh=t,Xh=n}var Kh=Vh;let Qh,Jh,td,nd;class ed{constructor(t){this._append=null==t?rd:function(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return rd;if(n!==Qh){const t=10**n;Qh=n,Jh=function(n){let e=1;this._+=n[0];for(const r=n.length;e<r;++e)this._+=Math.round(arguments[e]*t)/t+n[e]}}return Jh}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:this._append`M${t},${n}`,this._point=1;break;case 1:this._append`L${t},${n}`;break;default:if(this._append`M${t},${n}`,this._radius!==td||this._append!==Jh){const t=this._radius,n=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,td=t,Jh=this._append,nd=this._,this._=n}this._+=nd}}result(){const t=this._;return this._="",t.length?t:null}}function rd(t){let n=1;this._+=t[0];for(const e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function id(t){return function(n){var e=new od;for(var r in t)e[r]=t[r];return e.stream=n,e}}function od(){}function ad(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Lf(e,t.stream(mh)),n(mh.result()),null!=r&&t.clipExtent(r),t}function ud(t,n,e){return ad(t,(function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),a=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,u])}),e)}function cd(t,n,e){return ud(t,[[0,0],n],e)}function fd(t,n,e){return ad(t,(function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,a=-i*e[0][1];t.scale(150*i).translate([o,a])}),e)}function sd(t,n,e){return ad(t,(function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],a=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,a])}),e)}od.prototype={constructor:od,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ld=16,hd=Tf(30*mf);function dd(t,n){return+n?function(t,n){function e(r,i,o,a,u,c,f,s,l,h,d,p,g,y){var v=f-r,_=s-i,b=v*v+_*_;if(b>4*n&&g--){var m=a+h,x=u+d,w=c+p,M=zf(m*m+x*x+w*w),T=Rf(w/=M),A=xf(xf(w)-1)<df||xf(o-l)<df?(o+l)/2:Mf(x,m),S=t(A,T),E=S[0],N=S[1],k=E-r,C=N-i,P=_*k-v*C;(P*P/b>n||xf((v*k+_*C)/b-.5)>.3||a*h+u*d+c*p<hd)&&(e(r,i,o,a,u,c,E,N,A,m/=M,x/=M,w,g,y),y.point(E,N),e(E,N,A,m,x,w,f,s,l,h,d,p,g,y))}}return function(n){var r,i,o,a,u,c,f,s,l,h,d,p,g={point:y,lineStart:v,lineEnd:b,polygonStart:function(){n.polygonStart(),g.lineStart=m},polygonEnd:function(){n.polygonEnd(),g.lineStart=v}};function y(e,r){e=t(e,r),n.point(e[0],e[1])}function v(){s=NaN,g.point=_,n.lineStart()}function _(r,i){var o=ps([r,i]),a=t(r,i);e(s,l,f,h,d,p,s=a[0],l=a[1],f=r,h=o[0],d=o[1],p=o[2],ld,n),n.point(s,l)}function b(){g.point=y,n.lineEnd()}function m(){v(),g.point=x,g.lineEnd=w}function x(t,n){_(r=t,n),i=s,o=l,a=h,u=d,c=p,g.point=_}function w(){e(s,l,f,h,d,p,i,o,r,a,u,c,ld,n),g.lineEnd=b,b()}return g}}(t,n):function(t){return id({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var pd=id({point:function(t,n){this.stream.point(t*mf,n*mf)}});function gd(t,n,e,r,i,o){if(!o)return function(t,n,e,r,i){function o(o,a){return[n+t*(o*=r),e-t*(a*=i)]}return o.invert=function(o,a){return[(o-n)/t*r,(e-a)/t*i]},o}(t,n,e,r,i);var a=Tf(o),u=Cf(o),c=a*t,f=u*t,s=a/t,l=u/t,h=(u*e-a*n)/t,d=(u*n+a*e)/t;function p(t,o){return[c*(t*=r)-f*(o*=i)+n,e-f*t-c*o]}return p.invert=function(t,n){return[r*(s*t-l*n+h),i*(d-l*t-s*n)]},p}function yd(t){return vd((function(){return t}))()}function vd(t){var n,e,r,i,o,a,u,c,f,s,l=150,h=480,d=250,p=0,g=0,y=0,v=0,_=0,b=0,m=1,x=1,w=null,M=Tl,T=null,A=eh,S=.5;function E(t){return c(t[0]*mf,t[1]*mf)}function N(t){return(t=c.invert(t[0],t[1]))&&[t[0]*bf,t[1]*bf]}function k(){var t=gd(l,0,0,m,x,b).apply(null,n(p,g)),r=gd(l,h-t[0],d-t[1],m,x,b);return e=ul(y,v,_),u=ol(n,r),c=ol(e,u),a=dd(u,S),C()}function C(){return f=s=null,E}return E.stream=function(t){return f&&s===t?f:f=pd(function(t){return id({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(M(a(A(s=t)))))},E.preclip=function(t){return arguments.length?(M=t,w=void 0,C()):M},E.postclip=function(t){return arguments.length?(A=t,T=r=i=o=null,C()):A},E.clipAngle=function(t){return arguments.length?(M=+t?Al(w=t*mf):(w=null,Tl),C()):w*bf},E.clipExtent=function(t){return arguments.length?(A=null==t?(T=r=i=o=null,eh):zl(T=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),C()):null==T?null:[[T,r],[i,o]]},E.scale=function(t){return arguments.length?(l=+t,k()):l},E.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],k()):[h,d]},E.center=function(t){return arguments.length?(p=t[0]%360*mf,g=t[1]%360*mf,k()):[p*bf,g*bf]},E.rotate=function(t){return arguments.length?(y=t[0]%360*mf,v=t[1]%360*mf,_=t.length>2?t[2]%360*mf:0,k()):[y*bf,v*bf,_*bf]},E.angle=function(t){return arguments.length?(b=t%360*mf,k()):b*bf},E.reflectX=function(t){return arguments.length?(m=t?-1:1,k()):m<0},E.reflectY=function(t){return arguments.length?(x=t?-1:1,k()):x<0},E.precision=function(t){return arguments.length?(a=dd(u,S=t*t),C()):zf(S)},E.fitExtent=function(t,n){return ud(E,t,n)},E.fitSize=function(t,n){return cd(E,t,n)},E.fitWidth=function(t,n){return fd(E,t,n)},E.fitHeight=function(t,n){return sd(E,t,n)},function(){return n=t.apply(this,arguments),E.invert=n.invert&&N,k()}}function _d(t){var n=0,e=gf/3,r=vd(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*mf,e=t[1]*mf):[n*bf,e*bf]},i}function bd(t,n){var e=Cf(t),r=(e+Cf(n))/2;if(xf(r)<df)return function(t){var n=Tf(t);function e(t,e){return[t*n,Cf(e)/n]}return e.invert=function(t,e){return[t/n,Rf(e*n)]},e}(t);var i=1+e*(2*r-e),o=zf(i)/r;function a(t,n){var e=zf(i-2*r*Cf(n))/r;return[e*Cf(t*=r),o-e*Tf(t)]}return a.invert=function(t,n){var e=o-n,a=Mf(t,xf(e))*Pf(e);return e*r<0&&(a-=gf*Pf(t)*Pf(e)),[a/r,Rf((i-(t*t+e*e)*r*r)/(2*r))]},a}function md(){return _d(bd).scale(155.424).center([0,33.6442])}function xd(){return md().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function wd(t){return function(n,e){var r=Tf(n),i=Tf(e),o=t(r*i);return o===1/0?[2,0]:[o*i*Cf(n),o*Cf(e)]}}function Md(t){return function(n,e){var r=zf(n*n+e*e),i=t(r),o=Cf(i),a=Tf(i);return[Mf(n*o,r*a),Rf(r&&e*o/r)]}}var Td=wd((function(t){return zf(2/(1+t))}));Td.invert=Md((function(t){return 2*Rf(t/2)}));var Ad=wd((function(t){return(t=Df(t))&&t/Cf(t)}));function Sd(t,n){return[t,Nf($f((yf+n)/2))]}function Ed(t){var n,e,r,i=yd(t),o=i.center,a=i.scale,u=i.translate,c=i.clipExtent,f=null;function s(){var o=gf*a(),u=i(ll(i.rotate()).invert([0,0]));return c(null==f?[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]:t===Sd?[[Math.max(u[0]-o,f),n],[Math.min(u[0]+o,e),r]]:[[f,Math.max(u[1]-o,n)],[e,Math.min(u[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),s()):a()},i.translate=function(t){return arguments.length?(u(t),s()):u()},i.center=function(t){return arguments.length?(o(t),s()):o()},i.clipExtent=function(t){return arguments.length?(null==t?f=n=e=r=null:(f=+t[0][0],n=+t[0][1],e=+t[1][0],r=+t[1][1]),s()):null==f?null:[[f,n],[e,r]]},s()}function Nd(t){return $f((yf+t)/2)}function kd(t,n){var e=Tf(t),r=t===n?Cf(t):Nf(e/Tf(n))/Nf(Nd(n)/Nd(t)),i=e*kf(Nd(t),r)/r;if(!r)return Sd;function o(t,n){i>0?n<-yf+df&&(n=-yf+df):n>yf-df&&(n=yf-df);var e=i/kf(Nd(n),r);return[e*Cf(r*t),i-e*Tf(r*t)]}return o.invert=function(t,n){var e=i-n,o=Pf(r)*zf(t*t+e*e),a=Mf(t,xf(e))*Pf(e);return e*r<0&&(a-=gf*Pf(t)*Pf(e)),[a/r,2*wf(kf(i/o,1/r))-yf]},o}function Cd(t,n){return[t,n]}function Pd(t,n){var e=Tf(t),r=t===n?Cf(t):(e-Tf(n))/(n-t),i=e/r+t;if(xf(r)<df)return Cd;function o(t,n){var e=i-n,o=r*t;return[e*Cf(o),i-e*Tf(o)]}return o.invert=function(t,n){var e=i-n,o=Mf(t,xf(e))*Pf(e);return e*r<0&&(o-=gf*Pf(t)*Pf(e)),[o/r,i-Pf(r)*zf(t*t+e*e)]},o}Ad.invert=Md((function(t){return t})),Sd.invert=function(t,n){return[t,2*wf(Sf(n))-yf]},Cd.invert=Cd;var zd=1.340264,$d=-.081106,Dd=893e-6,Rd=.003796,Fd=zf(3)/2;function qd(t,n){var e=Rf(Fd*Cf(n)),r=e*e,i=r*r*r;return[t*Tf(e)/(Fd*(zd+3*$d*r+i*(7*Dd+9*Rd*r))),e*(zd+$d*r+i*(Dd+Rd*r))]}function Ud(t,n){var e=Tf(n),r=Tf(t)*e;return[e*Cf(t)/r,Cf(n)/r]}function Id(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}function Od(t,n){return[Tf(n)*Cf(t),Cf(n)]}function Bd(t,n){var e=Tf(n),r=1+Tf(t)*e;return[e*Cf(t)/r,Cf(n)/r]}function Yd(t,n){return[Nf($f((yf+n)/2)),-t]}function Ld(t,n){return t.parent===n.parent?1:2}function jd(t,n){return t+n.x}function Hd(t,n){return Math.max(t,n.y)}function Xd(t){var n=0,e=t.children,r=e&&e.length;if(r)for(;--r>=0;)n+=e[r].value;else n=1;t.value=n}function Gd(t,n){t instanceof Map?(t=[void 0,t],void 0===n&&(n=Wd)):void 0===n&&(n=Vd);for(var e,r,i,o,a,u=new Qd(t),c=[u];e=c.pop();)if((i=n(e.data))&&(a=(i=Array.from(i)).length))for(e.children=i,o=a-1;o>=0;--o)c.push(r=i[o]=new Qd(i[o])),r.parent=e,r.depth=e.depth+1;return u.eachBefore(Kd)}function Vd(t){return t.children}function Wd(t){return Array.isArray(t)?t[1]:null}function Zd(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Kd(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function Qd(t){this.data=t,this.depth=this.height=0,this.parent=null}function Jd(t){return null==t?null:tp(t)}function tp(t){if("function"!=typeof t)throw new Error;return t}function np(){return 0}function ep(t){return function(){return t}}qd.invert=function(t,n){for(var e,r=n,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=e=(r*(zd+$d*i+o*(Dd+Rd*i))-n)/(zd+3*$d*i+o*(7*Dd+9*Rd*i)))*r)*i*i,!(xf(e)<pf));++a);return[Fd*t*(zd+3*$d*i+o*(7*Dd+9*Rd*i))/Tf(r),Rf(Cf(r)/Fd)]},Ud.invert=Md(wf),Id.invert=function(t,n){var e,r=n,i=25;do{var o=r*r,a=o*o;r-=e=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-n)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(xf(e)>df&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},Od.invert=Md(Rf),Bd.invert=Md((function(t){return 2*wf(t)})),Yd.invert=function(t,n){return[-n,2*wf(Sf(t))-yf]},Qd.prototype=Gd.prototype={constructor:Qd,count:function(){return this.eachAfter(Xd)},each:function(t,n){let e=-1;for(const r of this)t.call(n,r,++e,this);return this},eachAfter:function(t,n){for(var e,r,i,o=this,a=[o],u=[],c=-1;o=a.pop();)if(u.push(o),e=o.children)for(r=0,i=e.length;r<i;++r)a.push(e[r]);for(;o=u.pop();)t.call(n,o,++c,this);return this},eachBefore:function(t,n){for(var e,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(n,i,++a,this),e=i.children)for(r=e.length-1;r>=0;--r)o.push(e[r]);return this},find:function(t,n){let e=-1;for(const r of this)if(t.call(n,r,++e,this))return r},sum:function(t){return this.eachAfter((function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e}))},sort:function(t){return this.eachBefore((function(n){n.children&&n.children.sort(t)}))},path:function(t){for(var n=this,e=function(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;t=e.pop(),n=r.pop();for(;t===n;)i=t,t=e.pop(),n=r.pop();return i}(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(n){n.children||t.push(n)})),t},links:function(){var t=this,n=[];return t.each((function(e){e!==t&&n.push({source:e.parent,target:e})})),n},copy:function(){return Gd(this).eachBefore(Zd)},[Symbol.iterator]:function*(){var t,n,e,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,n=i.children)for(e=0,r=n.length;e<r;++e)o.push(n[e])}while(o.length)}};const rp=1664525,ip=1013904223,op=4294967296;function ap(){let t=1;return()=>(t=(rp*t+ip)%op)/op}function up(t,n){for(var e,r,i=0,o=(t=function(t,n){let e,r,i=t.length;for(;i;)r=n()*i--|0,e=t[i],t[i]=t[r],t[r]=e;return t}(Array.from(t),n)).length,a=[];i<o;)e=t[i],r&&sp(r,e)?++i:(r=hp(a=cp(a,e)),i=0);return r}function cp(t,n){var e,r;if(lp(n,t))return[n];for(e=0;e<t.length;++e)if(fp(n,t[e])&&lp(dp(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(fp(dp(t[e],t[r]),n)&&fp(dp(t[e],n),t[r])&&fp(dp(t[r],n),t[e])&&lp(pp(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function fp(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function sp(t,n){var e=t.r-n.r+1e-9*Math.max(t.r,n.r,1),r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function lp(t,n){for(var e=0;e<n.length;++e)if(!sp(t,n[e]))return!1;return!0}function hp(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return dp(t[0],t[1]);case 3:return pp(t[0],t[1],t[2])}}function dp(t,n){var e=t.x,r=t.y,i=t.r,o=n.x,a=n.y,u=n.r,c=o-e,f=a-r,s=u-i,l=Math.sqrt(c*c+f*f);return{x:(e+o+c/l*s)/2,y:(r+a+f/l*s)/2,r:(l+i+u)/2}}function pp(t,n,e){var r=t.x,i=t.y,o=t.r,a=n.x,u=n.y,c=n.r,f=e.x,s=e.y,l=e.r,h=r-a,d=r-f,p=i-u,g=i-s,y=c-o,v=l-o,_=r*r+i*i-o*o,b=_-a*a-u*u+c*c,m=_-f*f-s*s+l*l,x=d*p-h*g,w=(p*m-g*b)/(2*x)-r,M=(g*y-p*v)/x,T=(d*b-h*m)/(2*x)-i,A=(h*v-d*y)/x,S=M*M+A*A-1,E=2*(o+w*M+T*A),N=w*w+T*T-o*o,k=-(Math.abs(S)>1e-6?(E+Math.sqrt(E*E-4*S*N))/(2*S):N/E);return{x:r+w+M*k,y:i+T+A*k,r:k}}function gp(t,n,e){var r,i,o,a,u=t.x-n.x,c=t.y-n.y,f=u*u+c*c;f?(i=n.r+e.r,i*=i,a=t.r+e.r,i>(a*=a)?(r=(f+a-i)/(2*f),o=Math.sqrt(Math.max(0,a/f-r*r)),e.x=t.x-r*u-o*c,e.y=t.y-r*c+o*u):(r=(f+i-a)/(2*f),o=Math.sqrt(Math.max(0,i/f-r*r)),e.x=n.x+r*u-o*c,e.y=n.y+r*c+o*u)):(e.x=n.x+e.r,e.y=n.y)}function yp(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function vp(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,o=(n.y*e.r+e.y*n.r)/r;return i*i+o*o}function _p(t){this._=t,this.next=null,this.previous=null}function bp(t,n){if(!(o=(t=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var e,r,i,o,a,u,c,f,s,l,h;if((e=t[0]).x=0,e.y=0,!(o>1))return e.r;if(r=t[1],e.x=-r.r,r.x=e.r,r.y=0,!(o>2))return e.r+r.r;gp(r,e,i=t[2]),e=new _p(e),r=new _p(r),i=new _p(i),e.next=i.previous=r,r.next=e.previous=i,i.next=r.previous=e;t:for(c=3;c<o;++c){gp(e._,r._,i=t[c]),i=new _p(i),f=r.next,s=e.previous,l=r._.r,h=e._.r;do{if(l<=h){if(yp(f._,i._)){r=f,e.next=r,r.previous=e,--c;continue t}l+=f._.r,f=f.next}else{if(yp(s._,i._)){(e=s).next=r,r.previous=e,--c;continue t}h+=s._.r,s=s.previous}}while(f!==s.next);for(i.previous=e,i.next=r,e.next=r.previous=r=i,a=vp(e);(i=i.next)!==r;)(u=vp(i))<a&&(e=i,a=u);r=e.next}for(e=[r._],i=r;(i=i.next)!==r;)e.push(i._);for(i=up(e,n),c=0;c<o;++c)(e=t[c]).x-=i.x,e.y-=i.y;return i.r}function mp(t){return Math.sqrt(t.value)}function xp(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function wp(t,n,e){return function(r){if(i=r.children){var i,o,a,u=i.length,c=t(r)*n||0;if(c)for(o=0;o<u;++o)i[o].r+=c;if(a=bp(i,e),c)for(o=0;o<u;++o)i[o].r-=c;r.r=a+c}}}function Mp(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function Tp(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Ap(t,n,e,r,i){for(var o,a=t.children,u=-1,c=a.length,f=t.value&&(r-n)/t.value;++u<c;)(o=a[u]).y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*f}var Sp={depth:-1},Ep={},Np={};function kp(t){return t.id}function Cp(t){return t.parentId}function Pp(t){let n=t.length;if(n<2)return"";for(;--n>1&&!zp(t,n););return t.slice(0,n)}function zp(t,n){if("/"===t[n]){let e=0;for(;n>0&&"\\"===t[--n];)++e;if(0==(1&e))return!0}return!1}function $p(t,n){return t.parent===n.parent?1:2}function Dp(t){var n=t.children;return n?n[0]:t.t}function Rp(t){var n=t.children;return n?n[n.length-1]:t.t}function Fp(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function qp(t,n,e){return t.a.parent===n.parent?t.a:e}function Up(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function Ip(t,n,e,r,i){for(var o,a=t.children,u=-1,c=a.length,f=t.value&&(i-e)/t.value;++u<c;)(o=a[u]).x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*f}Up.prototype=Object.create(Qd.prototype);var Op=(1+Math.sqrt(5))/2;function Bp(t,n,e,r,i,o){for(var a,u,c,f,s,l,h,d,p,g,y,v=[],_=n.children,b=0,m=0,x=_.length,w=n.value;b<x;){c=i-e,f=o-r;do{s=_[m++].value}while(!s&&m<x);for(l=h=s,y=s*s*(g=Math.max(f/c,c/f)/(w*t)),p=Math.max(h/y,y/l);m<x;++m){if(s+=u=_[m].value,u<l&&(l=u),u>h&&(h=u),y=s*s*g,(d=Math.max(h/y,y/l))>p){s-=u;break}p=d}v.push(a={value:s,dice:c<f,children:_.slice(b,m)}),a.dice?Ap(a,e,r,i,w?r+=f*s/w:o):Ip(a,e,r,w?e+=c*s/w:i,o),w-=s,b=m}return v}var Yp=function t(n){function e(t,e,r,i,o){Bp(n,t,e,r,i,o)}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(Op);var Lp=function t(n){function e(t,e,r,i,o){if((a=t._squarify)&&a.ratio===n)for(var a,u,c,f,s,l=-1,h=a.length,d=t.value;++l<h;){for(c=(u=a[l]).children,f=u.value=0,s=c.length;f<s;++f)u.value+=c[f].value;u.dice?Ap(u,e,r,i,d?r+=(o-r)*u.value/d:o):Ip(u,e,r,d?e+=(i-e)*u.value/d:i,o),d-=u.value}else t._squarify=a=Bp(n,t,e,r,i,o),a.ratio=n}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(Op);function jp(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function Hp(t,n){return t[0]-n[0]||t[1]-n[1]}function Xp(t){const n=t.length,e=[0,1];let r,i=2;for(r=2;r<n;++r){for(;i>1&&jp(t[e[i-2]],t[e[i-1]],t[r])<=0;)--i;e[i++]=r}return e.slice(0,i)}var Gp=Math.random,Vp=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return n()*e+t}}return e.source=t,e}(Gp),Wp=function t(n){function e(t,e){return arguments.length<2&&(e=t,t=0),t=Math.floor(t),e=Math.floor(e)-t,function(){return Math.floor(n()*e+t)}}return e.source=t,e}(Gp),Zp=function t(n){function e(t,e){var r,i;return t=null==t?0:+t,e=null==e?1:+e,function(){var o;if(null!=r)o=r,r=null;else do{r=2*n()-1,o=2*n()-1,i=r*r+o*o}while(!i||i>1);return t+e*o*Math.sqrt(-2*Math.log(i)/i)}}return e.source=t,e}(Gp),Kp=function t(n){var e=Zp.source(n);function r(){var t=e.apply(this,arguments);return function(){return Math.exp(t())}}return r.source=t,r}(Gp),Qp=function t(n){function e(t){return(t=+t)<=0?()=>0:function(){for(var e=0,r=t;r>1;--r)e+=n();return e+r*n()}}return e.source=t,e}(Gp),Jp=function t(n){var e=Qp.source(n);function r(t){if(0==(t=+t))return n;var r=e(t);return function(){return r()/t}}return r.source=t,r}(Gp),tg=function t(n){function e(t){return function(){return-Math.log1p(-n())/t}}return e.source=t,e}(Gp),ng=function t(n){function e(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-n(),t)}}return e.source=t,e}(Gp),eg=function t(n){function e(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return function(){return Math.floor(n()+t)}}return e.source=t,e}(Gp),rg=function t(n){function e(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-n())/t)})}return e.source=t,e}(Gp),ig=function t(n){var e=Zp.source(n)();function r(t,r){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(r=null==r?1:+r,1===t)return()=>-Math.log1p(-n())*r;var i=(t<1?t+1:t)-1/3,o=1/(3*Math.sqrt(i)),a=t<1?()=>Math.pow(n(),1/t):()=>1;return function(){do{do{var t=e(),u=1+o*t}while(u<=0);u*=u*u;var c=1-n()}while(c>=1-.0331*t*t*t*t&&Math.log(c)>=.5*t*t+i*(1-u+Math.log(u)));return i*u*a()*r}}return r.source=t,r}(Gp),og=function t(n){var e=ig.source(n);function r(t,n){var r=e(t),i=e(n);return function(){var t=r();return 0===t?0:t/(t+i())}}return r.source=t,r}(Gp),ag=function t(n){var e=rg.source(n),r=og.source(n);function i(t,n){return t=+t,(n=+n)>=1?()=>t:n<=0?()=>0:function(){for(var i=0,o=t,a=n;o*a>16&&o*(1-a)>16;){var u=Math.floor((o+1)*a),c=r(u,o-u+1)();c<=a?(i+=u,o-=u,a=(a-c)/(1-c)):(o=u-1,a/=c)}for(var f=a<.5,s=e(f?a:1-a),l=s(),h=0;l<=o;++h)l+=s();return i+(f?h:o-h)}}return i.source=t,i}(Gp),ug=function t(n){function e(t,e,r){var i;return 0==(t=+t)?i=t=>-Math.log(t):(t=1/t,i=n=>Math.pow(n,t)),e=null==e?0:+e,r=null==r?1:+r,function(){return e+r*i(-Math.log1p(-n()))}}return e.source=t,e}(Gp),cg=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,function(){return t+e*Math.tan(Math.PI*n())}}return e.source=t,e}(Gp),fg=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,function(){var r=n();return t+e*Math.log(r/(1-r))}}return e.source=t,e}(Gp),sg=function t(n){var e=ig.source(n),r=ag.source(n);function i(t){return function(){for(var i=0,o=t;o>16;){var a=Math.floor(.875*o),u=e(a)();if(u>o)return i+r(a-1,o/u)();i+=a,o-=u}for(var c=-Math.log1p(-n()),f=0;c<=o;++f)c-=Math.log1p(-n());return i+f}}return i.source=t,i}(Gp);const lg=1/4294967296;function hg(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function dg(t,n){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof n?this.interpolator(n):this.range(n)}return this}const pg=Symbol("implicit");function gg(){var t=new InternMap,n=[],e=[],r=pg;function i(i){let o=t.get(i);if(void 0===o){if(r!==pg)return r;t.set(i,o=n.push(i)-1)}return e[o%e.length]}return i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new InternMap;for(const r of e)t.has(r)||t.set(r,n.push(r)-1);return i},i.range=function(t){return arguments.length?(e=Array.from(t),i):e.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return gg(n,e).unknown(r)},hg.apply(i,arguments),i}function yg(){var t,n,e=gg().unknown(void 0),r=e.domain,i=e.range,o=0,a=1,u=!1,c=0,f=0,s=.5;function l(){var e=r().length,l=a<o,h=l?a:o,d=l?o:a;t=(d-h)/Math.max(1,e-c+2*f),u&&(t=Math.floor(t)),h+=(d-h-t*(e-c))*s,n=t*(1-c),u&&(h=Math.round(h),n=Math.round(n));var p=lt(e).map((function(n){return h+t*n}));return i(l?p.reverse():p)}return delete e.unknown,e.domain=function(t){return arguments.length?(r(t),l()):r()},e.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,l()):[o,a]},e.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,u=!0,l()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(u=!!t,l()):u},e.padding=function(t){return arguments.length?(c=Math.min(1,f=+t),l()):c},e.paddingInner=function(t){return arguments.length?(c=Math.min(1,t),l()):c},e.paddingOuter=function(t){return arguments.length?(f=+t,l()):f},e.align=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},e.copy=function(){return yg(r(),[o,a]).round(u).paddingInner(c).paddingOuter(f).align(s)},hg.apply(l(),arguments)}function vg(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return vg(n())},t}function _g(t){return+t}var bg=[0,1];function mg(t){return t}function xg(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:function(t){return function(){return t}}(isNaN(n)?NaN:.5)}function wg(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=xg(i,r),o=e(a,o)):(r=xg(r,i),o=e(o,a)),function(t){return o(r(t))}}function Mg(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=xg(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(n){var e=s(t,n,1,r)-1;return o[e](i[e](n))}}function Tg(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ag(){var t,n,e,r,i,o,a=bg,u=bg,c=Gr,f=mg;function s(){var t=Math.min(a.length,u.length);return f!==mg&&(f=function(t,n){var e;return t>n&&(e=t,t=n,n=e),function(e){return Math.max(t,Math.min(n,e))}}(a[0],a[t-1])),r=t>2?Mg:wg,i=o=null,l}function l(n){return null==n||isNaN(n=+n)?e:(i||(i=r(a.map(t),u,c)))(t(f(n)))}return l.invert=function(e){return f(n((o||(o=r(u,a.map(t),Yr)))(e)))},l.domain=function(t){return arguments.length?(a=Array.from(t,_g),s()):a.slice()},l.range=function(t){return arguments.length?(u=Array.from(t),s()):u.slice()},l.rangeRound=function(t){return u=Array.from(t),c=Vr,s()},l.clamp=function(t){return arguments.length?(f=!!t||mg,s()):f!==mg},l.interpolate=function(t){return arguments.length?(c=t,s()):c},l.unknown=function(t){return arguments.length?(e=t,l):e},function(e,r){return t=e,n=r,s()}}function Sg(){return Ag()(mg,mg)}function Eg(n,e,r,i){var o,a=W(n,e,r);switch((i=Jc(null==i?",f":i)).type){case"s":var u=Math.max(Math.abs(n),Math.abs(e));return null!=i.precision||isNaN(o=lf(a,u))||(i.precision=o),t.formatPrefix(i,u);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=hf(a,Math.max(Math.abs(n),Math.abs(e))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=sf(a))||(i.precision=o-2*("%"===i.type))}return t.format(i)}function Ng(t){var n=t.domain;return t.ticks=function(t){var e=n();return G(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return Eg(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i,o=n(),a=0,u=o.length-1,c=o[a],f=o[u],s=10;for(f<c&&(i=c,c=f,f=i,i=a,a=u,u=i);s-- >0;){if((i=V(c,f,e))===r)return o[a]=c,o[u]=f,n(o);if(i>0)c=Math.floor(c/i)*i,f=Math.ceil(f/i)*i;else{if(!(i<0))break;c=Math.ceil(c*i)/i,f=Math.floor(f*i)/i}r=i}return t},t}function kg(t,n){var e,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}function Cg(t){return Math.log(t)}function Pg(t){return Math.exp(t)}function zg(t){return-Math.log(-t)}function $g(t){return-Math.exp(-t)}function Dg(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Rg(t){return(n,e)=>-t(-n,e)}function Fg(n){const e=n(Cg,Pg),r=e.domain;let i,o,a=10;function u(){return i=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),n=>Math.log(n)/t)}(a),o=function(t){return 10===t?Dg:t===Math.E?Math.exp:n=>Math.pow(t,n)}(a),r()[0]<0?(i=Rg(i),o=Rg(o),n(zg,$g)):n(Cg,Pg),e}return e.base=function(t){return arguments.length?(a=+t,u()):a},e.domain=function(t){return arguments.length?(r(t),u()):r()},e.ticks=t=>{const n=r();let e=n[0],u=n[n.length-1];const c=u<e;c&&([e,u]=[u,e]);let f,s,l=i(e),h=i(u);const d=null==t?10:+t;let p=[];if(!(a%1)&&h-l<d){if(l=Math.floor(l),h=Math.ceil(h),e>0){for(;l<=h;++l)for(f=1;f<a;++f)if(s=l<0?f/o(-l):f*o(l),!(s<e)){if(s>u)break;p.push(s)}}else for(;l<=h;++l)for(f=a-1;f>=1;--f)if(s=l>0?f/o(-l):f*o(l),!(s<e)){if(s>u)break;p.push(s)}2*p.length<d&&(p=G(e,u,d))}else p=G(l,h,Math.min(h-l,d)).map(o);return c?p.reverse():p},e.tickFormat=(n,r)=>{if(null==n&&(n=10),null==r&&(r=10===a?"s":","),"function"!=typeof r&&(a%1||null!=(r=Jc(r)).precision||(r.trim=!0),r=t.format(r)),n===1/0)return r;const u=Math.max(1,a*n/e.ticks().length);return t=>{let n=t/o(Math.round(i(t)));return n*a<a-.5&&(n*=a),n<=u?r(t):""}},e.nice=()=>r(kg(r(),{floor:t=>o(Math.floor(i(t))),ceil:t=>o(Math.ceil(i(t)))})),e}function qg(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}}function Ug(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}function Ig(t){var n=1,e=t(qg(n),Ug(n));return e.constant=function(e){return arguments.length?t(qg(n=+e),Ug(n)):n},Ng(e)}function Og(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function Bg(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Yg(t){return t<0?-t*t:t*t}function Lg(t){var n=t(mg,mg),e=1;return n.exponent=function(n){return arguments.length?1===(e=+n)?t(mg,mg):.5===e?t(Bg,Yg):t(Og(e),Og(1/e)):e},Ng(n)}function jg(){var t=Lg(Ag());return t.copy=function(){return Tg(t,jg()).exponent(t.exponent())},hg.apply(t,arguments),t}function Hg(t){return Math.sign(t)*t*t}const Xg=new Date,Gg=new Date;function Vg(t,n,e,r){function i(n){return t(n=0===arguments.length?new Date:new Date(+n)),n}return i.floor=n=>(t(n=new Date(+n)),n),i.ceil=e=>(t(e=new Date(e-1)),n(e,1),t(e),e),i.round=t=>{const n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=(t,e)=>(n(t=new Date(+t),null==e?1:Math.floor(e)),t),i.range=(e,r,o)=>{const a=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return a;let u;do{a.push(u=new Date(+e)),n(e,o),t(e)}while(u<e&&e<r);return a},i.filter=e=>Vg((n=>{if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),((t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););})),e&&(i.count=(n,r)=>(Xg.setTime(+n),Gg.setTime(+r),t(Xg),t(Gg),Math.floor(e(Xg,Gg))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?n=>r(n)%t==0:n=>i.count(0,n)%t==0):i:null)),i}const Wg=Vg((()=>{}),((t,n)=>{t.setTime(+t+n)}),((t,n)=>n-t));Wg.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?Vg((n=>{n.setTime(Math.floor(n/t)*t)}),((n,e)=>{n.setTime(+n+e*t)}),((n,e)=>(e-n)/t)):Wg:null);const Zg=Wg.range,Kg=1e3,Qg=6e4,Jg=36e5,ty=864e5,ny=6048e5,ey=2592e6,ry=31536e6,iy=Vg((t=>{t.setTime(t-t.getMilliseconds())}),((t,n)=>{t.setTime(+t+n*Kg)}),((t,n)=>(n-t)/Kg),(t=>t.getUTCSeconds())),oy=iy.range,ay=Vg((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Kg)}),((t,n)=>{t.setTime(+t+n*Qg)}),((t,n)=>(n-t)/Qg),(t=>t.getMinutes())),uy=ay.range,cy=Vg((t=>{t.setUTCSeconds(0,0)}),((t,n)=>{t.setTime(+t+n*Qg)}),((t,n)=>(n-t)/Qg),(t=>t.getUTCMinutes())),fy=cy.range,sy=Vg((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Kg-t.getMinutes()*Qg)}),((t,n)=>{t.setTime(+t+n*Jg)}),((t,n)=>(n-t)/Jg),(t=>t.getHours())),ly=sy.range,hy=Vg((t=>{t.setUTCMinutes(0,0,0)}),((t,n)=>{t.setTime(+t+n*Jg)}),((t,n)=>(n-t)/Jg),(t=>t.getUTCHours())),dy=hy.range,py=Vg((t=>t.setHours(0,0,0,0)),((t,n)=>t.setDate(t.getDate()+n)),((t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Qg)/ty),(t=>t.getDate()-1)),gy=py.range,yy=Vg((t=>{t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCDate(t.getUTCDate()+n)}),((t,n)=>(n-t)/ty),(t=>t.getUTCDate()-1)),vy=yy.range,_y=Vg((t=>{t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCDate(t.getUTCDate()+n)}),((t,n)=>(n-t)/ty),(t=>Math.floor(t/ty))),by=_y.range;function my(t){return Vg((n=>{n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),((t,n)=>{t.setDate(t.getDate()+7*n)}),((t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Qg)/ny))}const xy=my(0),wy=my(1),My=my(2),Ty=my(3),Ay=my(4),Sy=my(5),Ey=my(6),Ny=xy.range,ky=wy.range,Cy=My.range,Py=Ty.range,zy=Ay.range,$y=Sy.range,Dy=Ey.range;function Ry(t){return Vg((n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCDate(t.getUTCDate()+7*n)}),((t,n)=>(n-t)/ny))}const Fy=Ry(0),qy=Ry(1),Uy=Ry(2),Iy=Ry(3),Oy=Ry(4),By=Ry(5),Yy=Ry(6),Ly=Fy.range,jy=qy.range,Hy=Uy.range,Xy=Iy.range,Gy=Oy.range,Vy=By.range,Wy=Yy.range,Zy=Vg((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,n)=>{t.setMonth(t.getMonth()+n)}),((t,n)=>n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())),(t=>t.getMonth())),Ky=Zy.range,Qy=Vg((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCMonth(t.getUTCMonth()+n)}),((t,n)=>n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth())),Jy=Qy.range,tv=Vg((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n)}),((t,n)=>n.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));tv.every=t=>isFinite(t=Math.floor(t))&&t>0?Vg((n=>{n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),((n,e)=>{n.setFullYear(n.getFullYear()+e*t)})):null;const nv=tv.range,ev=Vg((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n)}),((t,n)=>n.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));ev.every=t=>isFinite(t=Math.floor(t))&&t>0?Vg((n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),((n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null;const rv=ev.range;function iv(t,n,e,i,o,a){const u=[[iy,1,Kg],[iy,5,5e3],[iy,15,15e3],[iy,30,3e4],[a,1,Qg],[a,5,3e5],[a,15,9e5],[a,30,18e5],[o,1,Jg],[o,3,108e5],[o,6,216e5],[o,12,432e5],[i,1,ty],[i,2,1728e5],[e,1,ny],[n,1,ey],[n,3,7776e6],[t,1,ry]];function c(n,e,i){const o=Math.abs(e-n)/i,a=r((([,,t])=>t)).right(u,o);if(a===u.length)return t.every(W(n/ry,e/ry,i));if(0===a)return Wg.every(Math.max(W(n,e,i),1));const[c,f]=u[o/u[a-1][2]<u[a][2]/o?a-1:a];return c.every(f)}return[function(t,n,e){const r=n<t;r&&([t,n]=[n,t]);const i=e&&"function"==typeof e.range?e:c(t,n,e),o=i?i.range(t,+n+1):[];return r?o.reverse():o},c]}const[ov,av]=iv(ev,Qy,Fy,_y,hy,cy),[uv,cv]=iv(tv,Zy,xy,py,sy,ay);function fv(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function sv(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function lv(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function hv(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,u=t.months,c=t.shortMonths,f=mv(i),s=xv(i),l=mv(o),h=xv(o),d=mv(a),p=xv(a),g=mv(u),y=xv(u),v=mv(c),_=xv(c),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:Yv,e:Yv,f:Gv,g:i_,G:a_,H:Lv,I:jv,j:Hv,L:Xv,m:Vv,M:Wv,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:k_,s:C_,S:Zv,u:Kv,U:Qv,V:t_,w:n_,W:e_,x:null,X:null,y:r_,Y:o_,Z:u_,"%":N_},m={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:c_,e:c_,f:d_,g:T_,G:S_,H:f_,I:s_,j:l_,L:h_,m:p_,M:g_,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:k_,s:C_,S:y_,u:v_,U:__,V:m_,w:x_,W:w_,x:null,X:null,y:M_,Y:A_,Z:E_,"%":N_},x={a:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.w=p.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(t,n,e){var r=l.exec(n.slice(e));return r?(t.w=h.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(t,n,e){var r=v.exec(n.slice(e));return r?(t.m=_.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(t,n,e){var r=g.exec(n.slice(e));return r?(t.m=y.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(t,e,r){return T(t,n,e,r)},d:zv,e:zv,f:Uv,g:Nv,G:Ev,H:Dv,I:Dv,j:$v,L:qv,m:Pv,M:Rv,p:function(t,n,e){var r=f.exec(n.slice(e));return r?(t.p=s.get(r[0].toLowerCase()),e+r[0].length):-1},q:Cv,Q:Ov,s:Bv,S:Fv,u:Mv,U:Tv,V:Av,w:wv,W:Sv,x:function(t,n,r){return T(t,e,n,r)},X:function(t,n,e){return T(t,r,n,e)},y:Nv,Y:Ev,Z:kv,"%":Iv};function w(t,n){return function(e){var r,i,o,a=[],u=-1,c=0,f=t.length;for(e instanceof Date||(e=new Date(+e));++u<f;)37===t.charCodeAt(u)&&(a.push(t.slice(c,u)),null!=(i=pv[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),a.push(r),c=u+1);return a.push(t.slice(c,u)),a.join("")}}function M(t,n){return function(e){var r,i,o=lv(1900,void 0,1);if(T(o,t,e+="",0)!=e.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(n&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=sv(lv(o.y,0,1))).getUTCDay(),r=i>4||0===i?qy.ceil(r):qy(r),r=yy.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=fv(lv(o.y,0,1))).getDay(),r=i>4||0===i?wy.ceil(r):wy(r),r=py.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?sv(lv(o.y,0,1)).getUTCDay():fv(lv(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,sv(o)):fv(o)}}function T(t,n,e,r){for(var i,o,a=0,u=n.length,c=e.length;a<u;){if(r>=c)return-1;if(37===(i=n.charCodeAt(a++))){if(i=n.charAt(a++),!(o=x[i in pv?n.charAt(a++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return b.x=w(e,b),b.X=w(r,b),b.c=w(n,b),m.x=w(e,m),m.X=w(r,m),m.c=w(n,m),{format:function(t){var n=w(t+="",b);return n.toString=function(){return t},n},parse:function(t){var n=M(t+="",!1);return n.toString=function(){return t},n},utcFormat:function(t){var n=w(t+="",m);return n.toString=function(){return t},n},utcParse:function(t){var n=M(t+="",!0);return n.toString=function(){return t},n}}}var dv,pv={"-":"",_:" ",0:"0"},gv=/^\s*\d+/,yv=/^%/,vv=/[\\^$*+?|[\]().{}]/g;function _v(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function bv(t){return t.replace(vv,"\\$&")}function mv(t){return new RegExp("^(?:"+t.map(bv).join("|")+")","i")}function xv(t){return new Map(t.map(((t,n)=>[t.toLowerCase(),n])))}function wv(t,n,e){var r=gv.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Mv(t,n,e){var r=gv.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function Tv(t,n,e){var r=gv.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function Av(t,n,e){var r=gv.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function Sv(t,n,e){var r=gv.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function Ev(t,n,e){var r=gv.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Nv(t,n,e){var r=gv.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function kv(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function Cv(t,n,e){var r=gv.exec(n.slice(e,e+1));return r?(t.q=3*r[0]-3,e+r[0].length):-1}function Pv(t,n,e){var r=gv.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function zv(t,n,e){var r=gv.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function $v(t,n,e){var r=gv.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function Dv(t,n,e){var r=gv.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function Rv(t,n,e){var r=gv.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function Fv(t,n,e){var r=gv.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function qv(t,n,e){var r=gv.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function Uv(t,n,e){var r=gv.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function Iv(t,n,e){var r=yv.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function Ov(t,n,e){var r=gv.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function Bv(t,n,e){var r=gv.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function Yv(t,n){return _v(t.getDate(),n,2)}function Lv(t,n){return _v(t.getHours(),n,2)}function jv(t,n){return _v(t.getHours()%12||12,n,2)}function Hv(t,n){return _v(1+py.count(tv(t),t),n,3)}function Xv(t,n){return _v(t.getMilliseconds(),n,3)}function Gv(t,n){return Xv(t,n)+"000"}function Vv(t,n){return _v(t.getMonth()+1,n,2)}function Wv(t,n){return _v(t.getMinutes(),n,2)}function Zv(t,n){return _v(t.getSeconds(),n,2)}function Kv(t){var n=t.getDay();return 0===n?7:n}function Qv(t,n){return _v(xy.count(tv(t)-1,t),n,2)}function Jv(t){var n=t.getDay();return n>=4||0===n?Ay(t):Ay.ceil(t)}function t_(t,n){return t=Jv(t),_v(Ay.count(tv(t),t)+(4===tv(t).getDay()),n,2)}function n_(t){return t.getDay()}function e_(t,n){return _v(wy.count(tv(t)-1,t),n,2)}function r_(t,n){return _v(t.getFullYear()%100,n,2)}function i_(t,n){return _v((t=Jv(t)).getFullYear()%100,n,2)}function o_(t,n){return _v(t.getFullYear()%1e4,n,4)}function a_(t,n){var e=t.getDay();return _v((t=e>=4||0===e?Ay(t):Ay.ceil(t)).getFullYear()%1e4,n,4)}function u_(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+_v(n/60|0,"0",2)+_v(n%60,"0",2)}function c_(t,n){return _v(t.getUTCDate(),n,2)}function f_(t,n){return _v(t.getUTCHours(),n,2)}function s_(t,n){return _v(t.getUTCHours()%12||12,n,2)}function l_(t,n){return _v(1+yy.count(ev(t),t),n,3)}function h_(t,n){return _v(t.getUTCMilliseconds(),n,3)}function d_(t,n){return h_(t,n)+"000"}function p_(t,n){return _v(t.getUTCMonth()+1,n,2)}function g_(t,n){return _v(t.getUTCMinutes(),n,2)}function y_(t,n){return _v(t.getUTCSeconds(),n,2)}function v_(t){var n=t.getUTCDay();return 0===n?7:n}function __(t,n){return _v(Fy.count(ev(t)-1,t),n,2)}function b_(t){var n=t.getUTCDay();return n>=4||0===n?Oy(t):Oy.ceil(t)}function m_(t,n){return t=b_(t),_v(Oy.count(ev(t),t)+(4===ev(t).getUTCDay()),n,2)}function x_(t){return t.getUTCDay()}function w_(t,n){return _v(qy.count(ev(t)-1,t),n,2)}function M_(t,n){return _v(t.getUTCFullYear()%100,n,2)}function T_(t,n){return _v((t=b_(t)).getUTCFullYear()%100,n,2)}function A_(t,n){return _v(t.getUTCFullYear()%1e4,n,4)}function S_(t,n){var e=t.getUTCDay();return _v((t=e>=4||0===e?Oy(t):Oy.ceil(t)).getUTCFullYear()%1e4,n,4)}function E_(){return"+0000"}function N_(){return"%"}function k_(t){return+t}function C_(t){return Math.floor(+t/1e3)}function P_(n){return dv=hv(n),t.timeFormat=dv.format,t.timeParse=dv.parse,t.utcFormat=dv.utcFormat,t.utcParse=dv.utcParse,dv}t.timeFormat=void 0,t.timeParse=void 0,t.utcFormat=void 0,t.utcParse=void 0,P_({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var z_="%Y-%m-%dT%H:%M:%S.%LZ";var $_=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat(z_),D_=$_;var R_=+new Date("2000-01-01T00:00:00.000Z")?function(t){var n=new Date(t);return isNaN(n)?null:n}:t.utcParse(z_),F_=R_;function q_(t){return new Date(t)}function U_(t){return t instanceof Date?+t:+new Date(+t)}function I_(t,n,e,r,i,o,a,u,c,f){var s=Sg(),l=s.invert,h=s.domain,d=f(".%L"),p=f(":%S"),g=f("%I:%M"),y=f("%I %p"),v=f("%a %d"),_=f("%b %d"),b=f("%B"),m=f("%Y");function x(t){return(c(t)<t?d:u(t)<t?p:a(t)<t?g:o(t)<t?y:r(t)<t?i(t)<t?v:_:e(t)<t?b:m)(t)}return s.invert=function(t){return new Date(l(t))},s.domain=function(t){return arguments.length?h(Array.from(t,U_)):h().map(q_)},s.ticks=function(n){var e=h();return t(e[0],e[e.length-1],null==n?10:n)},s.tickFormat=function(t,n){return null==n?x:f(n)},s.nice=function(t){var e=h();return t&&"function"==typeof t.range||(t=n(e[0],e[e.length-1],null==t?10:t)),t?h(kg(e,t)):s},s.copy=function(){return Tg(s,I_(t,n,e,r,i,o,a,u,c,f))},s}function O_(){var t,n,e,r,i,o=0,a=1,u=mg,c=!1;function f(n){return null==n||isNaN(n=+n)?i:u(0===e?.5:(n=(r(n)-t)*e,c?Math.max(0,Math.min(1,n)):n))}function s(t){return function(n){var e,r;return arguments.length?([e,r]=n,u=t(e,r),f):[u(0),u(1)]}}return f.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),n=r(a=+a),e=t===n?0:1/(n-t),f):[o,a]},f.clamp=function(t){return arguments.length?(c=!!t,f):c},f.interpolator=function(t){return arguments.length?(u=t,f):u},f.range=s(Gr),f.rangeRound=s(Vr),f.unknown=function(t){return arguments.length?(i=t,f):i},function(i){return r=i,t=i(o),n=i(a),e=t===n?0:1/(n-t),f}}function B_(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Y_(){var t=Lg(O_());return t.copy=function(){return B_(t,Y_()).exponent(t.exponent())},dg.apply(t,arguments)}function L_(){var t,n,e,r,i,o,a,u=0,c=.5,f=1,s=1,l=mg,h=!1;function d(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-n)*(s*t<s*n?r:i),l(h?Math.max(0,Math.min(1,t)):t))}function p(t){return function(n){var e,r,i;return arguments.length?([e,r,i]=n,l=di(t,[e,r,i]),d):[l(0),l(.5),l(1)]}}return d.domain=function(a){return arguments.length?([u,c,f]=a,t=o(u=+u),n=o(c=+c),e=o(f=+f),r=t===n?0:.5/(n-t),i=n===e?0:.5/(e-n),s=n<t?-1:1,d):[u,c,f]},d.clamp=function(t){return arguments.length?(h=!!t,d):h},d.interpolator=function(t){return arguments.length?(l=t,d):l},d.range=p(Gr),d.rangeRound=p(Vr),d.unknown=function(t){return arguments.length?(a=t,d):a},function(a){return o=a,t=a(u),n=a(c),e=a(f),r=t===n?0:.5/(n-t),i=n===e?0:.5/(e-n),s=n<t?-1:1,d}}function j_(){var t=Lg(L_());return t.copy=function(){return B_(t,j_()).exponent(t.exponent())},dg.apply(t,arguments)}function H_(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}var X_=H_("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),G_=H_("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),V_=H_("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),W_=H_("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Z_=H_("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),K_=H_("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Q_=H_("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),J_=H_("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),tb=H_("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),nb=H_("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),eb=t=>Fr(t[t.length-1]),rb=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(H_),ib=eb(rb),ob=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(H_),ab=eb(ob),ub=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(H_),cb=eb(ub),fb=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(H_),sb=eb(fb),lb=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(H_),hb=eb(lb),db=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(H_),pb=eb(db),gb=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(H_),yb=eb(gb),vb=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(H_),_b=eb(vb),bb=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(H_),mb=eb(bb),xb=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(H_),wb=eb(xb),Mb=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(H_),Tb=eb(Mb),Ab=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(H_),Sb=eb(Ab),Eb=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(H_),Nb=eb(Eb),kb=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(H_),Cb=eb(kb),Pb=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(H_),zb=eb(Pb),$b=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(H_),Db=eb($b),Rb=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(H_),Fb=eb(Rb),qb=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(H_),Ub=eb(qb),Ib=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(H_),Ob=eb(Ib),Bb=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(H_),Yb=eb(Bb),Lb=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(H_),jb=eb(Lb),Hb=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(H_),Xb=eb(Hb),Gb=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(H_),Vb=eb(Gb),Wb=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(H_),Zb=eb(Wb),Kb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(H_),Qb=eb(Kb),Jb=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(H_),tm=eb(Jb),nm=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(H_),em=eb(nm);var rm=hi(Tr(300,.5,0),Tr(-240,.5,1)),im=hi(Tr(-100,.75,.35),Tr(80,1.5,.8)),om=hi(Tr(260,.75,.35),Tr(80,1.5,.8)),am=Tr();var um=Fe(),cm=Math.PI/3,fm=2*Math.PI/3;function sm(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}var lm=sm(H_("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),hm=sm(H_("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),dm=sm(H_("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),pm=sm(H_("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function gm(t){return function(){return t}}const ym=Math.abs,vm=Math.atan2,_m=Math.cos,bm=Math.max,mm=Math.min,xm=Math.sin,wm=Math.sqrt,Mm=1e-12,Tm=Math.PI,Am=Tm/2,Sm=2*Tm;function Em(t){return t>=1?Am:t<=-1?-Am:Math.asin(t)}function Nm(t){let n=3;return t.digits=function(e){if(!arguments.length)return n;if(null==e)n=null;else{const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);n=t}return t},()=>new Ua(n)}function km(t){return t.innerRadius}function Cm(t){return t.outerRadius}function Pm(t){return t.startAngle}function zm(t){return t.endAngle}function $m(t){return t&&t.padAngle}function Dm(t,n,e,r,i,o,a){var u=t-e,c=n-r,f=(a?o:-o)/wm(u*u+c*c),s=f*c,l=-f*u,h=t+s,d=n+l,p=e+s,g=r+l,y=(h+p)/2,v=(d+g)/2,_=p-h,b=g-d,m=_*_+b*b,x=i-o,w=h*g-p*d,M=(b<0?-1:1)*wm(bm(0,x*x*m-w*w)),T=(w*b-_*M)/m,A=(-w*_-b*M)/m,S=(w*b+_*M)/m,E=(-w*_+b*M)/m,N=T-y,k=A-v,C=S-y,P=E-v;return N*N+k*k>C*C+P*P&&(T=S,A=E),{cx:T,cy:A,x01:-s,y01:-l,x11:T*(i/x-1),y11:A*(i/x-1)}}var Rm=Array.prototype.slice;function Fm(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function qm(t){this._context=t}function Um(t){return new qm(t)}function Im(t){return t[0]}function Om(t){return t[1]}function Bm(t,n){var e=gm(!0),r=null,i=Um,o=null,a=Nm(u);function u(u){var c,f,s,l=(u=Fm(u)).length,h=!1;for(null==r&&(o=i(s=a())),c=0;c<=l;++c)!(c<l&&e(f=u[c],c,u))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(f,c,u),+n(f,c,u));if(s)return o=null,s+""||null}return t="function"==typeof t?t:void 0===t?Im:gm(t),n="function"==typeof n?n:void 0===n?Om:gm(n),u.x=function(n){return arguments.length?(t="function"==typeof n?n:gm(+n),u):t},u.y=function(t){return arguments.length?(n="function"==typeof t?t:gm(+t),u):n},u.defined=function(t){return arguments.length?(e="function"==typeof t?t:gm(!!t),u):e},u.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),u):i},u.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),u):r},u}function Ym(t,n,e){var r=null,i=gm(!0),o=null,a=Um,u=null,c=Nm(f);function f(f){var s,l,h,d,p,g=(f=Fm(f)).length,y=!1,v=new Array(g),_=new Array(g);for(null==o&&(u=a(p=c())),s=0;s<=g;++s){if(!(s<g&&i(d=f[s],s,f))===y)if(y=!y)l=s,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),h=s-1;h>=l;--h)u.point(v[h],_[h]);u.lineEnd(),u.areaEnd()}y&&(v[s]=+t(d,s,f),_[s]=+n(d,s,f),u.point(r?+r(d,s,f):v[s],e?+e(d,s,f):_[s]))}if(p)return u=null,p+""||null}function s(){return Bm().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?Im:gm(+t),n="function"==typeof n?n:gm(void 0===n?0:+n),e="function"==typeof e?e:void 0===e?Om:gm(+e),f.x=function(n){return arguments.length?(t="function"==typeof n?n:gm(+n),r=null,f):t},f.x0=function(n){return arguments.length?(t="function"==typeof n?n:gm(+n),f):t},f.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:gm(+t),f):r},f.y=function(t){return arguments.length?(n="function"==typeof t?t:gm(+t),e=null,f):n},f.y0=function(t){return arguments.length?(n="function"==typeof t?t:gm(+t),f):n},f.y1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:gm(+t),f):e},f.lineX0=f.lineY0=function(){return s().x(t).y(n)},f.lineY1=function(){return s().x(t).y(e)},f.lineX1=function(){return s().x(r).y(n)},f.defined=function(t){return arguments.length?(i="function"==typeof t?t:gm(!!t),f):i},f.curve=function(t){return arguments.length?(a=t,null!=o&&(u=a(o)),f):a},f.context=function(t){return arguments.length?(null==t?o=u=null:u=a(o=t),f):o},f}function Lm(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function jm(t){return t}qm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var Hm=Gm(Um);function Xm(t){this._curve=t}function Gm(t){function n(n){return new Xm(t(n))}return n._curve=t,n}function Vm(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?n(Gm(t)):n()._curve},t}function Wm(){return Vm(Bm().curve(Hm))}function Zm(){var t=Ym().curve(Hm),n=t.curve,e=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Vm(e())},delete t.lineX0,t.lineEndAngle=function(){return Vm(r())},delete t.lineX1,t.lineInnerRadius=function(){return Vm(i())},delete t.lineY0,t.lineOuterRadius=function(){return Vm(o())},delete t.lineY1,t.curve=function(t){return arguments.length?n(Gm(t)):n()._curve},t}function Km(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}Xm.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};class Qm{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n)}this._x0=t,this._y0=n}}class Jm{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,n){if(t=+t,n=+n,0===this._point)this._point=1;else{const e=Km(this._x0,this._y0),r=Km(this._x0,this._y0=(this._y0+n)/2),i=Km(t,this._y0),o=Km(t,n);this._context.moveTo(...e),this._context.bezierCurveTo(...r,...i,...o)}this._x0=t,this._y0=n}}function tx(t){return new Qm(t,!0)}function nx(t){return new Qm(t,!1)}function ex(t){return new Jm(t)}function rx(t){return t.source}function ix(t){return t.target}function ox(t){let n=rx,e=ix,r=Im,i=Om,o=null,a=null,u=Nm(c);function c(){let c;const f=Rm.call(arguments),s=n.apply(this,f),l=e.apply(this,f);if(null==o&&(a=t(c=u())),a.lineStart(),f[0]=s,a.point(+r.apply(this,f),+i.apply(this,f)),f[0]=l,a.point(+r.apply(this,f),+i.apply(this,f)),a.lineEnd(),c)return a=null,c+""||null}return c.source=function(t){return arguments.length?(n=t,c):n},c.target=function(t){return arguments.length?(e=t,c):e},c.x=function(t){return arguments.length?(r="function"==typeof t?t:gm(+t),c):r},c.y=function(t){return arguments.length?(i="function"==typeof t?t:gm(+t),c):i},c.context=function(n){return arguments.length?(null==n?o=a=null:a=t(o=n),c):o},c}const ax=wm(3);var ux={draw(t,n){const e=.59436*wm(n+mm(n/28,.75)),r=e/2,i=r*ax;t.moveTo(0,e),t.lineTo(0,-e),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},cx={draw(t,n){const e=wm(n/Tm);t.moveTo(e,0),t.arc(0,0,e,0,Sm)}},fx={draw(t,n){const e=wm(n/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}};const sx=wm(1/3),lx=2*sx;var hx={draw(t,n){const e=wm(n/lx),r=e*sx;t.moveTo(0,-e),t.lineTo(r,0),t.lineTo(0,e),t.lineTo(-r,0),t.closePath()}},dx={draw(t,n){const e=.62625*wm(n);t.moveTo(0,-e),t.lineTo(e,0),t.lineTo(0,e),t.lineTo(-e,0),t.closePath()}},px={draw(t,n){const e=.87559*wm(n-mm(n/7,2));t.moveTo(-e,0),t.lineTo(e,0),t.moveTo(0,e),t.lineTo(0,-e)}},gx={draw(t,n){const e=wm(n),r=-e/2;t.rect(r,r,e,e)}},yx={draw(t,n){const e=.4431*wm(n);t.moveTo(e,e),t.lineTo(e,-e),t.lineTo(-e,-e),t.lineTo(-e,e),t.closePath()}};const vx=xm(Tm/10)/xm(7*Tm/10),_x=xm(Sm/10)*vx,bx=-_m(Sm/10)*vx;var mx={draw(t,n){const e=wm(.8908130915292852*n),r=_x*e,i=bx*e;t.moveTo(0,-e),t.lineTo(r,i);for(let n=1;n<5;++n){const o=Sm*n/5,a=_m(o),u=xm(o);t.lineTo(u*e,-a*e),t.lineTo(a*r-u*i,u*r+a*i)}t.closePath()}};const xx=wm(3);var wx={draw(t,n){const e=-wm(n/(3*xx));t.moveTo(0,2*e),t.lineTo(-xx*e,-e),t.lineTo(xx*e,-e),t.closePath()}};const Mx=wm(3);var Tx={draw(t,n){const e=.6824*wm(n),r=e/2,i=e*Mx/2;t.moveTo(0,-e),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}};const Ax=-.5,Sx=wm(3)/2,Ex=1/wm(12),Nx=3*(Ex/2+1);var kx={draw(t,n){const e=wm(n/Nx),r=e/2,i=e*Ex,o=r,a=e*Ex+e,u=-o,c=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(u,c),t.lineTo(Ax*r-Sx*i,Sx*r+Ax*i),t.lineTo(Ax*o-Sx*a,Sx*o+Ax*a),t.lineTo(Ax*u-Sx*c,Sx*u+Ax*c),t.lineTo(Ax*r+Sx*i,Ax*i-Sx*r),t.lineTo(Ax*o+Sx*a,Ax*a-Sx*o),t.lineTo(Ax*u+Sx*c,Ax*c-Sx*u),t.closePath()}},Cx={draw(t,n){const e=.6189*wm(n-mm(n/6,1.7));t.moveTo(-e,-e),t.lineTo(e,e),t.moveTo(-e,e),t.lineTo(e,-e)}};const Px=[cx,fx,hx,gx,mx,wx,kx],zx=[cx,px,Cx,Tx,ux,yx,dx];function $x(){}function Dx(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function Rx(t){this._context=t}function Fx(t){this._context=t}function qx(t){this._context=t}function Ux(t,n){this._basis=new Rx(t),this._beta=n}Rx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dx(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Fx.prototype={areaStart:$x,areaEnd:$x,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Dx(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},qx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:Dx(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Ux.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],o=n[0],a=t[e]-i,u=n[e]-o,c=-1;++c<=e;)r=c/e,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*a),this._beta*n[c]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var Ix=function t(n){function e(t){return 1===n?new Rx(t):new Ux(t,n)}return e.beta=function(n){return t(+n)},e}(.85);function Ox(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function Bx(t,n){this._context=t,this._k=(1-n)/6}Bx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ox(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Ox(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Yx=function t(n){function e(t){return new Bx(t,n)}return e.tension=function(n){return t(+n)},e}(0);function Lx(t,n){this._context=t,this._k=(1-n)/6}Lx.prototype={areaStart:$x,areaEnd:$x,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Ox(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var jx=function t(n){function e(t){return new Lx(t,n)}return e.tension=function(n){return t(+n)},e}(0);function Hx(t,n){this._context=t,this._k=(1-n)/6}Hx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ox(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Xx=function t(n){function e(t){return new Hx(t,n)}return e.tension=function(n){return t(+n)},e}(0);function Gx(t,n,e){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Mm){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>Mm){var f=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,s=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*f+t._x1*t._l23_2a-n*t._l12_2a)/s,a=(a*f+t._y1*t._l23_2a-e*t._l12_2a)/s}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Vx(t,n){this._context=t,this._alpha=n}Vx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Gx(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Wx=function t(n){function e(t){return n?new Vx(t,n):new Bx(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function Zx(t,n){this._context=t,this._alpha=n}Zx.prototype={areaStart:$x,areaEnd:$x,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Gx(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Kx=function t(n){function e(t){return n?new Zx(t,n):new Lx(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function Qx(t,n){this._context=t,this._alpha=n}Qx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Gx(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Jx=function t(n){function e(t){return n?new Qx(t,n):new Hx(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function tw(t){this._context=t}function nw(t){return t<0?-1:1}function ew(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(e-t._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(nw(o)+nw(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function rw(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function iw(t,n,e){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*n,o-u,a-u*e,o,a)}function ow(t){this._context=t}function aw(t){this._context=new uw(t)}function uw(t){this._context=t}function cw(t){this._context=t}function fw(t){var n,e,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,o[n]=4,a[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/o[n-1],o[n]-=e,a[n]-=e*a[n-1];for(i[r-1]=a[r-1]/o[r-1],n=r-2;n>=0;--n)i[n]=(a[n]-i[n+1])/o[n];for(o[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)o[n]=2*t[n+1]-i[n+1];return[i,o]}function sw(t,n){this._context=t,this._t=n}function lw(t,n){if((i=t.length)>1)for(var e,r,i,o=1,a=t[n[0]],u=a.length;o<i;++o)for(r=a,a=t[n[o]],e=0;e<u;++e)a[e][1]+=a[e][0]=isNaN(r[e][1])?r[e][0]:r[e][1]}function hw(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e}function dw(t,n){return t[n]}function pw(t){const n=[];return n.key=t,n}function gw(t){var n=t.map(yw);return hw(t).sort((function(t,e){return n[t]-n[e]}))}function yw(t){for(var n,e=-1,r=0,i=t.length,o=-1/0;++e<i;)(n=+t[e][1])>o&&(o=n,r=e);return r}function vw(t){var n=t.map(_w);return hw(t).sort((function(t,e){return n[t]-n[e]}))}function _w(t){for(var n,e=0,r=-1,i=t.length;++r<i;)(n=+t[r][1])&&(e+=n);return e}tw.prototype={areaStart:$x,areaEnd:$x,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}},ow.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:iw(this,this._t0,rw(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,iw(this,rw(this,e=ew(this,t,n)),e);break;default:iw(this,this._t0,e=ew(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(aw.prototype=Object.create(ow.prototype)).point=function(t,n){ow.prototype.point.call(this,n,t)},uw.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}},cw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var r=fw(t),i=fw(n),o=0,a=1;a<e;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],n[a]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}},sw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}};var bw=t=>()=>t;function mw(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function xw(t,n,e){this.k=t,this.x=n,this.y=e}xw.prototype={constructor:xw,scale:function(t){return 1===t?this:new xw(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new xw(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ww=new xw(1,0,0);function Mw(t){for(;!t.__zoom;)if(!(t=t.parentNode))return ww;return t.__zoom}function Tw(t){t.stopImmediatePropagation()}function Aw(t){t.preventDefault(),t.stopImmediatePropagation()}function Sw(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function Ew(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Nw(){return this.__zoom||ww}function kw(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Cw(){return navigator.maxTouchPoints||"ontouchstart"in this}function Pw(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}Mw.prototype=xw.prototype,t.Adder=T,t.Delaunay=Lu,t.FormatSpecifier=tf,t.InternMap=InternMap,t.InternSet=InternSet,t.Node=Qd,t.Path=Ua,t.Voronoi=qu,t.ZoomTransform=xw,t.active=function(t,n){var e,r,i=t.__transition;if(i)for(r in n=null==n?null:n+"",i)if((e=i[r]).state>qi&&e.name===n)return new po([[t]],Zo,n,+r);return null},t.arc=function(){var t=km,n=Cm,e=gm(0),r=null,i=Pm,o=zm,a=$m,u=null,c=Nm(f);function f(){var f,s,l=+t.apply(this,arguments),h=+n.apply(this,arguments),d=i.apply(this,arguments)-Am,p=o.apply(this,arguments)-Am,g=ym(p-d),y=p>d;if(u||(u=f=c()),h<l&&(s=h,h=l,l=s),h>Mm)if(g>Sm-Mm)u.moveTo(h*_m(d),h*xm(d)),u.arc(0,0,h,d,p,!y),l>Mm&&(u.moveTo(l*_m(p),l*xm(p)),u.arc(0,0,l,p,d,y));else{var v,_,b=d,m=p,x=d,w=p,M=g,T=g,A=a.apply(this,arguments)/2,S=A>Mm&&(r?+r.apply(this,arguments):wm(l*l+h*h)),E=mm(ym(h-l)/2,+e.apply(this,arguments)),N=E,k=E;if(S>Mm){var C=Em(S/l*xm(A)),P=Em(S/h*xm(A));(M-=2*C)>Mm?(x+=C*=y?1:-1,w-=C):(M=0,x=w=(d+p)/2),(T-=2*P)>Mm?(b+=P*=y?1:-1,m-=P):(T=0,b=m=(d+p)/2)}var z=h*_m(b),$=h*xm(b),D=l*_m(w),R=l*xm(w);if(E>Mm){var F,q=h*_m(m),U=h*xm(m),I=l*_m(x),O=l*xm(x);if(g<Tm)if(F=function(t,n,e,r,i,o,a,u){var c=e-t,f=r-n,s=a-i,l=u-o,h=l*c-s*f;if(!(h*h<Mm))return[t+(h=(s*(n-o)-l*(t-i))/h)*c,n+h*f]}(z,$,I,O,q,U,D,R)){var B=z-F[0],Y=$-F[1],L=q-F[0],j=U-F[1],H=1/xm(function(t){return t>1?0:t<-1?Tm:Math.acos(t)}((B*L+Y*j)/(wm(B*B+Y*Y)*wm(L*L+j*j)))/2),X=wm(F[0]*F[0]+F[1]*F[1]);N=mm(E,(l-X)/(H-1)),k=mm(E,(h-X)/(H+1))}else N=k=0}T>Mm?k>Mm?(v=Dm(I,O,z,$,h,k,y),_=Dm(q,U,D,R,h,k,y),u.moveTo(v.cx+v.x01,v.cy+v.y01),k<E?u.arc(v.cx,v.cy,k,vm(v.y01,v.x01),vm(_.y01,_.x01),!y):(u.arc(v.cx,v.cy,k,vm(v.y01,v.x01),vm(v.y11,v.x11),!y),u.arc(0,0,h,vm(v.cy+v.y11,v.cx+v.x11),vm(_.cy+_.y11,_.cx+_.x11),!y),u.arc(_.cx,_.cy,k,vm(_.y11,_.x11),vm(_.y01,_.x01),!y))):(u.moveTo(z,$),u.arc(0,0,h,b,m,!y)):u.moveTo(z,$),l>Mm&&M>Mm?N>Mm?(v=Dm(D,R,q,U,l,-N,y),_=Dm(z,$,I,O,l,-N,y),u.lineTo(v.cx+v.x01,v.cy+v.y01),N<E?u.arc(v.cx,v.cy,N,vm(v.y01,v.x01),vm(_.y01,_.x01),!y):(u.arc(v.cx,v.cy,N,vm(v.y01,v.x01),vm(v.y11,v.x11),!y),u.arc(0,0,l,vm(v.cy+v.y11,v.cx+v.x11),vm(_.cy+_.y11,_.cx+_.x11),y),u.arc(_.cx,_.cy,N,vm(_.y11,_.x11),vm(_.y01,_.x01),!y))):u.arc(0,0,l,w,x,y):u.lineTo(D,R)}else u.moveTo(0,0);if(u.closePath(),f)return u=null,f+""||null}return f.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Tm/2;return[_m(r)*e,xm(r)*e]},f.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:gm(+n),f):t},f.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:gm(+t),f):n},f.cornerRadius=function(t){return arguments.length?(e="function"==typeof t?t:gm(+t),f):e},f.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:gm(+t),f):r},f.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:gm(+t),f):i},f.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:gm(+t),f):o},f.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:gm(+t),f):a},f.context=function(t){return arguments.length?(u=null==t?null:t,f):u},f},t.area=Ym,t.areaRadial=Zm,t.ascending=n,t.autoType=function(t){for(var n in t){var e,r,i=t[n].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(e=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;yc&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=e;else i=null;t[n]=i}return t},t.axisBottom=function(t){return Pt(Mt,t)},t.axisLeft=function(t){return Pt(Tt,t)},t.axisRight=function(t){return Pt(wt,t)},t.axisTop=function(t){return Pt(xt,t)},t.bin=Q,t.bisect=s,t.bisectCenter=f,t.bisectLeft=c,t.bisectRight=u,t.bisector=r,t.blob=function(t,n){return fetch(t,n).then(vc)},t.blur=function(t,n){if(!((n=+n)>=0))throw new RangeError("invalid r");let e=t.length;if(!((e=Math.floor(e))>=0))throw new RangeError("invalid length");if(!e||!n)return t;const r=y(n),i=t.slice();return r(t,i,0,e,1),r(i,t,0,e,1),r(t,i,0,e,1),t},t.blur2=l,t.blurImage=h,t.brush=function(){return wa(la)},t.brushSelection=function(t){var n=t.__brush;return n?n.dim.output(n.selection):null},t.brushX=function(){return wa(fa)},t.brushY=function(){return wa(sa)},t.buffer=function(t,n){return fetch(t,n).then(_c)},t.chord=function(){return za(!1,!1)},t.chordDirected=function(){return za(!0,!1)},t.chordTranspose=function(){return za(!1,!0)},t.cluster=function(){var t=Ld,n=1,e=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(n){var e=n.children;e?(n.x=function(t){return t.reduce(jd,0)/t.length}(e),n.y=function(t){return 1+t.reduce(Hd,0)}(e)):(n.x=o?a+=t(n,o):0,n.y=0,o=n)}));var u=function(t){for(var n;n=t.children;)t=n[0];return t}(i),c=function(t){for(var n;n=t.children;)t=n[n.length-1];return t}(i),f=u.x-t(u,c)/2,s=c.x+t(c,u)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*n,t.y=(i.y-t.y)*e}:function(t){t.x=(t.x-f)/(s-f)*n,t.y=(1-(i.y?t.y/i.y:1))*e})}return i.separation=function(n){return arguments.length?(t=n,i):t},i.size=function(t){return arguments.length?(r=!1,n=+t[0],e=+t[1],i):r?null:[n,e]},i.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],e=+t[1],i):r?[n,e]:null},i},t.color=ze,t.contourDensity=function(){var t=fu,n=su,e=lu,r=960,i=500,o=20,a=2,u=3*o,c=r+2*u>>a,f=i+2*u>>a,s=Qa(20);function h(r){var i=new Float32Array(c*f),s=Math.pow(2,-a),h=-1;for(const o of r){var d=(t(o,++h,r)+u)*s,p=(n(o,h,r)+u)*s,g=+e(o,h,r);if(g&&d>=0&&d<c&&p>=0&&p<f){var y=Math.floor(d),v=Math.floor(p),_=d-y-.5,b=p-v-.5;i[y+v*c]+=(1-_)*(1-b)*g,i[y+1+v*c]+=_*(1-b)*g,i[y+1+(v+1)*c]+=_*b*g,i[y+(v+1)*c]+=(1-_)*b*g}}return l({data:i,width:c,height:f},o*s),i}function d(t){var n=h(t),e=s(n),r=Math.pow(2,2*a);return Array.isArray(e)||(e=G(Number.MIN_VALUE,J(n)/r,e)),iu().size([c,f]).thresholds(e.map((t=>t*r)))(n).map(((t,n)=>(t.value=+e[n],p(t))))}function p(t){return t.coordinates.forEach(g),t}function g(t){t.forEach(y)}function y(t){t.forEach(v)}function v(t){t[0]=t[0]*Math.pow(2,a)-u,t[1]=t[1]*Math.pow(2,a)-u}function _(){return c=r+2*(u=3*o)>>a,f=i+2*u>>a,d}return d.contours=function(t){var n=h(t),e=iu().size([c,f]),r=Math.pow(2,2*a),i=t=>{t=+t;var i=p(e.contour(n,t*r));return i.value=t,i};return Object.defineProperty(i,"max",{get:()=>J(n)/r}),i},d.x=function(n){return arguments.length?(t="function"==typeof n?n:Qa(+n),d):t},d.y=function(t){return arguments.length?(n="function"==typeof t?t:Qa(+t),d):n},d.weight=function(t){return arguments.length?(e="function"==typeof t?t:Qa(+t),d):e},d.size=function(t){if(!arguments.length)return[r,i];var n=+t[0],e=+t[1];if(!(n>=0&&e>=0))throw new Error("invalid size");return r=n,i=e,_()},d.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),_()},d.thresholds=function(t){return arguments.length?(s="function"==typeof t?t:Array.isArray(t)?Qa(Za.call(t)):Qa(t),d):s},d.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*t*t+1)-1)/2,_()},d},t.contours=iu,t.count=v,t.create=function(t){return Zn(Yt(t).call(document.documentElement))},t.creator=Yt,t.cross=function(...t){const n="function"==typeof t[t.length-1]&&function(t){return n=>t(...n)}(t.pop()),e=(t=t.map(m)).map(_),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||e.some(b))return o;for(;;){o.push(i.map(((n,e)=>t[e][n])));let a=r;for(;++i[a]===e[a];){if(0===a)return n?o.map(n):o;i[a--]=0}}},t.csv=wc,t.csvFormat=rc,t.csvFormatBody=ic,t.csvFormatRow=ac,t.csvFormatRows=oc,t.csvFormatValue=uc,t.csvParse=nc,t.csvParseRows=ec,t.cubehelix=Tr,t.cumsum=function(t,n){var e=0,r=0;return Float64Array.from(t,void 0===n?t=>e+=+t||0:i=>e+=+n(i,r++,t)||0)},t.curveBasis=function(t){return new Rx(t)},t.curveBasisClosed=function(t){return new Fx(t)},t.curveBasisOpen=function(t){return new qx(t)},t.curveBumpX=tx,t.curveBumpY=nx,t.curveBundle=Ix,t.curveCardinal=Yx,t.curveCardinalClosed=jx,t.curveCardinalOpen=Xx,t.curveCatmullRom=Wx,t.curveCatmullRomClosed=Kx,t.curveCatmullRomOpen=Jx,t.curveLinear=Um,t.curveLinearClosed=function(t){return new tw(t)},t.curveMonotoneX=function(t){return new ow(t)},t.curveMonotoneY=function(t){return new aw(t)},t.curveNatural=function(t){return new cw(t)},t.curveStep=function(t){return new sw(t,.5)},t.curveStepAfter=function(t){return new sw(t,1)},t.curveStepBefore=function(t){return new sw(t,0)},t.descending=e,t.deviation=w,t.difference=function(t,...n){t=new InternSet(t);for(const e of n)for(const n of e)t.delete(n);return t},t.disjoint=function(t,n){const e=n[Symbol.iterator](),r=new InternSet;for(const n of t){if(r.has(n))return!1;let t,i;for(;({value:t,done:i}=e.next())&&!i;){if(Object.is(n,t))return!1;r.add(t)}}return!0},t.dispatch=$t,t.drag=function(){var t,n,e,r,i=se,o=le,a=he,u=de,c={},f=$t("start","drag","end"),s=0,l=0;function h(t){t.on("mousedown.drag",d).filter(u).on("touchstart.drag",y).on("touchmove.drag",v,ee).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(a,u){if(!r&&i.call(this,a,u)){var c=b(this,o.call(this,a,u),a,u,"mouse");c&&(Zn(a.view).on("mousemove.drag",p,re).on("mouseup.drag",g,re),ae(a.view),ie(a),e=!1,t=a.clientX,n=a.clientY,c("start",a))}}function p(r){if(oe(r),!e){var i=r.clientX-t,o=r.clientY-n;e=i*i+o*o>l}c.mouse("drag",r)}function g(t){Zn(t.view).on("mousemove.drag mouseup.drag",null),ue(t.view,e),oe(t),c.mouse("end",t)}function y(t,n){if(i.call(this,t,n)){var e,r,a=t.changedTouches,u=o.call(this,t,n),c=a.length;for(e=0;e<c;++e)(r=b(this,u,t,n,a[e].identifier,a[e]))&&(ie(t),r("start",t,a[e]))}}function v(t){var n,e,r=t.changedTouches,i=r.length;for(n=0;n<i;++n)(e=c[r[n].identifier])&&(oe(t),e("drag",t,r[n]))}function _(t){var n,e,i=t.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),n=0;n<o;++n)(e=c[i[n].identifier])&&(ie(t),e("end",t,i[n]))}function b(t,n,e,r,i,o){var u,l,d,p=f.copy(),g=ne(o||e,n);if(null!=(d=a.call(t,new fe("beforestart",{sourceEvent:e,target:h,identifier:i,active:s,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),r)))return u=d.x-g[0]||0,l=d.y-g[1]||0,function e(o,a,f){var y,v=g;switch(o){case"start":c[i]=e,y=s++;break;case"end":delete c[i],--s;case"drag":g=ne(f||a,n),y=s}p.call(o,t,new fe(o,{sourceEvent:a,subject:d,target:h,identifier:i,active:y,x:g[0]+u,y:g[1]+l,dx:g[0]-v[0],dy:g[1]-v[1],dispatch:p}),r)}}return h.filter=function(t){return arguments.length?(i="function"==typeof t?t:ce(!!t),h):i},h.container=function(t){return arguments.length?(o="function"==typeof t?t:ce(t),h):o},h.subject=function(t){return arguments.length?(a="function"==typeof t?t:ce(t),h):a},h.touchable=function(t){return arguments.length?(u="function"==typeof t?t:ce(!!t),h):u},h.on=function(){var t=f.on.apply(f,arguments);return t===f?h:t},h.clickDistance=function(t){return arguments.length?(l=(t=+t)*t,h):Math.sqrt(l)},h},t.dragDisable=ae,t.dragEnable=ue,t.dsv=function(t,n,e,r){3===arguments.length&&"function"==typeof e&&(r=e,e=void 0);var i=Ju(t);return mc(n,e).then((function(t){return i.parse(t,r)}))},t.dsvFormat=Ju,t.easeBack=Lo,t.easeBackIn=Bo,t.easeBackInOut=Lo,t.easeBackOut=Yo,t.easeBounce=Io,t.easeBounceIn=function(t){return 1-Io(1-t)},t.easeBounceInOut=function(t){return((t*=2)<=1?1-Io(1-t):Io(t-1)+1)/2},t.easeBounceOut=Io,t.easeCircle=No,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleInOut=No,t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCubic=bo,t.easeCubicIn=function(t){return t*t*t},t.easeCubicInOut=bo,t.easeCubicOut=function(t){return--t*t*t+1},t.easeElastic=Xo,t.easeElasticIn=Ho,t.easeElasticInOut=Go,t.easeElasticOut=Xo,t.easeExp=Eo,t.easeExpIn=function(t){return So(1-+t)},t.easeExpInOut=Eo,t.easeExpOut=function(t){return 1-So(t)},t.easeLinear=t=>+t,t.easePoly=wo,t.easePolyIn=mo,t.easePolyInOut=wo,t.easePolyOut=xo,t.easeQuad=_o,t.easeQuadIn=function(t){return t*t},t.easeQuadInOut=_o,t.easeQuadOut=function(t){return t*(2-t)},t.easeSin=Ao,t.easeSinIn=function(t){return 1==+t?1:1-Math.cos(t*To)},t.easeSinInOut=Ao,t.easeSinOut=function(t){return Math.sin(t*To)},t.every=function(t,n){if("function"!=typeof n)throw new TypeError("test is not a function");let e=-1;for(const r of t)if(!n(r,++e,t))return!1;return!0},t.extent=M,t.fcumsum=function(t,n){const e=new T;let r=-1;return Float64Array.from(t,void 0===n?t=>e.add(+t||0):i=>e.add(+n(i,++r,t)||0))},t.filter=function(t,n){if("function"!=typeof n)throw new TypeError("test is not a function");const e=[];let r=-1;for(const i of t)n(i,++r,t)&&e.push(i);return e},t.flatGroup=function(t,...n){return z(P(t,...n),n)},t.flatRollup=function(t,n,...e){return z(D(t,n,...e),e)},t.forceCenter=function(t,n){var e,r=1;function i(){var i,o,a=e.length,u=0,c=0;for(i=0;i<a;++i)u+=(o=e[i]).x,c+=o.y;for(u=(u/a-t)*r,c=(c/a-n)*r,i=0;i<a;++i)(o=e[i]).x-=u,o.y-=c}return null==t&&(t=0),null==n&&(n=0),i.initialize=function(t){e=t},i.x=function(n){return arguments.length?(t=+n,i):t},i.y=function(t){return arguments.length?(n=+t,i):n},i.strength=function(t){return arguments.length?(r=+t,i):r},i},t.forceCollide=function(t){var n,e,r,i=1,o=1;function a(){for(var t,a,c,f,s,l,h,d=n.length,p=0;p<o;++p)for(a=$c(n,Ic,Oc).visitAfter(u),t=0;t<d;++t)c=n[t],l=e[c.index],h=l*l,f=c.x+c.vx,s=c.y+c.vy,a.visit(g);function g(t,n,e,o,a){var u=t.data,d=t.r,p=l+d;if(!u)return n>f+p||o<f-p||e>s+p||a<s-p;if(u.index>c.index){var g=f-u.x-u.vx,y=s-u.y-u.vy,v=g*g+y*y;v<p*p&&(0===g&&(v+=(g=Uc(r))*g),0===y&&(v+=(y=Uc(r))*y),v=(p-(v=Math.sqrt(v)))/v*i,c.vx+=(g*=v)*(p=(d*=d)/(h+d)),c.vy+=(y*=v)*p,u.vx-=g*(p=1-p),u.vy-=y*p)}}}function u(t){if(t.data)return t.r=e[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function c(){if(n){var r,i,o=n.length;for(e=new Array(o),r=0;r<o;++r)i=n[r],e[i.index]=+t(i,r,n)}}return"function"!=typeof t&&(t=qc(null==t?1:+t)),a.initialize=function(t,e){n=t,r=e,c()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(n){return arguments.length?(t="function"==typeof n?n:qc(+n),c(),a):t},a},t.forceLink=function(t){var n,e,r,i,o,a,u=Bc,c=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},f=qc(30),s=1;function l(r){for(var i=0,u=t.length;i<s;++i)for(var c,f,l,h,d,p,g,y=0;y<u;++y)f=(c=t[y]).source,h=(l=c.target).x+l.vx-f.x-f.vx||Uc(a),d=l.y+l.vy-f.y-f.vy||Uc(a),h*=p=((p=Math.sqrt(h*h+d*d))-e[y])/p*r*n[y],d*=p,l.vx-=h*(g=o[y]),l.vy-=d*g,f.vx+=h*(g=1-g),f.vy+=d*g}function h(){if(r){var a,c,f=r.length,s=t.length,l=new Map(r.map(((t,n)=>[u(t,n,r),t])));for(a=0,i=new Array(f);a<s;++a)(c=t[a]).index=a,"object"!=typeof c.source&&(c.source=Yc(l,c.source)),"object"!=typeof c.target&&(c.target=Yc(l,c.target)),i[c.source.index]=(i[c.source.index]||0)+1,i[c.target.index]=(i[c.target.index]||0)+1;for(a=0,o=new Array(s);a<s;++a)c=t[a],o[a]=i[c.source.index]/(i[c.source.index]+i[c.target.index]);n=new Array(s),d(),e=new Array(s),p()}}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+c(t[e],e,t)}function p(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+f(t[n],n,t)}return null==t&&(t=[]),l.initialize=function(t,n){r=t,a=n,h()},l.links=function(n){return arguments.length?(t=n,h(),l):t},l.id=function(t){return arguments.length?(u=t,l):u},l.iterations=function(t){return arguments.length?(s=+t,l):s},l.strength=function(t){return arguments.length?(c="function"==typeof t?t:qc(+t),d(),l):c},l.distance=function(t){return arguments.length?(f="function"==typeof t?t:qc(+t),p(),l):f},l},t.forceManyBody=function(){var t,n,e,r,i,o=qc(-30),a=1,u=1/0,c=.81;function f(e){var i,o=t.length,a=$c(t,Xc,Gc).visitAfter(l);for(r=e,i=0;i<o;++i)n=t[i],a.visit(h)}function s(){if(t){var n,e,r=t.length;for(i=new Array(r),n=0;n<r;++n)e=t[n],i[e.index]=+o(e,n,t)}}function l(t){var n,e,r,o,a,u=0,c=0;if(t.length){for(r=o=a=0;a<4;++a)(n=t[a])&&(e=Math.abs(n.value))&&(u+=n.value,c+=e,r+=e*n.x,o+=e*n.y);t.x=r/c,t.y=o/c}else{(n=t).x=n.data.x,n.y=n.data.y;do{u+=i[n.data.index]}while(n=n.next)}t.value=u}function h(t,o,f,s){if(!t.value)return!0;var l=t.x-n.x,h=t.y-n.y,d=s-o,p=l*l+h*h;if(d*d/c<p)return p<u&&(0===l&&(p+=(l=Uc(e))*l),0===h&&(p+=(h=Uc(e))*h),p<a&&(p=Math.sqrt(a*p)),n.vx+=l*t.value*r/p,n.vy+=h*t.value*r/p),!0;if(!(t.length||p>=u)){(t.data!==n||t.next)&&(0===l&&(p+=(l=Uc(e))*l),0===h&&(p+=(h=Uc(e))*h),p<a&&(p=Math.sqrt(a*p)));do{t.data!==n&&(d=i[t.data.index]*r/p,n.vx+=l*d,n.vy+=h*d)}while(t=t.next)}}return f.initialize=function(n,r){t=n,e=r,s()},f.strength=function(t){return arguments.length?(o="function"==typeof t?t:qc(+t),s(),f):o},f.distanceMin=function(t){return arguments.length?(a=t*t,f):Math.sqrt(a)},f.distanceMax=function(t){return arguments.length?(u=t*t,f):Math.sqrt(u)},f.theta=function(t){return arguments.length?(c=t*t,f):Math.sqrt(c)},f},t.forceRadial=function(t,n,e){var r,i,o,a=qc(.1);function u(t){for(var a=0,u=r.length;a<u;++a){var c=r[a],f=c.x-n||1e-6,s=c.y-e||1e-6,l=Math.sqrt(f*f+s*s),h=(o[a]-l)*i[a]*t/l;c.vx+=f*h,c.vy+=s*h}}function c(){if(r){var n,e=r.length;for(i=new Array(e),o=new Array(e),n=0;n<e;++n)o[n]=+t(r[n],n,r),i[n]=isNaN(o[n])?0:+a(r[n],n,r)}}return"function"!=typeof t&&(t=qc(+t)),null==n&&(n=0),null==e&&(e=0),u.initialize=function(t){r=t,c()},u.strength=function(t){return arguments.length?(a="function"==typeof t?t:qc(+t),c(),u):a},u.radius=function(n){return arguments.length?(t="function"==typeof n?n:qc(+n),c(),u):t},u.x=function(t){return arguments.length?(n=+t,u):n},u.y=function(t){return arguments.length?(e=+t,u):e},u},t.forceSimulation=function(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,u=new Map,c=Ni(l),f=$t("tick","end"),s=function(){let t=1;return()=>(t=(Lc*t+jc)%Hc)/Hc}();function l(){h(),f.call("tick",n),e<r&&(c.stop(),f.call("end",n))}function h(r){var c,f,s=t.length;void 0===r&&(r=1);for(var l=0;l<r;++l)for(e+=(o-e)*i,u.forEach((function(t){t(e)})),c=0;c<s;++c)null==(f=t[c]).fx?f.x+=f.vx*=a:(f.x=f.fx,f.vx=0),null==f.fy?f.y+=f.vy*=a:(f.y=f.fy,f.vy=0);return n}function d(){for(var n,e=0,r=t.length;e<r;++e){if((n=t[e]).index=e,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var i=10*Math.sqrt(.5+e),o=e*Vc;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function p(n){return n.initialize&&n.initialize(t,s),n}return null==t&&(t=[]),d(),n={tick:h,restart:function(){return c.restart(l),n},stop:function(){return c.stop(),n},nodes:function(e){return arguments.length?(t=e,d(),u.forEach(p),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(r=+t,n):r},alphaDecay:function(t){return arguments.length?(i=+t,n):+i},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(a=1-t,n):1-a},randomSource:function(t){return arguments.length?(s=t,u.forEach(p),n):s},force:function(t,e){return arguments.length>1?(null==e?u.delete(t):u.set(t,p(e)),n):u.get(t)},find:function(n,e,r){var i,o,a,u,c,f=0,s=t.length;for(null==r?r=1/0:r*=r,f=0;f<s;++f)(a=(i=n-(u=t[f]).x)*i+(o=e-u.y)*o)<r&&(c=u,r=a);return c},on:function(t,e){return arguments.length>1?(f.on(t,e),n):f.on(t)}}},t.forceX=function(t){var n,e,r,i=qc(.1);function o(t){for(var i,o=0,a=n.length;o<a;++o)(i=n[o]).vx+=(r[o]-i.x)*e[o]*t}function a(){if(n){var o,a=n.length;for(e=new Array(a),r=new Array(a),o=0;o<a;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=qc(null==t?0:+t)),o.initialize=function(t){n=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:qc(+t),a(),o):i},o.x=function(n){return arguments.length?(t="function"==typeof n?n:qc(+n),a(),o):t},o},t.forceY=function(t){var n,e,r,i=qc(.1);function o(t){for(var i,o=0,a=n.length;o<a;++o)(i=n[o]).vy+=(r[o]-i.y)*e[o]*t}function a(){if(n){var o,a=n.length;for(e=new Array(a),r=new Array(a),o=0;o<a;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=qc(null==t?0:+t)),o.initialize=function(t){n=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:qc(+t),a(),o):i},o.y=function(n){return arguments.length?(t="function"==typeof n?n:qc(+n),a(),o):t},o},t.formatDefaultLocale=ff,t.formatLocale=cf,t.formatSpecifier=Jc,t.fsum=function(t,n){const e=new T;if(void 0===n)for(let n of t)(n=+n)&&e.add(n);else{let r=-1;for(let i of t)(i=+n(i,++r,t))&&e.add(i)}return+e},t.geoAlbers=xd,t.geoAlbersUsa=function(){var t,n,e,r,i,o,a=xd(),u=md().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=md().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(t,n){o=[t,n]}};function s(t){var n=t[0],a=t[1];return o=null,e.point(n,a),o||(r.point(n,a),o)||(i.point(n,a),o)}function l(){return t=n=null,s}return s.invert=function(t){var n=a.scale(),e=a.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?u:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:a).invert(t)},s.stream=function(e){return t&&n===e?t:(r=[a.stream(n=e),u.stream(e),c.stream(e)],i=r.length,t={point:function(t,n){for(var e=-1;++e<i;)r[e].point(t,n)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},s.precision=function(t){return arguments.length?(a.precision(t),u.precision(t),c.precision(t),l()):a.precision()},s.scale=function(t){return arguments.length?(a.scale(t),u.scale(.35*t),c.scale(t),s.translate(a.translate())):a.scale()},s.translate=function(t){if(!arguments.length)return a.translate();var n=a.scale(),o=+t[0],s=+t[1];return e=a.translate(t).clipExtent([[o-.455*n,s-.238*n],[o+.455*n,s+.238*n]]).stream(f),r=u.translate([o-.307*n,s+.201*n]).clipExtent([[o-.425*n+df,s+.12*n+df],[o-.214*n-df,s+.234*n-df]]).stream(f),i=c.translate([o-.205*n,s+.212*n]).clipExtent([[o-.214*n+df,s+.166*n+df],[o-.115*n-df,s+.234*n-df]]).stream(f),l()},s.fitExtent=function(t,n){return ud(s,t,n)},s.fitSize=function(t,n){return cd(s,t,n)},s.fitWidth=function(t,n){return fd(s,t,n)},s.fitHeight=function(t,n){return sd(s,t,n)},s.scale(1070)},t.geoArea=function(t){return us=new T,Lf(t,cs),2*us},t.geoAzimuthalEqualArea=function(){return yd(Td).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=Td,t.geoAzimuthalEquidistant=function(){return yd(Ad).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=Ad,t.geoBounds=function(t){var n,e,r,i,o,a,u;if(Qf=Kf=-(Wf=Zf=1/0),is=[],Lf(t,Fs),e=is.length){for(is.sort(Hs),n=1,o=[r=is[0]];n<e;++n)Xs(r,(i=is[n])[0])||Xs(r,i[1])?(js(r[0],i[1])>js(r[0],r[1])&&(r[1]=i[1]),js(i[0],r[1])>js(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=0,r=o[e=o.length-1];n<=e;r=i,++n)i=o[n],(u=js(r[1],i[0]))>a&&(a=u,Wf=i[0],Kf=r[1])}return is=os=null,Wf===1/0||Zf===1/0?[[NaN,NaN],[NaN,NaN]]:[[Wf,Zf],[Kf,Qf]]},t.geoCentroid=function(t){ms=xs=ws=Ms=Ts=As=Ss=Es=0,Ns=new T,ks=new T,Cs=new T,Lf(t,Gs);var n=+Ns,e=+ks,r=+Cs,i=Ef(n,e,r);return i<pf&&(n=As,e=Ss,r=Es,xs<df&&(n=ws,e=Ms,r=Ts),(i=Ef(n,e,r))<pf)?[NaN,NaN]:[Mf(e,n)*bf,Rf(r/i)*bf]},t.geoCircle=function(){var t,n,e=il([0,0]),r=il(90),i=il(6),o={point:function(e,r){t.push(e=n(e,r)),e[0]*=bf,e[1]*=bf}};function a(){var a=e.apply(this,arguments),u=r.apply(this,arguments)*mf,c=i.apply(this,arguments)*mf;return t=[],n=ul(-a[0]*mf,-a[1]*mf,0).invert,hl(o,u,c,1),a={type:"Polygon",coordinates:[t]},t=n=null,a}return a.center=function(t){return arguments.length?(e="function"==typeof t?t:il([+t[0],+t[1]]),a):e},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:il(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:il(+t),a):i},a},t.geoClipAntimeridian=Tl,t.geoClipCircle=Al,t.geoClipExtent=function(){var t,n,e,r=0,i=0,o=960,a=500;return e={stream:function(e){return t&&n===e?t:t=zl(r,i,o,a)(n=e)},extent:function(u){return arguments.length?(r=+u[0][0],i=+u[0][1],o=+u[1][0],a=+u[1][1],t=n=null,e):[[r,i],[o,a]]}}},t.geoClipRectangle=zl,t.geoConicConformal=function(){return _d(kd).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=kd,t.geoConicEqualArea=md,t.geoConicEqualAreaRaw=bd,t.geoConicEquidistant=function(){return _d(Pd).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=Pd,t.geoContains=function(t,n){return(t&&Bl.hasOwnProperty(t.type)?Bl[t.type]:Ll)(t,n)},t.geoDistance=Ol,t.geoEqualEarth=function(){return yd(qd).scale(177.158)},t.geoEqualEarthRaw=qd,t.geoEquirectangular=function(){return yd(Cd).scale(152.63)},t.geoEquirectangularRaw=Cd,t.geoGnomonic=function(){return yd(Ud).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=Ud,t.geoGraticule=Kl,t.geoGraticule10=function(){return Kl()()},t.geoIdentity=function(){var t,n,e,r,i,o,a,u=1,c=0,f=0,s=1,l=1,h=0,d=null,p=1,g=1,y=id({point:function(t,n){var e=b([t,n]);this.stream.point(e[0],e[1])}}),v=eh;function _(){return p=u*s,g=u*l,o=a=null,b}function b(e){var r=e[0]*p,i=e[1]*g;if(h){var o=i*t-r*n;r=r*t+i*n,i=o}return[r+c,i+f]}return b.invert=function(e){var r=e[0]-c,i=e[1]-f;if(h){var o=i*t+r*n;r=r*t-i*n,i=o}return[r/p,i/g]},b.stream=function(t){return o&&a===t?o:o=y(v(a=t))},b.postclip=function(t){return arguments.length?(v=t,d=e=r=i=null,_()):v},b.clipExtent=function(t){return arguments.length?(v=null==t?(d=e=r=i=null,eh):zl(d=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),_()):null==d?null:[[d,e],[r,i]]},b.scale=function(t){return arguments.length?(u=+t,_()):u},b.translate=function(t){return arguments.length?(c=+t[0],f=+t[1],_()):[c,f]},b.angle=function(e){return arguments.length?(n=Cf(h=e%360*mf),t=Tf(h),_()):h*bf},b.reflectX=function(t){return arguments.length?(s=t?-1:1,_()):s<0},b.reflectY=function(t){return arguments.length?(l=t?-1:1,_()):l<0},b.fitExtent=function(t,n){return ud(b,t,n)},b.fitSize=function(t,n){return cd(b,t,n)},b.fitWidth=function(t,n){return fd(b,t,n)},b.fitHeight=function(t,n){return sd(b,t,n)},b},t.geoInterpolate=function(t,n){var e=t[0]*mf,r=t[1]*mf,i=n[0]*mf,o=n[1]*mf,a=Tf(r),u=Cf(r),c=Tf(o),f=Cf(o),s=a*Tf(e),l=a*Cf(e),h=c*Tf(i),d=c*Cf(i),p=2*Rf(zf(Ff(o-r)+a*c*Ff(i-e))),g=Cf(p),y=p?function(t){var n=Cf(t*=p)/g,e=Cf(p-t)/g,r=e*s+n*h,i=e*l+n*d,o=e*u+n*f;return[Mf(i,r)*bf,Mf(o,zf(r*r+i*i))*bf]}:function(){return[e*bf,r*bf]};return y.distance=p,y},t.geoLength=ql,t.geoMercator=function(){return Ed(Sd).scale(961/_f)},t.geoMercatorRaw=Sd,t.geoNaturalEarth1=function(){return yd(Id).scale(175.295)},t.geoNaturalEarth1Raw=Id,t.geoOrthographic=function(){return yd(Od).scale(249.5).clipAngle(90+df)},t.geoOrthographicRaw=Od,t.geoPath=function(t,n){let e,r,i=3,o=4.5;function a(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),Lf(t,e(r))),r.result()}return a.area=function(t){return Lf(t,e(sh)),sh.result()},a.measure=function(t){return Lf(t,e(Kh)),Kh.result()},a.bounds=function(t){return Lf(t,e(mh)),mh.result()},a.centroid=function(t){return Lf(t,e(Oh)),Oh.result()},a.projection=function(n){return arguments.length?(e=null==n?(t=null,eh):(t=n).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(n=null,new ed(i)):new Bh(n=t),"function"!=typeof o&&r.pointRadius(o),a):n},a.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),a):o},a.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);i=n}return null===n&&(r=new ed(i)),a},a.projection(t).digits(i).context(n)},t.geoProjection=yd,t.geoProjectionMutator=vd,t.geoRotation=ll,t.geoStereographic=function(){return yd(Bd).scale(250).clipAngle(142)},t.geoStereographicRaw=Bd,t.geoStream=Lf,t.geoTransform=function(t){return{stream:id(t)}},t.geoTransverseMercator=function(){var t=Ed(Yd),n=t.center,e=t.rotate;return t.center=function(t){return arguments.length?n([-t[1],t[0]]):[(t=n())[1],-t[0]]},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=Yd,t.gray=function(t,n){return new ur(t,0,0,null==n?1:n)},t.greatest=ot,t.greatestIndex=function(t,e=n){if(1===e.length)return tt(t,e);let r,i=-1,o=-1;for(const n of t)++o,(i<0?0===e(n,n):e(n,r)>0)&&(r=n,i=o);return i},t.group=C,t.groupSort=function(t,e,r){return(2!==e.length?U($(t,e,r),(([t,e],[r,i])=>n(e,i)||n(t,r))):U(C(t,r),(([t,r],[i,o])=>e(r,o)||n(t,i)))).map((([t])=>t))},t.groups=P,t.hcl=dr,t.hierarchy=Gd,t.histogram=Q,t.hsl=He,t.html=Ec,t.image=function(t,n){return new Promise((function(e,r){var i=new Image;for(var o in n)i[o]=n[o];i.onerror=r,i.onload=function(){e(i)},i.src=t}))},t.index=function(t,...n){return F(t,k,R,n)},t.indexes=function(t,...n){return F(t,Array.from,R,n)},t.interpolate=Gr,t.interpolateArray=function(t,n){return(Ir(n)?Ur:Or)(t,n)},t.interpolateBasis=Er,t.interpolateBasisClosed=Nr,t.interpolateBlues=Xb,t.interpolateBrBG=ib,t.interpolateBuGn=wb,t.interpolateBuPu=Tb,t.interpolateCividis=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},t.interpolateCool=om,t.interpolateCubehelix=li,t.interpolateCubehelixDefault=rm,t.interpolateCubehelixLong=hi,t.interpolateDate=Br,t.interpolateDiscrete=function(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}},t.interpolateGnBu=Sb,t.interpolateGreens=Vb,t.interpolateGreys=Zb,t.interpolateHcl=ci,t.interpolateHclLong=fi,t.interpolateHsl=oi,t.interpolateHslLong=ai,t.interpolateHue=function(t,n){var e=Pr(+t,+n);return function(t){var n=e(t);return n-360*Math.floor(n/360)}},t.interpolateInferno=dm,t.interpolateLab=function(t,n){var e=$r((t=ar(t)).l,(n=ar(n)).l),r=$r(t.a,n.a),i=$r(t.b,n.b),o=$r(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=r(n),t.b=i(n),t.opacity=o(n),t+""}},t.interpolateMagma=hm,t.interpolateNumber=Yr,t.interpolateNumberArray=Ur,t.interpolateObject=Lr,t.interpolateOrRd=Nb,t.interpolateOranges=em,t.interpolatePRGn=ab,t.interpolatePiYG=cb,t.interpolatePlasma=pm,t.interpolatePuBu=zb,t.interpolatePuBuGn=Cb,t.interpolatePuOr=sb,t.interpolatePuRd=Db,t.interpolatePurples=Qb,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return am.h=360*t-100,am.s=1.5-1.5*n,am.l=.8-.9*n,am+""},t.interpolateRdBu=hb,t.interpolateRdGy=pb,t.interpolateRdPu=Fb,t.interpolateRdYlBu=yb,t.interpolateRdYlGn=_b,t.interpolateReds=tm,t.interpolateRgb=Dr,t.interpolateRgbBasis=Fr,t.interpolateRgbBasisClosed=qr,t.interpolateRound=Vr,t.interpolateSinebow=function(t){var n;return t=(.5-t)*Math.PI,um.r=255*(n=Math.sin(t))*n,um.g=255*(n=Math.sin(t+cm))*n,um.b=255*(n=Math.sin(t+fm))*n,um+""},t.interpolateSpectral=mb,t.interpolateString=Xr,t.interpolateTransformCss=ti,t.interpolateTransformSvg=ni,t.interpolateTurbo=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},t.interpolateViridis=lm,t.interpolateWarm=im,t.interpolateYlGn=Ob,t.interpolateYlGnBu=Ub,t.interpolateYlOrBr=Yb,t.interpolateYlOrRd=jb,t.interpolateZoom=ri,t.interrupt=Gi,t.intersection=function(t,...n){t=new InternSet(t),n=n.map(vt);t:for(const e of t)for(const r of n)if(!r.has(e)){t.delete(e);continue t}return t},t.interval=function(t,n,e){var r=new Ei,i=n;return null==n?(r.restart(t,n,e),r):(r._restart=r.restart,r.restart=function(t,n,e){n=+n,e=null==e?Ai():+e,r._restart((function o(a){a+=i,r._restart(o,i+=n,e),t(a)}),n,e)},r.restart(t,n,e),r)},t.isoFormat=D_,t.isoParse=F_,t.json=function(t,n){return fetch(t,n).then(Tc)},t.lab=ar,t.lch=function(t,n,e,r){return 1===arguments.length?hr(t):new pr(e,n,t,null==r?1:r)},t.least=function(t,e=n){let r,i=!1;if(1===e.length){let o;for(const a of t){const t=e(a);(i?n(t,o)<0:0===n(t,t))&&(r=a,o=t,i=!0)}}else for(const n of t)(i?e(n,r)<0:0===e(n,n))&&(r=n,i=!0);return r},t.leastIndex=ht,t.line=Bm,t.lineRadial=Wm,t.link=ox,t.linkHorizontal=function(){return ox(tx)},t.linkRadial=function(){const t=ox(ex);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.linkVertical=function(){return ox(nx)},t.local=Qn,t.map=function(t,n){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof n)throw new TypeError("mapper is not a function");return Array.from(t,((e,r)=>n(e,r,t)))},t.matcher=Vt,t.max=J,t.maxIndex=tt,t.mean=function(t,n){let e=0,r=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(++e,r+=n);else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(o=+o)>=o&&(++e,r+=o)}if(e)return r/e},t.median=function(t,n){return at(t,.5,n)},t.medianIndex=function(t,n){return ct(t,.5,n)},t.merge=ft,t.min=nt,t.minIndex=et,t.mode=function(t,n){const e=new InternMap;if(void 0===n)for(let n of t)null!=n&&n>=n&&e.set(n,(e.get(n)||0)+1);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&i>=i&&e.set(i,(e.get(i)||0)+1)}let r,i=0;for(const[t,n]of e)n>i&&(i=n,r=t);return r},t.namespace=It,t.namespaces=Ut,t.nice=Z,t.now=Ai,t.pack=function(){var t=null,n=1,e=1,r=np;function i(i){const o=ap();return i.x=n/2,i.y=e/2,t?i.eachBefore(xp(t)).eachAfter(wp(r,.5,o)).eachBefore(Mp(1)):i.eachBefore(xp(mp)).eachAfter(wp(np,1,o)).eachAfter(wp(r,i.r/Math.min(n,e),o)).eachBefore(Mp(Math.min(n,e)/(2*i.r))),i}return i.radius=function(n){return arguments.length?(t=Jd(n),i):t},i.size=function(t){return arguments.length?(n=+t[0],e=+t[1],i):[n,e]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:ep(+t),i):r},i},t.packEnclose=function(t){return up(t,ap())},t.packSiblings=function(t){return bp(t,ap()),t},t.pairs=function(t,n=st){const e=[];let r,i=!1;for(const o of t)i&&e.push(n(r,o)),r=o,i=!0;return e},t.partition=function(){var t=1,n=1,e=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=e,i.x1=t,i.y1=n/o,i.eachBefore(function(t,n){return function(r){r.children&&Ap(r,r.x0,t*(r.depth+1)/n,r.x1,t*(r.depth+2)/n);var i=r.x0,o=r.y0,a=r.x1-e,u=r.y1-e;a<i&&(i=a=(i+a)/2),u<o&&(o=u=(o+u)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=u}}(n,o)),r&&i.eachBefore(Tp),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(t){return arguments.length?(e=+t,i):e},i},t.path=Ia,t.pathRound=function(t=3){return new Ua(+t)},t.permute=q,t.pie=function(){var t=jm,n=Lm,e=null,r=gm(0),i=gm(Sm),o=gm(0);function a(a){var u,c,f,s,l,h=(a=Fm(a)).length,d=0,p=new Array(h),g=new Array(h),y=+r.apply(this,arguments),v=Math.min(Sm,Math.max(-Sm,i.apply(this,arguments)-y)),_=Math.min(Math.abs(v)/h,o.apply(this,arguments)),b=_*(v<0?-1:1);for(u=0;u<h;++u)(l=g[p[u]=u]=+t(a[u],u,a))>0&&(d+=l);for(null!=n?p.sort((function(t,e){return n(g[t],g[e])})):null!=e&&p.sort((function(t,n){return e(a[t],a[n])})),u=0,f=d?(v-h*b)/d:0;u<h;++u,y=s)c=p[u],s=y+((l=g[c])>0?l*f:0)+b,g[c]={data:a[c],index:u,value:l,startAngle:y,endAngle:s,padAngle:_};return g}return a.value=function(n){return arguments.length?(t="function"==typeof n?n:gm(+n),a):t},a.sortValues=function(t){return arguments.length?(n=t,e=null,a):n},a.sort=function(t){return arguments.length?(e=t,n=null,a):e},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:gm(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:gm(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:gm(+t),a):o},a},t.piecewise=di,t.pointRadial=Km,t.pointer=ne,t.pointers=function(t,n){return t.target&&(t=te(t),void 0===n&&(n=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>ne(t,n)))},t.polygonArea=function(t){for(var n,e=-1,r=t.length,i=t[r-1],o=0;++e<r;)n=i,i=t[e],o+=n[1]*i[0]-n[0]*i[1];return o/2},t.polygonCentroid=function(t){for(var n,e,r=-1,i=t.length,o=0,a=0,u=t[i-1],c=0;++r<i;)n=u,u=t[r],c+=e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return[o/(c*=3),a/c]},t.polygonContains=function(t,n){for(var e,r,i=t.length,o=t[i-1],a=n[0],u=n[1],c=o[0],f=o[1],s=!1,l=0;l<i;++l)e=(o=t[l])[0],(r=o[1])>u!=f>u&&a<(c-e)*(u-r)/(f-r)+e&&(s=!s),c=e,f=r;return s},t.polygonHull=function(t){if((e=t.length)<3)return null;var n,e,r=new Array(e),i=new Array(e);for(n=0;n<e;++n)r[n]=[+t[n][0],+t[n][1],n];for(r.sort(Hp),n=0;n<e;++n)i[n]=[r[n][0],-r[n][1]];var o=Xp(r),a=Xp(i),u=a[0]===o[0],c=a[a.length-1]===o[o.length-1],f=[];for(n=o.length-1;n>=0;--n)f.push(t[r[o[n]][2]]);for(n=+u;n<a.length-c;++n)f.push(t[r[a[n]][2]]);return f},t.polygonLength=function(t){for(var n,e,r=-1,i=t.length,o=t[i-1],a=o[0],u=o[1],c=0;++r<i;)n=a,e=u,n-=a=(o=t[r])[0],e-=u=o[1],c+=Math.hypot(n,e);return c},t.precisionFixed=sf,t.precisionPrefix=lf,t.precisionRound=hf,t.quadtree=$c,t.quantile=at,t.quantileIndex=ct,t.quantileSorted=ut,t.quantize=function(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e},t.quickselect=rt,t.radialArea=Zm,t.radialLine=Wm,t.randomBates=Jp,t.randomBernoulli=eg,t.randomBeta=og,t.randomBinomial=ag,t.randomCauchy=cg,t.randomExponential=tg,t.randomGamma=ig,t.randomGeometric=rg,t.randomInt=Wp,t.randomIrwinHall=Qp,t.randomLcg=function(t=Math.random()){let n=0|(0<=t&&t<1?t/lg:Math.abs(t));return()=>(n=1664525*n+1013904223|0,lg*(n>>>0))},t.randomLogNormal=Kp,t.randomLogistic=fg,t.randomNormal=Zp,t.randomPareto=ng,t.randomPoisson=sg,t.randomUniform=Vp,t.randomWeibull=ug,t.range=lt,t.rank=function(t,e=n){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let r=Array.from(t);const i=new Float64Array(r.length);2!==e.length&&(r=r.map(e),e=n);const o=(t,n)=>e(r[t],r[n]);let a,u;return(t=Uint32Array.from(r,((t,n)=>n))).sort(e===n?(t,n)=>O(r[t],r[n]):I(o)),t.forEach(((t,n)=>{const e=o(t,void 0===a?t:a);e>=0?((void 0===a||e>0)&&(a=t,u=n),i[t]=u):i[t]=NaN})),i},t.reduce=function(t,n,e){if("function"!=typeof n)throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,o,a=-1;if(arguments.length<3){if(({done:i,value:e}=r.next()),i)return;++a}for(;({done:i,value:o}=r.next()),!i;)e=n(e,o,++a,t);return e},t.reverse=function(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()},t.rgb=Fe,t.ribbon=function(){return Wa()},t.ribbonArrow=function(){return Wa(Va)},t.rollup=$,t.rollups=D,t.scaleBand=yg,t.scaleDiverging=function t(){var n=Ng(L_()(mg));return n.copy=function(){return B_(n,t())},dg.apply(n,arguments)},t.scaleDivergingLog=function t(){var n=Fg(L_()).domain([.1,1,10]);return n.copy=function(){return B_(n,t()).base(n.base())},dg.apply(n,arguments)},t.scaleDivergingPow=j_,t.scaleDivergingSqrt=function(){return j_.apply(null,arguments).exponent(.5)},t.scaleDivergingSymlog=function t(){var n=Ig(L_());return n.copy=function(){return B_(n,t()).constant(n.constant())},dg.apply(n,arguments)},t.scaleIdentity=function t(n){var e;function r(t){return null==t||isNaN(t=+t)?e:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(n=Array.from(t,_g),r):n.slice()},r.unknown=function(t){return arguments.length?(e=t,r):e},r.copy=function(){return t(n).unknown(e)},n=arguments.length?Array.from(n,_g):[0,1],Ng(r)},t.scaleImplicit=pg,t.scaleLinear=function t(){var n=Sg();return n.copy=function(){return Tg(n,t())},hg.apply(n,arguments),Ng(n)},t.scaleLog=function t(){const n=Fg(Ag()).domain([1,10]);return n.copy=()=>Tg(n,t()).base(n.base()),hg.apply(n,arguments),n},t.scaleOrdinal=gg,t.scalePoint=function(){return vg(yg.apply(null,arguments).paddingInner(1))},t.scalePow=jg,t.scaleQuantile=function t(){var e,r=[],i=[],o=[];function a(){var t=0,n=Math.max(1,i.length);for(o=new Array(n-1);++t<n;)o[t-1]=ut(r,t/n);return u}function u(t){return null==t||isNaN(t=+t)?e:i[s(o,t)]}return u.invertExtent=function(t){var n=i.indexOf(t);return n<0?[NaN,NaN]:[n>0?o[n-1]:r[0],n<o.length?o[n]:r[r.length-1]]},u.domain=function(t){if(!arguments.length)return r.slice();r=[];for(let n of t)null==n||isNaN(n=+n)||r.push(n);return r.sort(n),a()},u.range=function(t){return arguments.length?(i=Array.from(t),a()):i.slice()},u.unknown=function(t){return arguments.length?(e=t,u):e},u.quantiles=function(){return o.slice()},u.copy=function(){return t().domain(r).range(i).unknown(e)},hg.apply(u,arguments)},t.scaleQuantize=function t(){var n,e=0,r=1,i=1,o=[.5],a=[0,1];function u(t){return null!=t&&t<=t?a[s(o,t,0,i)]:n}function c(){var t=-1;for(o=new Array(i);++t<i;)o[t]=((t+1)*r-(t-i)*e)/(i+1);return u}return u.domain=function(t){return arguments.length?([e,r]=t,e=+e,r=+r,c()):[e,r]},u.range=function(t){return arguments.length?(i=(a=Array.from(t)).length-1,c()):a.slice()},u.invertExtent=function(t){var n=a.indexOf(t);return n<0?[NaN,NaN]:n<1?[e,o[0]]:n>=i?[o[i-1],r]:[o[n-1],o[n]]},u.unknown=function(t){return arguments.length?(n=t,u):u},u.thresholds=function(){return o.slice()},u.copy=function(){return t().domain([e,r]).range(a).unknown(n)},hg.apply(Ng(u),arguments)},t.scaleRadial=function t(){var n,e=Sg(),r=[0,1],i=!1;function o(t){var r=function(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}(e(t));return isNaN(r)?n:i?Math.round(r):r}return o.invert=function(t){return e.invert(Hg(t))},o.domain=function(t){return arguments.length?(e.domain(t),o):e.domain()},o.range=function(t){return arguments.length?(e.range((r=Array.from(t,_g)).map(Hg)),o):r.slice()},o.rangeRound=function(t){return o.range(t).round(!0)},o.round=function(t){return arguments.length?(i=!!t,o):i},o.clamp=function(t){return arguments.length?(e.clamp(t),o):e.clamp()},o.unknown=function(t){return arguments.length?(n=t,o):n},o.copy=function(){return t(e.domain(),r).round(i).clamp(e.clamp()).unknown(n)},hg.apply(o,arguments),Ng(o)},t.scaleSequential=function t(){var n=Ng(O_()(mg));return n.copy=function(){return B_(n,t())},dg.apply(n,arguments)},t.scaleSequentialLog=function t(){var n=Fg(O_()).domain([1,10]);return n.copy=function(){return B_(n,t()).base(n.base())},dg.apply(n,arguments)},t.scaleSequentialPow=Y_,t.scaleSequentialQuantile=function t(){var e=[],r=mg;function i(t){if(null!=t&&!isNaN(t=+t))return r((s(e,t,1)-1)/(e.length-1))}return i.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(n),i},i.interpolator=function(t){return arguments.length?(r=t,i):r},i.range=function(){return e.map(((t,n)=>r(n/(e.length-1))))},i.quantiles=function(t){return Array.from({length:t+1},((n,r)=>at(e,r/t)))},i.copy=function(){return t(r).domain(e)},dg.apply(i,arguments)},t.scaleSequentialSqrt=function(){return Y_.apply(null,arguments).exponent(.5)},t.scaleSequentialSymlog=function t(){var n=Ig(O_());return n.copy=function(){return B_(n,t()).constant(n.constant())},dg.apply(n,arguments)},t.scaleSqrt=function(){return jg.apply(null,arguments).exponent(.5)},t.scaleSymlog=function t(){var n=Ig(Ag());return n.copy=function(){return Tg(n,t()).constant(n.constant())},hg.apply(n,arguments)},t.scaleThreshold=function t(){var n,e=[.5],r=[0,1],i=1;function o(t){return null!=t&&t<=t?r[s(e,t,0,i)]:n}return o.domain=function(t){return arguments.length?(e=Array.from(t),i=Math.min(e.length,r.length-1),o):e.slice()},o.range=function(t){return arguments.length?(r=Array.from(t),i=Math.min(e.length,r.length-1),o):r.slice()},o.invertExtent=function(t){var n=r.indexOf(t);return[e[n-1],e[n]]},o.unknown=function(t){return arguments.length?(n=t,o):n},o.copy=function(){return t().domain(e).range(r).unknown(n)},hg.apply(o,arguments)},t.scaleTime=function(){return hg.apply(I_(uv,cv,tv,Zy,xy,py,sy,ay,iy,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},t.scaleUtc=function(){return hg.apply(I_(ov,av,ev,Qy,Fy,yy,hy,cy,iy,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},t.scan=function(t,n){const e=ht(t,n);return e<0?void 0:e},t.schemeAccent=G_,t.schemeBlues=Hb,t.schemeBrBG=rb,t.schemeBuGn=xb,t.schemeBuPu=Mb,t.schemeCategory10=X_,t.schemeDark2=V_,t.schemeGnBu=Ab,t.schemeGreens=Gb,t.schemeGreys=Wb,t.schemeOrRd=Eb,t.schemeOranges=nm,t.schemePRGn=ob,t.schemePaired=W_,t.schemePastel1=Z_,t.schemePastel2=K_,t.schemePiYG=ub,t.schemePuBu=Pb,t.schemePuBuGn=kb,t.schemePuOr=fb,t.schemePuRd=$b,t.schemePurples=Kb,t.schemeRdBu=lb,t.schemeRdGy=db,t.schemeRdPu=Rb,t.schemeRdYlBu=gb,t.schemeRdYlGn=vb,t.schemeReds=Jb,t.schemeSet1=Q_,t.schemeSet2=J_,t.schemeSet3=tb,t.schemeSpectral=bb,t.schemeTableau10=nb,t.schemeYlGn=Ib,t.schemeYlGnBu=qb,t.schemeYlOrBr=Bb,t.schemeYlOrRd=Lb,t.select=Zn,t.selectAll=function(t){return"string"==typeof t?new Vn([document.querySelectorAll(t)],[document.documentElement]):new Vn([Ht(t)],Gn)},t.selection=Wn,t.selector=jt,t.selectorAll=Gt,t.shuffle=dt,t.shuffler=pt,t.some=function(t,n){if("function"!=typeof n)throw new TypeError("test is not a function");let e=-1;for(const r of t)if(n(r,++e,t))return!0;return!1},t.sort=U,t.stack=function(){var t=gm([]),n=hw,e=lw,r=dw;function i(i){var o,a,u=Array.from(t.apply(this,arguments),pw),c=u.length,f=-1;for(const t of i)for(o=0,++f;o<c;++o)(u[o][f]=[0,+r(t,u[o].key,f,i)]).data=t;for(o=0,a=Fm(n(u));o<c;++o)u[a[o]].index=o;return e(u,a),u}return i.keys=function(n){return arguments.length?(t="function"==typeof n?n:gm(Array.from(n)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:gm(+t),i):r},i.order=function(t){return arguments.length?(n=null==t?hw:"function"==typeof t?t:gm(Array.from(t)),i):n},i.offset=function(t){return arguments.length?(e=null==t?lw:t,i):e},i},t.stackOffsetDiverging=function(t,n){if((u=t.length)>0)for(var e,r,i,o,a,u,c=0,f=t[n[0]].length;c<f;++c)for(o=a=0,e=0;e<u;++e)(i=(r=t[n[e]][c])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)},t.stackOffsetExpand=function(t,n){if((r=t.length)>0){for(var e,r,i,o=0,a=t[0].length;o<a;++o){for(i=e=0;e<r;++e)i+=t[e][o][1]||0;if(i)for(e=0;e<r;++e)t[e][o][1]/=i}lw(t,n)}},t.stackOffsetNone=lw,t.stackOffsetSilhouette=function(t,n){if((e=t.length)>0){for(var e,r=0,i=t[n[0]],o=i.length;r<o;++r){for(var a=0,u=0;a<e;++a)u+=t[a][r][1]||0;i[r][1]+=i[r][0]=-u/2}lw(t,n)}},t.stackOffsetWiggle=function(t,n){if((i=t.length)>0&&(r=(e=t[n[0]]).length)>0){for(var e,r,i,o=0,a=1;a<r;++a){for(var u=0,c=0,f=0;u<i;++u){for(var s=t[n[u]],l=s[a][1]||0,h=(l-(s[a-1][1]||0))/2,d=0;d<u;++d){var p=t[n[d]];h+=(p[a][1]||0)-(p[a-1][1]||0)}c+=l,f+=h*l}e[a-1][1]+=e[a-1][0]=o,c&&(o-=f/c)}e[a-1][1]+=e[a-1][0]=o,lw(t,n)}},t.stackOrderAppearance=gw,t.stackOrderAscending=vw,t.stackOrderDescending=function(t){return vw(t).reverse()},t.stackOrderInsideOut=function(t){var n,e,r=t.length,i=t.map(_w),o=gw(t),a=0,u=0,c=[],f=[];for(n=0;n<r;++n)e=o[n],a<u?(a+=i[e],c.push(e)):(u+=i[e],f.push(e));return f.reverse().concat(c)},t.stackOrderNone=hw,t.stackOrderReverse=function(t){return hw(t).reverse()},t.stratify=function(){var t,n=kp,e=Cp;function r(r){var i,o,a,u,c,f,s,l,h=Array.from(r),d=n,p=e,g=new Map;if(null!=t){const n=h.map(((n,e)=>function(t){t=`${t}`;let n=t.length;zp(t,n-1)&&!zp(t,n-2)&&(t=t.slice(0,-1));return"/"===t[0]?t:`/${t}`}(t(n,e,r)))),e=n.map(Pp),i=new Set(n).add("");for(const t of e)i.has(t)||(i.add(t),n.push(t),e.push(Pp(t)),h.push(Np));d=(t,e)=>n[e],p=(t,n)=>e[n]}for(a=0,i=h.length;a<i;++a)o=h[a],f=h[a]=new Qd(o),null!=(s=d(o,a,r))&&(s+="")&&(l=f.id=s,g.set(l,g.has(l)?Ep:f)),null!=(s=p(o,a,r))&&(s+="")&&(f.parent=s);for(a=0;a<i;++a)if(s=(f=h[a]).parent){if(!(c=g.get(s)))throw new Error("missing: "+s);if(c===Ep)throw new Error("ambiguous: "+s);c.children?c.children.push(f):c.children=[f],f.parent=c}else{if(u)throw new Error("multiple roots");u=f}if(!u)throw new Error("no root");if(null!=t){for(;u.data===Np&&1===u.children.length;)u=u.children[0],--i;for(let t=h.length-1;t>=0&&(f=h[t]).data===Np;--t)f.data=null}if(u.parent=Sp,u.eachBefore((function(t){t.depth=t.parent.depth+1,--i})).eachBefore(Kd),u.parent=null,i>0)throw new Error("cycle");return u}return r.id=function(t){return arguments.length?(n=Jd(t),r):n},r.parentId=function(t){return arguments.length?(e=Jd(t),r):e},r.path=function(n){return arguments.length?(t=Jd(n),r):t},r},t.style=_n,t.subset=function(t,n){return _t(n,t)},t.sum=function(t,n){let e=0;if(void 0===n)for(let n of t)(n=+n)&&(e+=n);else{let r=-1;for(let i of t)(i=+n(i,++r,t))&&(e+=i)}return e},t.superset=_t,t.svg=Nc,t.symbol=function(t,n){let e=null,r=Nm(i);function i(){let i;if(e||(e=i=r()),t.apply(this,arguments).draw(e,+n.apply(this,arguments)),i)return e=null,i+""||null}return t="function"==typeof t?t:gm(t||cx),n="function"==typeof n?n:gm(void 0===n?64:+n),i.type=function(n){return arguments.length?(t="function"==typeof n?n:gm(n),i):t},i.size=function(t){return arguments.length?(n="function"==typeof t?t:gm(+t),i):n},i.context=function(t){return arguments.length?(e=null==t?null:t,i):e},i},t.symbolAsterisk=ux,t.symbolCircle=cx,t.symbolCross=fx,t.symbolDiamond=hx,t.symbolDiamond2=dx,t.symbolPlus=px,t.symbolSquare=gx,t.symbolSquare2=yx,t.symbolStar=mx,t.symbolTimes=Cx,t.symbolTriangle=wx,t.symbolTriangle2=Tx,t.symbolWye=kx,t.symbolX=Cx,t.symbols=Px,t.symbolsFill=Px,t.symbolsStroke=zx,t.text=mc,t.thresholdFreedmanDiaconis=function(t,n,e){const r=v(t),i=at(t,.75)-at(t,.25);return r&&i?Math.ceil((e-n)/(2*i*Math.pow(r,-1/3))):1},t.thresholdScott=function(t,n,e){const r=v(t),i=w(t);return r&&i?Math.ceil((e-n)*Math.cbrt(r)/(3.49*i)):1},t.thresholdSturges=K,t.tickFormat=Eg,t.tickIncrement=V,t.tickStep=W,t.ticks=G,t.timeDay=py,t.timeDays=gy,t.timeFormatDefaultLocale=P_,t.timeFormatLocale=hv,t.timeFriday=Sy,t.timeFridays=$y,t.timeHour=sy,t.timeHours=ly,t.timeInterval=Vg,t.timeMillisecond=Wg,t.timeMilliseconds=Zg,t.timeMinute=ay,t.timeMinutes=uy,t.timeMonday=wy,t.timeMondays=ky,t.timeMonth=Zy,t.timeMonths=Ky,t.timeSaturday=Ey,t.timeSaturdays=Dy,t.timeSecond=iy,t.timeSeconds=oy,t.timeSunday=xy,t.timeSundays=Ny,t.timeThursday=Ay,t.timeThursdays=zy,t.timeTickInterval=cv,t.timeTicks=uv,t.timeTuesday=My,t.timeTuesdays=Cy,t.timeWednesday=Ty,t.timeWednesdays=Py,t.timeWeek=xy,t.timeWeeks=Ny,t.timeYear=tv,t.timeYears=nv,t.timeout=$i,t.timer=Ni,t.timerFlush=ki,t.transition=go,t.transpose=gt,t.tree=function(){var t=$p,n=1,e=1,r=null;function i(i){var c=function(t){for(var n,e,r,i,o,a=new Up(t,0),u=[a];n=u.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),i=o-1;i>=0;--i)u.push(e=n.children[i]=new Up(r[i],i)),e.parent=n;return(a.parent=new Up(null,0)).children=[a],a}(i);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(a),r)i.eachBefore(u);else{var f=i,s=i,l=i;i.eachBefore((function(t){t.x<f.x&&(f=t),t.x>s.x&&(s=t),t.depth>l.depth&&(l=t)}));var h=f===s?1:t(f,s)/2,d=h-f.x,p=n/(s.x+h+d),g=e/(l.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*g}))}return i}function o(n){var e=n.children,r=n.parent.children,i=n.i?r[n.i-1]:null;if(e){!function(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)(n=i[o]).z+=e,n.m+=e,e+=n.s+(r+=n.c)}(n);var o=(e[0].z+e[e.length-1].z)/2;i?(n.z=i.z+t(n._,i._),n.m=n.z-o):n.z=o}else i&&(n.z=i.z+t(n._,i._));n.parent.A=function(n,e,r){if(e){for(var i,o=n,a=n,u=e,c=o.parent.children[0],f=o.m,s=a.m,l=u.m,h=c.m;u=Rp(u),o=Dp(o),u&&o;)c=Dp(c),(a=Rp(a)).a=n,(i=u.z+l-o.z-f+t(u._,o._))>0&&(Fp(qp(u,n,r),n,i),f+=i,s+=i),l+=u.m,f+=o.m,h+=c.m,s+=a.m;u&&!Rp(a)&&(a.t=u,a.m+=l-s),o&&!Dp(c)&&(c.t=o,c.m+=f-h,r=n)}return r}(n,i,n.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function u(t){t.x*=n,t.y=t.depth*e}return i.separation=function(n){return arguments.length?(t=n,i):t},i.size=function(t){return arguments.length?(r=!1,n=+t[0],e=+t[1],i):r?null:[n,e]},i.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],e=+t[1],i):r?[n,e]:null},i},t.treemap=function(){var t=Yp,n=!1,e=1,r=1,i=[0],o=np,a=np,u=np,c=np,f=np;function s(t){return t.x0=t.y0=0,t.x1=e,t.y1=r,t.eachBefore(l),i=[0],n&&t.eachBefore(Tp),t}function l(n){var e=i[n.depth],r=n.x0+e,s=n.y0+e,l=n.x1-e,h=n.y1-e;l<r&&(r=l=(r+l)/2),h<s&&(s=h=(s+h)/2),n.x0=r,n.y0=s,n.x1=l,n.y1=h,n.children&&(e=i[n.depth+1]=o(n)/2,r+=f(n)-e,s+=a(n)-e,(l-=u(n)-e)<r&&(r=l=(r+l)/2),(h-=c(n)-e)<s&&(s=h=(s+h)/2),t(n,r,s,l,h))}return s.round=function(t){return arguments.length?(n=!!t,s):n},s.size=function(t){return arguments.length?(e=+t[0],r=+t[1],s):[e,r]},s.tile=function(n){return arguments.length?(t=tp(n),s):t},s.padding=function(t){return arguments.length?s.paddingInner(t).paddingOuter(t):s.paddingInner()},s.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:ep(+t),s):o},s.paddingOuter=function(t){return arguments.length?s.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):s.paddingTop()},s.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:ep(+t),s):a},s.paddingRight=function(t){return arguments.length?(u="function"==typeof t?t:ep(+t),s):u},s.paddingBottom=function(t){return arguments.length?(c="function"==typeof t?t:ep(+t),s):c},s.paddingLeft=function(t){return arguments.length?(f="function"==typeof t?t:ep(+t),s):f},s},t.treemapBinary=function(t,n,e,r,i){var o,a,u=t.children,c=u.length,f=new Array(c+1);for(f[0]=a=o=0;o<c;++o)f[o+1]=a+=u[o].value;!function t(n,e,r,i,o,a,c){if(n>=e-1){var s=u[n];return s.x0=i,s.y0=o,s.x1=a,void(s.y1=c)}var l=f[n],h=r/2+l,d=n+1,p=e-1;for(;d<p;){var g=d+p>>>1;f[g]<h?d=g+1:p=g}h-f[d-1]<f[d]-h&&n+1<d&&--d;var y=f[d]-l,v=r-y;if(a-i>c-o){var _=r?(i*v+a*y)/r:a;t(n,d,y,i,o,_,c),t(d,e,v,_,o,a,c)}else{var b=r?(o*v+c*y)/r:c;t(n,d,y,i,o,a,b),t(d,e,v,i,b,a,c)}}(0,c,t.value,n,e,r,i)},t.treemapDice=Ap,t.treemapResquarify=Lp,t.treemapSlice=Ip,t.treemapSliceDice=function(t,n,e,r,i){(1&t.depth?Ip:Ap)(t,n,e,r,i)},t.treemapSquarify=Yp,t.tsv=Mc,t.tsvFormat=lc,t.tsvFormatBody=hc,t.tsvFormatRow=pc,t.tsvFormatRows=dc,t.tsvFormatValue=gc,t.tsvParse=fc,t.tsvParseRows=sc,t.union=function(...t){const n=new InternSet;for(const e of t)for(const t of e)n.add(t);return n},t.unixDay=_y,t.unixDays=by,t.utcDay=yy,t.utcDays=vy,t.utcFriday=By,t.utcFridays=Vy,t.utcHour=hy,t.utcHours=dy,t.utcMillisecond=Wg,t.utcMilliseconds=Zg,t.utcMinute=cy,t.utcMinutes=fy,t.utcMonday=qy,t.utcMondays=jy,t.utcMonth=Qy,t.utcMonths=Jy,t.utcSaturday=Yy,t.utcSaturdays=Wy,t.utcSecond=iy,t.utcSeconds=oy,t.utcSunday=Fy,t.utcSundays=Ly,t.utcThursday=Oy,t.utcThursdays=Gy,t.utcTickInterval=av,t.utcTicks=ov,t.utcTuesday=Uy,t.utcTuesdays=Hy,t.utcWednesday=Iy,t.utcWednesdays=Xy,t.utcWeek=Fy,t.utcWeeks=Ly,t.utcYear=ev,t.utcYears=rv,t.variance=x,t.version="7.8.5",t.window=pn,t.xml=Sc,t.zip=function(){return gt(arguments)},t.zoom=function(){var t,n,e,r=Sw,i=Ew,o=Pw,a=kw,u=Cw,c=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],s=250,l=ri,h=$t("start","zoom","end"),d=500,p=150,g=0,y=10;function v(t){t.property("__zoom",Nw).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",S).filter(u).on("touchstart.zoom",E).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(t,n){return(n=Math.max(c[0],Math.min(c[1],n)))===t.k?t:new xw(n,t.x,t.y)}function b(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new xw(t.k,r,i)}function m(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function x(t,n,e,r){t.on("start.zoom",(function(){w(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){w(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,o=arguments,a=w(t,o).event(r),u=i.apply(t,o),c=null==e?m(u):"function"==typeof e?e.apply(t,o):e,f=Math.max(u[1][0]-u[0][0],u[1][1]-u[0][1]),s=t.__zoom,h="function"==typeof n?n.apply(t,o):n,d=l(s.invert(c).concat(f/s.k),h.invert(c).concat(f/h.k));return function(t){if(1===t)t=h;else{var n=d(t),e=f/n[2];t=new xw(e,c[0]-n[0]*e,c[1]-n[1]*e)}a.zoom(null,t)}}))}function w(t,n,e){return!e&&t.__zooming||new M(t,n)}function M(t,n){this.that=t,this.args=n,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,n),this.taps=0}function T(t,...n){if(r.apply(this,arguments)){var e=w(this,n).event(t),i=this.__zoom,u=Math.max(c[0],Math.min(c[1],i.k*Math.pow(2,a.apply(this,arguments)))),s=ne(t);if(e.wheel)e.mouse[0][0]===s[0]&&e.mouse[0][1]===s[1]||(e.mouse[1]=i.invert(e.mouse[0]=s)),clearTimeout(e.wheel);else{if(i.k===u)return;e.mouse=[s,i.invert(s)],Gi(this),e.start()}Aw(t),e.wheel=setTimeout((function(){e.wheel=null,e.end()}),p),e.zoom("mouse",o(b(_(i,u),e.mouse[0],e.mouse[1]),e.extent,f))}}function A(t,...n){if(!e&&r.apply(this,arguments)){var i=t.currentTarget,a=w(this,n,!0).event(t),u=Zn(t.view).on("mousemove.zoom",(function(t){if(Aw(t),!a.moved){var n=t.clientX-s,e=t.clientY-l;a.moved=n*n+e*e>g}a.event(t).zoom("mouse",o(b(a.that.__zoom,a.mouse[0]=ne(t,i),a.mouse[1]),a.extent,f))}),!0).on("mouseup.zoom",(function(t){u.on("mousemove.zoom mouseup.zoom",null),ue(t.view,a.moved),Aw(t),a.event(t).end()}),!0),c=ne(t,i),s=t.clientX,l=t.clientY;ae(t.view),Tw(t),a.mouse=[c,this.__zoom.invert(c)],Gi(this),a.start()}}function S(t,...n){if(r.apply(this,arguments)){var e=this.__zoom,a=ne(t.changedTouches?t.changedTouches[0]:t,this),u=e.invert(a),c=e.k*(t.shiftKey?.5:2),l=o(b(_(e,c),a,u),i.apply(this,n),f);Aw(t),s>0?Zn(this).transition().duration(s).call(x,l,a,t):Zn(this).call(v.transform,l,a,t)}}function E(e,...i){if(r.apply(this,arguments)){var o,a,u,c,f=e.touches,s=f.length,l=w(this,i,e.changedTouches.length===s).event(e);for(Tw(e),a=0;a<s;++a)c=[c=ne(u=f[a],this),this.__zoom.invert(c),u.identifier],l.touch0?l.touch1||l.touch0[2]===c[2]||(l.touch1=c,l.taps=0):(l.touch0=c,o=!0,l.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(l.taps<2&&(n=c[0],t=setTimeout((function(){t=null}),d)),Gi(this),l.start())}}function N(t,...n){if(this.__zooming){var e,r,i,a,u=w(this,n).event(t),c=t.changedTouches,s=c.length;for(Aw(t),e=0;e<s;++e)i=ne(r=c[e],this),u.touch0&&u.touch0[2]===r.identifier?u.touch0[0]=i:u.touch1&&u.touch1[2]===r.identifier&&(u.touch1[0]=i);if(r=u.that.__zoom,u.touch1){var l=u.touch0[0],h=u.touch0[1],d=u.touch1[0],p=u.touch1[1],g=(g=d[0]-l[0])*g+(g=d[1]-l[1])*g,y=(y=p[0]-h[0])*y+(y=p[1]-h[1])*y;r=_(r,Math.sqrt(g/y)),i=[(l[0]+d[0])/2,(l[1]+d[1])/2],a=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!u.touch0)return;i=u.touch0[0],a=u.touch0[1]}u.zoom("touch",o(b(r,i,a),u.extent,f))}}function k(t,...r){if(this.__zooming){var i,o,a=w(this,r).event(t),u=t.changedTouches,c=u.length;for(Tw(t),e&&clearTimeout(e),e=setTimeout((function(){e=null}),d),i=0;i<c;++i)o=u[i],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=ne(o,this),Math.hypot(n[0]-o[0],n[1]-o[1])<y)){var f=Zn(this).on("dblclick.zoom");f&&f.apply(this,arguments)}}}return v.transform=function(t,n,e,r){var i=t.selection?t.selection():t;i.property("__zoom",Nw),t!==i?x(t,n,e,r):i.interrupt().each((function(){w(this,arguments).event(r).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()}))},v.scaleBy=function(t,n,e,r){v.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)}),e,r)},v.scaleTo=function(t,n,e,r){v.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,a=null==e?m(t):"function"==typeof e?e.apply(this,arguments):e,u=r.invert(a),c="function"==typeof n?n.apply(this,arguments):n;return o(b(_(r,c),a,u),t,f)}),e,r)},v.translateBy=function(t,n,e,r){v.transform(t,(function(){return o(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof e?e.apply(this,arguments):e),i.apply(this,arguments),f)}),null,r)},v.translateTo=function(t,n,e,r,a){v.transform(t,(function(){var t=i.apply(this,arguments),a=this.__zoom,u=null==r?m(t):"function"==typeof r?r.apply(this,arguments):r;return o(ww.translate(u[0],u[1]).scale(a.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof e?-e.apply(this,arguments):-e),t,f)}),r,a)},M.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var n=Zn(this.that).datum();h.call(t,this.that,new mw(t,{sourceEvent:this.sourceEvent,target:v,type:t,transform:this.that.__zoom,dispatch:h}),n)}},v.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:bw(+t),v):a},v.filter=function(t){return arguments.length?(r="function"==typeof t?t:bw(!!t),v):r},v.touchable=function(t){return arguments.length?(u="function"==typeof t?t:bw(!!t),v):u},v.extent=function(t){return arguments.length?(i="function"==typeof t?t:bw([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),v):i},v.scaleExtent=function(t){return arguments.length?(c[0]=+t[0],c[1]=+t[1],v):[c[0],c[1]]},v.translateExtent=function(t){return arguments.length?(f[0][0]=+t[0][0],f[1][0]=+t[1][0],f[0][1]=+t[0][1],f[1][1]=+t[1][1],v):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},v.constrain=function(t){return arguments.length?(o=t,v):o},v.duration=function(t){return arguments.length?(s=+t,v):s},v.interpolate=function(t){return arguments.length?(l=t,v):l},v.on=function(){var t=h.on.apply(h,arguments);return t===h?v:t},v.clickDistance=function(t){return arguments.length?(g=(t=+t)*t,v):Math.sqrt(g)},v.tapDistance=function(t){return arguments.length?(y=+t,v):y},v},t.zoomIdentity=ww,t.zoomTransform=Mw}));
// TinyColor v1.4.1
// https://github.com/bgrins/TinyColor
// 2016-07-07, Brian Grinstead, MIT License
!function(a){function b(a,d){if(a=a?a:"",d=d||{},a instanceof b)return a;if(!(this instanceof b))return new b(a,d);var e=c(a);this._originalInput=a,this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,this._roundA=P(100*this._a)/100,this._format=d.format||e.format,this._gradientType=d.gradientType,this._r<1&&(this._r=P(this._r)),this._g<1&&(this._g=P(this._g)),this._b<1&&(this._b=P(this._b)),this._ok=e.ok,this._tc_id=O++}function c(a){var b={r:0,g:0,b:0},c=1,e=null,g=null,i=null,j=!1,k=!1;return"string"==typeof a&&(a=K(a)),"object"==typeof a&&(J(a.r)&&J(a.g)&&J(a.b)?(b=d(a.r,a.g,a.b),j=!0,k="%"===String(a.r).substr(-1)?"prgb":"rgb"):J(a.h)&&J(a.s)&&J(a.v)?(e=G(a.s),g=G(a.v),b=h(a.h,e,g),j=!0,k="hsv"):J(a.h)&&J(a.s)&&J(a.l)&&(e=G(a.s),i=G(a.l),b=f(a.h,e,i),j=!0,k="hsl"),a.hasOwnProperty("a")&&(c=a.a)),c=z(c),{ok:j,format:a.format||k,r:Q(255,R(b.r,0)),g:Q(255,R(b.g,0)),b:Q(255,R(b.b,0)),a:c}}function d(a,b,c){return{r:255*A(a,255),g:255*A(b,255),b:255*A(c,255)}}function e(a,b,c){a=A(a,255),b=A(b,255),c=A(c,255);var d,e,f=R(a,b,c),g=Q(a,b,c),h=(f+g)/2;if(f==g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,l:h}}function f(a,b,c){function d(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+6*(b-a)*(2/3-c):a}var e,f,g;if(a=A(a,360),b=A(b,100),c=A(c,100),0===b)e=f=g=c;else{var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)}return{r:255*e,g:255*f,b:255*g}}function g(a,b,c){a=A(a,255),b=A(b,255),c=A(c,255);var d,e,f=R(a,b,c),g=Q(a,b,c),h=f,i=f-g;if(e=0===f?0:i/f,f==g)d=0;else{switch(f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,v:h}}function h(b,c,d){b=6*A(b,360),c=A(c,100),d=A(d,100);var e=a.floor(b),f=b-e,g=d*(1-c),h=d*(1-f*c),i=d*(1-(1-f)*c),j=e%6,k=[d,h,g,g,i,d][j],l=[i,d,d,h,g,g][j],m=[g,g,i,d,d,h][j];return{r:255*k,g:255*l,b:255*m}}function i(a,b,c,d){var e=[F(P(a).toString(16)),F(P(b).toString(16)),F(P(c).toString(16))];return d&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function j(a,b,c,d,e){var f=[F(P(a).toString(16)),F(P(b).toString(16)),F(P(c).toString(16)),F(H(d))];return e&&f[0].charAt(0)==f[0].charAt(1)&&f[1].charAt(0)==f[1].charAt(1)&&f[2].charAt(0)==f[2].charAt(1)&&f[3].charAt(0)==f[3].charAt(1)?f[0].charAt(0)+f[1].charAt(0)+f[2].charAt(0)+f[3].charAt(0):f.join("")}function k(a,b,c,d){var e=[F(H(d)),F(P(a).toString(16)),F(P(b).toString(16)),F(P(c).toString(16))];return e.join("")}function l(a,c){c=0===c?0:c||10;var d=b(a).toHsl();return d.s-=c/100,d.s=B(d.s),b(d)}function m(a,c){c=0===c?0:c||10;var d=b(a).toHsl();return d.s+=c/100,d.s=B(d.s),b(d)}function n(a){return b(a).desaturate(100)}function o(a,c){c=0===c?0:c||10;var d=b(a).toHsl();return d.l+=c/100,d.l=B(d.l),b(d)}function p(a,c){c=0===c?0:c||10;var d=b(a).toRgb();return d.r=R(0,Q(255,d.r-P(255*-(c/100)))),d.g=R(0,Q(255,d.g-P(255*-(c/100)))),d.b=R(0,Q(255,d.b-P(255*-(c/100)))),b(d)}function q(a,c){c=0===c?0:c||10;var d=b(a).toHsl();return d.l-=c/100,d.l=B(d.l),b(d)}function r(a,c){var d=b(a).toHsl(),e=(d.h+c)%360;return d.h=0>e?360+e:e,b(d)}function s(a){var c=b(a).toHsl();return c.h=(c.h+180)%360,b(c)}function t(a){var c=b(a).toHsl(),d=c.h;return[b(a),b({h:(d+120)%360,s:c.s,l:c.l}),b({h:(d+240)%360,s:c.s,l:c.l})]}function u(a){var c=b(a).toHsl(),d=c.h;return[b(a),b({h:(d+90)%360,s:c.s,l:c.l}),b({h:(d+180)%360,s:c.s,l:c.l}),b({h:(d+270)%360,s:c.s,l:c.l})]}function v(a){var c=b(a).toHsl(),d=c.h;return[b(a),b({h:(d+72)%360,s:c.s,l:c.l}),b({h:(d+216)%360,s:c.s,l:c.l})]}function w(a,c,d){c=c||6,d=d||30;var e=b(a).toHsl(),f=360/d,g=[b(a)];for(e.h=(e.h-(f*c>>1)+720)%360;--c;)e.h=(e.h+f)%360,g.push(b(e));return g}function x(a,c){c=c||6;for(var d=b(a).toHsv(),e=d.h,f=d.s,g=d.v,h=[],i=1/c;c--;)h.push(b({h:e,s:f,v:g})),g=(g+i)%1;return h}function y(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}function z(a){return a=parseFloat(a),(isNaN(a)||0>a||a>1)&&(a=1),a}function A(b,c){D(b)&&(b="100%");var d=E(b);return b=Q(c,R(0,parseFloat(b))),d&&(b=parseInt(b*c,10)/100),a.abs(b-c)<1e-6?1:b%c/parseFloat(c)}function B(a){return Q(1,R(0,a))}function C(a){return parseInt(a,16)}function D(a){return"string"==typeof a&&-1!=a.indexOf(".")&&1===parseFloat(a)}function E(a){return"string"==typeof a&&-1!=a.indexOf("%")}function F(a){return 1==a.length?"0"+a:""+a}function G(a){return 1>=a&&(a=100*a+"%"),a}function H(b){return a.round(255*parseFloat(b)).toString(16)}function I(a){return C(a)/255}function J(a){return!!V.CSS_UNIT.exec(a)}function K(a){a=a.replace(M,"").replace(N,"").toLowerCase();var b=!1;if(T[a])a=T[a],b=!0;else if("transparent"==a)return{r:0,g:0,b:0,a:0,format:"name"};var c;return(c=V.rgb.exec(a))?{r:c[1],g:c[2],b:c[3]}:(c=V.rgba.exec(a))?{r:c[1],g:c[2],b:c[3],a:c[4]}:(c=V.hsl.exec(a))?{h:c[1],s:c[2],l:c[3]}:(c=V.hsla.exec(a))?{h:c[1],s:c[2],l:c[3],a:c[4]}:(c=V.hsv.exec(a))?{h:c[1],s:c[2],v:c[3]}:(c=V.hsva.exec(a))?{h:c[1],s:c[2],v:c[3],a:c[4]}:(c=V.hex8.exec(a))?{r:C(c[1]),g:C(c[2]),b:C(c[3]),a:I(c[4]),format:b?"name":"hex8"}:(c=V.hex6.exec(a))?{r:C(c[1]),g:C(c[2]),b:C(c[3]),format:b?"name":"hex"}:(c=V.hex4.exec(a))?{r:C(c[1]+""+c[1]),g:C(c[2]+""+c[2]),b:C(c[3]+""+c[3]),a:I(c[4]+""+c[4]),format:b?"name":"hex8"}:(c=V.hex3.exec(a))?{r:C(c[1]+""+c[1]),g:C(c[2]+""+c[2]),b:C(c[3]+""+c[3]),format:b?"name":"hex"}:!1}function L(a){var b,c;return a=a||{level:"AA",size:"small"},b=(a.level||"AA").toUpperCase(),c=(a.size||"small").toLowerCase(),"AA"!==b&&"AAA"!==b&&(b="AA"),"small"!==c&&"large"!==c&&(c="small"),{level:b,size:c}}var M=/^\s+/,N=/\s+$/,O=0,P=a.round,Q=a.min,R=a.max,S=a.random;b.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var a=this.toRgb();return(299*a.r+587*a.g+114*a.b)/1e3},getLuminance:function(){var b,c,d,e,f,g,h=this.toRgb();return b=h.r/255,c=h.g/255,d=h.b/255,e=.03928>=b?b/12.92:a.pow((b+.055)/1.055,2.4),f=.03928>=c?c/12.92:a.pow((c+.055)/1.055,2.4),g=.03928>=d?d/12.92:a.pow((d+.055)/1.055,2.4),.2126*e+.7152*f+.0722*g},setAlpha:function(a){return this._a=z(a),this._roundA=P(100*this._a)/100,this},toHsv:function(){var a=g(this._r,this._g,this._b);return{h:360*a.h,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=g(this._r,this._g,this._b),b=P(360*a.h),c=P(100*a.s),d=P(100*a.v);return 1==this._a?"hsv("+b+", "+c+"%, "+d+"%)":"hsva("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHsl:function(){var a=e(this._r,this._g,this._b);return{h:360*a.h,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=e(this._r,this._g,this._b),b=P(360*a.h),c=P(100*a.s),d=P(100*a.l);return 1==this._a?"hsl("+b+", "+c+"%, "+d+"%)":"hsla("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHex:function(a){return i(this._r,this._g,this._b,a)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(a){return j(this._r,this._g,this._b,this._a,a)},toHex8String:function(a){return"#"+this.toHex8(a)},toRgb:function(){return{r:P(this._r),g:P(this._g),b:P(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+P(this._r)+", "+P(this._g)+", "+P(this._b)+")":"rgba("+P(this._r)+", "+P(this._g)+", "+P(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:P(100*A(this._r,255))+"%",g:P(100*A(this._g,255))+"%",b:P(100*A(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+P(100*A(this._r,255))+"%, "+P(100*A(this._g,255))+"%, "+P(100*A(this._b,255))+"%)":"rgba("+P(100*A(this._r,255))+"%, "+P(100*A(this._g,255))+"%, "+P(100*A(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:U[i(this._r,this._g,this._b,!0)]||!1},toFilter:function(a){var c="#"+k(this._r,this._g,this._b,this._a),d=c,e=this._gradientType?"GradientType = 1, ":"";if(a){var f=b(a);d="#"+k(f._r,f._g,f._b,f._a)}return"progid:DXImageTransform.Microsoft.gradient("+e+"startColorstr="+c+",endColorstr="+d+")"},toString:function(a){var b=!!a;a=a||this._format;var c=!1,d=this._a<1&&this._a>=0,e=!b&&d&&("hex"===a||"hex6"===a||"hex3"===a||"hex4"===a||"hex8"===a||"name"===a);return e?"name"===a&&0===this._a?this.toName():this.toRgbString():("rgb"===a&&(c=this.toRgbString()),"prgb"===a&&(c=this.toPercentageRgbString()),("hex"===a||"hex6"===a)&&(c=this.toHexString()),"hex3"===a&&(c=this.toHexString(!0)),"hex4"===a&&(c=this.toHex8String(!0)),"hex8"===a&&(c=this.toHex8String()),"name"===a&&(c=this.toName()),"hsl"===a&&(c=this.toHslString()),"hsv"===a&&(c=this.toHsvString()),c||this.toHexString())},clone:function(){return b(this.toString())},_applyModification:function(a,b){var c=a.apply(null,[this].concat([].slice.call(b)));return this._r=c._r,this._g=c._g,this._b=c._b,this.setAlpha(c._a),this},lighten:function(){return this._applyModification(o,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(q,arguments)},desaturate:function(){return this._applyModification(l,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(n,arguments)},spin:function(){return this._applyModification(r,arguments)},_applyCombination:function(a,b){return a.apply(null,[this].concat([].slice.call(b)))},analogous:function(){return this._applyCombination(w,arguments)},complement:function(){return this._applyCombination(s,arguments)},monochromatic:function(){return this._applyCombination(x,arguments)},splitcomplement:function(){return this._applyCombination(v,arguments)},triad:function(){return this._applyCombination(t,arguments)},tetrad:function(){return this._applyCombination(u,arguments)}},b.fromRatio=function(a,c){if("object"==typeof a){var d={};for(var e in a)a.hasOwnProperty(e)&&(d[e]="a"===e?a[e]:G(a[e]));a=d}return b(a,c)},b.equals=function(a,c){return a&&c?b(a).toRgbString()==b(c).toRgbString():!1},b.random=function(){return b.fromRatio({r:S(),g:S(),b:S()})},b.mix=function(a,c,d){d=0===d?0:d||50;var e=b(a).toRgb(),f=b(c).toRgb(),g=d/100,h={r:(f.r-e.r)*g+e.r,g:(f.g-e.g)*g+e.g,b:(f.b-e.b)*g+e.b,a:(f.a-e.a)*g+e.a};return b(h)},b.readability=function(c,d){var e=b(c),f=b(d);return(a.max(e.getLuminance(),f.getLuminance())+.05)/(a.min(e.getLuminance(),f.getLuminance())+.05)},b.isReadable=function(a,c,d){var e,f,g=b.readability(a,c);switch(f=!1,e=L(d),e.level+e.size){case"AAsmall":case"AAAlarge":f=g>=4.5;break;case"AAlarge":f=g>=3;break;case"AAAsmall":f=g>=7}return f},b.mostReadable=function(a,c,d){var e,f,g,h,i=null,j=0;d=d||{},f=d.includeFallbackColors,g=d.level,h=d.size;for(var k=0;k<c.length;k++)e=b.readability(a,c[k]),e>j&&(j=e,i=b(c[k]));return b.isReadable(a,i,{level:g,size:h})||!f?i:(d.includeFallbackColors=!1,b.mostReadable(a,["#fff","#000"],d))};var T=b.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},U=b.hexNames=y(T),V=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{CSS_UNIT:new RegExp(c),rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+e),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+e),hsv:new RegExp("hsv"+d),hsva:new RegExp("hsva"+e),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof module&&module.exports?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):window.tinycolor=b}(Math);
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var H;function f(){return H.apply(null,arguments)}function a(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function F(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function L(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;for(var t in e)if(c(e,t))return;return 1}function o(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function V(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function G(e,t){for(var n=[],s=e.length,i=0;i<s;++i)n.push(t(e[i],i));return n}function E(e,t){for(var n in t)c(t,n)&&(e[n]=t[n]);return c(t,"toString")&&(e.toString=t.toString),c(t,"valueOf")&&(e.valueOf=t.valueOf),e}function l(e,t,n,s){return Pt(e,t,n,s,!0).utc()}function m(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function A(e){if(null==e._isValid){var t=m(e),n=j.call(t.parsedDateParts,function(e){return null!=e}),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function I(e){var t=l(NaN);return null!=e?E(m(t),e):m(t).userInvalidated=!0,t}var j=Array.prototype.some||function(e){for(var t=Object(this),n=t.length>>>0,s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1},Z=f.momentProperties=[],z=!1;function $(e,t){var n,s,i,r=Z.length;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=m(t)),o(t._locale)||(e._locale=t._locale),0<r)for(n=0;n<r;n++)o(i=t[s=Z[n]])||(e[s]=i);return e}function q(e){$(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===z&&(z=!0,f.updateOffset(this),z=!1)}function h(e){return e instanceof q||null!=e&&null!=e._isAMomentObject}function B(e){!1===f.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function e(r,a){var o=!0;return E(function(){if(null!=f.deprecationHandler&&f.deprecationHandler(null,r),o){for(var e,t,n=[],s=arguments.length,i=0;i<s;i++){if(e="","object"==typeof arguments[i]){for(t in e+="\n["+i+"] ",arguments[0])c(arguments[0],t)&&(e+=t+": "+arguments[0][t]+", ");e=e.slice(0,-2)}else e=arguments[i];n.push(e)}B(r+"\nArguments: "+Array.prototype.slice.call(n).join("")+"\n"+(new Error).stack),o=!1}return a.apply(this,arguments)},a)}var J={};function Q(e,t){null!=f.deprecationHandler&&f.deprecationHandler(e,t),J[e]||(B(t),J[e]=!0)}function d(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function X(e,t){var n,s=E({},e);for(n in t)c(t,n)&&(F(e[n])&&F(t[n])?(s[n]={},E(s[n],e[n]),E(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)c(e,n)&&!c(t,n)&&F(e[n])&&(s[n]=E({},s[n]));return s}function K(e){null!=e&&this.set(e)}f.suppressDeprecationWarnings=!1,f.deprecationHandler=null;var ee=Object.keys||function(e){var t,n=[];for(t in e)c(e,t)&&n.push(t);return n};function r(e,t,n){var s=""+Math.abs(e);return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,t-s.length)).toString().substr(1)+s}var te=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ne=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,se={},ie={};function s(e,t,n,s){var i="string"==typeof s?function(){return this[s]()}:s;e&&(ie[e]=i),t&&(ie[t[0]]=function(){return r(i.apply(this,arguments),t[1],t[2])}),n&&(ie[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function re(e,t){return e.isValid()?(t=ae(t,e.localeData()),se[t]=se[t]||function(s){for(var e,i=s.match(te),t=0,r=i.length;t<r;t++)ie[i[t]]?i[t]=ie[i[t]]:i[t]=(e=i[t]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){for(var t="",n=0;n<r;n++)t+=d(i[n])?i[n].call(e,s):i[n];return t}}(t),se[t](e)):e.localeData().invalidDate()}function ae(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(ne.lastIndex=0;0<=n&&ne.test(e);)e=e.replace(ne,s),ne.lastIndex=0,--n;return e}var oe={};function t(e,t){var n=e.toLowerCase();oe[n]=oe[n+"s"]=oe[t]=e}function _(e){return"string"==typeof e?oe[e]||oe[e.toLowerCase()]:void 0}function ue(e){var t,n,s={};for(n in e)c(e,n)&&(t=_(n))&&(s[t]=e[n]);return s}var le={};function n(e,t){le[e]=t}function he(e){return e%4==0&&e%100!=0||e%400==0}function y(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function g(e){var e=+e,t=0;return t=0!=e&&isFinite(e)?y(e):t}function de(t,n){return function(e){return null!=e?(fe(this,t,e),f.updateOffset(this,n),this):ce(this,t)}}function ce(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function fe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&he(e.year())&&1===e.month()&&29===e.date()?(n=g(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),We(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var i=/\d/,w=/\d\d/,me=/\d{3}/,_e=/\d{4}/,ye=/[+-]?\d{6}/,p=/\d\d?/,ge=/\d\d\d\d?/,we=/\d\d\d\d\d\d?/,pe=/\d{1,3}/,ke=/\d{1,4}/,ve=/[+-]?\d{1,6}/,Me=/\d+/,De=/[+-]?\d+/,Se=/Z|[+-]\d\d:?\d\d/gi,Ye=/Z|[+-]\d\d(?::?\d\d)?/gi,k=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function v(e,n,s){be[e]=d(n)?n:function(e,t){return e&&s?s:n}}function Oe(e,t){return c(be,e)?be[e](t._strict,t._locale):new RegExp(M(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,i){return t||n||s||i})))}function M(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var be={},xe={};function D(e,n){var t,s,i=n;for("string"==typeof e&&(e=[e]),u(n)&&(i=function(e,t){t[n]=g(e)}),s=e.length,t=0;t<s;t++)xe[e[t]]=i}function Te(e,i){D(e,function(e,t,n,s){n._w=n._w||{},i(e,n._w,n,s)})}var S,Y=0,O=1,b=2,x=3,T=4,N=5,Ne=6,Pe=7,Re=8;function We(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=(t%(n=12)+n)%n;return e+=(t-n)/12,1==n?he(e)?29:28:31-n%7%2}S=Array.prototype.indexOf||function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1},s("M",["MM",2],"Mo",function(){return this.month()+1}),s("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),s("MMMM",0,0,function(e){return this.localeData().months(this,e)}),t("month","M"),n("month",8),v("M",p),v("MM",p,w),v("MMM",function(e,t){return t.monthsShortRegex(e)}),v("MMMM",function(e,t){return t.monthsRegex(e)}),D(["M","MM"],function(e,t){t[O]=g(e)-1}),D(["MMM","MMMM"],function(e,t,n,s){s=n._locale.monthsParse(e,s,n._strict);null!=s?t[O]=s:m(n).invalidMonth=e});var Ce="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ue="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),He=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Fe=k,Le=k;function Ve(e,t){var n;if(e.isValid()){if("string"==typeof t)if(/^\d+$/.test(t))t=g(t);else if(!u(t=e.localeData().monthsParse(t)))return;n=Math.min(e.date(),We(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n)}}function Ge(e){return null!=e?(Ve(this,e),f.updateOffset(this,!0),this):ce(this,"Month")}function Ee(){function e(e,t){return t.length-e.length}for(var t,n=[],s=[],i=[],r=0;r<12;r++)t=l([2e3,r]),n.push(this.monthsShort(t,"")),s.push(this.months(t,"")),i.push(this.months(t,"")),i.push(this.monthsShort(t,""));for(n.sort(e),s.sort(e),i.sort(e),r=0;r<12;r++)n[r]=M(n[r]),s[r]=M(s[r]);for(r=0;r<24;r++)i[r]=M(i[r]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Ae(e){return he(e)?366:365}s("Y",0,0,function(){var e=this.year();return e<=9999?r(e,4):"+"+e}),s(0,["YY",2],0,function(){return this.year()%100}),s(0,["YYYY",4],0,"year"),s(0,["YYYYY",5],0,"year"),s(0,["YYYYYY",6,!0],0,"year"),t("year","y"),n("year",1),v("Y",De),v("YY",p,w),v("YYYY",ke,_e),v("YYYYY",ve,ye),v("YYYYYY",ve,ye),D(["YYYYY","YYYYYY"],Y),D("YYYY",function(e,t){t[Y]=2===e.length?f.parseTwoDigitYear(e):g(e)}),D("YY",function(e,t){t[Y]=f.parseTwoDigitYear(e)}),D("Y",function(e,t){t[Y]=parseInt(e,10)}),f.parseTwoDigitYear=function(e){return g(e)+(68<g(e)?1900:2e3)};var Ie=de("FullYear",!0);function je(e,t,n,s,i,r,a){var o;return e<100&&0<=e?(o=new Date(e+400,t,n,s,i,r,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,i,r,a),o}function Ze(e){var t;return e<100&&0<=e?((t=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,t)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function ze(e,t,n){n=7+t-n;return n-(7+Ze(e,0,n).getUTCDay()-t)%7-1}function $e(e,t,n,s,i){var r,t=1+7*(t-1)+(7+n-s)%7+ze(e,s,i),n=t<=0?Ae(r=e-1)+t:t>Ae(e)?(r=e+1,t-Ae(e)):(r=e,t);return{year:r,dayOfYear:n}}function qe(e,t,n){var s,i,r=ze(e.year(),t,n),r=Math.floor((e.dayOfYear()-r-1)/7)+1;return r<1?s=r+P(i=e.year()-1,t,n):r>P(e.year(),t,n)?(s=r-P(e.year(),t,n),i=e.year()+1):(i=e.year(),s=r),{week:s,year:i}}function P(e,t,n){var s=ze(e,t,n),t=ze(e+1,t,n);return(Ae(e)-s+t)/7}s("w",["ww",2],"wo","week"),s("W",["WW",2],"Wo","isoWeek"),t("week","w"),t("isoWeek","W"),n("week",5),n("isoWeek",5),v("w",p),v("ww",p,w),v("W",p),v("WW",p,w),Te(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=g(e)});function Be(e,t){return e.slice(t,7).concat(e.slice(0,t))}s("d",0,"do","day"),s("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),s("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),s("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),s("e",0,0,"weekday"),s("E",0,0,"isoWeekday"),t("day","d"),t("weekday","e"),t("isoWeekday","E"),n("day",11),n("weekday",11),n("isoWeekday",11),v("d",p),v("e",p),v("E",p),v("dd",function(e,t){return t.weekdaysMinRegex(e)}),v("ddd",function(e,t){return t.weekdaysShortRegex(e)}),v("dddd",function(e,t){return t.weekdaysRegex(e)}),Te(["dd","ddd","dddd"],function(e,t,n,s){s=n._locale.weekdaysParse(e,s,n._strict);null!=s?t.d=s:m(n).invalidWeekday=e}),Te(["d","e","E"],function(e,t,n,s){t[s]=g(e)});var Je="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Qe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Xe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ke=k,et=k,tt=k;function nt(){function e(e,t){return t.length-e.length}for(var t,n,s,i=[],r=[],a=[],o=[],u=0;u<7;u++)s=l([2e3,1]).day(u),t=M(this.weekdaysMin(s,"")),n=M(this.weekdaysShort(s,"")),s=M(this.weekdays(s,"")),i.push(t),r.push(n),a.push(s),o.push(t),o.push(n),o.push(s);i.sort(e),r.sort(e),a.sort(e),o.sort(e),this._weekdaysRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function st(){return this.hours()%12||12}function it(e,t){s(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function rt(e,t){return t._meridiemParse}s("H",["HH",2],0,"hour"),s("h",["hh",2],0,st),s("k",["kk",2],0,function(){return this.hours()||24}),s("hmm",0,0,function(){return""+st.apply(this)+r(this.minutes(),2)}),s("hmmss",0,0,function(){return""+st.apply(this)+r(this.minutes(),2)+r(this.seconds(),2)}),s("Hmm",0,0,function(){return""+this.hours()+r(this.minutes(),2)}),s("Hmmss",0,0,function(){return""+this.hours()+r(this.minutes(),2)+r(this.seconds(),2)}),it("a",!0),it("A",!1),t("hour","h"),n("hour",13),v("a",rt),v("A",rt),v("H",p),v("h",p),v("k",p),v("HH",p,w),v("hh",p,w),v("kk",p,w),v("hmm",ge),v("hmmss",we),v("Hmm",ge),v("Hmmss",we),D(["H","HH"],x),D(["k","kk"],function(e,t,n){e=g(e);t[x]=24===e?0:e}),D(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),D(["h","hh"],function(e,t,n){t[x]=g(e),m(n).bigHour=!0}),D("hmm",function(e,t,n){var s=e.length-2;t[x]=g(e.substr(0,s)),t[T]=g(e.substr(s)),m(n).bigHour=!0}),D("hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[x]=g(e.substr(0,s)),t[T]=g(e.substr(s,2)),t[N]=g(e.substr(i)),m(n).bigHour=!0}),D("Hmm",function(e,t,n){var s=e.length-2;t[x]=g(e.substr(0,s)),t[T]=g(e.substr(s))}),D("Hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[x]=g(e.substr(0,s)),t[T]=g(e.substr(s,2)),t[N]=g(e.substr(i))});k=de("Hours",!0);var at,ot={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ce,monthsShort:Ue,week:{dow:0,doy:6},weekdays:Je,weekdaysMin:Xe,weekdaysShort:Qe,meridiemParse:/[ap]\.?m?\.?/i},R={},ut={};function lt(e){return e&&e.toLowerCase().replace("_","-")}function ht(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=lt(e[r]).split("-")).length,n=(n=lt(e[r+1]))?n.split("-"):null;0<t;){if(s=dt(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&function(e,t){for(var n=Math.min(e.length,t.length),s=0;s<n;s+=1)if(e[s]!==t[s])return s;return n}(i,n)>=t-1)break;t--}r++}return at}function dt(t){var e;if(void 0===R[t]&&"undefined"!=typeof module&&module&&module.exports&&null!=t.match("^[^/\\\\]*$"))try{e=at._abbr,require("./locale/"+t),ct(e)}catch(e){R[t]=null}return R[t]}function ct(e,t){return e&&((t=o(t)?mt(e):ft(e,t))?at=t:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),at._abbr}function ft(e,t){if(null===t)return delete R[e],null;var n,s=ot;if(t.abbr=e,null!=R[e])Q("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=R[e]._config;else if(null!=t.parentLocale)if(null!=R[t.parentLocale])s=R[t.parentLocale]._config;else{if(null==(n=dt(t.parentLocale)))return ut[t.parentLocale]||(ut[t.parentLocale]=[]),ut[t.parentLocale].push({name:e,config:t}),null;s=n._config}return R[e]=new K(X(s,t)),ut[e]&&ut[e].forEach(function(e){ft(e.name,e.config)}),ct(e),R[e]}function mt(e){var t;if(!(e=e&&e._locale&&e._locale._abbr?e._locale._abbr:e))return at;if(!a(e)){if(t=dt(e))return t;e=[e]}return ht(e)}function _t(e){var t=e._a;return t&&-2===m(e).overflow&&(t=t[O]<0||11<t[O]?O:t[b]<1||t[b]>We(t[Y],t[O])?b:t[x]<0||24<t[x]||24===t[x]&&(0!==t[T]||0!==t[N]||0!==t[Ne])?x:t[T]<0||59<t[T]?T:t[N]<0||59<t[N]?N:t[Ne]<0||999<t[Ne]?Ne:-1,m(e)._overflowDayOfYear&&(t<Y||b<t)&&(t=b),m(e)._overflowWeeks&&-1===t&&(t=Pe),m(e)._overflowWeekday&&-1===t&&(t=Re),m(e).overflow=t),e}var yt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wt=/Z|[+-]\d\d(?::?\d\d)?/,pt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],kt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],vt=/^\/?Date\((-?\d+)/i,Mt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Dt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function St(e){var t,n,s,i,r,a,o=e._i,u=yt.exec(o)||gt.exec(o),o=pt.length,l=kt.length;if(u){for(m(e).iso=!0,t=0,n=o;t<n;t++)if(pt[t][1].exec(u[1])){i=pt[t][0],s=!1!==pt[t][2];break}if(null==i)e._isValid=!1;else{if(u[3]){for(t=0,n=l;t<n;t++)if(kt[t][1].exec(u[3])){r=(u[2]||" ")+kt[t][0];break}if(null==r)return void(e._isValid=!1)}if(s||null==r){if(u[4]){if(!wt.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(r||"")+(a||""),Tt(e)}else e._isValid=!1}}else e._isValid=!1}function Yt(e,t,n,s,i,r){e=[function(e){e=parseInt(e,10);{if(e<=49)return 2e3+e;if(e<=999)return 1900+e}return e}(e),Ue.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&e.push(parseInt(r,10)),e}function Ot(e){var t,n,s,i,r=Mt.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));r?(t=Yt(r[4],r[3],r[2],r[5],r[6],r[7]),n=r[1],s=t,i=e,n&&Qe.indexOf(n)!==new Date(s[0],s[1],s[2]).getDay()?(m(i).weekdayMismatch=!0,i._isValid=!1):(e._a=t,e._tzm=(n=r[8],s=r[9],i=r[10],n?Dt[n]:s?0:60*(((n=parseInt(i,10))-(s=n%100))/100)+s),e._d=Ze.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0)):e._isValid=!1}function bt(e,t,n){return null!=e?e:null!=t?t:n}function xt(e){var t,n,s,i,r,a,o,u,l,h,d,c=[];if(!e._d){for(s=e,i=new Date(f.now()),n=s._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()],e._w&&null==e._a[b]&&null==e._a[O]&&(null!=(i=(s=e)._w).GG||null!=i.W||null!=i.E?(u=1,l=4,r=bt(i.GG,s._a[Y],qe(W(),1,4).year),a=bt(i.W,1),((o=bt(i.E,1))<1||7<o)&&(h=!0)):(u=s._locale._week.dow,l=s._locale._week.doy,d=qe(W(),u,l),r=bt(i.gg,s._a[Y],d.year),a=bt(i.w,d.week),null!=i.d?((o=i.d)<0||6<o)&&(h=!0):null!=i.e?(o=i.e+u,(i.e<0||6<i.e)&&(h=!0)):o=u),a<1||a>P(r,u,l)?m(s)._overflowWeeks=!0:null!=h?m(s)._overflowWeekday=!0:(d=$e(r,a,o,u,l),s._a[Y]=d.year,s._dayOfYear=d.dayOfYear)),null!=e._dayOfYear&&(i=bt(e._a[Y],n[Y]),(e._dayOfYear>Ae(i)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),h=Ze(i,0,e._dayOfYear),e._a[O]=h.getUTCMonth(),e._a[b]=h.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=c[t]=n[t];for(;t<7;t++)e._a[t]=c[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[x]&&0===e._a[T]&&0===e._a[N]&&0===e._a[Ne]&&(e._nextDay=!0,e._a[x]=0),e._d=(e._useUTC?Ze:je).apply(null,c),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[x]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(m(e).weekdayMismatch=!0)}}function Tt(e){if(e._f===f.ISO_8601)St(e);else if(e._f===f.RFC_2822)Ot(e);else{e._a=[],m(e).empty=!0;for(var t,n,s,i,r,a=""+e._i,o=a.length,u=0,l=ae(e._f,e._locale).match(te)||[],h=l.length,d=0;d<h;d++)n=l[d],(t=(a.match(Oe(n,e))||[])[0])&&(0<(s=a.substr(0,a.indexOf(t))).length&&m(e).unusedInput.push(s),a=a.slice(a.indexOf(t)+t.length),u+=t.length),ie[n]?(t?m(e).empty=!1:m(e).unusedTokens.push(n),s=n,r=e,null!=(i=t)&&c(xe,s)&&xe[s](i,r._a,r,s)):e._strict&&!t&&m(e).unusedTokens.push(n);m(e).charsLeftOver=o-u,0<a.length&&m(e).unusedInput.push(a),e._a[x]<=12&&!0===m(e).bigHour&&0<e._a[x]&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[x]=function(e,t,n){if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((e=e.isPM(n))&&t<12&&(t+=12),t=e||12!==t?t:0):t}(e._locale,e._a[x],e._meridiem),null!==(o=m(e).era)&&(e._a[Y]=e._locale.erasConvertYear(o,e._a[Y])),xt(e),_t(e)}}function Nt(e){var t,n,s,i=e._i,r=e._f;if(e._locale=e._locale||mt(e._l),null===i||void 0===r&&""===i)return I({nullInput:!0});if("string"==typeof i&&(e._i=i=e._locale.preparse(i)),h(i))return new q(_t(i));if(V(i))e._d=i;else if(a(r))!function(e){var t,n,s,i,r,a,o=!1,u=e._f.length;if(0===u)return m(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<u;i++)r=0,a=!1,t=$({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Tt(t),A(t)&&(a=!0),r=(r+=m(t).charsLeftOver)+10*m(t).unusedTokens.length,m(t).score=r,o?r<s&&(s=r,n=t):(null==s||r<s||a)&&(s=r,n=t,a&&(o=!0));E(e,n||t)}(e);else if(r)Tt(e);else if(o(r=(i=e)._i))i._d=new Date(f.now());else V(r)?i._d=new Date(r.valueOf()):"string"==typeof r?(n=i,null!==(t=vt.exec(n._i))?n._d=new Date(+t[1]):(St(n),!1===n._isValid&&(delete n._isValid,Ot(n),!1===n._isValid&&(delete n._isValid,n._strict?n._isValid=!1:f.createFromInputFallback(n))))):a(r)?(i._a=G(r.slice(0),function(e){return parseInt(e,10)}),xt(i)):F(r)?(t=i)._d||(s=void 0===(n=ue(t._i)).day?n.date:n.day,t._a=G([n.year,n.month,s,n.hour,n.minute,n.second,n.millisecond],function(e){return e&&parseInt(e,10)}),xt(t)):u(r)?i._d=new Date(r):f.createFromInputFallback(i);return A(e)||(e._d=null),e}function Pt(e,t,n,s,i){var r={};return!0!==t&&!1!==t||(s=t,t=void 0),!0!==n&&!1!==n||(s=n,n=void 0),(F(e)&&L(e)||a(e)&&0===e.length)&&(e=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=i,r._l=n,r._i=e,r._f=t,r._strict=s,(i=new q(_t(Nt(i=r))))._nextDay&&(i.add(1,"d"),i._nextDay=void 0),i}function W(e,t,n,s){return Pt(e,t,n,s,!1)}f.createFromInputFallback=e("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),f.ISO_8601=function(){},f.RFC_2822=function(){};ge=e("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=W.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:I()}),we=e("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=W.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:I()});function Rt(e,t){var n,s;if(!(t=1===t.length&&a(t[0])?t[0]:t).length)return W();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}var Wt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ct(e){var e=ue(e),t=e.year||0,n=e.quarter||0,s=e.month||0,i=e.week||e.isoWeek||0,r=e.day||0,a=e.hour||0,o=e.minute||0,u=e.second||0,l=e.millisecond||0;this._isValid=function(e){var t,n,s=!1,i=Wt.length;for(t in e)if(c(e,t)&&(-1===S.call(Wt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[Wt[n]]){if(s)return!1;parseFloat(e[Wt[n]])!==g(e[Wt[n]])&&(s=!0)}return!0}(e),this._milliseconds=+l+1e3*u+6e4*o+1e3*a*60*60,this._days=+r+7*i,this._months=+s+3*n+12*t,this._data={},this._locale=mt(),this._bubble()}function Ut(e){return e instanceof Ct}function Ht(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ft(e,n){s(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+r(~~(e/60),2)+n+r(~~e%60,2)})}Ft("Z",":"),Ft("ZZ",""),v("Z",Ye),v("ZZ",Ye),D(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Vt(Ye,e)});var Lt=/([\+\-]|\d\d)/gi;function Vt(e,t){var t=(t||"").match(e);return null===t?null:0===(t=60*(e=((t[t.length-1]||[])+"").match(Lt)||["-",0,0])[1]+g(e[2]))?0:"+"===e[0]?t:-t}function Gt(e,t){var n;return t._isUTC?(t=t.clone(),n=(h(e)||V(e)?e:W(e)).valueOf()-t.valueOf(),t._d.setTime(t._d.valueOf()+n),f.updateOffset(t,!1),t):W(e).local()}function Et(e){return-Math.round(e._d.getTimezoneOffset())}function At(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}f.updateOffset=function(){};var It=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,jt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function C(e,t){var n,s=e,i=null;return Ut(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(i=It.exec(e))?(n="-"===i[1]?-1:1,s={y:0,d:g(i[b])*n,h:g(i[x])*n,m:g(i[T])*n,s:g(i[N])*n,ms:g(Ht(1e3*i[Ne]))*n}):(i=jt.exec(e))?(n="-"===i[1]?-1:1,s={y:Zt(i[2],n),M:Zt(i[3],n),w:Zt(i[4],n),d:Zt(i[5],n),h:Zt(i[6],n),m:Zt(i[7],n),s:Zt(i[8],n)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(t=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Gt(t,e),e.isBefore(t)?n=zt(e,t):((n=zt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(W(s.from),W(s.to)),(s={}).ms=t.milliseconds,s.M=t.months),i=new Ct(s),Ut(e)&&c(e,"_locale")&&(i._locale=e._locale),Ut(e)&&c(e,"_isValid")&&(i._isValid=e._isValid),i}function Zt(e,t){e=e&&parseFloat(e.replace(",","."));return(isNaN(e)?0:e)*t}function zt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function $t(s,i){return function(e,t){var n;return null===t||isNaN(+t)||(Q(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=e,e=t,t=n),qt(this,C(e,t),s),this}}function qt(e,t,n,s){var i=t._milliseconds,r=Ht(t._days),t=Ht(t._months);e.isValid()&&(s=null==s||s,t&&Ve(e,ce(e,"Month")+t*n),r&&fe(e,"Date",ce(e,"Date")+r*n),i&&e._d.setTime(e._d.valueOf()+i*n),s&&f.updateOffset(e,r||t))}C.fn=Ct.prototype,C.invalid=function(){return C(NaN)};Ce=$t(1,"add"),Je=$t(-1,"subtract");function Bt(e){return"string"==typeof e||e instanceof String}function Jt(e){return h(e)||V(e)||Bt(e)||u(e)||function(t){var e=a(t),n=!1;e&&(n=0===t.filter(function(e){return!u(e)&&Bt(t)}).length);return e&&n}(e)||function(e){var t,n,s=F(e)&&!L(e),i=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a=r.length;for(t=0;t<a;t+=1)n=r[t],i=i||c(e,n);return s&&i}(e)||null==e}function Qt(e,t){if(e.date()<t.date())return-Qt(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months"),t=t-s<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(1+n,"months")-s);return-(n+t)||0}function Xt(e){return void 0===e?this._locale._abbr:(null!=(e=mt(e))&&(this._locale=e),this)}f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",f.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";Xe=e("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Kt(){return this._locale}var en=126227808e5;function tn(e,t){return(e%t+t)%t}function nn(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-en:new Date(e,t,n).valueOf()}function sn(e,t,n){return e<100&&0<=e?Date.UTC(e+400,t,n)-en:Date.UTC(e,t,n)}function rn(e,t){return t.erasAbbrRegex(e)}function an(){for(var e=[],t=[],n=[],s=[],i=this.eras(),r=0,a=i.length;r<a;++r)t.push(M(i[r].name)),e.push(M(i[r].abbr)),n.push(M(i[r].narrow)),s.push(M(i[r].name)),s.push(M(i[r].abbr)),s.push(M(i[r].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function on(e,t){s(0,[e,e.length],0,t)}function un(e,t,n,s,i){var r;return null==e?qe(this,s,i).year:(r=P(e,s,i),function(e,t,n,s,i){e=$e(e,t,n,s,i),t=Ze(e.year,0,e.dayOfYear);return this.year(t.getUTCFullYear()),this.month(t.getUTCMonth()),this.date(t.getUTCDate()),this}.call(this,e,t=r<t?r:t,n,s,i))}s("N",0,0,"eraAbbr"),s("NN",0,0,"eraAbbr"),s("NNN",0,0,"eraAbbr"),s("NNNN",0,0,"eraName"),s("NNNNN",0,0,"eraNarrow"),s("y",["y",1],"yo","eraYear"),s("y",["yy",2],0,"eraYear"),s("y",["yyy",3],0,"eraYear"),s("y",["yyyy",4],0,"eraYear"),v("N",rn),v("NN",rn),v("NNN",rn),v("NNNN",function(e,t){return t.erasNameRegex(e)}),v("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),D(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,s){s=n._locale.erasParse(e,s,n._strict);s?m(n).era=s:m(n).invalidEra=e}),v("y",Me),v("yy",Me),v("yyy",Me),v("yyyy",Me),v("yo",function(e,t){return t._eraYearOrdinalRegex||Me}),D(["y","yy","yyy","yyyy"],Y),D(["yo"],function(e,t,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Y]=n._locale.eraYearOrdinalParse(e,i):t[Y]=parseInt(e,10)}),s(0,["gg",2],0,function(){return this.weekYear()%100}),s(0,["GG",2],0,function(){return this.isoWeekYear()%100}),on("gggg","weekYear"),on("ggggg","weekYear"),on("GGGG","isoWeekYear"),on("GGGGG","isoWeekYear"),t("weekYear","gg"),t("isoWeekYear","GG"),n("weekYear",1),n("isoWeekYear",1),v("G",De),v("g",De),v("GG",p,w),v("gg",p,w),v("GGGG",ke,_e),v("gggg",ke,_e),v("GGGGG",ve,ye),v("ggggg",ve,ye),Te(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=g(e)}),Te(["gg","GG"],function(e,t,n,s){t[s]=f.parseTwoDigitYear(e)}),s("Q",0,"Qo","quarter"),t("quarter","Q"),n("quarter",7),v("Q",i),D("Q",function(e,t){t[O]=3*(g(e)-1)}),s("D",["DD",2],"Do","date"),t("date","D"),n("date",9),v("D",p),v("DD",p,w),v("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),D(["D","DD"],b),D("Do",function(e,t){t[b]=g(e.match(p)[0])});ke=de("Date",!0);s("DDD",["DDDD",3],"DDDo","dayOfYear"),t("dayOfYear","DDD"),n("dayOfYear",4),v("DDD",pe),v("DDDD",me),D(["DDD","DDDD"],function(e,t,n){n._dayOfYear=g(e)}),s("m",["mm",2],0,"minute"),t("minute","m"),n("minute",14),v("m",p),v("mm",p,w),D(["m","mm"],T);var ln,_e=de("Minutes",!1),ve=(s("s",["ss",2],0,"second"),t("second","s"),n("second",15),v("s",p),v("ss",p,w),D(["s","ss"],N),de("Seconds",!1));for(s("S",0,0,function(){return~~(this.millisecond()/100)}),s(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),s(0,["SSS",3],0,"millisecond"),s(0,["SSSS",4],0,function(){return 10*this.millisecond()}),s(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),s(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),s(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),s(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),s(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),t("millisecond","ms"),n("millisecond",16),v("S",pe,i),v("SS",pe,w),v("SSS",pe,me),ln="SSSS";ln.length<=9;ln+="S")v(ln,Me);function hn(e,t){t[Ne]=g(1e3*("0."+e))}for(ln="S";ln.length<=9;ln+="S")D(ln,hn);ye=de("Milliseconds",!1),s("z",0,0,"zoneAbbr"),s("zz",0,0,"zoneName");i=q.prototype;function dn(e){return e}i.add=Ce,i.calendar=function(e,t){1===arguments.length&&(arguments[0]?Jt(arguments[0])?(e=arguments[0],t=void 0):function(e){for(var t=F(e)&&!L(e),n=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i=0;i<s.length;i+=1)n=n||c(e,s[i]);return t&&n}(arguments[0])&&(t=arguments[0],e=void 0):t=e=void 0);var e=e||W(),n=Gt(e,this).startOf("day"),n=f.calendarFormat(this,n)||"sameElse",t=t&&(d(t[n])?t[n].call(this,e):t[n]);return this.format(t||this.localeData().calendar(n,this,W(e)))},i.clone=function(){return new q(this)},i.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Gt(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=_(t)){case"year":r=Qt(this,s)/12;break;case"month":r=Qt(this,s);break;case"quarter":r=Qt(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:y(r)},i.endOf=function(e){var t,n;if(void 0===(e=_(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?sn:nn,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-tn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-tn(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-tn(t,1e3)-1;break}return this._d.setTime(t),f.updateOffset(this,!0),this},i.format=function(e){return e=e||(this.isUtc()?f.defaultFormatUtc:f.defaultFormat),e=re(this,e),this.localeData().postformat(e)},i.from=function(e,t){return this.isValid()&&(h(e)&&e.isValid()||W(e).isValid())?C({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},i.fromNow=function(e){return this.from(W(),e)},i.to=function(e,t){return this.isValid()&&(h(e)&&e.isValid()||W(e).isValid())?C({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},i.toNow=function(e){return this.to(W(),e)},i.get=function(e){return d(this[e=_(e)])?this[e]():this},i.invalidAt=function(){return m(this).overflow},i.isAfter=function(e,t){return e=h(e)?e:W(e),!(!this.isValid()||!e.isValid())&&("millisecond"===(t=_(t)||"millisecond")?this.valueOf()>e.valueOf():e.valueOf()<this.clone().startOf(t).valueOf())},i.isBefore=function(e,t){return e=h(e)?e:W(e),!(!this.isValid()||!e.isValid())&&("millisecond"===(t=_(t)||"millisecond")?this.valueOf()<e.valueOf():this.clone().endOf(t).valueOf()<e.valueOf())},i.isBetween=function(e,t,n,s){return e=h(e)?e:W(e),t=h(t)?t:W(t),!!(this.isValid()&&e.isValid()&&t.isValid())&&(("("===(s=s||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===s[1]?this.isBefore(t,n):!this.isAfter(t,n)))},i.isSame=function(e,t){var e=h(e)?e:W(e);return!(!this.isValid()||!e.isValid())&&("millisecond"===(t=_(t)||"millisecond")?this.valueOf()===e.valueOf():(e=e.valueOf(),this.clone().startOf(t).valueOf()<=e&&e<=this.clone().endOf(t).valueOf()))},i.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},i.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},i.isValid=function(){return A(this)},i.lang=Xe,i.locale=Xt,i.localeData=Kt,i.max=we,i.min=ge,i.parsingFlags=function(){return E({},m(this))},i.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t,n=[];for(t in e)c(e,t)&&n.push({unit:t,priority:le[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}(e=ue(e)),s=n.length,i=0;i<s;i++)this[n[i].unit](e[n[i].unit]);else if(d(this[e=_(e)]))return this[e](t);return this},i.startOf=function(e){var t,n;if(void 0===(e=_(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?sn:nn,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=tn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=tn(t,6e4);break;case"second":t=this._d.valueOf(),t-=tn(t,1e3);break}return this._d.setTime(t),f.updateOffset(this,!0),this},i.subtract=Je,i.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},i.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},i.toDate=function(){return new Date(this.valueOf())},i.toISOString=function(e){if(!this.isValid())return null;var t=(e=!0!==e)?this.clone().utc():this;return t.year()<0||9999<t.year()?re(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):d(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",re(t,"Z")):re(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},i.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t="moment",n="";return this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",n="Z"),t="["+t+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(t+e+"-MM-DD[T]HH:mm:ss.SSS"+(n+'[")]'))},"undefined"!=typeof Symbol&&null!=Symbol.for&&(i[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),i.toJSON=function(){return this.isValid()?this.toISOString():null},i.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},i.unix=function(){return Math.floor(this.valueOf()/1e3)},i.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},i.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},i.eraName=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].name;if(t[n].until<=e&&e<=t[n].since)return t[n].name}return""},i.eraNarrow=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].narrow;if(t[n].until<=e&&e<=t[n].since)return t[n].narrow}return""},i.eraAbbr=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].abbr;if(t[n].until<=e&&e<=t[n].since)return t[n].abbr}return""},i.eraYear=function(){for(var e,t,n=this.localeData().eras(),s=0,i=n.length;s<i;++s)if(e=n[s].since<=n[s].until?1:-1,t=this.clone().startOf("day").valueOf(),n[s].since<=t&&t<=n[s].until||n[s].until<=t&&t<=n[s].since)return(this.year()-f(n[s].since).year())*e+n[s].offset;return this.year()},i.year=Ie,i.isLeapYear=function(){return he(this.year())},i.weekYear=function(e){return un.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},i.isoWeekYear=function(e){return un.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},i.quarter=i.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},i.month=Ge,i.daysInMonth=function(){return We(this.year(),this.month())},i.week=i.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},i.isoWeek=i.isoWeeks=function(e){var t=qe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},i.weeksInYear=function(){var e=this.localeData()._week;return P(this.year(),e.dow,e.doy)},i.weeksInWeekYear=function(){var e=this.localeData()._week;return P(this.weekYear(),e.dow,e.doy)},i.isoWeeksInYear=function(){return P(this.year(),1,4)},i.isoWeeksInISOWeekYear=function(){return P(this.isoWeekYear(),1,4)},i.date=ke,i.day=i.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,n,s=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-s,"d")):s},i.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},i.isoWeekday=function(e){return this.isValid()?null!=e?(t=e,n=this.localeData(),n="string"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t,this.day(this.day()%7?n:n-7)):this.day()||7:null!=e?this:NaN;var t,n},i.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},i.hour=i.hours=k,i.minute=i.minutes=_e,i.second=i.seconds=ve,i.millisecond=i.milliseconds=ye,i.utcOffset=function(e,t,n){var s,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?i:Et(this);if("string"==typeof e){if(null===(e=Vt(Ye,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(s=Et(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),i!==e&&(!t||this._changeInProgress?qt(this,C(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this},i.utc=function(e){return this.utcOffset(0,e)},i.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Et(this),"m")),this},i.parseZone=function(){var e;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(e=Vt(Se,this._i))?this.utcOffset(e):this.utcOffset(0,!0)),this},i.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?W(e).utcOffset():0,(this.utcOffset()-e)%60==0)},i.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},i.isLocal=function(){return!!this.isValid()&&!this._isUTC},i.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},i.isUtc=At,i.isUTC=At,i.zoneAbbr=function(){return this._isUTC?"UTC":""},i.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},i.dates=e("dates accessor is deprecated. Use date instead.",ke),i.months=e("months accessor is deprecated. Use month instead",Ge),i.years=e("years accessor is deprecated. Use year instead",Ie),i.zone=e("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?(this.utcOffset(e="string"!=typeof e?-e:e,t),this):-this.utcOffset()}),i.isDSTShifted=e("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e,t={};return $(t,this),(t=Nt(t))._a?(e=(t._isUTC?l:W)(t._a),this._isDSTShifted=this.isValid()&&0<function(e,t,n){for(var s=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),r=0,a=0;a<s;a++)(n&&e[a]!==t[a]||!n&&g(e[a])!==g(t[a]))&&r++;return r+i}(t._a,e.toArray())):this._isDSTShifted=!1,this._isDSTShifted});w=K.prototype;function cn(e,t,n,s){var i=mt(),s=l().set(s,t);return i[n](s,e)}function fn(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return cn(e,t,n,"month");for(var s=[],i=0;i<12;i++)s[i]=cn(e,i,n,"month");return s}function mn(e,t,n,s){t=("boolean"==typeof e?u(t)&&(n=t,t=void 0):(t=e,e=!1,u(n=t)&&(n=t,t=void 0)),t||"");var i,r=mt(),a=e?r._week.dow:0,o=[];if(null!=n)return cn(t,(n+a)%7,s,"day");for(i=0;i<7;i++)o[i]=cn(t,(i+a)%7,s,"day");return o}w.calendar=function(e,t,n){return d(e=this._calendar[e]||this._calendar.sameElse)?e.call(t,n):e},w.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(te).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},w.invalidDate=function(){return this._invalidDate},w.ordinal=function(e){return this._ordinal.replace("%d",e)},w.preparse=dn,w.postformat=dn,w.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return d(i)?i(e,t,n,s):i.replace(/%d/i,e)},w.pastFuture=function(e,t){return d(e=this._relativeTime[0<e?"future":"past"])?e(t):e.replace(/%s/i,t)},w.set=function(e){var t,n;for(n in e)c(e,n)&&(d(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},w.eras=function(e,t){for(var n,s=this._eras||mt("en")._eras,i=0,r=s.length;i<r;++i){switch(typeof s[i].since){case"string":n=f(s[i].since).startOf("day"),s[i].since=n.valueOf();break}switch(typeof s[i].until){case"undefined":s[i].until=1/0;break;case"string":n=f(s[i].until).startOf("day").valueOf(),s[i].until=n.valueOf();break}}return s},w.erasParse=function(e,t,n){var s,i,r,a,o,u=this.eras();for(e=e.toUpperCase(),s=0,i=u.length;s<i;++s)if(r=u[s].name.toUpperCase(),a=u[s].abbr.toUpperCase(),o=u[s].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return u[s];break;case"NNNN":if(r===e)return u[s];break;case"NNNNN":if(o===e)return u[s];break}else if(0<=[r,a,o].indexOf(e))return u[s]},w.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?f(e.since).year():f(e.since).year()+(t-e.offset)*n},w.erasAbbrRegex=function(e){return c(this,"_erasAbbrRegex")||an.call(this),e?this._erasAbbrRegex:this._erasRegex},w.erasNameRegex=function(e){return c(this,"_erasNameRegex")||an.call(this),e?this._erasNameRegex:this._erasRegex},w.erasNarrowRegex=function(e){return c(this,"_erasNarrowRegex")||an.call(this),e?this._erasNarrowRegex:this._erasRegex},w.months=function(e,t){return e?(a(this._months)?this._months:this._months[(this._months.isFormat||He).test(t)?"format":"standalone"])[e.month()]:a(this._months)?this._months:this._months.standalone},w.monthsShort=function(e,t){return e?(a(this._monthsShort)?this._monthsShort:this._monthsShort[He.test(t)?"format":"standalone"])[e.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},w.monthsParse=function(e,t,n){var s,i;if(this._monthsParseExact)return function(e,t,n){var s,i,r,e=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=l([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=S.call(this._shortMonthsParse,e))?i:null:-1!==(i=S.call(this._longMonthsParse,e))?i:null:"MMM"===t?-1!==(i=S.call(this._shortMonthsParse,e))||-1!==(i=S.call(this._longMonthsParse,e))?i:null:-1!==(i=S.call(this._longMonthsParse,e))||-1!==(i=S.call(this._shortMonthsParse,e))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=l([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(i="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},w.monthsRegex=function(e){return this._monthsParseExact?(c(this,"_monthsRegex")||Ee.call(this),e?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Le),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},w.monthsShortRegex=function(e){return this._monthsParseExact?(c(this,"_monthsRegex")||Ee.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=Fe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},w.week=function(e){return qe(e,this._week.dow,this._week.doy).week},w.firstDayOfYear=function(){return this._week.doy},w.firstDayOfWeek=function(){return this._week.dow},w.weekdays=function(e,t){return t=a(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"],!0===e?Be(t,this._week.dow):e?t[e.day()]:t},w.weekdaysMin=function(e){return!0===e?Be(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},w.weekdaysShort=function(e){return!0===e?Be(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},w.weekdaysParse=function(e,t,n){var s,i;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r,e=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=l([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=S.call(this._weekdaysParse,e))?i:null:"ddd"===t?-1!==(i=S.call(this._shortWeekdaysParse,e))?i:null:-1!==(i=S.call(this._minWeekdaysParse,e))?i:null:"dddd"===t?-1!==(i=S.call(this._weekdaysParse,e))||-1!==(i=S.call(this._shortWeekdaysParse,e))||-1!==(i=S.call(this._minWeekdaysParse,e))?i:null:"ddd"===t?-1!==(i=S.call(this._shortWeekdaysParse,e))||-1!==(i=S.call(this._weekdaysParse,e))||-1!==(i=S.call(this._minWeekdaysParse,e))?i:null:-1!==(i=S.call(this._minWeekdaysParse,e))||-1!==(i=S.call(this._weekdaysParse,e))||-1!==(i=S.call(this._shortWeekdaysParse,e))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=l([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(i="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},w.weekdaysRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||nt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Ke),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},w.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||nt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=et),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},w.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||nt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=tt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},w.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},w.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},ct("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===g(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),f.lang=e("moment.lang is deprecated. Use moment.locale instead.",ct),f.langData=e("moment.langData is deprecated. Use moment.localeData instead.",mt);var _n=Math.abs;function yn(e,t,n,s){t=C(t,n);return e._milliseconds+=s*t._milliseconds,e._days+=s*t._days,e._months+=s*t._months,e._bubble()}function gn(e){return e<0?Math.floor(e):Math.ceil(e)}function wn(e){return 4800*e/146097}function pn(e){return 146097*e/4800}function kn(e){return function(){return this.as(e)}}pe=kn("ms"),me=kn("s"),Ce=kn("m"),we=kn("h"),ge=kn("d"),Je=kn("w"),k=kn("M"),_e=kn("Q"),ve=kn("y");function vn(e){return function(){return this.isValid()?this._data[e]:NaN}}var ye=vn("milliseconds"),ke=vn("seconds"),Ie=vn("minutes"),w=vn("hours"),Mn=vn("days"),Dn=vn("months"),Sn=vn("years");var Yn=Math.round,On={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function bn(e,t,n,s){var i=C(e).abs(),r=Yn(i.as("s")),a=Yn(i.as("m")),o=Yn(i.as("h")),u=Yn(i.as("d")),l=Yn(i.as("M")),h=Yn(i.as("w")),i=Yn(i.as("y")),r=(r<=n.ss?["s",r]:r<n.s&&["ss",r])||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||u<=1&&["d"]||u<n.d&&["dd",u];return(r=(r=null!=n.w?r||h<=1&&["w"]||h<n.w&&["ww",h]:r)||l<=1&&["M"]||l<n.M&&["MM",l]||i<=1&&["y"]||["yy",i])[2]=t,r[3]=0<+e,r[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,r)}var xn=Math.abs;function Tn(e){return(0<e)-(e<0)||+e}function Nn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,s,i,r,a,o=xn(this._milliseconds)/1e3,u=xn(this._days),l=xn(this._months),h=this.asSeconds();return h?(e=y(o/60),t=y(e/60),o%=60,e%=60,n=y(l/12),l%=12,s=o?o.toFixed(3).replace(/\.?0+$/,""):"",i=Tn(this._months)!==Tn(h)?"-":"",r=Tn(this._days)!==Tn(h)?"-":"",a=Tn(this._milliseconds)!==Tn(h)?"-":"",(h<0?"-":"")+"P"+(n?i+n+"Y":"")+(l?i+l+"M":"")+(u?r+u+"D":"")+(t||e||o?"T":"")+(t?a+t+"H":"")+(e?a+e+"M":"")+(o?a+s+"S":"")):"P0D"}var U=Ct.prototype;return U.isValid=function(){return this._isValid},U.abs=function(){var e=this._data;return this._milliseconds=_n(this._milliseconds),this._days=_n(this._days),this._months=_n(this._months),e.milliseconds=_n(e.milliseconds),e.seconds=_n(e.seconds),e.minutes=_n(e.minutes),e.hours=_n(e.hours),e.months=_n(e.months),e.years=_n(e.years),this},U.add=function(e,t){return yn(this,e,t,1)},U.subtract=function(e,t){return yn(this,e,t,-1)},U.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=_(e))||"quarter"===e||"year"===e)switch(t=this._days+s/864e5,n=this._months+wn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(pn(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},U.asMilliseconds=pe,U.asSeconds=me,U.asMinutes=Ce,U.asHours=we,U.asDays=ge,U.asWeeks=Je,U.asMonths=k,U.asQuarters=_e,U.asYears=ve,U.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12):NaN},U._bubble=function(){var e=this._milliseconds,t=this._days,n=this._months,s=this._data;return 0<=e&&0<=t&&0<=n||e<=0&&t<=0&&n<=0||(e+=864e5*gn(pn(n)+t),n=t=0),s.milliseconds=e%1e3,e=y(e/1e3),s.seconds=e%60,e=y(e/60),s.minutes=e%60,e=y(e/60),s.hours=e%24,t+=y(e/24),n+=e=y(wn(t)),t-=gn(pn(e)),e=y(n/12),n%=12,s.days=t,s.months=n,s.years=e,this},U.clone=function(){return C(this)},U.get=function(e){return e=_(e),this.isValid()?this[e+"s"]():NaN},U.milliseconds=ye,U.seconds=ke,U.minutes=Ie,U.hours=w,U.days=Mn,U.weeks=function(){return y(this.days()/7)},U.months=Dn,U.years=Sn,U.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,s=On;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(n=e),"object"==typeof t&&(s=Object.assign({},On,t),null!=t.s&&null==t.ss&&(s.ss=t.s-1)),e=this.localeData(),t=bn(this,!n,s,e),n&&(t=e.pastFuture(+this,t)),e.postformat(t)},U.toISOString=Nn,U.toString=Nn,U.toJSON=Nn,U.locale=Xt,U.localeData=Kt,U.toIsoString=e("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Nn),U.lang=Xe,s("X",0,0,"unix"),s("x",0,0,"valueOf"),v("x",De),v("X",/[+-]?\d+(\.\d{1,3})?/),D("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),D("x",function(e,t,n){n._d=new Date(g(e))}),f.version="2.29.4",H=W,f.fn=i,f.min=function(){return Rt("isBefore",[].slice.call(arguments,0))},f.max=function(){return Rt("isAfter",[].slice.call(arguments,0))},f.now=function(){return Date.now?Date.now():+new Date},f.utc=l,f.unix=function(e){return W(1e3*e)},f.months=function(e,t){return fn(e,t,"months")},f.isDate=V,f.locale=ct,f.invalid=I,f.duration=C,f.isMoment=h,f.weekdays=function(e,t,n){return mn(e,t,n,"weekdays")},f.parseZone=function(){return W.apply(null,arguments).parseZone()},f.localeData=mt,f.isDuration=Ut,f.monthsShort=function(e,t){return fn(e,t,"monthsShort")},f.weekdaysMin=function(e,t,n){return mn(e,t,n,"weekdaysMin")},f.defineLocale=ft,f.updateLocale=function(e,t){var n,s;return null!=t?(s=ot,null!=R[e]&&null!=R[e].parentLocale?R[e].set(X(R[e]._config,t)):(t=X(s=null!=(n=dt(e))?n._config:s,t),null==n&&(t.abbr=e),(s=new K(t)).parentLocale=R[e],R[e]=s),ct(e)):null!=R[e]&&(null!=R[e].parentLocale?(R[e]=R[e].parentLocale,e===ct()&&ct(e)):null!=R[e]&&delete R[e]),R[e]},f.locales=function(){return ee(R)},f.weekdaysShort=function(e,t,n){return mn(e,t,n,"weekdaysShort")},f.normalizeUnits=_,f.relativeTimeRounding=function(e){return void 0===e?Yn:"function"==typeof e&&(Yn=e,!0)},f.relativeTimeThreshold=function(e,t){return void 0!==On[e]&&(void 0===t?On[e]:(On[e]=t,"s"===e&&(On.ss=t-1),!0))},f.calendarFormat=function(e,t){return(e=e.diff(t,"days",!0))<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse"},f.prototype=i,f.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},f});
//# sourceMappingURL=moment.min.js.map
!function(a,i){"use strict";"object"==typeof module&&module.exports?module.exports=i(require("moment")):"function"==typeof define&&define.amd?define(["moment"],i):i(a.moment)}(this,function(o){"use strict";void 0===o.version&&o.default&&(o=o.default);var i,s={},c={},A={},u={},m={},a=(o&&"string"==typeof o.version||D("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/"),o.version.split(".")),r=+a[0],e=+a[1];function n(a){return 96<a?a-87:64<a?a-29:a-48}function t(a){var i=0,r=a.split("."),e=r[0],o=r[1]||"",c=1,A=0,r=1;for(45===a.charCodeAt(0)&&(r=-(i=1));i<e.length;i++)A=60*A+n(e.charCodeAt(i));for(i=0;i<o.length;i++)c/=60,A+=n(o.charCodeAt(i))*c;return A*r}function l(a){for(var i=0;i<a.length;i++)a[i]=t(a[i])}function f(a,i){for(var r=[],e=0;e<i.length;e++)r[e]=a[i[e]];return r}function p(a){for(var a=a.split("|"),i=a[2].split(" "),r=a[3].split(""),e=a[4].split(" "),o=(l(i),l(r),l(e),e),c=r.length,A=0;A<c;A++)o[A]=Math.round((o[A-1]||0)+6e4*o[A]);return o[c-1]=1/0,{name:a[0],abbrs:f(a[1].split(" "),r),offsets:f(i,r),untils:e,population:0|a[5]}}function b(a){a&&this._set(p(a))}function M(a,i){this.name=a,this.zones=i}function h(a){var i=a.toTimeString(),r=i.match(/\([a-z ]+\)/i);"GMT"===(r=r&&r[0]?(r=r[0].match(/[A-Z]/g))?r.join(""):void 0:(r=i.match(/[A-Z]{3,5}/g))?r[0]:void 0)&&(r=void 0),this.at=+a,this.abbr=r,this.offset=a.getTimezoneOffset()}function d(a){this.zone=a,this.offsetScore=0,this.abbrScore=0}function E(){for(var a,i,r=(new Date).getFullYear()-2,e=new h(new Date(r,0,1)),o=[e],c=1;c<48;c++)(i=new h(new Date(r,c,1))).offset!==e.offset&&(a=function(a,i){for(var r;r=6e4*((i.at-a.at)/12e4|0);)(r=new h(new Date(a.at+r))).offset===a.offset?a=r:i=r;return a}(e,i),o.push(a),o.push(new h(new Date(a.at+6e4)))),e=i;for(c=0;c<4;c++)o.push(new h(new Date(r+c,0,1))),o.push(new h(new Date(r+c,6,1)));return o}function g(a,i){return a.offsetScore!==i.offsetScore?a.offsetScore-i.offsetScore:a.abbrScore!==i.abbrScore?a.abbrScore-i.abbrScore:a.zone.population!==i.zone.population?i.zone.population-a.zone.population:i.zone.name.localeCompare(a.zone.name)}function z(){try{var a=Intl.DateTimeFormat().resolvedOptions().timeZone;if(a&&3<a.length){var i=u[P(a)];if(i)return i;D("Moment Timezone found "+a+" from the Intl api, but did not have that data loaded.")}}catch(a){}for(var r,e,o=E(),c=o.length,A=function(a){for(var i,r,e=a.length,o={},c=[],A=0;A<e;A++)for(i in r=m[a[A].offset]||{})r.hasOwnProperty(i)&&(o[i]=!0);for(A in o)o.hasOwnProperty(A)&&c.push(u[A]);return c}(o),n=[],t=0;t<A.length;t++){for(r=new d(T(A[t])),e=0;e<c;e++)r.scoreOffsetAt(o[e]);n.push(r)}return n.sort(g),0<n.length?n[0].zone.name:void 0}function P(a){return(a||"").toLowerCase().replace(/\//g,"_")}function k(a){var i,r,e,o;for("string"==typeof a&&(a=[a]),i=0;i<a.length;i++){o=P(r=(e=a[i].split("|"))[0]),s[o]=a[i],u[o]=r,A=c=t=n=void 0;var c,A,n=o,t=e[2].split(" ");for(l(t),c=0;c<t.length;c++)A=t[c],m[A]=m[A]||{},m[A][n]=!0}}function T(a,i){a=P(a);var r=s[a];return r instanceof b?r:"string"==typeof r?(r=new b(r),s[a]=r):c[a]&&i!==T&&(i=T(c[a],T))?((r=s[a]=new b)._set(i),r.name=u[a],r):null}function S(a){var i,r,e,o;for("string"==typeof a&&(a=[a]),i=0;i<a.length;i++)e=P((r=a[i].split("|"))[0]),o=P(r[1]),c[e]=o,u[e]=r[0],c[o]=e,u[o]=r[1]}function _(a){k(a.zones),S(a.links);var i,r,e,o=a.countries;if(o&&o.length)for(i=0;i<o.length;i++)r=(e=o[i].split("|"))[0].toUpperCase(),e=e[1].split(" "),A[r]=new M(r,e);y.dataVersion=a.version}function C(a){return C.didShowError||(C.didShowError=!0,D("moment.tz.zoneExists('"+a+"') has been deprecated in favor of !moment.tz.zone('"+a+"')")),!!T(a)}function B(a){var i="X"===a._f||"x"===a._f;return!(!a._a||void 0!==a._tzm||i)}function D(a){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(a)}function y(a){var i=Array.prototype.slice.call(arguments,0,-1),r=arguments[arguments.length-1],e=T(r),i=o.utc.apply(null,i);return e&&!o.isMoment(a)&&B(i)&&i.add(e.parse(i),"minutes"),i.tz(r),i}(r<2||2==r&&e<6)&&D("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+o.version+". See momentjs.com"),b.prototype={_set:function(a){this.name=a.name,this.abbrs=a.abbrs,this.untils=a.untils,this.offsets=a.offsets,this.population=a.population},_index:function(a){for(var i=+a,r=this.untils,e=0;e<r.length;e++)if(i<r[e])return e},countries:function(){var i=this.name;return Object.keys(A).filter(function(a){return-1!==A[a].zones.indexOf(i)})},parse:function(a){for(var i,r,e,o=+a,c=this.offsets,A=this.untils,n=A.length-1,t=0;t<n;t++)if(i=c[t],r=c[t+1],e=c[t&&t-1],i<r&&y.moveAmbiguousForward?i=r:e<i&&y.moveInvalidForward&&(i=e),o<A[t]-6e4*i)return c[t];return c[n]},abbr:function(a){return this.abbrs[this._index(a)]},offset:function(a){return D("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(a)]},utcOffset:function(a){return this.offsets[this._index(a)]}},d.prototype.scoreOffsetAt=function(a){this.offsetScore+=Math.abs(this.zone.utcOffset(a.at)-a.offset),this.zone.abbr(a.at).replace(/[^A-Z]/g,"")!==a.abbr&&this.abbrScore++},y.version="0.5.43",y.dataVersion="",y._zones=s,y._links=c,y._names=u,y._countries=A,y.add=k,y.link=S,y.load=_,y.zone=T,y.zoneExists=C,y.guess=function(a){return i=i&&!a?i:z()},y.names=function(){var a,i=[];for(a in u)u.hasOwnProperty(a)&&(s[a]||s[c[a]])&&u[a]&&i.push(u[a]);return i.sort()},y.Zone=b,y.unpack=p,y.unpackBase60=t,y.needsOffset=B,y.moveInvalidForward=!0,y.moveAmbiguousForward=!1,y.countries=function(){return Object.keys(A)},y.zonesForCountry=function(a,i){var r;return r=(r=a).toUpperCase(),(a=A[r]||null)?(r=a.zones.sort(),i?r.map(function(a){return{name:a,offset:T(a).utcOffset(new Date)}}):r):null};var L,a=o.fn;function O(a){return function(){return this._z?this._z.abbr(this):a.call(this)}}function N(a){return function(){return this._z=null,a.apply(this,arguments)}}o.tz=y,o.defaultZone=null,o.updateOffset=function(a,i){var r,e=o.defaultZone;void 0===a._z&&(e&&B(a)&&!a._isUTC&&(a._d=o.utc(a._a)._d,a.utc().add(e.parse(a),"minutes")),a._z=e),a._z&&(e=a._z.utcOffset(a),Math.abs(e)<16&&(e/=60),void 0!==a.utcOffset?(r=a._z,a.utcOffset(-e,i),a._z=r):a.zone(e,i))},a.tz=function(a,i){if(a){if("string"!=typeof a)throw new Error("Time zone name must be a string, got "+a+" ["+typeof a+"]");return this._z=T(a),this._z?o.updateOffset(this,i):D("Moment Timezone has no data for "+a+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},a.zoneName=O(a.zoneName),a.zoneAbbr=O(a.zoneAbbr),a.utc=N(a.utc),a.local=N(a.local),a.utcOffset=(L=a.utcOffset,function(){return 0<arguments.length&&(this._z=null),L.apply(this,arguments)}),o.tz.setDefault=function(a){return(r<2||2==r&&e<9)&&D("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+o.version+"."),o.defaultZone=a?T(a):null,o};a=o.momentProperties;return"[object Array]"===Object.prototype.toString.call(a)?(a.push("_z"),a.push("_a")):a&&(a._z=null),_({version:"2023c",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Nairobi|EAT|-30|0||47e5","Africa/Algiers|CET|-10|0||26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Khartoum|CAT|-20|0||51e5","Africa/Cairo|EET EEST|-20 -30|0101010101010|29NW0 1cL0 1cN0 1fz0 1a10 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0|15e6","Africa/Casablanca|+00 +01|0 -10|010101010101010101010101|1Vq20 jA0 e00 28M0 e00 2600 gM0 2600 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0|32e5","Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|11e6","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Juba|EAT CAT|-30 -20|01|24nx0|","Africa/Sao_Tome|GMT WAT|0 -10|010|1UQN0 2q00|","Africa/Tripoli|EET|-20|0||11e5","America/Adak|HST HDT|a0 90|01010101010101010101010|1VkA0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|326","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1Vkz0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|30e4","America/Santo_Domingo|AST|40|0||29e5","America/Fortaleza|-03|30|0||34e5","America/Asuncion|-03 -04|30 40|01010101010101010101010|1Vq30 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0|28e5","America/Panama|EST|50|0||15e5","America/Mexico_City|CST CDT|60 50|01010101010|1VsU0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|20e6","America/Managua|CST|60|0||22e5","America/Caracas|-04|40|0||29e5","America/Lima|-05|50|0||11e6","America/Denver|MST MDT|70 60|01010101010101010101010|1Vkx0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|26e5","America/Campo_Grande|-03 -04|30 40|0101|1Vc30 1HB0 FX0|77e4","America/Chicago|CST CDT|60 50|01010101010101010101010|1Vkw0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|92e5","America/Chihuahua|MST MDT CST|70 60 60|01010101012|1VsV0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|81e4","America/Ciudad_Juarez|MST MDT CST|70 60 60|010101010120101010101010|1Vkx0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1wn0 cm0 EP0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|","America/Phoenix|MST|70|0||42e5","America/Whitehorse|PST PDT MST|80 70 70|0101012|1Vky0 1zb0 Op0 1zb0 Op0 1z90|23e3","America/New_York|EST EDT|50 40|01010101010101010101010|1Vkv0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|21e6","America/Los_Angeles|PST PDT|80 70|01010101010101010101010|1Vky0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|15e6","America/Halifax|AST ADT|40 30|01010101010101010101010|1Vku0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|39e4","America/Godthab|-03 -02 -01|30 20 10|0101010101012121212121|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 2so0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|17e3","America/Grand_Turk|AST EDT EST|40 40 50|01212121212121212121212|1Vkv0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|37e2","America/Havana|CST CDT|50 40|01010101010101010101010|1Vkt0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0|21e5","America/Mazatlan|MST MDT|70 60|01010101010|1VsV0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|44e4","America/Metlakatla|AKST AKDT PST|90 80 80|012010101010101010101010|1Vkz0 1zb0 uM0 jB0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|14e2","America/Miquelon|-03 -02|30 20|01010101010101010101010|1Vkt0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|61e2","America/Noronha|-02|20|0||30e2","America/Ojinaga|MST MDT CST CDT|70 60 60 50|01010101012323232323232|1Vkx0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1wn0 Rc0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|23e3","America/Santiago|-03 -04|30 40|01010101010101010101010|1VJD0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|62e5","America/Sao_Paulo|-02 -03|20 30|0101|1Vc20 1HB0 FX0|20e6","Atlantic/Azores|-01 +00|10 0|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|25e4","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1Vktu 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|11e4","Antarctica/Casey|+11 +08|-b0 -80|0101010|1Vkh0 1o30 14k0 1kr0 12l0 1o01|10","Asia/Bangkok|+07|-70|0||15e6","Asia/Vladivostok|+10|-a0|0||60e4","Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1VsE0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|40e5","Asia/Tashkent|+05|-50|0||23e5","Pacific/Auckland|NZDT NZST|-d0 -c0|01010101010101010101010|1VsC0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|14e5","Europe/Istanbul|+03|-30|0||13e6","Antarctica/Troll|+00 +02|0 -20|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|40","Asia/Dhaka|+06|-60|0||16e6","Asia/Amman|EET EEST +03|-20 -30 -30|01010101012|1VrW0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 LA0 1C00|25e5","Asia/Kamchatka|+12|-c0|0||18e4","Asia/Dubai|+04|-40|0||39e5","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1VpW0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0|22e5","Asia/Kuala_Lumpur|+08|-80|0||71e5","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|+09|-90|0||33e4","Asia/Shanghai|CST|-80|0||23e6","Asia/Colombo|+0530|-5u|0||22e5","Asia/Damascus|EET EEST +03|-20 -30 -30|01010101012|1VrW0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|26e5","Europe/Athens|EET EEST|-20 -30|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|35e5","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1Vpz0 1qL0 11c0 1on0 11B0 1o00 11A0 1qo0 XA0 1qp0 1cN0 1cL0 17d0 1in0 14p0 1lb0 11B0 1nX0 11B0 1qL0 WN0 1qL0|18e5","Asia/Hong_Kong|HKT|-80|0||73e5","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1Vpc0 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0|81e4","Asia/Kabul|+0430|-4u|0||46e5","Asia/Karachi|PKT|-50|0||24e6","Asia/Kathmandu|+0545|-5J|0||12e5","Asia/Sakhalin|+11|-b0|0||58e4","Asia/Makassar|WITA|-80|0||15e5","Asia/Manila|PST|-80|0||24e6","Asia/Pyongyang|KST KST|-8u -90|01|1VGf0|29e5","Asia/Qyzylorda|+06 +05|-60 -50|01|1Xei0|73e4","Asia/Rangoon|+0630|-6u|0||48e5","Asia/Seoul|KST|-90|0||23e6","Asia/Tehran|+0330 +0430|-3u -4u|01010101010|1VoIu 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0|14e6","Asia/Tokyo|JST|-90|0||38e6","Europe/Lisbon|WET WEST|0 -10|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|27e5","Atlantic/Cape_Verde|-01|10|0||50e4","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1VsEu 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|11e5","Australia/Brisbane|AEST|-a0|0||20e5","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|+0845|-8J|0||368","Australia/Lord_Howe|+11 +1030|-b0 -au|01010101010101010101010|1VsD0 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu|347","Australia/Perth|AWST|-80|0||18e5","Pacific/Easter|-05 -06|50 60|01010101010101010101010|1VJD0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|30e2","Europe/Dublin|GMT IST|0 -10|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|12e5","Etc/GMT-1|+01|-10|0||","Pacific/Tongatapu|+13|-d0|0||75e3","Pacific/Kiritimati|+14|-e0|0||51e2","Etc/GMT-2|+02|-20|0||","Pacific/Tahiti|-10|a0|0||18e4","Pacific/Niue|-11|b0|0||12e2","Etc/GMT+12|-12|c0|0||","Pacific/Galapagos|-06|60|0||25e3","Etc/GMT+7|-07|70|0||","Pacific/Pitcairn|-08|80|0||56","Pacific/Gambier|-09|90|0||125","Etc/UTC|UTC|0|0||","Europe/London|GMT BST|0 -10|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|10e6","Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1Vq00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|67e4","Europe/Moscow|MSK|-30|0||16e6","Europe/Volgograd|MSK +04|-30 -40|010|1WQL0 5gn0|10e5","Pacific/Honolulu|HST|a0|0||37e4","MET|MET MEST|-10 -20|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|","Pacific/Chatham|+1345 +1245|-dJ -cJ|01010101010101010101010|1VsC0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|600","Pacific/Apia|+14 +13|-e0 -d0|01010101|1VsC0 1cM0 1fA0 1a00 1fA0 1a00 1fA0|37e3","Pacific/Fiji|+13 +12|-d0 -c0|01010101|1UVO0 1VA0 s00 20o0 pc0 2hc0 bc0|88e4","Pacific/Guam|ChST|-a0|0||17e4","Pacific/Marquesas|-0930|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Norfolk|+11 +12|-b0 -c0|01010101010101010101|219P0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|25e4"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Algiers|Africa/Tunis","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Khartoum|Africa/Blantyre","Africa/Khartoum|Africa/Bujumbura","Africa/Khartoum|Africa/Gaborone","Africa/Khartoum|Africa/Harare","Africa/Khartoum|Africa/Kigali","Africa/Khartoum|Africa/Lubumbashi","Africa/Khartoum|Africa/Lusaka","Africa/Khartoum|Africa/Maputo","Africa/Khartoum|Africa/Windhoek","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Ndjamena","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Nairobi|Africa/Addis_Ababa","Africa/Nairobi|Africa/Asmara","Africa/Nairobi|Africa/Asmera","Africa/Nairobi|Africa/Dar_es_Salaam","Africa/Nairobi|Africa/Djibouti","Africa/Nairobi|Africa/Kampala","Africa/Nairobi|Africa/Mogadishu","Africa/Nairobi|Indian/Antananarivo","Africa/Nairobi|Indian/Comoro","Africa/Nairobi|Indian/Mayotte","Africa/Tripoli|Europe/Kaliningrad","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Campo_Grande|America/Cuiaba","America/Caracas|America/Boa_Vista","America/Caracas|America/Guyana","America/Caracas|America/La_Paz","America/Caracas|America/Manaus","America/Caracas|America/Porto_Velho","America/Caracas|Brazil/West","America/Caracas|Etc/GMT+4","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Beulah","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Denver|America/Boise","America/Denver|America/Cambridge_Bay","America/Denver|America/Edmonton","America/Denver|America/Inuvik","America/Denver|America/Shiprock","America/Denver|America/Yellowknife","America/Denver|Canada/Mountain","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Fortaleza|America/Araguaina","America/Fortaleza|America/Argentina/Buenos_Aires","America/Fortaleza|America/Argentina/Catamarca","America/Fortaleza|America/Argentina/ComodRivadavia","America/Fortaleza|America/Argentina/Cordoba","America/Fortaleza|America/Argentina/Jujuy","America/Fortaleza|America/Argentina/La_Rioja","America/Fortaleza|America/Argentina/Mendoza","America/Fortaleza|America/Argentina/Rio_Gallegos","America/Fortaleza|America/Argentina/Salta","America/Fortaleza|America/Argentina/San_Juan","America/Fortaleza|America/Argentina/San_Luis","America/Fortaleza|America/Argentina/Tucuman","America/Fortaleza|America/Argentina/Ushuaia","America/Fortaleza|America/Bahia","America/Fortaleza|America/Belem","America/Fortaleza|America/Buenos_Aires","America/Fortaleza|America/Catamarca","America/Fortaleza|America/Cayenne","America/Fortaleza|America/Cordoba","America/Fortaleza|America/Jujuy","America/Fortaleza|America/Maceio","America/Fortaleza|America/Mendoza","America/Fortaleza|America/Montevideo","America/Fortaleza|America/Paramaribo","America/Fortaleza|America/Punta_Arenas","America/Fortaleza|America/Recife","America/Fortaleza|America/Rosario","America/Fortaleza|America/Santarem","America/Fortaleza|Antarctica/Palmer","America/Fortaleza|Antarctica/Rothera","America/Fortaleza|Atlantic/Stanley","America/Fortaleza|Etc/GMT+3","America/Godthab|America/Nuuk","America/Halifax|America/Glace_Bay","America/Halifax|America/Goose_Bay","America/Halifax|America/Moncton","America/Halifax|America/Thule","America/Halifax|Atlantic/Bermuda","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/Lima|America/Bogota","America/Lima|America/Eirunepe","America/Lima|America/Guayaquil","America/Lima|America/Porto_Acre","America/Lima|America/Rio_Branco","America/Lima|Brazil/Acre","America/Lima|Etc/GMT+5","America/Los_Angeles|America/Ensenada","America/Los_Angeles|America/Santa_Isabel","America/Los_Angeles|America/Tijuana","America/Los_Angeles|America/Vancouver","America/Los_Angeles|Canada/Pacific","America/Los_Angeles|Mexico/BajaNorte","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Managua|America/Belize","America/Managua|America/Costa_Rica","America/Managua|America/El_Salvador","America/Managua|America/Guatemala","America/Managua|America/Regina","America/Managua|America/Swift_Current","America/Managua|America/Tegucigalpa","America/Managua|Canada/Saskatchewan","America/Mazatlan|Mexico/BajaSur","America/Mexico_City|America/Bahia_Banderas","America/Mexico_City|America/Merida","America/Mexico_City|America/Monterrey","America/Mexico_City|Mexico/General","America/New_York|America/Detroit","America/New_York|America/Fort_Wayne","America/New_York|America/Indiana/Indianapolis","America/New_York|America/Indiana/Marengo","America/New_York|America/Indiana/Petersburg","America/New_York|America/Indiana/Vevay","America/New_York|America/Indiana/Vincennes","America/New_York|America/Indiana/Winamac","America/New_York|America/Indianapolis","America/New_York|America/Iqaluit","America/New_York|America/Kentucky/Louisville","America/New_York|America/Kentucky/Monticello","America/New_York|America/Louisville","America/New_York|America/Montreal","America/New_York|America/Nassau","America/New_York|America/Nipigon","America/New_York|America/Pangnirtung","America/New_York|America/Port-au-Prince","America/New_York|America/Thunder_Bay","America/New_York|America/Toronto","America/New_York|Canada/Eastern","America/New_York|EST5EDT","America/New_York|US/East-Indiana","America/New_York|US/Eastern","America/New_York|US/Michigan","America/Noronha|Atlantic/South_Georgia","America/Noronha|Brazil/DeNoronha","America/Noronha|Etc/GMT+2","America/Panama|America/Atikokan","America/Panama|America/Cancun","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|America/Jamaica","America/Panama|EST","America/Panama|Jamaica","America/Phoenix|America/Creston","America/Phoenix|America/Dawson_Creek","America/Phoenix|America/Fort_Nelson","America/Phoenix|America/Hermosillo","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Santiago|Chile/Continental","America/Santo_Domingo|America/Anguilla","America/Santo_Domingo|America/Antigua","America/Santo_Domingo|America/Aruba","America/Santo_Domingo|America/Barbados","America/Santo_Domingo|America/Blanc-Sablon","America/Santo_Domingo|America/Curacao","America/Santo_Domingo|America/Dominica","America/Santo_Domingo|America/Grenada","America/Santo_Domingo|America/Guadeloupe","America/Santo_Domingo|America/Kralendijk","America/Santo_Domingo|America/Lower_Princes","America/Santo_Domingo|America/Marigot","America/Santo_Domingo|America/Martinique","America/Santo_Domingo|America/Montserrat","America/Santo_Domingo|America/Port_of_Spain","America/Santo_Domingo|America/Puerto_Rico","America/Santo_Domingo|America/St_Barthelemy","America/Santo_Domingo|America/St_Kitts","America/Santo_Domingo|America/St_Lucia","America/Santo_Domingo|America/St_Thomas","America/Santo_Domingo|America/St_Vincent","America/Santo_Domingo|America/Tortola","America/Santo_Domingo|America/Virgin","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","America/Whitehorse|America/Dawson","America/Whitehorse|Canada/Yukon","Asia/Bangkok|Antarctica/Davis","Asia/Bangkok|Asia/Barnaul","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Hovd","Asia/Bangkok|Asia/Krasnoyarsk","Asia/Bangkok|Asia/Novokuznetsk","Asia/Bangkok|Asia/Novosibirsk","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Tomsk","Asia/Bangkok|Asia/Vientiane","Asia/Bangkok|Etc/GMT-7","Asia/Bangkok|Indian/Christmas","Asia/Chita|Asia/Dili","Asia/Chita|Asia/Khandyga","Asia/Chita|Asia/Yakutsk","Asia/Chita|Etc/GMT-9","Asia/Chita|Pacific/Palau","Asia/Dhaka|Antarctica/Vostok","Asia/Dhaka|Asia/Almaty","Asia/Dhaka|Asia/Bishkek","Asia/Dhaka|Asia/Dacca","Asia/Dhaka|Asia/Kashgar","Asia/Dhaka|Asia/Omsk","Asia/Dhaka|Asia/Qostanay","Asia/Dhaka|Asia/Thimbu","Asia/Dhaka|Asia/Thimphu","Asia/Dhaka|Asia/Urumqi","Asia/Dhaka|Etc/GMT-6","Asia/Dhaka|Indian/Chagos","Asia/Dubai|Asia/Baku","Asia/Dubai|Asia/Muscat","Asia/Dubai|Asia/Tbilisi","Asia/Dubai|Asia/Yerevan","Asia/Dubai|Etc/GMT-4","Asia/Dubai|Europe/Astrakhan","Asia/Dubai|Europe/Samara","Asia/Dubai|Europe/Saratov","Asia/Dubai|Europe/Ulyanovsk","Asia/Dubai|Indian/Mahe","Asia/Dubai|Indian/Mauritius","Asia/Dubai|Indian/Reunion","Asia/Gaza|Asia/Hebron","Asia/Hong_Kong|Hongkong","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kamchatka|Asia/Anadyr","Asia/Kamchatka|Etc/GMT-12","Asia/Kamchatka|Kwajalein","Asia/Kamchatka|Pacific/Funafuti","Asia/Kamchatka|Pacific/Kwajalein","Asia/Kamchatka|Pacific/Majuro","Asia/Kamchatka|Pacific/Nauru","Asia/Kamchatka|Pacific/Tarawa","Asia/Kamchatka|Pacific/Wake","Asia/Kamchatka|Pacific/Wallis","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Kuala_Lumpur|Asia/Brunei","Asia/Kuala_Lumpur|Asia/Choibalsan","Asia/Kuala_Lumpur|Asia/Irkutsk","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Kuala_Lumpur|Asia/Singapore","Asia/Kuala_Lumpur|Asia/Ulaanbaatar","Asia/Kuala_Lumpur|Asia/Ulan_Bator","Asia/Kuala_Lumpur|Etc/GMT-8","Asia/Kuala_Lumpur|Singapore","Asia/Makassar|Asia/Ujung_Pandang","Asia/Rangoon|Asia/Yangon","Asia/Rangoon|Indian/Cocos","Asia/Sakhalin|Asia/Magadan","Asia/Sakhalin|Asia/Srednekolymsk","Asia/Sakhalin|Etc/GMT-11","Asia/Sakhalin|Pacific/Bougainville","Asia/Sakhalin|Pacific/Efate","Asia/Sakhalin|Pacific/Guadalcanal","Asia/Sakhalin|Pacific/Kosrae","Asia/Sakhalin|Pacific/Noumea","Asia/Sakhalin|Pacific/Pohnpei","Asia/Sakhalin|Pacific/Ponape","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|Asia/Macao","Asia/Shanghai|Asia/Macau","Asia/Shanghai|Asia/Taipei","Asia/Shanghai|PRC","Asia/Shanghai|ROC","Asia/Tashkent|Antarctica/Mawson","Asia/Tashkent|Asia/Aqtau","Asia/Tashkent|Asia/Aqtobe","Asia/Tashkent|Asia/Ashgabat","Asia/Tashkent|Asia/Ashkhabad","Asia/Tashkent|Asia/Atyrau","Asia/Tashkent|Asia/Dushanbe","Asia/Tashkent|Asia/Oral","Asia/Tashkent|Asia/Samarkand","Asia/Tashkent|Asia/Yekaterinburg","Asia/Tashkent|Etc/GMT-5","Asia/Tashkent|Indian/Kerguelen","Asia/Tashkent|Indian/Maldives","Asia/Tehran|Iran","Asia/Tokyo|Japan","Asia/Vladivostok|Antarctica/DumontDUrville","Asia/Vladivostok|Asia/Ust-Nera","Asia/Vladivostok|Etc/GMT-10","Asia/Vladivostok|Pacific/Chuuk","Asia/Vladivostok|Pacific/Port_Moresby","Asia/Vladivostok|Pacific/Truk","Asia/Vladivostok|Pacific/Yap","Atlantic/Azores|America/Scoresbysund","Atlantic/Cape_Verde|Etc/GMT+1","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/Lord_Howe|Australia/LHI","Australia/Perth|Australia/West","Australia/Sydney|Antarctica/Macquarie","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/Currie","Australia/Sydney|Australia/Hobart","Australia/Sydney|Australia/Melbourne","Australia/Sydney|Australia/NSW","Australia/Sydney|Australia/Tasmania","Australia/Sydney|Australia/Victoria","Etc/UTC|Etc/UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UCT","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Athens|Asia/Famagusta","Europe/Athens|Asia/Nicosia","Europe/Athens|EET","Europe/Athens|Europe/Bucharest","Europe/Athens|Europe/Helsinki","Europe/Athens|Europe/Kiev","Europe/Athens|Europe/Kyiv","Europe/Athens|Europe/Mariehamn","Europe/Athens|Europe/Nicosia","Europe/Athens|Europe/Riga","Europe/Athens|Europe/Sofia","Europe/Athens|Europe/Tallinn","Europe/Athens|Europe/Uzhgorod","Europe/Athens|Europe/Vilnius","Europe/Athens|Europe/Zaporozhye","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Istanbul|Antarctica/Syowa","Europe/Istanbul|Asia/Aden","Europe/Istanbul|Asia/Baghdad","Europe/Istanbul|Asia/Bahrain","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Asia/Kuwait","Europe/Istanbul|Asia/Qatar","Europe/Istanbul|Asia/Riyadh","Europe/Istanbul|Etc/GMT-3","Europe/Istanbul|Europe/Minsk","Europe/Istanbul|Turkey","Europe/Lisbon|Atlantic/Canary","Europe/Lisbon|Atlantic/Faeroe","Europe/Lisbon|Atlantic/Faroe","Europe/Lisbon|Atlantic/Madeira","Europe/Lisbon|Portugal","Europe/Lisbon|WET","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|Europe/Kirov","Europe/Moscow|Europe/Simferopol","Europe/Moscow|W-SU","Europe/Paris|Africa/Ceuta","Europe/Paris|Arctic/Longyearbyen","Europe/Paris|Atlantic/Jan_Mayen","Europe/Paris|CET","Europe/Paris|Europe/Amsterdam","Europe/Paris|Europe/Andorra","Europe/Paris|Europe/Belgrade","Europe/Paris|Europe/Berlin","Europe/Paris|Europe/Bratislava","Europe/Paris|Europe/Brussels","Europe/Paris|Europe/Budapest","Europe/Paris|Europe/Busingen","Europe/Paris|Europe/Copenhagen","Europe/Paris|Europe/Gibraltar","Europe/Paris|Europe/Ljubljana","Europe/Paris|Europe/Luxembourg","Europe/Paris|Europe/Madrid","Europe/Paris|Europe/Malta","Europe/Paris|Europe/Monaco","Europe/Paris|Europe/Oslo","Europe/Paris|Europe/Podgorica","Europe/Paris|Europe/Prague","Europe/Paris|Europe/Rome","Europe/Paris|Europe/San_Marino","Europe/Paris|Europe/Sarajevo","Europe/Paris|Europe/Skopje","Europe/Paris|Europe/Stockholm","Europe/Paris|Europe/Tirane","Europe/Paris|Europe/Vaduz","Europe/Paris|Europe/Vatican","Europe/Paris|Europe/Vienna","Europe/Paris|Europe/Warsaw","Europe/Paris|Europe/Zagreb","Europe/Paris|Europe/Zurich","Europe/Paris|Poland","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Chatham|NZ-CHAT","Pacific/Easter|Chile/EasterIsland","Pacific/Galapagos|Etc/GMT+6","Pacific/Gambier|Etc/GMT+9","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Kiritimati|Etc/GMT-14","Pacific/Niue|Etc/GMT+11","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Pitcairn|Etc/GMT+8","Pacific/Tahiti|Etc/GMT+10","Pacific/Tahiti|Pacific/Rarotonga","Pacific/Tongatapu|Etc/GMT-13","Pacific/Tongatapu|Pacific/Enderbury","Pacific/Tongatapu|Pacific/Fakaofo","Pacific/Tongatapu|Pacific/Kanton"],countries:["AD|Europe/Andorra","AE|Asia/Dubai","AF|Asia/Kabul","AG|America/Puerto_Rico America/Antigua","AI|America/Puerto_Rico America/Anguilla","AL|Europe/Tirane","AM|Asia/Yerevan","AO|Africa/Lagos Africa/Luanda","AQ|Antarctica/Casey Antarctica/Davis Antarctica/Mawson Antarctica/Palmer Antarctica/Rothera Antarctica/Troll Asia/Urumqi Pacific/Auckland Pacific/Port_Moresby Asia/Riyadh Antarctica/McMurdo Antarctica/DumontDUrville Antarctica/Syowa Antarctica/Vostok","AR|America/Argentina/Buenos_Aires America/Argentina/Cordoba America/Argentina/Salta America/Argentina/Jujuy America/Argentina/Tucuman America/Argentina/Catamarca America/Argentina/La_Rioja America/Argentina/San_Juan America/Argentina/Mendoza America/Argentina/San_Luis America/Argentina/Rio_Gallegos America/Argentina/Ushuaia","AS|Pacific/Pago_Pago","AT|Europe/Vienna","AU|Australia/Lord_Howe Antarctica/Macquarie Australia/Hobart Australia/Melbourne Australia/Sydney Australia/Broken_Hill Australia/Brisbane Australia/Lindeman Australia/Adelaide Australia/Darwin Australia/Perth Australia/Eucla","AW|America/Puerto_Rico America/Aruba","AX|Europe/Helsinki Europe/Mariehamn","AZ|Asia/Baku","BA|Europe/Belgrade Europe/Sarajevo","BB|America/Barbados","BD|Asia/Dhaka","BE|Europe/Brussels","BF|Africa/Abidjan Africa/Ouagadougou","BG|Europe/Sofia","BH|Asia/Qatar Asia/Bahrain","BI|Africa/Maputo Africa/Bujumbura","BJ|Africa/Lagos Africa/Porto-Novo","BL|America/Puerto_Rico America/St_Barthelemy","BM|Atlantic/Bermuda","BN|Asia/Kuching Asia/Brunei","BO|America/La_Paz","BQ|America/Puerto_Rico America/Kralendijk","BR|America/Noronha America/Belem America/Fortaleza America/Recife America/Araguaina America/Maceio America/Bahia America/Sao_Paulo America/Campo_Grande America/Cuiaba America/Santarem America/Porto_Velho America/Boa_Vista America/Manaus America/Eirunepe America/Rio_Branco","BS|America/Toronto America/Nassau","BT|Asia/Thimphu","BW|Africa/Maputo Africa/Gaborone","BY|Europe/Minsk","BZ|America/Belize","CA|America/St_Johns America/Halifax America/Glace_Bay America/Moncton America/Goose_Bay America/Toronto America/Iqaluit America/Winnipeg America/Resolute America/Rankin_Inlet America/Regina America/Swift_Current America/Edmonton America/Cambridge_Bay America/Inuvik America/Dawson_Creek America/Fort_Nelson America/Whitehorse America/Dawson America/Vancouver America/Panama America/Puerto_Rico America/Phoenix America/Blanc-Sablon America/Atikokan America/Creston","CC|Asia/Yangon Indian/Cocos","CD|Africa/Maputo Africa/Lagos Africa/Kinshasa Africa/Lubumbashi","CF|Africa/Lagos Africa/Bangui","CG|Africa/Lagos Africa/Brazzaville","CH|Europe/Zurich","CI|Africa/Abidjan","CK|Pacific/Rarotonga","CL|America/Santiago America/Punta_Arenas Pacific/Easter","CM|Africa/Lagos Africa/Douala","CN|Asia/Shanghai Asia/Urumqi","CO|America/Bogota","CR|America/Costa_Rica","CU|America/Havana","CV|Atlantic/Cape_Verde","CW|America/Puerto_Rico America/Curacao","CX|Asia/Bangkok Indian/Christmas","CY|Asia/Nicosia Asia/Famagusta","CZ|Europe/Prague","DE|Europe/Zurich Europe/Berlin Europe/Busingen","DJ|Africa/Nairobi Africa/Djibouti","DK|Europe/Berlin Europe/Copenhagen","DM|America/Puerto_Rico America/Dominica","DO|America/Santo_Domingo","DZ|Africa/Algiers","EC|America/Guayaquil Pacific/Galapagos","EE|Europe/Tallinn","EG|Africa/Cairo","EH|Africa/El_Aaiun","ER|Africa/Nairobi Africa/Asmara","ES|Europe/Madrid Africa/Ceuta Atlantic/Canary","ET|Africa/Nairobi Africa/Addis_Ababa","FI|Europe/Helsinki","FJ|Pacific/Fiji","FK|Atlantic/Stanley","FM|Pacific/Kosrae Pacific/Port_Moresby Pacific/Guadalcanal Pacific/Chuuk Pacific/Pohnpei","FO|Atlantic/Faroe","FR|Europe/Paris","GA|Africa/Lagos Africa/Libreville","GB|Europe/London","GD|America/Puerto_Rico America/Grenada","GE|Asia/Tbilisi","GF|America/Cayenne","GG|Europe/London Europe/Guernsey","GH|Africa/Abidjan Africa/Accra","GI|Europe/Gibraltar","GL|America/Nuuk America/Danmarkshavn America/Scoresbysund America/Thule","GM|Africa/Abidjan Africa/Banjul","GN|Africa/Abidjan Africa/Conakry","GP|America/Puerto_Rico America/Guadeloupe","GQ|Africa/Lagos Africa/Malabo","GR|Europe/Athens","GS|Atlantic/South_Georgia","GT|America/Guatemala","GU|Pacific/Guam","GW|Africa/Bissau","GY|America/Guyana","HK|Asia/Hong_Kong","HN|America/Tegucigalpa","HR|Europe/Belgrade Europe/Zagreb","HT|America/Port-au-Prince","HU|Europe/Budapest","ID|Asia/Jakarta Asia/Pontianak Asia/Makassar Asia/Jayapura","IE|Europe/Dublin","IL|Asia/Jerusalem","IM|Europe/London Europe/Isle_of_Man","IN|Asia/Kolkata","IO|Indian/Chagos","IQ|Asia/Baghdad","IR|Asia/Tehran","IS|Africa/Abidjan Atlantic/Reykjavik","IT|Europe/Rome","JE|Europe/London Europe/Jersey","JM|America/Jamaica","JO|Asia/Amman","JP|Asia/Tokyo","KE|Africa/Nairobi","KG|Asia/Bishkek","KH|Asia/Bangkok Asia/Phnom_Penh","KI|Pacific/Tarawa Pacific/Kanton Pacific/Kiritimati","KM|Africa/Nairobi Indian/Comoro","KN|America/Puerto_Rico America/St_Kitts","KP|Asia/Pyongyang","KR|Asia/Seoul","KW|Asia/Riyadh Asia/Kuwait","KY|America/Panama America/Cayman","KZ|Asia/Almaty Asia/Qyzylorda Asia/Qostanay Asia/Aqtobe Asia/Aqtau Asia/Atyrau Asia/Oral","LA|Asia/Bangkok Asia/Vientiane","LB|Asia/Beirut","LC|America/Puerto_Rico America/St_Lucia","LI|Europe/Zurich Europe/Vaduz","LK|Asia/Colombo","LR|Africa/Monrovia","LS|Africa/Johannesburg Africa/Maseru","LT|Europe/Vilnius","LU|Europe/Brussels Europe/Luxembourg","LV|Europe/Riga","LY|Africa/Tripoli","MA|Africa/Casablanca","MC|Europe/Paris Europe/Monaco","MD|Europe/Chisinau","ME|Europe/Belgrade Europe/Podgorica","MF|America/Puerto_Rico America/Marigot","MG|Africa/Nairobi Indian/Antananarivo","MH|Pacific/Tarawa Pacific/Kwajalein Pacific/Majuro","MK|Europe/Belgrade Europe/Skopje","ML|Africa/Abidjan Africa/Bamako","MM|Asia/Yangon","MN|Asia/Ulaanbaatar Asia/Hovd Asia/Choibalsan","MO|Asia/Macau","MP|Pacific/Guam Pacific/Saipan","MQ|America/Martinique","MR|Africa/Abidjan Africa/Nouakchott","MS|America/Puerto_Rico America/Montserrat","MT|Europe/Malta","MU|Indian/Mauritius","MV|Indian/Maldives","MW|Africa/Maputo Africa/Blantyre","MX|America/Mexico_City America/Cancun America/Merida America/Monterrey America/Matamoros America/Chihuahua America/Ciudad_Juarez America/Ojinaga America/Mazatlan America/Bahia_Banderas America/Hermosillo America/Tijuana","MY|Asia/Kuching Asia/Singapore Asia/Kuala_Lumpur","MZ|Africa/Maputo","NA|Africa/Windhoek","NC|Pacific/Noumea","NE|Africa/Lagos Africa/Niamey","NF|Pacific/Norfolk","NG|Africa/Lagos","NI|America/Managua","NL|Europe/Brussels Europe/Amsterdam","NO|Europe/Berlin Europe/Oslo","NP|Asia/Kathmandu","NR|Pacific/Nauru","NU|Pacific/Niue","NZ|Pacific/Auckland Pacific/Chatham","OM|Asia/Dubai Asia/Muscat","PA|America/Panama","PE|America/Lima","PF|Pacific/Tahiti Pacific/Marquesas Pacific/Gambier","PG|Pacific/Port_Moresby Pacific/Bougainville","PH|Asia/Manila","PK|Asia/Karachi","PL|Europe/Warsaw","PM|America/Miquelon","PN|Pacific/Pitcairn","PR|America/Puerto_Rico","PS|Asia/Gaza Asia/Hebron","PT|Europe/Lisbon Atlantic/Madeira Atlantic/Azores","PW|Pacific/Palau","PY|America/Asuncion","QA|Asia/Qatar","RE|Asia/Dubai Indian/Reunion","RO|Europe/Bucharest","RS|Europe/Belgrade","RU|Europe/Kaliningrad Europe/Moscow Europe/Simferopol Europe/Kirov Europe/Volgograd Europe/Astrakhan Europe/Saratov Europe/Ulyanovsk Europe/Samara Asia/Yekaterinburg Asia/Omsk Asia/Novosibirsk Asia/Barnaul Asia/Tomsk Asia/Novokuznetsk Asia/Krasnoyarsk Asia/Irkutsk Asia/Chita Asia/Yakutsk Asia/Khandyga Asia/Vladivostok Asia/Ust-Nera Asia/Magadan Asia/Sakhalin Asia/Srednekolymsk Asia/Kamchatka Asia/Anadyr","RW|Africa/Maputo Africa/Kigali","SA|Asia/Riyadh","SB|Pacific/Guadalcanal","SC|Asia/Dubai Indian/Mahe","SD|Africa/Khartoum","SE|Europe/Berlin Europe/Stockholm","SG|Asia/Singapore","SH|Africa/Abidjan Atlantic/St_Helena","SI|Europe/Belgrade Europe/Ljubljana","SJ|Europe/Berlin Arctic/Longyearbyen","SK|Europe/Prague Europe/Bratislava","SL|Africa/Abidjan Africa/Freetown","SM|Europe/Rome Europe/San_Marino","SN|Africa/Abidjan Africa/Dakar","SO|Africa/Nairobi Africa/Mogadishu","SR|America/Paramaribo","SS|Africa/Juba","ST|Africa/Sao_Tome","SV|America/El_Salvador","SX|America/Puerto_Rico America/Lower_Princes","SY|Asia/Damascus","SZ|Africa/Johannesburg Africa/Mbabane","TC|America/Grand_Turk","TD|Africa/Ndjamena","TF|Asia/Dubai Indian/Maldives Indian/Kerguelen","TG|Africa/Abidjan Africa/Lome","TH|Asia/Bangkok","TJ|Asia/Dushanbe","TK|Pacific/Fakaofo","TL|Asia/Dili","TM|Asia/Ashgabat","TN|Africa/Tunis","TO|Pacific/Tongatapu","TR|Europe/Istanbul","TT|America/Puerto_Rico America/Port_of_Spain","TV|Pacific/Tarawa Pacific/Funafuti","TW|Asia/Taipei","TZ|Africa/Nairobi Africa/Dar_es_Salaam","UA|Europe/Simferopol Europe/Kyiv","UG|Africa/Nairobi Africa/Kampala","UM|Pacific/Pago_Pago Pacific/Tarawa Pacific/Midway Pacific/Wake","US|America/New_York America/Detroit America/Kentucky/Louisville America/Kentucky/Monticello America/Indiana/Indianapolis America/Indiana/Vincennes America/Indiana/Winamac America/Indiana/Marengo America/Indiana/Petersburg America/Indiana/Vevay America/Chicago America/Indiana/Tell_City America/Indiana/Knox America/Menominee America/North_Dakota/Center America/North_Dakota/New_Salem America/North_Dakota/Beulah America/Denver America/Boise America/Phoenix America/Los_Angeles America/Anchorage America/Juneau America/Sitka America/Metlakatla America/Yakutat America/Nome America/Adak Pacific/Honolulu","UY|America/Montevideo","UZ|Asia/Samarkand Asia/Tashkent","VA|Europe/Rome Europe/Vatican","VC|America/Puerto_Rico America/St_Vincent","VE|America/Caracas","VG|America/Puerto_Rico America/Tortola","VI|America/Puerto_Rico America/St_Thomas","VN|Asia/Bangkok Asia/Ho_Chi_Minh","VU|Pacific/Efate","WF|Pacific/Tarawa Pacific/Wallis","WS|Pacific/Apia","YE|Asia/Riyadh Asia/Aden","YT|Africa/Nairobi Indian/Mayotte","ZA|Africa/Johannesburg","ZM|Africa/Maputo Africa/Lusaka","ZW|Africa/Maputo Africa/Harare"]}),o});
/*! (c) Copyright 2013-2024 NETRONIC Software GmbH. All rights reserved. Version 9.0.1 */
"use strict";!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("hammerjs"),require("d3-format"),require("d3-selection"),require("d3-time-format"),require("d3-transition")):"function"==typeof define&&define.amd?define(["hammerjs","d3-format","d3-selection","d3-time-format","d3-transition"],t):"object"==typeof exports?exports.nwaf_apptools=t(require("hammerjs"),require("d3-format"),require("d3-selection"),require("d3-time-format"),require("d3-transition")):e.nwaf_apptools=t(e.Hammer,e.d3,e.d3,e.d3,e.d3)}(globalThis,((e,t,i,n,r)=>(()=>{var a={6580:(e,t,i)=>{var n=i(9744),r=i(5244).eventListenerHelper,a=i(3353),s=".nautoscroll",o={optionDefaults:Object.assign({},a.prototype.optionDefaults,{verticallyActive:!1,horizontallyActive:!1,outsideActive:!0,hotMargin:50,initialDelay:500,delay:100,horDistance:0,verDistance:0,distance:10,callback:null}),construct:function(){this._super.apply(this,arguments),this._eventsRegistered=!1,this._cachedPointerMoveEvent=null,this._scrollEventTriggered=!1,this._registerOrUnregisterEvents()},destroy:function(){this.options.verticallyActive=this.options.horizontallyActive=!1,this._registerOrUnregisterEvents(),this._super()},_setOption:function(e,t){"horizontallyActive"===e||"verticallyActive"===e?(this._super(e,t),this._registerOrUnregisterEvents()):this._super(e,t)},_registerOrUnregisterEvents:function(){var e=this;e.options.horizontallyActive||e.options.verticallyActive?e._eventsRegistered||(r.on(e._element,"pointermove",s,e._onPointerMove.bind(e)).on(e._element,"scroll",s,e._onScroll.bind(e)),e._eventsRegistered=!0):e._eventsRegistered&&(r.off(e._element,s),e._eventsRegistered=!1,void 0!==e._timerID&&e._stop())},_onScroll:function(){this.options.callback?.call(this,this._cachedPointerMoveEvent)},_onPointerMove:function(e){var t=this,i={},n=t._element.getBoundingClientRect(),r=e.pageX,a=e.pageY,s=t.options.hotMargin;"number"==typeof s&&(s={left:s,top:s,right:s,bottom:s});var o=n.width/(s.left+s.right);o<1&&(s.left*=o,s.right*=o);var l=n.height/(s.top+s.bottom);l<1&&(s.top*=l,s.bottom*=l),t._cachedPointerMoveEvent=e,t.options.horizontallyActive&&(i.left=(t.options.outsideActive||n.left<=r)&&r<n.left+s.left,i.right=n.right-s.right<=r&&(t.options.outsideActive||r<n.right)),t.options.verticallyActive&&(i.top=(t.options.outsideActive||n.top<=a)&&a<n.top+s.top,i.bottom=n.bottom-s.bottom<=a&&(t.options.outsideActive||a<n.bottom)),i.left||i.top||i.right||i.bottom?(t._inMargins=i,void 0!==t._timerID&&t._stop(),t.options.initialDelay?t._timerID=window.setTimeout((function(){t._onTimer()}),t.options.initialDelay):t._onTimer()):t._stop()},_onTimer:function(){var e=this;e._timerID=window.setTimeout((function(){e._onTimer()}),Math.max(e.options.delay,2));var t=e._element.scrollLeft,i=e._element.scrollTop,n=e.options.horDistance>0?e.options.horDistance:Math.max(e.options.distance,.01);n<1&&(n=e._element.offsetWidth*n);var r,a,s=e.options.verDistance>0?e.options.verDistance:Math.max(e.options.distance,.01);s<1&&(s=e._element.offsetHeight*s),e._inMargins.left?r=t-n:e._inMargins.right&&(r=t+n),e._inMargins.top?a=i-s:e._inMargins.bottom&&(a=i+s),void 0!==r&&r!==t&&(e._element.scrollLeft=r),void 0!==a&&a!==i&&(e._element.scrollTop=a)},_stop:function(){var e=this;void 0!==e._timerID&&(window.clearTimeout(e._timerID),e._timerID=void 0)},isActive:function(){return!!this._timerID}};e.exports=n.extendClass("nAutoscrollWidget",a,o)},927:e=>{var t,i=!1,n=/xyz/.test((function(){xyz}))?/\b_super\b/:/.*/,r=function(){};r.prototype._nClassName="Class",r.extend=t=function(e,r){var a=this.prototype;i=!0;var s=new this;for(var o in i=!1,e)s[o]="function"==typeof e[o]&&"function"==typeof a[o]&&n.test(e[o])?function(e,t){return function(){var i=this._super;this._super=a[e];var n=t.apply(this,arguments);return this._super=i,n}}(o,e[o]):e[o];function l(){if(!i){var e=Object.getPrototypeOf(this);e&&(this._nClassName=e._nClassName),this.construct&&this.construct.apply(this,arguments)}}return l.prototype=s,l.prototype.constructor=l,l.extend=t,l.prototype._nClassName=r,l},e.exports=r},9744:e=>{e.exports={extendClass:function(e,t,i){if(t)return t.extend(i,e)}}},7514:e=>{var t=function(){this._isActive=!1,this._closeContextMenuCallbacks=[]};t.prototype={close:function(e){var t=this;if(t._isActive){t.setActive(!1);var i=function(){t._closeContextMenuCallbacks.forEach((function(e){e()}))};void 0===t._callbackTimerID&&(e?t._callbackTimerID=window.setTimeout((function(){delete t._callbackTimerID,i()}),50):i())}},addCallbackForClose:function(e){e&&this._closeContextMenuCallbacks.push(e)},removeCallbackForClose:function(e){if(e){var t=this._closeContextMenuCallbacks.indexOf(e);t>=0&&this._closeContextMenuCallbacks.splice(t,1)}},isActive:function(){return this._isActive},setActive:function(e){this._isActive=e},destroy:function(){this._closeContextMenuCallbacks.length=0,delete this._closeContextMenuCallbacks,void 0!==this._callbackTimerID&&window.clearTimeout(this._callbackTimerID)}},e.exports=t},747:e=>{e.exports={toBoolean:function(e){switch(typeof e){case"boolean":return e;case"string":switch(e.toLowerCase()){case"true":case"1":return!0;case"false":case"0":return!1}break;case"number":switch(e){case 1:return!0;case 0:return!1}}return!1}}},6660:e=>{var t=function(e,t,i){this._minimumLinearExtent=isNaN(+e)?1e4:e,this._maximumLinearExtent=isNaN(+t)?1e5:t,this._linearReserve=isNaN(+i)?1e4:i,this._currentViewScrollOffset=0,this._currentViewExtent=0,this._currentChartExtent=0,this._currentLinearMinimum=0,this._currentLinearMaximum=0};Object.assign(t.prototype,{updateTransformIfNecessary:function(e){"object"!=typeof e&&(e={});var t=+e.viewScrollOffset>=0?+e.viewScrollOffset:void 0;t===this._currentViewScrollOffset&&(t=void 0);var i=+e.viewExtent;i===this._currentViewExtent&&(i=void 0);var n=+e.chartExtent;n===this._currentChartExtent&&(n=void 0);var r=+e.chartStretchCenterCoordinate;if(n>=0){if(r>=0){var a=(this._currentLinearMaximum-this._currentLinearMinimum)*(n/this._currentChartExtent),s=(r-this._currentLinearMinimum)/(this._currentLinearMaximum-this._currentLinearMinimum);this._currentLinearMinimum=Math.floor(Math.max(this._currentLinearMinimum-a*s,0)),this._currentLinearMaximum=Math.min(this._currentLinearMinimum+a,n)}else this._currentLinearMaximum=Math.min(this._currentLinearMaximum,n);this._currentChartExtent=n}i>=0&&(this._currentViewExtent=i),t>=0&&(this._currentViewScrollOffset=t);var o=this._currentViewScrollOffset,l=o+this._currentViewExtent,c=this._currentLinearMaximum-this._currentLinearMinimum;if(isNaN(c)||this._currentViewExtent>0&&(o<this._currentLinearMinimum||l>this._currentLinearMaximum||c<Math.min(this._minimumLinearExtent,this._currentChartExtent)||c>this._maximumLinearExtent)){var u=this._currentViewScrollOffset+this._currentViewExtent/2,h=(this._minimumLinearExtent+this._maximumLinearExtent)/2;return this._currentLinearMinimum=Math.floor(Math.max(u-h/2,0)),this._currentLinearMaximum=Math.min(this._currentLinearMinimum+h,this._currentChartExtent),!0}return!1},transform:function(e){return Math.max(Math.min(e,this._currentLinearMaximum+this._linearReserve)-this._currentLinearMinimum,-this._linearReserve)},reverseTransform:function(e){return e+this._currentLinearMinimum},limit:function(e){return Math.max(Math.min(e,this._currentLinearMaximum+this._linearReserve)-this._currentLinearMinimum,-this._linearReserve)+this._currentLinearMinimum},getCurrentLowerLimit:function(){return this._currentLinearMinimum-this._linearReserve},getCurrentUpperLimit:function(){return this._currentLinearMaximum+this._linearReserve},isCoordOutsideLimits:function(e){return+e<this._currentLinearMinimum-this._linearReserve?-1:e>this._currentLinearMaximum+this._linearReserve?1:0}}),e.exports=t},5791:(e,t,i)=>{var n=i(8680),r="ncursor-",a={grab:!0,grabbing:!0,"ew-grabbing":!0,"grab-important":!0,"grabbing-important":!0,"ew-grabbing-important":!0},s={setCursor:function(e,t,i){var s=n.select(e),o=s.attr("data-ncursor"),l=i?t+"-important":t,c=i?t+" !important":t;if((o||"")!==(l||"")){if(o&&(s.classed(r+o,!1),!t)){let e=s.attr("data-ncursor-savedstyle");s.style("cursor",e||null),s.attr("data-ncursor-savedstyle",null),s.attr("data-ncursor",e)}if(t){if(!o){let e=s.style("cursor");"auto"===e&&(e=""),s.attr("data-ncursor-savedstyle",e),s.style("cursor",null)}a[l]||(a[l]=!0,n.select(document.head).append("style").text("."+r+l+" { cursor: "+c+" }")),s.classed(r+l,!0)}s.attr("data-ncursor",l||"")}},removeCursorTemporarily:function(e){var t=n.select(e),i=t.attr("data-ncursor");i&&t.classed(r+i,!1)},restoreRemovedCursor:function(e){var t=n.select(e),i=t.attr("data-ncursor");i&&t.classed(r+i,!0)}};e.exports=s},9327:(e,t,i)=>{var n=i(8680),r={};n.version[0]>="4"||"."!==n.version[1]?r.transform=function(e){var t={},i=e?.indexOf("translate(");if(i>=0){var n=e.indexOf(")",i),r=e.substring(i+10,n);r.indexOf(",")<0?t.translate=r.split(" ").map((function(e){return parseInt(e)})):t.translate=r.split(",").map((function(e){return parseInt(e)})),t.rest=e.substring(n+1)}else t.translate=[0,0],t.rest=e;return t.toString=function(){return"translate("+this.translate.join(",")+")"+this.rest},t}:r.transform=n.transform,e.exports=r},5244:(e,t,i)=>{var n,r=i(8680),a=i(1194),s="__netrdehf",o={eventListenerHelper:{on:function(e,t,i,n){return t=t.split(" "),"function"==typeof i?n=i:t=t.map((e=>`${e}${i}`)),(Array.isArray(e)?e:[e]).forEach((e=>{if(e){let i=e[s];i||(i=e[s]=new Map),t.forEach((t=>{let[r,a]=t.split("."),s=i.get(t);s&&e.removeEventListener(r,s),e.addEventListener(r,n),i.set(t,n)}))}})),o.eventListenerHelper},off:function(e,t,i){return t=t.split(" "),i&&(i.startsWith(".")||(i=`.${i}`),t=t.map((e=>`${e}${i}`))),(Array.isArray(e)?e:[e]).forEach((e=>{if(e){let n=e[s];n&&t.forEach((t=>{let[r,a]=t.split(".");if(r&&"*"!==a){let i=n.get(t);i&&(e.removeEventListener(r,i),n.delete(t))}else{for(let t of n.keys()){let[r,s]=t.split(".");"*"!==i&&s!==a||(e.removeEventListener(r,n.get(t)),n.delete(t))}n.size||delete e[s]}}))}})),o.eventListenerHelper}},mouseEnterAndLeaveListener:function(e,t,i,n){var r=this;r._svgParentGElem=i,r._onEnterCallback=e,r._onLeaveCallback=t,r._withPointerMoveEvents=n,r._svgGElems=[],r._EVENT_NAMESPACE=".nwaf-apptools-domhelper"+a.generate()}};o.mouseEnterAndLeaveListener.prototype={add:function(e){var t=this;let a=o.eventListenerHelper;t._svgGElems.push(e),n||(n=i(9948)),r.select(e).attr(n.POINTER_ENTER_ATTR_NAME,"1").attr(n.POINTER_LEAVE_ATTR_NAME,"1"),a.on(e,"pointerenter",t._EVENT_NAMESPACE,(function(i){t._lastEnteredElem&&(t._onLeaveCallback?.(t._lastEnteredElem,i),a.off(t._lastEnteredElem,"pointerleave pointermove",t._EVENT_NAMESPACE)),t._lastEnteredElem=e,t._onEnterCallback?.(e,i),a.on(e,"pointerleave",t._EVENT_NAMESPACE,(function(i){t._lastEnteredElem===e&&(t._lastEnteredElem=void 0,t._onLeaveCallback?.(e,i),a.off(e,"pointerleave pointermove",t._EVENT_NAMESPACE))})),t._withPointerMoveEvents&&a.on(e,"pointermove",t._EVENT_NAMESPACE,(function(i){t._onEnterCallback?.(e,i)}))}))},remove:function(e){var t=this,i=t._svgGElems.indexOf(e);i>=0&&(t._svgGElems.splice(i,1),t._doRemove(e))},_doRemove:function(e){let t=o.eventListenerHelper;r.select(e).attr(n.POINTER_ENTER_ATTR_NAME,null).attr(n.POINTER_LEAVE_ATTR_NAME,null),t.off(e,"pointerenter pointermove pointerleave",this._EVENT_NAMESPACE)},dispose:function(){var e=this;e._svgGElems.forEach((function(t){e._doRemove(t)}))}},e.exports=o},9416:(e,t,i)=>{var n=i(927),r=i(9744),a=i(6714),s=i(5175),o=i(7947),l={construct:function(e,t,i,n,r,s){if(this._propertyName=e,this._classConstructor=t,this._primaryKeyNames=i,this._relationshipInfos=void 0!==n?(this._relationshipInfos||[]).concat(n):this._relationshipInfos,this._booleans=void 0!==r?Object.assign({},r):{},this._functions=void 0!==s?Object.assign({},s):{},this._functions.anyRelationshipChangedFunc||(this._functions.anyRelationshipChangedFunc=this.defaultAnyRelationshipChangedFunc),this._subDescriptorsDepository=new a("PropertyName"),this._workingLevel=-1,(null!=i||null!=this._relationshipInfos)&&null!=t){var l=t.prototype;if(null!=l){var c=function(e){e in l==!1&&Object.defineProperty(l,e,{get:function(){let t=this._data?.[e];return t||0===t?t.toString():void 0}})},u=function(e){e.autoPropertyGenerationDisabled||c(e.primaryKeyName)};null!=i&&o.each(i,c),null!=this._relationshipInfos&&o.each(this._relationshipInfos,(function(e){e.autoPropertyGenerationDisabled||o.each(e.primaryKeyInfos,u)}))}}},defaultAnyRelationshipChangedFunc:function(e,t,i){return t.detectChangedRelationships(i)},incWorkingLevel:function(){return this._workingLevel++},decWorkingLevel:function(){return--this._workingLevel},getWorkingLevel:function(){return this._workingLevel},getPropertyName:function(){return this._propertyName},isArrayProperty:function(){return this._booleans.isArrayProperty},getClassConstructor:function(){return this._classConstructor},getPrimaryKeyNames:function(){return this._primaryKeyNames},getPrimaryKeyMustBeUnique:function(){return void 0===this._booleans.primaryKeyMustBeUnique||this._booleans.primaryKeyMustBeUnique},getEnableBridge:function(){return void 0!==this._booleans.enableBridge&&this._booleans.enableBridge},getEnableIterator:function(){return void 0!==this._booleans.enableIterator&&this._booleans.enableIterator},getEnableRelationshipCache:function(){return void 0!==this._booleans.enableRelationshipCache&&this._booleans.enableRelationshipCache},getEnableCycleDetection:function(){return void 0!==this._booleans.enableCycleDetection&&this._booleans.enableCycleDetection},getEnableInheritChangedRelationships:function(){return void 0!==this._booleans.enableInheritChangedRelationships&&this._booleans.enableInheritChangedRelationships},getSubDescriptorsArray:function(){return this._subDescriptorsDepository.getArray()},getBooleans:function(){return this._booleans},getFunctions:function(){return this._functions},getRelationshipInfos:function(){return this._relationshipInfos},getSharedDepositoryGetterFunc:function(){return this._functions.sharedDepositoryGetterFunc},getDataValidationFunc:function(){return this._functions.dataValidationFunc},getPrimaryKeyManipulationFunc:function(){return this._functions.primaryKeyManipulationFunc},getHandleHierarchyParentFunc:function(){return this._functions.handleHierarchyParentFunc},getAnyRelationshipChangedFunc:function(){return this._functions.anyRelationshipChangedFunc},getHandleRelationshipChangedFunc:function(){return this._functions.handleRelationshipChangedFunc},getPreAddToParentFunc:function(){return this._functions.preAddToParentFunc},getPostAddToParentFunc:function(){return this._functions.postAddToParentFunc},getPreRemoveFromParentFunc:function(){return this._functions.preRemoveFromParentFunc},getPostRemoveFromParentFunc:function(){return this._functions.postRemoveFromParentFunc},getHandleCycleDetectedFunc:function(){return this._functions.handleCycleDetectedFunc},getIteratorContentGetterFunc:function(){return this._functions.iteratorContentGetterFunc},addSubDescriptor:function(e,t){this._subDescriptorsDepository.add(e,t)},getSubDescriptor:function(e){return this._subDescriptorsDepository.getObjectByPrimaryKey(e)},getPrimaryKey:function(e,t){return s.getPrimaryKey(e,this._primaryKeyNames,this,this._functions.primaryKeyManipulationFunc,t)},getSharedDepository:function(){return this._functions.sharedDepositoryGetterFunc?this._functions.sharedDepositoryGetterFunc.call(this):void 0},dataValidation:function(e,t,i){return this._functions.dataValidationFunc?this._functions.dataValidationFunc.call(this,e,t,i):t},handleHierarchyParent:function(e,t){return this._functions.handleHierarchyParentFunc?this._functions.handleHierarchyParentFunc.call(this,e,t):e},anyRelationshipChanged:function(e,t,i){return this._functions.anyRelationshipChangedFunc?this._functions.anyRelationshipChangedFunc.call(this,e,t,i):void 0},handleRelationshipChanged:function(e,t,i,n){return this._functions.handleRelationshipChangedFunc?this._functions.handleRelationshipChangedFunc.call(this,e,t,i,n):null},handleCycleDetected:function(e,t){return this._functions.handleCycleDetectedFunc?this._functions.handleCycleDetectedFunc.call(this,e,t):null},handlePreAddToParent:function(e){return!this._functions.preAddToParentFunc||this._functions.preAddToParentFunc.call(this,e)},handlePostAddToParent:function(e){return!this._functions.postAddToParentFunc||this._functions.postAddToParentFunc.call(this,e)},handlePreRemoveFromParent:function(e,t){return!this._functions.preRemoveFromParentFunc||this._functions.preRemoveFromParentFunc.call(this,e,t)},handlePostRemoveFromParent:function(e,t){return!this._functions.postRemoveFromParentFunc||this._functions.postRemoveFromParentFunc.call(this,e,t)},getIteratorContent:function(e,t){return this._functions.iteratorContentGetterFunc?this._functions.iteratorContentGetterFunc.call(this,e,t):t.currentIndex<=t.maxIndex},getRelationshipInfoTo:function(e){if(null!=this._relationshipInfos){var t=this.getPropertyName();return s.getRelationshipInfoTo(this._relationshipInfos,t,e)}},isActive:function(){return!this._functions.isActiveFunc||this._functions.isActiveFunc.call(this)}},c=r.extendClass("nDataDescriptor",n,l);Object.defineProperty(c.prototype,"PropertyName",{get:function(){return this._propertyName}}),e.exports=c},994:(e,t,i)=>{var n=i(8680),r=i(235),a=i(46),s=self&&self.moment?self.moment:i.m.null,o={a:"ddd",A:"dddd",b:"MMM",B:"MMMM",d:"DD",e:"D",F:"YYYY-MM-DD",H:"HH",I:"hh",j:"DDDD",k:"H",l:"h",m:"MM",M:"mm",p:"A",S:"ss",u:"E",U:"ww",w:"d",W:"ww",y:"YY",Y:"YYYY",z:"ZZ",Z:"z","%":"%"},l=new Date(2e3,0,1),c={ms:1,s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5,M:2592e6,Q:7776e6,y:31104e6},u={_currentTimeZone:"",_currentDeterminedTimeZone:"",isMomentJSCurrentlyUsed:!1,_cachedYearForIsDST:null,timeZone:function(e){var t=u;if(0!==arguments.length){if(!(!e||null===s||s&&s.tz))throw new Error("moment-timezone.js is necessary but not found!");t._timeZone(e,!0)}return t._currentDeterminedTimeZone},_timeZone:function(e,t){var i=u;i._currentTimeZone!==e&&(i._currentTimeZone=e,i.isMomentJSCurrentlyUsed=!!i._currentTimeZone,i._isUTC="UTC"===e,i._currentDeterminedTimeZone="local"===i._currentTimeZone?s.tz.guess():i._currentTimeZone,t&&n.select(window).dispatch("netronic_nDateHelper_timeZoneChanged"))},updateManually:function(){var e=u;e._currentDeterminedTimeZone="local"===e._currentTimeZone?s.tz.guess():e._currentTimeZone,n.select(window).dispatch("netronic_nDateHelper_timeZoneChanged")},determineBestDateBetween:function(e,t){if(!e||!t||isNaN(e)||isNaN(t))return e;var i=function(e,t,i,n,r,a){var s,o={59:{0:10,30:4,15:3,45:3,10:2,20:2,40:2,50:2,5:1,25:1,35:1,55:1},23:{0:10,12:10,6:3,18:3,3:2,9:2,15:2,21:2,2:1,4:1,8:1,10:1,14:1,16:1,20:1,22:1},31:{1:10,10:2,20:2,30:2,5:1,15:1,25:1},11:{0:10,6:2,3:1,9:1}}[a],l=new Date(t);t.valueOf()===e.valueOf()&&r.call(l,n.call(l)-1);for(var c=-1;r.call(l,n.call(l)+1),!(l>i);){var u=o[n.call(l)]||0;if(u>c&&(c=u,s=new Date(l),10===c))break}return s};(e=new Date(e)).setMilliseconds(0);var n=e;return t.getFullYear()>e.getFullYear()?n=new Date(e.getFullYear()+1,0):t.getMonth()!==e.getMonth()?n=i(e,new Date(e.getFullYear(),e.getMonth()),t,Date.prototype.getMonth,Date.prototype.setMonth,11)||new Date(e.getFullYear(),e.getMonth()+1):t.getDate()!==e.getDate()?n=i(e,new Date(e.getFullYear(),e.getMonth(),e.getDate()),t,Date.prototype.getDate,Date.prototype.setDate,31)||new Date(e.getFullYear(),e.getMonth(),e.getDate()+1):t.getUTCHours()!==e.getUTCHours()?n=i(e,new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()),t,Date.prototype.getHours,Date.prototype.setHours,23)||new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()+1):t.getMinutes()!==e.getMinutes()?n=i(e,new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()),t,Date.prototype.getMinutes,Date.prototype.setMinutes,59)||new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()+1):t.getSeconds()!==e.getSeconds()&&(n=i(e,new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()),t,Date.prototype.getSeconds,Date.prototype.setSeconds,59)||n),n},isMoment:function(e){return u.isMomentJSCurrentlyUsed&&e instanceof s},dateToMomentIfNecessary:function(e){var t=u;return t.isMomentJSCurrentlyUsed?t._isUTC?s(e).utc():s.tz(e,t._currentDeterminedTimeZone):e},toDate:function(e){var t=u;return t.isMomentJSCurrentlyUsed&&t.isMoment(e)?e.toDate():e},toDisplayDate:function(e){var t=u;return t.isMomentJSCurrentlyUsed&&t.isMoment(e)?new Date(e.valueOf()+6e4*e.utcOffset()):e},createDateOrMoment:function(e){var t=u;return t.isMomentJSCurrentlyUsed?t._isUTC?s(e).utc():s.tz(e,t._currentDeterminedTimeZone):Array.isArray(e)?null:new Date(e)},addToDateOrMoment:function(e,t,i,n){var r=u;if(0===(i=Math.round(i)||1))return r.createDateOrMoment(e);if(n)return r.createDateOrMoment(e.valueOf()+c[t]*i);var a=r.isMomentJSCurrentlyUsed&&r.isMoment(e);if("h"===t&&Math.abs(i)>1){var s,o=r.isDST(e);if(a){s=r.createDateOrMoment(e).add(i,"h");var l=r.isDST(s);o&&!l&&s.add(1,"h")}else{s=new Date(e.getTime()+60*i*60*1e3);l=r.isDST(s);o&&!l&&s.setTime(s.getTime()+36e5)}return s}if(a)switch(t){case"ms":case"s":case"m":case"h":return r.createDateOrMoment(r.createDateOrMoment(e).utc().add(i,t).valueOf());case"d":case"w":case"M":case"Q":case"y":return r.createDateOrMoment(e).startOf("day").add(12,"h").add(i,t).startOf("day").milliseconds(60*e.hours()+60*e.minutes()+1e3*e.seconds()+e.milliseconds())}else switch(t){case"ms":return new Date(e.valueOf()+i);case"s":return new Date(e.valueOf()+1e3*i);case"m":return new Date(e.valueOf()+60*i*1e3);case"h":return new Date(e.valueOf()+60*i*60*1e3);case"d":return new Date(e.getFullYear(),e.getMonth(),e.getDate()+i);case"w":return new Date(e.getFullYear(),e.getMonth(),e.getDate()+7*i);case"M":return new Date(e.getFullYear(),e.getMonth()+i);case"Q":return new Date(e.getFullYear(),e.getMonth()+3*i);case"y":return new Date(e.getFullYear()+i,0)}},normalizeDateOrMoment:function(e,t,i,n){var a=u;if(n){var o=l.valueOf(),h=e.valueOf(),p=c[t]*i,_=Math.abs(h-o)%p;return h<o&&_&&(_=p-_),a.createDateOrMoment(h-_)}if(a.isMomentJSCurrentlyUsed&&a.isMoment(e))switch(t){case"s":e.seconds()%i&&(e=s(e.valueOf()-e.seconds()%i*1e3));break;case"m":e.minutes()%i&&(e=a.createDateOrMoment(e.valueOf()-e.minutes()%i*60*1e3));break;case"h":e.hours()%i&&(e=a.createDateOrMoment(e.valueOf()-e.hours()%i*60*60*1e3));break;case"w":var d=r.locale().firstDay;e.day()!==d&&e.date(e.date()-(e.day()||7)+d);break;case"Q":e.month(e.month()-e.month()%3)}else switch(t){case"s":e.getSeconds()%i&&e.setTime(e.valueOf()-e.getSeconds()%i*1e3);break;case"m":e.getMinutes()%i&&e.setTime(e.valueOf()-e.getMinutes()%i*60*1e3);break;case"h":e.getHours()%i&&e.setTime(e.valueOf()-e.getHours()%i*60*60*1e3);break;case"w":d=r.locale().firstDay;e.getDay()!==d&&e.setDate(e.getDate()-(7-(d-e.getDay()))%7);break;case"Q":e.setMonth(e.getMonth()-e.getMonth()%3)}return a.roundDateOrMoment(e,t)},roundDateOrMoment:function(e,t,i){var n=u;if(i){var a=l.valueOf(),s=e.valueOf(),o=c[t],h=Math.abs(s-a)%o;s<a&&h&&(h=o-h),e=n.createDateOrMoment(s-h)}else if(n.isMomentJSCurrentlyUsed&&n.isMoment(e)){var p=e.valueOf();switch(t){case"y":e.month(0);case"Q":case"M":e.date(1);case"d":e.hours(0),p=void 0;case"h":e.minutes(0);case"m":e.seconds(0);case"s":e.milliseconds(0),e.valueOf()<p-36e5&&(e=n.createDateOrMoment(e.valueOf()+60*Math.floor((p-e.valueOf())/60/60/1e3)*60*1e3));break;case"w":e.hours(0),e.minutes(0),e.seconds(0),e.milliseconds(0);var _=r.locale().firstDay;e.day()!==_&&e.date(e.date()-(e.day()||7)+_)}}else switch(t){case"y":e.setMonth(0);case"Q":case"M":e.setDate(1);case"d":e.setHours(0);case"h":e.getMinutes()&&e.setTime(e.valueOf()-60*e.getMinutes()*1e3);case"m":e.getSeconds()&&e.setTime(e.valueOf()-1e3*e.getSeconds());case"s":e.getMilliseconds()&&e.setTime(e.valueOf()-e.getMilliseconds());break;case"w":e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);_=r.locale().firstDay;e.getDay()!==_&&e.setDate(e.getDate()-(e.getDay()||7)+_)}return e},roundDateTimeWithExactStepping:function(e,t,i){var n,r,a=new Date(e);switch(t){case"h":a.getMinutes()&&a.setTime(a.valueOf()-60*a.getMinutes()*1e3),n=Date.prototype.getHours,r=Date.prototype.setHours;case"m":a.getSeconds()&&a.setTime(a.valueOf()-1e3*a.getSeconds()),n||(n=Date.prototype.getMinutes,r=Date.prototype.setMinutes);case"s":a.getMilliseconds()&&a.setTime(a.valueOf()-a.getMilliseconds()),n||(n=Date.prototype.getSeconds,r=Date.prototype.setSeconds)}var s=new Date(a),o=new Date(a),l=n.call(a);return r.call(s,l-l%i),r.call(o,l+i-l%i),Math.abs(s-e)<Math.abs(o-e)?s:o},d3TimeFormatToMomentFormat:function(e){var t=e.replace(/[^%](\w+)/g,(function(e){return"["+e+"]"}));return Object.keys(o).forEach((function(e){var i=o[e];t=t.replace("%"+e,i)})),t},formatDate:function(e,t,i,s,o){var l,c=u,h=c._currentTimeZone;"local"===h&&(h=void 0);var p=function(e,r){if(i)l=c.dateToRelativeDateTimeString(s);else{let i=e?.getIntlDateTimeFormatByKey(o??"default",h);if(i)l=i.format(s);else{var a=c.dateToMomentIfNecessary(s),u=r.date;switch(t){case"h":case"m":u+=" "+r.timeAccurateToMinute;break;case"s":u+=" "+r.time}l=c.isMomentJSCurrentlyUsed?c.dateToMomentIfNecessary(s).format(c.d3TimeFormatToMomentFormat(u)):n.timeFormat(u)(a)}}};return e instanceof a?e.applyDateFormat((function(){p(e,e.params())})):p(void 0,r.locale()),l},isDST:function(e){var t=u;if(t.isMomentJSCurrentlyUsed&&t.isMoment(e))return e.isDST();var i=e.getFullYear();if(t._cachedYearForIsDST!==i){var n=new Date(i,0,1),r=new Date(i,6,1);t._cachedYearForIsDST=i,t._cachedStdTimezoneOffsetInYearForIsDST=Math.max(n.getTimezoneOffset(),r.getTimezoneOffset())}return e.getTimezoneOffset()<t._cachedStdTimezoneOffsetInYearForIsDST},findDateWithinSortedArray:function(e,t,i,n){var r=this.findIndexOfDateInSortedArray(e,t,i,n);return r>0&&(r===e.length||(n?n(r):e[r])>t)?r-1:r},findInsertionIndexForDateInSortedArray:function(e,t,i){var n=this.findIndexOfDateInSortedArray(e,t,!1,i);return(n===e.length||(i?i(n):e[n]).getTime()!==t.getTime())&&n},findIndexOfDateInSortedArray:function(e,t,i,n){var r,a=e.length,s=0,o=a,l=t instanceof Date?t.getTime():t;for(n||(n=function(t){return e[t]});s<=o;){var c=-1===(r=(s+o)/2|0)?-864e11:r===a?864e11:n(r).getTime(),u=c>l?1:c<l?-1:0;if(u<0)s=r+1;else{if(!(u>0))return r;o=r-1}}return r=Math.max(s,o),!i&&(r===a?r:-1===r?0:n(r).getTime()<l?r+1:r)},applyTimeZone:function(e,t){var i=u;if("function"==typeof t){var n=i._currentTimeZone;e&&i._timeZone(e,!1);var r=t(i._currentDeterminedTimeZone);return i._timeZone(n,!1),r}},dateToRelativeDateTimeString:function(e,t){t||(t=l);var i=(e.getTime()-t.getTime())/1e3,n="+";i<0&&(n="-",i=-i);var r=[],a=Math.floor(i/2592e3).toString();return r.push(("0"+a).slice(-Math.max(a.length,2))),i%=2592e3,r.push(("0"+Math.floor(i/86400)).slice(-2)),i%=86400,r.push(("0"+Math.floor(i/3600)).slice(-2)),i%=3600,r.push(("0"+Math.floor(i/60)).slice(-2)),r.push(("0"+Math.floor(i%60)).slice(-2)),n+r.join(":")},relativeDateTimeStringToDate:function(e,t){var i;i=t?new Date(t):new Date(l);var n=1;"-"===e[0]&&(e=e.slice(1),n=-1);var r=e.split(":");return 5!==r.length||i.setTime(i.getTime()+1e3*n*(parseInt(r[4])+60*(parseInt(r[3])+60*(parseInt(r[2])+24*(parseInt(r[1])+30*parseInt(r[0])))))),i}};e.exports=u},6184:e=>{var t={active:function(){},assert:function(e,t,i){if(!e&&!i)throw new Error("function"==typeof t?t():t);return e},_emitMessageOnAssertionTypeFailure:function(e,i,n){return t.assert(e,(()=>{i&&(i+=": ");let e="function"==typeof n?n():n;return"number"==typeof e&&(e=`Parameter ${e}`),`${i||""}${e} has invalid type!`})),e},assertNotNull:function(e,i,n){return t._emitMessageOnAssertionTypeFailure(null!=e,i,n)},assertStringOrNull:function(e,i,n){return t._emitMessageOnAssertionTypeFailure(null==e||"string"==typeof e,i,n)},assertString:function(e,i,n){return t._emitMessageOnAssertionTypeFailure("string"==typeof e,i,n)},assertArrayOrNull:function(e,i,n){return t._emitMessageOnAssertionTypeFailure(null==e||Array.isArray(e),i,n)},assertArray:function(e,i,n){return t._emitMessageOnAssertionTypeFailure(Array.isArray(e),i,n)},assertFunctionOrNull:function(e,i,n){return t._emitMessageOnAssertionTypeFailure(null==e||e instanceof Function,i,n)},assertFunction:function(e,i,n){return t._emitMessageOnAssertionTypeFailure(e instanceof Function,i,n)},assertNumberOrNull:function(e,i,n){return t._emitMessageOnAssertionTypeFailure(null==e||"number"==typeof e,i,n)},assertNumberOrString:function(e,i,n){return t._emitMessageOnAssertionTypeFailure("number"==typeof e||"string"==typeof e,i,n)},assertNumber:function(e,i,n){return t._emitMessageOnAssertionTypeFailure("number"==typeof e,i,n)},assertDateOrNull:function(e,i,n){return t._emitMessageOnAssertionTypeFailure(null==e||e instanceof Date,i,n)},assertDayOrNull:function(e,i,n){return t._emitMessageOnAssertionTypeFailure(null==e||[0,1,2,3,4,5,6].includes(e),i,n)},assertDate:function(e,i,n){return t._emitMessageOnAssertionTypeFailure(e instanceof Date,i,n)},trace:function(e){}};e.exports=t},4199:e=>{var t={nDefaultSeparator:"",VerticalPositions:{Top:8,Center:16,Bottom:32},HorizontalPositions:{Left:1,Center:2,Right:4},Positions:{TopLeft:9,TopCenter:10,TopRight:12,CenterLeft:17,CenterCenter:18,CenterRight:20,BottomLeft:33,BottomCenter:34,BottomRight:36},WarningBias:2e3,WarningCode:{RELATED_PRIMARY_KEY_NOT_EXISTING:2e3},_innerObject:function(e,t){if(e)return Array.isArray(e)&&"number"==typeof t&&+t<e.length?e[t]:e}};e.exports=t},6714:(e,t,i)=>{var n=i(927),r=i(9744),a=i(5175),s=i(4199),o={construct:function(e,t,i,n,r,a,s){e||a?(this._primaryKeyNames=e,this._map=new Map):this._array=i||[],this._sharedDepository=r,this._primaryKeyManipulationFunc=a,this._primaryKeyMustBeUnique=t??!0,this._handleWarningFunc=s},isEmpty:function(){return!this._map.size},add:function(e,t){var i=!0;if(this._map){i=!1,null==t&&this._primaryKeyManipulationFunc&&!this._primaryKeyNames&&(t=this._map.size);var n=this.getPrimaryKey(e,t);null!=n&&(i=this._addIntoMap(this._map,n,e))}return i&&(this._array?this._addIntoArray(this._array,e,t):delete this._immutableArray,this._sharedDepository&&(i=this._sharedDepository.add(e,t))),i},remove:function(e,t){return this._doRemove(e,t)},_doRemove:function(e,t,i){var n,r=!0;if(!i&&this._map){if(r=!1,this._primaryKeyManipulationFunc&&!this._primaryKeyNames)if(this._immutableArray)n=this._immutableArray.indexOf(e);else{n=0;for(let t of this._map.values()){if(t===e)break;n++}}var a=this.getPrimaryKey(e,n);null!=a&&(r=this._removeFromMap(this._map,a,e))}return r&&(!i&&this._array&&this._removeFromArray(this._array,e,n),delete this._immutableArray,this._sharedDepository&&(r=this._sharedDepository.remove(e,!1)),t&&e.dispose&&"function"==typeof e.dispose&&e.dispose()),r},removeAll:function(){var e=this;this._array&&(this._array.forEach((function(t){e._doRemove(t,!0,!0)})),this._array.length=0),this._map&&this._map.clear(),delete this._immutableArray},dispose:function(e){var t=this,i=function(i){t._sharedDepository&&t._sharedDepository.remove(i),i.dispose&&i.dispose(e)};if(this._array)this._array.forEach(i);else{let e=0;for(let t of this._map.values())i(t,e++)}!e&&this._array&&(this._array.length=0),delete this._immutableArray,this._map&&(this._map=new Map)},getArray:function(){return this._primaryKeyMustBeUnique?this.__getArray():this.__getArray().flat()},__getArray:function(){return this._array?this._array:(this._immutableArray||(this._immutableArray=Array.from(this._map.values())),this._immutableArray)},getObjectByPrimaryKey:function(e,t){return this._primaryKeyMustBeUnique?this.__getObjectByPrimaryKey(e):s._innerObject(this.__getObjectByPrimaryKey(e),t)},__getObjectByPrimaryKey:function(e){return this._map.get(e)},getPrimaryKeyNames:function(){return this._primaryKeyNames},getPrimaryKeyMustBeUnique:function(){return this._primaryKeyMustBeUnique},_addIntoArray:function(e,t,i){return!!e&&(void 0===i?e.push(t):e.splice(i,0,t),!0)},_removeFromArray:function(e,t,i){return!!(e&&(null==i&&(i=e.indexOf(t)),i>=0))&&(e.splice(i,1),!0)},_addIntoMap:function(e,t,i){if(e){if(!e.has(t))return e.set(t,i),!0;if(!this._primaryKeyMustBeUnique){let n=e.get(t);if(!Array.isArray(n)){let i=[];e.set(t,i),this._addIntoArray(i,n),n=i}return this._addIntoArray(n,i)}}return!1},_removeFromMap:function(e,t,i){if(e&&e.has(t)){if(!this._primaryKeyMustBeUnique){let n=e.get(t);if(Array.isArray(n)&&this._removeFromArray(n,i))return n.length||e.delete(t),!0}return e.delete(t),!0}return!1},getPrimaryKey:function(e,t){return a.getPrimaryKey(e,this._primaryKeyNames,this,this._primaryKeyManipulationFunc,t)}};e.exports=r.extendClass("nDepository",n,o)},3093:(e,t,i)=>{var n=i(9744),r=i(5244).eventListenerHelper,a=i(1194),s=i(3353),o="ndroppable",l=".ndroppable",c="netronic_ndroppable_dragenter",u="netronic_ndroppable_dragover",h="netronic_ndroppable_dragleave",p="netronic_ndroppable_drop",_={DragEnter:"dragenter",DragOver:"dragover",DragLeave:"dragleave",Drop:"drop"},d={optionDefaults:Object.assign({},s.prototype.optionDefaults,{onEventFunc:null}),construct:function(){var e=this;e._super.apply(e,arguments),this._uniqueID=a.generate();let t=e._element.getAttribute("class").split(" ");t.push(o),e._element.setAttribute("class",t.join(" ")),r.on(e._element,c+l+e._uniqueID,(function(t){e.options.onEventFunc&&e.options.onEventFunc.call(e,{eventType:_.DragEnter,data:t.detail})})).on(e._element,u+l+e._uniqueID,(function(t){e.options.onEventFunc&&e.options.onEventFunc.call(e,{eventType:_.DragOver,data:t.detail})})).on(e._element,h+l+e._uniqueID,(function(t){e.options.onEventFunc&&e.options.onEventFunc.call(e,{eventType:_.DragLeave,data:t.detail})})).on(e._element,p+l+e._uniqueID,(function(t){e.options.onEventFunc&&e.options.onEventFunc.call(e,{eventType:_.Drop,data:t.detail})}))},destroy:function(){var e=this;r.off(e._element,l+e._uniqueID),e._super()}},m=n.extendClass("nDroppableWidget",s,d);m.NDROPPABLE_CLASS=o,m.DRAG_ENTER_EVENT_NAME=c,m.DRAG_OVER_EVENT_NAME=u,m.DRAG_LEAVE_EVENT_NAME=h,m.DROP_EVENT_NAME=p,m.EventType=_,e.exports=m},5408:(e,t,i)=>{var n=i(7337),r=i(5244).eventListenerHelper,a=i(3801),s=".nevd",o=function(e,t,i){var l=this;this._elem=e,this._handlerFunctionPropertySuffix=i||"",this._hammerManager=new n.Manager(e),this._pressRecognizer=null,this._pressTargetElem=null,this._pressTargetSubElem=null,this._tapRecognizer=null,this._tapTargetElem=null,this._tapTargetSubElem=null,this._quickPanRecognizer=null,this._panRecognizer=null,this._panTargetElem=null,this._panTargetSubElem=null,this._swipeTargetElem=null,this._swipeTargetSubElem=null,this._pinchRecognizer=null,this._pinchTargetElem=null,this._pinchTargetSubElem=null,this._rotateRecognizer=null,this._rotateTargetElem=null,this._rotateTargetSubElem=null,this._cachedTargetSubElem=null,this._tapCachedHammerEvent=null,this._panCachedHammerEvent=null,this._pointerDownPosition=null,this._targetSubElemOnPointerDown=null,this._slowPanActive=!1,this._quickPanActive=!1,this.TAP_TIMEOUT_MS=a.isFirefox?400:280,t.forEach((function(t){switch(t){case o.TAP_EVENT_NAME:case o.DOUBLE_TAP_EVENT_NAME:l._tapRecognizer||(l._tapRecognizer=new n.Tap({interval:l.TAP_TIMEOUT_MS,time:l.TAP_TIMEOUT_MS}));break;case o.PRESS_EVENT_NAME:case o.PRESS_PAN_EVENT_NAME:if(l._pressRecognizer||(l._pressRecognizer=new n.Press({threshold:10,time:l.TAP_TIMEOUT_MS+1})),t!==o.PRESS_PAN_EVENT_NAME)break;case o.PAN_EVENT_NAME:case o.SWIPE_EVENT_NAME:l._panRecognizer||(l._panRecognizer=new n.Pan,l._quickPanRecognizer=new n.Pan({event:"quickpan",threshold:2}));break;case o.PINCH_EVENT_NAME:l._pinchRecognizer||(l._pinchRecognizer=new n.Pinch);break;case o.ROTATE_EVENT_NAME:l._rotateRecognizer||(l._rotateRecognizer=new n.Rotate);break;case o.CONTEXTMENU_EVENT_NAME:r.on(e,"contextmenu"+s,l._onContextMenu.bind(l))}})),this._tapRecognizer&&(this._hammerManager.add(this._tapRecognizer),this._hammerManager.on("tap",(function(e){l._onTap(e)}))),this._pressRecognizer&&(this._hammerManager.add(this._pressRecognizer),this._hammerManager.on("press",(function(e){l._onPress(e)})),this._hammerManager.on("pressup",(function(e){l._onPressUp(e)}))),this._panRecognizer&&(this._hammerManager.add(this._quickPanRecognizer),this._hammerManager.add(this._panRecognizer),this._hammerManager.on("panstart",(function(e){l._onSlowPanStart(e)})),this._hammerManager.on("panmove",(function(e){l._onSlowPanMove(e)})),this._hammerManager.on("panend",(function(e){l._onSlowPanEnd(e)})),this._hammerManager.on("pancancel",(function(e){l._onSlowPanCancel(e)})),this._hammerManager.on("quickpanstart",(function(e){l._onQuickPanStart(e)})),this._hammerManager.on("quickpanmove",(function(e){l._onQuickPanMove(e)})),this._hammerManager.on("quickpanend",(function(e){l._onQuickPanEnd(e)})),this._hammerManager.on("quickpancancel",(function(e){l._onQuickPanCancel(e)}))),this._pinchRecognizer&&(this._hammerManager.add(this._pinchRecognizer),this._hammerManager.on("pinchstart",(function(e){l._onPinch(e)})),this._hammerManager.on("pinch",(function(e){l._onPinch(e)})),this._hammerManager.on("pinchend",(function(e){l._onPinchEnd(e)}))),this._rotateRecognizer&&(this._hammerManager.add(this._rotateRecognizer),this._hammerManager.on("rotatestart",(function(e){l._onRotateStart(e)})),this._hammerManager.on("rotatemove",(function(e){l._onRotateMove(e)})),this._hammerManager.on("rotateend",(function(e){l._onRotateEnd(e)})),this._hammerManager.on("rotatecancel",(function(e){l._onRotateCancel(e)}))),this._hammerManager.on("hammer.input",(function(e){if("pointerdown"===e.srcEvent.type){if(null!=l._clearTimeoutHandle&&(window.clearTimeout(l._clearTimeoutHandle),delete l._clearTimeoutHandle),l._swipeTargetElem&&l._onSwipeCancel(),1===e.pointers.length){l._targetSubElemOnPointerDown=e.target,l._pointerDownPosition=e.center;var t=l._determineTargetElems(e,o.PAN_EVENT_CLASS_NAME);!t&&["mouse","pen"].includes(e.pointerType)?t=l._determineTargetElems(e,o.PRESS_PAN_EVENT_CLASS_NAME):t||"touch"!==e.pointerType||(t=l._determineTargetElems(e,o.SWIPE_EVENT_CLASS_NAME)),t&&t.subElem&&["use","image"].includes(t.subElem.nodeName)&&(e.srcEvent.stopPropagation(),e.srcEvent.preventDefault())}if(l._targetSubElemOnPointerDown){var i=l._targetSubElemOnPointerDown.closest(`.${o.POINTER_DOWN_EVENT_CLASS_NAME}`);if(i){var n=new CustomEvent(o.TARGET_EVENT_NAME,{bubbles:!1,cancelable:!1,detail:{hammerEvent:e}});e.type=o.POINTER_DOWN_EVENT_NAME,i.dispatchEvent(n)}}}else 1===e.pointers.length&&"pointerup"===e.srcEvent.type&&(null!=l._clearTimeoutHandle&&window.clearTimeout(l._clearTimeoutHandle),l._clearTimeoutHandle=setTimeout((function(){l._clearCachedPointerDownTargetElem()}),l.TAP_TIMEOUT_MS)),"pointerup"===e.srcEvent.type&&"touch"===e.pointerType&&(l._pinchTargetElem=null,l._pointerDownPosition=null)}))};Object.assign(o.prototype,{destroy:function(){this._hammerManager.destroy(),this._elem=null,this._hammerManager=null,this._pressTargetElem=null,this._pressTargetSubElem=null,this._tapTargetElem=null,this._tapTargetSubElem=null,this._panTargetElem=null,this._panTargetSubElem=null,this._swipeTargetElem=null,this._swipeTargetSubElem=null,this._pinchTargetElem=null,this._pinchTargetSubElem=null,this._rotateTargetElem=null,this._rotateTargetSubElem=null,this._cachedTargetSubElem=null,this._tapCachedHammerEvent=null,this._panCachedHammerEvent=null,this._pointerDownPosition=null,this._targetSubElemOnPointerDown=null,null!=this._clearTimeoutHandle&&(window.clearTimeout(this._clearTimeoutHandle),delete this._clearTimeoutHandle),this._clearTapTimeout()},stop:function(){this._hammerManager.stop()},replacePressOrPanTargetElem:function(e){this._panTargetElem&&(this._panTargetElem=e),this._pressTargetElem&&(this._pressTargetElem=e)},_onTap:function(e){var t=this._determineTargetElems(e,o.QUICK_TAP_EVENT_CLASS_NAME),i=t?null:this._determineTargetElems(e,o.DOUBLE_TAP_EVENT_CLASS_NAME),n=t||this._determineTargetElems(e,o.TAP_EVENT_CLASS_NAME),r=e.tapCount,a=r;if(n)if(1===a){if(this._clearTapTimeout())try{this._sendDelayedTapEvent()}catch(e){throw this._tapTargetElem=null,this._tapTargetSubElem=null,this._tapCount=0,e}this._tapTargetElem=n.elem,this._tapTargetSubElem=n.subElem,this._tapCount=a}else if(this._tapTargetElem!==n.elem){if(this._clearTapTimeout())try{this._sendDelayedTapEvent()}catch(e){throw this._tapTargetElem=null,this._tapTargetSubElem=null,this._tapCount=0,e}this._tapTargetElem=n.elem,this._tapTargetSubElem=n.subElem,this._tapCount=a=1,e.isFirst=!0}else a=++this._tapCount;else try{this._clearTapTimeout()&&this._sendDelayedTapEvent()}finally{this._tapTargetElem=null,this._tapTargetSubElem=null,this._tapCount=a=0}if(e.tapCount=a,n&&1===a&&1===r&&(this._tapCachedHammerEvent=e,e[o.SUB_ELEM_PROPERTY]=n.subElem,!t&&i&&(this._setTapTimeout(),a=0)),a>0){if(a>1&&this._tapCachedHammerEvent&&e.pointerType!==this._tapCachedHammerEvent.pointerType){if(this._clearTapTimeout())try{this._sendDelayedTapEvent()}finally{this._tapTargetElem=null,this._tapTargetSubElem=null,this._tapCount=0}n=i=null}if(i&&2===a&&2===r){this._clearTapTimeout(),e.type=o.DOUBLE_TAP_EVENT_NAME,e[o.SUB_ELEM_PROPERTY]=i.subElem;try{this._sendEventToTargetElem(i.elem,e)}finally{this._tapTargetElem=null,this._tapTargetSubElem=null,this._tapCount=0}}else{if(2===r&&this._clearTapTimeout())try{this._sendDelayedTapEvent()}catch(e){throw this._tapTargetElem=null,this._tapTargetSubElem=null,this._tapCount=0,e}e[o.SUB_ELEM_PROPERTY]=this._tapTargetSubElem,this._sendEventToTargetElem(this._tapTargetElem,e)}}},_setTapTimeout:function(){var e=this;this._tapTimeoutHandle=setTimeout((function(){e._tapTimeoutHandle=0,e._sendDelayedTapEvent(),e._tapCachedHammerEvent=null,e._tapTargetElem=null,e._tapTargetSubElem=null,e._tapCount=0}),e.TAP_TIMEOUT_MS+1)},_clearTapTimeout:function(){return!!this._tapTimeoutHandle&&(clearTimeout(this._tapTimeoutHandle),this._tapTimeoutHandle=0,!0)},_sendDelayedTapEvent:function(){this._tapTargetElem&&this._sendEventToTargetElem(this._tapTargetElem,this._tapCachedHammerEvent)},_onPress:function(e){if(this._tapCount>1)this._pressRecognizer.reset();else{if(e.srcEvent.type.endsWith("up"))return e.type="tap",e.tapCount=1,void this._onTap(e);var t,i=this._determineTargetElems(e,o.PRESS_EVENT_CLASS_NAME),n=this._determineTargetElems(e,o.PRESS_PAN_EVENT_CLASS_NAME);(t=i&&n?n.elem.contains(i.elem)?i:n:i??n)?(this._pressTargetElem=t.elem,this._pressTargetSubElem=t.subElem,e[o.SUB_ELEM_PROPERTY]=this._pressTargetSubElem,e[o.CANCEL_PROPERTY]=!1,this._sendEventToTargetElem(this._pressTargetElem,e),e[o.CANCEL_PROPERTY]&&(this._pressTargetElem=null,this._pressTargetSubElem=null,this._pressRecognizer.reset()),this._handleException()):this._pressRecognizer.reset()}},_onPressUp:function(e){e[o.SUB_ELEM_PROPERTY]=this._pressTargetSubElem;try{this._sendEventToTargetElem(this._pressTargetElem,e)}finally{this._pressTargetElem=null,this._pressTargetSubElem=null}e.srcEvent.stopPropagation(),e.preventDefault()},_onOffPanEscapeKeyEvent:function(e){for(var t=this,i="keydown"+s,n=window;;n=n.parent){if(!n||!n.document)return!1;if(e?(r.on(n.document,i,(function(e){"Escape"===e.key&&t._boundPanCancelEventHandlerFunc()})),n.addEventListener("contextmenu",t._boundPanCancelEventHandlerFunc,!0)):(r.off(n.document,i),window.removeEventListener("contextmenu",t._boundPanCancelEventHandlerFunc,!0)),n===n.parent)return!1}},_onQuickPanStart:function(e){this._slowPanActive||(e.type="panstart",this._quickPanActive=!0,this._onPanStart(e),this._panTargetElem||this._swipeTargetElem||(this._quickPanActive=!1))},_onQuickPanMove:function(e){this._quickPanActive&&(this._panTargetElem||this._swipeTargetElem)&&(e.type="panmove",this._onPanMove(e))},_onQuickPanEnd:function(e){this._quickPanActive&&(this._panTargetElem||this._swipeTargetElem)&&(e.type="panend",this._onPanEnd(e),this._quickPanActive=!1)},_onQuickPanCancel:function(e){this._quickPanActive&&(this._panTargetElem||this._swipeTargetElem)&&(e.type="pancancel",this._onPanCancel(e),this._quickPanActive=!1)},_onSlowPanStart:function(e){this._quickPanActive||(this._pressTargetElem=null,this._pressTargetSubElem=null,this._onPanStart(e),this._panTargetElem||this._swipeTargetElem?this._slowPanActive=!0:this._panRecognizer.reset())},_onSlowPanMove:function(e){this._slowPanActive&&(this._panTargetElem||this._swipeTargetElem)&&this._onPanMove(e)},_onSlowPanEnd:function(e){this._slowPanActive&&(this._panTargetElem||this._swipeTargetElem)&&(this._onPanEnd(e),this._slowPanActive=!1)},_onSlowPanCancel:function(e){this._slowPanActive&&(this._panTargetElem||this._swipeTargetElem)&&(this._onPanCancel(e),this._slowPanActive=!1)},_onPanStart:function(e){if(!this._panTargetElem){var t=!1;if(this._swipeTargetElem&&this._onSwipeCancel(),this._quickPanActive&&this._pressTargetElem&&this._pressTargetElem.getAttribute("class").includes(o.PRESS_PAN_EVENT_CLASS_NAME))this._panTargetElem=this._pressTargetElem;else if(!this._quickPanActive||"mouse"===e.pointerType){var i,n=this._determineTargetElems(e,o.PAN_EVENT_CLASS_NAME),r="mouse"===e.pointerType?this._determineTargetElems(e,o.PRESS_PAN_EVENT_CLASS_NAME):void 0;i=n&&r?r.elem.contains(n.elem)?n:r:n??r,this._panTargetElem=i?i.elem:null,this._panTargetSubElem=i?i.subElem:null}if(this._panTargetElem){if(e[o.SUB_ELEM_PROPERTY]=this._panTargetSubElem,e[o.CANCEL_PROPERTY]=!1,e.center=this._pointerDownPosition,this._sendEventToTargetElem(this._panTargetElem,e),e[o.CANCEL_PROPERTY])this._panTargetElem=null,this._panTargetSubElem=null,t=!0;else{var a=this;this._panCachedHammerEvent=e,a._boundPanCancelEventHandlerFunc||(a._boundPanCancelEventHandlerFunc=function(){a._panTargetElem&&(a._panCachedHammerEvent.type=o.PAN_EVENT_NAME+"cancel",a._onPanCancel(a._panCachedHammerEvent))}.bind(a)),this._onOffPanEscapeKeyEvent(!0)}this._handleException()}else t=!0;if(t&&!this._pressTargetElem&&"touch"===e.pointerType){var s=this._determineTargetElems(e,o.SWIPE_EVENT_CLASS_NAME);s&&(this._swipeTargetElem=s.elem,this._swipeTargetSubElem=s.subElem,e.type=o.SWIPE_EVENT_NAME,e[o.SUB_ELEM_PROPERTY]=this._swipeTargetSubElem,e[o.CANCEL_PROPERTY]=!1,this._cachedSwipeParams={deltaX:e.deltaX,deltaY:e.deltaY,timestamp:Date.now()},this._sendEventToTargetElem(this._swipeTargetElem,e),e[o.CANCEL_PROPERTY]&&(this._swipeTargetElem=null,this._swipeTargetSubElem=null),this._handleException())}}},_onPanMove:function(e){this._panTargetElem?(this._panCachedHammerEvent=e,e[o.SUB_ELEM_PROPERTY]=this._panTargetSubElem,e[o.CANCEL_PROPERTY]=!1,this._sendEventToTargetElem(this._panTargetElem,e),e[o.CANCEL_PROPERTY]&&(this._panTargetElem=null,this._panTargetSubElem=null),this._handleException()):this._swipeTargetElem&&(this._cachedSwipeParams2=this._cachedSwipeParams,this._cachedSwipeParams={deltaX:e.deltaX,deltaY:e.deltaY,timestamp:Date.now()},e.type=o.SWIPE_EVENT_NAME,e[o.SUB_ELEM_PROPERTY]=this._swipeTargetSubElem,e[o.CANCEL_PROPERTY]=!1,this._sendEventToTargetElem(this._swipeTargetElem,e),e[o.CANCEL_PROPERTY]&&(this._swipeTargetElem=null,this._swipeTargetSubElem=null),this._handleException())},_onPanEnd:function(e){if(this._panTargetElem){e[o.SUB_ELEM_PROPERTY]=this._panTargetSubElem;try{this._sendEventToTargetElem(this._panTargetElem,e)}finally{this._panTargetElem=null,this._panTargetSubElem=null,this._swipeTargetElem=null,this._swipeTargetSubElem=null,this._pressTargetElem=null,this._pressTargetSubElem=null,this._onOffPanEscapeKeyEvent(!1),this._panCachedHammerEvent=null}this._handleException()}else if(this._swipeTargetElem){var t=.95;if(this._cachedSwipeParams2){var i=17/(Date.now()-this._cachedSwipeParams2.timestamp),n=(e.deltaX-this._cachedSwipeParams2.deltaX)*i*t,r=(e.deltaY-this._cachedSwipeParams2.deltaY)*i*t;if(this._cachedSwipeParams=void 0,this._cachedSwipeParams2=void 0,e.type=o.SWIPE_EVENT_NAME,e[o.SUB_ELEM_PROPERTY]=this._swipeTargetSubElem,e[o.CANCEL_PROPERTY]=!1,e[o.IS_FINAL_PROPERTY]=Math.abs(n)<1&&Math.abs(r)<1,this._sendEventToTargetElem(this._swipeTargetElem,e),this._swipeCachedHammerEvent=e,this._swipeTimestamp=Date.now(),e[o.CANCEL_PROPERTY]||e[o.IS_FINAL_PROPERTY])this._swipeCachedHammerEvent=null,this._swipeTargetElem=null,this._swipeTargetSubElem=null;else{var a=this;this._swipeIntervalHandle=setInterval((function(){var i=Math.floor((Date.now()-a._swipeTimestamp)/17);a._swipeTimestamp+=17*i;for(var s=0;s<i&&!e[o.IS_FINAL_PROPERTY];s++)e.deltaX+=n,e.deltaY+=r,e.center.x+=n,e.center.y+=r,n*=t,r*=t,Math.abs(n)<1&&Math.abs(r)<1&&(e[o.IS_FINAL_PROPERTY]=!0);e.delta=Math.sqrt(e.deltaX*e.deltaX+e.deltaY*e.deltaY),a._sendEventToTargetElem(a._swipeTargetElem,e),(e[o.CANCEL_PROPERTY]||e[o.IS_FINAL_PROPERTY])&&(a._swipeIntervalHandle&&(clearInterval(a._swipeIntervalHandle),a._swipeIntervalHandle=null),a._swipeCachedHammerEvent=null,a._swipeTargetElem=null,a._swipeTargetSubElem=null)}),17)}this._handleException()}else this._swipeTargetElem=null,this._swipeTargetSubElem=null}},_onSwipeCancel:function(){if(this._swipeTargetElem){try{this._swipeCachedHammerEvent&&!this._swipeCachedHammerEvent[o.IS_FINAL_PROPERTY]&&(this._swipeCachedHammerEvent[o.IS_FINAL_PROPERTY]=!0,this._sendEventToTargetElem(this._swipeTargetElem,this._swipeCachedHammerEvent)),this._swipeIntervalHandle&&(clearInterval(this._swipeIntervalHandle),this._swipeIntervalHandle=null)}finally{this._swipeCachedHammerEvent=null,this._swipeTargetElem=null,this._swipeTargetSubElem=null}this._handleException()}},_onPanCancel:function(e){try{this._sendEventToTargetElem(this._panTargetElem,e)}finally{this._panTargetElem=null,this._panTargetSubElem=null,this._pressTargetElem=null,this._pressTargetSubElem=null,this._panCachedHammerEvent=null,this._onOffPanEscapeKeyEvent(!1)}this._handleException()},_onPinch:function(e){if(!this._pinchTargetElem){var t=this._determineTargetElems(e,o.PINCH_EVENT_CLASS_NAME);this._pinchTargetElem=t?t.elem:null,this._pinchTargetSubElem=t?t.subElem:null}if(this._pinchTargetElem){e[o.SUB_ELEM_PROPERTY]=this._pinchTargetSubElem;try{this._sendEventToTargetElem(this._pinchTargetElem,e)}catch(e){throw this._pinchTargetElem=null,this._pinchTargetSubElem=null,e}this._handleException()}},_onPinchEnd:function(e){if(this._pinchTargetElem){e[o.SUB_ELEM_PROPERTY]=this._pinchTargetSubElem;try{this._sendEventToTargetElem(this._pinchTargetElem,e)}finally{this._pinchTargetElem=null,this._pinchTargetSubElem=null}this._handleException()}},_onRotateStart:function(e){var t=this._determineTargetElems(e,o.ROTATE_EVENT_CLASS_NAME);this._rotateTargetElem=t?t.elem:null,this._rotateTargetSubElem=t?t.subElem:null,e[o.SUB_ELEM_PROPERTY]=this._rotateTargetSubElem,this._sendEventToTargetElem(this._rotateTargetElem,e),this._handleException()},_onRotateMove:function(e){e[o.SUB_ELEM_PROPERTY]=this._rotateTargetSubElem,this._sendEventToTargetElem(this._rotateTargetElem,e)},_onRotateEnd:function(e){e[o.SUB_ELEM_PROPERTY]=this._rotateTargetSubElem,this._sendEventToTargetElem(this._rotateTargetElem,e),this._handleException()},_onRotateCancel:function(e){e[o.SUB_ELEM_PROPERTY]=this._rotateTargetSubElem,this._sendEventToTargetElem(this._rotateTargetElem,e),this._handleException()},_onContextMenu:function(e){if(!this._pressTargetElem){var t=this._determineTargetElems(e,o.CONTEXTMENU_EVENT_CLASS_NAME);t&&(this._sendEventToTargetElem(t.elem,e),this._handleException())}},_determineTargetElems:function(e,t){var i;(i=t===o.CONTEXTMENU_EVENT_CLASS_NAME?e.target:this._targetSubElemOnPointerDown)?this._cachedTargetSubElem=i:i=this._cachedTargetSubElem;var n=i?.closest(`.${t}`);return n?{elem:n,subElem:i}:null},_clearCachedPointerDownTargetElem:function(){this._targetSubElemOnPointerDown=null,this._cachedTargetSubElem=null,this._pressTargetElem=null,this._pressTargetSubElem=null,this._savedHandlerFunctionTargetElem=null,this._savedHandlerFunction=null},_sendEventToTargetElem:function(e,t){if(delete this._error,e){var i=e[o.HANDLER_FUNCTION_PROPERTY+this._handlerFunctionPropertySuffix];if(null!=i||e!==this._savedHandlerFunctionTargetElem||document.body.contains(e)||(i=this._savedHandlerFunction),"function"==typeof i){try{i.call(e,t)}catch(e){o.CANCEL_PROPERTY in t&&(t[o.CANCEL_PROPERTY]=!0),this._error=e}this._savedHandlerFunction=i,this._savedHandlerFunctionTargetElem=e}else{var n=new CustomEvent(o.TARGET_EVENT_NAME,{bubbles:!1,cancelable:!1,detail:{hammerEvent:t}});try{e.dispatchEvent(n)}catch(e){o.CANCEL_PROPERTY in t&&(t[o.CANCEL_PROPERTY]=!0),this._error=e}}}},_handleException:function(){if(this._error){let e=this._error;throw delete this._error,e}}}),o.TAP_EVENT_NAME="tap",o.DOUBLE_TAP_EVENT_NAME="doubletap",o.PRESS_EVENT_NAME="press",o.PAN_EVENT_NAME="pan",o.PRESS_PAN_EVENT_NAME="press-pan",o.SWIPE_EVENT_NAME="swipe",o.PINCH_EVENT_NAME="pinch",o.ROTATE_EVENT_NAME="rotate",o.POINTER_DOWN_EVENT_NAME="pointerdown",o.CONTEXTMENU_EVENT_NAME="contextmenu",o.TAP_EVENT_CLASS_NAME="nevd-tap",o.QUICK_TAP_EVENT_CLASS_NAME="nevd-quick-tap",o.DOUBLE_TAP_EVENT_CLASS_NAME="nevd-doubletap",o.PRESS_EVENT_CLASS_NAME="nevd-press",o.PAN_EVENT_CLASS_NAME="nevd-pan",o.PRESS_PAN_EVENT_CLASS_NAME="nevd-press-pan",o.SWIPE_EVENT_CLASS_NAME="nevd-swipe",o.PINCH_EVENT_CLASS_NAME="nevd-pinch",o.ROTATE_EVENT_CLASS_NAME="nevd-rotate",o.POINTER_DOWN_EVENT_CLASS_NAME="nevd-pointerdown",o.CONTEXTMENU_EVENT_CLASS_NAME="nevd-contextmenu",o.TARGET_EVENT_NAME="nevd-event",o.CANCEL_PROPERTY="__nevd_cancel",o.IS_FINAL_PROPERTY="__nevd_isFinal",o.SUB_ELEM_PROPERTY="__nevd_subElem",o.HANDLER_FUNCTION_PROPERTY="__nevd_handler",e.exports=o},7957:e=>{e.exports=function(e,t){const i=document.createElementNS("http://www.w3.org/1999/xhtml","a");i.download=t,i.rel="noopener",i.href=URL.createObjectURL(e),setTimeout((()=>URL.revokeObjectURL(i.href)),4e4),setTimeout((()=>i.click()),0)}},7947:e=>{var t={each:function(e,t,i){var n;return null!=e&&(Array.isArray(e)?null!=i?e.some(((e,r)=>e&&(n=t(e,r))===i)):e.forEach(((e,i)=>{e&&(n=t(e,i))})):n=t(e,0)),n}};e.exports=t},8461:e=>{e.exports=function(e){var t,i=window.location.search.substring(1).split("&");for(t=0;t<i.length;t++){var n=i[t].split("=");if(n[0].toUpperCase()===e.toUpperCase())return n[1]}}},1518:(e,t,i)=>{var n=i(8680),r={calculateOriginalImageSize:function(e){return new Promise((function(t){if(null==e.getAttribute("data-originalwidth")||null==e.getAttribute("data-originalheight")){var i=new Image;i.onload=function(){e.setAttribute("data-originalwidth",this.naturalWidth),e.setAttribute("data-originalheight",this.naturalHeight),t()},i.onerror=function(){t()},i.src=e.getAttribute("href"),i.complete&&i.onload()}else t()}))},convertImagesToBase64:function(e){return new Promise((t=>{var i=[],n=[];e.querySelectorAll("image").forEach((e=>{var t=e.getAttribute("href"),a=r.loadImageAsynchronously(t);i.push(a),a.then((t=>{e.setAttribute("href",t),n.push(r.calculateOriginalImageSize(e))}))})),Promise.all(i).then((()=>{Promise.all(n).then((()=>{t()}))}))}))},loadImageAsynchronously:function(e){return new Promise((function(t){var i=new XMLHttpRequest;i.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},"blob"===i.responseType?e.readAsDataURL(i.response):t(i.response)},i.onerror=function(){t(e)},e.match(/^data:image/)?t(e):(i.open("GET",e),i.responseType="blob",i.send())}))},replaceUseTagsBySVGTags:function(e,t){var i=n.select(e).select("defs");n.select(e).selectAll("use").each((function(){var e=n.select(this),r=e.attr("href");if(r.match(t)){var a=i.select(r);if(a.size()){var s=a;if("image"!==s.node().tagName&&(s=a.select("image")),s.attr("href").match(/^data:image\/svg/)){var o=this.parentNode,l=n.select(o).insert("g",(()=>this));l.attr("class",e.attr("class")),l.classed("nimagehelper-container",!0),a.node().cloneNode(!0).removeAttribute("id");var c=atob(s.attr("href").slice(s.attr("href").indexOf(",")+1));l.html(c);var u=e.attr("width")||s.attr("width"),h=e.attr("height")||s.attr("height"),p=s.attr("data-originalwidth"),_=s.attr("data-originalheight"),d=e.attr("x")||0,m=e.attr("y")||0;l.attr("transform",`translate(${d}, ${m})scale(${u/p},${h/_})`),l.select("svg").attr("width",p).attr("height",_),e.remove()}}}}))}};e.exports=r},7527:(e,t,i)=>{var n=i(9744),r=i(4456);e.exports=n.extendClass("nLayoutDirectedObject",r,{construct:function(e){this._super(),this._layoutElements=e},getLayoutElements:function(){return this._layoutElements}})},1617:(e,t,i)=>{var n=i(9744),r=i(4456),a=i(1251),s="Columns",o="Rows",l={construct:function(e,t,i,n,r){this._super(),this._cellUpdateFunc=r,this._layoutStacks={},this._layoutStacks[s]=this._createLayoutStack(s,e,i,n),this._layoutStacks[o]=this._createLayoutStack(o,t,i,n)},update:function(){var e=this,t=this._layoutStacks[s],i=this._layoutStacks[o];if(t.update(),i.update(),null!=this._cellUpdateFunc){var n=t.getLayoutStripes(),r=i.getLayoutStripes();n.forEach((function(t){var i=t.isUpdating();r.forEach((function(n){var r=n.isUpdating();(i||r)&&e._cellUpdateFunc.call(e,t,n)}))}))}t.finishUpdate(),i.finishUpdate()},_createLayoutStack:function(e,t,i,n){var r=new a(e,t,n);return i&&i.call(r),r},getLayoutStacks:function(){return this._layoutStacks},pointToLayoutCell:function(e,t){return{column:null!=e?this._layoutStacks[s].identifyStripe(e):void 0,row:null!=t?this._layoutStacks[o].identifyStripe(t):void 0}}};e.exports=n.extendClass("nLayoutGrid",r,l)},4456:(e,t,i)=>{var n=i(927),r=i(9744);e.exports=r.extendClass("nLayoutObject",n,{construct:function(){this._updateFunc=null},update:function(){null!=this._updateFunc&&this._updateFunc.call(this)},finishUpdate:function(){},setUpdateFunc:function(e){this._updateFunc=e}})},1251:(e,t,i)=>{var n=i(9744),r=i(7527),a=i(4786),s={construct:function(e,t,i){this._super(e),this._stripeAppendedFunc=i,this._layoutStripes=[],this.appendStripes(t),this._actualValues=this._createValues(),this._oldValues=this._createValues(),this._updating=!1},update:function(){null!=this._updateFunc&&(this._updating||(this._actualValues.extent=this.extent(),this._actualValues.innerViewExtent=this.innerViewExtent(),this._actualValues.outerViewExtent=this.outerViewExtent(),JSON.stringify(this._actualValues)!==JSON.stringify(this._oldValues)&&(this._updating=!0,this._updateFunc.call(this,this._oldValues,this._actualValues))));for(var e=0;e<this._layoutStripes.length;e++)this._layoutStripes[e].update()},finishUpdate:function(){for(var e=0;e<this._layoutStripes.length;e++)this._layoutStripes[e].finishUpdate();null!=this._updateFunc&&this._updating&&(this._oldValues=this._createValues(this._actualValues),this._updating=!1)},_createValues:function(e){return Object.assign({extent:void 0,innerViewExtent:void 0,outerViewExtent:void 0},e)},appendStripes:function(e){void 0===e&&(e=["Default"]);for(var t,i,n=this._layoutStripes.length,r=0;r<e.length;r++)t=n+r,i=new a(this._layoutElements,t,e[r]),this._layoutStripes.push(i),t>0&&this._layoutStripes[t-1].setNextStripe(i),this._stripeAppendedFunc&&this._stripeAppendedFunc.call(i)},getLayoutStripes:function(){return this._layoutStripes},identifyStripe:function(e){for(var t=0;t<this._layoutStripes.length;t++)if(e>=this._layoutStripes[t].start()&&e<this._layoutStripes[t].start()+this._layoutStripes[t].innerViewExtent())return this._layoutStripes[t]},scrollStarts:function(){for(var e=[],t=0;t<this._layoutStripes.length;t++)e[t]=this._layoutStripes[t].scrollStart();return e},extents:function(){for(var e=[],t=0;t<this._layoutStripes.length;t++)e[t]=this._layoutStripes[t].extent();return e},innerViewExtents:function(){for(var e=[],t=0;t<this._layoutStripes.length;t++)e[t]=this._layoutStripes[t].innerViewExtent();return e},outerViewExtents:function(){for(var e=[],t=0;t<this._layoutStripes.length;t++)e[t]=this._layoutStripes[t].outerViewExtent();return e},extent:function(){for(var e=0,t=0;t<this._layoutStripes.length;t++)e+=this._layoutStripes[t].extent();return e},innerViewExtent:function(){for(var e=0,t=0;t<this._layoutStripes.length;t++)e+=this._layoutStripes[t].innerViewExtent();return e},outerViewExtent:function(){for(var e=0,t=0;t<this._layoutStripes.length;t++)e+=this._layoutStripes[t].outerViewExtent();return e}};e.exports=n.extendClass("nLayoutStack",r,s)},4786:(e,t,i)=>{var n=i(9744),r=i(7527),a={construct:function(e,t,i){this._super(e),this._index=t,this._stripeID=i,this._nextStripe=void 0,this._actualValues=this._createValues(),this._oldValues=this._createValues(),this._updating=!1},update:function(){null!=this._updateFunc&&(this._updating||JSON.stringify(this._actualValues)!==JSON.stringify(this._oldValues)&&(this._updating=!0,this._updateFunc.call(this,this._oldValues,this._actualValues)))},isUpdating:function(){return this._updating},finishUpdate:function(){null!=this._updateFunc&&this._updating&&(this._oldValues=this._createValues(this._actualValues),this._updating=!1)},getIndex:function(){return this._index},getStripeID:function(){return this._stripeID},_createValues:function(e){return Object.assign({scrollStart:void 0,cachedScrollStart:void 0,scrollFactorFixed:void 0,scrollFactorExceeding:void 0,start:void 0,extent:void 0,innerViewExtent:void 0,outerViewExtent:void 0,virtualizedExtent:void 0,visibleRange:void 0},e)},setNextStripe:function(e){this._nextStripe=e},scrollStart:function(e){return null!=e?(this._actualValues.scrollStart=e,this._oldValues.scrollStart):this.rawScrollStart()||0},rawScrollStart:function(){return this._actualValues.scrollStart},cachedScrollStart:function(e){return null!=e?(this._actualValues.cachedScrollStart=e,this._oldValues.cachedScrollStart):this.rawCachedScrollStart()||0},rawCachedScrollStart:function(){return this._actualValues.cachedScrollStart},scrollFactorFixed:function(e){return null!=e?(this._actualValues.scrollFactorFixed=e,this._oldValues.scrollFactorFixed):this.rawScrollFactorFixed()||1},rawScrollFactorFixed:function(){return this._actualValues.scrollFactorFixed},scrollFactorExceeding:function(e){return null!=e?(this._actualValues.scrollFactorExceeding=e,this._oldValues.scrollFactorExceeding):this.rawScrollFactorExceeding()||1},rawScrollFactorExceeding:function(){return this._actualValues.scrollFactorExceeding},start:function(e){return null!=e?(this._actualValues.start=e,this._oldValues.start):this.rawStart()||0},rawStart:function(){return this._actualValues.start},extent:function(e){return null!=e?(this._actualValues.extent=e,this._oldValues.extent):this.rawExtent()||0},rawExtent:function(){return this._actualValues.extent},innerViewExtent:function(e){return null!=e?(this._actualValues.innerViewExtent=e,this._oldValues.innerViewExtent):this.rawInnerViewExtent()||0},rawInnerViewExtent:function(){return this._actualValues.innerViewExtent},outerViewExtent:function(e){return null!=e?(this._actualValues.outerViewExtent=e,this._oldValues.outerViewExtent):this.rawOuterViewExtent()||0},rawOuterViewExtent:function(){return this._actualValues.outerViewExtent},virtualizedExtent:function(e){return null!=e?(this._actualValues.virtualizedExtent=e,this._oldValues.virtualizedExtent):this.rawVirtualizedExtent()||0},rawVirtualizedExtent:function(){return this._actualValues.virtualizedExtent},visibleRange:function(e){return null!=e?(this._actualValues.visibleRange=e,this._oldValues.visibleRange):this.rawVisibleRange()||{top:0,exactTop:0,bottom:0,exactBottom:0}},rawVisibleRange:function(){return this._actualValues.visibleRange}};e.exports=n.extendClass("nLayoutStripe",r,a)},46:(e,t,i)=>{var n=i(235),r=i(4199).nDefaultSeparator,a=function(e,t,i){this._listeners=[],this._intlNumberFormatsCache=new Map,this._intlDateTimeFormatsCache=new Map,this._intlNumberFormatOptionsMap,this._intlDateTimeFormatOptionsMap,this.locale(e,!1),this.language(t,!1),this.weekNumbering(i)};Object.assign(a.prototype,{locale:function(e){e&&"string"!=typeof e||(this._locale=(e||"en-US").substring(0,5).toLowerCase(),this._localeParams=n[this._locale],!this._localeParams&&this._locale.length>=5&&(this._locale=this._locale.substring(0,2),this._localeParams=n[this._locale]),this._localeParams||(this._locale="en",this._localeParams=n[this._locale]),this._intlNumberFormatsCache.clear(),this._intlDateTimeFormatsCache.clear(),!1!==arguments[1]&&this._compose())},language:function(e){e&&"string"!=typeof e||(this._language=e?e.substring(0,5).toLowerCase():void 0,this._languageParams=this._language?n[this._language]:void 0,e&&!this._languageParams&&this._language.length>=5&&(this._language=this._language.substring(0,2),this._languageParams=n[this._language]),this._languageParams||(this._language=void 0),!1!==arguments[1]&&this._compose())},weekNumbering:function(e){switch(this._weekNumbering=e,e){case"ISO8601":this._firstDayOfWeekByWeekNumbering=1;break;case"USA":this._firstDayOfWeekByWeekNumbering=0;break;default:this._firstDayOfWeekByWeekNumbering=void 0}!1!==arguments[1]&&this._compose()},firstDayOfWeek:function(e){if(!arguments.length)return null!=this._firstDayOfWeek?this._firstDayOfWeek:this._firstDayOfWeekByWeekNumbering;(null==e||e>=0&&e<=6)&&(this._firstDayOfWeek=e,!1!==arguments[1]&&this._compose())},_compose:function(){var e=this,t=e._composedLocaleParams;let i=Object.assign({},e._localeParams);i.patterns=Object.assign({},e._localeParams.patterns),e._languageParams&&(i.periods=e._languageParams.periods,i.days=e._languageParams.days,i.shortDays=e._languageParams.shortDays,i.months=e._languageParams.months,i.shortMonths=e._languageParams.shortMonths,i.patterns.W=e._languageParams.patterns.W,i.patterns.Q=e._languageParams.patterns.Q),void 0!==e._firstDayOfWeekByWeekNumbering&&(i.weekNumbering=e._weekNumbering,i.firstDay=e._firstDayOfWeekByWeekNumbering),null!=e._firstDayOfWeek&&(i.firstDay=e._firstDayOfWeek),e._composedLocaleParams=i,JSON.stringify(t)!==JSON.stringify(e._composedLocaleParams)&&e._listeners.forEach((function(t){t(e._composedLocaleParams)}))},addListener:function(e){"function"==typeof e&&this._listeners.push(e)},removeListener:function(e){if("function"==typeof e){var t=this._listeners.indexOf(e);t>=0&&this._listeners.splice(t,1)}},params:function(){return this._composedLocaleParams},applyDateFormat:function(e){return n.applyDateFormatWithParams(this._locale,this._composedLocaleParams,e)},applyNumberFormat:function(e){return n.applyNumberFormatWithParams(this._locale,this._composedLocaleParams,e)},intlNumberFormatOptionsMap:function(e){return 0!==arguments.length&&(this._intlNumberFormatsCache.clear(),this._intlNumberFormatOptionsMap=e),this._intlNumberFormatOptionsMap},intlDateTimeFormatOptionsMap:function(e){return 0!==arguments.length&&(this._intlDateTimeFormatsCache.clear(),this._intlDateTimeFormatOptionsMap=e),this._intlDateTimeFormatOptionsMap},_getFormatByKey:function(e,t,i,n,a){n||(n="default");let s=i.get(`${n}${r}${a??""}`);if(!s){let i=t&&(t.get(n)??t.get("default"));a&&(i?(i.timeZone&&(i=Object.assign({},i)),i.timeZone=a):i={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:a}),s=i&&new e(this._locale,i)}return s},getIntlNumberFormatByKey:function(e){return this._getFormatByKey(Intl.NumberFormat,this._intlNumberFormatOptionsMap,this._intlNumberFormatsCache,e)},getIntlDateTimeFormatByKey:function(e,t){return this._getFormatByKey(Intl.DateTimeFormat,this._intlDateTimeFormatOptionsMap,this._intlDateTimeFormatsCache,e,t)}}),e.exports=a},235:(e,t,i)=>{var n,r=i(8680),a="en",s={locale:function(e){var t=s;if(0!==arguments.length&&"string"==typeof e&&(!t[e=e.substring(0,5).toLowerCase()]&&"-"===e[2]&&e.length>=5&&(e=e.substring(0,2)),t[e]&&a!==e)){a=e;var i=t[e];n=i,r.timeFormat=r.timeFormatLocale(i).format,r.utcFormat=r.timeFormatLocale(i).utcFormat,r.format=r.formatLocale(i).format,r.select(window).dispatch("netronic_nLocales_localeChanged")}return n},applyDateFormatWithParams:function(e,t,i){var s,o,l=a,c=n;a=e,n=t,s=r.timeFormat,o=r.utcFormat,r.timeFormat=r.timeFormatLocale(t).format,r.utcFormat=r.timeFormatLocale(t).utcFormat;var u=i(t);return r.timeFormat=s,r.utcFormat=o,a=l,n=c,u},applyNumberFormatWithParams:function(e,t,i){var s=a,o=n;a=e,n=t;var l=r.format;r.format=r.formatLocale(t).format;var c=i(t);return r.format=l,a=s,n=o,c},updateManually:function(){r.select(window).dispatch("netronic_nLocales_localeChanged")},da:{locale:"da-dk",decimal:",",thousands:".",grouping:[3],currency:["kr.",""],dateTime:"%a %b %e %X %Y",date:"%d-%m-%Y",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],shortDays:["sø","ma","ti","on","to","fr","lø"],months:["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"],shortMonths:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%A %d %B %Y",W:"uge %W",Q:"k"},firstDay:1,weekNumbering:"ISO8601"},de:{locale:"de-de",decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%a %b %e %X %Y",date:"%d.%m.%Y",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%A, %d. %B %Y",W:"KW %W",Q:"Q"},firstDay:1,weekNumbering:"ISO8601"},"en-gb":{locale:"en-gb",decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%A, %d. %B %Y",W:"Wk %W",Q:"Q"},firstDay:1,weekNumbering:"ISO8601"},en:{locale:"en-us",decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%I:%M:%S %p",timeAccurateToMinute:"%I:%M %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],patterns:{t:"%I:%M %p",T:"%I:%M:%S %p",D:"%A, %B %d, %Y",W:"Wk %U",Q:"Q"},firstDay:0,weekNumbering:"USA"},es:{locale:"es-es",decimal:".",thousands:",",grouping:[3],currency:["€",""],dateTime:"%a %b %e %X %Y",date:"%d.%m.%Y",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["do","lu","ma","mi","ju","vi","sá"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%A, %d %B %Y",W:"sem %W",Q:"tri"},firstDay:1,weekNumbering:"ISO8601"},fi:{locale:"fi-fi",decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%a %b %e %X %Y",date:"%d.%m.%Y",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["su","ma","ti","ke","to","pe","la"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["tammi","helmi","maalis","huhti","touko","kesä","heinä","elo","syys","loka","marras","joulu"],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%A, %d. %B %Y",W:"viikko %W",Q:"nelj."},firstDay:1,weekNumbering:"ISO8601"},fr:{locale:"fr-fr",decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],shortDays:["Di","Lu","Ma","Me","Je","Ve","Sa"],months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],shortMonths:["Janv.","Févr.","Mars","Avr.","Mai","Juin","Juil.","Août","Sept.","Oct.","Nov.","Déc."],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%A %d %B %Y",W:"Sem %W",Q:"Trim"},firstDay:1,weekNumbering:"ISO8601"},it:{locale:"it-it",decimal:".",thousands:",",grouping:[3],currency:["€",""],dateTime:"%a %b %e %X %Y",date:"%d.%m.%Y",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],shortDays:["do","lu","ma","me","gi","ve","sa"],months:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],shortMonths:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%A, %d %B %Y",W:"set %W",Q:"tri"},firstDay:1,weekNumbering:"ISO8601"},ja:{locale:"ja-jp",decimal:".",thousands:",",grouping:[3],currency:["¥",""],dateTime:"%a %b %e %X %Y",date:"%Y/%d/%m",time:"%h:%M:%S",timeAccurateToMinute:"%H:%M",periods:["午前","午後"],days:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],shortDays:["日","月","火","水","木","金","土"],months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%Y年%m月%d日",W:"%U 週",Q:"Q"},firstDay:0,weekNumbering:"USA"},nl:{locale:"nl-nl",decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%a %b %e %X %Y",date:"%d.%m.%Y",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","mo","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","maa","apr","mei","jun","jul","aug","sep","okt","nov","dec"],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%A, %d. %B %Y",W:"wn %W",Q:"k"},firstDay:1,weekNumbering:"ISO8601"},nb:{locale:"nb-no",decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%a %b %e %X %Y",date:"%d.%m.%Y",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],shortDays:["Sø","Ma","Ti","On","To","Fr","Lø"],months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],shortMonths:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%A, %d. %B %Y",W:"Uke %W",Q:"K"},firstDay:1,weekNumbering:"ISO8601"},pl:{locale:"pl-pl",decimal:",",thousands:".",grouping:[3],currency:["zł",""],dateTime:"%a %b %e %X %Y",date:"%d.%m.%Y",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"],shortDays:["n","pn","wt","śr","cz","pt","so"],months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],shortMonths:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paź","lis","gru"],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%A, %d %B %Y",W:"Tydz %W",Q:"Kw"},firstDay:1,weekNumbering:"ISO8601"},pt:{locale:"pt-pt",decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%a %b %e %X %Y",date:"%d-%m-%Y",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],shortDays:["dom","seg","ter","qua","qui","sex","sáb"],months:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],shortMonths:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%A, %d de %B de %Y",W:"s %W",Q:"t"},firstDay:1,weekNumbering:"ISO8601"},"pt-br":{locale:"pt-br",decimal:",",thousands:".",grouping:[3],currency:["R$",""],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],shortDays:["dom","seg","ter","qua","qui","sex","sáb"],months:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],shortMonths:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%A, %d de %B de %Y",W:"s %W",Q:"t"},firstDay:0,weekNumbering:"USA"},ru:{locale:"ru-ru",decimal:",",thousands:" ",grouping:[3],currency:["р.",""],dateTime:"%a %b %e %X %Y",date:"%d.%m.%Y",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%A, %d %B %Y",W:"кн %W",Q:"к"},firstDay:1,weekNumbering:"ISO8601"},sv:{locale:"sv-se",decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%a %b %e %X %Y",date:"%d.%m.%Y",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["söndag","måndag","tisdag","onsdag","torsdag","fredag","lördag"],shortDays:["sö","må","ti","on","to","fr","lö"],months:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],shortMonths:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%A, %d:e %B %Y",W:"vecka %W",Q:"K"},firstDay:1,weekNumbering:"ISO8601"},th:{locale:"th-th",decimal:".",thousands:",",grouping:[3],currency:["¥",""],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],shortDays:["อ","จ","อ","พ","พ","ศ","ส"],months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],shortMonths:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%A, %d %B %Y",W:"Wk %W",Q:"Q"},firstDay:1,weekNumbering:"ISO8601"},"zh-cn":{locale:"zh-cn",decimal:".",thousands:",",grouping:[3],currency:["¥",""],dateTime:"%a %b %e %X %Y",date:"%Y/%m/%d",time:"%H:%M:%S",timeAccurateToMinute:"%H:%M",periods:["AM","PM"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],patterns:{t:"%H:%M",T:"%H:%M:%S",D:"%Y年%m月%d日",W:"%W一周",Q:"季度"},firstDay:0,weekNumbering:"ISO8601"}};s.no=s.nb,n=s[a],e.exports=s},3801:e=>{var t={isIOS:navigator&&(!!navigator.userAgent.match(/iPhone/)||!!navigator.userAgent.match(/iPad/)),isFirefox:navigator&&!!navigator.userAgent.match(/firefox/i),isChrome:navigator&&!!navigator.userAgent.match(/Chrome/),isAndroid:navigator&&!!navigator.userAgent.match(/Android/),isMacOrIOS:navigator&&!!navigator.userAgent.match(/mac/i),isWindows:navigator&&!!navigator.userAgent.match(/Windows NT/i)};t.isMac=t.isMacOrIOS&&!t.isIOS,e.exports=t},2946:(e,t,i)=>{var n=i(927),r=i(9744),a=i(6184),s=i(7947),o={construct:function(){this._options={}},setOption:function(e,t,i){var n=this,r=this._options[e];if(null!=r&&(null==t&&(t=r.defaultValue),r.typeConvert&&(t=r.typeConvert.call(this,t)),!0===r.check.call(this,e,t))){var a=r.value??r.defaultValue;a!==t&&(i||s.each(r.callbacks[0],(function(i){i.call(n,e,t,a,0)})),r.value=t,i||(s.each(r.callbacks[1],(function(i){i.call(n,e,t,a,1)})),s.each(r.callbacks[2],(function(i){i.call(n,e,t,a,2)}))))}},getOption:function(e){var t=this._options[e];return t&&(t.value??t.defaultValue)},setCallback:function(e,t,i){var n=this._options[e];if(null!=n&&"function"==typeof i){let r=n.callbacks[t];r?(Array.isArray(r)||(r=n.callbacks[t]=[r]),r.push(i)):n.callbacks[t]=i,0!==t&&1!==t||void 0!==n.value&&n.value!==n.defaultValue&&i.call(this,e,n.value,void 0)}},defineOption:function(e,t,i,n){null==n&&(n=function(){return!0}),this._options[e]={defaultValue:t,check:n,typeConvert:i,callbacks:{}}},overwriteDefaultValue:function(e,t){null!=this._options[e]&&(this._options[e].defaultValue=t)},convertAnyToBoolean:function(e){return!!e},convertAnyToString:function(e){return e&&"string"!=typeof e?e.toString():e},convertAnyOrArrayToStringArray:function(e){return null!=e&&(e=Array.isArray(e)?e.map((e=>e?.toString())).filter((e=>e)):[e.toString()]),e},convertObjectToMapOrNull:function(e){return null!=e&&(e instanceof Map?e=new Map(e):"object"==typeof e&&(e=new Map(Object.entries(e)))),e},convertStringToDate:function(e){return"string"==typeof e?new Date(e):e},convertStringToNumber:function(e){if("string"==typeof e){var t=+e;if(!isNaN(t))return t}return e},assertNumber:function(e,t){return a.assertNumber(t,null,`Option "${e}"`)},assertNumberOrNull:function(e,t){return a.assertNumberOrNull(t,null,`Option "${e}"`)},assertDateOrNull:function(e,t){return a.assertDateOrNull(t,null,e)},assertDayOrNull:function(e,t){return a.assertDayOrNull(t,null,e)},assertStringOrNull:function(e,t){return a.assertStringOrNull(t,null,(()=>`Value ${JSON.stringify(t)} for option "${e}"`))},assertFunctionOrNull:function(e,t){return a.assertFunctionOrNull(t,null,(()=>`Value ${JSON.stringify(t)} for option "${e}"`))},assertFiniteNumberGreaterOrEqualZeroOrNull:function(e,t){return a.assert(null==t||t>=0&&isFinite(t),(()=>`Value ${JSON.stringify(t)} for option "${e}" is out of range or has invalid type!`))},assertFiniteNumberGreaterOrEqualZero:function(e,t){return a.assert(t>=0&&isFinite(t),(()=>`Value ${JSON.stringify(t)} for option "${e}" is out of range or has invalid type!`))},assertFiniteNumberGreaterZeroOrNull:function(e,t){return a.assert(null==t||t>0&&isFinite(t),(()=>`Value ${JSON.stringify(t)} for option "${e}" is out of range or has invalid type!`))},assertFiniteNumberGreaterZero:function(e,t){return a.assert(t>0&&isFinite(t),(()=>`Value ${JSON.stringify(t)} for option "${e}" is out of range or has invalid type!`))},assertNumberGT0LE1:function(e,t){return a.assertNumber(t>0&&t<=1,(()=>`Value ${JSON.stringify(t)} for option "${e}" is out of range or has invalid type!`))},assertMapOrNull:function(e,t){return a.assert(null==t||t instanceof Map||"object"==typeof t,(()=>`Value ${JSON.stringify(t)} for option "${e}" has invalid type`))}};o.assertFiniteNumberGreaterOrEqualNullOrNull=o.assertFiniteNumberGreaterOrEqualZeroOrNull,e.exports=r.extendClass("nOptionsCollector",n,o)},9948:(e,t,i)=>{var n=i(8680),r=i(927),a=i(9744),s=i(5791),o=i(5244).eventListenerHelper,l=i(3801),c=null,u=null;const h="data-noa-pointerenter",p="data-noa-pointerleave",_="data-noa-tp",d="data-noa-dt";var m={construct:function(e,t,i){this._overlayScrollBarForX=t?.forX??!1,this._overlayScrollBarForY=t?.forY??!1,this._overlayScrollParentElem=void 0,this._overlayContentElem=void 0,this._overlayScrollBarsParentElem=void 0,this._overlayScrollBarsElem=void 0,this._overlayInViewElem=void 0,this._ignoreNextScrollEvents=!1,this.setLayoutCell(e),this.setScrollBarExistence(t??{forX:!0,forY:!0}),this._scrollBarWidthFnc=i},destroy:function(){this._overlayScrollParentElem&&o.off(this._overlayScrollParentElem,"scroll pointerdown"),this._overlayScrollBarsParentElem&&o.off(this._overlayScrollBarsParentElem,"scroll pointerdown pointermove pointerup wheel click contextmenu pointerdown pointermove pointerup pointerleave")},setLayoutCell:function(e){this._layoutCell=e},setScrollBarExistence:function(e){var t,i,n=this._scrollBarExistence;if((this._scrollBarExistence=e,this._overlayScrollParentElem)&&(null!=n&&null!=this._scrollBarExistence&&(null!=n.forX&&n.forX!=this._scrollBarExistence.forX&&(t=this._scrollBarExistence.forX),null!=n.forY&&n.forY!=this._scrollBarExistence.forY&&(i=this._scrollBarExistence.forY),null!=t||null!=i))){var r={};null!=t&&(r["overflow-x"]=!0===t?"scroll":"hidden"),null!=i&&(r["overflow-y"]=!0===i?"scroll":"hidden"),this.setParentCSS(r)}},_actualViewTop:function(){if(this._layoutCell&&this._layoutCell.layoutRow)return this._layoutCell.layoutRow.viewTop},_setViewTop:function(e){this._layoutCell&&this._layoutCell.layoutRow&&e!=this._layoutCell.layoutRow.viewTop&&(this._layoutCell.layoutRow.viewTop=e,this._updateViewTop())},_updateViewTop:function(){var e=this._actualViewTop();null!=e&&this.setParentCSS("top",e+"px")},_actualHeight:function(){if(this._layoutCell&&this._layoutCell.layoutRow)return this._layoutCell.layoutRow.height},_setHeight:function(e){this._layoutCell&&this._layoutCell.layoutRow&&e!=this._layoutCell.layoutRow.height&&(this._layoutCell.layoutRow.height=e,this._updateHeight())},_updateHeight:function(){var e=this._actualHeight();null!=e&&this.setContentCSS("height",Math.max(1,e)+"px")},_actualViewHeight:function(){if(this._layoutCell&&this._layoutCell.layoutRow)return this._layoutCell.layoutRow.viewHeight},_setViewHeight:function(e){this._layoutCell&&this._layoutCell.layoutRow&&e!=this._layoutCell.layoutRow.viewHeight&&(this._layoutCell.layoutRow.viewHeight=e,this._updateViewHeight())},_updateViewHeight:function(){var e=this._actualViewHeight();null!=e&&this.setParentCSS("height",e+"px")},_setViewTopHeightWithAnimation:function(e,t,i){if(this._layoutCell&&this._layoutCell.layoutRow){var n=!1;t!=this._layoutCell.layoutRow.viewTop&&(this._layoutCell.layoutRow.viewTop=t,n=!0),i!=this._layoutCell.layoutRow.viewHeight&&(this._layoutCell.layoutRow.viewHeight=i,n=!0),n&&this._updateViewTopHeightWithAnimation(e)}},_updateViewTopHeightWithAnimation:function(e){if(this._overlayScrollParentElem){var t=this._actualViewTop();if(null!=t){var i=this._actualViewHeight();null!=i&&(e(this._overlayScrollParentElem).style("top",t+"px").style("height",i+"px"),this._overlayScrollBarsParentElem&&e(this._overlayScrollBarsParentElem).style("top",t+"px").style("height",i+"px"))}}},_actualViewLeft:function(){if(this._layoutCell?.layoutColumn)return this._layoutCell.layoutColumn.viewLeft},_setViewLeft:function(e){this._layoutCell?.layoutColumn&&e!=this._layoutCell.layoutRow.viewLeft&&(this._layoutCell.layoutColumn.viewLeft=e,this._updateViewLeft())},_updateViewLeft:function(){var e=this._actualViewLeft();null!=e&&this.setParentCSS("left",e+"px")},_actualWidth:function(){if(this._layoutCell?.layoutColumn)return this._layoutCell.layoutColumn.width},_setWidth:function(e){this._layoutCell?.layoutColumn&&e!=this._layoutCell.layoutRow.width&&(this._layoutCell.layoutColumn.width=e,this._updateWidth())},_updateWidth:function(){var e=this._actualWidth();null!=e&&this.setContentCSS("width",e+"px")},_actualViewWidth:function(){if(this._layoutCell?.layoutColumn)return this._layoutCell.layoutColumn.viewWidth},_setViewWidth:function(e){this._layoutCell&&this._layoutCell.layoutColumn&&e!=this._layoutCell.layoutRow.viewWidth&&(this._layoutCell.layoutColumn.viewWidth=e,this._updateViewWidth())},_updateViewWidth:function(){var e=this._actualViewWidth();null!=e&&this.setParentCSS("width",e+"px")},_actualScrollBarWidth:function(){return this._scrollBarWidthFnc?this._scrollBarWidthFnc():0},_createAndPositionDivOverlays:function(e,t,i,r,a,m,f){var y=this;let v=n.create("div").attr("tabindex",-1).classed(i,!0);if(y._overlayContentElem=v.node(),t){let i=n.create("div").attr("tabindex",-1).classed(t,!0);this._overlayScrollParentElem=i.node(),n.select(e).append((()=>y._overlayScrollParentElem)),i.append((()=>y._overlayContentElem)),f&&o.on(this._overlayScrollParentElem,"pointerdown",(function(e){e.offsetY<y._overlayScrollParentElem.clientHeight&&f.call(y,a)}))}else n.select(e).append((()=>y._overlayContentElem));if(null==g.isPermanentScrollbarOverlayActive&&(g.isPermanentScrollbarOverlayActive=l.isWindows&&l.isFirefox),(l.isIOS||g.isPermanentScrollbarOverlayActive)&&t){let e=n.create("div").attr("tabindex",-1).classed(t,!0);this._overlayScrollBarsParentElem=e.node(),l.isIOS?e.attr("tabindex",-1).classed(r,!0).style("opacity",0):e.style("overflow-x",y._overlayScrollBarForX?"scroll":"hidden").style("overflow-y",y._overlayScrollBarForY?"scroll":"hidden"),this._overlayScrollBarsElem=n.create("div").attr("tabindex",-1).classed(i,!0).node();let a=function(e,t){let i;for(;e&&(i=e.getAttribute?.("data-ncursor"),!i);e=e.parentNode);e&&s.removeCursorTemporarily(e);let n=window.getComputedStyle(t).cursor;return"auto"===n&&(n=""),e&&s.restoreRemovedCursor(e),n};const m=function(e){return[h,p].some((t=>e.hasAttribute(t)))};if(g.isPermanentScrollbarOverlayActive){let e=y._overlayScrollBarsParentElem;o.on(e,"pointerdown pointermove pointerup wheel contextmenu pointerdown pointermove pointerup pointerleave",(function(t){let i=e.getBoundingClientRect(),r=i.left+e.clientLeft,s=i.top+e.clientTop,o=t.clientX>=r&&t.clientX<r+e.clientWidth&&t.clientY>=s&&t.clientY<s+e.clientHeight;if(c&&["pointerleave","pointermove"].includes(t.type)||o){y.showOrHidePermanentScrollbarOverlay(!1);try{let e,i,r,s,l,f="pointerleave"===t.type,g="pointermove"===t.type,y=g||f,v=y&&{pointerType:t.pointerType,buttons:t.buttons,button:t.button,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,clientX:t.clientX,clientY:t.clientY},E="",T=!f&&o?document.elementFromPoint(t.clientX,t.clientY):void 0;if(g)for(;T?.hasAttribute(_);)T=T.parentNode;if(y){if(T&&["g","rect","path","line","polygon","text","image","use"].includes(T.tagName)){let t=T;do{if(m(t)){e=t;break}}while((t=t.parentElement)&&"g"===t.tagName);t=T;do{if(E=a(this,t),E){i=t;break}}while((t=t.parentElement)&&"g"===t.tagName)}r=c,s=r!==e,l=u!==i}if(s&&r?.hasAttribute(p)){let t=Object.assign({},v,{target:r,relatedTarget:e});r.dispatchEvent(new PointerEvent("pointerleave",t))}if(!f){let e=T,i=new t.constructor(t.type,t);e&&(e.hasAttribute(d)&&g?n.select(e).dispatch(t.type,i):e.dispatchEvent(i)||t.preventDefault()),t.stopPropagation()}if(s&&e?.hasAttribute(h)){let t=Object.assign({},v,{target:e,relatedTarget:r});e.dispatchEvent(new PointerEvent("pointerenter",t))}l&&(this.style.cursor===E||!E&&"auto"===this.style.cursor||(this.style.cursor=E)),y&&(c=e,u=i)}finally{y.showOrHidePermanentScrollbarOverlay(!0)}}}))}}this._updateViewLeft(),this._updateViewTop(),this._updateViewWidth(),this._updateViewHeight(),this._updateWidth(),this._updateHeight(),m&&(y._overlayScrollParentElem&&o.on(y._overlayScrollParentElem,"scroll",(function(){y._ignoreNextScrollEvents?y._ignoreNextScrollEvents=!1:m.call(y,a)})),g.isPermanentScrollbarOverlayActive&&y._overlayScrollBarsParentElem&&o.on(y._overlayScrollBarsParentElem,"scroll",(function(){y._overlayScrollParentElem.scrollTop!==this.scrollTop&&(y._overlayScrollParentElem.scrollTop=this.scrollTop),y._overlayScrollParentElem.scrollLeft!==this.scrollLeft&&(y._overlayScrollParentElem.scrollLeft=this.scrollLeft)})))},appendIOSScrollBars:function(e){this._overlayScrollBarsParentElem&&(e.append((()=>this._overlayScrollBarsParentElem)),this._overlayScrollBarsParentElem.append((()=>this._overlayScrollBarsElem)))},overlayParentElem:function(){return this._overlayScrollParentElem},getContentOverlays:function(){return this._overlayScrollBarsElem?[this._overlayContentElem,this._overlayScrollBarsElem]:[this._overlayContentElem]},_calcOverlayWidthByOverflow:function(e){if(this._overlayScrollParentElem&&null!=e){switch(n.select(this._overlayScrollParentElem).style("overflow-y")){case"auto":this._overlayScrollParentElem.clientHeight<this._overlayScrollParentEleme.scrollHeight&&(e-=this._actualScrollBarWidth());break;case"scroll":e-=this._actualScrollBarWidth()}return Math.max(0,e)}return e},_calcOverlayHeightByOverflow:function(e){if(this._overlayScrollParentElem&&null!=e){switch(n.select(this._overlayScrollParentElem).style("overflow-x")){case"auto":this._overlayScrollParentElem.clientWidth<this._overlayScrollParentElem.scrollWidth&&(e-=this._actualScrollBarWidth());break;case"scroll":e-=this._actualScrollBarWidth()}return Math.max(0,e)}return e},scrollTop:function(e){var t;return this._overlayScrollParentElem&&(null!=e?(this._ignoreNextScrollEvents=!0,t=this._overlayScrollParentElem.scrollTop=e,this._overlayScrollBarsParentELem&&(this._overlayScrollBarsParentElem.scrollTop=e)):t=this._overlayScrollParentElem.scrollTop),t},scrollLeft:function(e){var t;return this._overlayScrollParentElem&&(null!=e?(this._ignoreNextScrollEvents=!0,t=this._overlayScrollParentElem.scrollLeft=e,this._overlayScrollBarsParentElem&&(this._overlayScrollBarsParentElem.scrollLeft=e)):t=this._overlayScrollParentElem.scrollLeft),t},clientHeight:function(){if(this._overlayScrollParentElem)return this._overlayScrollParentElem.clientHeight},clientWidth:function(){if(this._overlayScrollParentElem)return this._overlayScrollParentElem.clientWidth},setParentCSS:function(e,t){this._overlayScrollParentElem&&this._setCSS(this._overlayScrollParentElem,this._overlayScrollBarsParentElem,e,t)},setContentCSS:function(e,t){this._setCSS(this._overlayContentElem,this._overlayScrollBarsElem,e,t)},_setCSS:function(e,t,i,r){n.select(e).style(i,r),t&&n.select(t).style(i,r)},getBoundingClientRect:function(){if(this._overlayScrollParentElem)return this._overlayScrollParentElem.getBoundingClientRect()},showIOSScrollBars:function(e){if(l.isIOS&&this._overlayScrollBarsParentElem)if(!0===e){var t=!0===this._overlayScrollBarForX&&!0===this._scrollBarExistence.forX&&this._overlayScrollBarForX,i=!0===this._overlayScrollBarForY&&!0===this._scrollBarExistence.forY&&this._overlayScrollBarForY;n.select(this._overlayScrollBarsParentElem).style("overflow-x",!0===t?"scroll":"hidden").style("overflow-y",!0===i?"scroll":"hidden").style("opacity",1)}else n.select(this._overlayScrollBarsParentElem).style("overflow-x","hidden").style("overflow-y","hidden").style("opacity",0)},showOrHidePermanentScrollbarOverlay:function(e){g.isPermanentScrollbarOverlayActive&&(n.select(this._overlayScrollBarsParentElem).style("pointer-events",e?"":"none"),n.select(this._overlayScrollBarsElem).style("pointer-events",e?"":"none"))}},f=a.extendClass("nOverlayArea",r,m);f.POINTER_ENTER_ATTR_NAME=h,f.POINTER_LEAVE_ATTR_NAME=p,f.TAKE_PARENT_ATTR_NAME=_,f.DIRECT_TRIGGER_ATTR_NAME=d;var g=f;e.exports=f},5225:(e,t,i)=>{var n=self?.$??self?.jQuery??i.m.null;if(n?.widget){var r="npopup-container",a="npopup-close",s="npopup-background",o="npopup-background",l="npopup",c="npopup-context-menu",u=".npopup",h="pointerdown pointermove pointerup pointerover pointerout pointerenter pointerleave wheel click",p={_isPopupOpen:!1,_busyStateCounter:0,showPopup:function(e,t,i,o,c){if(void 0===i&&(i=!0),!p._isPopupOpen&&e){var h=n(e);if(h.length){h.addClass(r),h.html(t);var _=h.children();_.addClass(l),i&&_.prepend('<div class="'+a+'"></div>'),h.prepend('<div class="'+s+'"></div>'),h.fadeIn("normal"),p._isPopupOpen=!0,p._resizePopup();var d="."+a,m="click";!1!==o&&(d+=",."+s,m+=" keypress"),!0===i&&n(d).one(m,(function(){h.fadeOut("normal",(function(){p._isPopupOpen||(h.empty(),h.removeClass(r))})),n(window).off("resize"+u),p._isPopupOpen=!1})),!0===c&&_.draggable(),n(window).on("resize"+u,(function(){p._resizePopup()}))}}},_resizePopup:function(){var e=n("."+l);e.css("margin-left",(n(window).width()-e.width())/2+"px");var t=e.children("div").slice(1,2),i=parseInt(e.css("margin-top"))+parseInt(e.css("margin-bottom")),r=n(window).height()-i;t.length&&(t.height()>=r?e.height(r):(e.height(""),e.height()>=r&&e.height(r))),e.css("top",(n(window).height()-e.outerHeight()-i)/2)},showMessageBox:function(e,t,i,r,a,s,o,c,u){if(n.ui&&n.ui.dialog){var h,_=new n.Deferred;if(p._busyStateCounter&&p._doRemoveBusyState(),e){var d;d=void 0===o?'<span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>':null===o?"":'<span class="ui-icon ui-icon-'+o+'" style="float:left; margin:0 7px 20px 0;"></span>',n(e).append('<div class="'+l+'" title="'+t+'">'+d+i+"</div>"),h=n("."+l);var m={};r.forEach((function(e,t){m[e]=function(){_.resolve(t,u?u(h[0]):null)}})),h.dialog({dialogClass:c?"npopup-no-close":void 0,width:"auto",position:{within:document.body},resizable:!1,modal:!0,buttons:m,closeOnEscape:!(c&&!u),close:function(){_.resolve(s)}}),n("."+l+", ."+l+" *").keydown((function(e){if("Enter"==e.key)return n(this).closest(".ui-dialog").find(".ui-dialog-buttonpane button").eq(a).click(),!1}))}else setTimeout((function(){_.resolve(s)}),0);return _.then((function(){h&&(h.dialog("destroy"),h.remove()),p._busyStateCounter&&(p._isPopupOpen=!1,p._busyStateCounter--,p.showBusyState(e,!0,!0))})),_.promise()}throw new Error("jQuery UI Dialog is not loaded!")},showBusyState:function(e,t,i){if(t){if((!p._isPopupOpen||p._busyStateCounter)&&!p._busyStateCounter){var a=n(e);a.addClass(r),a.append('<div class="'+o+'"></div>'),a.on(h,(function(e){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()})),a.fadeIn(0),p._isPopupOpen=!0}p._busyStateCounter++}else p._busyStateCounter&&!--p._busyStateCounter&&(p._isPopupOpen=!1,i?p._doRemoveBusyState():setTimeout((function(){p._isPopupOpen||p._doRemoveBusyState()}),0))},_doRemoveBusyState:function(){var e=n("."+r);e.find("."+o).css("cursor","default"),e.off(h),e.fadeOut(0,(function(){e.empty(),e.removeClass(r)}))},showContextMenu:function(e,t,i){if(!n.moogle||!n.moogle.contextmenu)throw new Error("Plug-in jquery.ui-contextmenu is not loaded!");if(void 0!==p._callbackTimerID&&(window.clearTimeout(p._callbackTimerID),delete p._callbackTimerID),this.closeContextMenu(),!p._isPopupOpen&&e&&t){var r=new n.Deferred;n(document).on("pointerdown"+u,(function(e){2&e.buttons&&(n(e.target).addClass("ui-menu-item"),window.setTimeout((function(){n(e.target).removeClass("ui-menu-item")}),1))}));var a=p._activeContextMenu=n(e).contextmenu({addClass:c,delegate:"",preventContextMenuForPopup:!0,position:function(){return{my:"left top",at:"right bottom",of:i,within:document.body}},menu:t,select:function(e,t){r.resolve(t.item,t.cmd)},beforeOpen:function(){if(p._isPopupOpen)return!1},close:function(){n("."+c).off("contextmenu"+u),n(document).off("pointerdown"+u),"resolved"!==r.state()&&r.reject()}}).contextmenu("open",n(e)).contextmenu("instance");return n("."+c).on("contextmenu"+u,(function(e){e.preventDefault(),e.stopPropagation()})),p._isPopupOpen=!0,r.always((function(){a.destroy(),a===p._activeContextMenu&&(p._activeContextMenu=null),p._isPopupOpen=!1})),r.promise()}return null},NPOPUP_CLOSE_CLASS:a};e.exports=p}},5175:(e,t,i)=>{var n=i(7947),r=i(9350),a=i(4832),s={getPrimaryKeyNamesByRelationshipInfo:function(e){if(null!=e)return void 0===e._relatedPrimaryKeyNames&&(e._relatedPrimaryKeyNames=s.getPrimaryKeyNamesByPrimaryKeyInfos(e.primaryKeyInfos)),e._relatedPrimaryKeyNames},getCombinedPrimaryKeyNamesByRelationshipInfo:function(e){if(null!=e){if(void 0===e._combinedRelatedPrimaryKeyNames){var t=s.getPrimaryKeyNamesByRelationshipInfo(e);Array.isArray(t)?e._combinedRelatedPrimaryKeyNames=t.join("|"):e._combinedRelatedPrimaryKeyNames=t}return e._combinedRelatedPrimaryKeyNames}},getPrimaryKeyNamesByPrimaryKeyInfos:function(e){var t;if(null!=e)return Array.isArray(e)?(t=[],e.forEach((function(e){"string"==typeof e?t.push(e):t.push(e.primaryKeyName)}))):t="string"==typeof e?e:e.primaryKeyName,t},getPrimaryKeyByRelationshipInfo:function(e,t){if(null!=e&&null!=t){var i=s.getPrimaryKeyByPrimaryKeyNames(e,s.getPrimaryKeyNamesByRelationshipInfo(t));return!0===t.isMultiRelationship?i.split(","):i}},getPrimaryKeyByPrimaryKeyNames:function(e,t){if(null!=e&&null!=t)return r.compose(e,t)},getPrimaryKey:function(e,t,i,n,r){if(null!=e){var a=null!=t?s.getPrimaryKeyByPrimaryKeyNames(e,t):void 0;return i&&n?n.call(i,e,a,r):a}},evaluatePrimaryKeyInfo:function(e,t){if(null!=e&&null!=t){var i=t.primaryKeyName;if(a.notIsNullOrEmpty(i)){var n=e[i];return null!=n?""!==n?n:!0===Object.prototype.hasOwnProperty.call(t,"empty")?t.empty:n:n}}},evaluatePrimaryKeyInfos:function(e,t){if(null!=e&&null!=t)return"string"==typeof t?s.evaluatePrimaryKeyInfos(e,{primaryKeyName:t}):n.each(t,(function(t){if(!0===t.essential){var i=s.evaluatePrimaryKeyInfo(e,t);return null!=i&&""!==i}return!0}),!1)},allEssentialPrimaryKeysAvailable:function(e,t){if(null!=e&&null!=t)return n.each(t,(function(t){return s.evaluatePrimaryKeyInfos(e,t.primaryKeyInfos)}),!1)},getRelationshipInfoTo:function(e,t,i){var n;if(null!=e)for(var r=0;r<e.length;r++)if(e[r].comingFrom===t&&e[r].relatedTo===i)if(n){if(!Array.isArray(n)){var a=n;(n=[]).push(a)}n.push(e[r])}else n=e[r];return n}};e.exports=s},9350:(e,t,i)=>{var n=i(4199).nDefaultSeparator,r={compose:function(e,t){if(e){if(Array.isArray(t)){let i=t.map((t=>e[t]??"")).join(n);return i.length<t.length?"":i}return e[t]||""}}};e.exports=r},651:(e,t,i)=>{var n=i(927),r=i(9744);e.exports=r.extendClass("nRawDataHolder",n,{construct:function(e){this.store(e)},update:function(e){this.store(e)},data:function(){return this._data},store:function(e){this._data=e}})},1322:(e,t,i)=>{var n=i(927),r=i(9744),a={construct:function(){},registerRect:function(e){var t=this,i=Object.assign({},e);i.displacementX=0,i.displacementY=0;var n=e.order||0;this._registeredRects||(this._registeredRects=[]),this._registeredRects[n]||(this._registeredRects[n]=[]);var r=function(e){var i;return t._registeredRects.every((function(t){if(t){var n=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(!(n.id===t.id&&n.order===t.order||(r=t,(a=n).left>=r.right||a.right<=r.left||a.top>=r.bottom||a.bottom<=r.top)))return n}var r,a}(t,e);if(n)return i=n,!1}return!0})),i},a=function(e,t){var i=Object.assign({},e),n=t*e.width;return i.displacementX+=n,i.left+=n,i.right+=n,i},s=function(e,t,i){var n=Object.assign({},t),r=i*e.height;return n.displacementY=e.displacementY+r,n.top+=r,n.bottom+=r,n},o=function(e){return a(e,-1)},l=function(e,t){return s(e,t,-1)},c=function(e,t){return s(e,t,1)},u=r(i);if(u){var h,p=i;do{(1&e.position||4&e.position)&&(u=r(h=1&e.position?a(p,1):o(p))),u&&(u=r(h=p=8&e.position?l(u,p):c(u,p)))}while(u);u||(i=h)}return this._registeredRects[n].push(i),i},removeRects:function(){delete this._registeredRects}};e.exports=r.extendClass("nRectManager",n,a)},8624:(e,t,i)=>{var n=i(6184);const r=new Map,a=new ResizeObserver((e=>{for(let{target:t}of e)r.get(t)?.forEach((({callbackFunc:e})=>e(t)))}));class s{constructor(e,t){let i={callbackFunc:t,reference:this},n=r.get(e);n||(r.set(e,n=[]),a.observe(this.elem=e)),n.push(i)}detach(){let e=this.elem,t=r.get(e);if(t){let i=t.findIndex((({reference:e})=>e===this));i>=0&&(t.splice(i,1),t.length||(r.delete(e),a.unobserve(e)))}}}var o=function(e,t){n.assert(!(e instanceof Window),"nResizeSensor: window not allowed in parameter 1"),n.assertNotNull(e,"nResizeSensor",0),n.assertFunction(t,"nResizeSensor",1),this._3rdPartyObject=new s(e,t)};Object.assign(o.prototype,{detach:function(){this._3rdPartyObject&&(this._3rdPartyObject.detach(),delete this._3rdPartyObject)}}),e.exports=o},5732:(e,t,i)=>{var n=i(9744),r=i(8624),a=i(3801),s=i(3353),o=i(5244).eventListenerHelper,l=".nribbon",c="nribbon-widget",u="nribbon",h="nribbon-section",p="nribbon-last-section",_="nribbon-section-button",d="nribbon-section-button-selected",m="nribbon-section-button-hover",f="nribbon-section-button-hover-enabled",g="nribbon-section-button-disabled",y="nribbon-section-button-disabled-mark",v="nribbon-section-button-mouse-down",E="nribbon-section-custom-button",T="nribbon-tab",P="nribbon-tab-title",b="nribbon-tab-selected",S={Action:"action",Toggle:"toggle",Radio:"radio",Custom:"custom"},w={optionDefaults:{...s.prototype.optionDefaults,tabs:null,sections:null,imageWidth:48,imageHeight:48,visibleButtonTitles:!1,buttonTitleFontSize:"13px"},construct:function(){var e=this;e._super.apply(e,arguments),e._buttons={},e._element.classList.add(c);let t=e._ribbonContainerElem=document.createElement("div");e._element.append(t),t.classList.add("nribbon-container");let i=e._ribbonElem=document.createElement("ul");t.append(i),i.classList.add(u),e._resizeSensor=new r(e._element,(function(){e._adjustWidth()})),e.options?.sections&&e._createContent(e.options.sections,e.options.tabs)},_setOption:function(e,t){"sections"===e?this._createContent(t,this.options.tabs):"tabs"===e&&this._createContent(this.options.sections,t),this._super(e,t)},destroy:function(){var e=this;e._resizeSensor.detach(),delete e._resizeSensor,e._element.classList.remove(c),e._element.querySelectorAll("*").forEach((e=>{e.remove()}))},_getTab:function(e){var t=null;return this.options.tabs.forEach((function(i){i.id===e&&(t=i)})),t},_getSection:function(e){var t=null;return this.options.sections.some((function(i){if(i.id===e)return t=i,!0})),t},selectTab:function(e){var t=this;if(t.options.tabs){t._tabsContainerElem.querySelectorAll("."+T).forEach((e=>{e.classList.remove(b)})),t.options.tabs.forEach((function(e){e.selected=!1}));var i=this._getTab(e);if(i){let e,n=t._ribbonElem.querySelectorAll("."+h);n.forEach((e=>{e.classList.remove(p)})),n.forEach((function(n){let r=n.getAttribute("id");i.sectionIds.some((e=>e===r))?(t._getSection(r).displayDisabled?n.style.display="none":(n.style.display="list-item",e=n),n.querySelectorAll("."+y).forEach((function(e){var t=e.closest("."+_);e.style.width=t.getBoundingClientRect().width+"px",e.style.height=t.getBoundingClientRect().height+"px"}))):n.style.display="none"})),e?.classList.add(p),t._tabsContainerElem.querySelector("#"+i.id).parentElement.classList.add(b),i.selected=!0,t._adjustWidth()}}},_tabClicked:function(e){var t=e.currentTarget.children[0].getAttribute("id");this.selectTab(t);var i=this._getTab(t);i.clicked&&i.clicked.call(this,{tabID:t})},getSelectedTab:function(){var e="";return this.options.tabs.forEach((function(t){t.selected&&(e=t.id)})),e},_createContent:function(e,t){var i=this;t?i._tabsContainerElem?i._tabsContainerElem.querySelectorAll("*").forEach((e=>{e.remove()})):(i._tabsContainerElem=document.createElement("div"),i._tabsContainerElem.classList.add("nribbon-tabs"),i._element.prepend(i._tabsContainerElem)):!t&&i._tabsContainerElem&&(i._tabsContainerElem.remove(),delete i._tabsContainerElem),i._ribbonElem.querySelectorAll("*").forEach((e=>{e.remove()})),e.forEach((function(e){var t=document.createElement("li");t.setAttribute("id",e.id),t.classList.add(h),t.innerHTML='<h2><span class="nribbon-section-title">'+e.title+"</span></h2>",i._ribbonElem.append(t),e.buttons&&e.buttons.forEach((function(e){var n=document.createElement("div");if(n.setAttribute("id",e.id),n.classList.add(_),t.append(n),i._buttons[e.id]=e,e.html)n.innerHTML=e.html;else{var r=document.createElement("img");n.append(r),r.setAttribute("src",e.image),r.setAttribute("title",e.title),r.setAttribute("draggable","false"),r.setAttribute("width",i.options.imageWidth+"px"),r.setAttribute("height",i.options.imageHeight+"px");var s=i.options.visibleButtonTitles?e.title:"",o=document.createElement("div");o.classList.add("nribbon-section-button-title"),o.append(s),n.append(o),i.options.buttonTitleFontSize&&o.setAttribute("font-size",i.options.buttonTitleFontSize),e.type===S.Toggle?"on"!==e.initialState&&!0!==e.initialState||n.classList.add(d):e.type===S.Radio&&e.initiallySelected&&n.classList.add(d)}var l=document.createElement("div");l.classList.add(y),n.prepend(l),e.type===S.Custom&&n.classList.add(E),!0===e.disabled?i._disableButton(e.id,!0):i._disableButton(e.id,!1),a.isIOS||!1===e.hovering||e.disabled||n.classList.add(f)}))}));let n=document.createElement("li");if(n.style.clear="both",i._ribbonElem.append(n),i._ribbonElem.querySelector("."+_).classList.add(m),Array.from(i._ribbonElem.querySelectorAll("."+h)).reverse().some((e=>{if("none"!==e.style.display)return e.classList.add(p),!0})),t){t.forEach((function(e){let t=document.createElement("div");t.classList.add(T),t.innerHTML='<a href="javascript:void(0)" id="'+e.id+'" class="'+P+'">'+e.title+"</a>",o.on(t,"click",(function(e){i._tabClicked(e)})),i._tabsContainerElem.append(t)}));let e=document.createElement("div");e.classList.add(T,"nribbon-last-tab"),e.innerHTML='<a href="javascript:void(0)" class="'+P+'">&nbsp;</a>',i.selectTab(t[0].id)}},selectButton:function(e){var t=this,i=t._element.querySelector("#"+e),n=t._buttons[e];if(n.type===S.Toggle)return i.classList.contains(d)?i.classList.remove(d,m):(i.classList.add(d),i.classList.remove(m)),null;if(n.type===S.Radio){if(!i.classList.contains(d)){i.classList.add(d);for(const[e,i]of Object.entries(t._buttons))if(i!==n&&i.type===S.Radio&&i.group===n.group){var r=t._element.querySelector("#"+e);if(r.classList.contains(d))return r.classList.remove(d),i}}return null}},buttonClicked:function(e){var t=this._element.querySelector("#"+e);t&&this._buttonClicked(t)},_buttonClicked:function(e){var t=this,i=t._buttons[e.getAttribute("id")];if(i.type!==S.Toggle){if(i.type!==S.Radio)i.clicked&&i.clicked.call(this,{buttonID:i.id}),t._trigger("clicked",null,{buttonID:i.id});else if(!e.classList.contains(d)){var n;e.classList.add(d);for(const[e,a]of Object.entries(t._buttons))if(a!==i&&a.type===S.Radio&&a.group===i.group){var r=t._element.querySelector("#"+e);if(r.classList.contains(d)){r.classList.remove(d),n=a;break}}n&&(i.clicked&&i.clicked.call(this,{buttonID:i.id,previousButtonID:n.id}),t._trigger("clicked",null,{buttonID:i.id,previousButtonID:n.id}))}}else e.classList.contains(d)?(e.classList.remove(d,m),i.clicked&&i.clicked.call(this,{buttonID:i.id,state:!1}),t._trigger("clicked",null,{buttonID:i.id,state:!1})):(e.classList.add(d),e.classList.remove(m),i.clicked&&i.clicked.call(this,{buttonID:i.id,state:!0}),t._trigger("clicked",null,{buttonID:i.id,state:!0}))},_adjustWidth:function(){var e=this;e._element.querySelector("."+u).style.width="10000px";var t=0;e._element.querySelectorAll("."+h).forEach((function(e){t+=e.getBoundingClientRect().width+.01})),e._element.querySelector("."+u).style.width=t+"px"},_disableButton:function(e,t){var i=this,n=i._element.querySelector("#"+e);if(n)if(o.off(n,"click"+l),o.off(n,"pointerdown"+l),o.off(n,"pointerup"+l),!0===t){n.classList.add(g),n.classList.remove(f);let t=document.querySelector("#"+e+" ."+y);t.style.width=n.getBoundingClientRect().width+"px",t.style.height=n.getBoundingClientRect().height+"px",t.style.visibility="visible"}else o.on(n,"click"+l,(function(e){return i._buttonClicked(this,e)})),o.on(n,"pointerdown"+l,(function(){this.classList.contains(E)||this.classList.add(v)})),o.on(n,"pointerup"+l,(function(){this.classList.remove(v)})),o.on(n,"pointerleave"+l,(function(){this.classList.remove(v)})),n.classList.remove(g),!1!==this._buttons[e].hovering&&n.classList.add(f),document.querySelector("#"+e+" ."+y).style.visibility="hidden"},getSelectedButtonInRadioGroup:function(e){var t=null;for(const[i,n]of Object.entries(this._buttons)){if(n.type===S.Radio&&n.group===e)if(this._element.querySelector("#"+i).classList.contains(d)){t=i;break}}return t},buttonAttr:function(e,t,i){var n=this,r=n._element.querySelector("#"+e);if(void 0===i)return r.getAttribute(t);switch(t){case"disabled":n._disableButton(e,i);break;case"initialState":n._buttons[e].type===S.Toggle&&("on"===i||!0===i?r.classList.add(d):r.classList.remove(d));break;case"initiallySelected":n._buttons[e].type===S.Radio&&(i?r.classList.add(d):r.classList.remove(d));break;case"imageSource":if(!i)return r.querySelector("img").getAttribute("src");r.querySelector("img").setAttribute("src",i);break;case"title":if(!i)return r.querySelector("img").getAttribute("title");r.querySelector("img").setAttribute("title",i);break;default:r.setAttribute(t,i)}n._adjustWidth()},sectionAttr:function(e,t,i){var n=this,r=n._element.querySelector("#"+e);if(void 0===i)return r.getAttribute(t);if("displayDisabled"===t)n.options.sections.some((function(t){if(t.id===e)return t.displayDisabled=i,!0}));else r.setAttribute(t,i);n._adjustWidth()},buttonStyleAttr:function(e,t,i){var n=this;if(void 0===i)return n._element.querySelector("#"+e).style[t];n._element.querySelector("#"+e).style[t]=i,n._adjustWidth()},sectionStyleAttr:function(e,t,i){var n=this;if(void 0===i)return n._element.querySelector("#"+e).style[t];n._element.querySelector("#"+e).style[t]=i,n._adjustWidth()},isButtonSelected:function(e){var t=this._element.querySelector("#"+e);return!!t&&t.classList.contains(d)}},C=n.extendClass("nRibbonWidget",s,w);C.RibbonButtonType=S;var M=self?.$??self?.jQuery??i.m.null;M?.widget&&function(){let e={options:{...w.optionDefaults},_create:function(){let e={},t={},i=M.Widget.prototype.options,n=this.options;Object.keys(n).forEach((r=>{(r in i?t:e)[r]=n[r]}));let r=this._w=new C(this.element[0],e);this.options=Object.assign(r.options,t);for(const e in r){let t=r[e];e.startsWith("_")||"function"!=typeof t||e in s.prototype||(this[e]=t.bind(r))}this._super()},option:function(){return this._w.option.apply(this._w,arguments)},_destroy:function(){this._w.destroy(),this._super()}};M.widget("netronic.nRibbonWidget",e)}(),e.exports=C},9142:(e,t,i)=>{var n=i(9744),r=i(4041),a={construct:function(e,t,i){this._super(e,t,i)},appendTo:function(e){var t=this._super(e);return this._symbolD3=t.append("use").attr("class","nsvg-symbol").datum({}),this._symbolD3},setSymbol:function(e){this._symbolD3&&this._symbolD3.attr("href",e)},setWidthHeight:function(e,t){this._super(e,t),this._setWidthHeight(this._symbolD3,e,t)},_attributeTestRect:function(){}};e.exports=n.extendClass("nSVGSymbolBox",r,a)},7945:(e,t,i)=>{var n=i(9744),r=i(4041),a={construct:function(e,t,i){this._super(e,t,i),this._constEM=4},appendTo:function(e,t){var i=this._super(e);return this._textD3=i.append("text").attr("class",`nsvg-text ${t??""}`),this._textD3},setScale:function(e){this._textD3&&(this._textD3.style("font-size",100*e+"%"),this._constEM*=e)},setText:function(e){if(this._textD3){var t;this._rawSetText(e),this._rawSetDXDY("0.35em","-0.35em");try{t=this._textD3.node().getBBox({stroke:!0})}catch(e){t={height:0,width:0,x:0,y:0}}var i=t.width+2*this._constEM,n=t.height+.25*this._constEM;this._rawSetY(this._textD3,n),this.setWidthHeight(i,n),this.calcInitialPosition(i,n)}},setDX:function(e){this._textD3&&this._rawSetDX(e)},setDY:function(e){this._textD3&&this._rawSetDY(e)},setDXDY:function(e,t){this._textD3&&(this._rawSetDX(e),this._rawSetDY(t))},_attributeTestRect:function(e){this._textD3&&(e.label=this._textD3.text())},_rawSetText:function(e){this._textD3.text(e)},_rawSetDX:function(e){this._textD3.attr("dx",e)},_rawSetDY:function(e){this._textD3.attr("dy",e)},_rawSetDXDY:function(e,t){this._rawSetDX(e),this._rawSetDY(t)}};e.exports=n.extendClass("nSVGTextBox",r,a)},4041:(e,t,i)=>{var n=i(927),r=i(9744),a={construct:function(e,t,i){this._id=e,this._position=t,this._rotate=i,this._translateX=[],this._translateY=[]},appendTo:function(e){return this._parentD3=e,this._lastContainerD3=this._outerContainerD3=this._parentD3.append("g").attr("class","nsvg-outer-container").attr("pointer-events","none").attr("transform","translate(0,0)"),!0===this._rotate&&(this._lastContainerD3=this._rotaterD3=this._lastContainerD3.append("g").attr("class","nsvg-rotater").attr("transform","rotate(0)")),this._rectD3=this._lastContainerD3.append("rect"),this._lastContainerD3},prependTo:function(){},classed:function(e,t){this._rectD3&&this._rectD3.classed(e,t)},setXY:function(e,t){this._setTransform(0,e||0,t||0)},setWidthHeight:function(e,t){this._setWidthHeight(this._rectD3,e,t)},calcInitialPosition:function(e,t){if(this._outerContainerD3){var i=0,n=0;!0===this._rotate?(i=1&this._position?-1*t:2&this._position?-1*t/2:0,n=e,this._rotaterD3.attr("transform","rotate(-90)")):(i=1&this._position?-1*e:2&this._position?-1*e/2:0,n=8&this._position?-1*t:0),this._setTransform(2,i,n)}},optimizePosition:function(e,t,i){if(this._outerContainerD3){var n=this._outerContainerD3.node();if(n){this._boundingRect||(this._boundingRect=this.getBoundingRect(n,i));var r={top:0,left:0,bottom:0,right:0,height:0,width:0};r.top=this._boundingRect.top,r.left=this._boundingRect.left,r.height=this._boundingRect.height,r.width=this._boundingRect.width,r.bottom=r.top+r.height,r.right=r.left+r.width,r.position=this._position,r.id=this._id,r.order=t,this._attributeTestRect(r);var a=e.registerRect(r);this._setTransform(1,a.displacementX,a.displacementY)}}},_attributeTestRect:function(){},_setTransform:function(e,t,i){this._translateX[e]=t,this._translateY[e]=i;var n=this._translateX.reduce(((e,t)=>e+t),0),r=this._translateY.reduce(((e,t)=>e+t),0);this._outerContainerD3.attr("transform","translate("+n+","+r+")")},getBoundingRect:function(e,t){let i=e.getBoundingClientRect(),n=e.getBBox();return{top:i.top,height:n.height*(t||1),left:i.left,width:n.width*(t||1)}},_setWidthHeight:function(e,t,i){e&&(this._rawSetWidth(e,t),this._rawSetHeight(e,i))},_rawSetX:function(e,t){e.attr("x",t)},_rawSetY:function(e,t){e.attr("y",t)},_rawSetWidth:function(e,t){e.attr("width",t)},_rawSetHeight:function(e,t){e.attr("height",t)}};e.exports=r.extendClass("nSVGTransformableBox",n,a)},7973:(e,t,i)=>{var n=i(3801),r={scrollBarWidth:function(){if(!document||!window)return 17;if(void 0===this._cachedScrollBarWidth)if(n.isIOS)this._cachedScrollBarWidth=0;else{var e=document.createElement("div");e.style.display="block",e.style.position="absolute",e.style.visibility="hidden",e.style.width="50px",e.style.height="50px",e.style.overflow="hidden",document.body.insertBefore(e,document.body.firstChild);var t=document.createElement("div");t.style.height="100px",t.style.width="auto",e.appendChild(t);var i=t.offsetWidth;e.style.overflow="scroll";var r=window.parseFloat(window.getComputedStyle(t).width);if(i===r&&(r=e.clientWidth),e.parentNode.removeChild(e),this._cachedScrollBarWidth=i-r,!this._resizeEventListenerAttached){var a=this;window.addEventListener("resize",(function(){delete a._cachedScrollBarWidth})),a._resizeEventListenerAttached=!0}}return this._cachedScrollBarWidth},scrollLineHeight:function(){if(!document||!window)return 17;var e=document.createElement("div");e.style.fontSize="initial",e.style.display="none",document.body.appendChild(e);var t=window.getComputedStyle(e).fontSize;return document.body.removeChild(e),t?window.parseInt(t):void 0}};e.exports=r},6560:e=>{var t={InsertAtStartOfInterval:0,InsertAtEndOfInterval:1,ModifyInterval:2,SplitAtEndOfInterval:3},i=function(e,t){if(!(this instanceof i))return new i(e,t);if(e instanceof i){this._datesArray=[],this._valuesArray=[];var n=e.dates(),r=e.values();this._arraysLength=r.length;for(var a=0;a<this._arraysLength;a++)this._datesArray.push(n[a]),this._valuesArray.push(r[a])}else this._datesArray=[new Date(0)],this._valuesArray=[e],this._arraysLength=1;this._handleInsertion=t};i.DateInfinity=new Date(Date.UTC(1970,0,1e8)),i.prototype={setHandleInsertionFunction:function(e){this._handleInsertion=e},allocateTimeSpan:function(e,i,n){var r=this;if(e instanceof Date&&i instanceof Date){var a=r._findInsertionIndex(e),s=!1,o=a>0?r._valuesArray[a-1]:void 0;if(r._handleInsertion)do{let l=r._datesArray[a],c=l?.getTime(),u=r._valuesArray[a];if(!s&&(!l||c>=e.getTime())){if(!l||c!==e.getTime()){let i=new Date(e),s=r._handleInsertion.call(r,t.InsertAtStartOfInterval,i,o,n);if(!s)break;r._datesArray.splice(a,0,i),r._valuesArray.splice(a,0,s),r._arraysLength++,++a,o=s}s=!0}if(s){if(!l||c>=i.getTime()){if(!l||c!==i.getTime()){let e=new Date(i),s=r._handleInsertion.call(r,t.InsertAtEndOfInterval,e,o,n);if(!s)break;r._datesArray.splice(a,0,e),r._valuesArray.splice(a,0,s),r._arraysLength++}break}if(a===r._arraysLength-1){let e=new Date(i),s=r._handleInsertion.call(r,t.SplitAtEndOfInterval,e,u,n);if(!s)break;++a,r._datesArray.splice(a,0,e),r._valuesArray.splice(a,0,s||Object.assign({},u)),r._arraysLength++}r._handleInsertion.call(r,t.ModifyInterval,l,u,n)}o=u}while(++a<r._arraysLength);else if(e.getTime()!==i.getTime())do{let t=r._datesArray[a],c=t?.getTime(),u=r._valuesArray[a];if(!s&&(!t||c>=e.getTime())){s=!0;let i=!0;if(t&&c===e.getTime()&&(n!==u?n!==o&&(r._valuesArray[a]=n,++a,o=u,t=r._datesArray[a],c=t?.getTime(),u=r._valuesArray[a],i=!1):(i=!1,++a,o=u,t=r._datesArray[a],c=t?.getTime(),u=r._valuesArray[a])),i&&n!==o){let t=new Date(e);r._datesArray.splice(a,0,t),r._valuesArray.splice(a,0,n),++r._arraysLength,++a}}if(s){if(t){if(c>i.getTime()&&o===u&&n!==u){let e=new Date(i);r._datesArray[a]=e;break}if(c===i.getTime()&&o!==u)break;for(;t&&(c<i.getTime()||c===i.getTime()&&n===u);)r._datesArray.splice(a,1),r._valuesArray.splice(a,1),--r._arraysLength,o=u,t=r._datesArray[a],c=t?.getTime(),u=r._valuesArray[a]}var l=!t||c>i.getTime();if(l?l=n!==o:a>=r._arraysLength-1&&n!==u&&(l=!0,a=r._arraysLength),l){let e=new Date(i);r._datesArray.splice(a,0,e),r._valuesArray.splice(a,0,o instanceof Object?Object.assign({},o):o),++r._arraysLength;break}}}while(++a<r._arraysLength)}},isTimeSpanAllocated:function(e,t,i){var n=this.determineNextOrSameDateWithValue(e);if(n&&n.date>e&&(n=this.determinePreviousDateWithValue(e)),!n)return null!==n&&n;for(;!(i?i.call(this,n.value):n.value);)if(!(n=this.determineNextDateWithValue(new Date(n.date.getTime()+1)))||n.date>=t)return!1;return!0},convertValues:function(e){if(e)for(var t=0;t<this._arraysLength;t++)this._valuesArray[t]=e.call(this,this._datesArray[t],this._valuesArray[t])},forEach:function(e,t){if(e)for(var i=0;i<this._arraysLength&&!1!==e.call(t||this,this._datesArray[i],this._datesArray[i+1],this._valuesArray[i],this._valuesArray[i+1]);i++);},getValueAtDate:function(e,t,i){var n=this.determinePreviousOrSameDateWithValue(e);if(n){if(t||i){n.start=n.date,n.date=e;var r=this.determineNextDateWithValue(e);if(n.end=r?r.date:null,n.end&&i){var a=new Date(0);n.start.getTime()!==a.getTime()&&(n.interpolatedValue=n.value.value+(r.value.value-n.value.value)*((e.getTime()-n.start.getTime())/(n.end.getTime()-n.start.getTime())))}return n}return n.value}return n},dates:function(e,t){if(void 0===e&&void 0===t)return this._datesArray;if(e instanceof Date&&t instanceof Date){var i=0,n=this._arraysLength;if(void 0!==e)for(;i+1<this._arraysLength&&this._datesArray[i+1]<=e;)i++;if(void 0!==t)for(;n>0&&this._datesArray[n-1]>=t;)n--;var r=this._datesArray.slice(i,n+1);return n===this._arraysLength&&r.push(null),r}},values:function(e,t){if(void 0===e&&void 0===t)return this._valuesArray;if(e instanceof Date&&t instanceof Date){var i=0,n=this._arraysLength;if(void 0!==e)for(;i+1<this._arraysLength&&this._datesArray[i+1]<=e;)i++;if(void 0!==t)for(;n>0&&this._datesArray[n-1]>=t;)n--;var r=this._valuesArray.slice(i,n+1);return n===this._arraysLength&&r.push(null),r}},determineNextDateWithValue:function(e){if(e instanceof Date){var t=this._findInsertionIndex(new Date(e.getTime()+1));return t<this._arraysLength?{date:this._datesArray[t],value:this._valuesArray[t]}:null}},determineNextOrSameDateWithValue:function(e){if(e instanceof Date){var t=this._findInsertionIndex(e);return t<this._arraysLength?{date:this._datesArray[t],value:this._valuesArray[t]}:null}},determinePreviousDateWithValue:function(e){if(e instanceof Date){var t=this._findInsertionIndex(e)-1;return t<0?null:{date:this._datesArray[t],value:this._valuesArray[t]}}},determinePreviousOrSameDateWithValue:function(e){if(e instanceof Date){var t=this._findInsertionIndex(e);return(t===this._arraysLength||this._datesArray[t].getTime()>e.getTime())&&t--,t<0?null:{date:this._datesArray[t],value:this._valuesArray[t]}}},_findInsertionIndex:function(e){var t=0,i=this._arraysLength-1,n=e instanceof Date?e.getTime():e;if(this._arraysLength&&n>this._datesArray[this._arraysLength-1].getTime())return this._arraysLength;for(;t<=i;){var r=(t+i)/2|0,a=this._datesArray[r].getTime(),s=a>n?1:a<n?-1:0;if(s<0)t=r+1;else{if(!(s>0))return r;i=r-1}}return Math.max(t,i)}},i.ModificationType=t,e.exports=i},3225:(e,t,i)=>{var n=i(8680),r=i(9327).transform,a=i(9744),s=i(5791),o=i(5244).eventListenerHelper,l=i(5408),c=i(3801),u=i(9948),h=i(3353),p=".nsplitter",_="nsplitter",d="nsplitter-rect",m={Vertical:0,Horizontal:1},f={optionDefaults:Object.assign({},h.prototype.optionDefaults,{classes:"",visualZoomFactor:1,max:1/0,min:0,position:{x:0,y:0},orientation:m.Vertical,width:2,sensitiveWidth:6,height:100,showDragStart:!1,changed:null,startDrag:null,dragged:null,endDrag:null,movable:!0,svgGroupElem:null,svgLineElem:null,useOwnEventDispatcher:!0,divElemForCursor:null,cursorValue:null}),_setOption:function(e,t){if("height"===e)t=t<0?0:t,(i=this.options.svgLineElem?n.select(this.options.svgLineElem):this._splitterRectD3).attr("line"===i.node().nodeName.toLowerCase()?"y2":"height",t),this._splitterRectPhantomD3.attr("height",t),this._super(e,t),this._setSensitiveRectWidth();else if("width"===e){var i;(i=this.options.svgLineElem?n.select(this.options.svgLineElem):this._splitterRectD3).attr("line"===i.node().nodeName.toLowerCase()?"x2":"width",t),this._splitterRectPhantomD3.attr("width",t),this._super(e,t),this._setSensitiveRectWidth()}else if("sensitiveWidth"===e)this._super(e,t),this._setSensitiveRectWidth();else if("orientation"===e)this.options.orientation===m.Vertical?this._splitterSensitiveRectD3.attr("transform","translate("+(this.options.width-this.options.sensitiveWidth)/2+")"):this._splitterSensitiveRectD3.attr("transform","translate(0,"+(this.options.height-this.options.sensitiveWidth)/2+")");else if("position"===e){var a=this.options.svgGroupElem?n.select(this.options.svgGroupElem):this._splitterD3;if(t.transitionDuration?a.transition().duration(t.transitionDuration).attr("transform","translate("+t.x+", "+t.y+")"):(a.interrupt(),a.attr("transform","translate("+t.x+", "+t.y+")")),delete t.transitionDuration,"hidden"!==this._splitterRectPhantomD3.attr("visibility")){var s=r(this._splitterRectPhantomD3.attr("transform")||"translate(0,0)");let e=this._oldValue;this.options.orientation===m.Vertical?(s.translate[0]+=e-t.x,this._oldValue=t.x):(s.translate[1]+=e-t.y,this._oldValue=t.y),this._oldValueOffset+=this._oldValue-e,this._splitterRectPhantomD3.attr("transform",s.toString())}}else if("max"===e){if(this.options.orientation===m.Vertical){if(this.options.position.x>t)this.options.position.x=t,(a=this.options.svgGroupElem?n.select(this.options.svgGroupElem):this._splitterD3).attr("transform","translate("+t+", "+this.options.position.y+")")}else if(this.options.position.y>t)this.options.position.y=t,(a=this.options.svgGroupElem?n.select(this.options.svgGroupElem):this._splitterD3).attr("transform","translate("+this.options.position.x+", "+t+")")}else if("svgGroupElem"===e||"svgLineElem"===e)return;this._super(e,t)},construct:function(){var e=this;e._super.apply(e,arguments),this._newValue=void 0,this._oldValue=void 0,this._svgSplitterRootD3=n.select(this._element),this.options.useOwnEventDispatcher&&this.options.movable&&(this._eventDispatcher=new l(this._svgSplitterRootD3.node(),[l.PRESS_PAN_EVENT_NAME,l.CONTEXT_MENU_EVENT_NAME])),this._svgSplitterRootD3.classed(_,!0),this._svgSplitterRootD3.on("contextmenu",(function(e){return e.preventDefault(),!1})),this.options.svgGroupElem||(this._splitterD3=this._svgSplitterRootD3.append("g"));var t=this.options.svgGroupElem?n.select(this.options.svgGroupElem):this._splitterD3;if(t.classed(l.PRESS_PAN_EVENT_CLASS_NAME,!0).classed(this.options.classes,!0).attr("transform","translate("+this.options.position.x+","+this.options.position.y+")").on(l.TARGET_EVENT_NAME,(function(t){e._onInteraction(t)})),this.options.svgLineElem||(this._splitterRectD3=t.append("rect").attr("class",d).attr("width",this.options.width).attr("height",this.options.height)),e.options.movable&&(this._cursorValue=this.options.cursorValue??(e.options.orientation===m.Vertical?"ew-resize":"ns-resize")),this._splitterRectPhantomD3=t.append("rect").attr("class","nsplitter-rect-phantom").attr("width",this.options.width).attr("height",this.options.height).attr("visibility","hidden"),this._splitterSensitiveRectD3=t.append("rect").attr("class","nsplitter-sensitive-rect"),this._setSensitiveRectWidth(),!c.isIOS){this._pointerDownCount=0,this._splitterSensitiveRectD3.attr(u.POINTER_ENTER_ATTR_NAME,"1").attr(u.POINTER_LEAVE_ATTR_NAME,"1");let t=this._splitterSensitiveRectD3.node();o.on(t,"pointerenter"+p,(function(t){e._onPointerEnter(t,this)})).on(t,"pointerleave"+p,(function(t){e._onPointerLeave(t,this)})).on(t,"pointerdown"+p,(function(t){e._onPointerDown(t,this)})).on(t,"pointerup"+p,(function(t){e._onPointerUp(t,this)}))}},destroy:function(){(this.options.svgGroupElem?n.select(this.options.svgGroupElem):this._splitterD3).classed(l.PRESS_PAN_EVENT_CLASS_NAME,!1).classed(this.options.classes,!1).attr("transform",null).on(l.TARGET_EVENT_NAME,null),o.off(this._splitterSensitiveRectD3.node(),p),this._splitterRectPhantomD3.remove(),this._splitterSensitiveRectD3.remove(),this._eventDispatcher&&this._eventDispatcher.destroy(),delete this._eventDispatcher,this._splitterRectD3&&(this._splitterRectD3.remove(),delete this._splitterRectD3),delete this._splitterRectPhantomD3,delete this._splitterSensitiveRectD3,this._splitterD3&&(this._splitterD3.remove(),delete this._splitterD3),this._super()},_onPointerEnter:function(){this._pointerIsEntered=!0,this.options.min>=this.options.max||this.isCurrentlyDragged()||this._cursorIsSet||(s.setCursor(this.options.divElemForCursor||document.body,this._cursorValue),this._cursorIsSet=!0)},_onPointerLeave:function(){this._pointerIsEntered=!1,this.options.min>=this.options.max||!this.isCurrentlyDragged()&&this._cursorIsSet&&(s.setCursor(this.options.divElemForCursor||document.body,""),this._cursorIsSet=!1)},_onPointerDown:function(e){this._pointerDownCount++,this.options.min>=this.options.max||"mouse"===e.pointerType&&e.button||1!=this._pointerDownCount||this.isCurrentlyDragged()||this._showOrHidePhantom(!0)},_onPointerUp:function(e){this._pointerDownCount--,this.options.min>=this.options.max||"mouse"===e.pointerType&&e.button||this._pointerDownCount||this.isCurrentlyDragged()||this._showOrHidePhantom(!1)},manualStartDrag:function(){this._showOrHidePhantom(!0);var e=this.options.svgLineElem?n.select(this.options.svgLineElem):this._splitterRectD3;this.options.showDragStart||e.attr("visibility","hidden"),this._oldValue=this.options.orientation===m.Vertical?this.options.position.x:this.options.position.y,this._lastNewValue=this._oldValue,this._oldValueOffset=0,this._additionalDelta=0,this._cursorIsSet||(s.setCursor(this.options.divElemForCursor||document.body,this._cursorValue),this._cursorIsSet=!0),this._tempDragMinValue=Math.min(this.options.min,this._oldValue),this._tempDragMaxValue=Math.max(this.options.max,this._oldValue)},manualDrag:function(e,t){if(t&&(this._additionalDelta+=t,e+=t),"hidden"!==this._splitterRectPhantomD3.attr("visibility")){this._cursorIsSet||(s.setCursor(this.options.divElemForCursor||document.body,this._cursorValue),this._cursorIsSet=!0);var i=this._tempDragMaxValue;let t=this.options.orientation===m.Horizontal;if("svg"===this._element.tagName){let e=t?"height":"width";i=Math.min(i,parseFloat(window.getComputedStyle(this._element)[e])-this.options[e])}this._newValue=Math.max(Math.max(this._tempDragMinValue,Math.min(i,e)),0),this._splitterRectPhantomD3.attr("transform",`translate(${t?"0,":""}${Math.round(this._newValue-this._oldValue)})`)}},_showOrHidePhantom:function(e){e?this._splitterRectPhantomD3.attr("visibility",null).attr("transform",null):this._splitterRectPhantomD3.attr("visibility","hidden")},manualEndDrag:function(){this._doManualEndDrag()},_doManualEndDrag:function(e){!this._pointerIsEntered&&this._cursorIsSet&&(s.setCursor(this.options.divElemForCursor||document.body,""),this._cursorIsSet=!1);var t=this.options.svgLineElem?n.select(this.options.svgLineElem):this._splitterRectD3;e||t.attr("transform",this._splitterRectPhantomD3.attr("transform")),t.attr("visibility",null),this._showOrHidePhantom(!1),delete this._additionalDelta,delete this._oldValue,delete this._lastNewValue,delete this._tempDragMinValue,delete this._tempDragMaxValue},isCurrentlyDragged:function(){return"_additionalDelta"in this},_onInteraction:function(e){if(!(this.options.min>=this.options.max)){var t=e.detail.hammerEvent;switch(t.type){case l.PRESS_EVENT_NAME:if("touch"!==t.pointerType){this.isCurrentlyDragged()||(t[l.CANCEL_PROPERTY]=!0);break}case l.PAN_EVENT_NAME+"start":if(!this.isCurrentlyDragged()){this.manualStartDrag();var i={event:t.srcEvent,cancel:!1};this._trigger("startDrag",t.srcEvent,i),i.cancel&&(t[l.CANCEL_PROPERTY]=!0)}break;case l.PAN_EVENT_NAME+"move":if(this.options.orientation===m.Vertical?this.manualDrag(this._oldValue-this._oldValueOffset+t.deltaX/this.options.visualZoomFactor+this._additionalDelta):this.manualDrag(this._oldValue-this._oldValueOffset+t.deltaY/this.options.visualZoomFactor+this._additionalDelta),Math.round(this._newValue)!==Math.round(this._lastNewValue)){let e={newValue:Math.round(this._newValue),oldValue:Math.round(this._lastNewValue),cancel:!1};this._trigger("dragged",t.srcEvent,e),e.cancel?t[l.CANCEL_PROPERTY]=!0:this._lastNewValue=this._newValue}break;case l.PAN_EVENT_NAME+"end":if(void 0!==this._newValue){this._doManualEndDrag(!0),this.options.orientation===m.Vertical?this.options.position.x=Math.round(this._newValue):this.options.position.y=Math.round(this._newValue);var r=this.options.svgGroupElem?n.select(this.options.svgGroupElem):this._splitterD3;let e={oldValue:null!=this._oldValue?Math.round(this._oldValue):void 0,newValue:Math.round(this._newValue),cancel:!1};this._trigger("endDrag",t.srcEvent,e),e.cancel||(r.attr("transform","translate("+this.options.position.x+","+this.options.position.y+")"),this._trigger("changed",t.srcEvent,e)),this._onPointerUp(t.srcEvent);break}case l.PAN_EVENT_NAME+"cancel":this.option("position",{x:this.options.orientation===m.Vertical?this._oldValue:this.options.position.x,y:this.options.orientation===m.Horizontal?this._oldValue:this.options.position.y}),this._splitterRectPhantomD3.attr("transform",null);case l.PRESS_EVENT_NAME+"up":this.manualEndDrag(),this._trigger("endDrag",t.srcEvent,{canceled:!0})}}},_setSensitiveRectWidth:function(){this.options.sensitiveWidth>(this.options.orientation===m.Vertical?this.options.width:this.options.height)?this.options.orientation===m.Vertical?this._splitterSensitiveRectD3.attr("transform","translate("+(this.options.width-this.options.sensitiveWidth)/2+")").attr("width",this.options.sensitiveWidth).attr("height",this.options.height):this._splitterSensitiveRectD3.attr("transform","translate(0,"+(this.options.height-this.options.sensitiveWidth)/2+")").attr("width",this.options.width).attr("height",this.options.sensitiveWidth):this._splitterSensitiveRectD3.attr("transform","").attr("width",this.options.width).attr("height",this.options.height)}},g=a.extendClass("nSplitterWidget",h,f);g.Orientation=m,g.CLASS=_,g.NSPLITTER_RECT_CLASS=d,e.exports=g},4832:e=>{e.exports={notIsNullOrEmpty:function(e){return null!=e&&""!==e}}},7299:(e,t,i)=>{var n=i(9744),r=i(9416),a={handleParentItem:function(e,t,i){return this._functions.handleParentItemFunc?this._functions.handleParentItemFunc.call(this,e,t,i):e},childItemAttached:function(e,t){return this._functions.childItemAttachedFunc?this._functions.childItemAttachedFunc.call(this,e,t):void 0},childItemDetached:function(e,t){return this._functions.childItemDetachedFunc?this._functions.childItemDetachedFunc.call(this,e,t):void 0}};e.exports=n.extendClass("nStructuralDataDescriptor",r,a)},3923:(e,t,i)=>{var n=i(9744),r=i(5913),a=i(8239),s={construct:function(e,t,i,n,r,s,o,l,c){s&&(s.structureType,a.Parent);var u=o?o.slice():[];u.push(s.relationshipInfos);var h=Object.assign({},l||{});h._applyToRootEnabled=!0,this._super(e,t,i,n,r,s,u,h,c)}};e.exports=n.extendClass("nStructuralParentDataDescriptor",r,s)},5913:(e,t,i)=>{var n=i(9744),r=i(7299),a=i(5175),s=i(7947),o=i(8239),l=i(4199),c=l.WarningCode,u={construct:function(e,t,i,n,r,l,u,h,p){var _=this;this._wrapperClassConstructor=t,this._structureInfo=l||{},this._dependentObjectRelationshipInfos=void 0!==u?(this._dependentObjectRelationshipInfos||[]).concat(u):void 0;var d=Object.assign({},p||{});d.dataValidationFunc&&(d.originalDataValidationFunc=d.dataValidationFunc),d.dataValidationFunc=function(e,t,i){if(t&&t instanceof _._wrapperClassConstructor){var n;if(_._functions.originalDataValidationFunc&&(t=_._functions.originalDataValidationFunc.call(_,e,t,i)),t){delete t.__relatedObjects;var r=!1;if(_._structureInfo&&_._structureInfo.relationshipInfos&&(r=a.allEssentialPrimaryKeysAvailable(t,_._structureInfo.relationshipInfos))){var l=s.each(_._structureInfo.relationshipInfos,(function(n){var r=a.getPrimaryKeyByRelationshipInfo(t,n);if(null!=r){var s=_._functions.getChildWrapperByPrimaryKey(n.relatedTo,r);if(s===t&&(s=void 0),s){t.__relatedObjects||(t.__relatedObjects=[]);var l={wrapper:s,item:void 0};switch(t.__relatedObjects.push(l),_._structureInfo.structureType){case o.Parent:var u=_._functions.getItemByWrapper(t);if(u){if(!i)return!1;if("number"!=typeof i.maxIndex)return!1;if((Array.isArray(u)?u.length:1)>i.maxIndex)return!1}return!(!(h=_._functions.getItemByWrapper(s))&&!(h=e.addChild(n.relatedTo,s)))&&(l.item=h,!0);case o.Anchor:var h;if(h=_._functions.getItemByWrapper(s))return l.item=h,!0;break;default:return!0}}else{var p=t._getHandleWarningFunc();p&&p(c.RELATED_PRIMARY_KEY_NOT_EXISTING,{key:r})}}return!1}),!1);l&&(n=t)}if(!r&&_._booleans._applyToRootEnabled){var u=_._functions.getItemByWrapper(t);if(u){if(n=void 0,i)if("number"==typeof i.maxIndex)(Array.isArray(u)?u.length:1)<=i.maxIndex&&(n=t)}else n=t}}return n}},d.handleParentItemFunc||(d.handleParentItemFunc=_.defaultHandleParentItemFunc),d.handleRelationshipChangedFunc||(d.handleRelationshipChangedFunc=_.defaultHandleRelationshipChangedFunc),this._super(e,i,n,r,h,d)},defaultHandleRelationshipChangedFunc:function(e,t,i){return e.removeChild(t),e.addChild(this._propertyName,i)},defaultHandleParentItemFunc:function(e,t,i){var n;switch(t&&this._wrapperClassConstructor,this._structureInfo.structureType){case o.Parent:var r=t.__relatedObjects?t.__relatedObjects[0]:void 0;r&&r.item?(n=r.item,i&&Array.isArray(n)&&(i.maxIndex=n.length-1,n=l._innerObject(n,i.currentIndex))):this._booleans._applyToRootEnabled&&(n=e);break;case o.Anchor:break;default:n=e}return delete t.__relatedObjects,n},checkRelatedItemExistence:function(e){var t=this;if(e)if(delete e.__relatedObjects,a.allEssentialPrimaryKeysAvailable(e,t._structureInfo.relationshipInfos)){if(s.each(t._structureInfo.relationshipInfos,(function(i){var n=a.getPrimaryKeyByRelationshipInfo(e,i);if(null!=n){var r=t._functions.getChildWrapperByPrimaryKey(i.relatedTo,n);if(r===e&&(r=void 0),r){e.__relatedObjects||(e.__relatedObjects=[]);var s={wrapper:r,item:void 0};e.__relatedObjects.push(s);var o=t._functions.getItemByWrapper(r);if(o)return s.item=o,!0}else{var l=e._getHandleWarningFunc();l&&l(c.RELATED_PRIMARY_KEY_NOT_EXISTING,{key:n})}}return!1}),!1))return"ITEM"}else if(t._booleans._applyToRootEnabled)return"ROOT"}};e.exports=n.extendClass("nStructuralRelationshipDataDescriptor",r,u)},8239:e=>{e.exports={None:0,Parent:1,Anchor:2}},1194:e=>{e.exports={_nextID:0,generate:function(){return(this._nextID++).toString()}}},6966:(e,t,i)=>{var n=i(8680),r=i(9327).transform,a=i(9744),s=i(5244).eventListenerHelper,o=i(5408),l=i(8624),c=i(3225),u=i(1194),h=i(3353),p=c.Orientation,_="nsynch-rect",d="nsynch-button",m="_nsynchIndex",f="nsynch-minus",g=".nsynch",y="nsynch-pane",v="nsynch-plus",E="nsynch-splitter",T="nsynch-group",P="nsynch-placeholder",b="nsynch-title",S={optionDefaults:Object.assign({},h.prototype.optionDefaults,{splitterWidth:8,paneHeights:[],collapsible:!1,initiallyCollapsed:[],titles:[],collapseButtonLeftOffset:8,collapseButtonTopOffset:2,transitionDuration:500,autoExpandOnCollapsingLastPane:!1,paneHeightsChanged:void 0}),construct:function(){var e=this;e._super.apply(e,arguments),e._currentPaneHeights=[],e._currentPaneHeightsInPixels=[],e._expandedPaneHeightsInPixels=[],e._buttonEventDispatchers=[],e._panesCount=0,e._collapsedPanesCount=0,e._paneIndexToArrayIndexMap={},e._arrayIndexToPaneIndexMap={},this._uniqueID||(this._uniqueID=u.generate()),this._element.children.forEach((function(t,i){var a=n.select(t),s=window.getComputedStyle(t);if("none"!==s.display&&"hidden"!==s.visibility&&"collapse"!==s.visibility){e._paneIndexToArrayIndexMap[i]=e._panesCount,e._arrayIndexToPaneIndexMap[e._panesCount]=i,e._currentPaneHeights.push(null),e._currentPaneHeightsInPixels.push(0);var l=e._panesCount++;if(t[m]=i,a.classed([y],!0).classed([y+i],!0),l>0||e.options.collapsible){a.insert("div",(()=>t.children[0])).classed(P,!0).style("height",e.options.splitterWidth+"px");var u=n.select(e._element).preprend("svg").attr("class",`${E} ${E}${l}`).node();if(u[m]=l,u._splitterWidget=new c(u,{classes:T,showDragStart:!0,orientation:p.Horizontal,height:e.options.splitterWidth,movable:l>0,changed:function(t,i){e._onSplitterChanged(this[m],i.newValue)},divElemForCursor:t}),e.options.collapsible){var h=n.select(u),v=r(h.select("."+T).attr("transform")).translate[1],S=h.append("rect").attr("class",_+" "+o.QUICK_TAP_EVENT_CLASS_NAME).attr("y",v).attr("width",e.options.collapseButtonLeftOffset+22).attr("height",e.options.splitterWidth).on(o.TARGET_EVENT_NAME+g,(function(){e._expandOrCollapse(this,this.closest('[class~="'+E+'"]')[m])}));h.append("path").attr("class",d+" "+f).attr("d","M0,6 V-6 L6,0 L0,6").attr("transform","translate("+e.options.collapseButtonLeftOffset+","+(v+e.options.splitterWidth/2)+")  rotate(45)"),h.append("text").attr("class",b).attr("transform","translate("+(e.options.collapseButtonLeftOffset+12)+","+(v+e.options.splitterWidth/2)+") ").attr("dy",".3em").text(e.options.titles[i]),e._buttonEventDispatchers.push(new o(S.node(),[o.TAP_EVENT_NAME]))}}}})),Array.isArray(e.options.initiallyCollapsed)&&e.options.initiallyCollapsed.forEach((function(t,i){var n=e._arrayIndexToPaneIndexMap[i];(void 0!==n&&t&&e._collapsedPanesCount<e._panesCount||!e.options.autoExpandOnCollapsingLastPane)&&e._expandOrCollapse(document.querySelector(`.${E}${n} .${_}`),n)})),e.options.autoExpandOnCollapsingLastPane||e._currentPaneHeightsInPixels.push(0),this._recalculateHeights(),e._currentWidth=this._currentHeight=void 0,e._resizeSensor=new l(e._element,e._doResizeFunc.bind(e)),e._doResizeFunc()},destroy:function(){s.off(this._element,`${g}${this._uniqueID}`),this._buttonEventDispatchers.forEach((function(e){e.destroy()})),this._buttonEventDispatchers.length=0,this._element.querySelectorAll(`:scope > .${P}`).remove(),this._element.querySelectorAll(`:scope > .${y}`).forEach((function(e){var t=n.select(e),i=e[m];void 0!==i&&t.removeClass(y).removeClass(y+i)})),this._element.querySelectorAll(`:scope > .${E}`).forEach((e=>{e._splitterWidget.destroy(),e.remove()})),this._resizeSensor.detach(),delete this._resizeSensor,this._super()},_setOption:function(e,t){if(this._super(e,t),"paneHeights"===e){let e=this._element,t=this.options;this.destroy(),this.construct(e,t)}},_doResizeFunc:function(){var e=this;let t=window.getComputedStyle(e._element);var i=t.height,r=t.width;i===e._currentHeight&&r===e._currentWidth||(e._currentHeight=i,e._currentWidth=r,e._element.querySelectorAll("."+E).forEach((e=>{n.select(e).style("height",`${i}px`).style("width",`${r}px`)})),e._recalculateHeights())},getCurrentPaneHeight:function(e){var t=this._currentPaneHeights[e];return null===t&&Array.isArray(this.options.paneHeights)?(t=this.options.paneHeights[this._paneIndexToArrayIndexMap[e]])&&t.toString().indexOf("*")>=0&&(t=(parseFloat(t)||1)+"*"):t||(t="0"),t?t.toString():"1*"},_onSplitterChanged:function(e,t,i){var n=this,r=e-1,a=e;n.options.autoExpandOnCollapsingLastPane||i&&t>0&&0===this._currentPaneHeightsInPixels[r]&&this._currentPaneHeightsInPixels[n._panesCount]>0&&(t=this._currentPaneHeightsInPixels[n._panesCount],this._currentPaneHeights[n._panesCount]=this._currentPaneHeightsInPixels[n._panesCount]=0);var s=this.getCurrentPaneHeight(r),o=this.getCurrentPaneHeight(a),l=!i&&r>0?this._currentPaneHeightsInPixels.reduce((function(e,t,i){return i<r?e+t:e}))+this.options.splitterWidth*r:!i&&this.options.collapsible?this.options.splitterWidth:0;!i&&r>0&&this.options.collapsible&&(l+=this.options.splitterWidth);var c=Math.max(t-l,0),u=Math.max(this._currentPaneHeightsInPixels[r]+this._currentPaneHeightsInPixels[a]-c,0),h=s.toString().indexOf("*")>=0,p=a<this._panesCount&&o.toString().indexOf("*")>=0;if(h&&p){if(c+u&&!(parseFloat(s)+parseFloat(o))){var _=0,d=0;if(this._element.querySelectorAll(`:scope > .${y}`).forEach((function(e,t){t!=r&&t!=a&&(n.getCurrentPaneHeight(t).toString().indexOf("*")>=0?_+=n._currentPaneHeightsInPixels[t]:d+=n._currentPaneHeightsInPixels[t])})),!_){var m=(d-c-u)/d;this._element.querySelectorAll(`:scope > .${y}`).forEach((function(e,t){t!=r&&t!=a&&(n.getCurrentPaneHeight(t).toString().indexOf("*")<0&&(n._currentPaneHeights[t]=parseFloat(n._currentPaneHeights[t])*m))}))}}var f=(c+u)/(parseFloat(s)+parseFloat(o)||1);this._currentPaneHeights[r]=c/f+"*",this._currentPaneHeights[a]=u/f+"*"}else{var g=0;_=0;if(this._element.querySelectorAll(`:scope > .${y}`).forEach((function(e,t){if(t!=r&&t!=a){var i=n.getCurrentPaneHeight(t);i.toString().indexOf("*")>=0&&(g+=parseFloat(i),_+=n._currentPaneHeightsInPixels[t])}})),h){var v=(parseFloat(n.getCurrentPaneHeight(r))+g)/(n._currentPaneHeightsInPixels[r]+_)*(c+_)-g;(isNaN(v)||v===1/0)&&(v=1),this._currentPaneHeights[r]=Math.round(100*v)/100+"*"}else this._currentPaneHeights[r]=c;if(a<this._panesCount||!this.options.autoExpandOnCollapsingLastPane)if(p){v=(parseFloat(n.getCurrentPaneHeight(a))+g)/(n._currentPaneHeightsInPixels[a]+_)*(u+_)-g;this._currentPaneHeights[a]=Math.round(100*v)/100+"*"}else this._currentPaneHeights[a]=u}this._recalculateHeights(i),this._trigger("paneHeightsChanged",null,{paneHeightsInPixel:this._currentPaneHeightsInPixels})},_recalculateHeights:function(e){var t=window.getComputedStyle(this._element);if("none"!==t.display&&"hidden"!==t.visibility&&"collapse"!==t.visibility){var i,a=this;i=e&&a.options.transitionDuration?function(e){return e.interrupt().transition().duration(a.options.transitionDuration)}:function(e){return e.interrupt().transition(),e};var s=this._element.height();if(this._element.querySelectorAll(`:scope > .${P}`).forEach((function(e){s-=parseFloat(window.getComputedStyle(e).height)})),!(s<=0)){var o=Math.floor(s),l=a._currentPaneHeightsInPixels.slice(0),c=0,u=!1;this._element.querySelectorAll(`:scope > .${y}`).forEach((function(e,t){var i=a.getCurrentPaneHeight(t);i.toString().indexOf("*")>=0?(c+=parseFloat(i),u=!0):(i=parseFloat(i),a._currentPaneHeightsInPixels[t]=Math.min(i,s),s-=i)})),u&&this._element.querySelectorAll(`:scope > .${y}`).forEach((function(e,t){var i=a.getCurrentPaneHeight(t);i.toString().indexOf("*")>=0&&(a._currentPaneHeightsInPixels[t]=c?s*parseFloat(i)/c:0)})),a.options.autoExpandOnCollapsingLastPane||(a._currentPaneHeightsInPixels[a._panesCount]=a._currentPaneHeights[a._panesCount]||0);var h=0;a._currentPaneHeightsInPixels.forEach((function(e,t){var i=Math.round(e);h+=i,a._currentPaneHeightsInPixels[t]=i}));for(var p=-1;h!==o&&p!==h;)p=h,a._currentPaneHeightsInPixels.forEach((function(e,t){if(0!==e&&h!==o){var i=h>o?-1:1;a._currentPaneHeightsInPixels[t]+=i,h+=i}}));h!==o&&(a._currentPaneHeightsInPixels[a._currentPaneHeightsInPixels.length-2]=o);var g=!1;a._currentPaneHeightsInPixels.forEach((function(e,t){e!==l[t]&&(g=!0)})),g?(this._element.querySelectorAll(`:scope > .${y}`).forEach((function(e,t){i(n.select(e)).style("height",a._currentPaneHeightsInPixels[t]+"px")})),a._collapsedPanesCount=0,this._element.querySelectorAll(`:scope > .${E}`).forEach((function(t){var s,o,l,c=t._splitterWidget,u=t[m],h=n.select(t);if(a.options.collapsible&&(o=h.select("."+d),l=r(o.attr("transform")),(s=0===a._currentPaneHeightsInPixels[u])?a._collapsedPanesCount++:a._expandedPaneHeightsInPixels[u]=a._currentPaneHeightsInPixels[u]),!a.options.collapsible||u>0){var p=u-1,g=u,y=a._currentPaneHeightsInPixels.reduce((function(e,t,i){return i<=p?e+t:e}))+a.options.splitterWidth*p;a.options.collapsible&&(y+=a.options.splitterWidth);var E={x:0,y};if(e&&a.options.transitionDuration&&(E.transitionDuration=a.options.transitionDuration),c.option({position:E,min:y-a._currentPaneHeightsInPixels[p],max:y+a._currentPaneHeightsInPixels[g],width:parseFloat(window.getComputedStyle(a._element).width)}),a.options.collapsible){i(h.select("."+_)).attr("y",y),l.translate[1]=y+a.options.splitterWidth/2;var T=h.select("."+b),P=r(T.attr("transform"));P.translate[1]=y+a.options.splitterWidth/2,i(T).attr("transform",P.toString())}}else c.option({position:{x:0,y:0},width:parseFloat(window.getComputedStyle(a._element).width)});a.options.collapsible&&(l.rotate=s?0:45,i(o).attr("transform",l.toString()),o.classed(v,s,f,!s))}))):this._element.querySelectorAll(`:scope > .${E}`).forEach((function(e){e._splitterWidget.option("width",parseFloat(window.getComputedStyle(a._element).width))}))}}},_expandOrCollapse:function(e,t){var i=t+1;if(n.select(e.parentNode).select("."+v+", ."+f).classed(v))if(i===this._panesCount){for(var r=t,a=this._currentPaneHeightsInPixels[r-1];a<this._expandedPaneHeightsInPixels[t]&&r>1;)r--,a+=this._currentPaneHeightsInPixels[r-1];for(;r<t;)a>0&&this._onSplitterChanged(r,this._currentPaneHeightsInPixels[r-1]-this._currentPaneHeightsInPixels[r-1]/a*this._expandedPaneHeightsInPixels[t],!0),r++;this._onSplitterChanged(i,this._expandedPaneHeightsInPixels[t],!0)}else this._onSplitterChanged(i,this._expandedPaneHeightsInPixels[t],!0);else{if(this.options.autoExpandOnCollapsingLastPane&&this._collapsedPanesCount===this._panesCount-1){r=t===this._panesCount-1?t-1:t+1;this._expandOrCollapse(document.querySelector(`.${E}${r} .${_}`),r)}var s=this._expandedPaneHeightsInPixels[t]=this._currentPaneHeightsInPixels[t],o=i===this._panesCount;if(!o){for(r=i;r<this._panesCount&&0===this._currentPaneHeightsInPixels[r];)r++;o=r===this._panesCount}if(o&&(this.options.autoExpandOnCollapsingLastPane||this._collapsedPanesCount<this._panesCount-1))if(0===this._currentPaneHeightsInPixels[t-1]){for(this._onSplitterChanged(i,0,!0);0===this._currentPaneHeightsInPixels[t-1];)t--;this._onSplitterChanged(t,this._currentPaneHeightsInPixels[t-1]+s,!0)}else this._onSplitterChanged(i-1,this._currentPaneHeightsInPixels[t-1]+s,!0);else this._onSplitterChanged(i,0,!0)}}},w=a.extendClass("nSynchronizerWidget",h,S);w.PANE_CLASS=y,w.INDEX_DATA_PROPERTY=m,e.exports=w},8939:(e,t,i)=>{var n=i(7549);const r=function(e,t){if(null!=e){if("string"==typeof e||Array.isArray(e))return t.match(/^\d+$/)?e[+t]:void 0;if(e instanceof Map)return e.get(t);if(t in e&&(!(e instanceof n)||t.match(/^[A-Z]/)))return e[t];if(e instanceof n)return e.externalData()[t]}},a=function(e,t,i,n,a){var s=`\\.\\[${t?.replace(/\?/g,"\\?").replace(/\./g,"\\.")??""}`,o=new RegExp(`[${s}][^${s}]+`,"g"),l=e.replace(/&/g,"&;").replace(/{{{/g,"&{;");return(l=l.replace(/{{.*?}}/g,(function(e){var l=i,c=(e=e.replace(/&{;/g,"{{{").replace(/&;/g,"&")).substring(2,e.length-2).split(":");if(c.length){var u=c[0];s.indexOf(u[0])<0&&"\\"!==u[0]&&(u="."+u);for(var h=u.match(o),p=!0;(p||null!=l)&&h.length;){let e=typeof l,i="object"===e;if(!i&&"string"!==e){l=void 0;break}var _=h.shift();if(_.startsWith("[")){if(!_.endsWith("]")){l=void 0;break}{let e=_.substring(1,_.length-1);if(i){let t="'\"".indexOf(e[0]);t>=0&&e.endsWith("'\""[t])&&(e=e.substring(1,e.length-1))}l=e?r(l,e):void 0}}else{let e=!0;if(_.startsWith("."))if(i){let t=_.substring(1);l=null!=t?r(l,t):void 0,e=!1}else e=t?.includes(".");e&&(l=n(_,l,p))}p=!1}if(null!=l)return a&&(l=l instanceof Date||"date"===c[1]?a("date",new Date(l),c[2]):"number"==typeof l||"number"===c[1]?a("number",+l,c[2]):a("any",l?.toString()??"")),l?.toString()??""}return""}))).replace(/&{;/g,"{{").replace(/&;/g,"&")};var s={resolve:function(e,t,i,n,r){for(e=e.replace(/&/g,"&;");;){var s=e.replace(/\[[^[]+\]/g,(function(e){return(e=e.substring(1,e.length-1)).match(/{{(?!{)/)&&(e=e.replace(/&;/g,"&").replace(/&\(;/g,"[").replace(/&\);/g,"]"),e=a(e,t,i,n,r).replace(/&/g,"&;")),`&(;${e}&);`}));if(s===e)break;e=s}return e=e.replace(/&;/g,"&").replace(/&\(;/g,"[").replace(/&\);/g,"]"),a(e,t,i,n,r)}};e.exports=s},3464:(e,t,i)=>{var n=i(8680),r="ntexthelper-wrapping-line",a=function(e){var t=e.getBBox();return{width:t.width,height:t.height}},s={wrapSVGText:function(e){e.each((function(){var e,t,i,s,o=void 0,l=void 0,c=n.select(this),u=c.attr("data-maximum-height"),h=c.attr("data-wrap-mode"),p="true"===c.attr("data-show-ellipsis"),_=c.attr("data-text"),d=0,m=c.attr("y")||"0",f=c.attr("x")||"0",g=parseFloat(c.attr("dy")||"0");c.selectAll("tspan").remove();var y=[];y[d]=c.append("tspan").attr("class",r).attr("x",f).attr("y",m).attr("dy",g+"em");var v=void 0;isNaN(+u)||(v=+u);var E=1/0,T=h.indexOf("w")>=0;for(T&&(E=+c.attr("data-inline-width"),isNaN(E)&&(E=1/0),y[d].text(_.at(0)),null!=v&&(o=a(c.node()).height)),e=h.indexOf("n")>=0?c.attr("data-text").split("\n").reverse():[c.attr("data-text")];void 0!==(t=e.pop());)if(T){i=t.split(/\s+/).reverse();for(var P="",b=!1;void 0!==(s=i.pop());){var S=P;if(P+=P.length?" "+s:s,y[d].text(P),i.length&&S.length&&y[d].node().getComputedTextLength()>E&&(P=S,i.push(s),y[d].text(P),b=!0),v&&d&&(void 0===l&&(l=a(c.node()).height-o),o+d*l>v)){if(y[d].remove(),p){let e=y[d-1];var w=e.text(),C=w.length+1;do{do{C--}while(" "===w.at(C-1));e.text(w.substring(0,C)+"…")}while(w.length&&e.node().getComputedTextLength()>E)}break}(b||!i.length&&e.length)&&(y[++d]=c.append("tspan").attr("class",r).attr("x",f).attr("y",m).attr("dy",1.1*d+g+"em"),P="",b=!1)}}else y[d].text(t||" "),e.length&&(y[++d]=c.append("tspan").attr("class",r).attr("x",f).attr("y",m).attr("dy",1.1*d+g+"em"))}))},calculateSVGTextHeight:function(e){var t=0;if(e.size()){var i=e.selectAll("tspan");i.size()?i.each((function(){var e=n.select(this);e.datum(e.text()).text("Äg")})).call((function(){t=a(e.node()).height})).each((function(){var e=n.select(this);e.text(e.datum()).datum(null)})):e.datum(e.text()).text("Äg").call((function(){t=a(e.node()).height})).text(e.datum()).datum(null)}return t}};e.exports=s},9294:(e,t,i)=>{var n=i(8680),r=i(9744),a=i(5244).eventListenerHelper,s=i(1194),o=i(3353),l=".ntooltip",c={optionDefaults:Object.assign({},o.prototype.optionDefaults,{delay:500,tippyDelay:750,duration:400,closed:void 0,lastTapEvent:void 0,classNames:[]}),construct:function(){var e=this;e._super.apply(e,arguments),this._data=null,this._parentD3=void 0,this._containerD3=void 0,this._shouldFadeOut=!1,this._uniqueID=s.generate(),this._updatePromiseTimerID=void 0,this._updatePromise=void 0,this._lastPointerMoveEvent=void 0,this._pointerMoveActiveOnElem=void 0,e._isWithinDeferredUpdateCounter=0,e._elemsWithTippy=[],window.tippy,a.on(window,"pointermove",l+this._uniqueID,e._onPointerMove.bind(e))},destroy:function(){var e=this;a.off(window,"pointermove",l+this._uniqueID),this._doDisplay(null),this._nodeCreationObserver&&this._nodeCreationObserver.disconnect(),e._elemsWithTippy.forEach((function(e){e._tippy&&(e._tippy.destroy(),delete e._tippy)})),e._elemsWithTippy.length=0,e._super()},_onPointerMove:function(e){var t=this;if(!1!==t.options.lastTapEvent&&(t._lastPointerMoveEvent=e,t._pointerMoveActiveOnElem)){var i=t._pointerMoveActiveOnElem.getBoundingClientRect(),n=parseFloat(window.getComputedStyle(t._pointerMoveActiveOnElem)["stroke-width"])/2;i.left-n>e.pageX+.5||i.right+n<e.pageX-.5||i.top-n>e.pageY+.5||i.bottom+n<e.pageY-.5?(t._data&&t._data.refElem===t._pointerMoveActiveOnElem&&(t._shouldFadeOut=!0,window.setTimeout((function(){t._shouldFadeOut&&t._doDisplay(null)}),20)),t._pointerMoveActiveOnElem=void 0):t._data&&t._data.forceRefresh&&t._doDisplay(t._data)}t.options.lastTapEvent=void 0},display:function(e,t,i,n){return window.tippy,e&&(e={...e,positionType:t,referenceY:i,referenceX:n}),this._doDisplay(e)},_doDisplay:function(e,t){var i=this;if(!e&&void 0!==i._updatePromiseTimerID)return this;void 0!==i._updatePromiseTimerID&&(clearTimeout(i._updatePromiseTimerID),i._updatePromiseTimerID=void 0),i._shouldFadeOut&&i._data&&e&&i._data.refElem==e.refElem&&(i._pointerMoveActiveOnElem=i._data.refElem),i._shouldFadeOut=!1;var r=!0;if(e)if(i._data){if(i._data.type!==e.type||e.forceRefresh)r=!1;else for(let[t,n]of Object.entries(i._data))if(!e[t]||e[t]!=n){r=!1;break}}else r=!1;else i._data=null,i.options.lastTapEvent=void 0,i._parentD3&&(i._parentD3.interrupt().transition().duration(i.options.duration).style("opacity",0).remove(),i._parentD3=void 0,i._containerD3=void 0,i._visible=!1),this._trigger("closed");if(!r){delete e.forceRefresh;var a={x:0,y:0};switch(e.positionType){case h.Top:case h.TopX:a.y=e.referenceY.getBoundingClientRect().top;break;case h.Bottom:case h.BottomX:a.y=e.referenceY.getBoundingClientRect().bottom}switch(e.positionType){case h.Top:case h.Bottom:var s=(e.referenceX??e.referenceY).getBoundingClientRect();a.x=(s.left+s.right)/2;break;case h.TopX:case h.BottomX:a.x=+e.referenceX}i._data&&i._data.type!=e.type&&(i._parentD3.interrupt().transition().duration(i.options.duration).style("opacity",0).remove(),i._parentD3=void 0,i._containerD3=void 0),i._parentD3?i._parentD3.style("opacity",0):(i._parentD3=n.select("body").append("div").attr("class","ntooltip-parent").style("opacity",0),i._containerD3=i._parentD3.append("div").attr("class","ntooltip")),i._containerD3.classed("ntooltip-for-phantom",e.forPhantom);let r=i._containerD3.node();r.innerHTML=e.content;for(let e of Array.from(r.childNodes))if("SCRIPT"===e.tagName){let t=document.createElement("script");t.innerHTML=e.innerHTML,r.appendChild(t),r.removeChild(e)}var o=i._containerD3.node().offsetHeight,l=i._containerD3.node().offsetWidth;switch(a.x-=l/2,e.positionType){case h.Top:case h.TopX:a.y-=10+o;break;case h.Bottom:case h.BottomX:a.y+=10}for(var c=!1;!c;){var u=a.x,p={left:0,top:0,right:document.querySelector("html").clientWidth,bottom:document.querySelector("html").clientHeight};if(e.xLimitingParentElement){var _=e.xLimitingParentElement.getBoundingClientRect();p.left=_.left,p.right=_.right}if(e.yLimitingParentElement){_=e.yLimitingParentElement.getBoundingClientRect();p.top=_.top,p.bottom=_.bottom}switch(p.left+=5,p.right-=5,p.top+=5,p.bottom-=5,c=!0,e.positionType){case h.Top:case h.TopX:case h.Bottom:case h.BottomX:a.x<p.left&&(a.x=p.left),a.x+l>p.right&&(a.x=Math.max(p.left,p.right-l),a.x+l>p.right&&e.xLimitingParentElement&&(c=!1,a.x=u,delete e.xLimitingParentElement))}}switch(e.positionType){case h.Top:case h.TopX:if(a.y<p.top){if(void 0!==t&&t.positionType!==e.positionType)return e.positionType=t.positionType,i._doDisplay(e,t);if(void 0===t)return(t={}).positionType=e.positionType,e.positionType=e.positionType===h.Top?h.Bottom:h.BottomX,i._doDisplay(e,t);if(e.yLimitingParentElement)return e.positionType=e.positionType===h.Top?h.Bottom:h.BottomX,delete e.yLimitingParentElement,i._doDisplay(e,t);a.y=p.top,a.x="mouse"}break;case h.Bottom:case h.BottomX:if(a.y+o>p.bottom){if(void 0!==t&&t.positionType!==e.positionType)return e.positionType=t.positionType,i._doDisplay(e,t);if(void 0===t)return(t={}).positionType=e.positionType,e.positionType=e.positionType===h.Bottom?h.Top:h.TopX,i._doDisplay(e,t);if(e.yLimitingParentElement)return e.positionType=e.positionType===h.Bottom?h.Top:h.TopX,delete e.yLimitingParentElement,i._doDisplay(e,t);a.y=Math.max(0,p.bottom-o),e.positionType===h.Bottom&&(a.y=Math.min(a.y,e.referenceY.getBoundingClientRect().top)),a.x="mouse"}}i._parentD3.style("left","mouse"===a.x?0:a.x+"px").style("top",a.y+"px");var d=i._parentD3;if("mouse"===a.x){let t,n=e.useRefElemWidth;if(n){let i=("object"==typeof e.referenceX?e.referenceX:e.refElem).getBoundingClientRect();t=i.left-l,t<p.left?t=i.right+5:t-=5}if(!n){let e=i._lastPointerMoveEvent.clientX;t=e-p.left>p.right-e?e-l-10:e+10}i._parentD3.style("left",`${t}px`)}if(!i._visible||!i._data||e.type!==i._data.type||i._data.refElem&&e.refElem!==i._data.refElem){if(d===i._parentD3){let e=function(){d===i._parentD3&&(i._visible=!0,d.interrupt().transition().duration(i._isWithinDeferredUpdateCounter?0:i.options.duration).style("opacity",1))};i._isWithinDeferredUpdateCounter?e():window.setTimeout(e,Math.max(i.options.delay||0,0))}}else d.style("display","inline").style("opacity",1);switch(i._data=e,e.positionType){case h.Top:case h.TopX:case h.Bottom:case h.BottomX:i._pointerMoveActiveOnElem=i._data.refElem}}return this},initializeDeferredUpdate:function(){var e=this;if(!e._updatePromise&&e._data&&(e.options.lastTapEvent||e._lastPointerMoveEvent))return e._updatePromise=new Promise((t=>{window.setTimeout((function(){if(e._updatePromise=void 0,e.options.lastTapEvent){var i=e.options.lastTapEvent,n=document.elementFromPoint(i.center.x,i.center.y);n?t(n):t()}else{t();var r=document.querySelectorAll(":hover");if(r){e._data&&(e._data.forceRefresh=!0);var a=e._lastPointerMoveEvent;let t=r[r.length-1];if(a&&a.target!==t){let i={bubbles:a.bubbles,pointerType:a.pointerType,buttons:a.buttons,button:a.button,clientX:a.clientX,clientY:a.clientY,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey};e._isWithinDeferredUpdateCounter++,a.target&&document.contains(a.target)&&a.target.dispatchEvent(new PointerEvent("pointerleave",i)),t.dispatchEvent(new PointerEvent("pointerenter",i)),window.setTimeout((()=>{e._isWithinDeferredUpdateCounter--}),2*e.optionDefaults.delay)}}}}),200)})),e._updatePromise},currentData:function(){return this._visible?this._data:null}},u=r.extendClass("nTooltipWidget",o,c),h=u.PositionType={Top:2,Bottom:3,TopX:6,BottomX:7};e.exports=u},649:e=>{var t=function(){this._undoStack=[],this._redoStack=[]};Object.assign(t.prototype,{clear:function(){this._undoStack.length=0,this._redoStack.length=0},pushAction:function(e){this._undoStack.push(e),this._redoStack.length=0},undoAction:function(){var e=this._undoStack.pop();return this._redoStack.push(e),e},redoAction:function(){var e=this._redoStack.pop();return this._undoStack.push(e),e},isUndoPossible:function(){return this._undoStack.length>0},isRedoPossible:function(){return this._redoStack.length>0},getUndoStack:function(){return this._undoStack.slice()},getRedoStack:function(){return this._redoStack.slice()}}),e.exports=t},3353:(e,t,i)=>{var n=i(927),r=i(9744),a={optionDefaults:{},construct:function(e,t){this._element=e,this.options={...Object.getPrototypeOf(this)?.optionDefaults??{},...t??{}}},option:function(e,t){if(arguments.length>1)return null==t&&(t=this.__proto__.optionDefaults[e]),this._setOption(e,t),this;if("object"==typeof e){for(let[t,i]of Object.entries(e))null==i&&(i=this.__proto__.optionDefaults[t]),this._setOption(t,i);return this}return this.options[e]},_setOption:function(e,t){this.options[e]=t},_trigger:function(e,t,i){this._element&&("function"==typeof this.options[e]&&this.options[e].call(this._element,t,i),i&&(i.event=t),this._element?.dispatchEvent(new CustomEvent((this._nClassName+e).toLowerCase(),{detail:i})))},element:function(){return this._element},destroy:function(){delete this._element}};e.exports=r.extendClass("nWidget",n,a)},9570:(e,t,i)=>{var n=i(8680),r=i(6580),a=i(9744),s=i(5791),o=i(5244).eventListenerHelper,l=i(5408),c=i(8624),u=i(7973),h=i(3353),p="nwvcanvas-widget",_="nwvcanvas-cp",d="nwvcanvas-",m="nwvcanvas",f={Left:1,Right:2,Top:3,Bottom:4},g="1",y="2",v="3",E="4",T={optionDefaults:Object.assign({},h.prototype.optionDefaults,{position:f.Bottom,viewRectColor:"#7F0000",redrawFunc:null,onViewRectMovedFunc:null,scaleMaximum:.75}),construct:function(){var e=this;e._super.apply(e,arguments),n.select(this._element).attr("transform","scale()").classed([p],!0).classed([l.PRESS_PAN_EVENT_CLASS_NAME],!0).append("div").attr("tabindex",-1).classed(_,!0),o.on(e._element,"scroll",e._onScroll.bind(e)).on(e._element,"pointermove",e._onPointerMove.bind(e)),e._autoscrollWidgetInstance=new r(e._element,{distance:.1,initialDelay:0,hotMargin:20,callback:function(){e._pannedViewRect&&e._onMoveViewRect(e._lastHammerPanMoveEvent)}}),e._eventDispatcher=new l(e._element,[l.PRESS_PAN_EVENT_NAME],""),e._element[l.HANDLER_FUNCTION_PROPERTY]=function(t){try{switch(t.type){case l.PRESS_EVENT_NAME:case l.PAN_EVENT_NAME+"start":if("mouse"===t.pointerType||t.type===l.PRESS_EVENT_NAME){if(e._pannedViewRect=e._checkCursorPositionInViewRect(t.center),!e._pannedViewRect){t[l.CANCEL_PROPERTY]=!0;break}if(e._panStartPoint={x:t.center.x+e._scrollLeft,y:t.center.y+e._scrollTop},s.setCursor(e._element,"grabbing"),t.type===l.PRESS_EVENT_NAME)break;e._pannedViewRect&&e._autoscrollWidgetInstance.option({verticallyActive:!0,horizontallyActive:!0})}case l.PAN_EVENT_NAME+"move":e._lastHammerPanMoveEvent=t,e._onMoveViewRect(t);break;case l.PAN_EVENT_NAME+"end":delete e._lastHammerPanMoveEvent,e._onMoveViewRect(t,!0),e._autoscrollWidgetInstance.option({verticallyActive:!1,horizontallyActive:!1});break;case l.PAN_EVENT_NAME+"cancel":delete e._pannedViewRect,delete e._panStartPoint,e._onPointerMove(t.srcEvent)}}catch(e){throw new Error("onEventDispatch_worldView: "+e.message)}},e._scrollLeft=0,e._scrollTop=0,e._xScrollExtentFactor=1,e._yScrollExtentFactor=1,e.createCanvas(),e.createCanvas(),e.createCanvas(),e.createCanvas(),e._resizeSensor=new c(e._element,e._resize.bind(e)),window.setTimeout((()=>{e._element&&e._resize()}),1)},destroy:function(){n.select(this._element).classed(p,!1),this._autoscrollWidgetInstance.destroy(),delete this._autoscrollWidgetInstance,void 0!==this._scrollToViewRectsTimoutHandle&&window.clearTimeout(this._scrollToViewRectsTimoutHandle),this._resizeSensor.detach(),delete this._resizeSensor,this._super()},_nextCanvasIdentifier:1,_resize:function(){var e=this;e._currentWidth=e._element.offsetWidth,e._currentHeight=e._element.offsetHeight,e._element.querySelectorAll("."+m).forEach((t=>{n.select(t).attr("width",e._currentWidth+"px").attr("height",e._currentHeight+"px")})),e._calculateScale()},_onScroll:function(){var e=this,t=e._element.scrollLeft,i=e._element.scrollTop;e._element.querySelectorAll("."+m).forEach((e=>{n.select(e).style("left",`${t}px`).style("top",`${i}px`)})),e._scrollLeft=Math.min(Math.floor(t/e._xScrollExtentFactor),Math.max(0,Math.ceil(e._chartWidth*e._scale-e._chartWidthPx-e._currentWidth))),e._scrollTop=Math.min(Math.floor(i/e._yScrollExtentFactor),Math.max(0,Math.ceil(e._chartHeight*e._scale-e._chartHeightPx-e._currentHeight))),e._renderAll(),e._setMoveCursor()},_onPointerMove:function(e){this._lastPointerMovePoint={x:e.pageX,y:e.pageY},this._setMoveCursor()},_setMoveCursor:function(){var e=this;e._pannedViewRect||s.setCursor(e._element,e._checkCursorPositionInViewRect(e._lastPointerMovePoint)?"grab":null)},_checkCursorPositionInViewRect:function(e){var t=this;if(t._viewRects&&e){var i,n=t._element.getBoundingClientRect(),r={x:e.x-n.left,y:e.y-n.top};return t._viewRects.some((function(e){if(e.isMovable){var n={left:e.left+(e.scrollLeft||0),leftPx:e.leftPx,top:e.top+(e.scrollTop||0),topPx:e.topPx,width:e.width,widthPx:e.widthPx,height:e.height,heightPx:e.heightPx},a=t._transformRect(n);if(a.left<=r.x&&r.x<=a.left+a.width&&a.top<=r.y&&r.y<=a.top+a.height)return i=e,!0}})),i}},_onMoveViewRect:function(e,t){var i=this;if(i.options.onViewRectMovedFunc){var n=Math.max(i._scrollLeft,Math.min(i._currentWidth+i._scrollLeft-i._pannedViewRect.width*i._scale,(i._pannedViewRect.left+(i._pannedViewRect.scrollLeft||0))*i._scale+Math.floor(e.center.x+i._scrollLeft-i._panStartPoint.x))),r=Math.max(i._scrollTop,Math.min(i._currentHeight+i._scrollTop-i._pannedViewRect.height*i._scale,(i._pannedViewRect.top+(i._pannedViewRect.scrollTop||0))*i._scale+Math.floor(e.center.y+i._scrollTop-i._panStartPoint.y)));i.options.onViewRectMovedFunc.call(i,{viewRect:i._pannedViewRect,newLeftTop:{x:n/i._scale,y:r/i._scale}})}t&&(delete i._pannedViewRect,delete i._panStartPoint,s.setCursor(i._element,"grab"))},_renderAll:function(){var e=this,t={left:0,top:0,width:Math.max(e._chartWidth,e._currentWidth/e._scale),height:Math.max(e._chartHeight,e._currentHeight/e._scale)};e.clearRect(g,t),e.clearRect(y,t),e.clearRect(v,t),e.options.redrawFunc&&e.options.redrawFunc.call(e,{width:e._chartWidth,height:e._chartHeight}),e._renderViewRects()},_calculateScale:function(){var e=this,t=e._currentWidth-e._chartWidthPx,i=e._currentHeight-e._chartHeightPx,r=Math.min(e.options.scaleMaximum,t/e._chartWidth||0),a=Math.min(e.options.scaleMaximum,i/e._chartHeight||0);e._xScrollExtentFactor=1,e._yScrollExtentFactor=1,e._overflowType="";var s=0;if(r!=a)if(s=u.scrollBarWidth(),r<a){var o=e._viewRects?.reduce(((e,t)=>Math.max(e,t.shouldRemainVisible?t.width:0)),0);e._scale=Math.min(a,t/o||1/0),e._chartWidth*e._scale>t&&(e._scale=Math.min(e.options.scaleMaximum,(i-s)/e._chartHeight||0,t/o||1/0),e._chartWidth*e._scale>t&&(e._overflowType="x",e._xScrollExtentFactor=Math.min(1,1e5/(e._chartWidth*e._scale+e._chartWidthPx)),n.select(e._element).style("overflow-x","scroll").style("overflow-y","hidden")))}else{var l=e._viewRects?.reduce(((e,t)=>Math.max(e,t.shouldRemainVisible?t.height:0)),0);e._scale=Math.min(r,i/l||1/0),e._chartHeight*e._scale>i&&(e._scale=Math.min(e.options.scaleMaximum,(t-s)/e._chartWidth||0,i/l||1/0),e._chartHeight*e._scale>i&&(e._overflowType="y",e._yScrollExtentFactor=Math.min(1,1e5/(e._chartHeight*e._scale+e._chartHeightPx)),n.select(e._element).style("overflow-x","hidden").style("overflow-y","scroll")))}else e._scale=r,n.select(e._element).style("overflow-x","hidden").style("overflow-y","hidden");var c=e._xScrollExtentFactor<1?e._currentWidth:0,h=e._yScrollExtentFactor<1?e._currentHeight:0,p=e._element.querySelector("."+_);n.select(p).style("width",`${Math.ceil(e._xScrollExtentFactor*((e._chartWidth-c)*e._scale+e._chartWidthPx)+c)}px`).style("height",`${Math.ceil(e._yScrollExtentFactor*((e._chartHeight-h)*e._scale+e._chartHeightPx)+h)}px`),e._scrollToViewRects(),e._renderAll()},_scrollToViewRects:function(){var e=this;e._viewRects&&!e._autoscrollWidgetInstance.isActive()&&(void 0!==e._scrollToViewRectsTimoutHandle&&window.clearTimeout(e._scrollToViewRectsTimoutHandle),e._scrollToViewRectsTimoutHandle=window.setTimeout((function(){switch(delete e._scrollToViewRectsTimoutHandle,e._overflowType){case"x":e._viewRects.forEach((function(t){if(t.shouldRemainVisible)if((t.left+t.scrollLeft)*e._scale+(t.leftPx||0)<e._scrollLeft){var i=t.scrollLeft?t.left+t.scrollLeft:0,n=t.scrollLeft&&t.leftPx||0;e._element.scrollLeft=Math.floor(e._xScrollExtentFactor*(i*e._scale+n))}else(t.left+t.scrollLeft+t.width)*e._scale+(t.leftPx||0)>e._scrollLeft+e._currentWidth&&t.width*e._scale<=e._currentWidth-e._chartWidthPx&&(e._element.scrollLeft=Math.ceil(e._xScrollExtentFactor*((t.left+t.scrollLeft+t.width)*e._scale+(t.leftPx||0)-e._currentWidth)))}));break;case"y":e._viewRects.forEach((function(t){t.shouldRemainVisible&&((t.top+t.scrollTop)*e._scale+(t.topPx||0)<e._scrollTop?e._element.scrollTop=Math.floor(e._yScrollExtentFactor*((t.top+t.scrollTop)*e._scale+(t.topPx||0))):(t.top+t.scrollTop+t.height)*e._scale+(t.topPx||0)>e._scrollTop+e._currentHeight&&t.height*e._scale<=e._currentHeight-e._chartHeightPx&&(e._element.scrollTop=Math.ceil(e._yScrollExtentFactor*((t.top+t.scrollTop+t.height)*e._scale+(t.topPx||0)-e._currentHeight))))}))}}),50))},_getCanvasContext:function(e,t){var i=this._element.querySelector("."+d+e).getContext("2d");return t&&Object.keys(t).forEach((function(e){i[e]=t[e]})),i},_transform:function(e,t,i,n,r,a){return{x:Math.floor((e||0)*this._scale)+(i||0)+(n||0)-this._scrollLeft,y:Math.floor((t||0)*this._scale)+(r||0)+(a||0)-this._scrollTop}},_transformRect:function(e){var t=this._transform(e.left,e.top,e.leftPx,void 0,e.topPx,void 0),i=this._transform(e.left+e.width,e.top+e.height,e.leftPx,e.widthPx,e.topPx,e.heightPx);return{left:t.x,top:t.y,width:Math.max(1,i.x-t.x),height:Math.max(1,i.y-t.y)}},_definePath:function(e,t,i){var n,r,a,s,o=this,l=i.x,c=i.y,u=i.xPx,h=i.yPx,p=[],_=Number.MAX_VALUE,d=Number.MIN_VALUE,m=Number.MAX_VALUE,f=Number.MIN_VALUE;t.forEach((function(e){var t=o._transform(e.x+l,e.y+c,u,void 0,h,void 0);p.push(t),_>e.x&&(_=e.x,n=t.x),d<e.x&&(d=e.x,r=t.x),m>e.y&&(m=e.y,a=t.y),f<e.y&&(f=e.y,s=t.y)})),_<d&&n===r&&t.forEach((function(e,t){e.x===d&&p[t].x++})),m<f&&a===s&&t.forEach((function(e,t){e.y===m&&p[t].y--})),e.beginPath(),p.forEach((function(t,i){i?e.lineTo(t.x,t.y):e.moveTo(t.x,t.y)}))},_renderViewRects:function(){var e=this;e.clearRect(E,{left:e._scrollLeft/e._scale,top:e._scrollTop/e._scale,width:e._currentWidth/e._scale,height:e._currentHeight/e._scale}),e._viewRects&&e._viewRects.forEach((function(t){var i={left:t.left+t.scrollLeft,top:t.top+t.scrollTop,width:t.width,height:t.height,leftPx:t.leftPx,topPx:t.topPx,isVR:!0};e.drawRect(E,{lineWidth:1,strokeStyle:e.options.viewRectColor},i),e.fillRect(E,{globalAlpha:.2,fillStyle:e.options.viewRectColor},i),e._getCanvasContext(E,{globalAlpha:1})}))},updateChartSize:function(e){if(this._element){var t=this;t._chartWidth=e.width,t._chartHeight=e.height,t._chartWidthPx=e.widthPx||0,t._chartHeightPx=e.heightPx||0,t._calculateScale()}},updateViewRects:function(e){if(this._element){var t=e&&JSON.stringify(this._viewRect)!==JSON.stringify(e);this._viewRects=e,t&&this._scrollToViewRects(),this._renderViewRects()}},createCanvas:function(e){var t=(this._nextCanvasIdentifier++).toString(),i=n.select(this._element.querySelector("."+_));return i.insert("canvas",e?()=>i.node().childNodes[0]:void 0).attr("class",m+" "+d+t),t},drawLine:function(e,t,i){var n,r=this._transform(i.x0,i.y0,i.xPx,i.x0Px,i.yPx,i.y0Px),a=this._transform(i.x1,i.y1,i.xPx,i.x1Px,i.yPx,i.y1Px);t.lineDash&&(n=t.lineDash,delete(t=Object.assign({},t)).lineDash);var s=this._getCanvasContext(e,t);s.beginPath(),n&&s.setLineDash(n),s.moveTo((r.x||-.5)+.5,(r.y||-.5)+.5),s.lineTo(a.x+.5,a.y+.5),s.stroke(),n&&s.setLineDash([])},drawPath:function(e,t,i,n){if(Array.isArray(i)){var r=this._getCanvasContext(e,t);this._definePath(r,i,{x:n.x+.5,y:n.y+.5,xPx:n.xPx,yPx:n.yPx}),r.stroke()}},fillPath:function(e,t,i,n){if(Array.isArray(i)){var r=this._getCanvasContext(e,t);this._definePath(r,i,n),r.fill()}},clearRect:function(e,t){var i=this._getCanvasContext(e),n=this._transformRect(t);i.clearRect(n.left,n.top,n.width,n.height)},drawRect:function(e,t,i){var n=this._getCanvasContext(e,t),r=this._transformRect(i);n.strokeRect(r.left+.5,r.top+.5,r.width-1,r.height-1)},fillRect:function(e,t,i){var n=this._getCanvasContext(e,t),r=this._transformRect(i);n.fillRect(r.left,r.top,r.width,r.height)}},P=a.extendClass("nWorldViewCanvasWidget",h,T);P.Position=f,P.CanvasIdentifier={Content:"1",DateLines:"2",Selection:"3"},e.exports=P},7549:(e,t,i)=>{var n=i(9744),r=i(6714),a=i(7947),s=i(4832),o=i(5175),l=i(651),c={construct:function(e,t){this.initHierarchy(e,t)},externalData:function(){return this.data()},initHierarchy:function(e,t){var i=this;if(this._descriptor&&(this.dispose(),delete this._dbgIsDisposed),this.store(e),t){this._registerProperty("_descriptor",t);var n=t.getSubDescriptorsArray();n&&n.length>0&&(this._registerProperty("_childrenDepositories",{}),n.forEach((function(e){var t=e.getPropertyName();if(t){var n=e.getPrimaryKeyNames(),a=e.getPrimaryKeyMustBeUnique(),s=e.getPrimaryKeyManipulationFunc(),o=e.getSharedDepository();i._childrenDepositories[t]=new r(n,a,null,null,o,s,i._getHandleWarningFunc()),e.getEnableRelationshipCache()&&(i._childrenRelationshipCaches||i._registerProperty("_childrenRelationshipCaches",{}),i._childrenRelationshipCaches[t]=new Map)}})),n.forEach((function(t){var n=t.isActive();if(n&&-1!=n){var r=t.getPropertyName();if(r&&e&&t.getClassConstructor()){var a=e[r];t.isArrayProperty()&&!Array.isArray(a)&&(a=[]),a&&(Array.isArray(a)?a.forEach((function(e){i._addChildWithValidation(r,e,t)})):i._addChildWithValidation(r,a,t))}}}))),this._rememberRelationships(e)}},_getHandleWarningFunc:function(){},getRelationshipInfos:function(){if(this._descriptor)return this._descriptor.getRelationshipInfos()},getEnableInheritChangedRelationships:function(){if(this._descriptor)return this._descriptor.getEnableInheritChangedRelationships()},_rememberRelationships:function(e){if(e&&!0!==this.getEnableInheritChangedRelationships()){var t=this.getRelationshipInfos();if(null!=t&&!this._relationshipInfosWithPropertyValues){let e=this.structuredCloneArray(t);this._registerProperty("_relationshipInfosWithPropertyValues",e)}this._relationshipInfosWithPropertyValues&&this._relationshipInfosWithPropertyValues.forEach((function(t){a.each(t.primaryKeyInfos,(function(t){var i=t.primaryKeyName;if(s.notIsNullOrEmpty(i)){var n=e[i];void 0===n&&(i=t.compatiblePrimaryKeyName,s.notIsNullOrEmpty(i)&&(n=e[i])),null!=n&&Array.isArray(n)?t.oldValue=n.slice():t.oldValue=n}}))}))}},CRUDUpdate:function(e){var t=this;if(this._descriptor){this.store(e);var i=this._descriptor.getSubDescriptorsArray();i&&i.length>0&&i.forEach((function(i){if(i.isActive()){var n=i.getPropertyName();if(n){var r=t._childrenDepositories[n];if(r){var s=e[n];if(s){a.each(s,(function(e,a){var s=void 0,o=i.getPrimaryKey(e,a);null!=o?s=r.getObjectByPrimaryKey(o):r.getArray().some((function(t){if(e===t.data())return s=t,!0})),s?(s=t.updateChild(s,e)).keepAlive=!0:i.getClassConstructor()&&((s=t._addChildWithValidation(n,e,i)).keepAlive=!0)}));var o=[];r.getArray().forEach((function(e){!0===e.keepAlive?delete e.keepAlive:o.push(e)})),r.getPrimaryKeyMustBeUnique()&&!r.getPrimaryKeyNames()&&o.reverse(),o.forEach((function(e){t._removeChildAtLast(n,e,!0)}))}else r.removeAll()}}}})),this._rememberRelationships(e)}},_createChild:function(){},addChild:function(e,t){var i=void 0;if(this._descriptor&&e){var n=this._descriptor.getSubDescriptor(e);n&&n.isActive()&&n.getClassConstructor()&&(i=this._addChildWithValidation(e,t,n))}return i},updateChild:function(e,t){if(this._descriptor){var i=e.getPropertyName();if(i){var n=this._descriptor.getSubDescriptor(i);if(n&&n.isActive()){var r=e.anyRelationshipChanged(this,t);if(r){if(Array.isArray(r)){let i=!1;if(n.getEnableCycleDetection()&&(i=this.leadsToCycle(t,n,r)),i)return e;n.getEnableRelationshipCache()&&e.removeFromRelationshipCaches(r)}var a=e.handleRelationshipChanged(this,t,r);if(null!=a)return a}if(!e.isDisposed())return e.preUpdateSelf(),e.updateSelf(t),e.postUpdateSelf(),Array.isArray(r)&&n.getEnableRelationshipCache()&&e.addToRelationshipCaches(r),e}}}},detectChangedRelationships:function(e){var t=this;if(this._relationshipInfosWithPropertyValues){this._changedRelationshipInfosWithPropertyValues=void 0;var i=!1,n=function(e,n,r){t._changedRelationshipInfosWithPropertyValues||(t._changedRelationshipInfosWithPropertyValues=[]),n.newValue=r,i||(t._changedRelationshipInfosWithPropertyValues.push(t.structuredCloneSingle(e)),i=!0)};return this._relationshipInfosWithPropertyValues.forEach((function(t){i=!1,a.each(t.primaryKeyInfos,(function(i){var r=i.primaryKeyName;if(s.notIsNullOrEmpty(r)){var a=i.oldValue,o=e[r];void 0===o&&(r=i.compatiblePrimaryKeyName,s.notIsNullOrEmpty(r)&&(o=e[r]));var l=Array.isArray(a),c=Array.isArray(o);if(l||c)if(l&&c){if(o.length!=a.length)n(t,i,o);else for(var u=0;u<a.length;u++)if(o[u]!=a[u]){n(t,i,o);break}}else n(t,i,o);else o!=a&&n(t,i,o)}}))})),this._changedRelationshipInfosWithPropertyValues}if(!0===this.getEnableInheritChangedRelationships()&&e&&e.getInheritChangedRelationships&&"function"==typeof e.getInheritChangedRelationships)return e.getInheritChangedRelationships()},anyRelationshipChanged:function(e,t){return this._descriptor?this._descriptor.anyRelationshipChanged(e,this,t):this},getInheritChangedRelationships:function(){return this._changedRelationshipInfosWithPropertyValues},structuredCloneSingle:function(e){var t={comingFrom:e.comingFrom,relatedTo:e.relatedTo,isMultiRelationship:e.isMultiRelationship,primaryKeyInfos:[]};return e.primaryKeyInfos.forEach((function(e){t.primaryKeyInfos.push({primaryKeyName:e.primaryKeyName,compatiblePrimaryKeyName:e.compatiblePrimaryKeyName,oldValue:e.oldValue,newValue:e.newValue})})),t},structuredCloneArray:function(e){var t=this,i=[];return e.forEach((function(e){i.push(t.structuredCloneSingle(e))})),i},handleRelationshipChanged:function(e,t,i){return this._descriptor?this._descriptor.handleRelationshipChanged(e,this,t,i):this},removeChild:function(e,t){if(this._descriptor){var i=e.getPropertyName();if(i){var n=this._descriptor.getSubDescriptor(i);n&&n.isActive()&&this._removeChildAtLast(i,e,!0,t)}}},addOrRemoveChild:function(e,t,i){switch(e){case 1:return this.addChild(t,i);case 2:this.removeChild(i)}},_addChildWithValidation:function(e,t,i){var n=this;let r=function(t,i,r){if(t=n._rawDataValidationOK(t,i,r)){let l=!1;if(i.getEnableCycleDetection()&&(l=n.leadsToCycle(t,i)),!l){var a=n._createChild(t,i,r);if(a){var s=a.handleHierarchyParent(n);if(s){var o=s.getChildrenDepository(e);if(o){if(a.preAddToParent(s),o.add(a))return a.postAddToParent(),i.getEnableRelationshipCache()&&s.addChildToRelationshipCaches(a),a;a.dispose()}}}}}}(t,i);return r},_rawDataValidationOK:function(e,t,i){return t?t.dataValidation(this,e,i):e},_removeChildAtLast:function(e,t,i,n){var r=this._childrenDepositories[e];if(r){t.getEnableRelationshipCache()&&t.removeFromRelationshipCaches(),t.preRemoveFromParent(n);var a=r.remove(t,!1);if(a)return t.postRemoveFromParent(n),i&&t.dispose&&"function"==typeof t.dispose&&t.dispose(),a}},updateSelf:function(e){return this.CRUDUpdate(e)},_registerProperty:function(e,t,i){return this[e]||(this._propertyInfo=this._propertyInfo||{},this._propertyInfo[e]||(this._propertyInfo[e]=i||{extract:!0,deleteOnExtract:!0,dispose:!0,deleteOnDispose:!0}),this[e]=t),this[e]},getChildrenDepository:function(e){if(this._descriptor&&e&&this._childrenDepositories)return this._childrenDepositories[e]},getChildrenArray:function(e){var t=this.getChildrenDepository(e);if(t)return t.getArray()},getChildByPrimaryKey:function(e,t){if(null!=t){var i=this.getChildrenDepository(e);if(i)return i.getObjectByPrimaryKey(t)}},getChildByData:function(e,t){if(this._descriptor){var i=this._descriptor.getSubDescriptor(e);if(i){var n=this._getPrimaryKey(i,t);if(null!=n)return this.getChildByPrimaryKey(e,n)}}},getPrimaryKey:function(){return this.__cachedPrimaryKey||(this.__cachedPrimaryKey=this._getPrimaryKey(this._descriptor,this)),this.__cachedPrimaryKey},getPrimaryKeyNames:function(){return this._getPrimaryKeyNames(this._descriptor)},_getPrimaryKey:function(e,t){var i=this._getPrimaryKeyNames(e);if(i)return o.getPrimaryKeyByPrimaryKeyNames(t,i)},_getPrimaryKeyNames:function(e){if(e){var t=e.getPrimaryKeyNames();if(t)return t}},detectExtendedPrimaryKey:function(){return this.getPrimaryKey(this._descriptor,this)},dispose:function(e){var t=this;if(this._descriptor){var i=this._descriptor.getSubDescriptorsArray();i&&i.length>0&&i.slice().reverse().forEach((function(i){var n=i.getPropertyName();if(n&&t._childrenDepositories){var r=t._childrenDepositories[n];r&&r.dispose(e)}}))}if(!e&&this._propertyInfo){for(var n in this._propertyInfo){var r=this._propertyInfo[n];!0===r.dispose&&!0===r.deleteOnDispose&&delete t[n]}delete this._propertyInfo}this.update(void 0),this._dbgIsDisposed=!0},isDisposed:function(){return!!this._dbgIsDisposed},dump:function(e){var t=this,i="",n=0;for(n=0;n<e;n++)i+="   ";var r=i+this._nClassName+"; "+this.getPrimaryKey()+"\n";if(this._descriptor){var a=this._descriptor.getSubDescriptorsArray();a&&a.length>0&&a.forEach((function(i){var n=i.getPropertyName();if(n&&t._childrenDepositories){var a=t._childrenDepositories[n];a&&a.getArray().forEach((function(t){r+=t.dump(e+1)}))}}))}return r},check:function(e){var t=this;if(this._descriptor){var i=this._descriptor.getSubDescriptorsArray();i&&i.length>0&&i.forEach((function(i){var n=i.getPropertyName();if(n&&t._childrenDepositories){var r=t.getChildrenArray(n);r&&r.forEach((function(t){t.check(e)}))}}))}},getDescriptor:function(){return this._descriptor},getPropertyName:function(){var e=this._descriptor;if(e){var t=e.getPropertyName();if(t)return t}},getHierarchyParent:function(){return this._hierarchyParent},preAddToParent:function(e){var t;return this._descriptor&&(t=this._descriptor.handlePreAddToParent(this)),this._hierarchyParent=e,t},postAddToParent:function(){var e;return this._descriptor&&(e=this._descriptor.handlePostAddToParent(this)),e},preUpdateSelf:function(){},postUpdateSelf:function(){},preRemoveFromParent:function(e){var t;return this._descriptor&&(t=this._descriptor.handlePreRemoveFromParent(this,e)),t},postRemoveFromParent:function(e){var t;return delete this._hierarchyParent,this._descriptor&&(t=this._descriptor.handlePostRemoveFromParent(this,e)),t},handleHierarchyParent:function(e){if(this._descriptor)return this._descriptor.handleHierarchyParent(e,this)},getRelationshipInfoTo:function(e){if(this._descriptor)return this._descriptor.getRelationshipInfoTo(e)},getRelationshipPrimaryKeyTo:function(e,t){var i=this.getRelationshipInfoTo(e);if(i)return Array.isArray(i)&&(i=i[t??0]),o.getPrimaryKeyByRelationshipInfo(this,i)},isPseudo:function(){var e=this.data();return!!e&&(e.isPseudo&&"function"==typeof e.isPseudo?e.isPseudo():e.__PSEUDO)},addMultiplierPrimaryKey:function(e,t){if(null!=t){this.__MultiplierPrimaryKeys||(this.__MultiplierPrimaryKeys={});let i=this.__MultiplierPrimaryKeys[e];i||(i=this.__MultiplierPrimaryKeys[e]=new Set),i.add(t)}},removeMultiplierPrimaryKey:function(e,t){null!=t&&this.__MultiplierPrimaryKeys?.[e]?.delete(t)},getMultiplierPrimaryKeys:function(e){return this.__MultiplierPrimaryKeys?.[e]},getRelationshipCache:function(e){if(this._descriptor&&e&&this._childrenRelationshipCaches)return this._childrenRelationshipCaches[e]},__getOrCreateRelationshipCacheForWrapperAndRelationshipInfo:function(e,t,i,n){var r=this;let a=this.__getOrCreateRelationshipCacheRelatedTo(e,i,n);if(a){let e=o.getCombinedPrimaryKeyNamesByRelationshipInfo(i),s=this.__getOrCreateRelationshipCacheForPropertyID(a,e,n);if(s){let e=o.getPrimaryKeyByRelationshipInfo(t,i);if(e){if(Array.isArray(e)){let i;return e.forEach((function(e){let a=r.__getOrCreateRelationshipCacheForPrimaryKey(s,e,t.getPrimaryKeyNames(),n);a&&(i||(i=[]),i.push(a))})),i}{let i=this.__getOrCreateRelationshipCacheForPrimaryKey(s,e,t.getPrimaryKeyNames(),n);if(i)return i}}}}},__getOrCreateRelationshipCacheRelatedTo:function(e,t,i){let n=e.get(t.relatedTo);return i||n||(n=new Map,e.set(t.relatedTo,n)),n},__getOrCreateRelationshipCacheForPropertyID:function(e,t,i){let n=e.get(t);return i||n||(n=new Map,e.set(t,n)),n},__getOrCreateRelationshipCacheForPrimaryKey:function(e,t,i,n){let a=e.get(t);return n||a||(a=new r(i),e.set(t,a)),a},getRelatedObjects:function(e,t,i,n){let r;if(this.__relationshipCacheDisabled)return this.getChildrenArray(e);{let s=function(e,t){let i=e.get(t);if(i){let e=i.get(n);if(e&&!e.isEmpty()){let t=e.getArray();r||(r=[]),r=r.concat(t)}}},o=function(e,t){let n=e.get(t);if(n)if(i&&"*"!==i)s(n,i);else for(var r of n.keys())s(n,r)},l=function(e,i){let n=e[i];if(n)if(t&&"*"!==t)o(n,t);else for(var r of n.keys())o(n,r)};if(this._childrenRelationshipCaches)if(e&&"*"!==e)l(this._childrenRelationshipCaches,e);else for(var a of this._childrenRelationshipCaches.keys())l(this._childrenRelationshipCaches,a);return r}},forEachRelatedObject:function(e,t,i){var n=this;let r=n.getRelatedObjects(t,e.getPropertyName(),"*",e.getPrimaryKey());r&&r.slice().forEach((function(e){i.call(n,e)}))},removeRelationshipCaches:function(e,t,i,n){if(!this.__relationshipCacheDisabled){let a=function(e,t){e.delete(t)},s=function(e,t){let i=e.get(t);if(i){if(n&&"*"!==n)a(i,n);else for(var r of i.keys())a(i,r);e.delete(t)}},o=function(e,t){let n=e.get(t);if(n){if(i&&"*"!==i)s(n,i);else for(var r of n.keys())s(n,r);e.delete(t)}},l=function(e,i){let n=e.get(i);if(n){if(t&&"*"!==t)o(n,t);else for(var r of n.keys())o(n,r);e.delete(i)}};if(this._childrenRelationshipCaches)if(e&&"*"!==e)l(this._childrenRelationshipCaches,e);else for(var r of this._childrenRelationshipCaches.keys())l(this._childrenRelationshipCaches,r)}},getEnableRelationshipCache:function(){if(this._descriptor)return this._descriptor.getEnableRelationshipCache()},addToRelationshipCaches:function(e){let t=this.getHierarchyParent();t&&t.addChildToRelationshipCaches(this,e)},addChildToRelationshipCaches:function(e,t){var i=this;if(!this.__relationshipCacheDisabled){let n=e.getPropertyName(),r=this.getRelationshipCache(n);if(r&&(t=t||e.getRelationshipInfos()))return t.forEach((function(t){t.comingFrom===n&&i.__addRelatedObject(r,e,t)})),!0}return!1},__addRelatedObject:function(e,t,i){if(o.allEssentialPrimaryKeysAvailable(t,i)){var n=this.__getOrCreateRelationshipCacheForWrapperAndRelationshipInfo(e,t,i);n&&a.each(n,(function(e){e.add(t)}))}},removeFromRelationshipCaches:function(e){let t=this.getHierarchyParent();t&&t.removeChildFromRelationshipCaches(this,e)},removeChildFromRelationshipCaches:function(e,t){var i=this;if(!this.__relationshipCacheDisabled){let n=e.getPropertyName(),r=this.getRelationshipCache(n);if(r&&(t=t||e.getRelationshipInfos()))return t.forEach((function(t){t.comingFrom===n&&i.__removeRelatedObject(r,e,t)})),!0}return!1},__removeRelatedObject:function(e,t,i){var n=this;let r=this.__getOrCreateRelationshipCacheRelatedTo(e,i,!0);if(r){let l=o.getCombinedPrimaryKeyNamesByRelationshipInfo(i),c=this.__getOrCreateRelationshipCacheForPropertyID(r,l,!0);if(c){let u=o.getPrimaryKeyByRelationshipInfo(t,i);if(u){var s=t.getPrimaryKeyNames();a.each(u,(function(a){let o=n.__getOrCreateRelationshipCacheForPrimaryKey(c,a,s,!0);o&&(o.remove(t),o.isEmpty()&&(c.delete(a),c.size||(r.delete(l),r.size||e.delete(i.relatedTo))))}))}}}},getRelatedObjectsWithIndirection:function(e,t,i){var n=this,r=i.getPrimaryKey(),s=this.getRelatedObjects(e,t,"*",r);if(!s){var o=this.getRelatedObjects(t,t,"*",r);o&&a.each(o,(function(i){var r=n.getRelatedObjectsWithIndirection(e,t,i);r&&(s=s?[...new Set([...s,...r])]:r)}))}return s},leadsToCycle:function(e,t,i){var n=this;let r=t.getPropertyName(),s=t.getPrimaryKeyNames();return i=i||t.getRelationshipInfos(),a.each(i,(function(i){if(i.relatedTo===r){let r=n._leadsToCycle(e,s,i);return r&&n.handleCycleDetected(e,t,i),r}}),!0)},_leadsToCycle:function(e,t,i){if(t&&i){let n=o.getPrimaryKeyByPrimaryKeyNames(e,t),r=o.getPrimaryKeyByRelationshipInfo(e,i);for(;r;){if(r===n)return!0;let e=this.getChildByPrimaryKey(i.relatedTo,r);r=e?o.getPrimaryKeyByRelationshipInfo(e,i):void 0}}return!1},handleCycleDetected:function(e,t,i){t&&t.handleCycleDetected(e,i)}};e.exports=n.extendClass("nWrapperBase",l,c)},8138:(e,t,i)=>{i(3098),i(8680),i(2582),i(274);var n=i(4199);if(Object.keys(n).forEach((function(e){t[e]=n[e]})),t.nD3MigrationHelper=i(9327),t.nAutoscrollWidget=i(6580),t.nClass=i(927),t.nClassFactory=i(9744),t.nContextMenuHandler=i(7514),t.nConverter=i(747),t.nCoordinateLimiter=i(6660),t.nCursorHelper=i(5791),t.nDataDescriptor=i(9416),t.nDateHelper=i(994),t.nDebugHelper=i(6184),t.nDepository=i(6714),t.nDOMHelper=i(5244),t.nDroppableWidget=i(3093),t.nEventDispatcher=i(5408),t.nFileSaver={saveAs:i(7957)},t.nFunctionDispatcher=i(7947),t.nGetURLParameter=i(8461),t.nImageHelper=i(1518),t.nLayoutGrid=i(1617),t.nLayoutDirectedObject=i(7527),t.nLayoutObject=i(4456),t.nLayoutStack=i(1251),t.nLayoutStripe=i(4786),t.nLocale=i(46),t.nLocales=i(235),t.nOptionsCollector=i(2946),t.nOSDetector=i(3801),t.nOverlayArea=i(9948),t.nPopup=i(5225),t.nPrimaryKeyManager=i(5175),t.nPropertyComposer=i(9350),t.nRawDataHolder=i(651),t.nRectManager=i(1322),t.nResizeSensor=i(8624),t.nRibbonWidget=i(5732),t.nScrollBarWidthDetector=i(7973),t.nSortedDatesWithValuesList=i(6560),t.nSplitterWidget=i(3225),t.nStringHelper=i(4832),t.nStructuralDataDescriptor=i(7299),t.nStructuralParentDataDescriptor=i(3923),t.nStructuralRelationshipDataDescriptor=i(5913),t.nStructureType=i(8239),t.nSubsequentIDGenerator=i(1194),t.nSVGSymbolBox=i(9142),t.nSVGTextBox=i(7945),t.nSVGTransformableBox=i(4041),t.nSynchronizerWidget=i(6966),t.nTemplateResolver=i(8939),t.nTextHelper=i(3464),t.nTooltipWidget=i(9294),t.nUndoManager=i(649),t.nWidget=i(3353),t.nWorldViewCanvasWidget=i(9570),t.nWrapperBase=i(7549),self){var r=self.netronic=self.netronic||{};Object.keys(t).forEach((function(e){r[e]=t[e]})),self.Class=t.nClass}},7337:t=>{t.exports=e},3098:e=>{e.exports=t},8680:e=>{e.exports=i},2582:e=>{e.exports=n},274:e=>{e.exports=r}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={exports:{}};return a[e](i,i.exports,o),i.exports}return o.m=a,o(8138)})()));
/*! (c) Copyright 2013-2024 NETRONIC Software GmbH. All rights reserved. Version 9.0.1 */
"use strict";!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nwaf_apptools"),require("d3-format"),require("d3-selection"),require("d3-time-format"),require("d3-transition")):"function"==typeof define&&define.amd?define(["nwaf_apptools","d3-format","d3-selection","d3-time-format","d3-transition"],t):"object"==typeof exports?exports.nwaf_table=t(require("nwaf_apptools"),require("d3-format"),require("d3-selection"),require("d3-time-format"),require("d3-transition")):e.nwaf_table=t(e.nwaf_apptools,e.d3,e.d3,e.d3,e.d3)}(globalThis,((e,t,i,o,a)=>(()=>{var n={53:(e,t,i)=>{var o=i(680),a=i(571),n=a.nClassFactory,l=a.nCursorHelper,r=a.nDebugHelper,s=a.nDOMHelper.eventListenerHelper,d=a.nEventDispatcher,_=a.nLayoutGrid,c=a.nOSDetector,h=a.nResizeSensor,u=a.nScrollBarWidthDetector,p=a.nSubsequentIDGenerator,m=a.nWidget,f=a.nWorldViewCanvasWidget,w=f.Position,E=i(199).WarningCode,g=i(651),T=g._UpdateCause,R=g._RowItemVirtualizationStatus,C=g._VirtualizationUpdateCause,I=g.ASYNC_WAIT_PATTERN_EXTENT,D=g.LayoutRow,v=g.LayoutColumn,A=g.LayoutElements,y=g.TitleArea,b=[D.BodyAtTheTop,D.MainBody],S=g.COLLAPSED_SCALE,X={optionDefaults:Object.assign({},m.prototype.optionDefaults,{rowItemsRoot:null,defaultExternalType:null,autoDisposeOfUnusedItems:!1,virtualized:!0,realizedRowsCountMaximum:10,titleHeight:60,bottomTitleHeight:0,defaultRowMainHeight:42,defaultRowMainHeightsByExternalTypeMap:null,defaultMaximumRowHeight:null,defaultMaximumRowHeightsByExternalTypeMap:null,buttonLeftOffset:5,buttonExtent:18,transitionDuration:400,scrollOffsetsChangedFuncTimeDelay:500,detailingRowsVisible:!1,rowItemsSelectable:!1,rowSelectionWithFrames:!0,defaultRowInteractionsByExternalTypeMap:null,forcedRowInteractionsByExternalTypeMap:null,defaultRowItemSelectable:!0,defaultRowItemSelectableByExternalTypeMap:null,defaultRowItemCollapsible:!0,defaultRowItemCollapsibleByExternalTypeMap:null,defaultRowItemDetailingCollapsibleExternalTypeMap:null,rowHeightCalcFunc:null,enrichClassFunc:null,rowExpandOrCollapseFunc:null,rowExpandedOrCollapsedFunc:null,dragStartFunc:null,dragEndFunc:null,dragEnterFunc:null,draggedFunc:null,dragLeaveFunc:null,droppedFunc:null,onEventFunc:null,keyDownFunc:null,attachEventListenersFunc:null,detachEventListenersFunc:null,detachEventListenersExFunc:null,convertFunc:null,canSelectRowItemFunc:null,selectRowItemFunc:null,selectRowItemFuncCalledForDeselectionForced:!1,checkPossibleInteractionsFunc:null,verticalScrollOffsetChangedFunc:null,errorFunc:null,handleWarningFunc:null,measuredRenderingTimeFunc:null,closeContextMenuFunc:null,offsetCorrection:{x:0,y:0},keyboardEventsSourceElem:void 0,visualZoomFactor:1,rowOmissionSymbolsVisible:!1,preventDefaultOnContextMenuEvents:!0,rowMargin:0,topRowMargin:null,bottomRowMargin:null,editable:!0,updateSuspended:!1,topBodyViewAreaVisible:!1,commonBodyViewAreaVisible:!0,maximumTopBodyViewAreaHeightRatio:.5,unselectedItemsShownCovered:!1,isForExport:!1,isContextMenuActive:!1,itemHighlightFlashingEnabled:!0,worldViewVisible:!1,worldViewPosition:w.Bottom,worldViewExtent:150,worldViewSelectionColor:"#ffa000",watermarkURL:null,exportWatermarkURL:null,asynchronousRendering:!1}),construct:function(){var e=this;e._super.apply(e,arguments),this._dbgClippath=!0,this._uniqueID=p.generate();var t=this._initConstants(),i=this._calcElementExtent();this._mainWidth=this._elementWidth=i.elementWidth||0,this._mainHeight=this._elementHeight=i.elementHeight||0,this._currentScaledMainWidth=void 0,this._ITEM_VERSION_PROPERTY=t.ITEM_VERSION_PROPERTY_PREFIX+this._uniqueID+t.ITEM_VERSION_PROPERTY_SUFFIX,this._BINDING_ID_PROPERTY=t.BINDING_ID_PROPERTY_PREFIX+this._uniqueID+t.BINDING_ID_PROPERTY_SUFFIX,this._OBJECT_ID_PROPERTY=t.OBJECT_ID_PROPERTY_PREFIX+this._uniqueID+t.OBJECT_ID_PROPERTY_SUFFIX,this._EVENT_NAMESPACE=t.WIDGET_NAMESPACE+this._uniqueID,this._rowDataItemsMap=new Map,this._unusedRowDataItemsMap=new Map,this._nextDataItemID=1,this._pointerEvents=["pointerdown","pointermove","pointerup","pointerover","pointerout","pointerenter","pointerleave","click"].map((e=>`${e}${this._EVENT_NAMESPACE}`)).join(" "),this._createLayoutGrid(),this._currentBodyViewScrollTops=[],b.forEach((function(t){e._currentBodyViewScrollTops[t]=0})),this._horizontalBodyAreaSeparatorHeight=2,this._activeHorizontalBodyAreaIndex=1,this._widthClipPathRectD3s=[],this._layoutRows[D.TopTitle].extent(this.options.titleHeight),this._layoutRows[D.BottomTitle].extent(this.options.bottomTitleHeight),this._layoutRows[D.TopTitle].innerViewExtent(this.options.titleHeight),this._layoutRows[D.BottomTitle].innerViewExtent(this.options.bottomTitleHeight),this._layoutRows[D.TopTitle].outerViewExtent(this._layoutRows[D.TopTitle].innerViewExtent()+this._actualTitleAreaScrollBarWidth(y.top)),this._layoutRows[D.BottomTitle].outerViewExtent(this._layoutRows[D.BottomTitle].innerViewExtent()+this._actualTitleAreaScrollBarWidth(y.bottom)),this._ignoreNextScrollEvents(!1),this._touchScrollingEnabled=!0,this._selectedRowDataItemsMap=new Map,this._automaticExpansionDelay=500,this._autoscrollMargin=50,this._autoscrollInitialDelay=200,this._autoscrollDelay=100,this._autoscrollDistance=10,this._currentPanParams=void 0,this._automaticRowExpansionParams=void 0,this._autoscrollParams=void 0,this._isInDragOver=!1,this._temporaryMarkCounter=0,this._temporaryMarkVisible=void 0,this._temporaryMarkMinimumDate=void 0,this._realizedVisibleRowsSet=new Set,this._realizedInvisibleRowsSet=new Set,this._updateOfRowsNeeded=!1,this._cachedTransitionFuncs=[],this._clipPathReferenceCounts=[],this._currentlyVisibleRowDataItems=[],b.forEach((function(t){e._currentlyVisibleRowDataItems[t]=[]})),this._cachedRowItemAtTops=[],this._setOffsetCorrection(),o.select(this._element).classed(t.WIDGET_CLASS,!0).classed(t.WIDGET_CLASS+"-"+this._uniqueID,!0),this._elementD3=o.select(this._element),this.options.isForExport||s.on(this._element,"pointermove"+e._EVENT_NAMESPACE,(function(t){try{e._currentPointerCursorPosition={x:t.clientX,y:t.clientY},e._updateCursorHighlighters(t)}catch(t){e._handleException(t,"onPointerMove_element")}})).on(this._element,"pointerleave"+e._EVENT_NAMESPACE,(function(t){try{delete e._currentPointerCursorPosition,e._makeCursorHighlightersInvisible(t)}catch(t){e._handleException(t,"onPointerLeave_element")}}));let a=this.options.keyboardEventsSourceElem instanceof Element?this.options.keyboardEventsSourceElem:this._element;s.on(a,"keydown keyup",e._EVENT_NAMESPACE,(function(t){if(e._element)return e._handleKeyEvent(t)})),this._divScaleD3=this._elementD3.append("div").attr("tabindex",-1).attr("class",t.SCALED_DIV_CLASS),this._doScale(),this._showOrHideWorldView();this.options.isForExport?(this._svgOuterFrameD3=this._divScaleD3.append("svg").attr("class",t.SVG_OUTER_FRAME_CLASS),this._svgInnerFrameD3=this._svgOuterFrameD3.append("g").attr("class",t.SVG_INNER_FRAME_CLASS),this._svgRootD3=this._svgInnerFrameD3.append("g").attr("class",t.SVG_ROOT_CLASS)):(this._createAndPositionDivOverlays(),this._svgRootD3=this._divScaleD3.append("svg").attr("class",[t.SVG_ROOT_CLASS,d.POINTER_DOWN_EVENT_CLASS_NAME,d.TAP_EVENT_CLASS_NAME,d.PRESS_EVENT_CLASS_NAME,d.CONTEXTMENU_EVENT_CLASS_NAME,d.SWIPE_EVENT_CLASS_NAME].join(" ")),this._svgRootD3.style("transform","translate("+this._currentOffsetCorrection.x+"px,"+this._currentOffsetCorrection.y+"px)"),this._svgRootD3.node()[d.HANDLER_FUNCTION_PROPERTY+e._EVENT_NAMESPACE]=function(t){try{if(!e._isInsideFixedPrecedingImageListColumn(t))switch(t.type){case d.SWIPE_EVENT_NAME:e._touchScrollingEnabled?e._onSwipe(t,!!t[d.IS_FINAL_PROPERTY]):t[d.CANCEL_PROPERTY]=!0;break;case d.POINTER_DOWN_EVENT_NAME:e._isInDragOver||e._triggerEvent({sender:null,eventType:"tooltip",event:t.srcEvent,hammerEvent:t});break;case d.PRESS_EVENT_NAME+"up":e._triggerEvent({sender:null,eventType:"contextmenu",event:t.srcEvent,hammerEvent:t});break;case d.CONTEXTMENU_EVENT_NAME:i=t,e._triggerEvent({sender:null,eventType:"contextmenu",event:i}),e.options.preventDefaultOnContextMenuEvents&&(i.stopPropagation(),i.preventDefault());break;case d.TAP_EVENT_NAME:e._handleTapOnBackground(t),e._triggerEvent({sender:null,eventType:"tap",event:t.srcEvent,hammerEvent:t});break;default:e._onPanBackground(t)}}catch(t){e._handleException(t,"onEventDispatch_svgRoot")}var i}),this._createAndAppendSVGRootDefs(),this._titleVisible(y.top)&&(this._appendTitle(y.top),this._appendTitleSeparationLine(y.top)),this._appendBackground(),this._appendForeground(),this._titleVisible(y.bottom)&&(this._appendTitleSeparationLine(y.bottom),this._appendTitle(y.bottom)),this.options.isForExport||(this._appendIOSScrollBars(),s.on(this._element,"wheel"+e._EVENT_NAMESPACE,(function(t){e._onSVGRootWheel(t)})),s.on(window,"pointerdown",e._EVENT_NAMESPACE,(function(t){try{e._temporaryMarkVisible=void 0,e.options.closeContextMenuFunc?.apply(e,e._extendCallbackArgs({event:t})),e._ignoreNextScrollEvents(!1)}catch(t){e._handleException(t,"onPointerDown_window")}})).on(window,"pointerup"+e._EVENT_NAMESPACE,(function(){try{e._ignoreNextScrollEvents(!1)}catch(t){e._handleException(t,"onPointerUp_window")}})),this._eventDispatcher=new d(this._svgRootD3.node(),[d.TAP_EVENT_NAME,d.DOUBLE_TAP_EVENT_NAME,d.PRESS_EVENT_NAME,d.PAN_EVENT_NAME,d.SWIPE_EVENT_NAME,d.PINCH_EVENT_NAME,d.CONTEXTMENU_EVENT_NAME],e._EVENT_NAMESPACE),e._resizeSensor=new h(e._element,(function(){try{e.forceSizeChanged()}catch(t){e._handleException(t,"onResize")}})))},destroy:function(){try{var e=this.options.worldViewVisible;this.options.worldViewVisible=!1,this._showOrHideWorldView(),this.options.worldViewVisible=e,s.off(window,this._EVENT_NAMESPACE),this._resizeSensor&&(this._resizeSensor.detach(),delete this._resizeSensor),s.off(this._element,this._EVENT_NAMESPACE),this.options.keyboardEventsSourceElem instanceof Element&&s.off(this.options.keyboardEventsSourceElem,"keydown keyup",this._EVENT_NAMESPACE);var t=this._elementD3.selectAll("*").nodes();s.off(t,this._EVENT_NAMESPACE),t.forEach((e=>{e.remove()})),this._verticalScrollOffsetChangedTimerID&&window.clearTimeout(this._verticalScrollOffsetChangedTimerID),this._stopAutomaticRowExpansionTimer(),this._stopAutoscroll(),this._rowDataItemIDsToCreateOrRemoveMap?.clear(),this._super()}catch(e){this._handleException(e,"destroy")}},_calcElementExtent:function(){let e=window.getComputedStyle(this._element),t=this._element.style,i=e.width,o=e.height;return{elementWidth:Math.max(0,parseFloat(""!==i?i:t.width)),elementHeight:Math.max(0,parseFloat(""!==o?o:t.height))}},_setOption:function(t,i){try{var o=this,a=o.options[t];switch(t){case"rowItemsRoot":null!==a&&this.invalidateAllRows(!0),this._super(t,i),this._rowItemsRootChanged(),this._bodyChanged(T.RowItemsRootChanged);break;case"virtualized":a!==i&&(this._super(t,i),null!=this.options.rowItemsRoot&&(this._updateVirtualization(C.OptionChanged),this._executeCachedTransitionFunctions()));break;case"titleHeight":a!==(i=!isNaN(+i)&&i>=0?i:e.exports.prototype.optionDefaults[t])&&(this._layoutRows[D.TopTitle].extent(i),this._layoutRows[D.TopTitle].innerViewExtent(i),this._layoutRows[D.TopTitle].outerViewExtent(this._layoutRows[D.TopTitle].innerViewExtent()+this._actualTitleAreaScrollBarWidth(y.top)),this._super(t,i),(this._layoutRows[D.BodyAtTheTop].extent()||this._layoutRows[D.MainBody].extent())&&this._doResize(T.Other,null,!0),this._layoutGrid.update(),this.updateTableTitle());break;case"bottomTitleHeight":a!==(i=!isNaN(+i)&&i>=0?i:e.exports.prototype.optionDefaults[t])&&(this._layoutRows[D.BottomTitle].extent(i),this._layoutRows[D.BottomTitle].innerViewExtent(i),this._layoutRows[D.BottomTitle].outerViewExtent(this._layoutRows[D.BottomTitle].innerViewExtent()+this._actualTitleAreaScrollBarWidth(y.bottom)),this._super(t,i),(this._layoutRows[D.BodyAtTheTop].extent()||this._layoutRows[D.MainBody].extent())&&this._doResize(T.Other,null,!0),this._layoutGrid.update());break;case"visualZoomFactor":a!==(i=!isNaN(+i)&&i>0?i:e.exports.prototype.optionDefaults[t])&&(this._super(t,i),this._doScale(),this._doResize());break;case"rowItemsDraggable":a!==i&&(o._super(t,i),o._registerBackgroundPanningEvents());break;case"unselectedItemsShownCovered":if(a!==i){var n=o._updateSuspendedForSelectionChanges;delete o._updateSuspendedForSelectionChanges,o._super(t,i),null!=this.options.rowItemsRoot&&(o.invalidateAllRows(),o.update()),n&&(o._updateSuspendedForSelectionChanges=!0)}break;case"defaultExternalType":o._super(t,i),a!==i&&o.options.defaultRowMainHeightsByExternalTypeMap&&o._eventuallyInvalidateAllRowsWithUpdate();break;case"rowMargin":case"topRowMargin":case"bottomRowMargin":case"defaultMaximumRowHeight":case"defaultMaximumSubRowHeight":if(a==i)break;case"defaultRowMainHeightsByExternalTypeMap":o._super(t,i),o._eventuallyInvalidateAllRowsWithUpdate();break;case"rowItemsSelectable":a!==i&&(i||o.selectedRowItems([]),o._super(t,i));break;case"defaultRowItemSelectable":if(a===i)break;case"defaultRowItemSelectableByExternalTypeMap":o._super(t,i),o.selectedRowItems(o.selectedRowItems());break;case"detailingRowsVisible":case"defaultRowItemCollapsible":if(a===i)break;case"defaultRowItemCollapsibleByExternalTypeMap":case"defaultRowItemDetailingCollapsibleByExternalTypeMap":o._super(t,i),"detailingRowsVisible"===t?o.options.rowItemsRoot?.childRowItems?.forEach((function(e){o._doInvalidateRowWithCheck(e,{childRowsChangedFlag:!0},t)})):o.invalidateAllRows(),o.update();break;case"keyboardEventsSourceElem":if(a!==i&&(o._super(t,i),null==i||i instanceof Element)){let e=a instanceof Element?a:this._element;s.off(e,"keydown keyup",o._EVENT_NAMESPACE),e=i instanceof Element?i:this._element,s.on(e,"keydown keyup",o._EVENT_NAMESPACE,(function(e){if(o._element)return o._handleKeyEvent(e)}))}break;case"verticalScrollOffsetChangedFunc":a!==i&&(i||delete o._verticalScrollOffsetChangedTimerID,o._super(t,i));break;case"topBodyViewAreaVisible":case"commonBodyViewAreaVisible":a!==i&&(o._super(t,i),("commonBodyViewAreaVisible"!==t||a)&&(o._activeHorizontalBodyAreaIndex=o.options.commonBodyViewAreaVisible||!o.options.topBodyViewAreaVisible?1:0),null!=this.options.rowItemsRoot&&(o.options.updateSuspended?(i&&(this.invalidateAllRows(!1),this._bodyChanged(T.Other)),o._doResizeNeededWhileUpdateSuspended=!0):(o._doResize(T.Other,null,!0),o.options.worldViewVisible&&(o._createRows(o._currentlyVisibleRowDataItems?[...o._currentlyVisibleRowDataItems[0],...o._currentlyVisibleRowDataItems[1]]:[],void 0,T.WorldView),o._renderCompleteWorldView()))));break;case"maximumTopBodyViewAreaHeightRatio":a!==(i=Math.min(1,Math.max(-1,+i||0)))&&(o._super(t,i),null!=this.options.rowItemsRoot&&(o.options.updateSuspended?o._doResizeNeededWhileUpdateSuspended=!0:o._doResize(T.Other,null,!0)));break;case"updateSuspended":o._super(t,i),a!==i&&a&&(o._cachedTableDefinitionChangedArguments&&(o._tableDefinitionChanged.apply(o,o._cachedTableDefinitionChangedArguments),delete o._cachedTableDefinitionChangedArguments),o._cachedBodyChangedArguments&&(o._cachedBodyChangedArguments[2]=!0,o._bodyChanged.apply(o,o._cachedBodyChangedArguments),delete o._cachedBodyChangedArguments),o._doResizeNeededWhileUpdateSuspended&&(o._doResize(T.Other,null,!0),delete o._doResizeNeededWhileUpdateSuspended,o.options.worldViewVisible&&(o._createRows(o._currentlyVisibleRowDataItems?[...o._currentlyVisibleRowDataItems[0],...o._currentlyVisibleRowDataItems[1]]:[],void 0,T.WorldView),o._renderCompleteWorldView())));break;case"worldViewVisible":case"worldViewExtent":case"worldViewPosition":o._super(t,i),i!==a&&(o._showOrHideWorldView(),("worldViewVisible"===t||o.options.worldViewVisible)&&o._doResize());break;case"worldViewSelectionColor":o._super(t,i),o.options.worldViewVisible&&o._renderCompleteWorldView();break;default:o._super(t,i)}}catch(e){this._handleException(e,"option")}},_initConstants:function(){var e=this._getOrCreateNXXXXX({WIDGET_ABBREVIATION:"nbase",WIDGET_PREFIX:"nbase-",WIDGET_NAMESPACE:".nbase",WIDGET_NAME_IN_ERROR_MESSAGES:"nBaseWidget",WIDGET_PROPERTYNAME_IN_CALLBACKS:"baseWidget"});return e.BACKGROUND_BODY_CLASS=[],e.BACKGROUND_BODY_CLASS[D.BodyAtTheTop]=e.WIDGET_PREFIX+"top-background-body",e.BACKGROUND_BODY_CLASS[D.MainBody]=e.WIDGET_PREFIX+"background-body",e.BACKGROUND_BODY_PARENT_CLASS=[],e.BACKGROUND_BODY_PARENT_CLASS[D.BodyAtTheTop]=e.WIDGET_PREFIX+"top-background-body-parent",e.BACKGROUND_BODY_PARENT_CLASS[D.MainBody]=e.WIDGET_PREFIX+"background-body-parent",e.BACKGROUND_BODY_RECT_CLASS=[],e.BACKGROUND_BODY_RECT_CLASS[D.BodyAtTheTop]=e.WIDGET_PREFIX+"top-background-body-rect",e.BACKGROUND_BODY_RECT_CLASS[D.MainBody]=e.WIDGET_PREFIX+"background-body-rect",e.BACKGROUND_BODY_SCROLL_PARENT_CLASS=e.WIDGET_PREFIX+"background-body-scroll-parent",e.FOREGROUND_AREA_SEPARATOR_CLASS=e.WIDGET_PREFIX+"foreground-area-separator",e.FOREGROUND_BODY_CLASS=[],e.FOREGROUND_BODY_CLASS[D.BodyAtTheTop]=e.WIDGET_PREFIX+"top-foreground-body",e.FOREGROUND_BODY_CLASS[D.MainBody]=e.WIDGET_PREFIX+"foreground-body",e.FOREGROUND_BODY_PARENT_CLASS=[],e.FOREGROUND_BODY_PARENT_CLASS[D.BodyAtTheTop]=e.WIDGET_PREFIX+"top-foreground-body-parent",e.FOREGROUND_BODY_PARENT_CLASS[D.MainBody]=e.WIDGET_PREFIX+"foreground-body-parent",e.FOREGROUND_BODY_SCROLL_PARENT_CLASS=e.WIDGET_PREFIX+"foreground-body-scroll-parent",e.FRAME_AREA_DIV_BOTTOM_CLASS=e.WIDGET_PREFIX+"frame-area-div-bottom",e.FRAME_AREA_DIV_TOP_CLASS=e.WIDGET_PREFIX+"frame-area-div-top",e.FRAME_IMAGE_CLASS=e.WIDGET_PREFIX+"frame-image",e.FRAME_LINES_PARENT_CLASS=e.WIDGET_PREFIX+"frame-lines-parent",e.FRAME_TEXT_CLASS=e.WIDGET_PREFIX+"frame-text",e.GRAYING_PATTERN_CLASS=e.WIDGET_PREFIX+"graying-pattern",e.HORIZONTAL_DRAG_AREA_CLASS=e.WIDGET_PREFIX+"horizontal-drag-area",e.HORIZONTAL_DRAG_AREA_PARENT_CLASS=e.WIDGET_PREFIX+"horizontal-drag-area-parent",e.HORIZONTAL_DRAG_AREA_RECT_CLASS=e.WIDGET_PREFIX+"horizontal-drag-area-rect",e.IMAGE_LIST_IMAGE_GROUP_CLASS=e.WIDGET_PREFIX+"image-list-image-group",e.IMAGE_LIST_IMAGE_GROUP_RECT_CLASS=e.WIDGET_PREFIX+"image-list-image-group-rect",e.IMAGE_LIST_IMAGE_GROUP_SHADOW_RECT_CLASS=e.WIDGET_PREFIX+"image-list-image-group-shadow-rect",e.IOS_SCROLL_BAR_CLASS=e.WIDGET_PREFIX+"ios-scroll-bar",e.LAST_SEPARATION_LINE_CLASS=e.WIDGET_PREFIX+"last-separation-line",e.MINUS_CLASS=e.WIDGET_PREFIX+"minus",e.NODROP_CLASS=e.WIDGET_PREFIX+"nodrop",e.PHANTOM_ROW_CLASS=e.WIDGET_PREFIX+"phantom-row",e.PHANTOMS_BODY_CLASS=[],e.PHANTOMS_BODY_CLASS[D.BodyAtTheTop]=e.WIDGET_PREFIX+"top-phantoms-body",e.PHANTOMS_BODY_CLASS[D.MainBody]=e.WIDGET_PREFIX+"phantoms-body",e.PHANTOMS_BODY_PARENT_CLASS=[],e.PHANTOMS_BODY_PARENT_CLASS[D.BodyAtTheTop]=e.WIDGET_PREFIX+"top-phantoms-body-parent",e.PHANTOMS_BODY_PARENT_CLASS[D.MainBody]=e.WIDGET_PREFIX+"phantoms-body-parent",e.PHANTOMS_BODY_SCROLL_PARENT_CLASS=e.WIDGET_PREFIX+"phantoms-body-scroll-parent",e.PLUS_CLASS=e.WIDGET_PREFIX+"plus",e.PUBLIC_BACKGROUND_BODY_RECT_CLASS=e.WIDGET_PREFIX+"public-background-body-rect",e.ROW_BACKGROUND_RECT_CLASS=e.WIDGET_PREFIX+"row-background-rect",e.ROW_CLASS=e.WIDGET_PREFIX+"row",e.ROW_HEIGHT_PROP_CLASS=e.WIDGET_PREFIX+"row-height-dep",e.ROW_MAIN_HEIGHT_PROP_CLASS=e.WIDGET_PREFIX+"row-main-height-dep",e.ROW_MAIN_HEIGHT_SCALE_CLASS=e.WIDGET_PREFIX+"row-main-height-scale-dep",e.ROW_OMISSION_SYMBOL_CLASS=e.WIDGET_PREFIX+"row-omission-symbol",e.ROW_OMISSION_SYMBOL_BACKGROUND_LINE_CLASS=e.WIDGET_PREFIX+"row-omission-symbol-background-line",e.ROW_OMISSION_SYMBOL_FOREGROUND_LINE_CLASS=e.WIDGET_PREFIX+"row-omission-symbol-foreground-line",e.ROW_OMISSION_SYMBOL_MIDDLE_LINE_CLASS=e.WIDGET_PREFIX+"row-omission-symbol-middle-line",e.SCALED_DIV_CLASS=e.WIDGET_PREFIX+"scaled",e.SEPARATION_LINE_CLASS=e.WIDGET_PREFIX+"separation-line",e.SVG_OUTER_FRAME_CLASS=e.WIDGET_PREFIX+"svg-outer-frame",e.SVG_INNER_FRAME_CLASS=e.WIDGET_PREFIX+"svg-inner-frame",e.SVG_ROOT_CLASS=e.WIDGET_PREFIX+"svg-root",e.TEMP_MARKING_CLASS=e.WIDGET_PREFIX+"temp-marking",e.WORLD_VIEW_CLASS=e.WIDGET_PREFIX+"world-view",e.TITLE_CLASS=[e.WIDGET_PREFIX+"title",e.WIDGET_PREFIX+"bottom-title"],e.TITLE_SEPARATION_LINE_CLASS=[e.WIDGET_PREFIX+"title-separation-line",e.WIDGET_PREFIX+"bottom-title-separation-line"],e.UNSELECTED_ROW_COVER_CLASS=e.WIDGET_PREFIX+"unselected-row-cover",e.WIDGET_CLASS=e.WIDGET_PREFIX+"widget",e.BLUR_FILTER_ID=e.WIDGET_PREFIX+"blur-filter",e.ASYNC_WAIT_PATTERN_ID=e.WIDGET_PREFIX+"async-wait",e.BODY_CLIPPATH_ID=e.WIDGET_PREFIX+"body-clippath",e.BODY_PARENT_CLIPPATH_ID=[e.WIDGET_PREFIX+"top-body-parent-clippath",e.WIDGET_PREFIX+"body-parent-clippath"],e.INNER_FRAME_CLIPPATH_ID=e.WIDGET_PREFIX+"inner-frame-clippath",e.TEMP_BODY_CLIPPATH_ID=e.WIDGET_PREFIX+"temp-body-clippath",e.WIDTH_CLIPPATH_ID=[],e.BINDING_ID_PROPERTY_PREFIX="_"+e.WIDGET_ABBREVIATION+"B",e.BINDING_ID_PROPERTY_SUFFIX="_",e.ITEM_VERSION_PROPERTY_PREFIX="_"+e.WIDGET_ABBREVIATION+"V",e.ITEM_VERSION_PROPERTY_SUFFIX="_",e.DETAILING_ROW_CLASS=e.WIDGET_PREFIX+"drow",e.DETAILING_LEVEL_CLASS=e.WIDGET_PREFIX+"dlevel",e.DETAILING_PARENT_CLASS=e.WIDGET_PREFIX+"dpar",e.DETAILING_LEAF_CLASS=e.WIDGET_PREFIX+"dleaf",e.LEVEL_CLASS_PREFIX=e.WIDGET_PREFIX+"level",e.OBJECT_ID_PROPERTY_PREFIX="_"+e.WIDGET_ABBREVIATION,e.OBJECT_ID_PROPERTY_SUFFIX="_",e.TEXT_CLIPPATH_ID_PREFIX=e.WIDGET_PREFIX+"text-clippath",e},_getOrCreateNXXXXX:function(e){var t=this;return void 0===t.NXXXXX&&(t.NXXXXX=Object.assign({},e)),t.NXXXXX},_handleException:function(e,t){if(!this.options.errorFunc)throw e;var i=this._extendCallbackArgs({context:t,error:e,rethrow:!0});if(this.options.errorFunc.call(this,i),i.rethrow)throw e},_triggerEvent:function(e){if("tooltip"!==e.eventType||e.sender||this._lastTooltipEventFuncSenderNotNull)return"tooltip"===e.eventType&&(this._lastTooltipEventFuncSenderNotNull=!!e.sender),this.options.onEventFunc&&this.options.onEventFunc(this._extendCallbackArgs(e))},_doScale:function(){let e=100*(this.options.visualZoomFactor-1)/2+"%";this._divScaleD3.style("transform",`scale(${this.options.visualZoomFactor})`).style("left",e).style("top",e)},_doResize:function(){},_doResizeHeightWithOptionalAnimation:function(e){e(this._foregroundAreaSeparatorD3).attr("y",this._actualOuterBodyViewHeight(D.BodyAtTheTop)).attr("height",this._actualBodyAreaSeparatorHeight())},forceSizeChanged:function(){var e=this._calcElementExtent();return!(isNaN(e.elementWidth)||isNaN(e.elementHeight)||e.elementWidth===this._elementWidth&&e.elementHeight===this._elementHeight)&&(this._elementWidth=e.elementWidth,this._elementHeight=e.elementHeight,this._showOrHideWorldView(),this._doResize(),!0)},_handleKeyEvent:function(e){try{var t=this;if("keyup"===e.type)return;if(t._currentPointerCursorPosition){var i=t._element.getBoundingClientRect();if(t._currentPointerCursorPosition.y>=i.top&&t._currentPointerCursorPosition.y<i.bottom&&t._currentPointerCursorPosition.x>=i.left&&t._currentPointerCursorPosition.x<i.right){t.options.keyDownFunc&&t.options.keyDownFunc(t._extendCallbackArgs({event:e}));var o=e.key.replace("Arrow","");if("Left"===o||"Right"===o){var a=t._innerClientXToLayoutColumn(t._currentPointerCursorPosition.x);if(void 0!==a)return t._ignoreNextScrollEvents(!1,a),t._doRelativeScrollHor(a,"Left"===o?.1:-.1,!0),!1}else if("Up"===o||"Down"===o||"PageUp"===o||"PageDown"===o){var n="PageUp"===o||"PageDown"===o?9:1,l=t._innerClientYToBodyAreaIndex(t._currentPointerCursorPosition.y);if(void 0!==l)return e.preventDefault(),t._ignoreNextScrollEvents(!1),t._doRelativeScrollVer(l,"Up"===o||"PageUp"===o?.1*n:-.1*n,!0),!1}}}}catch(e){this._handleException(e,"_handleKeyEvent")}},_onSVGRootWheel:function(e){try{var t=this;if(e.altKey||e.ctrlKey||e.metaKey)return;e.preventDefault();var i=1,a=o.pointer(e,t._backgroundBodyScrollParentD3.node());t._layoutRows[D.BodyAtTheTop].innerViewExtent()>0&&a[1]<t._actualTitleHeight(y.top)+t._layoutRows[D.BodyAtTheTop].innerViewExtent()&&(i=0),(a=o.pointer(e,t._backgroundBodyD3s[i].node()))[1]-=t._layoutRows[i].scrollStart();var n=e.deltaX,l=e.deltaY;if(1===e.deltaMode){var r=u.scrollLineHeight();n*=r,l*=r}if(n&&l?4*Math.abs(l)<Math.abs(n)?l=0:4*Math.abs(n)<Math.abs(l)&&(n=0):e.shiftKey&&l&&(n=l,l=0),a[1]>=0&&a[1]<t._layoutRows[i].innerViewExtent()&&l)return t._doRelativeScroll("body"+i,-l),t._svgRootWheelVer(a,l);if(a[1]>=-t._actualTitleHeight(y.top)&&a[1]<t._layoutRows[i].innerViewExtent()&&n)return t._svgRootWheelHor(a,n)}catch(e){this._handleException(e,"onWheel")}},_svgRootWheelVer:function(){return!1},_svgRootWheelHor:function(){},_doRelativeScroll:function(e,t,i){switch(e){case"body0":this._doRelativeScrollVer(0,t,i);break;case"body1":this._doRelativeScrollVer(1,t,i)}},_onSwipe:function(){},_onPanBackground:function(e){var t=this;switch(e.type){case d.PAN_EVENT_NAME+"start":t._currentPanParams={},"mouse"!==e.pointerType&&(e[d.CANCEL_PROPERTY]=!0);break;case d.PAN_EVENT_NAME+"move":t._onSwipe(e);break;case d.PAN_EVENT_NAME+"end":t._currentPanParams=void 0,t._onSwipe(e,!0),l.setCursor(t._element,null)}},_scrollOffsetsChanged:function(e,t,i,o){var a=this;if(a._renewRemoveRealizedRowsTimer(),null!=e&&(null!=e[0]||null!=e[1])||null!=t&&(null!=t[D.BodyAtTheTop]||null!=t[D.MainBody])){var n={changedFlag:!1,verticalScrolledFlag:!1,viewChangedFlags:[!1,!1]};if(null!=t)for(var l=a._verSBLayoutColumn(),r=0;r<=1;r++)null!=t[r]&&(t[r]=Math.floor(t[r]),a._scrollTopsChanged(l,r,t,i,o,n));a._scrollLeftsChanged(e,t,i,o,n),n.verticalScrolledFlag&&(a._updateVirtualization(C.ScrolledVertically),a._executeCachedTransitionFunctions(),a._callVerticalScrollOffsetChangedFunc()),a._triggerChangedEventAfterScrollOffsetsChanged(n)}a._timeAfterLastScrolling=(new Date).getTime()},_callVerticalScrollOffsetChangedFunc:function(){var e=this;if(!e.options.isForExport&&e.options.verticalScrollOffsetChangedFunc){var t=function(){try{if(delete e._verticalScrollOffsetChangedTimerID,e._cachedRowItemAtTops[D.BodyAtTheTop]=e.visibleStartRowItem(D.BodyAtTheTop),e._cachedRowItemAtTops[D.MainBody]=e.visibleStartRowItem(D.MainBody),e.options.verticalScrollOffsetChangedFunc){var t=e._extendCallbackArgs({scrollOffset:e.verticalScrollOffset(),rowItemAtTop:e._cachedRowItemAtTops[D.MainBody],topViewScrollOffset:e.topVerticalScrollOffset(),topViewRowItemAtTop:e._cachedRowItemAtTops[D.BodyAtTheTop]});e.options.verticalScrollOffsetChangedFunc.call(e,t)}}catch(t){e._handleException(t,"_callVerticalScrollOffsetChangedFunc")}};void 0!==e._verticalScrollOffsetChangedTimerID&&window.clearTimeout(e._verticalScrollOffsetChangedTimerID),e.options.scrollOffsetsChangedFuncTimeDelay?e._verticalScrollOffsetChangedTimerID=window.setTimeout(t,e.options.scrollOffsetsChangedFuncTimeDelay):t()}},_scrollTo:function(e,t){var i=this;if(i._setLayoutColumnsScrollLefts(e),null!=t)for(var o=0;o<=1;o++)null!=t[o]&&(t[o]=Math.max(0,Math.min(t[o],i._layoutRows[o].extent()-i._layoutRows[o].innerViewExtent())));i._scrollOffsetsChanged(e,t,!1,!0)},_setLayoutColumnsScrollLefts:function(){},visibleStartRowItem:function(e){try{for(var t=null!=e?e:D.MainBody,i=this._determineRowDataItems(!0,void 0,void 0,t),o=0;o<i.length;o++){var a=i[o],n=a.newY??a.oldY;if(n<=this._layoutRows[t].scrollStart()&&n+a.totalHeight>this._layoutRows[t].scrollStart())return i[o].item}}catch(e){this._handleException(e,"visibleStartRowItem")}},verticalStartOfRowItem:function(e){try{var t=this._getDataItem(e,this._rowDataItemsMap);return t&&!t.isHidden?t.newY:void 0}catch(e){this._handleException(e,"verticalStartOfRowItem")}},heightOfRowItem:function(e){try{var t=this._getDataItem(e,this._rowDataItemsMap);return t&&!t.isHidden?t.totalHeight:void 0}catch(e){this._handleException(e,"heightOfRowItem")}},topVerticalScrollOffset:function(){return this._layoutRows[D.BodyAtTheTop].scrollStart()},verticalScrollOffset:function(){return this._layoutRows[D.MainBody].scrollStart()},_getHorViewScrollOffset:function(){},actualWidth:function(){return this._elementWidth/this.options.visualZoomFactor},_actualScaledMainWidth:function(){return this._mainWidth/this.options.visualZoomFactor},_actualScaledMainHeight:function(){return this._mainHeight/this.options.visualZoomFactor},totalWidth:function(){return this._layoutStacks[A.Columns].extent()},totalHeight:function(){var e=this._actualTitleHeight(y.top)+this._actualBodyAreaSeparatorHeight()+this._actualTitleHeight(y.bottom);return!this.options.commonBodyViewAreaVisible&&this.options.topBodyViewAreaVisible||(e+=this._layoutRows[D.MainBody].extent()),this.options.topBodyViewAreaVisible&&(e+=this._layoutRows[D.BodyAtTheTop].extent()),e},_determineRowActuallyCollapsible:function(e,t){return(t?e.item.detailingRowsCollapsible:e.item.collapsible)??this._getDefaultOptionValueWithExternalType(e,t?this.options.defaultRowItemDetailingCollapsibleByExternalTypeMap:this.options.defaultRowItemCollapsibleByExternalTypeMap,this.options.defaultRowItemCollapsible)},_checkForAutomaticRowExpansion:function(e,t,i,o,a){var n=this,l=n._findRowDataItemAtY(t);if(l&&null!=n._automaticRowExpansionParams&&l.id!==n._automaticRowExpansionParams.rowDataItem.id&&n._stopAutomaticRowExpansionTimer(),!l||l===i||l.level>=o)return;let r=!l.isCollapsed&&(a??!0),s=e=>e?.[r?"areLeavesCollapsed":"isCollapsed"]&&Array.isArray(e.item[r?"detailingRowItems":"childRowItems"])&&n._determineRowActuallyCollapsible(e,r);if(s(l)){if(null!=n._automaticRowExpansionParams&&n._automaticRowExpansionParams.rowDataItem===l&&(new Date).getTime()-n._automaticRowExpansionParams.time<500&&Math.abs(n._automaticRowExpansionParams.pageX-e)<10&&Math.abs(n._automaticRowExpansionParams.pageY-t)<10)return;n._stopAutomaticRowExpansionTimer(),n._automaticRowExpansionParams={rowDataItem:l,pageX:e,pageY:t,time:(new Date).getTime(),timerID:window.setTimeout((function(){try{n._element&&s(l)&&(n._expandOrCollapseRow(n._automaticRowExpansionParams.rowDataItem,!0,!1,r),n._stopAutomaticRowExpansionTimer())}catch(e){n._handleException(e,"_checkForAutomaticRowExpansion")}}),n._automaticExpansionDelay)}}else n._stopAutomaticRowExpansionTimer()},_stopAutomaticRowExpansionTimer:function(){var e=this;e._automaticRowExpansionParams&&(window.clearTimeout(e._automaticRowExpansionParams.timerID),e._automaticRowExpansionParams=void 0)},_checkForAutoscroll:function(e,t,i,o,a){var n=this,l=n._actualScrollBarWidth(),r=n._getBodyClientRect(),s=t<=r.top+n._layoutRows[D.BodyAtTheTop].innerViewExtent()?0:t<r.bottom?1:-1,d=e<=r.left+n._layoutColumns[v.Table].innerViewExtent()?0:e<r.right?1:-1,_={};s>=0&&d>=0&&(i&&(d?r.left+=n._layoutColumns[v.Table].innerViewExtent():r.right-=n._layoutColumns[n._verSBLayoutColumn()].innerViewExtent(),_.left=r.left<=e&&e<r.left+n._autoscrollMargin,_.right=r.right-n._autoscrollMargin<=e&&e<r.right+(d?l:0)),o&&(s?r.top+=n._layoutRows[D.BodyAtTheTop].innerViewExtent():r.bottom-=n._layoutRows[D.MainBody].innerViewExtent(),_.top=r.top<=t&&t<r.top+n._autoscrollMargin,_.bottom=r.bottom-n._autoscrollMargin<=t&&t<r.bottom+(s?l:0))),_.left||_.top||_.right||_.bottom?(n._autoscrollParams&&!n._autoscrollParams.isScrolling&&n._stopAutoscroll(),n._autoscrollParams||(n._autoscrollParams={isScrolling:!1,timerID:window.setTimeout((function(){try{n._element&&n._onAutoscrollTimer()}catch(e){n._handleException(e,"_checkForAutoscroll")}}),n._autoscrollInitialDelay)}),n._autoscrollParams.bodyAreaIndex=s,n._autoscrollParams.layoutColumn=d,n._autoscrollParams.inMargins=_,n._autoscrollParams.callbackFunc=a):n._stopAutoscroll()},_getBodyClientRect:function(e){try{var t,i,o,a=e??this._verSBLayoutColumn();i=v.Table<a?this._actualSplitterWidth?.()??0:0,o=this._actualBodyAreaSeparatorHeight();for(var n=v.Table;n<=a;n++)i+=this._layoutColumns[n].innerViewExtent();for(var l=0;l<=1;l++)o+=this._layoutRows[l].innerViewExtent();return i*=this.options.visualZoomFactor,o*=this.options.visualZoomFactor,{left:(t=this._overlayAreas[e??v.Table][D.BodyAtTheTop].getBoundingClientRect()).left,top:t.top,right:t.left+i,bottom:t.top+o,width:i,height:o}}catch(e){return this._handleException(e,"_getBodyClientRect"),{left:0,top:0,right:0,bottom:0,width:0,height:0}}},_onAutoscrollTimer:function(){var e=this;if(e._autoscrollParams){e._autoscrollParams.isScrolling=!0,e._autoscrollParams.timerID=window.setTimeout((function(){try{e._element&&e._onAutoscrollTimer()}catch(t){e._handleException(t,"_onAutoscrollTimer")}}),e._autoscrollDelay);var t,i,o=e._getScrollOffsets(e._autoscrollParams.layoutColumn,e._autoscrollParams.bodyAreaIndex);e._autoscrollParams.inMargins.left?t=o.horScrollOffset-e._autoscrollDistance:e._autoscrollParams.inMargins.right&&(t=o.horScrollOffset+e._autoscrollDistance),e._autoscrollParams.inMargins.top?i=o.verScrollOffset-e._autoscrollDistance:e._autoscrollParams.inMargins.bottom&&(i=o.verScrollOffset+e._autoscrollDistance);let l=e._layoutRows[e._autoscrollParams.bodyAreaIndex].scrollStart();var a=[];a[e._autoscrollParams.bodyAreaIndex]=i;let r=e._layoutColumns[e._autoscrollParams.layoutColumn].scrollStart();var n=[];n[e._autoscrollParams.layoutColumn]=t,e._scrollTo(n,a),!e._autoscrollParams.callbackFunc||e._layoutRows[e._autoscrollParams.bodyAreaIndex].scrollStart()===l&&e._layoutColumns[e._autoscrollParams.layoutColumn].scrollStart()===r||e._autoscrollParams.callbackFunc.call(e)}},_stopAutoscroll:function(){var e=this;e._autoscrollParams&&(window.clearTimeout(e._autoscrollParams.timerID),e._autoscrollParams=void 0)},_calculateVisibleVerticalBodyRangeForVirtualization:function(e){var t=this;if(!t.options.virtualized)return{top:0,bottom:t._layoutRows[e].extent()};var i="number"==typeof t._layoutRows[e].innerViewExtent()?t._layoutRows[e].innerViewExtent():Math.max(t._elementHeight-t._actualTitleHeight(y.top),0),o=t._layoutRows[e].extent(),a=Math.min(i,o)/2,n=t._layoutRows[e].scrollStart();return{top:Math.max(0,n-a),bottom:Math.min(n+i+a,o),exactTop:n,exactBottom:Math.min(n+i,o)}},_updateVirtualization:function(e,t){var i,o=this;let a=t&&o._determineBodyAreaIndex(t);for(var n=a??D.BodyAtTheTop;n<=(a??D.MainBody);n++){var l=e===C.OptionChanged;if(o.options.virtualized||l||!o._layoutRows[n].visibleRange().bottom){var r=o._calculateVisibleVerticalBodyRangeForVirtualization(n),s=!l&&o._layoutRows[n].virtualizedExtent()!==o._layoutRows[n].extent();if(o._layoutRows[n].virtualizedExtent(o._layoutRows[n].extent()),l||s||e===C.ViewResized||r.top<o._layoutRows[n].visibleRange().top||r.bottom>o._layoutRows[n].visibleRange().bottom){if(i=!0,o._layoutRows[n].visibleRange(r),o.options.virtualized){var d=new Set;if(e!==C.RowCollapsed&&e!==C.RowLeavesCollapsed)for(let e of o._realizedVisibleRowsSet)if(o._determineBodyAreaIndex(e)===n){var _=e.newY??e.oldY;(e&&_>r.bottom||_+e.totalHeight<r.top)&&(d.add(e),e.virtualizationStatus=R.Invisible)}if(!l)for(let e of o._realizedInvisibleRowsSet)if(o._determineBodyAreaIndex(e)===n){let t=e.newY??e.oldY;e&&t<=r.bottom&&t+e.totalHeight>=r.top&&(o._realizedVisibleRowsSet.add(e),o._realizedInvisibleRowsSet.delete(e),e.virtualizationStatus=R.Visible)}for(let e of d)o._realizedVisibleRowsSet.delete(e),l?o._removeRowByDataItem(e):o._realizedInvisibleRowsSet.add(e)}if(e!==C.RowExpanded&&e!==C.RowLeavesExpanded){let i=o._currentlyVisibleRowDataItems[n]?.length;if(i){let i,a;if(a=e===C.RowCollapsed||e===C.RowLeavesCollapsed?o._currentlyVisibleRowDataItems[n].indexOf(t)+1:o._findRowDataItemIndex(n,void 0,r.top),a>=0&&(i=o._currentlyVisibleRowDataItems[n].slice(a).filter((e=>o._isRowDataItemVirtualized(e))),i.length)){let e=o._createRows(i,void 0,T.Virtualization);e.length&&(e.forEach((t=>{o._realizedVisibleRowsSet.add(t),t.virtualizationStatus=R.Visible,e.push(t)})),o._createOrUpdateLastRowSeparationLine())}}}}}}i&&(e!==C.OptionChanged&&e!==C.ScrolledVertically&&e!==C.ViewResized||o._additionalVirtualizationUpdate(e),e===C.ViewResized&&o._worldViewDivElem&&o.options.worldViewVisible&&(o._createRows(o._currentlyVisibleRowDataItems?[...o._currentlyVisibleRowDataItems[0],...o._currentlyVisibleRowDataItems[1]]:[],void 0,T.WorldView),o._renderCompleteWorldView()),o.options.virtualized&&(e===C.ScrolledVertically||o.options.asynchronousRendering?o.options.asynchronousRendering&&o._rowDataItemIDsToCreateOrRemoveMap?.size||o._removeRealizedRowsIfTooMany(!0):o._renewRemoveRealizedRowsTimer(!0)))},_createOrRemoveRowPartsAsynchronously:function(e,t,i){var o=this;let a=()=>{let e={[D.BodyAtTheTop]:o.getVisibleVerticalRangeOfViewArea(!0),[D.MainBody]:o.getVisibleVerticalRangeOfViewArea(!1)},t=performance.now()+20,i=!1;for(let a=0;a<2;a++)for(let n of o._rowDataItemIDsToCreateOrRemoveMap.keys()){let l=o._rowDataItemIDsToCreateOrRemoveMap.get(n),r=e[l.h],s=l.v,d="r"===l.a,_=l.t<r.bottom&&l.b>r.top;if(a||!d&&_){if(d&&_)a&&o._rowDataItemIDsToCreateOrRemoveMap.delete(n);else{let e=l.f;if(Array.isArray(e)){let i=e.length-1;for(let o=0;o<=i;o++){if((0,e[o])(s),o!==i&&performance.now()>=t){a=2,l.f=e.slice(o+1);break}}a<2&&o._rowDataItemIDsToCreateOrRemoveMap.delete(n)}else e(s),o._rowDataItemIDsToCreateOrRemoveMap.delete(n)}i||d||(i=!0)}if(a<2&&performance.now()>=t&&(a=2),2===a)break}o._rowDataItemIDsToCreateOrRemoveMap.size?window.requestAnimationFrame(a):(o.options.virtualized&&i&&o._updateVirtualization(C.ScrolledVertically),o.options.measuredRenderingTimeFunc?.call(o,o._extendCallbackArgs({duration:(new Date).getTime()-o._cORRAi_lastActiveTimeLogged})))};o._rowDataItemIDsToCreateOrRemoveMap?.size||(o._rowDataItemIDsToCreateOrRemoveMap||(o._rowDataItemIDsToCreateOrRemoveMap=new Map),window.requestAnimationFrame((()=>{o._cORRAi_lastActiveTimeLogged=(new Date).getTime(),a()})));let n,l=o._determineBodyAreaIndex(t),r=t.id,s=t.newY??t.oldY,d=null!=t.newY?t.newY+t.totalHeight:t.oldY+t.oldTotalHeight,_=`${"b"===e?"B":"R"}${r}`;if("b"===e){if(n=o._rowDataItemIDsToCreateOrRemoveMap.get(_),n)return void n.f.push(i);n={h:l,t:s,b:d,a:e,v:t.version,f:[i]}}else n={h:l,t:s,b:d,a:e,v:t.version,f:i};o._rowDataItemIDsToCreateOrRemoveMap.delete(_),o._rowDataItemIDsToCreateOrRemoveMap.set(_,n),"r"===e&&o._rowDataItemIDsToCreateOrRemoveMap.delete(`B${r}`)},_createRowContent:function(){},_isRowDataItemVirtualized:function(e){return e.virtualizationStatus<=R.Precalculated},_additionalVirtualizationUpdate:function(){},_renewRemoveRealizedRowsTimer:function(e){var t=this;t.options.virtualized&&(e||void 0!==t._removeRealizedRowsTimerHandle)&&(void 0!==t._removeRealizedRowsTimerHandle&&window.clearTimeout(t._removeRealizedRowsTimerHandle),t._removeRealizedRowsTimerHandle=window.setTimeout((function(){try{t._element&&(t._removeRealizedRowsIfTooMany(),t._removeRealizedRowsTimerHandle=void 0)}catch(e){t._handleException(e,"_renewRemoveRealizedRowsTimer")}}),2e3))},_removeRealizedRowsIfTooMany:function(e){var t=this;if(t.options.virtualized){let i=t.options.asynchronousRendering,o=t._realizedInvisibleRowsSet.size;if(t.options.realizedRowsCountMaximum<o){let a=0,n=function(e){t._realizedInvisibleRowsSet.delete(e),t._removeRowByDataItem(e),e.virtualizationStatus=R.Precalculated};for(let l of t._realizedInvisibleRowsSet){if(i?t._createOrRemoveRowPartsAsynchronously("r",l,(function(e){l.version===e&&n(l)})):n(l),t.options.realizedRowsCountMaximum>=--o)break;if(!i&&!e&&++a>50){t._renewRemoveRealizedRowsTimer(!0);break}}}}else{for(let e of t._realizedInvisibleRowsSet)t._realizedVisibleRowsSet.add(e),e.virtualizationStatus=R.Visible;t._realizedInvisibleRowsSet.clear()}},_cacheTransitionFunction:function(e){this._cachedTransitionFuncs.push(e)},_executeCachedTransitionFunctions:function(){this._cachedTransitionFuncs.forEach((function(e){e.call(this)})),this._cachedTransitionFuncs.length=0},_pointToSVGRelative:function(e,t,i){var o,a=this;o=e===a._svgRootD3.node()?{x:0,y:0}:e.getBBox({stroke:!0});var n=e.getBoundingClientRect();return{x:(t-(n.left-a.options.offsetCorrection.x*a.options.visualZoomFactor)+o.x)/a.options.visualZoomFactor,y:(i-(n.top-a.options.offsetCorrection.y*a.options.visualZoomFactor)+o.y)/a.options.visualZoomFactor}},eventPointToBody:function(e){r.assertNotNull(e,"",0);var t=this,i=o.pointer(e,t._svgRootD3.node());return i[1]>=t._actualBodyViewTop(D.BodyAtTheTop)&&i[1]<t._actualInnerBodyViewBottom(D.MainBody)?{x:i[0]-t._actualLayoutColumnsOffsetHor(),y:i[1]-t._actualBodyViewsOffsetVer()}:null},_findRowDataItemAtY:function(e){var t=this,i=t._pointToSVGRelative(t._svgRootD3.node(),0,e);if(i.y>=t._actualTitleHeight(y.top)){var o=i.y<t._actualTitleHeight(y.top)+t._layoutRows[D.BodyAtTheTop].innerViewExtent()?0:1;if(t._currentlyVisibleRowDataItems[o]){var a=t._element.getBoundingClientRect(),n=t._actualTitleHeight(y.top);o&&(n+=t._layoutRows[D.BodyAtTheTop].innerViewExtent()+t._actualBodyAreaSeparatorHeight());var l=t._findRowDataItemIndex(o,void 0,(e-a.top)/t.options.visualZoomFactor-n+t._layoutRows[o].scrollStart());return l>=0?t._currentlyVisibleRowDataItems[o][l]:void 0}var r=t._foregroundBodyD3s[o].selectAll("."+t.NXXXXX.ROW_CLASS).filter((function(){var t=this.getBoundingClientRect();return t.top<=e&&t.bottom>e}));if(r.size())return r.node().data()}},_findRowDataItemIndex:function(e,t,i){if(!t){if(isNaN(+i))return-1;t=function(e,t){var i=e.newY??e.oldY;return e&&i<=t&&i+(e.totalHeight||1)>t?0:i<t?-1:1}}for(var o,a=0,n=this._currentlyVisibleRowDataItems[e].length-1;a<=n;){var l=(a+n)/2|0;o=this._currentlyVisibleRowDataItems[e][l];var r=t.call(this,o,i);if(!r)break;r<0?a=l+1:n=l-1}return a>n?-1:l},getVisibleVerticalRangeOfViewArea:function(e){return Object.assign({},this._layoutRows[e?0:1].visibleRange())},_showOrHideWorldView:function(){var e=this,t=0;e.options.worldViewVisible&&(t="number"==typeof e.options.worldViewExtent?Math.floor(e.options.worldViewExtent):150),null==e.options.worldViewPosition&&(e.options.worldViewPosition=w.Bottom),e._mainWidth=e._elementWidth,e._mainHeight=e._elementHeight,e.options.worldViewPosition===w.Top||e.options.worldViewPosition===w.Bottom?(e._mainHeight-=t,e._mainHeight<100&&(e._mainHeight=Math.min(100,e._elementHeight),t=e._elementHeight-e._mainHeight)):(e._mainWidth-=t,e._mainWidth<100&&(e._mainWidth=Math.min(100,e._elementWidth),t=e._elementWidth-e._mainWidth));let i=100*(e.options.visualZoomFactor-1)/2+"%";e._divScaleD3.style("left",e.options.worldViewPosition===w.Left?`calc(${i} + ${t}px)`:i).style("top",e.options.worldViewPosition===w.Top?`calc(${i} + ${t}px)`:i),t?(e._worldViewDivElem||(e._worldViewDivElem=o.select(e._element).append("div").attr("tabindex",-1).attr("class",e.NXXXXX.WORLD_VIEW_CLASS).node()),o.select(e._worldViewDivElem).style("left",`${e.options.worldViewPosition===w.Right?e._mainWidth:0}px`).style("top",`${e.options.worldViewPosition===w.Bottom?e._mainHeight:0}px`).style("width",`${e._elementWidth-e._mainWidth||e._elementWidth}px`).style("height",`${e._elementHeight-e._mainHeight||e._elementHeight}px`),e._worldViewDivElem._worldViewCanvasWidget||(e._worldViewDivElem._worldViewCanvasWidget=new f(e._worldViewDivElem,{position:e.options.worldViewPosition,redrawFunc:e._renderCompleteWorldView.bind(e),onViewRectMovedFunc:e._onViewRectMovedInWorldView.bind(e)})),e._provideChartSizeToWorldView(),e._createRows(e._currentlyVisibleRowDataItems?[...e._currentlyVisibleRowDataItems[0],...e._currentlyVisibleRowDataItems[1]]:[],void 0,T.WorldView)):e._worldViewDivElem&&(e._worldViewDivElem._worldViewCanvasWidget.destroy(),e._worldViewDivElem.remove(),delete e._worldViewDivElem)},_provideChartSizeToWorldView:function(){this._worldViewDivElem?._worldViewCanvasWidget.updateChartSize(this._getChartSizeForWorldView())},_provideViewRectsToWorldView:function(){this._worldViewDivElem?._worldViewCanvasWidget.updateViewRects(this._getViewRectsForWorldView())},_getChartSizeForWorldView:function(){},_getViewRectsForWorldView:function(){return[]},renderWorldView:function(){this._worldViewDivElem&&this._renderCompleteWorldView()},_renderCompleteWorldView:function(){},_onViewRectMovedInWorldView:function(){},isInInteraction:function(){try{return this._isInDragOver||this.options.isContextMenuActive}catch(e){return this._handleException(e,"isInInteraction"),!1}},cancelInteraction:function(e){try{this._cancelInteractionAtLast(e)}catch(e){this._handleException(e,"cancelInteraction")}},_cancelInteractionAtLast:function(){this._eventDispatcher.stop()},isRowCollapsed:function(e){try{r.assertNotNull(e,"",0);var t=this,i=t._getDataItem(e,t._rowDataItemsMap,t._unusedRowDataItemsMap);return i?i.isCollapsed:e.initiallyCollapsed}catch(e){this._handleException(e,"isRowCollapsed")}},areRowLeavesCollapsed:function(e){try{r.assertNotNull(e,"",0);var t=this,i=t._getDataItem(e,t._rowDataItemsMap,t._unusedRowDataItemsMap);return i?i.areLeavesCollapsed:e.leavesInitiallyCollapsed}catch(e){this._handleException(e,"areRowLeavesCollapsed")}},isRowHidden:function(e){try{r.assertNotNull(e,"",0);var t=this,i=t._getDataItem(e,t._rowDataItemsMap,t._unusedRowDataItemsMap);return i?i.isHidden:void 0}catch(e){this._handleException(e,"isRowHidden")}},isRowVirtualized:function(e){try{r.assertNotNull(e,"",0);var t=this,i=t._getDataItem(e,t._rowDataItemsMap,t._unusedRowDataItemsMap);return i?t._isRowDataItemVirtualized(i):void 0}catch(e){this._handleException(e,"isRowVirtualized")}},getLevelOfRowItem:function(e,t){try{r.assertNotNull(e,"",0);var i=this,o=i._getDataItem(e,i._rowDataItemsMap,i._unusedRowDataItemsMap);return o?t?o.detailingLevel:o.level:0}catch(e){return this._handleException(e,"getLevelOfRowItem"),0}},getParent:function(e){try{return r.assertNotNull(e,"",0),this._getParentAtLast(e)}catch(e){this._handleException(e,"getParent")}},_getParentAtLast:function(e){var t=this._getDataItem(e,this._rowDataItemsMap,this._unusedRowDataItemsMap);return t?.parentRowDataItem?.item},getRowItem:function(){},getVisibleParent:function(e,t){try{r.assertNotNull(e,"",0);var i=this,o=this._getVisibleParent(i._getDataItem(e,i._rowDataItemsMap,i._unusedRowDataItemsMap),t);return o?o.item:e}catch(e){this._handleException(e,"getVisibleParent")}},_getVisibleParent:function(e,t){if(e){if(!t)return e.visibleRowDataItem;var i=[];do{i.push(e),e=e.parentRowDataItem}while(e&&e.level>t);for(var o=i.length-1;o>=0&&!(e=i[o]).isCollapsed;o--);}return e},determineRowItems:function(e,t){try{var i=this,o=[];return(t||i.options.rowItemsRoot)&&(i._doDetermineRowDataItemsOrRowItemsRecursively(t||i.options.rowItemsRoot,o,e,!1,!0),o.splice(0,1)),o}catch(e){this._handleException(e,"determineRowItems")}},disposeUnusedItems:function(){this._unusedRowDataItemsMap.clear()},disposeUnusedItem:function(e){this._unusedRowDataItemsMap.delete(e.id)},getItemBoundingRect:function(e){try{r.assertNotNull(e,"",0);var t=this._getDataItem(e,this._rowDataItemsMap);if(t&&!t.isHidden)return{xOffset:0,yOffset:0,left:0,top:t.newY,bottom:t.newY+t.totalHeight,height:t.totalHeight}}catch(e){this._handleException(e,"getItemBoundingRect")}return null},saveCollapseStates:function(e,t,i,o){try{r.assertNotNull(e,"",0),r.assertFunction(t,"",1),r.assertFunctionOrNull(i,"",2);var a=this,n={},l=!0,s=function(e,r){if(r>=0){var d={[o?"L":"_areLeavesCollapsed"]:a.areRowLeavesCollapsed(e)};e.isDetailingRow||(d[o?"R":"_isCollapsed"]=a.isRowCollapsed(e)),i?.call(a,e,d);var _=t.call(a,e,d);void 0!==_&&(n[_]=d,l=!1)}Array.isArray(e.childRowItems)&&e.childRowItems.forEach((function(e){s(e,r+1)})),Array.isArray(e.detailingRowItems)&&e.detailingRowItems.forEach((function(e){s(e,r+1)}))};return e&&s(e,-1),l?null:n}catch(e){this._handleException(e,"saveCollapseStates")}},restoreCollapseStates:function(e,t,i,o,a){try{if(r.assertNotNull(t,"",1),r.assertFunction(i,"",2),r.assertFunctionOrNull(o,"",3),e){var n,l=this,s=e,d=function(e,t){if(t>=0){var a=i.call(l,e);if(void 0!==a){var r=s[a];if(void 0!==r){void 0===n&&(n=void 0!==(r.R??r.L)),o?.call(l,e,r);var _=n?r.R:r._isCollapsed;void 0!==_&&(e.initiallyCollapsed=_);var c=n?r.L:r._areLeavesCollapsed;void 0!==c&&(e.leavesInitiallyCollapsed=c);var h=l._getDataItem(e,l._rowDataItemsMap);h&&(void 0!==_&&!!h.isCollapsed!=!!_&&l._expandOrCollapseRow(h,!1,!0,!1),void 0!==c&&!!h.areLeavesCollapsed!=!!c&&l._expandOrCollapseRow(h,!1,!0,!0))}}}Array.isArray(e.childRowItems)&&e.childRowItems.forEach((function(e){d(e,t+1)})),Array.isArray(e.detailingRowItems)&&e.detailingRowItems.forEach((function(e){d(e,t+1)}))},_=l.options.updateSuspended;a||t!==l.options.rowItemsRoot||l._setOption("updateSuspended",!0),i&&e&&d(t,-1),a||(t===l.options.rowItemsRoot&&l._setOption("updateSuspended",_),window.setTimeout((()=>{l._element&&l._bodyChanged(T.Other)}),l.options.transitionDuration))}}catch(e){this._handleException(e,"restoreCollapseStates")}},collapseAllRowsAtLevel:function(e,t){try{this.collapseAllRowsAtLevelRange(e,e,t)}catch(e){this._handleException(e,"collapseAllRowsAtLevel")}},collapseAllRowsAtLevelRange:function(e,t,i,o,a){try{this._expandOrCollapseAllRowsAtLevelRange(!1,e,t,i,o,a)}catch(e){this._handleException(e,"collapseAllRowsAtLevelRange")}},expandAllRowsAtLevel:function(e,t){try{this.expandAllRowsAtLevelRange(e,e,t)}catch(e){this._handleException(e,"expandAllRowsAtLevel")}},expandAllRowsAtLevelRange:function(e,t,i,o,a){try{this._expandOrCollapseAllRowsAtLevelRange(!0,e,t,i,o,a)}catch(e){this._handleException(e,"expandAllRowsAtLevelRange")}},_expandOrCollapseAllRowsAtLevelRange:function(e,t,i,o,a,n){r.assertNumber(t,"",0),r.assertNumber(i,"",1);var l=this;if(t>i){var s=t;t=i,i=s}l.determineRowItems(!1,o).forEach((function(o){var n=l._getDataItem(o,l._rowDataItemsMap,l._unusedRowDataItemsMap);!n||!a&&n.isDetailingRow||e===(a?n.areLeavesCollapsed:n.isCollapsed)&&n.level>=t&&n.level<=i&&l._expandOrCollapseRow(n,!1,!0,a)})),n||l.update()},invalidateRowHeight:function(e){try{r.assertNotNull(e,"",0);var t=this._getDataItem(e,this._rowDataItemsMap,this._unusedRowDataItemsMap);t&&(e!==this.options.rowItemsRoot&&(this._unusedRowDataItemsMap.delete(t.id),this._rowDataItemsMap.set(t.id,t)),delete t.totalHeight)}catch(e){this._handleException(e,"invalidateRowHeight")}},_eventuallyInvalidateAllRowsWithUpdate:function(){var e=this;null!=e.options.rowItemsRoot&&(e.invalidateAllRows(!1,!0),e._actualBodyAreaSeparatorHeight()&&(e.options.updateSuspended?e._doResizeNeededWhileUpdateSuspended=!0:e._doResize(T.Other,null,!0)),e.update())},_doInvalidateRowWithCheck:function(e,t){try{r.assertNotNull(e,"",0);var i=this._getDataItem(e,this._rowDataItemsMap,this._unusedRowDataItemsMap);i&&(e!==this.options.rowItemsRoot&&(this._unusedRowDataItemsMap.delete(i.id),this._rowDataItemsMap.set(i.id,i)),this._doInvalidateRow(i,t))}catch(e){this._handleException(e,"invalidateRow")}},_doInvalidateRow:function(e,t){var i=this,o=new Set,a=function(e,t,i){["detailingRowDataItems","childRowDataItems"].forEach((function(n,l){if(!t.isDetailingRow||!l){let l=t[n];l&&(l?.forEach((function(e){i?(o.add(e),e.tempOldParentRowDataItem=t):(o.delete(e),delete e.tempOldParentRowDataItem),a(t,e,i)})),!i||e&&e!==t.parentRowDataItem||(l.length=0))}}))};t.childRowsChangedFlag&&a(void 0,e,!0),i.__doInvalidateRowRecursively(e,t),t.childRowsChangedFlag&&(a(void 0,e,!1),o.forEach((function(e){e.tempOldParentRowDataItem===e.parentRowDataItem&&(i._removeRowCompletely(e,!1),delete e.parentRowDataItem,i.options.autoDisposeOfUnusedItems||i._unusedRowDataItemsMap.set(e.id,e),i._rowDataItemsMap.delete(e.id),e.selected&&i._selectedRowDataItemsMap.delete(e.id),delete e.selected),delete e.tempOldParentRowDataItem}))),i._PE_DoInvalidateRow_111(e)},__doInvalidateRowRecursively:function(){},_PE_DoInvalidateRow_111:function(){},invalidateAllRows:function(e,t){this._invalidateAllRowsAtLast(e,t)},update:function(){},_determineRowDataItems:function(e,t,i,o){var a=this,n=[],l=i?i.item:this.options.rowItemsRoot;return l&&(this._doDetermineRowDataItemsOrRowItemsRecursively(l,n,e,t,!1),e&&n.splice(0,1)),null!=o&&(n=n.filter((e=>a._determineBodyAreaIndex(e)===o))),n},_doDetermineRowDataItemsOrRowItemsRecursively:function(e,t,i,o,a){var n=this,l=n._getDataItem(e,n._rowDataItemsMap);(l||a)&&(t.push(a?e:l),["detailingRowItems","childRowItems"].forEach((function(r,s){l?.isDetailingRow&&s||(!i||(s?l?!l.isCollapsed:!e.initiallyCollapsed:o||n.options.detailingRowsVisible&&(l?!l.areLeavesCollapsed:!e.leavesInitiallyCollapsed))||s&&e===n.options.rowItemsRoot)&&Array.isArray(e[r])&&e[r].forEach((function(e){n._doDetermineRowDataItemsOrRowItemsRecursively(e,t,i,o,a)}))})))},_getDataItem:function(e,t,i){return this._getDataItemByID(e[this._OBJECT_ID_PROPERTY],t,i)},_getDataItemByID:function(e,t,i){var o;return e&&!(o=t.get(e))&&i&&(o=i.get(e)),o},_getOrCreateDataItem:function(e,t,i){var o=this,a=!1,n=o._getDataItem(e,t,i);if(!n){var l=(o._nextDataItemID++).toString();n={id:l,version:0,item:e},t.set(l,n),e[o._OBJECT_ID_PROPERTY]=l,a=!0}return{dataItem:n,isCreated:a}},_rowItemsRootChanged:function(){var e=this;e._rowItemsRootChanged_ClearAllSelections();var t=new Set;for(let i of e._rowDataItemsMap.values())t.add(i);var i=[];if(e.options.rowItemsRoot){i.push({rowItem:e.options.rowItemsRoot,isDetailingRow:!1});for(var o=0;o<i.length;o++){var a=i[o],n=a.rowItem,l=a.isDetailingRow,r=e._getOrCreateDataItem(n,e._rowDataItemsMap,e._unusedRowDataItemsMap),s=r.dataItem,d=s.id;s.isHidden=!1,s.visibleRowDataItem=s,s.virtualizationStatus=R.Unrealized,s.item===e.options.rowItemsRoot&&(s.level=-1),r.isCreated?(s.isDetailingRow=l,s.areLeavesCollapsed=n.leavesInitiallyCollapsed||!1,s.isCollapsed=l?s.areLeavesCollapsed:n.initiallyCollapsed||!1):(e._unusedRowDataItemsMap.delete(d),e._rowDataItemsMap.set(d,s),t.delete(s),delete s.totalHeight),["detailingRowItems","childRowItems"].forEach((function(e,t){s.isDetailingRow&&t||Array.isArray(n[e])&&n[e].forEach((function(e){i.push({rowItem:e,isDetailingRow:!t})}))}))}}t.forEach((function(t){e.options.autoDisposeOfUnusedItems||e._unusedRowDataItemsMap.set(t.id,t),delete t.childRowDataItems,delete t.detailingRowDataItems,e._rowDataItemsMap.delete(t.id),t.selected&&e._selectedRowDataItemsMap.delete(t.id),delete t.selected,e._removeRowByDataItem(t),e._rowItemsRootChanged_ClearAdditionalUsages(t),e._realizedVisibleRowsSet.delete(t)||e._realizedInvisibleRowsSet.delete(t)}));var _={rowDataItems:[]};e._rowItemsRootChanged_prepareUpdate(i.map((e=>e.rowItem)),_),_.rowDataItems.sort((function(e,t){return t.level-e.level})),e._rowItemsRootChanged_update(_)},_rowItemsRootChanged_ClearAllSelections:function(){this._changeRowItemSelection([],!0)},_rowItemsRootChanged_ClearAdditionalUsages:function(){},_rowItemsRootChanged_getRowDataItemWithChildren:function(e,t){var i=this,o=i._getDataItem(e,i._rowDataItemsMap,i._unusedRowDataItemsMap);return t.rowDataItems.push(o),["detailingRowItems","childRowItems"].forEach((function(t,a){if((!o.isDetailingRow||!a)&&Array.isArray(e[t])){let n=[];o[["detailingRowDataItems","childRowDataItems"][a]]=n,e[t].forEach((function(e){let t=i._getDataItem(e,i._rowDataItemsMap,i._unusedRowDataItemsMap);t.isDetailingRow=!a,t.level=o.level+1,a||(t.detailingLevel=(o.detailingLevel??-1)+1),t.parentRowDataItem=o,n.push(t);let l=t.isHidden=o.isHidden||(a?o.isCollapsed:!i.options.detailingRowsVisible||o.areLeavesCollapsed);t.visibleRowDataItem=l?o.visibleRowDataItem:t}))}})),o},_rowItemsRootChanged_prepareUpdate:function(e,t){var i=this;e.forEach((function(e){i._rowItemsRootChanged_getRowDataItemWithChildren(e,t)}))},_rowItemsRootChanged_update:function(){},determineActualRowMargins:function(){var e=this,t={top:e.options.topRowMargin,bottom:e.options.bottomRowMargin};return null==t.top&&(t.top=e.options.rowMargin),null==t.bottom&&(t.bottom=e.options.rowMargin),t.sum=t.top+t.bottom,t},_registerBackgroundPanningEvents:function(){},_isAnyItemSelected:function(){return!!this._selectedRowDataItemsMap.size},_changeRowItemSelection:function(e,t){for(var i=this,a=new Map,n=0;n<e.length;n++){var l=i._getDataItem(e[n],i._rowDataItemsMap);l&&i._isRowSelectable(l)&&a.set(l.id,l)}let r=i._selectedRowDataItemsMap.size;for(let e of i._selectedRowDataItemsMap.values())a.has(e.id)||(delete e.selected,t||i._updateRowSelection(e),i._selectedRowDataItemsMap.delete(e.id));for(let e of a.values())i._isRowSelectable(e)&&(i._selectedRowDataItemsMap.has(e.id)||(e.selected=!0,i._selectedRowDataItemsMap.set(e.id,e),t||i._updateRowSelection(e)));t||"auto"!==i.options.unselectedItemsShownCovered||!!r==!!a.size||i._foregroundBodyD3s.forEach((function(e){e.selectAll("."+i.NXXXXX.ROW_CLASS).each((function(e){var t=a.size&&!e.selected;o.select(this).select("."+i.NXXXXX.UNSELECTED_ROW_COVER_CLASS).attr("visibility",t?null:"hidden")}))}))},_isCtrlKeyPressed:function(e,t){return!this.options.selectedItemsShownHighlighted&&("touch"===e.pointerType&&!t)!==(c.isMacOrIOS?e.srcEvent.metaKey:e.srcEvent.ctrlKey)},_selectRow:function(e,t){var i,o,a,n=this,l=n.selectedRowItems(),r=l.slice(),s=n._isCtrlKeyPressed(t,!n._selectedRowDataItemsMap.size);if(s){if(!n._isAdditionalRowSelectionCurrentlyPossible())return;if(n._selectedRowDataItemsMap.has(e.id)){var d=r.indexOf(e.item);d>-1&&r.splice(d,1)}else o=r.slice(),r.push(e.item),i=!0}else n.options.canSelectRowItemFunc&&l.indexOf(e.item)<0&&(o=[],i=!0),r=[e.item];if(n._updateSuspendedForSelectionChanges=!0,i&&n.options.canSelectRowItemFunc){var _=n._extendCallbackArgs({rowItem:e.item,otherSelectedRowItems:o,altKey:t.srcEvent.altKey,shiftKey:t.srcEvent.shiftKey,metaKey:s,ctrlKey:s,event:t.srcEvent,hammerEvent:t,canSelect:!0});n.options.canSelectRowItemFunc.call(n,_),_.canSelect||(a=!0)}if(!a&&n.options.selectRowItemFunc){_=n._extendCallbackArgs({rowItem:e.item,oldSelectedItems:n.selectedRowItems(),newSelectedItems:r,altKey:t.srcEvent.altKey,shiftKey:t.srcEvent.shiftKey,metaKey:s,ctrlKey:s,event:t.srcEvent,hammerEvent:t,cancel:!1});n._PE_SelectRow_111(_),n.options.selectRowItemFunc.call(n,_),_.cancel?a=!0:r=Array.isArray(_.newSelectedItems)?_.newSelectedItems:[]}delete n._updateSuspendedForSelectionChanges,a||n.selectedRowItems(r)},_isAdditionalRowSelectionCurrentlyPossible:function(){return!0},_PE_SelectRow_111:function(){},isRowItemSelected:function(e){try{r.assertNotNull(e,"",0);var t=this,i=t._getDataItem(e,t._rowDataItemsMap);if(i)return t._selectedRowDataItemsMap.has(i.id)}catch(e){this._handleException(e,"isRowItemSelected")}},selectedRowItems:function(e){try{r.assertArrayOrNull(e,"",0);var t=this;if(void 0===e)return Array.from(t._selectedRowDataItemsMap.values()).map((e=>e.item));t.options.rowItemsSelectable&&(t._PE_SelectedRowItems_01(e),t._changeRowItemSelection(e),t._updateSuspendedForSelectionChanges||t.update())}catch(e){this._handleException(e,"selectedRowItems")}},_PE_SelectedRowItems_01:function(){},_updateAllRowSelections:function(){var e=this;if(e.options.rowItemsSelectable)for(let t of e._selectedRowDataItemsMap.values())t.foregroundRowElem&&e._updateRowSelection(t)},_updateRowSelection:function(){},_createRowOmissionSymbol:function(e,t){var i=this;if(i.options.rowOmissionSymbolsVisible){var o=e.append("g").attr("class",i.NXXXXX.ROW_OMISSION_SYMBOL_CLASS);o.append("line").attr("class",i.NXXXXX.ROW_OMISSION_SYMBOL_BACKGROUND_LINE_CLASS).attr("x2",i._actualScaledMainWidth()),o.append("line").attr("class",i.NXXXXX.ROW_OMISSION_SYMBOL_MIDDLE_LINE_CLASS).attr("x2",i._actualScaledMainWidth()),o.append("line").attr("class",i.NXXXXX.ROW_OMISSION_SYMBOL_FOREGROUND_LINE_CLASS).attr("x2",i._actualScaledMainWidth()),t.omissionSymbolExistent=!0}},_bodyChanged:function(e,t,i){var o=this;if(!o._bodyChanged_isSuspended(...arguments))if(o._bodyChanged_prepareUpdate(),o._updateOfRowsNeeded||o._bodyChanged_updateNeededByUpdateCause(e)){var a=e===T.RowExpanded||e===T.RowLeavesExpanded,n=e===T.RowCollapsed||e===T.RowLeavesCollapsed,l=e===T.RowItemsChanged&&o._isTableWithRowDefinitionsMap()&&o._determineRowDataItems().some(((e,t)=>void 0===e.tableRowDefinition&&t));e===T.RowItemsRootChanged&&(e=T.RowItemsChanged);var r=[0,0],s=[0,0],d=[o.options.topBodyViewAreaVisible,o.options.commonBodyViewAreaVisible||!o.options.topBodyViewAreaVisible];t?delete t.totalHeight:t=o.options.rowItemsRoot?o._getDataItem(o.options.rowItemsRoot,o._rowDataItemsMap):null,t&&t.item===o.options.rowItemsRoot&&(t=null);var _=o._currentlyVisibleRowDataItems?o._currentlyVisibleRowDataItems[0].slice().concat(o._currentlyVisibleRowDataItems[1]):[],c=o._determineRowDataItems(!0);o._currentlyVisibleRowDataItems=[],b.forEach((function(e){o._currentlyVisibleRowDataItems[e]=[]}));var h=[0,0],u=[[],[]];c.forEach((function(e){var t=o._determineBodyAreaIndex(e);o._currentlyVisibleRowDataItems[t].push(e),e.arrayIndex=h[t]++,e.newY=r[t],null!=e.oldY?(u[t].forEach((t=>{t.oldY=e.oldY})),u[t].length=0):o.options.isForExport||u[t].push(e);let i=0;if(void 0===e.totalHeight){let t=e.item.totalHeight;if(0!==t&&0===e.parentRowDataItem?.totalHeight&&(t=0),null!=t?o._bodyChanged_setTotalHeight(e,t):e.mainHeightLimited?e.totalHeight=e.mainHeight:o._bodyChanged_setTotalHeight(e,o._bodyChanged_calcTotalHeight(e)),e.item.additionalHeight&&(e.totalHeight+=e.item.additionalHeight),o._bodyChanged_restrictTotalHeight(e),o.options.rowHeightCalcFunc){var a=o._extendCallbackArgs({rowItem:e.item,mainHeight:e.mainHeight,totalHeight:e.totalHeight});t=o.options.rowHeightCalcFunc.call(o,a),e.totalHeight=void 0!==t?t:a.totalHeight}}i=o._getRowTotalHeight(e),d[t]&&(r[t]+=i),s[t]+=i}));for(var p=[],m=[],f=0;f<=1;f++)if(m[f]=o._layoutRows[f].extent(),o._layoutRows[f].extent(s[f]),p[f]=o._layoutRows[f].visibleRange(),o.options.virtualized&&(m[f]||0)<=r[f]){var w=o._calculateVisibleVerticalBodyRangeForVirtualization(f);o._layoutRows[f].visibleRange().bottom<w.bottom&&o._layoutRows[f].visibleRange(w)}var E=[];o.options.isForExport||(a?E.push(o._determineBodyAreaIndex(t)):[D.BodyAtTheTop,D.MainBody].forEach((e=>{m[e]<r[e]&&E.push(e)})),E.forEach((e=>{let t,i=o._defsD3.select("#"+o.NXXXXX.TEMP_BODY_CLIPPATH_ID+o._uniqueID+"_"+e);i.size()?t=i.select("rect"):(i=o._defsD3.append("clipPath").attr("id",o.NXXXXX.TEMP_BODY_CLIPPATH_ID+o._uniqueID+"_"+e),t=i.append("rect")),t.attr("width",o._actualScaledMainWidth()).attr("height",m[e]),[o._backgroundBodyD3s[e],o._foregroundBodyD3s[e]].forEach((function(t){t.attr("clip-path","url(#"+o.NXXXXX.TEMP_BODY_CLIPPATH_ID+o._uniqueID+"_"+e+")")}))})));var g,R=[],C=_||[];for(c.forEach((function(e){e.entered||(R.push(e),e.version++);var t=C.indexOf(e);t>=0&&C.splice(t,1)})),C.forEach((function(e){let i;if(e.arrayIndex=-1,e.parentRowDataItem!==t&&o.options.detailingRowsVisible&&!e.visibleRowDataItem.areLeavesCollapsed&&(i=e.visibleRowDataItem.detailingRowDataItems)?.length){let t=i[i.length-1];e.newY=t.newY+(t.totalHeight??0)}else e.newY=e.visibleRowDataItem.newY+(e.visibleRowDataItem.totalHeight??0);delete e.entered})),o._createRows(R,t,e),o._updateRows(C,t,e),f=0;f<=1;f++)o._layoutRows[f].visibleRange(p[f]);c.forEach((function(e){e.oldY=e.newY,e.oldMainHeight=e.mainHeight,e.oldTotalHeight=e.totalHeight,e.oldAdditionalHeight=o._getRowAdditionalHeight(e)})),l&&o._tableDefinitionChanged(!0,!0),i||void 0!==o._layoutRows[D.MainBody].innerViewExtent()||(o._doResize(),g=!0),m[D.BodyAtTheTop]===o._layoutRows[D.BodyAtTheTop].extent()&&m[D.MainBody]===o._layoutRows[D.MainBody].extent()||g||o._doResize(e,t),E.length&&o._cacheTransitionFunction((function(){E.forEach((i=>{let n=o._defsD3.select("#"+o.NXXXXX.TEMP_BODY_CLIPPATH_ID+o._uniqueID+"_"+i);n.select("rect").transition().duration(o.options.transitionDuration).attr("height",r[i]).on("end",(function(){[o._backgroundBodyD3s[i],o._foregroundBodyD3s[i]].forEach((function(e){e.attr("clip-path",null)})),a&&(o._updateVirtualization(e,t),o._executeCachedTransitionFunctions()),n.remove()}))}))})),o.options.virtualized&&(n||a||!o._layoutRows[D.MainBody].visibleRange().bottom)&&o._updateVirtualization(e,t),R.forEach((function(e){e.entered=!0})),o._bodyChanged_additionalUpdates(e),o._createOrUpdateLastRowSeparationLine(n||a,m[D.BodyAtTheTop]+m[D.MainBody]===r[D.BodyAtTheTop]+r[D.MainBody]),o._executeCachedTransitionFunctions(),o._scrollTo([void 0,void 0],o._layoutStacks[A.Rows].scrollStarts()),o._cachedRowItemAtTops[D.BodyAtTheTop]===o.visibleStartRowItem(D.BodyAtTheTop)&&o._cachedRowItemAtTops[D.MainBody]===o.visibleStartRowItem(D.MainBody)||o._callVerticalScrollOffsetChangedFunc(!0),!o._worldViewDivElem||m[D.BodyAtTheTop]===o._layoutRows[D.BodyAtTheTop].extent()&&m[D.MainBody]===o._layoutRows[D.MainBody].extent()||o._renderCompleteWorldView(),o._updateOfRowsNeeded=!1}else e===T.RowItemsChanged&&(o._updateOfRowsNeeded=!0),o._bodyChanged_additionalUpdates(null)},_bodyChanged_isSuspended:function(){},_bodyChanged_prepareUpdate:function(){},_bodyChanged_additionalUpdates:function(){},_bodyChanged_updateNeededByUpdateCause:function(){},_bodyChanged_setTotalHeight:function(e,t){e.totalHeight=t},_bodyChanged_restrictTotalHeight:function(){},_bodyChanged_calcTotalHeight:function(){},_determineBodyAreaIndex:function(e){if(this.options.isForExport&&this.options.topBodyViewAreaVisible&&this.options.commonBodyViewAreaVisible)return D.MainBody;let t=e.bodyAreaIndex;if(void 0===t){let i=[];do{i.push(e);let t=e.parentRowDataItem;if(!t.parentRowDataItem)break;e=t}while(void 0===e.bodyAreaIndex);t=e.bodyAreaIndex??(e.item.atTheTop?D.BodyAtTheTop:D.MainBody),i.forEach((e=>{e.bodyAreaIndex=t}))}return t},_createRows:function(e,t,i){var o=this,a=i===T.RowExpanded||i===T.RowLeavesExpanded;let n={},l=[t];t&&a&&o._determineRowDataItems(!1,void 0,t).forEach((function(e){n[e.id]=!0,l.push(e)}));var r=i===T.Virtualization,s=r?[]:void 0;r&&!o._realizedVisibleRowsSet.size&&(i=T.RowItemsChanged);var d=!o.options.virtualized||i===T.ScrollToRow,_=[d,d],c=[],h={};return e.every((function(e){if(e!==t&&a&&n[e.id]){let a,n=l.indexOf(e),r=l[n-1]?.visibleRowDataItem;if(e.oldY=r?r.oldY+(r.oldTotalHeight??r.totalHeight):0,1===n&&t&&i===T.RowExpanded&&o.options.detailingRowsVisible&&!t.areLeavesCollapsed&&(a=t.detailingRowDataItems)?.length){var d=a[a.length-1];e.oldY=d.oldY+d.oldTotalHeight}}if(o._isRowDataItemVirtualized(e)){var u=o._determineBodyAreaIndex(e);if(!_[u]){let t=c[u]??(c[u]=o._layoutRows[u].visibleRange());if((e.oldY<t.exactBottom||e.newY<t.bottom)&&(e.oldY+e.totalHeight>=t.exactTop||e.newY+e.totalHeight>=t.top)){_[u]=!0;let t=[];for(let i=e.parentRowDataItem;i&&i.item!==o.options.rowItemsRoot&&o._isRowDataItemVirtualized(i)&&!h[i.id];i=i.parentRowDataItem)t.push(i);t.reverse().forEach((e=>{h[e.id]=e,o._createRow(e,void 0,T.AncestorsNeeded)}))}}}let p=o._createRow(e,t,i);return s&&p&&s.push(e),!r||p})),Object.values(h).forEach((e=>{o._removeRowByDataItem(e)})),s},_checkForVisibilityOfUnselectedRowCover:function(e){var t=this,i=("auto"===t.options.unselectedItemsShownCovered&&t._isAnyItemSelected()||!0===t.options.unselectedItemsShownCovered)&&!e.selected;o.select(e.foregroundRowElem).select("."+t.NXXXXX.UNSELECTED_ROW_COVER_CLASS).attr("visibility",i?null:"hidden")},_createRow:function(){},_updateRows:function(e,t,i){var a,n=this;i!==T.RowExpanded&&i!==T.RowLeavesExpanded||(a=0);for(var l=0;l<=1;l++)n._currentlyVisibleRowDataItems[l].forEach((function(e){if(n._isRowDataItemVirtualized(e))n._createRow(e,t,i);else if(n._worldViewDivElem&&!e.worldViewCache&&n._createRow(e,void 0,T.WorldView),e.arrayIndex){var r=n.options.rowOmissionSymbolsVisible&&(e.totalHeight?!n._currentlyVisibleRowDataItems[l][e.arrayIndex-1].totalHeight:e.arrayIndex===n._currentlyVisibleRowDataItems[l].length-1);if(!!e.omissionSymbolExistent!==r){var s=o.select(e.foregroundRowElem);r?n._createRowOmissionSymbol(s,e):(s.select("."+n.NXXXXX.ROW_OMISSION_SYMBOL_CLASS).remove(),delete e.omissionSymbolExistent)}}if(e.foregroundRowElem){void 0!==a&&(a?a&&e.level<=t.level?a=-1:1===a&&e.isDetailingRow?a=2:a>0&&!e.isDetailingRow&&(a=3):e===t&&(a=1));var d=o.select(e.backgroundRowElem),_=(s=o.select(e.foregroundRowElem),e.oldY??e.newY),c=e.newY,h=e.totalHeight,u=null!=e.oldTotalHeight?e.oldTotalHeight:h,p=Math.ceil(h-(e.item.additionalHeight||0)||0),m=Math.ceil(null!=e.oldTotalHeight?u-(e.oldAdditionalHeight||0)||0:p),f=d.selectAll("rect."+n.NXXXXX.ROW_HEIGHT_PROP_CLASS),w=d.selectAll("line."+n.NXXXXX.ROW_HEIGHT_PROP_CLASS),E=s.selectAll("rect."+n.NXXXXX.ROW_HEIGHT_PROP_CLASS),g=s.selectAll("line."+n.NXXXXX.ROW_HEIGHT_PROP_CLASS);f.attr("height",u),w.attr("y2",u),E.attr("height",u),g.attr("y2",u);var C=d.selectAll("."+n.NXXXXX.ROW_MAIN_HEIGHT_PROP_CLASS),I=s.selectAll("."+n.NXXXXX.ROW_MAIN_HEIGHT_PROP_CLASS);C.attr("height",m),I.attr("height",m);var D=d.selectAll("."+n.NXXXXX.ROW_MAIN_HEIGHT_SCALE_CLASS),v=s.selectAll("."+n.NXXXXX.ROW_MAIN_HEIGHT_SCALE_CLASS);D.attr("transform","scale(1,"+m+")"),v.attr("transform","scale(1,"+m+")");var A=_!==c,y=u!==h;(A||y)&&(n._worldViewDivElem&&(n._updateRowSelection(e,T.WorldView),n._createRow(e,void 0,T.WorldView)),n._cacheTransitionFunction((function(){if(A&&(!y||h)){var t="translate(0,"+c+")";d.transition().duration(n.options.transitionDuration).attr("transform",t),s.transition().duration(n.options.transitionDuration).attr("transform",t)}if(A&&n._updateRows_moveVertically(e,i,s,c-_),y&&([f,E].forEach((e=>{e.transition().duration(n.options.transitionDuration).attr("height",h)})),[w,g].forEach((e=>{e.transition().duration(n.options.transitionDuration).attr("y2",h)})),[C,I].forEach((e=>{e.transition().duration(n.options.transitionDuration).attr("height",p)})),[D,v].forEach((e=>{e.transition().duration(n.options.transitionDuration).attr("transform","scale(1,"+p+")")})),!h)){t="translate(0,"+c+")";d.transition().duration(n.options.transitionDuration).attr("transform",t+" "+S).transition().duration(1).attr("transform",t).selectAll("*").remove(),s.transition().duration(n.options.transitionDuration).attr("transform",t+" "+S).transition().duration(1).attr("transform",t).selectAll("*").remove().each((function(t){n._updateRows_hideSelectionFrameForHiddenRow(t),e.worldViewSelectionCacheMap&&delete e.worldViewSelectionCacheMap["T"+t.id]})),e.worldViewSelectionCacheMap&&(delete e.worldViewSelectionCacheMap["R"+e.id],n._renderCachedRowInWorldView(e,"S"))}})));var b=void 0!==a?(i===T.RowExpanded?[1,3]:[1,2]).indexOf(a)>=0:void 0;n._updateRows_updateSingleRow(e,d,b,t),y&&n._updateRows_callback(e,d,s)}e.virtualizationStatus>R.Precalculated&&(!e.entered||e.oldY!==e.newY)&&n._updateRows_prepareExitingRow(e)}));n._updateRows_handleExitingRows(e,t)},_updateRows_moveVertically:function(){},_updateRows_hideSelectionFrameForHiddenRow:function(){},_updateRows_updateSingleRow:function(){},_updateRows_prepareExitingRow:function(){},_updateRows_handleExitingRows:function(e){var t=this;e.forEach((function(e){t._removeRowCompletely(e,!0)}))},_updateRows_callback:function(){},_removeRowCompletely:function(e,t){var i=this;if(e.foregroundRowElem){var a=o.select(e.backgroundRowElem),n=o.select(e.foregroundRowElem),l=e.specialRowElems?.[1]?o.select(e.specialRowElems[1]):null;i._realizedVisibleRowsSet.delete(e)||e.virtualizationStatus!==R.Invisible||i._realizedInvisibleRowsSet.delete(e),e.virtualizationStatus=t?R.Unrealized:R.Precalculated;var r=n.select("."+i.NXXXXX.TABLE_ROW_CLASS).node();if(t){var d=e.newY;i._cacheTransitionFunction((function(){a.transition().duration(i.options.transitionDuration).attr("transform","translate(0,"+d+") "+S).remove().selectAll("*").remove(),i._removeSelectionFrames(n,!1),[n,l].forEach((function(t){t&&t.transition().duration(i.options.transitionDuration).attr("transform",(function(){return"translate(0,"+d+") "+S})).on("end",(function(){t===n&&(e.version===n.property(i._ITEM_VERSION_PROPERTY)&&i._detachRowDataItem(e,!0),s.off(o.select(r).selectAll("*").nodes(),i._pointerEvents,".*")),t.remove().selectAll("*").remove(),t.selectAll("*").datum(null),e.worldViewSelectionCacheMap&&(delete e.worldViewSelectionCacheMap["R"+e.id],i._renderCachedRowInWorldView(e,"S"))}))}))}))}else i._removeSelectionFrames(n,!0),i._detachRowDataItem(e,!1),a.remove().selectAll("*").remove(),s.off(o.select(r).selectAll("*").nodes(),i._pointerEvents,".*"),n.remove().selectAll("*").remove(),l&&l.remove().selectAll("*").remove(),e.worldViewSelectionCacheMap&&(delete e.worldViewSelectionCacheMap["R"+e.id],i._renderCachedRowInWorldView(e,"S")),e.backgroundRowElem=void 0,e.foregroundRowElem=void 0,l&&(e.specialRowElems[1]=void 0)}delete e.entered},_removeSelectionFrames:function(){},collapseRow:function(e,t,i){try{r.assertNotNull(e,"",0);var o=this,a=o._getDataItem(e,o._rowDataItemsMap,o._unusedRowDataItemsMap);a&&!(i?a.areLeavesCollapsed:a.isCollapsed)&&o._expandOrCollapseRow(a,!1,t,i)}catch(e){this._handleException(e,"collapseRow")}},expandRow:function(e,t,i){try{r.assertNotNull(e,"",0);var o=this,a=o._getDataItem(e,o._rowDataItemsMap,o._unusedRowDataItemsMap);a&&(i?a.areLeavesCollapsed:a.isCollapsed)&&o._expandOrCollapseRow(a,!1,t,i)}catch(e){this._handleException(e,"expandRow")}},_expandOrCollapseRow:function(e,t,i,o){this._doExpandOrCollapseRow(e,{interactively:t,withoutUpdate:i,concernsLeaves:o})},_doExpandOrCollapseRow:function(e,t){var i=this;i._setOption("updateSuspended",!1);var o=e.item,a=t.concernsLeaves?"areLeavesCollapsed":"isCollapsed",n=!e[a];if(i.options.rowExpandOrCollapseFunc){var l=i._extendCallbackArgs({rowItem:o,concernsLeaves:t.concernsLeaves,isCollapsed:!e.isDetailingRow&&(t.concernsLeaves?e.isCollapsed:!e.isCollapsed),areLeavesCollapsed:t.concernsLeaves?!e.areLeavesCollapsed:e.areLeavesCollapsed,interactively:!!t.interactively,promise:void 0,cancel:!1});if(i.options.rowExpandOrCollapseFunc.call(i,l),l.cancel)return}var r=function(){if(e[a]!==n){if(i._handleBeforeExpandOrCollapseRow(e,t.concernsLeaves),e[a]=n,e.isDetailingRow&&(e.isCollapsed=n),i.options.rowExpandedOrCollapsedFunc?.call(i,i._extendCallbackArgs({rowItem:o,concernsLeaves:t.concernsLeaves,isCollapsed:!e.isDetailingRow&&e.isCollapsed,areLeavesCollapsed:e.areLeavesCollapsed,interactively:!!t.interactively})),i._rowDataItemsMap.has(e.id)){let o=t.additionalFlagsForInvalidateRows?{...t.additionalFlagsForInvalidateRows}:{};!t.concernsLeaves&&i.options.detailingRowsVisible&&i.options.treeLinesVisible&&(o.childRowsChangedFlag=!0),i._doInvalidateRow(e,o);var l=function(e,t){["detailingRowDataItems","childRowDataItems"].forEach((function(o,a){if((!e.isDetailingRow||!a)&&e[o]){var n=t||(a?e.isCollapsed:!i.options.detailingRowsVisible||e.areLeavesCollapsed);e[o].forEach((function(t){t.isHidden=n;var i=n?e.visibleRowDataItem:t;t.oldVisibleRowDataItem=t.visibleRowDataItem,t.visibleRowDataItem=i,l(t,n)}))}}))};l(e,e.isHidden)}var r;if(i._handleAfterExpandOrCollapseRow(e,t.concernsLeaves),!t.withoutUpdate&&i._rowDataItemsMap.has(e.id))r=e[a]?t.concernsLeaves?T.RowLeavesCollapsed:T.RowCollapsed:t.concernsLeaves?T.RowLeavesExpanded:T.RowExpanded,i._bodyChanged(r,e)}};if(l&&l.promise&&"function"==typeof l.promise.then)return l.promise.then((function(){r()})),l.promise;r()},_createOrUpdateLastRowSeparationLine:function(){},getOrCreateClipPathForRange:function(e,t){try{var i=this;e=Math.ceil(+e||0),t=Math.floor(Math.max(+t||0,e));var o=i.NXXXXX.TEXT_CLIPPATH_ID_PREFIX+this._uniqueID+"-"+e+"-"+t;return i._defsD3.select("#"+o).empty()&&i._defsD3.append("clipPath").attr("id",o).append("rect").attr("width",t-e).attr("x",e).attr("y",-1e3).attr("height",2e3),o}catch(e){this._handleException(e,"getOrCreateClipPathForRange")}return""},setClipPathAttrOnElemD3WithRefCount:function(e,t){try{r.assertNotNull(e,"",0),r.assertStringOrNull(t,"",1);var i,o=this;t&&(i=o._clipPathReferenceCounts[t]||0,o._clipPathReferenceCounts[t]=++i);var a=e.attr("clip-path");if(a){var n="#"!==a[4]?1:0,l=a.substring(5+n,a.length-1-n);(i=--o._clipPathReferenceCounts[l])||(o._defsD3.select("#"+l).remove(),delete o._clipPathReferenceCounts[l])}e.attr("clip-path","url(#"+t+")")}catch(e){this._handleException(e,"setClipPathAttrOnElemD3WithRefCount")}},_enrichClass:function(e,t,i){var o=this;if(o.options.enrichClassFunc){i[o.NXXXXX.WIDGET_PROPERTYNAME_IN_CALLBACKS]=o,i.item=e.item,i.additionalClasses=void 0,i.currentClasses=t,!("level"in i)&&"level"in e&&(i.level=e.level);var a=o.options.enrichClassFunc.call(o,i);return void 0===a&&(a=i.additionalClasses),t=i.currentClasses,a?t?a+" "+t:a:t}return t},_localeChanged:function(){try{this.invalidateAllRows(),this.update()}catch(e){this._handleException(e,"onLocaleChanged")}},_removeRowByDataItem:function(e){var t=e.backgroundRowElem,i=e.foregroundRowElem,a=e.specialRowElems?.[1];i&&this._removeSelectionFrames(o.select(i),!1),this._detachRowDataItem(e,!0),o.select(t).remove().selectAll("*").remove(),o.select(i).remove().selectAll("*").remove(),a&&o.select(a).remove().selectAll("*").remove()},_detachRowDataItem:function(e,t){var i=this;if(e.backgroundRowElem){var a=o.select(e.backgroundRowElem);i._detachEventListenersFromRows(a,!1),a.datum(null).selectAll("*").datum(null),e.backgroundRowElem=void 0}if(e.foregroundRowElem){a=o.select(e.foregroundRowElem);i._detachEventListenersFromRows(a,!0),i._detachRowContents(a,t),a.datum(null).selectAll("*").datum(null),e.foregroundRowElem=void 0}if(e.specialRowElems?.[1]){a=o.select(e.specialRowElems[1]);i._detachRowContents(a,t),a.datum(null).selectAll("*").datum(null),e.specialRowElems[1]=void 0}},_detachRowContents:function(){},_setOffsetCorrection:function(){},_getRowAdditionalHeight:function(e){return e.item.additionalHeight||0},_getRowMainHeight:function(e){return Math.ceil(e.totalHeight-this._getRowAdditionalHeight(e)||0)},_getRowTotalHeight:function(e){return Math.ceil(e.totalHeight)},showMarkingTemporarily:function(e){try{var t=this;if(e){var i=t._temporaryMarkVisible=t._temporaryMarkCounter++;t._temporaryMarkMinimumDate=new Date((new Date).getTime()+500),window.setTimeout((function(){try{if(t._element){var o=function(e){var o=t._determineFrameRectD3(e);o&&(o.attr("opacity",1),function e(){if(t._temporaryMarkVisible===i&&document.body.contains(o.node())){var a=t.options.itemHighlightFlashingEnabled?.8:1,n=t.options.itemHighlightFlashingEnabled?0:1;o.transition().duration(400).attr("opacity",parseFloat(o.attr("opacity"))===n?a:n).on("end",e)}else o.node().parentNode&&o.node().parentNode.removeChild(o.node())}())};Array.isArray(e)?e.forEach((function(e){o(e)})):o(e)}}catch(e){t._handleException(e,"showMarkingTemporarily")}}),50)}else t._temporaryMarkVisible=void 0}catch(e){t._handleException(e,"showMarkingTemporarily")}},_determineFrameRectD3:function(e){var t=this,i=t._getDataItem(e,t._rowDataItemsMap);if(i){var a=i.foregroundRowElem;if(a){var n=t._determineBodyAreaIndex(i),l=o.select(a).append("rect").attr("class",t.NXXXXX.TEMP_MARKING_CLASS);t.options.itemHighlightingColor&&l.style("stroke",t.options.itemHighlightingColor);var r=t._actualScaledMainWidth();return r=t._overlayAreas?t._overlayAreas[t._verSBLayoutColumn()][n]._calcOverlayWidthByOverflow(r):r,l.attr("x",2).attr("y",2).attr("width",r-4).attr("height",i.totalHeight/t.options.visualZoomFactor-4),l}}},_handleTapOnBackground:function(e){var t=this;if(t.options.rowItemsSelectable&&(t._selectedRowDataItemsMap.size||t.options.selectRowItemFuncCalledForDeselectionForced)&&t.options.selectRowItemFunc){var i=t._extendCallbackArgs({rowItem:null,oldSelectedItems:t.selectedRowItems(),newSelectedItems:(c.isMacOrIOS?e.srcEvent.metaKey:e.srcEvent.ctrlKey)?t.selectedRowItems():[],altKey:e.srcEvent.altKey,shiftKey:e.srcEvent.shiftKey,metaKey:e.srcEvent.metaKey,ctrlKey:e.srcEvent.ctrlKey,event:e.srcEvent,hammerEvent:e,cancel:!1});if(t.options.selectRowItemFunc.call(t,i),i.cancel)return;t._changeRowItemSelection(i.newSelectedItems)}},_updateCursorHighlighters:function(){},_makeCursorHighlightersInvisible:function(){},_actualScrollableWidth:function(){},_createLayoutGrid:function(){var e=this;this._layoutGrid=new _([],[0,1,2,3,4],(function(){switch(this.getLayoutElements()){case A.Columns:this.setUpdateFunc((function(t,i){e._layoutStackUpdateColumns(this,t,i)}));break;case A.Rows:this.setUpdateFunc((function(t,i){e._layoutStackUpdateRows(this,t,i)}))}}),(function(){switch(this.getLayoutElements()){case A.Columns:this.setUpdateFunc((function(t,i){e._layoutStripeUpdateColumn(this,t,i)}));break;case A.Rows:this.setUpdateFunc((function(t,i){e._layoutStripeUpdateRow(this,t,i)}))}}),(function(t,i){e._layoutGridCellUpdate(t,i)})),this._layoutStacks=this._layoutGrid.getLayoutStacks(),this._layoutColumns=this._layoutStacks[A.Columns].getLayoutStripes(),this._layoutRows=this._layoutStacks[A.Rows].getLayoutStripes()},_layoutStackUpdateColumns:function(e,t,i){var o=this;if(i.innerViewExtent!==t.innerViewExtent){var a=this._actualCompleteInnerViewWidth()+1;this.options.isForExport?this._svgRootD3.attr("width",a):this._svgRootD3.style("width",a+"px"),this.options.isForExport&&!this._dbgClippath||this._bodyClipPathRectD3.attr("width",a),this._backgroundBodyRectD3s.forEach((function(e){e.attr("width",a)}));for(var n=this._actualScaledMainWidth(),l=0;l<=1;l++)this._titleVisible(l)&&o._titleD3s[l]&&this._svgRootD3.select("."+o.NXXXXX.TITLE_SEPARATION_LINE_CLASS[l]).attr("x2",n);this._foregroundBodyD3s.forEach((function(e){e.selectAll("."+o.NXXXXX.UNSELECTED_ROW_COVER_CLASS+",."+o.NXXXXX.COVERED_AND_HIGHLIGHTED_ROW_CLASS).attr("width",n)})),this._foregroundAreaSeparatorD3.attr("width",n+1)}},_layoutStackUpdateRows:function(e,t,i){if(i.innerViewExtent!==t.innerViewExtent){var o=this._actualTitleHeight(y.top)+this._actualInnerBodyViewHeightsSumWithSeparator()+this._actualTitleHeight(y.bottom)+1;this.options.isForExport?this._svgRootD3.attr("height",o):this._svgRootD3.style("height",o+"px")}},_layoutStripeUpdateColumn:function(e,t,i){if(i.innerViewExtent!==t.innerViewExtent){var o=e.getStripeID();this._widthClipPathRectD3s[o]&&this._widthClipPathRectD3s[o].attr("width",i.innerViewExtent)}},_layoutStripeUpdateRow:function(e,t,i){var o=this;if(i.start!==t.start){var a=function(e){o._titleVisible(e)&&o._titleD3s[e]&&o._titleD3s[e].attr("transform","translate(0,"+o._actualTitleAreaTop(e)+")")};switch(e.getStripeID()){case D.TopTitle:a(y.top);break;case D.BottomTitle:a(y.bottom)}}if(i.extent!==t.extent||i.innerViewExtent!==t.innerViewExtent){var n=Math.max(this._actualTitleHeight(y.top),this._actualInnerBodyViewHeightsSumWithSeparator(),this._actualBodyHeightsSum(),this._actualTitleHeight(y.bottom));this._layoutColumns.forEach((function(e){var t=e.getStripeID();o._widthClipPathRectD3s[t]&&o._widthClipPathRectD3s[t].attr("y",-n).attr("height",2*n)}))}if(i.innerViewExtent!==t.innerViewExtent){var l=function(e){if(o._backgroundBodyRectD3s[e].attr("height",Math.max(0,i.innerViewExtent)+1),!o.options.isForExport||o._dbgClippath){var t=o._actualInnerBodyViewHeightsSumWithSeparator();o._bodyClipPathRectD3.attr("height",Math.max(0,t+1))}};switch(e.getStripeID()){case D.BodyAtTheTop:l(D.BodyAtTheTop);break;case D.MainBody:l(D.MainBody)}}if(i.start!==t.start||i.innerViewExtent!==t.innerViewExtent){var r=function(e){if(o._titleVisible(e)&&o._titleD3s[e]){var t=e===y.bottom?o._actualTitleAreaTop(e):o._actualTitleAreaBottom(e);o._svgRootD3.select("."+o.NXXXXX.TITLE_SEPARATION_LINE_CLASS[e]).attr("y1",t).attr("y2",t)}};switch(e.getStripeID()){case D.TopTitle:r(y.top);var s="translate(0,"+this._actualBodyViewTop(D.BodyAtTheTop)+")";this._backgroundBodyScrollParentD3.attr("transform",s),this._foregroundBodyScrollParentD3.attr("transform",s),null!=this._highlightedBodyScrollParentD3&&this._highlightedBodyScrollParentD3.attr("transform",s),null!=this._phantomsBodyScrollParentD3&&this._phantomsBodyScrollParentD3.attr("transform",s);break;case D.BottomTitle:r(y.bottom)}}},_layoutGridCellUpdate:function(e,t){var i=e.getStripeID();if(this._overlayAreas&&this._overlayAreas[i]){var o=t.getStripeID();this._overlayAreas[i][o]&&(this._overlayAreas[i][o]._setWidth(e.extent()),this._overlayAreas[i][o]._setHeight(t.extent()),this._overlayAreas[i][o]._setViewWidth(e.outerViewExtent()),this._overlayAreas[i][o]._setViewHeight(t.outerViewExtent()),this._overlayAreas[i][o]._setViewLeft(e.start()))}},_createAndPositionDivOverlays:function(){this._overlayAreas=[]},_createAndAppendSVGRootDefs:function(){var e=this;this._defsD3=this._svgRootD3.append("defs"),this._defsD3.append("filter").attr("id",this.NXXXXX.BLUR_FILTER_ID+this._uniqueID).append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",5),this._defsD3.append("pattern").attr("id",this.NXXXXX.ASYNC_WAIT_PATTERN_ID+this._uniqueID).attr("width",I).attr("height",I).attr("patternTransform","rotate(45 0 0)").attr("patternUnits","userSpaceOnUse").append("line").attr("y2",I).style("stroke","rgba(0,0,0,0.1").style("stroke-width",I),this.options.isForExport&&!this._dbgClippath||(this._bodyParentClipPathRectD3s=[],b.forEach((function(t){e._bodyParentClipPathRectD3s[t]=e._defsD3.append("clipPath").attr("id",e.NXXXXX.BODY_PARENT_CLIPPATH_ID[t]+e._uniqueID).append("rect").attr("width",e.options.isForExport?1e7:1e5)})),this._bodyClipPathRectD3=this._defsD3.append("clipPath").attr("id",this.NXXXXX.BODY_CLIPPATH_ID+this._uniqueID).append("rect")),this._svgInnerFrameD3&&(this._innerFrameClipPathRectD3s=this._defsD3.append("clipPath").attr("id",this.NXXXXX.INNER_FRAME_CLIPPATH_ID+this._uniqueID).append("rect"))},_appendTitle:function(e){this._titleD3s||(this._titleD3s=[]),this._titleD3s[e]||(this._titleD3s[e]=this._svgRootD3.append("g").attr("class",this.NXXXXX.TITLE_CLASS[e]))},_appendTitleSeparationLine:function(e){this._svgRootD3.append("line").attr("class",this.NXXXXX.TITLE_SEPARATION_LINE_CLASS[e])},_appendBackground:function(){var e=this;this._backgroundBodyRectD3s=[],this._backgroundBodyParentD3s=[],this._backgroundBodyD3s=[],this._backgroundBodyScrollParentD3=this._svgRootD3.append("g").attr("class",this.NXXXXX.BACKGROUND_BODY_SCROLL_PARENT_CLASS),this.options.isForExport&&!this._dbgClippath||this._backgroundBodyScrollParentD3.attr("clip-path","url(#"+this.NXXXXX.BODY_CLIPPATH_ID+this._uniqueID+")");for(var t=0;t<=1;t++)this._backgroundBodyRectD3s[t]=this._backgroundBodyScrollParentD3.append("rect").attr("class",this.NXXXXX.BACKGROUND_BODY_RECT_CLASS[t]+" "+this.NXXXXX.PUBLIC_BACKGROUND_BODY_RECT_CLASS),s.on(this._backgroundBodyRectD3s[t].node(),"pointerdown"+e.NXXXXX.WIDGET_NAMESPACE,(function(){e._setActiveHorizontalBodyAreaIndex(t)}));for(t=0;t<=1;t++)this._backgroundBodyParentD3s[t]=this._backgroundBodyScrollParentD3.append("g").attr("class",this.NXXXXX.BACKGROUND_BODY_PARENT_CLASS[t]),this.options.isForExport&&!this._dbgClippath||this._backgroundBodyParentD3s[t].attr("clip-path","url(#"+this.NXXXXX.BODY_PARENT_CLIPPATH_ID[t]+this._uniqueID+")"),this._backgroundBodyD3s[t]=this._backgroundBodyParentD3s[t].append("g").attr("class",this.NXXXXX.BACKGROUND_BODY_CLASS[t])},_appendForeground:function(){var e=this;this._foregroundBodyParentD3s=[],this._foregroundBodyD3s=[],this._foregroundBodyScrollParentD3=this._svgRootD3.append("g").attr("class",this.NXXXXX.FOREGROUND_BODY_SCROLL_PARENT_CLASS),this.options.isForExport&&!this._dbgClippath||this._foregroundBodyScrollParentD3.attr("clip-path","url(#"+this.NXXXXX.BODY_CLIPPATH_ID+this._uniqueID+")");for(var t=0;t<=1;t++)this._foregroundBodyParentD3s[t]=this._foregroundBodyScrollParentD3.append("g").attr("class",this.NXXXXX.FOREGROUND_BODY_PARENT_CLASS[t]),this.options.isForExport&&!this._dbgClippath||this._foregroundBodyParentD3s[t].attr("clip-path","url(#"+this.NXXXXX.BODY_PARENT_CLIPPATH_ID[t]+this._uniqueID+")"),this._foregroundBodyD3s[t]=this._foregroundBodyParentD3s[t].append("g").attr("class",this.NXXXXX.FOREGROUND_BODY_CLASS[t]);this._foregroundAreaSeparatorD3=this._foregroundBodyScrollParentD3.append("rect").attr("class",this.NXXXXX.FOREGROUND_AREA_SEPARATOR_CLASS);this._phantomsBodyParentD3s=[],this._phantomsBodyD3s=[],this._phantomsBodyScrollParentD3=function(t,i,o,a,n,l){for(var r=e._svgRootD3.append("g").attr("class",o).attr("clip-path","url(#"+e.NXXXXX.BODY_CLIPPATH_ID+e._uniqueID+")"),s=0;s<=1;s++){var d=t[s]=r.append("g").attr("class",a[s]);l&&!e.options.isForExport&&d.attr("clip-path","url(#"+e.NXXXXX.BODY_PARENT_CLIPPATH_ID[s]+e._uniqueID+")"),i[s]=d.append("g").attr("class",n[s]),i[s].append("rect").attr("width",1).attr("height",1).attr("stroke-width",0).attr("fill","transparent")}return r}(this._phantomsBodyParentD3s,this._phantomsBodyD3s,this.NXXXXX.PHANTOMS_BODY_SCROLL_PARENT_CLASS,this.NXXXXX.PHANTOMS_BODY_PARENT_CLASS,this.NXXXXX.PHANTOMS_BODY_CLASS,!1)},_appendIOSScrollBars:function(){},_doResizeAfterUpdatedBodyHeight:function(e){var t=this,i="translate(0,"+(t._layoutRows[D.BodyAtTheTop].outerViewExtent()+t._actualBodyAreaSeparatorHeight())+")";e(t._backgroundBodyParentD3s[D.MainBody]).attr("transform",i),e(t._foregroundBodyParentD3s[D.MainBody]).attr("transform",i),null!=t._highlightedBodyParentD3s&&t._highlightedBodyParentD3s[D.MainBody]&&e(t._highlightedBodyParentD3s[D.MainBody]).attr("transform",i),null!=t._phantomsBodyParentD3s&&t._phantomsBodyParentD3s[D.MainBody]&&e(t._phantomsBodyParentD3s[D.MainBody]).attr("transform",i),e(t._backgroundBodyRectD3s[D.MainBody]).attr("transform",i),t.options.isForExport&&!t._dbgClippath||(e(t._bodyParentClipPathRectD3s[D.BodyAtTheTop]).attr("height",t._layoutRows[D.BodyAtTheTop].outerViewExtent()),e(t._bodyParentClipPathRectD3s[D.MainBody]).attr("height",t._layoutRows[D.MainBody].outerViewExtent()))},_resizeBodyViewsOverlaysHeight:function(e,t){for(var i=0;i<=1;i++)t[i]._setViewTopHeightWithAnimation(e,this._actualBodyViewTop(i),this._actualOuterBodyViewHeight(i))},_doResizeOverlaysHeightWithAnimation:function(){},_scrollTopsChanged:function(e,t,i,o,a,n){var l=this;if(null!=i&&null!=i[t]&&l._layoutRows[t].scrollStart()!==i[t]&&(a&&l._overlayAreas&&l._overlayAreas[e][t].scrollTop(i[t]),!o)){l._layoutRows[t].scrollStart(i[t]);var r="translate(0,"+-i[t]+")";l._backgroundBodyD3s[t].attr("transform",r),l._foregroundBodyD3s[t].attr("transform",r),null!=l._highlightedBodyD3s&&null!=l._highlightedBodyD3s[t]&&l._highlightedBodyD3s[t].attr("transform",r),null!=l._phantomsBodyD3s&&null!=l._phantomsBodyD3s[t]&&l._phantomsBodyD3s[t].attr("transform",r),n.changedFlag=!0,n.verticalScrolledFlag=!0,n.viewChangedFlags[e]=!0}},_getScrollOffsets:function(){},_scrollLeftsChanged:function(){},_triggerChangedEventAfterScrollOffsetsChanged:function(){this._provideViewRectsToWorldView()},_doRelativeScrollVer:function(e,t,i){var o=this,a=o._layoutRows[e].innerViewExtent(),n=i?a*t:t,l=o._cachedNewBodyScrollTops&&o._cachedNewBodyScrollTops[e]||o._layoutRows[e].scrollStart(),r=[];r[e]=Math.min(Math.max(0,o._layoutRows[e].extent()-a),Math.max(0,l-n)),r[e]!==l&&(o._scrollOffsetsChanged([void 0,void 0],r,!0,!0),o._scrollOffsetsChanged([void 0,void 0],r))},_doRelativeScrollHor:function(e,t,i){var o=this,a=null!=o._layoutColumns[e].innerViewExtent()?o._layoutColumns[e].innerViewExtent()*o._layoutColumns[e].scrollFactorFixed():o.getDefaultWidthForLayoutColumn(e),n=i?a*t:t,l=o._cachedNewScrollLefts&&o._cachedNewScrollLefts[e]||o._getHorViewScrollOffset(e),r=[];r[e]=Math.max(0,Math.min(o._actualScrollableWidth(e)-a,Math.max(0,l-n))),r[e]!==l&&(o._scrollOffsetsChanged(r,[void 0,void 0],!0,!0),o._scrollOffsetsChanged(r,[void 0,void 0]))},_actualBodyAreaSeparatorHeight:function(){return this._layoutRows[D.BodySeparator].outerViewExtent()},_actualInnerBodyViewHeightsSumWithSeparator:function(){return this._actualInnerRowViewHeight(D.BodyAtTheTop)+this._actualBodyAreaSeparatorHeight()+this._actualInnerRowViewHeight(D.MainBody)},_actualBodyHeightsSum:function(){return this._layoutRows[D.BodyAtTheTop].extent()+this._layoutRows[D.MainBody].extent()},_actualBodyViewsOffsetVer:function(){return this._actualLayoutRowsOffsetVer()+this._actualTitleHeight(y.top)+this._actualTitleAreaScrollBarWidth(y.top)},_actualLayoutColumnsOffsetHor:function(){return 0},_actualLayoutRowsOffsetVer:function(){return 0},_actualBodyViewTop:function(e){var t=this._actualBodyViewsOffsetVer();return e===D.MainBody&&(t+=this._actualBodyAreaSeparatorHeight()+this._actualOuterBodyViewHeight(D.BodyAtTheTop)),t},_actualInnerRowViewHeight:function(e){return this._layoutRows[e].innerViewExtent()},_actualOuterRowViewHeight:function(e){return this._layoutRows[e].outerViewExtent()},_actualInnerBodyViewBottom:function(e){return this._actualBodyViewTop(e)+this._actualInnerRowViewHeight(e)},_actualOuterBodyViewHeight:function(e){return this._layoutRows[e].outerViewExtent()},_actualOuterBodyViewBottom:function(e){return this._actualBodyViewTop(e)+this._actualOuterBodyViewHeight(e)},_actualLayoutColumnLeft:function(e){return this._actualLayoutColumnsOffsetHor()+this._layoutColumns[e].start()},_actualInnerLayoutColumnRight:function(e){return this._actualLayoutColumnLeft(e)+this._layoutColumns[e].innerViewExtent()},_actualOuterLayoutColumnRight:function(e){return this._actualLayoutColumnLeft(e)+this._layoutColumns[e].outerViewExtent()},_actualLayoutRowTop:function(e){return this._actualLayoutRowsOffsetVer()+this._layoutRows[e].start()},_actualInnerLayoutRowBottom:function(e){return this._actualLayoutRowTop(e)+this._layoutRows[e].innerViewExtent()},_actualOuterLayoutRowBottom:function(e){return this._actualLayoutRowTop(e)+this._layoutRows[e].outerViewExtent()},_actualTitleAreaTop:function(e){return this._actualLayoutRowTop(e+2)},_actualTitleAreaBottom:function(e){return this._actualTitleAreaTop(e)+this._actualTitleHeight(e)},_actualCompleteInnerViewWidth:function(){return this._layoutStacks[A.Columns].innerViewExtent()},_verSBLayoutColumn:function(){},getDefaultWidthForLayoutColumn:function(){},_innerClientXToLayoutColumn:function(){},_innerClientYToBodyAreaIndex:function(e){for(var t=0;t<=1;t++)if(e>=this._actualBodyViewTop(t)&&e<this._actualInnerBodyViewBottom(t))return t},_getAllContentOverlaysForLayoutColumn:function(e){for(var t=[],i=0;i<=3;i++){var o=this._overlayAreas?.[e]?.[i]?.getContentOverlays();o&&t.push(...o)}return t},_setViewWidth:function(e,t){this._layoutColumns[e].innerViewExtent(t)},_calcInnerBodyViewAndSeparatorHeights:function(e){var t=e.slice();if(this._overlayAreas){var i=this._verSBLayoutColumn();t[D.MainBody]=this._overlayAreas[i][D.MainBody]._calcOverlayHeightByOverflow(t[D.MainBody]),t[D.MainBody]<0&&(t[D.MainBody]=0)}return t},_calcInnerViewWidths:function(e){var t=e.slice();if(this._overlayAreas){var i=this._verSBLayoutColumn();t[i]=this._overlayAreas[i][D.MainBody]._calcOverlayWidthByOverflow(t[i]),t[i]<0&&(t[i]=0)}return t},_extendCallbackArgs:function(e){return e[this.NXXXXX.WIDGET_PROPERTYNAME_IN_CALLBACKS]=this,e},_registerTapEvents:function(e,t,i){var o=this,a=function(e,i,a){var n=Object.assign({},t,{elem:e,hammerEvent:i,event:i.srcEvent,eventType:i.type});o._triggerEvent(n),a&&a[i.type]&&a[i.type].call(o,i)},n=e.attr("class");null!=n&&""!==n?n+=" ":n="",n+=d.TAP_EVENT_CLASS_NAME+" "+d.DOUBLE_TAP_EVENT_CLASS_NAME,e.attr("class",n),e.node()[d.HANDLER_FUNCTION_PROPERTY+o._EVENT_NAMESPACE]=function(e){try{switch(e.type){case d.TAP_EVENT_NAME:o._temporaryMarkVisible=void 0,a(this,e,i);break;case d.DOUBLE_TAP_EVENT_NAME:a(this,e,i)}}catch(e){o._handleException(e,"_registerTapEvents")}}},_titleVisible:function(e){return this._layoutRows[e+2].outerViewExtent()>0},_actualTitleHeight:function(e){return this._titleVisible(e)?this._layoutRows[e+2].outerViewExtent():0},_actualScrollBarWidth:function(){return this.options.isForExport?0:u.scrollBarWidth()},_actualBodyViewScrollBarWidth:function(e){return e?this._titleVisible(y.bottom)?0:this._actualScrollBarWidth():0},_actualTitleAreaScrollBarWidth:function(e){return e&&this._titleVisible(y.bottom)?this._actualScrollBarWidth():0},_calcBodyViewAndSeparatorHeights:function(e){var t=[],i=this._actualScrollBarWidth();this._overlayAreas&&["auto","scroll"].indexOf(o.select(this._overlayAreas[this._verSBLayoutColumn()][D.MainBody].overlayParentElem()).style("overflow-x"))<0&&(i=0);var a=this.options.isForExport?1:this.options.maximumTopBodyViewAreaHeightRatio;t[D.BodyAtTheTop]=this.options.topBodyViewAreaVisible&&a?this._layoutRows[D.BodyAtTheTop].extent():0,t[D.MainBody]=!this.options.commonBodyViewAreaVisible&&this.options.topBodyViewAreaVisible&&a?0:this._layoutRows[D.MainBody].extent(),t[D.BodySeparator]=t[D.BodyAtTheTop]&&t[D.MainBody]?this._horizontalBodyAreaSeparatorHeight:0;var n=Math.max(0,e-this._actualTitleHeight(y.top)-t[D.BodySeparator]-i-this._actualTitleHeight(y.bottom));return t[D.MainBody]&&t[D.BodyAtTheTop]?a>0?(t[D.BodyAtTheTop]=Math.min(Math.floor(n*a),t[D.BodyAtTheTop]),t[D.MainBody]=Math.max(0,n-t[D.BodyAtTheTop])):(t[D.MainBody]=Math.min(Math.floor(n*-a),t[D.MainBody]),t[D.BodyAtTheTop]=Math.max(0,n-t[D.MainBody])):t[D.BodyAtTheTop]?t[D.BodyAtTheTop]=n:t[D.MainBody]=n,this._titleVisible(y.bottom)||(t[D.MainBody]+=i),t},_ignoreNextScrollEvents:function(){},preparePageForPrinting:function(e,t){var i=this;if(t)t.currentPageNumber++,t.currentPageX++,t.currentPageX>t.maxPageX&&(t.currentPageX=1,t.currentPageY+=1);else{switch((t={zoomFactor:1,currentPageX:1,currentPageY:1,currentPageNumber:1,now:new Date}).completeWidth=this.totalWidth(),t.completeHeight=this.totalHeight(),t.unscaledPrintableWidth=e.pageWidth-e.margins.left-e.margins.right,e.printingMode){case 0:t.repeatedWidth=0,t.repeatedHeight=0,t.scrollableWidth=t.completeWidth,t.scrollableHeight=t.completeHeight,t.margins={left:e.margins.left,top:e.margins.top,right:e.margins.right,bottom:e.margins.bottom},t.pageWidth=t.completeWidth+t.margins.left+t.margins.right,t.pageHeight=t.completeHeight+t.margins.top+t.margins.bottom,t.contentWidth=t.printableWidth=t.completeWidth,t.contentHeight=t.printableHeight=t.completeHeight,t.maxPageX=1,t.maxPageY=1,t.maxPageNumber=1;break;case 1:case 2:1===e.printingMode?(t.repeatedWidth=0,t.repeatedHeight=0):(t.repeatedWidth=this._calcRepeatedWidthForPrinting(),t.repeatedHeight=this._calcRepeatedHeightForPrinting()),t.scrollableWidth=t.completeWidth-t.repeatedWidth,t.scrollableHeight=t.completeHeight-t.repeatedHeight,e.zoomFactorInPercent&&e.zoomFactorInPercent>0&&(t.zoomFactor=100/e.zoomFactorInPercent);var o=function(e,t,i,o,a,n){if(e&&e>0)return(t/e+i+1)/(o-a-n)},a=o(e.horPageCountLimit,t.scrollableWidth,t.repeatedWidth,e.pageWidth,e.margins.left,e.margins.right)||t.zoomFactor,n=o(e.verPageCountLimit,t.scrollableHeight,t.repeatedHeight,e.pageHeight,e.margins.top,e.margins.bottom)||t.zoomFactor,l=Math.max(a,n);if(2===e.printingMode){var r=function(e,t,i,o,a){if(e&&e>0){var n=i-o-a;return t/(Math.max(e,50)/100*n)}},s=r(e.maxTableWidthInPercent||50,t.repeatedWidth,e.pageWidth,e.margins.left,e.margins.right)||t.zoomFactor,d=r(e.maxTitlesHeightInPercent||50,t.repeatedHeight,e.pageHeight,e.margins.top,e.margins.bottom)||t.zoomFactor;l=Math.max(l,s,d)}l>t.zoomFactor&&(t.zoomFactor=l),t.margins={left:e.margins.left*t.zoomFactor,top:e.margins.top*t.zoomFactor,right:e.margins.right*t.zoomFactor,bottom:e.margins.bottom*t.zoomFactor},t.pageWidth=e.pageWidth*t.zoomFactor,t.pageHeight=e.pageHeight*t.zoomFactor,t.printableWidth=t.pageWidth-t.margins.left-t.margins.right,t.printableHeight=t.pageHeight-t.margins.top-t.margins.bottom,t.contentWidth=t.printableWidth-t.repeatedWidth,t.contentHeight=t.printableHeight-t.repeatedHeight,t.maxPageX=Math.ceil(t.scrollableWidth/t.contentWidth),t.maxPageY=Math.ceil(t.scrollableHeight/t.contentHeight),t.maxPageNumber=t.maxPageX*t.maxPageY}this._svgOuterFrameD3.style("width",t.pageWidth+"px"),this._svgOuterFrameD3.style("height",t.pageHeight+"px"),this._svgInnerFrameD3.attr("transform","translate("+t.margins.left+","+t.margins.top+")"),this._innerFrameClipPathRectD3s.attr("width",t.printableWidth).attr("height",t.printableHeight),this._svgInnerFrameD3.attr("clip-path","url(#"+this.NXXXXX.INNER_FRAME_CLIPPATH_ID+this._uniqueID+")"),this._appendFrameLinesForPrinting(e,t),t.zoomFactor/=e.outerScaleFactor,this._svgOuterFrameD3.style("transform","scale("+1/t.zoomFactor+")"),this._svgRootD3.remove(),t.elementRect=this._svgInnerFrameD3.node().getBoundingClientRect(),this._svgInnerFrameD3.append((function(){return i._svgRootD3.node()}))}switch(this._setTextsForPrinting(e,t),e.printingMode){case 0:this._elementWidth===t.printableWidth&&this._elementHeight===t.printableHeight||(this._elementWidth=this._mainWidth=t.printableWidth,this._elementHeight=this._mainHeight=t.printableHeight,this._doResize());break;case 1:this._elementWidth===t.completeWidth&&this._elementHeight===t.completeHeight||(this._elementWidth=this._mainWidth=t.completeWidth,this._elementHeight=this._mainHeight=t.completeHeight,this._doResize());var _=(t.currentPageX-1)*t.contentWidth,c=(t.currentPageY-1)*t.contentHeight;this._svgRootD3.attr("transform","translate("+-_+","+-c+")"),this._positionWatermarks(_,c,t.contentWidth,t.contentHeight),this._hideInvisiblesForPrinting(e,t);break;case 2:var h,u,p=this._verSBLayoutColumn(),m=D.MainBody,f=[],w=[];t.currentPageX===t.maxPageX||t.currentPageY===t.maxPageY?(this._elementWidth=this._mainWidth=t.printableWidth,t.currentPageX===t.maxPageX&&(this._elementWidth=this._mainWidth=t.completeWidth-(t.currentPageX-1)*t.contentWidth),this._elementHeight=this._mainHeight=t.printableHeight,t.currentPageY===t.maxPageY&&(this._elementHeight=this._mainHeight=t.completeHeight-(t.currentPageY-1)*t.contentHeight),this._doResize(),h=(t.currentPageX-1)*t.contentWidth,t.currentPageX===t.maxPageX&&(h=this._layoutColumns[p].extent()-1),u=(t.currentPageY-1)*t.contentHeight,t.currentPageY===t.maxPageY&&(u=this._layoutRows[m].extent()-1),f[p]=h,w[m]=u,this._scrollTo(f,w),t.currentPageX===t.maxPageX&&(h=this._layoutColumns[p].scrollStart()),t.currentPageY===t.maxPageY&&(u=this._layoutRows[m].scrollStart())):(this._elementWidth===t.printableWidth&&this._elementHeight===t.printableHeight||(this._elementWidth=this._mainWidth=t.printableWidth,this._elementHeight=this._mainHeight=t.printableHeight,this._doResize()),h=(t.currentPageX-1)*t.contentWidth,u=(t.currentPageY-1)*t.contentHeight,f[p]=h,w[m]=u,this._scrollTo(f,w)),this._positionWatermarks(t.repeatedWidth,t.repeatedHeight,t.contentWidth,t.contentHeight),this._hideInvisiblesForPrinting(e,t)}return t},_calcRepeatedWidthForPrinting:function(){return 0},_calcRepeatedHeightForPrinting:function(){return this._layoutRows[D.TopTitle].extent()+this._layoutRows[D.BottomTitle].extent()},_hideInvisiblesForPrinting:function(e,t){1===e.printingMode&&(this._hideInvisiblesForPrintingAtLast(e,t,"."+this.NXXXXX.TITLE_CLASS[y.top]),this._hideInvisiblesForPrintingAtLast(e,t,"."+this.NXXXXX.TITLE_CLASS[y.bottom]))},_hideInvisiblesForPrintingAtLast:function(e,t,i){var a=t.elementRect.left,n=t.elementRect.top,l=a+Math.max(t.contentWidth||0,t.completeWidth)/t.zoomFactor,r=n+Math.max(t.contentHeight||0,t.completeHeight)/t.zoomFactor;this._svgRootD3.selectAll(i).each((function(){var e=this.getBoundingClientRect();e.right<a||e.left>l||e.bottom<n||e.top>r?o.select(this).attr("visibility","hidden"):o.select(this).attr("visibility",null)}))},_appendFrameLinesForPrinting:function(e,t){if(this._svgOuterFrameD3){this._frameLinesParentD3=this._svgOuterFrameD3.append("g").attr("class",this.NXXXXX.FRAME_LINES_PARENT_CLASS);var i=t.margins.left,o=t.margins.top,a=t.margins.right,n=t.margins.bottom,l=t.pageWidth,r=t.pageHeight,s=20*t.zoomFactor;(o>s||n>s)&&(o>s&&(e.topHTML?(this._frameAreaDivD3s||(this._frameAreaDivD3s={},this._frameAreaImageD3s={}),this._frameAreaDivD3s.top=this._elementD3.append("div").attr("class",this.NXXXXX.FRAME_AREA_DIV_TOP_CLASS).style("width",t.unscaledPrintableWidth+"px").style("height",e.margins.top+"px").style("font-family",this._elementD3.style("font-family")).style("font-size",this._elementD3.style("font-size")),this._frameAreaImageD3s.top=this._frameLinesParentD3.append("image").attr("class",this.NXXXXX.FRAME_IMAGE_CLASS).attr("x",i).attr("y",0).attr("width",t.printableWidth+"px").attr("height",o+"px")):e.topText&&(this._textD3s||(this._textD3s={}),this._textD3s.top=this._frameLinesParentD3.append("text").attr("class",this.NXXXXX.FRAME_TEXT_CLASS).style("font-family",this._elementD3.style("font-family")).attr("dy","0.3em").attr("transform","translate("+l/2+","+o/2+"), scale("+t.zoomFactor+")"))),n>s&&(e.bottomHTML?(this._frameAreaDivD3s||(this._frameAreaDivD3s={},this._frameAreaImageD3s={}),this._frameAreaDivD3s.bottom=this._elementD3.append("div").attr("class",this.NXXXXX.FRAME_AREA_DIV_BOTTOM_CLASS).style("width",t.unscaledPrintableWidth+"px").style("height",e.margins.bottom+"px").style("font-family",this._elementD3.style("font-family")).style("font-size",this._elementD3.style("font-size")),this._frameAreaImageD3s.bottom=this._frameLinesParentD3.append("image").attr("class",this.NXXXXX.FRAME_IMAGE_CLASS).attr("x",i).attr("y",r-n).attr("width",t.printableWidth+"px").attr("height",n)):e.bottomText&&(this._textD3s||(this._textD3s={}),this._textD3s.bottom=this._frameLinesParentD3.append("text").attr("class",this.NXXXXX.FRAME_TEXT_CLASS).style("font-family",this._elementD3.style("font-family")).attr("dy","0.3em").attr("transform","translate("+l/2+","+(r-n/2)+"), scale("+t.zoomFactor+")")))),e.cutMarksVisible&&(this._cuttingMarksD3s||(this._cuttingMarksD3s=[],i>0&&o>0&&(this._cuttingMarksD3s[0]=this._frameLinesParentD3.append("line").attr("class","ngantt-cutting-mark").attr("x1",i).attr("x2",i).attr("y1",0).attr("y2",o),this._cuttingMarksD3s[1]=this._frameLinesParentD3.append("line").attr("class","ngantt-cutting-mark").attr("x1",0).attr("x2",i).attr("y1",o).attr("y2",o)),i>0&&n>0&&(this._cuttingMarksD3s[2]=this._frameLinesParentD3.append("line").attr("class","ngantt-cutting-mark").attr("x1",i).attr("x2",i).attr("y1",r-n).attr("y2",r),this._cuttingMarksD3s[3]=this._frameLinesParentD3.append("line").attr("class","ngantt-cutting-mark").attr("x1",0).attr("x2",i).attr("y1",r-n).attr("y2",r-n)),a>0&&o>0&&(this._cuttingMarksD3s[4]=this._frameLinesParentD3.append("line").attr("class","ngantt-cutting-mark").attr("x1",l-a).attr("x2",l-a).attr("y1",0).attr("y2",o),this._cuttingMarksD3s[5]=this._frameLinesParentD3.append("line").attr("class","ngantt-cutting-mark").attr("x1",l-a).attr("x2",l).attr("y1",o).attr("y2",o)),a>0&&n>0&&(this._cuttingMarksD3s[6]=this._frameLinesParentD3.append("line").attr("class","ngantt-cutting-mark").attr("x1",l-a).attr("x2",l-a).attr("y1",r-n).attr("y2",r),this._cuttingMarksD3s[7]=this._frameLinesParentD3.append("line").attr("class","ngantt-cutting-mark").attr("x1",l-a).attr("x2",l).attr("y1",r-n).attr("y2",r-n))))}},_textReplacements:function(e,t){return t=(t=t.replace("{{#PageNo}}",e.currentPageNumber)).replace("{{#PageCount}}",e.maxPageNumber)},_setTextsForPrinting:function(e,t){this._textD3s&&(this._textD3s.top&&this._textD3s.top.text(this._textReplacements(t,e.topText)),this._textD3s.bottom&&this._textD3s.bottom.text(this._textReplacements(t,e.bottomText)))},prepareFrameAreas:function(e,t){var o=this,a=new Promise(((a,n)=>{var l=self&&self.html2canvas?self.html2canvas:i.m.null,s=[];if(l&&o._frameAreaDivD3s){var d=function(e,i,a,n,d){if(e&&i){r.assert(l,"saveAsPDF: html2canvas library not loaded");var _=e.node();_.innerHTML=o._textReplacements(t,i);var c,h,u=Array.from(_.querySelectorAll("*"));if("file:"===document.location.protocol&&u.forEach((e=>{let t={img:"src",image:"href"}[e.nodeName.toLowerCase()];if(t){let i=e.getAttribute(t);!i||i.match(/^[a-zA-Z0-9]+:/)&&!i.startsWith("file:")||e.setAttribute(t,"")}})),a>(c=h=32767)||n>h){var p=a/n;p>1?h/=p:p<1&&(c/=p),a>c&&(a=c,n=p>1?n/p:n*p),n>h&&(n=h,a=p>1?a/p:a*p)}let m=l(_,{ignoreElements:e=>!e.contains(_)&&!u.includes(e),width:a,height:n}).then((e=>new Promise(((t,i)=>{d.call(o,e),t()}))));s.push(m)}};d(o._frameAreaDivD3s.top,e.topHTML,t.unscaledPrintableWidth,e.margins.top,(function(e){try{o._frameAreaImageD3s.top.attr("href",e.toDataURL("image/png"))}catch(e){o.options.handleWarningFunc?.(E.HTML_CANVAS_FAILED_ON_PRINTING,{name:"topHTML",message:e.message})}})),d(o._frameAreaDivD3s.bottom,e.bottomHTML,t.unscaledPrintableWidth,e.margins.bottom,(function(e){try{o._frameAreaImageD3s.bottom.attr("href",e.toDataURL("image/png"))}catch(e){o.options.handleWarningFunc?.(E.HTML_CANVAS_FAILED_ON_PRINTING,{name:"bottomHTML",message:e.message})}}))}Promise.all(s).then((()=>{a()}),(e=>{n(e)}))}));return a.ID="Converter-Promise-"+t.currentPageNumber,a},_positionWatermarks:function(e,t,i,a){var n=this;[n.options.watermarkURL,n.options.isForExport?n.options.exportWatermarkURL:void 0].forEach((l=>{if(l&&"///"===l.substring(0,3)){var r=o.select("#"+l.substring(3)),s=r.node().getAttribute("data-originalwidth")??1,d=r.node().getAttribute("data-originalheight")??1,_=i/s||1,c=a/d,h=n.options.watermarkScale||Math.min(_,c),u=e+(i-s*h)/2||0,p=t+(a-d*h)/2;n._backgroundWatermarkParentD3.select(":scope > *").attr("transform",`translate(${u},${p}) scale(${h})`),n._backgroundWatermarkParentD3.attr("transform","translate(0,0)")}}))},_isActiveHorizontalBodyAreaIndex:function(e){return e===this._activeHorizontalBodyAreaIndex},_setActiveHorizontalBodyAreaIndex:function(e){var t=this;let i=t._activeHorizontalBodyAreaIndex!==e;t._activeHorizontalBodyAreaIndex=e,i&&t.options.worldViewVisible&&t._provideViewRectsToWorldView()}},L=n.extendClass("nBaseWidget",m,X);L._UpdateCause=T,L._VirtualizationUpdateCause=C,L._RowItemVirtualizationStatus=R,e.exports=L},199:e=>{var t={ElemType:{Row:1,GroupCell:2,TableCell:3,TableCellText:7,TableRow:8,LeavesIndicator:17},TableRowDefinitionType:{BaseLevel:1,GroupingLevel:2,FixedColumnsPreceding:4,FixedColumnsSucceeding:8,FromCallback:16,Map:32,LeafDefault:64},HorizontalAlignment:{Left:0,Center:1,Right:2},VerticalAlignment:{FirstLineOnBaseline:0,AllLinesCenteredAroundBaseline:1},TableCellType:{Text:1,Number:2,Date:3,ImageList:4},RowInteractions:{None:0,DragVertically:8,MoveOutside:32,DragOnSameLevelOnly:64,DragInSameTableParentOnly:128},RowInsertionMode:{None:0,InsertAsChild:1,InsertAsNextSibling:2,InsertAsPreviousSibling:3},PatternType:{VerticalHatch:0,ForwardHatch:1,BackwardHatch:2},_DefaultRowOpacity:.3,WarningBias:3e3,WarningCode:{HTML_CANVAS_FAILED_ON_PRINTING:3e3}};e.exports=t},651:(e,t,i)=>{var o=i(199).RowInteractions;var a={CELL_X_PROPERTY:"ntable-xOffset",ASYNC_WAIT_PATTERN_EXTENT:40,ASYNC_WAIT_PATTERN_ROTATED_EXTENT:Math.sqrt(3200),COLLAPSED_SCALE:"scale(1,1e-6)",VER_LINE_X_PIXEL_OFFSET:-.5,ABS_VER_LINE_X_PIXEL_OFFSET:.5,HOR_LINE_Y_PIXEL_OFFSET:.5,VER_EXTENT_X_PIXEL_OFFSET:-1,VER_LINE2_X_PIXEL_OFFSET:-.5,_UpdateCause:{Other:0,RowItemsChanged:1,RowItemsRootChanged:3,ScrollToRow:9,Virtualization:101,RowCollapsed:102,RowExpanded:103,WorldView:104,RowLeavesCollapsed:105,RowLeavesExpanded:106,AncestorsNeeded:107,BeforeRowCollapse:108},_RowItemVirtualizationStatus:{Unrealized:0,Precalculated:1,Visible:2,Invisible:3},LayoutRow:{Unknown:-1,BodyAtTheTop:0,MainBody:1,TopTitle:2,BottomTitle:3,BodySeparator:4},LayoutColumn:{Table:0},LayoutElements:{Columns:"Columns",Rows:"Rows"},TitleArea:{top:0,bottom:1},_RowInteractions:{_AllSupportedFlags:o.DragVertically|o.MoveOutside|o.DragOnSameLevelOnly|o.DragInSameTableParentOnly}};a._VirtualizationUpdateCause={RowCollapsed:a._UpdateCause.RowCollapsed,RowExpanded:a._UpdateCause.RowExpanded,RowLeavesCollapsed:a._UpdateCause.RowLeavesCollapsed,RowLeavesExpanded:a._UpdateCause.RowLeavesExpanded,OptionChanged:10,ScrolledVertically:11,ViewResized:12},e.exports=a},307:(e,t,i)=>{var o=i(680),a=i(571),n=a.nDroppableWidget,l=a.nEventDispatcher,r=a.nCursorHelper,s=i(199),d=s.ElemType,_=s.RowInsertionMode,c=s.RowInteractions,h=i(651).LayoutRow,u="ntable-row-phantom-level",p="ntable-row-phantom-parent",m="ntable-row-phantom_child_symbol",f="ntable-row-phantom_down_symbol",w="ntable-row-phantom_insertion_link",E="ntable-row-phantom_insertion_symbol",g="ntable-row-phantom_insertion-parent_symbol",T="ntable-row-phantom_up_symbol",R="ntable-row-phantom_symbol",C=function(e,t){this._tableBaseWidget=e,this._options={...t},this._isInitiated=!1,this._rowPhantomXDisplacement=20,this._sourceHorizontalBodyAreaIndex=1,this._draggedFuncPromiseCounter=0,this._draggedFuncPromiseMinimumCount=0};Object.assign(C.prototype,{destroy:function(){this._reset()},setOption:function(e,t){this._options[e]=t},isInitiated:function(){return this._isInitiated},isActive:function(){return this._isInitiated&&this._isActive},isFromOutside:function(){return!this.isActive()&&(null==this._interaction||this._interaction&c.MoveOutside)},isDropped:function(){return this._isInitiated&&this._isDropped},isAutomaticRowExpansionEnabled:function(){return this._isInitiated&&this._isAutomaticRowExpansionEnabled},directlyDraggedRowDataItem:function(){return this._draggedRowDataItems?.[0]},maximumLevelToExpand:function(){return this.isActive()&&this._interaction&(c.DragOnSameLevelOnly|c.DragInSameTableParentOnly)?this._rowDataItem.level:Number.MAX_VALUE},_setDropAllowed:function(e,t,i){var o=this;o._dropAllowed=e;let a=e||t&&(i&(c.DragVertically|c.MoveOutside))===c.MoveOutside;r.setCursor(o._tableBaseWidget.element(),a?o._options.interactionCursor:"no-drop")},initiate:function(e,t,i){var o=this;if(!o._isInitiated){var a=o._options.getActualRowInteractionsFunc(t);if(a){o._options.onEventFunc&&o._options.onEventFunc.call(o,{sender:null,eventType:"tooltip",event:e.srcEvent,hammerEvent:e}),o._createTableRowPhantom(e,t,a),o._draggedFuncPromiseMinimumCount=o._draggedFuncPromiseCounter,o._options.setRowInteractionCursorFunc(a);var l={senderWidget:o._tableBaseWidget,event:e.srcEvent||e,pageX:e.center.x,pageY:e.center.y+o._offsetY,draggable:o._tableBaseWidget.element(),objectType:"netronic_rowItem",object:t.item,dragMode:"copy"};if(o._options.dragStartFunc){var r={sender:t.item,elemType:d.Row,interaction:a,event:e.srcEvent||e,cancel:!1};try{o._options.dragStartFunc.call(o,r)}catch(t){throw o.terminate(e,!0),t}}if(!r.cancel)try{o._tableBaseWidget.element().dispatchEvent(new CustomEvent(n.DRAG_ENTER_EVENT_NAME,{detail:l}))}catch(t){throw o.terminate(e,!0),t}if(r.cancel)return void o.terminate(e,!0);l.dropAllowed=!1,l.interaction=a&c.DragVertically,l.rowInsertionMode=_.None;try{if(o._tableBaseWidget.element().dispatchEvent(new CustomEvent(n.DRAG_OVER_EVENT_NAME,{detail:l})),"function"==typeof l.promise?.then){l.dropAllowed=void 0;let t=++o._draggedFuncPromiseCounter;l.promise.then((e=>{t>=o._draggedFuncPromiseMinimumCount&&(o._draggedFuncPromiseMinimumCount=t),e&&e.dropAllowed!==o._dropAllowed&&o._setDropAllowed(e.dropAllowed,!0,a)})).catch((()=>{o.terminate(e,!0)}))}}catch(t){throw o.terminate(e,!0),t}return o._setDropAllowed(l.dropAllowed??o._dropAllowed,!0,a),o._isActive=i,o._pointerType=e.pointerType,!0}}},_createTableRowPhantom:function(e,t,i){var a,n,l=this,r=o.select(l._options.getPhantomReferenceElemFunc(t));if(u=l._tableBaseWidget.NXXXXX.WIDGET_ABBREVIATION+"-row-phantom-level",i&(c.DragVertically|c.MoveOutside)&&(a=l._options.getMinimumRowHeightFunc(t),n={phantomType:d.Row,rowDataItem:t,pointerStartCenter:e.center,version:1,minimumRowHeight:a},t.phantomDataItem=n,r.style("opacity",1).style("will-change","opacity"),function e(){if(l.isInitiated()){let i=o.select(l._options.getPhantomReferenceElemFunc(t));t.phantomDataItem?i.size()?i.transition("opacity").duration(l._options.phantomTransitionDuration).style("opacity",parseFloat(i.style("opacity"))===s._DefaultRowOpacity?1:s._DefaultRowOpacity).on("end",e):window.setTimeout(e,l._options.phantomTransitionDuration):i.transition("opacity").duration(l._options.phantomTransitionDuration).style("opacity",1).style("will-change","auto")}}()),i&c.DragVertically){var _=r.node().cloneNode(!0),h=o.select(_).attr("clip-path",null),C=h.select("."+l._tableBaseWidget.NXXXXX.FIXED_TABLE_ROW_PRECEDING_CLASS);l._symbolColumnWidth=C.size()?C.select("."+l._tableBaseWidget.NXXXXX.TABLE_CELL_BACKGROUND_RECT_CLASS).attr("width"):0;var I=t.level*l._tableBaseWidget.options.groupCellWidth;h.select("."+l._tableBaseWidget.NXXXXX.TABLE_ROW_BACKGROUND_RECT_CLASS).attr("class","ntable-row-phantom-background ntable-row-phantom-shadow").attr("width",l._tableBaseWidget.actualTableWidth()-l._symbolColumnWidth-I).attr("height",a),C.remove(),h.select("."+l._tableBaseWidget.NXXXXX.FIXED_TABLE_ROW_SUCCEEDING_CLASS).remove(),h.selectAll("."+l._tableBaseWidget.NXXXXX.SELECTED_ROW_CLASS).remove(),h.selectAll("."+l._tableBaseWidget.NXXXXX.TABLE_GROUP_CELL_CLASS).remove(),h.selectAll("."+l._tableBaseWidget.NXXXXX.SEPARATION_LINE_CLASS).remove(),h.attr("transform",`translate(${-l._symbolColumnWidth})`);var D=h.select("."+l._tableBaseWidget.NXXXXX.SCROLLABLE_TABLE_ROW_CLASS);D.attr("transform",`translate(${-I})`),o.select(D.node().parentNode).attr("clip-path",null);var v=l._options.getOrCreateClipPathForRowPhantomFunc();l._tableBaseWidget._defsD3.select("#"+v+" rect").attr("x",-l._options.phantomFrameDistance).attr("y",-l._options.phantomFrameDistance).attr("width",l._tableBaseWidget.actualTableWidth()+2*l._options.phantomFrameDistance-I+7).attr("height",a+2*l._options.phantomFrameDistance+7),h.attr("clip-path","url(#"+v+")"),l._sourceHorizontalBodyAreaIndex=l._options.determineBodyAreaIndexFunc(t);var A=l._options.getScrollablePhantomsBodyD3Func(l._sourceHorizontalBodyAreaIndex),y=A.append("g").classed(`${p} ${u}${t.level}`,!0);y.append((()=>_)),y.attr("transform",`translate(${+l._symbolColumnWidth+I}, ${t.newY})`);var b=l._options.pointToSVGRelativeFunc(y.node(),e.center.x,e.center.y);y.transition("transform").duration(l._options.phantomTransitionDuration).attr("transform",`translate(${+l._symbolColumnWidth+I+b.x+l._rowPhantomXDisplacement}, ${t.newY+b.y-a/2})`),n.rowPhantomParent=y.node(),n.frameD3=y.append("g"),y.append("rect").attr("class","ntable-row-phantom").attr("x",-l._options.phantomFrameDistance).attr("y",-l._options.phantomFrameDistance).attr("rx",l._options.phantomFrameRounding).attr("ry",l._options.phantomFrameRounding).attr("height",a+2*l._options.phantomFrameDistance).attr("width",l._tableBaseWidget.actualTableWidth()+2*l._options.phantomFrameDistance-l._symbolColumnWidth-I);var S=y.append("g").attr("class",R);let i="translate(0,-10)";S.append("text").attr("class","ntable-row-phantom_symbol_background").attr("y",-10).text("●"),S.append("text").attr("class",m).attr("dy","0.2em").attr("transform",`${i}scale(0.4)`).attr("visibility","hidden").text("↳"),S.append("text").attr("class",T).attr("dy","0.3em").attr("transform",`${i}scale(0.3)`).attr("visibility","hidden").text("▲"),S.append("text").attr("class",f).attr("dy","0.5em").attr("transform",`${i}scale(0.3)`).attr("visibility","hidden").text("▼");var X=A.insert("g",`.${p}`).attr("class",g).attr("visibility","hidden");X.append("line").attr("class",E).attr("x1",0).attr("x2",l._tableBaseWidget.actualTableViewWidth()).attr("y1",-1).attr("y2",-1),X.append("line").attr("class",E).attr("x1",0).attr("x2",l._tableBaseWidget.actualTableViewWidth()).attr("y1",1).attr("y2",1),X.append("line").attr("class",w).attr("x1",l._tableBaseWidget.actualTableViewWidth()).attr("y1",0),X.append("path").attr("class",E).attr("d","M0,0v-6l6,6l-6,6Z")}l._oldTableHorScrollOffset=l._tableBaseWidget.horizontalTableViewScrollOffset(),o.select(l).transition().duration(500).tween("Up",(function(){var e=o.interpolate(l._tableBaseWidget.horizontalTableViewScrollOffset(),0);return function(t){l._tableBaseWidget.scrollTo(e(t))}})),l._isInitiated=!0,l._isAutomaticRowExpansionEnabled=!0,l._draggedRowDataItems=[t],l._rowDataItem=t,l._elemType=d.Row,l._isActive=!1,l._elemType=d.Row,l._interaction=i,l._lastTargetWidgetElem=l._tableBaseWidget.element();var L=l._options.pointToSVGRelativeFunc(t.foregroundRowElem,e.center.x,e.center.y);l._offsetY=t.totalHeight/2-L.y,l._dropAllowed=!0},handleDragWithTerminationCheck:function(){var e=this;e._options.getActualRowInteractionsFunc(e._draggedRowDataItems?.[0])===c.None?e.terminate(void 0,!0):e.handleDrag()},handleDrag:function(e){var t=this,i=t._draggedRowDataItems?.[0],o=i?.phantomDataItem;if(t.isAutomaticRowExpansionEnabled()){var a=e||t._dragRowPhantomHammerEvent;a&&t._options.checkForAutomaticRowExpansionFunc(a.center.x,a.center.y,i,t.maximumLevelToExpand(),!0)}var l,r=!e;if(e)t._dragRowPhantomHammerEvent=e,delete t._shiftKeyIsDown;else if(!(e=t._dragRowPhantomHammerEvent))return;[...document.querySelectorAll("."+n.NDROPPABLE_CLASS)].some((function(t){var i=t.getBoundingClientRect();if(i.left<=e.center.x&&i.right>e.center.x&&i.top<=e.center.y&&i.bottom>e.center.y)return l=t,!0})),t._interaction&(l===t._tableBaseWidget.element()?c.DragVertically:c.MoveOutside)||(l=null),o&&l&&t._dragRowPhantom(e,o);let s=l?o?.rowInsertionMode??_.None:_.None,d=s!==_.None;if(!r||d!==t._dropAllowed){if(l){var h={senderWidget:t._tableBaseWidget,event:e.srcEvent,pageX:e.center.x,pageY:e.center.y,draggable:t._tableBaseWidget.element(),objectType:"netronic_rowItem",object:i?.item,dragMode:"copy"};if(t._lastTargetWidgetElem!==l){try{t._lastTargetWidgetElem?.dispatchEvent(new CustomEvent(n.DRAG_LEAVE_EVENT_NAME,{detail:{senderWidget:t._tableBaseWidget,event:e.srcEvent,draggable:t._tableBaseWidget.element(),objectType:"netronic_rowItem",object:i?.item}})),h.cancel=!1,l?.dispatchEvent(new CustomEvent(n.DRAG_ENTER_EVENT_NAME,{detail:h}))}catch(i){throw t.terminate(e,!0),i}t._lastTargetWidgetElem=l}else h.cancel=!1;if(l){if(!h.cancel){l===t._tableBaseWidget.element()?h.rowInsertionMode=s:d=!0,h.dropAllowed=d;try{if(l.dispatchEvent(new CustomEvent(n.DRAG_OVER_EVENT_NAME,{detail:h})),"function"==typeof h.promise?.then){h.dropAllowed=void 0;let i=++t._draggedFuncPromiseCounter;h.promise.then((e=>{i>=t._draggedFuncPromiseMinimumCount&&(t._draggedFuncPromiseMinimumCount=i),"boolean"==typeof e?.dropAllowed&&e.dropAllowed!==t._dropAllowed&&t._setDropAllowed(e.dropAllowed,!!l,t._interaction)})).catch((()=>{t.terminate(e,!0)}))}}catch(i){throw t.terminate(e,!0),i}}if(h.cancel)return void t.terminate(e,!0);d=h.dropAllowed}}t._setDropAllowed(d??t._dropAllowed,!!l,t._interaction)}},_dragRowPhantom:function(e,t){var i=this;i._isActive=!0;var a=t.rowDataItem;if(!i._isInitiated)return void(e[l.CANCEL_PROPERTY]=!0);t.rowInsertionMode=_.None;var n=i._options.getScrollablePhantomsBodyD3Func(i._sourceHorizontalBodyAreaIndex),r=i._options.pointToSVGRelativeFunc(n.node(),e.center.x,e.center.y),s=o.select(t.rowPhantomParent),d=o.select(`.${g}`),u=i._tableBaseWidget._findRowDataItemAtY(e.center.y);if((!u?.isDetailingRow||a.isDetailingRow)&&u?.foregroundRowElem){var p=!!(i._options.getActualRowInteractionsFunc(a)&c.DragOnSameLevelOnly),C=!p&&!!(i._options.getActualRowInteractionsFunc(a)&c.DragInSameTableParentOnly),I=r.x+i._rowPhantomXDisplacement,D=I<=i._tableBaseWidget.actualTableViewWidth();let o=i._shiftKeyIsDown??e.srcEvent.getModifierState("Shift");var v=i._lastTargetWidgetElem!=i._tableBaseWidget.element();t.rowInsertionMode=_.None;let n=function(e,t){let i=t;for(;i.level>e.level;)i=i.parentRowDataItem;return i===e},l=function(e,t){return t.level===e.level||t.level===e.level-1},g=function(e,t){return t.level===e.level?t.parentRowDataItem===e.parentRowDataItem:t.level===e.level-1?t===e.parentRowDataItem:void 0},R=a.isDetailingRow?"detailingRowDataItems":"childRowDataItems",N=u.foregroundRowElem.getBoundingClientRect(),W=i._options.determineBodyAreaIndexFunc(u);if(!u||v||C&&!g(a,u)||p&&!l(a,u)||n(a,u));else if((!p&&!C||u.level===a.level)&&e.center.y<=N.top+u.totalHeight/2*i._tableBaseWidget.options.visualZoomFactor){let e=u.parentRowDataItem[R];i._sourceHorizontalBodyAreaIndex===W&&e&&e[e.indexOf(u)-1]===a||(t.rowInsertionMode=_.InsertAsPreviousSibling)}else{var A=!1;if(p||C?u.level===a.level-1&&(A=!0):u.isCollapsed?o&&(A=!0):(o&&!u[R]?.length||!o&&u[R]?.length)&&(A=!0),A){let e=u[R];i._sourceHorizontalBodyAreaIndex===W&&e&&e.includes(a)||(t.rowInsertionMode=_.InsertAsChild)}else{let e=u.parentRowDataItem[R];i._sourceHorizontalBodyAreaIndex===W&&e&&e[e.indexOf(u)+1]===a||(t.rowInsertionMode=_.InsertAsNextSibling)}}if(a!==u&&(t.rowInsertionMode=i._options.checkRowInsertionModeFunc(a,u,t.rowInsertionMode)),t.rowInsertionMode!==_.None){var y=0;if(i._sourceHorizontalBodyAreaIndex!==W){var b=i._tableBaseWidget._layoutRows[h.BodyAtTheTop].outerViewExtent(),S=i._tableBaseWidget._layoutRows[h.BodyAtTheTop].scrollStart(),X=i._tableBaseWidget._layoutRows[h.MainBody].scrollStart(),L=i._tableBaseWidget._actualBodyAreaSeparatorHeight();y=i._sourceHorizontalBodyAreaIndex===h.MainBody?-b-S+X-L:b+-X+S+L}var x=u.level*i._tableBaseWidget.options.groupCellWidth,P=u.newY+y;if(t.rowInsertionMode!==_.InsertAsPreviousSibling)if(P+=u.totalHeight+1,t.rowInsertionMode===_.InsertAsChild)x+=i._tableBaseWidget.options.groupCellWidth;else if(u[R]&&t.rowInsertionMode===_.InsertAsNextSibling){for(var O=u;O&&!O.isCollapsed&&O[R]?.length;)O=O[R][O[R].length-1];O!==u&&(P=O.newY+O.totalHeight+y)}t.rowInsertionMode===_.InsertAsPreviousSibling?(s.select(`.${T}`).attr("visibility","visible"),s.selectAll(`.${f},.${m}`).attr("visibility","hidden"),d.attr("visibility","visible"),d.selectAll(`.${E}`).attr("x1",+i._symbolColumnWidth+x),d.selectAll(`.${w}`).attr("x2",D?i._tableBaseWidget.actualTableViewWidth():I).attr("y2",D?0:-P+r.y),d.selectAll("path").attr("transform",`translate(${+i._symbolColumnWidth+x})`)):t.rowInsertionMode===_.InsertAsChild?(s.selectAll(`.${T},.${f}`).attr("visibility","hidden"),s.select("."+m).attr("visibility","visible"),d.attr("visibility","visible")):t.rowInsertionMode===_.InsertAsNextSibling&&(s.selectAll(`.${T},.${m}`).attr("visibility","hidden"),s.select("."+f).attr("visibility","visible"),d.attr("visibility","visible")),P=Math.max(0,P-1),d.attr("transform",`translate(0,${P})`),d.selectAll(`.${E}`).attr("x1",+i._symbolColumnWidth+x),d.selectAll("path").attr("transform",`translate(${+i._symbolColumnWidth+x})`),d.selectAll(`.${w}`).attr("x2",D?i._tableBaseWidget.actualTableViewWidth():I).attr("y2",D?0:-(P-1)+r.y)}}t.rowInsertionMode===_.None&&(s.selectAll(`.${T},.${f},.${m}`).attr("visibility","hidden"),d.attr("visibility","hidden"));var N=i._options.getMinimumRowHeightFunc(a);let W=r.y-N/2;s.transition("transform"),s.attr("transform",`translate(${r.x+i._rowPhantomXDisplacement}, ${W})`);let B=W+-10<0?N:0;s.select(`.${R}`).attr("transform",`translate(0,${B})`)},handleKeyEvent:function(e){var t=this;"Shift"===e.key&&t.isActive()&&(t._shiftKeyIsDown="keydown"===e.type,t.handleDrag())},terminate:function(e,t){var i=this;if(i._isInitiated){i._options.setRowInteractionCursorFunc(c.None);var a,r=i._draggedRowDataItems[0];if(i._dropAllowed||(t=!0),e&&i._options.onEventFunc?.call(i,{sender:null,eventType:"tooltip",event:e.srcEvent||e,hammerEvent:e.srcEvent&&e}),e)t&&e.srcEvent&&(e[l.CANCEL_PROPERTY]=!0),[...document.querySelectorAll("."+n.NDROPPABLE_CLASS)].some((function(t){var i=t.getBoundingClientRect(),o=e.center?e.center.x:e.pageX,n=e.center?e.center.y:e.pageY;if(i.left<=o&&i.right>o&&i.top<=n&&i.bottom>n)return a=t,!0}));i._interaction&c.MoveOutside||a===i._tableBaseWidget.element()||(a=null);var s=function(t){if(i._oldTableHorScrollOffset){var a=i._oldTableHorScrollOffset;o.select(i).transition().duration(500).tween("Up",(function(){var e=o.interpolate(0,a);return function(t){i._tableBaseWidget.scrollTo(e(t))}}))}i._deleteRowPhantom(r);let n=i._interaction;i._reset(),i._options.resetFunc(),i._options.dragEndFunc?.call(i,{sender:r.item,elemType:d.Row,interaction:n,event:e?.srcEvent||e,canceled:t})};try{var _;if(i._lastTargetWidgetElem&&i._lastTargetWidgetElem!==a&&i._lastTargetWidgetElem.dispatchEvent(new CustomEvent(n.DRAG_LEAVE_EVENT_NAME,{detail:{senderWidget:i._tableBaseWidget,event:e?.srcEvent||e,draggable:i._tableBaseWidget.element(),objectType:"netronic_rowItem",object:r.item}})),a)if(t)a.dispatchEvent(new CustomEvent(n.DRAG_LEAVE_EVENT_NAME,{detail:{senderWidget:i._tableBaseWidget,event:e?.srcEvent||e,draggable:i._tableBaseWidget.element(),objectType:"netronic_rowItem",object:r.item}}));else{var h={senderWidget:i._tableBaseWidget,event:e?.srcEvent||e,pageX:e?.center.x,pageY:e?.center.y,draggable:i._tableBaseWidget.element(),objectType:"netronic_rowItem",object:r.item,dragMode:"copy",rowInsertionMode:r.phantomDataItem?.rowInsertionMode,promise:null,cancel:!1};a.dispatchEvent(new CustomEvent(n.DROP_EVENT_NAME,{detail:h})),_=h.promise,t=h.cancel}_?_.then((function(e){s.call(i,!!e)}),(function(){s.call(i,!0)})):s.call(i,t)}catch(e){throw s.call(i,!0),e}}},_deleteRowPhantom:function(e){if(e.phantomDataItem){o.select(`.${g}`).remove(),delete this._shiftKeyIsDown;for(let e of this._options.getScrollablePhantomsBodyD3sFunc())o.selectAll(e.node().children).filter(":not(rect)").remove();delete e.phantomDataItem}},_reset:function(){var e=this;e._isInitiated=!1,delete e._shiftKeyIsDown,delete e._isAutomaticRowExpansionEnabled,delete e._oldTableHorScrollOffset,delete e._draggedRowDataItems,delete e._isActive,delete e._elemType,delete e._interaction,delete e._offsetY,delete e._dropAllowed,delete e._lastTargetWidgetElem,delete e._pointerType,delete e._dragRowPhantomHammerEvent}}),e.exports=C},791:(e,t,i)=>{var o=i(680),a=i(571),n=a.nClassFactory,l=a.nCursorHelper,r=a.nDebugHelper,s=a.nDOMHelper,d=s.mouseEnterAndLeaveListener,_=s.eventListenerHelper,c=a.nDroppableWidget,h=a.nEventDispatcher,u=a.nOSDetector,p=a.nOverlayArea,m=a.nSplitterWidget,f=a.nTextHelper,w=a.nWorldViewCanvasWidget.CanvasIdentifier,E=i(199),g=E.ElemType,T=E.RowInteractions,R=E.TableRowDefinitionType,C=E.HorizontalAlignment,I=E.TableCellType,D=E.VerticalAlignment,v=i(651),A=v._RowInteractions,y=v._RowItemVirtualizationStatus,b=v._UpdateCause,S=v.ASYNC_WAIT_PATTERN_ROTATED_EXTENT,X=v.LayoutRow,L=v.LayoutColumn,x=v.LayoutElements,P=v.TitleArea,O=v.CELL_X_PROPERTY,N=i(53),W=i(307),B=new Set(Object.values(b)),V=v.ABS_VER_LINE_X_PIXEL_OFFSET,M=v.HOR_LINE_Y_PIXEL_OFFSET,F={optionDefaults:Object.assign({},N.prototype.optionDefaults,{firstCellLeftOffset:5,groupCellWidth:10,groupCollapseButtonWidth:16,splitterEnabled:!0,tableDefinition:null,tableWidth:null,defaultTableRowDefinitionIDsByExternalTypeMap:null,tableColumnWidthChangedFunc:null,determineTableRowDefinitionFunc:null,treeLinesVisible:!1,treeLevelIndent:14,separationLinesBetweenGroupCells:!1,columnSplitterWidth:1,cellContentTopOffset:21,rowSeparationLinesVisible:!0,groupCellsWithHorizontalSeparationLine:!1,collapseButtonVisibleOnRowsWithoutVisibleChildren:!0,differentiationBetweenEmptyArrayAndUndefined:!0,interactiveSwitchingOfSortOrderEnabled:!1,sortingIndicatorVisible:!1}),construct:function(){var e=this;this._super.apply(e,arguments),this._scrollableTableColumnsWidth=0,this._fixedTableColumnsWidthPreceding=0,this._fixedTableColumnsWidthSucceeding=0,this._phantomFrameDistance=3,this._phantomFrameRounding=3,this._phantomTransitionDuration=500;var t=this.options.tableDefinition;if(t&&(t.baseLevel&&Array.isArray(t.baseLevel.cellDefinitions)&&(this._scrollableTableColumnsWidth=t.baseLevel.cellDefinitions.reduce((function(t,i){return t+e._determineTableCellWidth(i)}),0)),t.rowDefinitionsMap&&Object.keys(t.rowDefinitionsMap).forEach((function(t){var i=e.options.tableDefinition.rowDefinitionsMap[t];Array.isArray(i.cellDefinitions)&&(e._scrollableTableColumnsWidth=Math.max(e._scrollableTableColumnsWidth,i.cellDefinitions.reduce((function(t,i){return t+e._determineTableCellWidth(i)}),0)))})),t.fixedColumnsPreceding&&Array.isArray(t.fixedColumnsPreceding.cellDefinitions)&&(this._fixedTableColumnsWidthPreceding=t.fixedColumnsPreceding.cellDefinitions.reduce((function(t,i){return t+e._determineTableCellWidth(i)}),0)),t.fixedColumnsSucceeding&&Array.isArray(t.fixedColumnsSucceeding.cellDefinitions)&&(this._fixedTableColumnsWidthSucceeding=t.fixedColumnsSucceeding.cellDefinitions.reduce((function(t,i){return t+e._determineTableCellWidth(i)}),0))),this._tableWidth=this._fixedTableColumnsWidthPreceding+this._scrollableTableColumnsWidth+this._fixedTableColumnsWidthSucceeding,this._tableRowDefinitionIDToDefinitionMap={},this._tableRowDefinitionIDToDataMap={},this._nextTableRowDefinitionID=0,this._setViewWidth(L.Table,this._PE_TableViewWidth()),this._cachedTableWidth=0,this._cachedTableViewWidth=0,this._minimumTableColumnWidth=3,this._colexpButtonSize=6,this._tableMouseEnterCell={rowDataItem:void 0,cellIndex:-1},this._tableColexpButtonPadding=2,this._tableTreeTextBottomPadding=1,this._tableColexpButtonRightPadding=0,this._tableTreeHorizontalConnectionLineLength=5,this._selectedTableRowDataItemsBorderWidth=10,!e.options.isForExport){e._pointerEnterAndLeaveListenersForRows=[];for(var i=0;i<=1;i++)e._pointerEnterAndLeaveListenersForRows[i]=new d(e._onPointerEnterOnTableRow.bind(e),e._onPointerLeaveOnTableRow.bind(e),e._foregroundBodyD3s[i],!0);e._rowDragging=new W(this,{dragStartFunc:t=>e.options.dragStartFunc?.(e._extendCallbackArgs(t)),dragEndFunc:t=>e.options.dragEndFunc?.(e._extendCallbackArgs(t)),onEventFunc:e._triggerEvent.bind(e),phantomFrameDistance:e._phantomFrameDistance,phantomFrameRounding:e._phantomFrameRounding,phantomTransitionDuration:e._phantomTransitionDuration,getActualRowInteractionsFunc:e._getActualRowInteractions.bind(e),setRowInteractionCursorFunc:e._setRowInteractionCursor.bind(e),getMinimumRowHeightFunc:e._getMinimumRowHeight.bind(e),getOrCreateClipPathForRowPhantomFunc:e._getOrCreateClipPathForRowPhantom.bind(e),determineBodyAreaIndexFunc:e._determineBodyAreaIndex.bind(e),getPhantomReferenceElemFunc:e._getPhantomReferenceElem.bind(e),getScrollablePhantomsBodyD3sFunc:()=>e._phantomsBodyD3s,getScrollablePhantomsBodyD3Func:t=>e._phantomsBodyD3s[t],pointToSVGRelativeFunc:e._pointToSVGRelative.bind(e),resetFunc:function(){e._temporaryMarkVisible=void 0,e._touchScrollingEnabled=!0,delete e._finalRowInteractions},getBodyViewScrollTopFunc:t=>e._layoutRows[e._determineBodyAreaIndex(t)].scrollStart(),checkForAutomaticRowExpansionFunc:e._checkForAutomaticRowExpansion.bind(e),checkRowInsertionModeFunc:e._checkRowInsertionModeFunc.bind(e)}),this._droppableWidgetInstance=new c(e._element,{onEventFunc:e._onDragEvent.bind(e)})}e._currentVisibilityOfRowCovers="hidden"},destroy:function(){try{this._rowDragging.destroy(),delete this._rowDragging,this._pointerEnterAndLeaveListenersForRows?.forEach((function(e){e.dispose()})),delete this._pointerEnterAndLeaveListenersForRows,this._overlayAreas?.forEach((function(e){e.forEach((e=>{e.destroy()}))})),this._super()}catch(e){this._handleException(e,"destroy")}},_setOption:function(t,i){try{var o=this,a=o.options[t];switch(t){case"tableDefinition":case"defaultTableRowDefinitionIDsByExternalTypeMap":this._super(t,i),this._tableDefinitionChanged(),null!=this.options.rowItemsRoot&&(this._invalidateAllRowsAtLast(!1,!1,!0),this._bodyChanged(b.RowItemsRootChanged));break;case"tableWidth":a!==(i=!isNaN(+i)&&i>=0?i:e.exports.prototype.optionDefaults[t])&&(this._super(t,i),void 0===this._tableScrollStartAtStartDrag&&(this._tableDefinitionChanged(),null!=this.options.rowItemsRoot&&(this.invalidateAllRows(),this._bodyChanged(b.RowItemsRootChanged))));break;case"virtualized":if(a!==i){for(var n=0;n<=1;n++)this._titleVisible(n)&&this._tableTitleD3s[n]&&this._tableTitleD3s[n].selectAll("."+this.NXXXXX.TABLE_COLUMN_SPLITTER_PARENT_CLASS).each((function(){this._splitterWidget.option("showDragStart",!i)}));this._super(t,i)}break;case"rowSeparationLinesVisible":a!==i&&(o._super(t,i),null!=this.options.rowItemsRoot&&o._foregroundBodyD3s.forEach((function(e){e.selectAll("."+o.NXXXXX.TABLE_ROW_CLASS+" ."+o.NXXXXX.SEPARATION_LINE_CLASS).style("visibility",i?null:"hidden")})));break;case"treeLinesVisible":case"groupCellsWithHorizontalSeparationLine":case"separationLinesBetweenGroupCells":case"editable":a!==i&&(o._super(t,i),null!=this.options.rowItemsRoot&&(o.invalidateAllRows(),o.update()));break;case"cellContentTopOffset":a!==(i=!isNaN(+i)&&i>=0?i:e.exports.prototype.optionDefaults[t])&&(o._super(t,i),null!=this.options.rowItemsRoot&&(o.invalidateAllRows(!1,!1),o.update()));break;case"updateSuspended":o._super(t,i),a!==i&&a&&this._createMissingTableTitles();break;case"forcedRowInteractionsByExternalTypeMap":if(o._super(t,i),o._rowDragging?.isActive())try{o._rowDragging.handleDragWithTerminationCheck()}catch(e){throw o._eventDispatcher.stop(),e}else null!=o._tableMouseEnterCell.rowDataItem&&o._setRowInteractionCursor(o._getActualRowInteractions(o._tableMouseEnterCell.rowDataItem));break;case"sortingIndicatorVisible":case"interactiveSwitchingOfSortOrderEnabled":case"defaultExternalType":a!==i&&(o._super(t,i),o.updateTableTitle());break;default:o._super(t,i)}}catch(e){this._handleException(e,"option")}},_initConstants:function(){var e=this._getOrCreateNXXXXX({WIDGET_ABBREVIATION:"ntablebase",WIDGET_PREFIX:"ntablebase-",WIDGET_NAMESPACE:".ntablebase",WIDGET_NAME_IN_ERROR_MESSAGES:"nTableBaseWidget",WIDGET_PROPERTYNAME_IN_CALLBACKS:"tablebaseWidget",WIDGET_TABLE_PREFIX:"ntablebase-table-",WIDGET_TABLE_INSERTION:"table-"});return this._super(),e.COLEXP_BUTTON_CLASS=e.WIDGET_PREFIX+"colexp-button",e.LEAVES_COLEXP_BUTTON_CLASS=e.WIDGET_PREFIX+"leaves-colexp-button",e.LEAVES_INDICATOR_CLASS=e.WIDGET_PREFIX+"leaves-indicator",e.COVERED_ROW_CLASS=e.WIDGET_PREFIX+"covered-row",e.COVERED_AND_HIGHLIGHTED_ROW_CLASS=e.WIDGET_PREFIX+"covered-and-highlighted-row",e.FIXED_TABLE_ROW_PRECEDING_CLASS=e.WIDGET_PREFIX+"fixed-"+e.WIDGET_TABLE_INSERTION+"row-preceding",e.FIXED_TABLE_ROW_SUCCEEDING_CLASS=e.WIDGET_PREFIX+"fixed-"+e.WIDGET_TABLE_INSERTION+"row-succeeding",e.FIXED_TABLE_TITLE_PRECEDING_CLASS=e.WIDGET_PREFIX+"fixed-"+e.WIDGET_TABLE_INSERTION+"title-preceding",e.FIXED_TABLE_TITLE_SUCCEEDING_CLASS=e.WIDGET_PREFIX+"fixed-"+e.WIDGET_TABLE_INSERTION+"title-succeeding",e.FIXED_TABLE_TITLE_TEXT_CLASS=e.WIDGET_PREFIX+"fixed-"+e.WIDGET_TABLE_INSERTION+"title-text",e.SCROLLABLE_TABLE_ROW_CLASS=e.WIDGET_PREFIX+"scrollable-"+e.WIDGET_TABLE_INSERTION+"row",e.SCROLLABLE_TABLE_TITLE_CLASS=e.WIDGET_PREFIX+"scrollable-"+e.WIDGET_TABLE_INSERTION+"title",e.SELECTED_ROW_CLASS=e.WIDGET_PREFIX+"row-selected",e.TABLE_ALLOCATION_ROW_INDICATOR_OUTLINE_CLASS=e.WIDGET_PREFIX+"table-allocation-row-indicator-outline",e.TABLE_CELL_BACKGROUND_RECT_CLASS=e.WIDGET_TABLE_PREFIX+"cell-background-rect",e.TABLE_CELL_CLASS=e.WIDGET_TABLE_PREFIX+"cell",e.TABLE_CELL_CONTENT_CLASS=e.WIDGET_TABLE_PREFIX+"cell-content",e.TABLE_CELL_IMAGE_LIST_CLASS=e.WIDGET_TABLE_PREFIX+"cell-images",e.TABLE_CELL_IMAGE_CLASS=e.WIDGET_TABLE_PREFIX+"cell-image",e.TABLE_CELL_SHOW_MORE_SYMBOLS_CLASS=e.WIDGET_TABLE_PREFIX+"cell-show-more-symbols",e.TABLE_COLUMN_SEPARATION_LINE_CLASS=e.WIDGET_TABLE_PREFIX+"column-separation-line",e.TABLE_COLUMN_SPLITTER_CLASS=e.WIDGET_TABLE_PREFIX+"column-splitter",e.TABLE_COLUMN_SPLITTER_PARENT_CLASS=e.WIDGET_TABLE_PREFIX+"column-splitter-parent",e.TABLE_COLUMN_TEXT_CLASS=e.WIDGET_TABLE_PREFIX+"column-text",e.TABLE_GROUP_CELL_CLASS=e.WIDGET_TABLE_PREFIX+"group-cell",e.TABLE_GROUP_CELL_LINE_CLASS=e.WIDGET_TABLE_PREFIX+"gc-line",e.TABLE_OVERLAY_CLASS=[e.WIDGET_PREFIX+"top-"+e.WIDGET_TABLE_INSERTION+"overlay",e.WIDGET_PREFIX+e.WIDGET_TABLE_INSERTION+"overlay"],e.TABLE_OVERLAY_SCROLL_PARENT_CLASS=[e.WIDGET_PREFIX+"top-"+e.WIDGET_TABLE_INSERTION+"overlay-scp",e.WIDGET_PREFIX+e.WIDGET_TABLE_INSERTION+"overlay-scroll-parent"],e.TABLE_ROW_BACKGROUND_RECT_CLASS=e.WIDGET_TABLE_PREFIX+"row-background-rect",e.TABLE_ROW_CLASS=e.WIDGET_TABLE_PREFIX+"row",e.TABLE_ROW_CONTENT_CLASS=e.WIDGET_TABLE_PREFIX+"row-content",e.TABLE_ROW_PHANTOM_CLASS=e.WIDGET_TABLE_PREFIX+"row-phantom",e.TABLE_TITLE_CELL_CLASS=e.WIDGET_TABLE_PREFIX+"title-cell",e.TABLE_TITLE_CLASS=e.WIDGET_TABLE_PREFIX+"title",e.TABLE_TITLE_COLUMN_SEPARATION_LINE_CLASS=e.WIDGET_TABLE_PREFIX+"title-column-separation-line",e.TABLE_TITLE_RECT_CLASS=e.WIDGET_TABLE_PREFIX+"title-rect",e.TABLE_TITLE_TEXT_CLASS=e.WIDGET_TABLE_PREFIX+"title-text",e.TABLE_TITLE_SORTING_INDICATOR_CLASS=e.WIDGET_TABLE_PREFIX+"title-sorting-indicator",e.TABLE_TITLE_SORTING_INDICATOR_DOWN_CLASS=e.WIDGET_TABLE_PREFIX+"title-sorting-indicator-down",e.TABLE_TITLE_SORTING_INDICATOR_UP_CLASS=e.WIDGET_TABLE_PREFIX+"title-sorting-indicator-up",e.TREEVIEW_LINE_CLASS=e.WIDGET_PREFIX+"treeview-line",e.LESSENED_CLASS=e.WIDGET_PREFIX+"lessened",e.SCROLLABLE_TABLE_CLIPPATH_ID=e.WIDGET_PREFIX+"scrollable-"+e.WIDGET_TABLE_INSERTION+"clippath",e.SELECTION_BOTTOM_GRADIENT_CLIPPATH_ID=e.WIDGET_TABLE_PREFIX+"bottom-selection-gradient",e.SELECTION_LEFT_GRADIENT_CLIPPATH_ID=e.WIDGET_TABLE_PREFIX+"left-selection-gradient",e.SELECTION_RIGHT_GRADIENT_CLIPPATH_ID=e.WIDGET_TABLE_PREFIX+"right-selection-gradient",e.SELECTION_TOP_GRADIENT_CLIPPATH_ID=e.WIDGET_TABLE_PREFIX+"top-selection-gradient",e.WIDTH_CLIPPATH_ID[L.Table]=e.WIDGET_PREFIX+"width-clippath",e.TABLE_COLUMN_CLIPPATH_ID_PREFIX=e.WIDGET_TABLE_PREFIX+"column-clippath",e.TABLE_ROW_CONTENT_CLASS_PREFIX=e.WIDGET_TABLE_PREFIX+"row-content-",e.COLUMN_INDEX_DATA_PROPERTY=`_${e.WIDGET_PREFIX}_column_index`,e},forceSizeChanged:function(){this._super()&&this._createMissingTableTitles()},_doScale:function(){var e=this;e._element.querySelectorAll(`.${e.NXXXXX.TABLE_COLUMN_SPLITTER_PARENT_CLASS}`).forEach((t=>{t._splitterWidget.option("visualZoomFactor",e.options.visualZoomFactor)})),e._super()},_createMissingTableTitles:function(){for(var e=0;e<=1;e++)this._titleVisible(e)&&this._tableTitleD3s[e]&&(this._tableTitleD3s[e].select("g").size()||this._createTableTitle(e))},_svgRootWheelHor:function(e,t){return this._innerClientXToLayoutColumn(e[0])===L.Table?(this._doRelativeScroll("table",t),!1):this._super(e,t)},_doRelativeScroll:function(e,t,i){if("table"===e)this._doRelativeScrollHor(L.Table,t,i);else this._super(e,t,i);!this&&this._super()},_onSwipe:function(e,t){var i=this;if(t)i._onSwipe_OpacityOff(),i._bodySwipeScrollPos=void 0,i._currentPanParams=void 0;else{var o=i._pointToSVGRelative(this._svgRootD3.node(),e.center.x,e.center.y),a=i._layoutGrid.pointToLayoutCell(o.x,o.y);if(i._bodySwipeScrollPos||(i._bodySwipeScrollPos={view:void 0,lefts:i._layoutStacks[x.Columns].scrollStarts(),tops:i._layoutStacks[x.Rows].scrollStarts()}),void 0===i._bodySwipeScrollPos.view&&(i._bodySwipeScrollPos.view="none",i._onSwipe_DetectView(a)),"none"!==i._bodySwipeScrollPos.view){i._onSwipe_RecurrentCalculations(e);var n=[];if(a.row){var l=a.row.getIndex();l!==X.BodyAtTheTop&&l!==X.MainBody||(n[l]=Math.min(Math.max(0,i._layoutRows[l].extent()-i._layoutRows[l].innerViewExtent()),i._bodySwipeScrollPos.tops[l]-e.deltaY))}i._onSwipe_ScrollTo([],n,e)}}!this&&this._super()},_onSwipe_OpacityOff:function(){for(var e=0;e<=1;e++)this._overlayAreas[L.Table][e].showIOSScrollBars(!1)},_onSwipe_RecurrentCalculations:function(){},_onSwipe_DetectView:function(e){if(e&&e.column&&e.column.getIndex()===L.Table&&e.row){var t=e.row.getIndex();switch(t){case X.BodyAtTheTop:case X.MainBody:this._bodySwipeScrollPos.view="table",this._overlayAreas[L.Table][t].showIOSScrollBars(!0);break;case X.TopTitle:this._bodySwipeScrollPos.view="table-title",this._overlayAreas[L.Table][X.MainBody].showIOSScrollBars(!0);break;case X.BottomTitle:this._bodySwipeScrollPos.view="table-title",this._overlayAreas[L.Table][X.BottomTitle].showIOSScrollBars(!0)}}},_onSwipe_ScrollTo:function(e,t,i){if("table"===this._bodySwipeScrollPos.view||"table-title"===this._bodySwipeScrollPos.view){var o=this._layoutColumns[L.Table].scrollFactorFixed()>0?this.actualTableViewWidth()*this._layoutColumns[L.Table].scrollFactorFixed():this.getDefaultWidthForLayoutColumn(L.Table),a=this._actualScrollableWidth(L.Table);e[L.Table]=Math.max(0,Math.min(a-o,this._bodySwipeScrollPos.lefts[L.Table]-i.deltaX)),this._scrollTo(e,t)}},scrollToItem:function(e,t,i,a,n){try{r.assertNotNull(e,"",0);var l,s=this;s._setOption("updateSuspended",!1),s.update(),"string"==typeof t&&(l=(t=t.split(",")).indexOf("top")>=0?"top":t.indexOf("vcenter")>=0?"center":t.indexOf("bottom")>=0?"bottom":void 0,t=void 0);var d=s._getDataItem(e,s._rowDataItemsMap);if(d&&!s.options.detailingRowsVisible&&d.isDetailingRow&&(d=d.parentRowDataItem),!d)return!1;var _=s._determineBodyAreaIndex(d);if(null==a||a){var c=[];if(d.isHidden){for(var h=[],u=d;void 0!==(u=u.parentRowDataItem);)h.unshift(u);h.shift(),h.every((function(e,t){let i=d.isDetailingRow&&t===h.length-2;return!i&&e.isCollapsed?(s._expandOrCollapseRow(e,!1,!1,!1),d.isHidden):!i||!e.areLeavesCollapsed||(s._expandOrCollapseRow(e,!1,!1,i),d.isHidden)}))}return l||null!=t||(d.oldY+d.totalHeight<s._layoutRows[_].scrollStart()?l="top":d.oldY>s._layoutRows[_].scrollStart()+s._layoutRows[_].innerViewExtent()&&(l="bottom")),l&&(t="top"===l?0:"center"===l?-(s._layoutRows[_].innerViewExtent()-d.totalHeight)/2:"bottom"===l?-(s._layoutRows[_].innerViewExtent()-d.totalHeight):void 0),null!=t&&(c[_]=d.oldY+(t||0)),new Promise((e=>{if(n&&void 0!==c[_]){var t=s._getScrollOffsets(L.Table,_).verScrollOffset,i=c[_];o.select(s._element).transition().duration(s.options.transitionDuration).tween("scrollTop",(function(){var e=o.interpolate(t,i);return function(t){c[_]=Math.floor(e(t)),s._scrollTo([void 0,void 0],c)}})),o.on("end",(function(){e()}))}else s._scrollTo([void 0,void 0],c),e()}))}}catch(e){this._handleException(e,"scrollToItem")}},_scrollLeftsChanged:function(e,t,i,o,a){var n=this;if(a.tableScrollOffsetChangedEventNeeded=!1,null!=e&&null!=e[L.Table]&&n._layoutColumns[L.Table].scrollStart()!==e[L.Table]){if(n._layoutColumns[L.Table].cachedScrollStart(n._layoutColumns[L.Table].scrollFactorFixed()>0?e[L.Table]/n._layoutColumns[L.Table].scrollFactorFixed():0),o&&n._overlayAreas)for(var l=0;l<=1;l++)n._overlayAreas[L.Table][l].scrollLeft(n._layoutColumns[L.Table].cachedScrollStart());if(!i){var r="translate("+-e[L.Table]+")",s=n.options.tableDefinition;if(s&&(s.rowDefinitionsMap&&s.rowDefinitionsMap[s.rowDefinitionIDWithColumnTitles]||null==s.titleText||n._tableRowDefinitionWithColumnTitlesID))for(var d=0;d<=1;d++)n._titleVisible(d)&&n._scrollableTableTitleD3s&&n._scrollableTableTitleD3s[d]&&n._scrollableTableTitleD3s[d].attr("transform",r);n._foregroundBodyD3s.forEach((function(e){e.selectAll("."+n.NXXXXX.ROW_CLASS+" ."+n.NXXXXX.SCROLLABLE_TABLE_ROW_CLASS).attr("transform",r)})),n._layoutColumns[L.Table].scrollStart(e[L.Table]),a.tableScrollOffsetChangedEventNeeded=!0,a.viewChangedFlags[L.Table]=!0,a.changedFlag=!0,n._updateAllRowSelections()}}n._super(e,t,i,o,a)},_triggerChangedEventAfterScrollOffsetsChanged:function(e){this._super(e),e.tableScrollOffsetChangedEventNeeded&&this._trigger("tableScrollOffsetChanged")},_setLayoutColumnsScrollLefts:function(e){if(this._super(e),null!=e&&null!=e[L.Table]){var t=null!=this._layoutColumns[L.Table].innerViewExtent()?this._layoutColumns[L.Table].innerViewExtent()*this._layoutColumns[L.Table].scrollFactorFixed():this.getDefaultWidthForLayoutColumn(L.Table),i=this._actualScrollableWidth(L.Table);e[L.Table]=Math.max(0,Math.min(e[L.Table],i-t))}},horizontalTableViewScrollOffset:function(){return this._getHorViewScrollOffset(L.Table)},modifyTableViewWidth:function(e,t){try{r.assertNumberOrNull(e,"",0),isNaN(+e)||(!t&&this.options.updateSuspended&&this._setOption("updateSuspended",!1),e!==this.actualTableViewWidth()&&(this._setViewWidth(L.Table,e),this._tableViewChanged(),this._scrollTo(this._layoutStacks[x.Columns].scrollStarts(),[void 0,void 0])))}catch(e){this._handleException(e,"modifyTableViewWidth")}return this},_getHorViewScrollOffset:function(e){return e===L.Table?this._layoutColumns[L.Table].scrollStart():this._super(e)},actualTableWidth:function(){return null!=this.options.tableWidth?this.options.tableWidth:this._tableWidth||0},actualTableViewWidth:function(){return this.options.isForExport?this.actualTableWidth():this._layoutColumns[L.Table].innerViewExtent()},_tableViewChanged:function(e,t){for(var i=this,a=i._actualScaledMainWidth(),n=0;n<=1;n++)this._titleVisible(n)&&this._svgRootD3.select("."+i.NXXXXX.TITLE_SEPARATION_LINE_CLASS[n]).attr("x2",a);var l=i._tableViewChanged_DetectTableViewWidth(a),r=this._overlayAreas?this._overlayAreas[L.Table][X.MainBody]._calcOverlayWidthByOverflow(l):l;this._setViewWidth(L.Table,r);var s=i.actualTableWidth(),d=i.actualTableViewWidth(),_=this._layoutColumns[L.Table].scrollFactorFixed();if(this._layoutColumns[L.Table].scrollFactorFixed(d?(d-i._fixedTableColumnsWidthPreceding-i._fixedTableColumnsWidthSucceeding)/d:1),i._cachedTableViewWidth!==d||i._cachedTableWidth!==s||i._layoutColumns[L.Table].scrollFactorFixed()!==_){var c=d-i._cachedTableViewWidth;i._scrollTo(i._layoutStacks[x.Columns].scrollStarts(),[void 0,void 0]),i._cachedTableViewWidth=d,i._cachedTableWidth=s;var h=i._actualScrollableWidth(L.Table),u=i._layoutColumns[L.Table].scrollFactorFixed()>0?Math.max(0,h)/i._layoutColumns[L.Table].scrollFactorFixed():1;i._layoutColumns[L.Table].extent(u),i._layoutColumns[L.Table].innerViewExtent(d),i._layoutColumns[L.Table].outerViewExtent(l),i.options.isForExport||i._scrollableTableClipPathRectD3.attr("x",i._fixedTableColumnsWidthPreceding).attr("width",Math.max(0,d-i._fixedTableColumnsWidthPreceding-i._fixedTableColumnsWidthSucceeding));var p=i.options.tableDefinition;if(p&&(p.rowDefinitionsMap&&p.rowDefinitionsMap[p.rowDefinitionIDWithColumnTitles]||i._tableRowDefinitionWithColumnTitlesID||null==p.titleText?t||i.updateTableTitle():t=!0),c&&i._fixedTableColumnCountSucceeding){var m="."+i.NXXXXX.FIXED_TABLE_ROW_SUCCEEDING_CLASS+" ."+i.NXXXXX.TABLE_CELL_CLASS;t&&(m+=",."+i.NXXXXX.FIXED_TABLE_TITLE_SUCCEEDING_CLASS+" ."+i.NXXXXX.TABLE_TITLE_CELL_CLASS),i._svgRootD3.selectAll(m).each((function(){var e=o.select(this),t=e.property(O)+c;e.property(O,t),e.attr("transform","translate("+Math.max(t,i._fixedTableColumnsWidthPreceding)+")")}))}if(i._tableViewChanged_RecalcDependentColumns(a,d),i._layoutGrid.update(),i._tableScrollStartAtStartDrag){var f=[];f[L.Table]=i._tableScrollStartAtStartDrag,i._scrollTo(f,[void 0,void 0])}return e&&this._updateAllRowSelections(),!0}},_tableViewChanged_DetectTableViewWidth:function(){},_tableViewChanged_RecalcDependentColumns:function(){},_handleKeyEvent:function(e){try{this._rowDragging?.handleKeyEvent(e)}catch(e){this._handleException(e,"_handleKeyEvent")}this._super(e)},_getPhantomReferenceElem:function(e){return e.foregroundRowElem},_getActualRowInteractions:function(e){var t;return this.options.editable&&(t=this._getDefaultOptionValueWithExternalType(e,this.options.forcedRowInteractionsByExternalTypeMap,void 0)??this._finalRowInteractions??e.item.rowInteractions??this._getDefaultOptionValueWithExternalType(e,this.options.defaultRowInteractionsByExternalTypeMap,T.None)),t??T.None},_determineRowInteractions:function(e,t,i,o){var a=this;if(!this.options.editable)return T.None;var n=t;if(a.options.checkPossibleInteractionsFunc){var l=a._extendCallbackArgs({item:e.item,elemType:g.TableRow,elem:e.foregroundRowElem,event:o.center?o.srcEvent:o,hammerEvent:o.center?o:void 0,point:i,possibleInteractions:t,interactions:n});return a.options.checkPossibleInteractionsFunc(l),l.interactions}},_setRowInteractionCursor:function(e){var t=this,i="";switch(e&A._AllSupportedFlags){case T.MoveOutside:case T.MoveOutside|T.DragVertically:case T.MoveOutside|T.DragVertically|T.DragOnSameLevelOnly:i=t._rowDragging?.isInitiated()?"grabbing":"grab";break;case T.DragVertically:case T.DragVertically|T.DragOnSameLevelOnly:case T.DragVertically|T.DragOnSameLevelOnly|T.DragInSameTableParentOnly:case T.DragVertically|T.DragInSameTableParentOnly:i=t._rowDragging?.isInitiated()?"grabbing":"ns-resize"}t._rowDragging?.setOption("interactionCursor",i),l.setCursor(t._element,i)},_onRowPress:function(e,t){var i=this,o=!0;if(!i._rowDragging.isInitiated()&&i._getActualRowInteractions(t)!==T.None)try{i._rowDragging.initiate(e,t,!1)&&(i._touchScrollingEnabled=!1,o=!1)}catch(e){throw i._eventDispatcher.stop(),e}o&&"touch"!==e.pointerType&&(e[h.CANCEL_PROPERTY]=!0)},_onRowPressUp:function(e,t){var i=this,o=i._rowDragging.isActive(),a=!o;if(i._rowDragging.isInitiated())try{i._rowDragging.terminate(e,!o)}catch(e){throw i._eventDispatcher.stop(),e}a&&"touch"===e.pointerType&&i._triggerEvent({sender:t.item,eventType:"contextmenu",elem:t.foregroundRowElem,elemType:g.Row,event:e.srcEvent,hammerEvent:e})},_onRowDragStart:function(e,t){var i=this,o=!0;if(i._rowDragging.isInitiated())i._rowDragging.isActive()||(o=!1);else try{i._rowDragging.initiate(e,t,!0)&&(o=!1)}catch(e){throw i._eventDispatcher.stop(),e}o&&(e[h.CANCEL_PROPERTY]=!0)},_onRowDragMove:function(e){try{this._rowDragging.handleDrag(e)}catch(e){throw this._eventDispatcher.stop(),e}finally{e&&!this._rowDragging.isInitiated()&&(e[h.CANCEL_PROPERTY]=!0)}},_onRowDragEnd:function(e){try{this._rowDragging.terminate(e,e.type.indexOf("cancel")>=0)}catch(e){throw this._eventDispatcher.stop(),e}},_onDragEvent:function(e){try{var t=this,i=e.data,o=t._pointToSVGRelative(t._svgRootD3.node(),i.pageX,i.pageY),a=t._findRowDataItemAtY(i.pageY);switch(e.eventType){case c.EventType.DragEnter:if(t.options.dragEnterFunc){var n=t._extendCallbackArgs({sender:i.object,elemType:g.Row,interaction:i.draggable===t._element?T.DragVertically:T.MoveOutside,event:i.event,cancel:!1});t.options.dragEnterFunc.call(t,n),i.cancel=n.cancel}t._handleDragEnterForRowDrag(i,a,o);break;case c.EventType.DragOver:if("netronic_rowItem"===i.objectType&&(a&&t._updateVerticalDOMElementsForRowDrag(i,a,o),i._noAutoscroll||(!a||t._rowDragging.isActive()&&!t._rowDragging.isAutomaticRowExpansionEnabled()||t._checkForAutomaticRowExpansion(i.pageX,i.pageY,t._rowDragging.directlyDraggedRowDataItem(),t._rowDragging.maximumLevelToExpand(),!0),t._checkForAutoscroll(i.pageX,i.pageY,!0,!0,(function(){t._rowDragging.isFromOutside()?t._onDragEvent(Object.assign({_noAutoscroll:!0},e)):t._onRowDragMove()})),t._updateHorizontalDOMElementsForRowDrag(i,a,o)),t.options.draggedFunc)){if((n=t._extendCallbackArgs({sender:i.object,elemType:g.Row,interaction:i.draggable===t._element?T.DragVertically:T.MoveOutside,event:i.event,newRowItem:a?a.item:void 0,dropAllowed:i.dropAllowed,cancel:!1,promise:null})).interaction===T.MoveOutside){let e=t._determineStartEndForRowDrag(i,a,o);n.start=e&&e.start,n.end=e&&e.end}else n.rowInsertionMode=i.rowInsertionMode;t.options.draggedFunc.call(t,n),i.dropAllowed=n.dropAllowed,i.cancel=n.cancel,i.promise=n.promise}break;case c.EventType.Drop:if("netronic_rowItem"===i.objectType&&t.options.droppedFunc){if((n=t._extendCallbackArgs({sender:i.object,elemType:g.Row,interaction:i.draggable===t._element?T.DragVertically:T.MoveOutside,event:i.event,newRowItem:a?a.item:void 0,promise:void 0,cancel:!1})).interaction===T.MoveOutside){let e=t._determineStartEndForRowDrag(i,a,o);n.start=e&&e.start,n.end=e&&e.end}else n.rowInsertionMode=i.rowInsertionMode;t.options.droppedFunc.call(t,n),i.promise=n.promise,i.cancel=n.cancel}case c.EventType.DragLeave:if(t.options.dragLeaveFunc){n=t._extendCallbackArgs({sender:i.object,elemType:g.Row,interaction:i.draggable===t._element?T.DragVertically:T.MoveOutside,event:i.event});t.options.dragLeaveFunc.call(t,n)}"netronic_rowItem"===i.objectType&&(t._handleDragLeaveForRowDrag(i,a,o),t._stopAutomaticRowExpansionTimer(),t._stopAutoscroll(),t._isInDragOver=!1)}}catch(e){this._handleException(e,"_onDragEvent")}},_updateVerticalDOMElementsForRowDrag:function(){},_updateHorizontalDOMElementsForRowDrag:function(){},_determineStartEndForRowDrag:function(){},_handleDragEnterForRowDrag:function(){},_handleDragLeaveForRowDrag:function(){},isInInteraction:function(){try{return this._super()||this._rowDragging?.isInitiated()}catch(e){return this._handleException(e,"isInInteraction"),!1}},_cancelInteractionAtLast:function(e){this._super(),this._rowDragging?.isInitiated()&&this._rowDragging.terminate(e,!0)},getRowItem:function(e){try{r.assertNotNull(e,"",0);var t=this;if(e instanceof Element){var i=t._super(e);return void 0===i&&(i=o.select(e.closest("."+t.NXXXXX.TABLE_ROW_CLASS)).data()[0]),i?i.item:void 0}return t._super(e)}catch(e){this._handleException(e,"getRowItem")}},__doInvalidateRowRecursively:function(e,t,i){var o,a=this,n=e.item;(a._temporaryMarkVisible=void 0,e.tableRowDefinition)&&(a._isTableWithRowDefinitionsMap()?e.tableRowDefinition!==a.options.tableDefinition.rowDefinitionsMap[e.item.tableRowDefinitionID]&&(o=!0):(--a._tableRowDefinitionIDToDataMap[e.tableCellDefinitionType].usageCount||"u"!==e.tableCellDefinitionType[0]||(delete a._tableRowDefinitionIDToDataMap[e.tableCellDefinitionType],delete a._tableRowDefinitionIDToDefinitionMap[e.tableCellDefinitionType],a._tableRowDefinitionWithColumnTitlesID===e.tableCellDefinitionType&&delete a._tableRowDefinitionWithColumnTitlesID),o=!0),o&&(delete e.tableRowDefinition,delete e.tableCellDefinitionType));delete e.worldViewFillColor,delete e.bodyAreaIndex,delete e.hasUnfilteredDetailingRows,a._handleAdditionalRowInvalidationBefore(e,t,i),t.childRowsChangedFlag&&["detailingRowItems","childRowItems"].forEach((function(i,o){var l=["detailingRowDataItems","childRowDataItems"][o];e[l]=void 0,e.isDetailingRow&&o||Array.isArray(n[i])&&(e[l]=[],n[i].forEach((function(i){if(i){var n=a._getOrCreateDataItem(i,a._rowDataItemsMap,a._unusedRowDataItemsMap),r=n.dataItem;e[l].push(r),r.isDetailingRow=!o,r.level=e.level+1,o||(r.detailingLevel=(e.detailingLevel??-1)+1),r.parentRowDataItem=e,r.summariesExistent=void 0,n.isCreated?(r.areLeavesCollapsed=i.leavesInitiallyCollapsed||!1,r.isCollapsed=r.isDetailingRow?r.areLeavesCollapsed:i.initiallyCollapsed||!1,r.virtualizationStatus=y.Unrealized):(a._unusedRowDataItemsMap.delete(r.id),a._rowDataItemsMap.set(r.id,r));var s=r.isHidden=e.isHidden||(o?e.isCollapsed:!a.options.detailingRowsVisible||e.areLeavesCollapsed);r.visibleRowDataItem=s?e.visibleRowDataItem:r,t.childRowsChangedFlag=!0,a.__doInvalidateRowRecursively(r,t,n.isCreated)}})))})),n!==a.options.rowItemsRoot&&(delete e.totalHeight,a._handleAdditionalRowInvalidationAfter(e,t,i),a._removeRowCompletely(e,!1)),!this&&this._super()},_handleAdditionalRowInvalidationBefore:function(){},_handleAdditionalRowInvalidationAfter:function(){},_rowItemsRootChanged_update:function(e){this._tableDefinitionChanged(!0),this._super(e)},_invalidateAllRowsAtLast:function(e,t,i){try{var o=this,a=o._determineRowDataItems(!1,!0);a.splice(0,1),a.forEach((function(a){o._handleRowInvalidationAtLast(a,e,t,i)}));for(let e of o._realizedInvisibleRowsSet)e.virtualizationStatus=y.Unrealized;o._realizedInvisibleRowsSet.clear();for(let e of o._realizedVisibleRowsSet)e.virtualizationStatus=y.Unrealized;o._realizedVisibleRowsSet.clear(),o._foregroundBodyD3s.forEach((function(e){e.selectAll("."+o.NXXXXX.ROW_CLASS).each((function(e){o._removeRowByDataItem(e),e.virtualizationStatus=y.Precalculated}))})),!this&&this._super()}catch(e){this._handleException(e,"invalidateAllRows")}},_handleRowInvalidationAtLast:function(e,t,i,o){var a=this;delete e.entered,o&&(delete e.tableRowDefinition,delete e.tableCellDefinitionType),t&&(delete e.oldY,delete e.oldMainHeight,delete e.oldTotalHeight,delete e.oldAdditionalHeight),(t||i)&&(delete e.totalHeight,delete e.worldViewCache),e.tableRowDefinition&&!a._isTableWithRowDefinitionsMap()&&(--a._tableRowDefinitionIDToDataMap[e.tableCellDefinitionType].usageCount||"u"!==e.tableCellDefinitionType[0]||(delete a._tableRowDefinitionIDToDataMap[e.tableCellDefinitionType],delete a._tableRowDefinitionIDToDefinitionMap[e.tableCellDefinitionType],a._tableRowDefinitionWithColumnTitlesID===e.tableCellDefinitionType&&delete a._tableRowDefinitionWithColumnTitlesID),e.tableRowDefinition=void 0,e.tableCellDefinitionType=void 0)},invalidateRowsForTreeViewUpdate:function(e,t){try{var i=this;if(r.assertFunction(t,"",1),i.options.treeLinesVisible){var o;if(e){var a=i._getDataItem(e,this._rowDataItemsMap,this._unusedRowDataItemsMap);if(a){var n=a.parentRowDataItem;if(n&&n.childRowDataItems){let e=n.childRowDataItems,t=e.indexOf(a),l=i._determineBodyAreaIndex(a),r=e=>l===i._determineBodyAreaIndex(e);e.slice(t+1).some(r)||(o=e.slice(0,t).reverse().find(r))}}}var l=t.call(this);if(void 0===l&&(l=e),o&&this._doInvalidateRow(o,{childRowsChangedFlag:!0}),l){var s=i._getDataItem(l,this._rowDataItemsMap);if(s){var d=s.parentRowDataItem;if(d&&d.childRowDataItems){let e=d.childRowDataItems,t=e.indexOf(s),o=i._determineBodyAreaIndex(s),a=e=>o===i._determineBodyAreaIndex(e);if(!e.slice(t+1).some(a)){let o=e.slice(0,t).reverse().find(a);o&&i._doInvalidateRow(o,{childRowsChangedFlag:!0})}}}}}else t.call(this)}catch(e){this._handleException(e,"invalidateRowsForTreeViewUpdate")}},_isInsideFixedPrecedingImageListColumn:function(e){var t=this,i=e.srcEvent??e,a=o.pointer(i,t._svgRootD3.node()),n=a[1]<t._actualTitleHeight(P.top)+t._layoutRows[X.BodyAtTheTop].innerViewExtent()?0:1,l=(a=o.pointer(i,t._backgroundBodyD3s[n].node()))[0]>=0&&a[0]<t._fixedTableColumnsWidthPreceding&&a[1]>=t._layoutRows[n].scrollStart()&&a[1]<t._layoutRows[n].extent();if(l){var r=0;t.options.tableDefinition.fixedColumnsPreceding.cellDefinitions.every((function(e){return r+=t._determineTableCellWidth(e),!(a[0]<=r)||(l=e.type===I.ImageList,!1)}))}return l},_isTableWithRowDefinitionsMap:function(){var e=this.options.tableDefinition;return e&&e.rowDefinitionsMap&&Object.keys(e.rowDefinitionsMap).length},__determineTableRowDefinitionID:function(e){var t,i=this.options.tableDefinition;return Object.keys(i.rowDefinitionsMap).every((function(o){if(i.rowDefinitionsMap[o]!==e)return!0;t=o})),t},_determineTableRowDefinitionInfo:function(e){var t=this,i={},o=this.options.tableDefinition;if(e.tableRowDefinition)i.rowDefinition=e.tableRowDefinition,i.cellDefinitionType=e.tableCellDefinitionType,t._isTableWithRowDefinitionsMap()&&i.rowDefinition===o.baseLevel&&!o.rowDefinitionIDWithColumnTitles&&(i.cellDefinitionTypeForClipPath="b");else{if(o){if(t._isTableWithRowDefinitionsMap())if(e.item.tableRowDefinitionID)i.rowDefinition=o.rowDefinitionsMap?o.rowDefinitionsMap[e.item.tableRowDefinitionID]:null,i.cellDefinitionType=!i.rowDefinition&&e.isDetailingRow?"l":"m"+e.item.tableRowDefinitionID;else{if(null!=e.item.externalType){let a=t.options.defaultTableRowDefinitionIDsByExternalTypeMap?.[e.item.externalType];a&&(i.rowDefinition=o.rowDefinitionsMap[a],i.cellDefinitionType="m"+a)}else if(!e.isDetailingRow&&!i.rowDefinition&&Array.isArray(o.groupingLevels)){let a=o.groupingLevels[e.level];if(a){let o=t.__determineTableRowDefinitionID(a);o?(i.rowDefinition=a,i.cellDefinitionType="m"+o):(i.rowDefinition=a,i.cellDefinitionType="g"+e.level)}}if(!i.rowDefinition&&o.baseLevel){let e=t.__determineTableRowDefinitionID(o.baseLevel);e&&(i.rowDefinition=o.baseLevel,i.cellDefinitionType="m"+e,o.rowDefinitionIDWithColumnTitles||(i.cellDefinitionTypeForClipPath="b"))}}else Array.isArray(o.groupingLevels)&&(i.rowDefinition=o.groupingLevels[e.level],i.cellDefinitionType="g"+e.level);i.rowDefinition||(i.rowDefinition=o.baseLevel,i.cellDefinitionType="b")}if(!t._isTableWithRowDefinitionsMap()&&t.options.determineTableRowDefinitionFunc){var a=t._extendCallbackArgs({rowItem:e.item,level:e.level,rowDefinition:i.rowDefinition,hasColumnTitles:!1});if(t.options.determineTableRowDefinitionFunc.call(this,a),a.rowDefinition){var n=Object.keys(this._tableRowDefinitionIDToDefinitionMap).reduce((function(e,i){return e||t._tableRowDefinitionIDToDefinitionMap[i]!==a.rowDefinition?e:i}),null);n||(n=this.options.tableDefinition&&this.options.tableDefinition.baseLevel===a.rowDefinition?"b":"u"+this._nextTableRowDefinitionID++,this._tableRowDefinitionIDToDefinitionMap[n]=a.rowDefinition,this._tableRowDefinitionIDToDataMap[n]={usageCount:0}),a.rowDefinition.hasColumnTitles&&(t._tableRowDefinitionWithColumnTitlesID=n,t.updateTableTitle()),i.rowDefinition=a.rowDefinition,i.cellDefinitionType=n}this._tableRowDefinitionIDToDataMap[i.cellDefinitionType].usageCount++}e.tableRowDefinition=i.rowDefinition||null,e.tableCellDefinitionType=i.cellDefinitionType}return i},_fillTableRowContent:function(e,t,i){var a=this;if(e.totalHeight){if(t&&o.selectAll(t.node().childNodes).filter(":not(."+a.NXXXXX.TABLE_CELL_CLASS+"):not(."+a.NXXXXX.TABLE_GROUP_CELL_CLASS+")").remove(),i)if(i.contentsFunc){var n=a._extendCallbackArgs({rowItem:e.item,rowElem:e.foregroundRowElem,parentElem:t?.node(),width:a._determineTableRowWidth(),totalHeight:e.totalHeight,oldTotalHeight:e.oldTotalHeight,mainHeight:a._determineRowMainHeight(e),rowDefinition:i,rowLevel:e.level});i.contentsFunc.call(this,n),e.worldViewFillColor=n.worldViewFillColor||"transparent"}else e.worldViewFillColor="transparent"}else t?.size()&&o.selectAll(t.node().childNodes).remove()},_determineRowMainHeight:function(){},_fillImageListCell:function(e,t,i,a,n,l){var r=this;if(i)for(var s=16,d=Math.max(Math.floor((a-6+4)/20),1),c=Math.max(Math.floor((n-6+4)/20),1),u=d*c,m=i.length<=u,f=Math.ceil(i.length/c),w=3,E=3,g=0;g<i.length;g++){if(!(m||g<u-1)){var T,R=t.append("image").attr("x",w).attr("y",E).attr("width",s).attr("height",s).attr("class",r.NXXXXX.TABLE_CELL_SHOW_MORE_SYMBOLS_CLASS).attr("href","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFjSURBVGhD7ZS7LgZRFEaHKBQKhVKhVEhISCgUHkDhIRQ6Eq3OK0jkj6iUHsEzCEJCp6BTkChIFKxvciYZx56LS1TfSlbOXM7eczvzFcYYY4wxxhhjzM8YSmPEJG7iDL7iKe7hE3Yxjts4V+4VxTkO8L7ca2cUt3AxbV/hId5gb9bwEd8z73AZ29B5zctr1U9925jGa8xrX3ADezGFz5g3qdTN6Q1H6Hh085Xqq/4RI3iGUZ18wyXs5AijBnV3MGIXo/l1DzBiHaP5dU/wE8NprFOt2zbm05jTp3YhjTmzaWzjS230APpxutDnjvj32ugBlBhdNM35Te1FGtvo079cBvphojUolSaK2Agdj9KrUn2bltkY3mJUV7mKvVBkRQ+hFOmKQp2PUkz9uqJQKfOAea1UQHwLvaljVC4r3pQeTRGYo3lKs8uktvv84GIC91HX1LV1DytojDHGGGOMMcb8HUXxAd9DjLLnJpEBAAAAAElFTkSuQmCC");R.attr(p.POINTER_ENTER_ATTR_NAME,"1"),_.on(R.node(),"pointerenter",r._EVENT_NAMESPACE,(function(){var a=o.select(t.node().closest(`.${r.NXXXXX.TABLE_ROW_CLASS}, .${r.NXXXXX.TABLE_TITLE_CLASS}`));T=a.append("g").attr("class",[r.NXXXXX.IMAGE_LIST_IMAGE_GROUP_CLASS,h.TAP_EVENT_CLASS_NAME,h.DOUBLE_TAP_EVENT_CLASS_NAME,h.CONTEXTMENU_EVENT_CLASS_NAME].join(" ")).attr("opacity","0");var l=6+f*s+4*Math.max(f-1,0);T.append("rect").attr("class",r.NXXXXX.IMAGE_LIST_IMAGE_GROUP_RECT_CLASS).attr("width",l).attr("height",n),T.append("rect").attr("class",r.NXXXXX.IMAGE_LIST_IMAGE_GROUP_SHADOW_RECT_CLASS).attr("width",3).attr("x",l).attr("height",n),r._fillImageListCell(e,T,i,l,n,!0);let d=R.node().getBoundingClientRect();_.on(r._element,"pointerleave pointermove",`${r._EVENT_NAMESPACE}-il`,(function(e){(e.clientX<d.left||e.clientX>=d.right||e.clientY<d.top||e.clientY>=d.bottom)&&(_.off(r._element,"pointerleave pointermove",`${r._EVENT_NAMESPACE}-il`),T.remove().interrupt().transition())})),T.transition().delay(r.options.transitionDuration).duration(500).attr("opacity","1").on("end",(function(){_.on(r._element,"pointerleave pointermove",`${r._EVENT_NAMESPACE}-il`,(function(e){e.target!==T.node()&&e.target.parentElement!==T.node()&&(_.off(r._element,"pointerleave pointermove",`${r._EVENT_NAMESPACE}-il`),T.remove())}))}))}));break}var C=i[g],I="///"===C.substring(0,3),D=t.append(I?"use":"image").attr("class",r.NXXXXX.TABLE_CELL_IMAGE_CLASS).attr("x",w).attr("y",E).attr("href",I?"#"+C.substring(3):C);I||D.attr("width",s).attr("height",s),r._registerTapEvents(D,{sender:e?e.item:void 0,symbolIndex:g}),l&&D.attr(p.POINTER_ENTER_ATTR_NAME,"1").attr(p.POINTER_LEAVE_ATTR_NAME,"1"),w=3+20*Math.floor((g+1)/c),E=3+(g+1)%c*20}t.append("line").attr("class",r.NXXXXX.TABLE_COLUMN_SEPARATION_LINE_CLASS).attr("pointer-events","none").attr("x1",a).attr("x2",a).attr("y1",0).attr("y2",n)},_fillSymbolCell:function(e,t,i,o,a,n,l){var r=t.symbolHeight??n-6,s=t.symbolWidth??r,d=3,_=Math.max(3,this._determineActualTableCellContentTopOffset(e)-r/2),c=0;switch(l){default:case C.Left:c=s+3;break;case C.Right:d=a-3-s;break;case C.Center:d=(a-s)/2}var h="///"===o.substring(0,3);return i.append(h?"use":"image").attr("x",d).attr("y",_).attr("href",h?"#"+o.substring(3):o).attr("width",s).attr("height",r),c},_fillTableCellContent:function(e,t,i,a,n,l,r,s){var d=this;i.selectAll("*").remove();var _,c=0;s&(R.FixedColumnsPreceding|R.FixedColumnsSucceeding)||(n=d._determineCellWidth(t,l,r,n),l||(c+=d.options.treeLinesVisible&&d.options.detailingRowsVisible?Math.max(d.options.buttonExtent,d.options.firstCellLeftOffset):d.options.firstCellLeftOffset,d.options.treeLinesVisible&&(c+=e.level*d.options.treeLevelIndent),c+=d.options.groupCollapseButtonWidth));var h,p=C.Left,m=D.FirstLineOnBaseline,w=d._enrichClass(e,d.NXXXXX.TABLE_COLUMN_TEXT_CLASS,{elemType:g.TableCellText,columnIndex:l}),E=a.type||I.Text;if(a.contentsFunc&&(h=d._extendCallbackArgs({rowItem:e.item,rowElem:o.select(e.foregroundRowElem).node(),cellElem:t.node(),parentElem:i.node(),width:n-c,totalHeight:e.totalHeight,oldTotalHeight:e.oldTotalHeight,mainHeight:d._determineRowMainHeight(e),columnIndex:l,rowDefinition:r,rowLevel:e.level,text:void 0,className:w,horizontalTextAlignment:a.horizontalTextAlignment??p,verticalTextAlignment:a.verticalTextAlignment??m,rowDefinitionType:s,cellType:E,imageURLs:void 0,symbolURL:void 0}),void 0===(_=a.contentsFunc.call(this,h))&&(_=h.text,p=h.horizontalTextAlignment,m=h.verticalTextAlignment)),(h?h.cellType:E)===I.ImageList&&(t.classed(d.NXXXXX.TABLE_CELL_IMAGE_LIST_CLASS,!0),d._fillImageListCell(e,i,h.imageURLs,h.width,h.totalHeight)),h?.symbolURL)var T=d._getMinimumRowHeight(e),v=d._fillSymbolCell(e,a,i,h.symbolURL,h.width,T,p);if("string"==typeof _){l||(n-=c);let t=d._determineActualTableCellContentTopOffset(e),r=i.append("text").attr("class",w).attr("dx",v).attr("y",t).attr("dy",".3em");d._setHorizontalAlignmentOnCell(r,l?p:C.Left,C.Left,n);var A=_||"";if(u.isFirefox&&""===A&&(A=" "),1===a.wrapMode){if(r.attr("data-text",A).attr("data-wrap-mode","n"),f.wrapSVGText(r),a.verticalTextAlignment===D.AllLinesCenteredAroundBaseline){let e=r.selectAll("tspan").size();if(e>1){let i,a=f.calculateSVGTextHeight(r),n=a/e,l=Math.floor(t+n/2-a/2),s=r.selectAll("tspan");l<.65*n&&(l=n,s.each((function(){let e=o.select(this),t=parseFloat(e.attr("dy"));void 0===i&&(i=t),e.attr("dy",t-i-.2+"em")}))),s.attr("y",l)}}}else r.text(A);_=r.node()}h?.finalizeFunc?.call(d,d._extendCallbackArgs({elem:_})),l&&i.append("line").attr("class",d.NXXXXX.TABLE_COLUMN_SEPARATION_LINE_CLASS+" "+d._determineRowLevelClass(e)).attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",e.totalHeight)},_setHorizontalAlignmentOnCell:function(e,t,i,o){switch(t){case C.Center:case C.Right:case C.Left:break;default:t=i}var a;switch(t){case C.Center:e.attr("text-anchor","middle"),a=o/2;break;case C.Right:e.attr("text-anchor","end"),a=o-5.5;break;default:e.attr("text-anchor","start"),a=5.5}e.attr("x",a),e.selectAll("tspan").attr("x",a)},_determineCellWidth:function(){},_createTreeview:function(e,t){var i=this;if(e.totalHeight){var o=this._colexpButtonSize+this._tableColexpButtonPadding,a=this._colexpButtonSize+this._tableTreeTextBottomPadding,n=this._colexpButtonSize+this._tableColexpButtonRightPadding,l=this._colexpButtonSize+this._tableTreeHorizontalConnectionLineLength,r=e.totalHeight,s=i.options.treeLevelIndent,d=(i.options.detailingRowsVisible?Math.max(i.options.buttonExtent,i.options.buttonLeftOffset):i.options.buttonLeftOffset)+i.options.buttonExtent/2+i._fixedTableColumnsWidthPreceding,_=i._determineActualTableCellContentTopOffset(e),c=_-o,h=_,u=_+o,p=_+a,m=d+s*e.level;if(!e.isDetailingRow){var f=e.parentRowDataItem.childRowDataItems,w=!e.level&&e===f[0];if(!w&&!e.level)f.slice(0,f.indexOf(e)).some((t=>0!==t.item.totalHeight&&i._determineBodyAreaIndex(t)===i._determineBodyAreaIndex(e)))||(w=!0);var E=e===f[f.length-1];if(!E)f.slice(f.indexOf(e)+1).some((t=>0!==t.item.totalHeight&&(e.level||i._determineBodyAreaIndex(t)===i._determineBodyAreaIndex(e))))||(E=!0);i._hasCollapseExpandButton(e)?(w||t.append("line").attr("x1",m).attr("y1",0).attr("x2",m).attr("y2",c).attr("class",i.NXXXXX.TREEVIEW_LINE_CLASS),t.append("line").attr("x1",m+n).attr("y1",h).attr("x2",m+l).attr("y2",h).attr("class",i.NXXXXX.TREEVIEW_LINE_CLASS),E||t.append("line").attr("x1",m).attr("y1",u).attr("x2",m).attr("y2",r).attr("class",i.NXXXXX.TREEVIEW_LINE_CLASS)):(w?E||t.append("line").attr("x1",m).attr("y1",h).attr("x2",m).attr("y2",r).attr("class",i.NXXXXX.TREEVIEW_LINE_CLASS):E?t.append("line").attr("x1",m).attr("y1",0).attr("x2",m).attr("y2",h).attr("class",i.NXXXXX.TREEVIEW_LINE_CLASS):t.append("line").attr("x1",m).attr("y1",0).attr("x2",m).attr("y2",r).attr("class",i.NXXXXX.TREEVIEW_LINE_CLASS),!e.level&&E&&w||t.append("line").attr("x1",m).attr("y1",h).attr("x2",m+l).attr("y2",h).attr("class",i.NXXXXX.TREEVIEW_LINE_CLASS))}!e.isCollapsed&&Array.isArray(e.childRowDataItems)&&e.childRowDataItems.some((e=>0!==e.item.totalHeight))&&t.append("line").attr("x1",m+s).attr("y1",p).attr("x2",m+s).attr("y2",r).attr("class",i.NXXXXX.TREEVIEW_LINE_CLASS),e.isDetailingRow&&!e.parentRowDataItem.isCollapsed&&e.parentRowDataItem.childRowDataItems?.length&&t.append("line").attr("x1",m).attr("y1",0).attr("x2",m).attr("y2",r).attr("class",i.NXXXXX.TREEVIEW_LINE_CLASS);for(var g=e,T=e.level-1;T>=0;T--){var R=(g=g.parentRowDataItem).parentRowDataItem[g.isDetailingRow?"detailingRowDataItems":"childRowDataItems"];g===R[R.length-1]||R.slice(R.indexOf(g)+1).every((e=>0===e.item.ArraytotalHeight))||!T&&i._determineBodyAreaIndex(g)===X.BodyAtTheTop&&i._determineBodyAreaIndex(R[R.indexOf(g)+1])!==X.BodyAtTheTop||t.append("line").attr("x1",d+s*T).attr("y1",0).attr("x2",d+s*T).attr("y2",r).attr("class",i.NXXXXX.TREEVIEW_LINE_CLASS)}}},_createTableRow:function(e,t,i,a,n){var l=this,r=a===b.WorldView;if(!r){var s=l._determineTableRowDefinitionInfo(e),d=s.rowDefinition;if(a===b.AncestorsNeeded){let t=e.foregroundRowElem;return delete e.foregroundRowElem,this._fillTableRowContent(e,void 0,d),void(e.foregroundRowElem=t)}var c=l.options.isForExport?l._layoutColumns[L.Table].innerViewExtent():l._determineTableRowWidth();c=Math.max(0,c-l._fixedTableColumnsWidthPreceding);var p=t.append("rect").attr("class",l._determineTableRowClasses(e,n)).attr("transform",`translate(${l._fixedTableColumnsWidthPreceding})`).attr("width",c);_.on(p.node(),"pointerdown"+l._EVENT_NAMESPACE,(function(){l._setActiveHorizontalBodyAreaIndex(l._determineBodyAreaIndex(e))}));var m="m"===s.cellDefinitionType[0]?R.Map:"b"===s.cellDefinitionType?R.BaseLevel:"l"===s.cellDefinitionType?R.LeafDefault:"u"===s.cellDefinitionType[0]?R.FromCallback:R.GroupingLevel,f=[t.attr("class"),h.TAP_EVENT_CLASS_NAME,h.CONTEXTMENU_EVENT_CLASS_NAME,h.DOUBLE_TAP_EVENT_CLASS_NAME,h.PRESS_PAN_EVENT_CLASS_NAME].join(" ");t.attr("class",f),l.options.isForExport||t.attr("clip-path","url(#"+l.NXXXXX.WIDTH_CLIPPATH_ID[L.Table]+l._uniqueID+")"),u.isIOS||l._pointerEnterAndLeaveListenersForRows?.[l._determineBodyAreaIndex(e)].add(t.node()),t.node()[h.HANDLER_FUNCTION_PROPERTY+l._EVENT_NAMESPACE]=function(t){try{let a=t.srcEvent??t;switch(t.type){case h.TAP_EVENT_NAME:case h.CONTEXTMENU_EVENT_NAME:case h.DOUBLE_TAP_EVENT_NAME:case h.PAN_EVENT_NAME+"start":{let t=l._element.getBoundingClientRect(),n=l._element.ownerDocument.defaultView;var i=a.pageX-(t.left+n.pageXOffset),o=l._detectCellIndexInTableRowByMouseX(e,i);break}}if(-1!==o)switch(t.type){case h.TAP_EVENT_NAME:l._temporaryMarkVisible=void 0,l._triggerEvent({sender:e.item,eventType:"tap",elem:this,elemType:n,event:t.srcEvent,cellIndex:o,hammerEvent:t}),l._isRowSelectable(e)&&l._selectRow(e,t);break;case h.CONTEXTMENU_EVENT_NAME:l._temporaryMarkVisible=void 0,l._triggerEvent({sender:e.item,eventType:"contextmenu",elemType:n,cellIndex:o,event:t}),l.options.preventDefaultOnContextMenuEvents&&(t.stopPropagation(),t.preventDefault());break;case h.DOUBLE_TAP_EVENT_NAME:l._triggerEvent({sender:e.item,eventType:"doubletap",elem:this,elemType:n,event:t.srcEvent,cellIndex:o,hammerEvent:t});break;case h.PAN_EVENT_NAME+"start":l._temporaryMarkVisible=void 0,l._onRowDragStart(t,e);break;case h.PAN_EVENT_NAME+"move":l._rowDragging?.isInitiated()?l._onRowDragMove(t):t[h.CANCEL_PROPERTY]=!0;break;case h.PAN_EVENT_NAME+"end":case h.PAN_EVENT_NAME+"cancel":l._onRowDragEnd(t);break;case h.PRESS_EVENT_NAME:l._temporaryMarkVisible=void 0,l._onRowPress(t,e);break;case h.PRESS_EVENT_NAME+"up":l._onRowPressUp(t,e)}}catch(e){l._handleException(e,"onEventDispatch_tableRow")}}}if(e.totalHeight){var E,T;r||(E=t.append("g").attr("clip-path","url(#"+l.NXXXXX.SCROLLABLE_TABLE_CLIPPATH_ID+l._uniqueID+")").append("g").attr("class",l.NXXXXX.SCROLLABLE_TABLE_ROW_CLASS).attr("transform","translate("+-l._layoutColumns[L.Table].scrollStart()+")"),T=E.append("g").attr("class",l.NXXXXX.TABLE_ROW_CONTENT_CLASS));var C,I,D=0;if(l._fixedTableColumnCountPreceding){var v;r||(C=t.append("g").attr("class",l.NXXXXX.FIXED_TABLE_ROW_PRECEDING_CLASS),v=C.append("g").attr("class",l.NXXXXX.TABLE_ROW_CONTENT_CLASS));var A=l.options.tableDefinition.fixedColumnsPreceding;A.cellDefinitions.forEach((function(t,i){var a,n=l._determineTableCellWidth(t);if(!r){a=v.append("g").attr("class",l._enrichClass(e,`${l.NXXXXX.TABLE_CELL_CLASS} ${l.NXXXXX.ROW_HEIGHT_PROP_CLASS}`,{elemType:g.TableCell,level:e.level})).attr("transform","translate("+D+")").property(O,D).datum(t);var s=l._getOrCreateClipPathForColumn("f0",i);l.setClipPathAttrOnElemD3WithRefCount(a,s),o.select("#"+s+" rect").datum(n).attr("width",n),a.append("rect").attr("class",`${l.NXXXXX.TABLE_CELL_BACKGROUND_RECT_CLASS} ${l.NXXXXX.ROW_HEIGHT_PROP_CLASS}`).attr("width",n);var d=a.append("g").attr("class",l.NXXXXX.TABLE_CELL_CONTENT_CLASS);l._fillTableCellContent(e,a,d,t,n,i,A,R.FixedColumnsPreceding)}D+=n}))}if(E){var y=0;if(!this.options.treeLinesVisible){if(!r){let t=l.options.groupCellWidth,i=`${l.NXXXXX.TABLE_GROUP_CELL_CLASS} ${l.NXXXXX.ROW_HEIGHT_PROP_CLASS}`,o=e.level-1;for(var S=0;S<=o;S++)E.append("rect").attr("class",l._enrichClass(e,i,{elemType:g.GroupCell,level:S})).attr("transform",`translate(${D})`).attr("width",t),!l.options.separationLinesBetweenGroupCells||S===o&&e.isDetailingRow||E.append("line").attr("class",`${l.NXXXXX.TABLE_GROUP_CELL_LINE_CLASS} ${l.NXXXXX.ROW_HEIGHT_PROP_CLASS}`).attr("transform",`translate(${D+t-V})`),S===o&&e.isDetailingRow&&e.parentRowDataItem.isDetailingRow&&E.append("line").attr("class",`${l.NXXXXX.TABLE_GROUP_CELL_LINE_CLASS} ${l.NXXXXX.ROW_HEIGHT_PROP_CLASS}`).attr("transform",`translate(${D+1-V})`),D+=l.options.groupCellWidth}y=e.level*l.options.groupCellWidth}}if(this._fillTableRowContent(e,r?void 0:T,d),l._worldViewDivElem){var X=e.worldViewCache,x=l._getTopOfRowDataItemForWorldView(e),P={left:l._fixedTableColumnsWidthPreceding,top:x.top,topPx:x.topPx,width:l.options.groupCellWidth,height:e.totalHeight};if(!l.options.treeLinesVisible){var N=[],W=e;for(S=0;S<e.level;S++)W=W.parentRowDataItem,N.push(W);for(;W=N.pop();){if(void 0===W.worldViewFillColor){var B=l._determineTableRowDefinitionInfo(e);l._fillTableRowContent(W,void 0,B.rowDefinition)}var F=W.worldViewFillColor;"transparent"!==F&&"none"!==F&&X.push({method:"fillRect",args:[w.Content,{fillStyle:F},Object.assign({},P)]}),P.left+=l.options.groupCellWidth}}var H=e.worldViewFillColor;"transparent"!==H&&"none"!==H&&(P.width=l._scrollableTableColumnsWidth+l._fixedTableColumnsWidthSucceeding,l.options.treeLinesVisible||(P.width-=l.options.groupCellWidth*e.level),X.push({method:"fillRect",args:[w.Content,{fillStyle:H},P]}))}if(E){var G=l._hasCollapseExpandButton(e,!1),k=l.options.detailingRowsVisible&&l._hasCollapseExpandButton(e,!0);if(!r){var z=e===i&&(a===b.RowCollapsed||a===b.RowExpanded),U=e===i&&(a===b.RowLeavesCollapsed||a===b.RowLeavesExpanded);G&&l._createCollapseExpandButton(e,E,z,d.cellDefinitions,!1,k),k&&l._createCollapseExpandButton(e,E,U,d.cellDefinitions,!0,G)}var Y=(l.options.treeLinesVisible&&l.options.detailingRowsVisible?Math.max(l.options.buttonExtent,l.options.firstCellLeftOffset):l.options.firstCellLeftOffset)+l.options.groupCollapseButtonWidth;l.options.treeLinesVisible&&(Y+=e.level*this.options.treeLevelIndent),G&&k&&!l.options.treeLinesVisible&&(Y+=l.options.buttonExtent),d&&d.cellDefinitions.forEach((function(t,i){var a,_=l._PE_IsLastColumn(i,d);if(_?(a=l._scrollableTableColumnsWidth-(D-l._fixedTableColumnsWidthPreceding),y=0):a=l._determineTableCellWidth(t),!r){var c=T.append("g").attr("class",l._enrichClass(e,`${l.NXXXXX.TABLE_CELL_CLASS} ${l.NXXXXX.ROW_HEIGHT_PROP_CLASS}`,{elemType:g.TableCell,level:e.level})).property(O,D).attr("transform","translate("+D+")").datum(t),u=l._getOrCreateClipPathForColumn(s.cellDefinitionTypeForClipPath||s.cellDefinitionType,i,e.level);l.setClipPathAttrOnElemD3WithRefCount(c,u);var p={};if(p[h.TAP_EVENT_NAME]=function(t){l._isRowSelectable(e)&&l._selectRow(e,t)},l._registerTapEvents(c,{sender:e.item,elemType:n,cellIndex:i},p),c.append("rect").attr("class",`${l.NXXXXX.TABLE_CELL_BACKGROUND_RECT_CLASS} ${l.NXXXXX.ROW_HEIGHT_PROP_CLASS}`).attr("width",l._determineLastColumnWidth(_,Math.max(a-y,0))),0===i&&e.isDetailingRow){var f=e.parentRowDataItem;let t=1.5*l._colexpButtonSize;c.append("path").attr("d",`M${-V},0H${1-V}V${e.totalHeight/2-t}l${l._colexpButtonSize},${t}l-${l._colexpButtonSize},${t}V${e.totalHeight}H${-V}`).attr("class",l._enrichClass(e,l.NXXXXX.LEAVES_INDICATOR_CLASS,{elemType:g.LeavesIndicator,level:f.level}))}var w=c.append("g").attr("class",l.NXXXXX.TABLE_CELL_CONTENT_CLASS);i||w.attr("transform","translate("+(i?0:Y)+")"),l._fillTableCellContent(e,c,w,t,a,i,d,m),o.select("#"+u+" rect").datum(l._determineLastColumnWidth(_,a-y)).attr("width",l._determineLastColumnWidth(_,Math.max(a-y,0)))}D+=a-y,y=0}))}if(l._fixedTableColumnCountSucceeding){if(!r)var $=(I=t.append("g").attr("class",l.NXXXXX.FIXED_TABLE_ROW_SUCCEEDING_CLASS)).append("g").attr("class",l.NXXXXX.TABLE_ROW_CONTENT_CLASS);D=l._determineXOffsetOfFirstFixedSucceedingTableColumn();var K=l.options.tableDefinition.fixedColumnsSucceeding;K.cellDefinitions.forEach((function(t,i){var a=l._determineTableCellWidth(t);if(!r){var n=$.append("g").attr("class",l._enrichClass(e,`${l.NXXXXX.TABLE_CELL_CLASS} ${l.NXXXXX.ROW_HEIGHT_PROP_CLASS}`,{elemType:g.TableCell,level:e.level})).property(O,D).attr("transform","translate("+Math.max(D,l._fixedTableColumnsWidthPreceding)+")").datum(t);if(!1!==t.clippingEnabled){var s=l._getOrCreateClipPathForColumn("f1",i);l.setClipPathAttrOnElemD3WithRefCount(n,s),o.select("#"+s+" rect").attr("width",a)}var d=n.append("g").attr("class",l.NXXXXX.TABLE_CELL_CONTENT_CLASS);l._fillTableCellContent(e,n,d,t,a,i,K,R.FixedColumnsSucceeding)}D+=a}))}if(l._updateRowSelection(e),!r){var q=l._determineRowLevelClass(e);if(E){var j=this.options.treeLinesVisible||this.options.groupCellsWithHorizontalSeparationLine?0:e.level*l.options.groupCellWidth;E.append("line").attr("class",l.NXXXXX.SEPARATION_LINE_CLASS+" "+q).attr("transform","translate("+l._fixedTableColumnsWidthPreceding+")").attr("x1",j).attr("x2",l._determineScrollableWidth()).attr("y1",M).attr("y2",M).style("visibility",l.options.rowSeparationLinesVisible?null:"hidden"),l.options.treeLinesVisible&&this._createTreeview(e,E)}C&&C.append("line").attr("class",l.NXXXXX.SEPARATION_LINE_CLASS+" "+q).attr("x2",l._fixedTableColumnsWidthPreceding).attr("y1",M).attr("y2",M).style("visibility",l.options.rowSeparationLinesVisible?null:"hidden"),I&&I.append("line").attr("class",l.NXXXXX.SEPARATION_LINE_CLASS+" "+q).attr("transform","translate("+l._determineSucceedingColumnXOffset()+")").attr("x2",l._fixedTableColumnsWidthSucceeding).attr("y1",M).attr("y2",M).style("visibility",l.options.rowSeparationLinesVisible?null:"hidden")}}},_determineRowLevelClass:function(e){return e.isDetailingRow?`${this.NXXXXX.DETAILING_ROW_CLASS} ${this.NXXXXX.DETAILING_LEVEL_CLASS}${e.detailingLevel} ${e.detailingRowDataItems?this.NXXXXX.DETAILING_PARENT_CLASS:this.NXXXXX.DETAILING_LEAF_CLASS}`:`${this.NXXXXX.LEVEL_CLASS_PREFIX}${e.level}`},_determineTableRowClasses:function(){return`${this.NXXXXX.TABLE_ROW_BACKGROUND_RECT_CLASS} ${this.NXXXXX.ROW_HEIGHT_PROP_CLASS}`},_removeRowCompletely:function(e,t){var i=this;if(e.foregroundRowElem){var a=o.select(e.foregroundRowElem).select("."+i.NXXXXX.TABLE_ROW_CLASS).node(),n=i._determineBodyAreaIndex(e);i._pointerEnterAndLeaveListenersForRows[n].remove(a)}i._super(e,t)},_isRowSelectable:function(e){return e.item.selectable??this._getDefaultOptionValueWithExternalType(e,this.options.defaultRowItemSelectableByExternalTypeMap,this.options.defaultRowItemSelectable)},_determineLastColumnWidth:function(){},_determineTableRowWidth:function(){},_determineXOffsetOfFirstFixedSucceedingTableColumn:function(){},_determineScrollableWidth:function(){},_determineSucceedingColumnXOffset:function(){},_detectCellIndexInTableRowByMouseX:function(e,t){var i=this,o=-1;if((t=t/i.options.visualZoomFactor-i._fixedTableColumnsWidthPreceding)>=0){t+=i._layoutColumns[L.Table].scrollStart();var a=e.tableRowDefinition,n=i.options.treeLinesVisible?0:e.level*i.options.groupCellWidth,l=0,r=a.cellDefinitions.length;a&&n<=t&&a.cellDefinitions.every((function(e,a){return o++,l+=i._determineTableCellWidth(e),!(a===r-1||t<l)}))&&(o=-1)}return o},_onPointerEnterOnTableRow:function(e,t){var i=this;try{if(!i.isInInteraction()){var a=o.select(e).datum();let _=i._element.getBoundingClientRect(),c=i._element.ownerDocument.defaultView;var n=t.pageX-(_.left+c.pageXOffset),l=o.select(t.target.parentElement).classed(i.NXXXXX.IMAGE_LIST_IMAGE_GROUP_CLASS)?-1:i._detectCellIndexInTableRowByMouseX(a,n),r=i._tableMouseEnterCell;if(i._tableMouseEnterCell={rowDataItem:a,cellIndex:l},r.rowDataItem===i._tableMouseEnterCell.rowDataItem&&r.cellIndex===i._tableMouseEnterCell.cellIndex||(r.rowDataItem&&(r.rowDataItem!==i._tableMouseEnterCell.rowDataItem||l<0)&&i._onPointerLeaveOnTableRow(null,t),i.options.onEventFunc&&l>=0&&i._triggerEvent({sender:a.item,event:t,eventType:"tooltip",elem:e,elemType:g.TableRow,cellIndex:l})),-1!=l){var s=i._getActualRowInteractions(a);if(null==i._finalRowInteractions){var d=i._pointToSVGRelative(a.foregroundRowElem,t.pageX,t.pageY);i._finalRowInteractions=i._determineRowInteractions(a,s,d,t)}i._setRowInteractionCursor(i._finalRowInteractions)}}}catch(e){i._handleException(e,"onPointerEnterOnTableRow")}},_onPointerLeaveOnTableRow:function(e,t){var i=this;i.isInInteraction()||(delete i._finalRowInteractions,i._setRowInteractionCursor(T.None));try{(e&&o.select(e).datum()!==i._tableMouseEnterCell.rowDataItem||!i._tableMouseEnterCell.rowDataItem)&&1===i._tableMouseEnterCell.cellIndex||(i.options.onEventFunc&&i._triggerEvent({sender:null,eventType:"tooltip",elem:null,event:t}),e&&(i._tableMouseEnterCell={rowDataItem:void 0,cellIndex:-1}))}catch(e){i._handleException(e,"onPointerLeaveOnTableRow")}},_updateRowSelection:function(e,t){var i,o=this;if(t!==b.WorldView){o._checkForVisibilityOfUnselectedRowCover(e);var a=o._determineTableRowElemD3(e);a.selectAll("."+o.NXXXXX.SELECTED_ROW_CLASS).remove()}if(e.worldViewSelectionCacheMap&&(i=!!e.worldViewSelectionCacheMap["R"+e.id],delete e.worldViewSelectionCacheMap["R"+e.id]),e.selected){if(t!==b.WorldView&&o.options.rowSelectionWithFrames){var n=o.actualTableViewWidth(),l=o._fixedTableColumnsWidthPreceding+(o.options.treeLinesVisible?0:Math.max(0,e.level*o.options.groupCellWidth-o._layoutColumns[L.Table].scrollStart()));a.append("rect").attr("x",l).attr("width",n-l).attr("y",0).attr("height",o._selectedTableRowDataItemsBorderWidth).attr("fill","url(#"+o.NXXXXX.SELECTION_TOP_GRADIENT_CLIPPATH_ID+o._uniqueID+")").classed(o.NXXXXX.SELECTED_ROW_CLASS,!0),a.append("rect").attr("x",l).attr("width",o._selectedTableRowDataItemsBorderWidth).attr("y",0).attr("height",e.totalHeight).attr("fill","url(#"+o.NXXXXX.SELECTION_LEFT_GRADIENT_CLIPPATH_ID+o._uniqueID+")").classed(o.NXXXXX.SELECTED_ROW_CLASS,!0),a.append("rect").attr("x",l).attr("width",n-l).attr("y",e.totalHeight-o._selectedTableRowDataItemsBorderWidth).attr("height",o._selectedTableRowDataItemsBorderWidth).attr("fill","url(#"+o.NXXXXX.SELECTION_BOTTOM_GRADIENT_CLIPPATH_ID+o._uniqueID+")").classed(o.NXXXXX.SELECTED_ROW_CLASS,!0),a.append("rect").attr("x",n-o._selectedTableRowDataItemsBorderWidth+1).attr("width",o._selectedTableRowDataItemsBorderWidth).attr("y",0).attr("height",e.totalHeight).attr("fill","url(#"+o.NXXXXX.SELECTION_RIGHT_GRADIENT_CLIPPATH_ID+o._uniqueID+")").classed(o.NXXXXX.SELECTED_ROW_CLASS,!0)}if(o._worldViewDivElem){i=!0;var r=o._getTopOfRowDataItemForWorldView(e);e.worldViewSelectionCacheMap||(e.worldViewSelectionCacheMap={}),e.worldViewSelectionCacheMap["R"+e.id]={method:"drawRect",args:[{left:0,top:r.top,topPx:r.topPx,width:o.actualTableWidth(),height:e.totalHeight}]}}}i&&o._renderCachedRowInWorldView(e,"S"),!this&&this._super()},_determineTableRowElemD3:function(e){return o.select(e.foregroundRowElem)},_getAllTableCellDefinitionsForLevel:function(e){var t=this,i=t.options.tableDefinition,o=[];if(t._fixedTableColumnCountPreceding&&o.push(...i.fixedColumnsPreceding.cellDefinitions),e>=0&&i.groupingLevels&&Array.isArray(i.groupingLevels)&&Array.isArray(i.groupingLevels[e].cellDefinitions))o.push(...i.groupingLevels[e].cellDefinitions);else{let e=t._determineTableRowDefinitionForColumnTitles();e&&Array.isArray(e.cellDefinitions)&&o.push(...e.cellDefinitions)}return t._fixedTableColumnCountSucceeding&&o.push(...i.fixedColumnsSucceeding.cellDefinitions),o},_createTableTitleCell:function(e,t,i,a,n,l,r,s,d,_,c){var h,u,p=this;if(u=p._determineTableCellWidth(n),"blm".indexOf(t[0])>=0&&r)h=p._determineLastTableCellWidth(l);else if(h=u,"f0"===t&&r)h++;else if("blm".indexOf(t[0])>=0){var w=p._determineLastTableCellWidth(l);h=Math.min(h,w)}var E="tt"!==t?p._getOrCreateClipPathForColumn("t"+t,a):void 0,g=e.append("g").attr("class",p.NXXXXX.TABLE_TITLE_CELL_CLASS).property(O,l).attr("transform","translate("+("f1"!==t?l:Math.max(l,p._fixedTableColumnsWidthPreceding))+")").datum(n);if(E&&(p.setClipPathAttrOnElemD3WithRefCount(g,E),o.select("#"+E+" rect").attr("width","f"!==t[0]?p._determineLastColumnWidth(r,h):h)),g.append("rect").attr("class",p.NXXXXX.TABLE_TITLE_RECT_CLASS).attr("height",i).attr("width",p._determineLastColumnWidth(r,h)),"f0"===t&&d&&s?.length&&p._fillImageListCell(null,g,s,p._determineLastColumnWidth(r,h),i),!t.startsWith("f")&&(p.options.interactiveSwitchingOfSortOrderEnabled&&p._registerTapEvents(g,{sender:"TableTitleCell",cellDefinition:n,cellIndex:a},null),p.options.sortingIndicatorVisible&&_===n.rab_sortSource&&c)){var T=g.append("path").attr("class",`${p.NXXXXX.TABLE_TITLE_SORTING_INDICATOR_CLASS}`).attr("d","M8,0h2v28h7l-8,8l-8,-8h7z");switch(c){case 1:T.attr("transform","translate(2,2) scale(0.5) rotate(180,9,18)");break;case 2:T.attr("transform","translate(2,2) scale(0.5)")}T.text("")}var R=n.titleText||n.title,I=g.append("text").attr("class","tt"===t?p.NXXXXX.FIXED_TABLE_TITLE_TEXT_CLASS:p.NXXXXX.TABLE_TITLE_TEXT_CLASS).attr("dy","1em").attr("x","tt"===t?"0.5em":u/2).attr("data-text",null==R?"":R.toString()).attr("data-wrap-mode","n");if("tt"!==t){var D=r&&8e4===p._determineLastTableCellWidth(l)?C.Center:n.horizontalTitleAlignment;p._setHorizontalAlignmentOnCell(I,D,C.Center,u)}if(f.wrapSVGText(I),I.selectAll("tspan").attr("y",(i-f.calculateSVGTextHeight(I))/2),"blm".indexOf(t[0])>=0&&p._shouldExistSplitterForLastColumn(r)){var v=e.append("g").attr("class",p.NXXXXX.TABLE_COLUMN_SPLITTER_PARENT_CLASS),A=r?Math.ceil(p.options.columnSplitterWidth/2):0,y=p._actualScaledMainHeight();let o=v.node();o._splitterWidget=new m(o,{classes:p.NXXXXX.TABLE_COLUMN_SPLITTER_CLASS,cursorValue:"col-resize",divElemForCursor:p._element,visualZoomFactor:p.options.visualZoomFactor,min:l+(null==n.minimumWidth?p._minimumTableColumnWidth:n.minimumWidth),max:p.options.splitterEnabled?null==n.maximumWidth?1/0:l+n.maximumWidth:0,position:{x:l+h-A,y:0},width:p.options.columnSplitterWidth,height:i,phantomHeight:y,orientation:m.Orientation.Vertical,startDrag:function(){p._tableColumnWidthAtStartDrag=p._determineTableCellWidth(n),p._tableViewWidthAtStartDrag=p._layoutColumns[L.Table].innerViewExtent(),p._tableScrollStartAtStartDrag=p._layoutColumns[L.Table].scrollStart()},changed:function(e,t){p.options.virtualized||p._onColumnSplitterChanged(o[p.NXXXXX.COLUMN_INDEX_DATA_PROPERTY],t.newValue-t.oldValue)},dragged:function(e,t){p.options.virtualized&&p._onColumnSplitterChanged(o[p.NXXXXX.COLUMN_INDEX_DATA_PROPERTY],t.newValue-t.oldValue)},endDrag:function(e,t){p._onColumnSplitterDropped(o[p.NXXXXX.COLUMN_INDEX_DATA_PROPERTY],t.canceled,p._determineTableCellWidth(n),p._tableColumnWidthAtStartDrag),p._tableColumnWidthAtStartDrag=void 0,p._tableViewWidthAtStartDrag=void 0,p._tableScrollStartAtStartDrag=void 0},useOwnEventDispatcher:!1}),o[p.NXXXXX.COLUMN_INDEX_DATA_PROPERTY]=`${t},${a}`,v.datum(n)}return l+h},_determineLastTableCellWidth:function(){},_shouldExistSplitterForLastColumn:function(e){return!e},updateTableTitle:function(e){if(e)this._tableDefinitionChanged();else for(var t=0;t<=1;t++)this.options.updateSuspended?this._tableTitleD3s[t]?.selectAll("*").remove():this._titleVisible(t)&&this._createTableTitle(t)},_tableDefinitionChanged:function(e,t){var i=this,o=this.options.tableDefinition;if(i.options.updateSuspended)i._cachedTableDefinitionChangedArguments?(e||(i._cachedTableDefinitionChangedArguments[0]=!1),t||(i._cachedTableDefinitionChangedArguments[1]=!1)):i._cachedTableDefinitionChangedArguments=Array.prototype.slice.call(arguments);else{e||(Object.keys(this._tableRowDefinitionIDToDefinitionMap).forEach((function(e){"u"!==e[0]&&(delete i._tableRowDefinitionIDToDefinitionMap[e],delete i._tableRowDefinitionIDToDataMap[e])})),i._fixedTableColumnCountPreceding=0,i._fixedTableColumnsWidthPreceding=0,i._fixedTableColumnCountSucceeding=0,i._fixedTableColumnsWidthSucceeding=0),i._baseLevelTableColumnCount=0,i._scrollableTableColumnsWidth=0;var a=i._tableWidth;if(i._tableWidth=0,o){if(e||(Array.isArray(o.groupingLevels)&&o.groupingLevels.forEach((function(e,t){i._tableRowDefinitionIDToDefinitionMap["g"+t]=e,i._tableRowDefinitionIDToDataMap["g"+t]={usageCount:0}})),o.baseLevel&&(i._tableRowDefinitionIDToDefinitionMap.b=o.baseLevel,i._tableRowDefinitionIDToDataMap.b={usageCount:0}),o.fixedColumnsPreceding&&Array.isArray(o.fixedColumnsPreceding.cellDefinitions)&&(i._fixedTableColumnCountPreceding=o.fixedColumnsPreceding.cellDefinitions.length,o.fixedColumnsPreceding.cellDefinitions.forEach((function(e){i._fixedTableColumnsWidthPreceding+=i._determineTableCellWidth(e)}))),o.fixedColumnsSucceeding&&Array.isArray(o.fixedColumnsSucceeding.cellDefinitions)&&(i._fixedTableColumnCountSucceeding=o.fixedColumnsSucceeding.cellDefinitions.length,o.fixedColumnsSucceeding.cellDefinitions.forEach((function(e){i._fixedTableColumnsWidthSucceeding+=i._determineTableCellWidth(e)})))),"number"==typeof i.options.tableWidth&&!isNaN(i.options.tableWidth)&&isFinite(i.options.tableWidth))i._scrollableTableColumnsWidth=Math.max(0,i.options.tableWidth-i._fixedTableColumnsWidthPreceding-i._fixedTableColumnsWidthSucceeding);else if(o.baseLevel&&Array.isArray(o.baseLevel.cellDefinitions)&&(i._baseLevelTableColumnCount=o.baseLevel.cellDefinitions.length,i._tableRowDefinitionWithColumnTitlesID||o.baseLevel.cellDefinitions.forEach((function(e){i._scrollableTableColumnsWidth+=i._determineTableCellWidth(e)}))),i._isTableWithRowDefinitionsMap())if(delete i._tableRowDefinitionWithColumnTitlesID,o.rowDefinitionIDWithColumnTitles){var n=o.rowDefinitionsMap[o.rowDefinitionIDWithColumnTitles];if(n&&Array.isArray(n.cellDefinitions)){var l=0;n.cellDefinitions.forEach((function(e){l+=i._determineTableCellWidth(e)})),i._scrollableTableColumnsWidth=Math.max(i._scrollableTableColumnsWidth,l)}i._determineRowDataItems().forEach(((e,t)=>{void 0===e.tableRowDefinition&&t&&(e.tableRowDefinition=null)}))}else{var r={};i._determineRowDataItems().forEach((function(e){if("string"==typeof e.item.tableRowDefinitionID){let t=e.item.tableRowDefinitionID;o.rowDefinitionsMap[t]&&(r[t]=!0),i._determineTableRowDefinitionInfo(e)}else if(null!=e.item.externalType){let t=i.options.defaultTableRowDefinitionIDsByExternalTypeMap[e.item.externalType];o.rowDefinitionsMap[t]&&(r[t]=!0),i._determineTableRowDefinitionInfo(e)}})),Object.keys(o.rowDefinitionsMap).forEach((function(e){if(r[e]){var t=o.rowDefinitionsMap[e];if(t&&Array.isArray(t.cellDefinitions)){var a=0;t.cellDefinitions.forEach((function(e){a+=i._determineTableCellWidth(e)})),i._scrollableTableColumnsWidth=Math.max(i._scrollableTableColumnsWidth,a)}}}))}else i._tableRowDefinitionWithColumnTitlesID&&i._tableRowDefinitionIDToDefinitionMap[i._tableRowDefinitionWithColumnTitlesID].cellDefinitions.forEach((function(e){i._scrollableTableColumnsWidth+=i._determineTableCellWidth(e)}));!i._tableRowDefinitionWithColumnTitlesID&&o.baseLevel&&Array.isArray(o.baseLevel.cellDefinitions)&&(i._baseLevelTableColumnCount=o.baseLevel.cellDefinitions.length);var s=i._scrollableTableColumnsWidth+i._fixedTableColumnsWidthPreceding+i._fixedTableColumnsWidthSucceeding;a=a!==s&&a,i._tableWidth=s,i.options.updateSuspended?i._doResizeNeededWhileUpdateSuspended=!0:(t||(i._tableViewChanged(!0),i.updateTableTitle(),o.rowDefinitionsMap&&Object.keys(o.rowDefinitionsMap).forEach((function(e){var t=o.rowDefinitionsMap[e];t&&Array.isArray(t.cellDefinitions)&&t.cellDefinitions.forEach((function(t,o){var a=i._determineTableCellWidth(t);i._defsD3.select("#"+i._getOrCreateClipPathForColumn("m"+e,o,0)+" rect").datum(a).attr("width",a)}))})),o.baseLevel&&o.baseLevel.cellDefinitions.forEach((function(e,t){var o=i._determineTableCellWidth(e);i._defsD3.select("#"+i._getOrCreateClipPathForColumn("b",t,0)+" rect").datum(o).attr("width",o)})),!i._isTableWithRowDefinitionsMap()&&Array.isArray(o.groupingLevels)&&o.groupingLevels.forEach((function(e,t){Array.isArray(e.cellDefinitions)&&e.cellDefinitions.forEach((function(e,o){var a=i._determineTableCellWidth(e);i._defsD3.select("#"+i._getOrCreateClipPathForColumn("g"+t,o)+" rect").datum(a).attr("width",a)}))}))),i.options.isForExport||i._scrollableTableClipPathRectD3.attr("x",i._fixedTableColumnsWidthPreceding).attr("width",Math.max(0,i.actualTableViewWidth()-i._fixedTableColumnsWidthPreceding-i._fixedTableColumnsWidthSucceeding)))}if(!1!==a){var d=i.options.isForExport?i._layoutColumns[L.Table].innerViewExtent():i._determineTableRowWidth();d=Math.max(0,d-i._fixedTableColumnsWidthPreceding),i._foregroundBodyD3s.forEach((function(e){e.selectAll("."+i.NXXXXX.TABLE_ROW_CLASS+" ."+i.NXXXXX.TABLE_ROW_BACKGROUND_RECT_CLASS).attr("width",d)})),i._trigger("tableWidthChanged",null,{newValue:i._tableWidth,oldValue:a}),i._provideChartSizeToWorldView()}}},_determineTableCellWidth:function(e){var t=parseInt(e.width);return isNaN(t)||!isFinite(t)?t=200:t<0&&(t=0),t},_createTableTitle:function(e){var t=this,i=t.options.tableDefinition;t._tableTitleD3s[e].selectAll("*").remove();var a=t._tableTitleD3s[e].append("g");if(this._scrollableTableTitleD3s||(this._scrollableTableTitleD3s=[]),t._scrollableTableTitleD3s[e]=a.append("g").attr("class",t.NXXXXX.SCROLLABLE_TABLE_TITLE_CLASS),i){var n=function(i){var o=("f0"===i.cellDefinitionType?t._tableTitleD3s[e].insert("g",":first-child"):t._tableTitleD3s[e].append("g")).attr("class",i.titleClass),a=i.tmpXOffset;return i.rowDefinition.cellDefinitions.forEach((function(n,l){a=t._createTableTitleCell(o,i.cellDefinitionType,t._actualTitleHeight(e),l,n,a,l===i.rowDefinition.cellDefinitions.length-1,i.symbolColumnTitleImageURLs,i.symbolColumnTitleVisible)})),i.rowDefinition.cellDefinitions.forEach((function(e,o){var a=t._determineTableCellWidth(e);t._defsD3.select("#"+t._getOrCreateClipPathForColumn(i.cellDefinitionType,o)+" rect").datum(a).attr("width",a)})),o};let h=!(i.rowDefinitionsMap&&i.rowDefinitionsMap[i.rowDefinitionIDWithColumnTitles]||t._tableRowDefinitionWithColumnTitlesID||null==i.titleText),u=0;if(!t._fixedTableColumnsWidthPreceding||!i.symbolColumnTitleVisible&&h||(t._fixedTableTitlePrecedingD3=n({titleClass:t.NXXXXX.FIXED_TABLE_TITLE_PRECEDING_CLASS,rowDefinition:i.fixedColumnsPreceding,cellDefinitionType:"f0",tmpXOffset:0,symbolColumnTitleImageURLs:i.symbolColumnTitleImageURLs,symbolColumnTitleVisible:i.symbolColumnTitleVisible}),t._fixedTableTitlePrecedingD3.select("."+t.NXXXXX.TABLE_TITLE_RECT_CLASS).style("fill",i.symbolColumnTitleBackgroundColor),u=t._fixedTableColumnsWidthPreceding),h)t.options.isForExport||t._scrollableTableTitleD3s[e].attr("clip-path","url(#"+t.NXXXXX.WIDTH_CLIPPATH_ID[L.Table]+t._uniqueID+")"),t._createTableTitleCell(t._scrollableTableTitleD3s[e],"tt",t._actualTitleHeight(e),0,{width:t.actualTableViewWidth()-u,titleText:i.titleText},u,!1);else{var l;t.options.isForExport||a.attr("clip-path","url(#"+t.NXXXXX.SCROLLABLE_TABLE_CLIPPATH_ID+t._uniqueID+")"),t._scrollableTableTitleD3s[e].attr("transform","translate("+-t._layoutColumns[L.Table].scrollStart()+")");var r="b";if(t._tableRowDefinitionWithColumnTitlesID){var s=t._tableRowDefinitionIDToDefinitionMap[t._tableRowDefinitionWithColumnTitlesID];l=s.cellDefinitions}else if(i.rowDefinitionsMap){if((s=i.rowDefinitionsMap[i.rowDefinitionIDWithColumnTitles])&&Array.isArray(s.cellDefinitions)&&(l=s.cellDefinitions,r="m"+i.rowDefinitionIDWithColumnTitles),!l&&null!=t.options.defaultExternalType){let e=t.options.defaultTableRowDefinitionIDsByExternalTypeMap?.[t.options.defaultExternalType];null!=e&&(l=i.rowDefinitionsMap[e]?.cellDefinitions)}!l&&i.baseLevel&&Object.keys(i.rowDefinitionsMap).every((function(e){return i.rowDefinitionsMap[e]!==i.baseLevel||(l=i.baseLevel.cellDefinitions,r="m"+e,!1)}))}!l&&i.baseLevel&&(l=i.baseLevel.cellDefinitions);var d=t._fixedTableColumnsWidthPreceding;Array.isArray(l)&&l.forEach((function(o,a){d=t._createTableTitleCell(t._scrollableTableTitleD3s[e],r,t._actualTitleHeight(e),a,o,d,a===l.length-1,void 0,void 0,i.rowSortPropertyName,i.rowSortMode)}));var _=Array.prototype.slice.call(t._scrollableTableTitleD3s[e].node().childNodes),c=_.slice();_.sort((function(e,i){var a=o.select(e).classed(t.NXXXXX.TABLE_COLUMN_SPLITTER_PARENT_CLASS)?1:0,n=o.select(i).classed(t.NXXXXX.TABLE_COLUMN_SPLITTER_PARENT_CLASS)?1:0;return a-n?a-n:c.indexOf(e)-c.indexOf(i)})),o.selectAll(_).order(),t._fixedTableColumnsWidthSucceeding&&(t._fixedTableTitleSucceedingD3=n({titleClass:t.NXXXXX.FIXED_TABLE_TITLE_SUCCEEDING_CLASS,rowDefinition:i.fixedColumnsSucceeding,cellDefinitionType:"f1",tmpXOffset:t._layoutColumns[L.Table].innerViewExtent()-t._fixedTableColumnsWidthSucceeding}))}}},_onColumnSplitterDropped:function(e,t,i,o){var a=this;if(o!==i)if(t)a._onColumnSplitterChanged(e,o-i);else if(a._isTableWithRowDefinitionsMap()&&a.options.tableColumnWidthChangedFunc&&"m"===(e=e.split(","))[0][0]){var n=a._extendCallbackArgs({sender:a.options.tableDefinition.rowDefinitionsMap[e[0].substring(1)],columnIndex:+e[1],newWidth:i,oldWidth:o});a.options.tableColumnWidthChangedFunc.call(a,n)}},_determineTableRowDefinitionForColumnTitles:function(){var e=this,t=e.options.tableDefinition;if(t){var i;if(e._tableRowDefinitionWithColumnTitlesID&&(i=e._tableRowDefinitionIDToDefinitionMap[e._tableRowDefinitionWithColumnTitlesID]),!i&&t.rowDefinitionIDWithColumnTitles&&t.rowDefinitionsMap&&(i=t.rowDefinitionsMap[t.rowDefinitionIDWithColumnTitles]),!i&&null!=e.options.defaultExternalType&&t.rowDefinitionsMap){let o=e.options.defaultTableRowDefinitionIDsByExternalTypeMap?.[e.options.defaultExternalType];null!=o&&(i=t.rowDefinitionsMap[o])}return i||(i=t.baseLevel),i}},_onColumnSplitterChanged:function(e,t){var i=this;if(t||"lastColumn"===e){var a=i.options.tableDefinition,n=(e=e.split(","))[0],l=+e[1],r=i._determineTableRowDefinitionForColumnTitles(),s=r.cellDefinitions,d=i._getAllTableCellDefinitionsForLevel(-1),_="lastColumn"===n;_&&(n="b",l=s.length-1,t=0);var c=l;if(c+=i._fixedTableColumnCountPreceding,i._tableRowDefinitionWithColumnTitlesID||(i._scrollableTableColumnsWidth+=t),!_){if(l<s.length-1||null==i.options.tableWidth){var h=i._determineTableCellWidth(s[l]);s[l].width=h+t}if(null!=i.options.tableWidth){for(var u=s.length-1,p=(h=i._determineTableCellWidth(s[u]),0);--u>=0;)p+=i._determineTableCellWidth(s[u]);h=i.options.tableWidth-p-i._fixedTableColumnsWidthPreceding-i._fixedTableColumnsWidthSucceeding,s[s.length-1].width=h+t}i.options.tableDefinition.synchronizedColumns&&!i._tableRowDefinitionWithColumnTitlesID&&this.options.tableDefinition.groupingLevels.forEach((function(e){e.cellDefinitions[l]&&(e.cellDefinitions[l].width+=t)}))}var m,f=this._tableWidth;_||(this._tableWidth+=t,null!=this.options.tableWidth&&(this.options.tableWidth+=t),this._updateAfterColumnResize(l,s,t));for(var w=0;w<=1;w++)if(this._titleVisible(w)&&this._tableTitleD3s[w]){var E=this._tableTitleD3s[w].selectAll("."+this.NXXXXX.TABLE_TITLE_CELL_CLASS),g=[];E.each((function(){g.push(this)})),g.sort((function(e,t){var i=o.select(e).datum(),a=o.select(t).datum();return d.indexOf(i)-d.indexOf(a)})),E=o.selectAll(g);var T=0,I=i._determineSpecificActualTableWidth();if(a.rowDefinitionsMap&&a.rowDefinitionsMap[a.rowDefinitionIDWithColumnTitles]||null==a.titleText||i._tableRowDefinitionWithColumnTitlesID){let e=i._fixedTableColumnsWidthSucceeding?i._fixedTableColumnCountSucceeding:0;E.each((function(t,a){a===E.size()-e&&(T=I-i._fixedTableColumnsWidthSucceeding);var n=o.select(this),l=i._determineTableCellWidth(t);a===E.size()-e-1&&(l=i._determineLastColumnWidth(!0,Math.max(0,Math.max(I,i.actualTableWidth())-T-i._fixedTableColumnsWidthSucceeding))),n.property(O,T),a===E.size()-e&&(T=Math.max(T,i._fixedTableColumnCountPreceding)),n.attr("transform","translate("+T+")"),8e4!==l&&i._setHorizontalAlignmentOnCell(n.select("."+i.NXXXXX.TABLE_TITLE_TEXT_CLASS),t.horizontalTitleAlignment,C.Center,l),n.select("rect").attr("width",l),T+=l}))}var D=this._tableTitleD3s[w].selectAll("."+this.NXXXXX.TABLE_COLUMN_SPLITTER_PARENT_CLASS),v=[];D.each((function(){v.push(this)})),v.sort((function(e,t){var i=o.select(e).datum(),a=o.select(t).datum();return i?a?d.indexOf(i)-d.indexOf(a):-1:a?1:0})),D=o.selectAll(v),T=i._fixedTableColumnsWidthPreceding,D.each((function(e,t){var o=i._PE_IsLastColumn(t,r),a=T,n=i._determineTableCellWidth(e);if(o&&(n=Math.max(0,i.actualTableWidth()-T-i._fixedTableColumnsWidthSucceeding)),T+=n,t>l){var s=o?Math.ceil(i.options.columnSplitterWidth/2):0;this._splitterWidget.option({position:{x:T-s,y:0},min:a+(null!=e.minimumWidth?e.minimumWidth:i._minimumTableColumnWidth),max:i.options.splitterEnabled&&i._shouldExistSplitterForLastColumn(o)?null==e.maximumWidth?1/0:T+e.maximumWidth:0})}}))}if(i._isColumnWidthModifiable(l,s)&&(m=i._defsD3.select("#"+this._getOrCreateClipPathForColumn("t"+n,l)+" rect")).attr("width",Math.max(0,+m.attr("width")+t)),!_&&i.options.tableDefinition.synchronizedColumns&&!i._tableRowDefinitionWithColumnTitlesID)for(var A=0;A<a.groupingLevels.length;A++)if(Array.isArray(a.groupingLevels[A].cellDefinitions)&&a.groupingLevels[A].cellDefinitions.length>=l){var y=+(m=i._defsD3.select("#"+this._getOrCreateClipPathForColumn("g"+A,l)+" rect")).datum()+t;m.datum(y).attr("width",Math.max(y,0))}if(i._isColumnWidthModifiable(l,s)){let e=i.__determineTableRowDefinitionID(r);var b=e?`m${e}`:"b",S=i._getOrCreateClipPathForColumn(b,l);if(i._defsD3.selectAll(`.${S} rect`).each((function(){var e=o.select(this),i=+e.datum()+t;e.datum(i).attr("width",Math.max(i,0))})),!l){y=i._determineTableCellWidth(s[0])+t;S=i._getOrCreateClipPathForColumn("o"),o.selectAll(`.${S} rect`).attr("width",(function(e){return Math.max(y-(e-i._fixedTableColumnsWidthPreceding),0)})),S=i._getOrCreateClipPathForColumn("c"),o.selectAll(`.${S} rect`).attr("width",(function(e){return Math.max(y-(e-i._fixedTableColumnsWidthPreceding),0)}))}}var X=i.options.isForExport?i._layoutColumns[L.Table].innerViewExtent():i._determineTableRowWidth();X=Math.max(0,X-i._fixedTableColumnsWidthPreceding),i._foregroundBodyD3s.forEach((function(e){e.selectAll("."+i.NXXXXX.TABLE_ROW_CLASS).each((function(e){var a=o.select(this),l=i._determineTableRowDefinitionInfo(e).rowDefinition;if(a.selectAll("."+i.NXXXXX.TABLE_ROW_BACKGROUND_RECT_CLASS).attr("width",X),i._fillTableRowContent(e,a.select("."+i.NXXXXX.SCROLLABLE_TABLE_ROW_CLASS+" ."+i.NXXXXX.TABLE_ROW_CONTENT_CLASS),l),l===r||i.options.tableDefinition.synchronizedColumns&&!i._tableRowDefinitionWithColumnTitlesID||"f"===n[0]){var s=a.selectAll("."+i.NXXXXX.TABLE_CELL_CLASS+",."+i.NXXXXX.TABLE_GROUP_CELL_CLASS),_=[];s.each((function(){_.push(this)})),_.sort((function(e,t){var a=e===t?0:1;if(a){var n=o.select(e),r=o.select(t),s=n.datum(),_=r.datum();if(s&&_){var c=d.indexOf(s),h=d.indexOf(_);c<0&&(c=l.cellDefinitions.indexOf(s),i.options.tableDefinition.fixedColumnsPreceding&&Array.isArray(i.options.tableDefinition.fixedColumnsPreceding.cellDefinitions)&&(c+=i.options.tableDefinition.fixedColumnsPreceding.cellDefinitions.length)),h<0&&(h=l.cellDefinitions.indexOf(_),i.options.tableDefinition.fixedColumnsPreceding&&Array.isArray(i.options.tableDefinition.fixedColumnsPreceding.cellDefinitions)&&(h+=i.options.tableDefinition.fixedColumnsPreceding.cellDefinitions.length)),a=c-h}}return a})),s=o.selectAll(_);var h=c;c>=d.length-i._fixedTableColumnCountSucceeding&&(h+=_.length-d.length);var u=0;T=i._fixedTableColumnsWidthPreceding,s.each((function(a,n){var r=o.select(this);if(r.classed(i.NXXXXX.TABLE_GROUP_CELL_CLASS))T+=i.options.groupCellWidth;else{let o=i._determineTableCellWidth(a);if(u===h){var s=r.select("."+i.NXXXXX.TABLE_CELL_CONTENT_CLASS),d=u-i._fixedTableColumnCountPreceding,c=i._PE_IsLastColumn(u,l)?i._scrollableTableColumnsWidth-(T-i._fixedTableColumnsWidthPreceding):o;i._fillTableCellContent(e,r,s,a,c,d,l,{m:R.Map,b:R.BaseLevel,l:R.LeafDefault,u:R.FromCallback}[e.tableCellDefinitionType[0]]??R.GroupingLevel),r.select("."+i.NXXXXX.TABLE_CELL_BACKGROUND_RECT_CLASS).attr("width",c)}else if(u>h&&n<_.length-i._fixedTableColumnCountSucceeding){var p=r.property(O)+t;r.property(O,p),r.attr("transform","translate("+p+")")}T+=o,u++}}))}i._moveCollapseExpandButton(e,a);var p=Math.max(i.actualTableViewWidth(),i.actualTableWidth())-i._fixedTableColumnsWidthPreceding-i._fixedTableColumnsWidthSucceeding;a.select("."+i.NXXXXX.SCROLLABLE_TABLE_ROW_CLASS+" ."+i.NXXXXX.SEPARATION_LINE_CLASS).attr("transform","translate("+i._fixedTableColumnsWidthPreceding+")").attr("x2",Math.max(0,p))}))})),_||this._trigger("tableWidthChanged",null,{newValue:i._tableWidth,oldValue:f,inColumnWidthInteraction:!0})}},_isColumnWidthModifiable:function(){},_updateAfterColumnResize:function(){},_determineSpecificActualTableWidth:function(){},_handleBeforeExpandOrCollapseRow:function(e,t){var i=this;if(!(t?e.areLeavesCollapsed:e.isCollapsed)&&i.options.virtualized){var o=function(e){["detailingRowDataItems","childRowDataItems"].forEach((function(t){e[t]?.forEach((function(e){e.isHidden||(e.foregroundRowElem||i._createRow(e,void 0,b.BeforeRowCollapse),o(e))}))}))};o(e)}},_handleAfterExpandOrCollapseRow:function(){},_createRows:function(e,t,i){return i!==b.RowExpanded&&i!==b.RowLeavesExpanded||(this._invisibleExpandedChildRowDataItemCount=0),this._super.apply(this,arguments)},_createRow:function(e,t,i){var a=this,n=!1;e.worldViewCache=[];var l=a._determineBodyAreaIndex(e),r=e.lastBodyAreaIndex!==l;e.lastBodyAreaIndex=l;let s=a._layoutRows[l].visibleRange();if(!e.isHidden&&(l?a.options.commonBodyViewAreaVisible||!a.options.topBodyViewAreaVisible:a.options.topBodyViewAreaVisible))if(!a.options.virtualized||i===b.ScrollToRow||i===b.AncestorsNeeded||(e.oldY<s.exactBottom||e.newY<s.bottom)&&(e.oldY+e.totalHeight>=s.exactTop||e.newY+e.totalHeight>=s.top)){if((i!==b.RowExpanded&&i!==b.RowLeavesExpanded||e.newY<s.bottom||a._invisibleExpandedChildRowDataItemCount++<a.options.realizedRowsCountMaximum)&&a._isRowDataItemVirtualized(e)){if(i!==b.WorldView){e.backgroundRowElem&&(o.selectAll([e.backgroundRowElem,e.foregroundRowElem]).interrupt().selectAll("*").interrupt(),a._removeRowByDataItem(e));let t,n,s=a._currentlyVisibleRowDataItems[l],p=e.arrayIndex,m=p,f=s.length,w=3;do{if(1&w)if(++p===f)w&=-2;else if(s[p].foregroundRowElem){let e=s[p];t=e.backgroundRowElem,n=e.foregroundRowElem;break}if(2&w)if(--m<0)w&=-3;else if(s[m].foregroundRowElem){let e=s[m];t=e.backgroundRowElem.nextSibling,n=e.foregroundRowElem.nextSibling;break}}while(w&&!t);var d=o.create("svg:g"),_=d.node();a._backgroundBodyD3s[l].node().insertBefore(_,t),e.backgroundRowElem=_;var c=a._determineRowLevelClass(e);d.datum(e).attr("class",a._enrichClass(e,a.NXXXXX.ROW_CLASS+" "+c,{elemType:g.Row,isForeground:!1,level:e.level})).attr("transform","translate(0,"+(e.oldY??e.newY)+")"),i===b.AncestorsNeeded||r||null==e.oldY||e.oldY===e.newY||a._cacheTransitionFunction((function(){d.transition().duration(a.options.transitionDuration).attr("transform","translate(0,"+e.newY+")")}));var h=o.create("svg:g"),u=h.node();a._foregroundBodyD3s[l].node().insertBefore(u,n),e.foregroundRowElem=u,h.datum(e).property(a._ITEM_VERSION_PROPERTY,e.version).attr("class",a._enrichClass(e,a.NXXXXX.ROW_CLASS+" "+c,{elemType:g.Row,isForeground:!0,level:e.level})).attr("transform","translate(0,"+(e.oldY??e.newY)+")"),i===b.AncestorsNeeded||r||null==e.oldY||e.oldY===e.newY||a._cacheTransitionFunction((function(){h.transition().duration(a.options.transitionDuration).attr("transform","translate(0,"+e.newY+")").on("end",(function(){let t=a._layoutRows[l].visibleRange();(e.newY>=t.bottom||e.newY+e.totalHeight<t.top)&&e.virtualizationStatus===y.Visible&&(a._realizedVisibleRowsSet.delete(e),a._realizedInvisibleRowsSet.add(e),e.virtualizationStatus=y.Invisible)}))}))}if(e.totalHeight||e.oldTotalHeight||i===b.ScrollToRow||i===b.AncestorsNeeded){if(a._createRowContent(e,d,!1,h,t,i),a.options.asynchronousRendering&&i===b.Virtualization){let n=(a._PE_ActualTableViewWidth()+a.options.splitterWidth)*a.options.visualZoomFactor,l=(e.newY??e.oldY)*a.options.visualZoomFactor%S,r=h.append("rect").attr("transform",`scale(${1/a.options.visualZoomFactor})translate(${-l})`).attr("x",n+l).attr("width",a._elementWidth-n).attr("height",(e.newY?e.totalHeight:e.oldTotalHeight)*a.options.visualZoomFactor).attr("fill",`url(#${this.NXXXXX.ASYNC_WAIT_PATTERN_ID}${this._uniqueID})`).attr("shape-rendering","geometricPrecision");a._createOrRemoveRowPartsAsynchronously("c",e,(function(){r.remove(),e.foregroundRowElem&&a._createRowContent(e,o.select(e.foregroundRowElem),!0,o.select(e.backgroundRowElem),t,i)}))}else a._createRowContent(e,h,!0,d,t,i)}i!==b.WorldView&&i!==b.AncestorsNeeded&&((e.totalHeight?e.arrayIndex&&!a._currentlyVisibleRowDataItems[l][e.arrayIndex-1].totalHeight:e.arrayIndex===a._currentlyVisibleRowDataItems[l].length-1)&&a._createRowOmissionSymbol(h,e),a.options.unselectedItemsShownCovered&&(h.append("rect").attr("class",`${a.NXXXXX.UNSELECTED_ROW_COVER_CLASS} ${a.NXXXXX.ROW_HEIGHT_PROP_CLASS}`).attr("width",window.getComputedStyle(a._element).width).attr("height",e.totalHeight),a._checkForVisibilityOfUnselectedRowCover(e)),a._doUpdateRowConcerningCoveredAttributes(e,h),a.options.attachEventListenersFunc&&(a.options.attachEventListenersFunc.call(a,a._extendCallbackArgs({isForeground:!1,item:e.item,elem:d.node(),elemType:g.Row})),a.options.attachEventListenersFunc.call(a,a._extendCallbackArgs({isForeground:!0,item:e.item,elem:h.node(),elemType:g.Row})))),a._worldViewDivElem&&a._renderCachedRowInWorldView(e)}else i===b.WorldView&&e.totalHeight&&a._worldViewDivElem&&(a._createRowContent(e,void 0,!1,void 0,void 0,b.WorldView),a._createRowContent(e,void 0,!0,void 0,void 0,b.WorldView));![b.Virtualization,b.WorldView,b.AncestorsNeeded].includes(i)&&e.foregroundRowElem&&(e.totalHeight||e.oldTotalHeight||i===b.ScrollToRow)&&e.virtualizationStatus!==y.Visible&&(a._realizedVisibleRowsSet.add(e),e.virtualizationStatus===y.Invisible&&a._realizedInvisibleRowsSet.delete(e),e.virtualizationStatus=y.Visible),n=!0}else e.totalHeight&&a._worldViewDivElem&&(a._createRowContent(e,void 0,!1,void 0,void 0,b.WorldView),a._createRowContent(e,void 0,!0,void 0,void 0,b.WorldView)),i!==b.Virtualization&&(a._handleVirtualizationStatusAfterCreateRow(e,t,i),e.virtualizationStatus===y.Visible&&(a._realizedVisibleRowsSet.delete(e),a._realizedInvisibleRowsSet.add(e),e.virtualizationStatus=y.Invisible));return!this&&this._super(),n},updateRowConcerningCoveredAttributes:function(e){var t=this,i=t._getDataItem(e,t._rowDataItemsMap);i&&i.foregroundRowElem&&t._doUpdateRowConcerningCoveredAttributes(i,o.select(i.foregroundRowElem))},_doUpdateRowConcerningCoveredAttributes:function(e,t){var i=this,o=e.item,a=t.select("."+i.NXXXXX.COVERED_ROW_CLASS);o.isCovered||o.isCoveredAndHighlighted?a.size()?t.classed(i.NXXXXX.COVERED_AND_HIGHLIGHTED_ROW_CLASS,e.item.isCoveredAndHighlighted):t.append("rect").attr("class",`${e.item.isCoveredAndHighlighted?`${i.NXXXXX.COVERED_AND_HIGHLIGHTED_ROW_CLASS} `:""}${i.NXXXXX.COVERED_ROW_CLASS} ${i.NXXXXX.ROW_HEIGHT_PROP_CLASS}`).attr("width",i._element.getBoundingClientRect().width/i.options.visualZoomFactor).attr("height",i._getRowTotalHeight(e)).attr("visibility",i._currentVisibilityOfRowCovers):a.size()&&a.remove()},setVisibilityForRowCovers:function(e){var t=this;t._currentVisibilityOfRowCovers!==e&&(t._currentVisibilityOfRowCovers=e,t._foregroundBodyD3s.forEach((function(i){i.selectAll("."+t.NXXXXX.COVERED_AND_HIGHLIGHTED_ROW_CLASS+",."+t.NXXXXX.COVERED_ROW_CLASS).attr("visibility",e)})))},_createRowContent:function(e,t,i,o,a,n){var l=this;if(l._doCreateRowContent(e,t,i,o,a,n),[b.Virtualization,b.ScrollToRow,b.RowItemsChanged].includes(n)||!B.has(n)){let i=l._getRowTotalHeight(e);t.selectAll("rect."+l.NXXXXX.ROW_HEIGHT_PROP_CLASS).attr("height",i),t.selectAll("line."+l.NXXXXX.ROW_HEIGHT_PROP_CLASS).attr("y2",i),t.selectAll("."+l.NXXXXX.ROW_MAIN_HEIGHT_PROP_CLASS).attr("height",l._getRowMainHeight(e));var r=Math.ceil(e.totalHeight-(e.item.additionalHeight||0)||0);t.selectAll("."+l.NXXXXX.ROW_MAIN_HEIGHT_PROP_CLASS).attr("height",r),t.selectAll("."+l.NXXXXX.ROW_MAIN_HEIGHT_SCALE_CLASS).attr("transform","scale(1,"+r+")")}!this&&this._super()},_doCreateRowContent:function(e,t,i,o,a,n){var l=this;if(!i&&(l._createTableRow(e,o,a,n,g.Row),[b.Virtualization,b.ScrollToRow,b.RowItemsChanged].includes(n)||!B.has(n))){let t=l._getRowTotalHeight(e);o.selectAll("rect."+l.NXXXXX.ROW_HEIGHT_PROP_CLASS).attr("height",t),o.selectAll("line."+l.NXXXXX.ROW_HEIGHT_PROP_CLASS).attr("y2",t),o.selectAll("."+l.NXXXXX.ROW_MAIN_HEIGHT_PROP_CLASS).attr("height",l._getRowMainHeight(e));var r=Math.ceil(e.totalHeight-(e.item.additionalHeight||0)||0);o.selectAll("."+l.NXXXXX.ROW_MAIN_HEIGHT_PROP_CLASS).attr("height",r),o.selectAll("."+l.NXXXXX.ROW_MAIN_HEIGHT_SCALE_CLASS).attr("transform","scale(1,"+r+")")}},_handleVirtualizationStatusAfterCreateRow:function(){},determineActualTableCellContentTopOffset:function(e){var t=e&&this._getDataItem(e,this._rowDataItemsMap);return this._determineActualTableCellContentTopOffset(t)},_determineActualTableCellContentTopOffset:function(e){var t=this,i=e?e.item.maximumHeight:void 0;i>0||(i=t.options.defaultMaximumRowHeight),i>0||(i=Number.POSITIVE_INFINITY);var o=e?.totalHeight??t._getMinimumRowHeight(e);return Math.min(i/2,o/2,t.options.cellContentTopOffset||0)},_getMinimumRowHeight:function(e){return this._doGetMinimumRowHeight(e,!1)},_getDefaultOptionValueWithExternalType:function(e,t,i){return t?.[e?.item.externalType??this.options.defaultExternalType]??i},_doGetMinimumRowHeight:function(e,t){var i=this,o=t?0:i._getDefaultOptionValueWithExternalType(e,i.options.defaultRowMainHeightsByExternalTypeMap,i.options.defaultRowMainHeight);return Math.max(e?.item.minimumHeight??0,o)},_hasCollapseExpandButton:function(e,t){var i=this,o=t?"detailingRowItems":"childRowItems";let a;if(i._determineRowActuallyCollapsible(e,t)&&Array.isArray(a=e.item[o])){if(a.length)return!t||(void 0===e.hasUnfilteredDetailingRows&&(e.hasUnfilteredDetailingRows=a.some((e=>!(e.totalHeight<=0)))),e.hasUnfilteredDetailingRows||i.options.collapseButtonVisibleOnRowsWithoutVisibleChildren);if(i.options.differentiationBetweenEmptyArrayAndUndefined)return t&&(e.hasUnfilteredDetailingRows=!0),!0}return!1},_createCollapseExpandButton:function(e,t,i,a,n,l){var r=this,s=e.totalHeight,d=r._determineActualTableCellContentTopOffset(e),_=r.options.buttonExtent,c=Math.min(d+_,s),u=r.options.treeLinesVisible&&r.options.detailingRowsVisible?Math.max(r.options.buttonExtent,r.options.buttonLeftOffset):r.options.buttonLeftOffset;u+=e.level*(r.options.treeLinesVisible?this.options.treeLevelIndent:r.options.groupCellWidth),n&&(r.options.treeLinesVisible?u=0:l&&(u+=r.options.buttonExtent));var p=t.append("g").attr("class",n?r.NXXXXX.LEAVES_COLEXP_BUTTON_CLASS:r.NXXXXX.COLEXP_BUTTON_CLASS).attr("transform","translate("+(u+r._fixedTableColumnsWidthPreceding)+")");if(a.length>1){var m=r._determineTableCellWidth(a[0]),f=r._getOrCreateClipPathForColumn(n?"x":"o",void 0,u);r.setClipPathAttrOnElemD3WithRefCount(p,f),o.select("#"+f+" rect").datum(u).attr("width",Math.max(0,m-u))}p.append("rect").attr("class",`${h.QUICK_TAP_EVENT_CLASS_NAME} ${h.PRESS_EVENT_CLASS_NAME}`).attr("width",_).attr("height",c).node()[h.HANDLER_FUNCTION_PROPERTY+r._EVENT_NAMESPACE]=function(t){try{switch(t.type){case h.PRESS_EVENT_NAME+"up":if("mouse"!==t.pointerType)break;case h.TAP_EVENT_NAME:n&&!1===e.hasUnfilteredDetailingRows||r._expandOrCollapseRow(e,!0,!1,n)}}catch(e){r._handleException(e,"onEventDispatch_collapseStateButton")}};var w,E,g=r._colexpButtonSize/2+1;n?e.hasUnfilteredDetailingRows?(w=`M${-g},0 l${g},${g} l${g},${-g}`,E=e.areLeavesCollapsed?` rotate(0 0 ${g/2})`:` rotate(180 0 ${g/2})`):(w=`M${-g},${g+2} l${g},${g} l${g},${-g} m0,-2 l${-g},${-g} l${-g},${g}`,E=` rotate(180 0 ${g/2})`,i=!1):(w="M0,"+r._colexpButtonSize+" V-"+r._colexpButtonSize+" L"+r._colexpButtonSize+",0 L0,"+r._colexpButtonSize,E=e.isCollapsed?"":" rotate(45)");var T=p.append("path").attr("class",e.isCollapsed?r.NXXXXX.MINUS_CLASS:r.NXXXXX.PLUS_CLASS).attr("d",w),R="translate(8,"+d+")";i?r._cacheTransitionFunction((function(){T.attr("transform",R+(n?e.areLeavesCollapsed?` rotate(0 0 ${g/2})`:` rotate(180 0 ${g/2})`:e.isCollapsed?"":" rotate(45)")).transition().duration(r.options.transitionDuration).attr("transform",R+E)})):T.attr("transform",R+E)},_moveCollapseExpandButton:function(e,t){var i=this,o=i.options.treeLinesVisible&&i.options.detailingRowsVisible?i.options.buttonExtent:i.options.buttonLeftOffset;o=Math.max(o,i.options.buttonLeftOffset)+e.level*(i.options.treeLinesVisible?this.options.treeLevelIndent:i.options.groupCellWidth);var a=t.select("."+i.NXXXXX.COLEXP_BUTTON_CLASS);a.empty()||(a.attr("transform","translate("+(o+i._fixedTableColumnsWidthPreceding)+")"),i.options.treeLinesVisible?o=0:o+=i.options.buttonExtent),(a=t.select("."+i.NXXXXX.LEAVES_COLEXP_BUTTON_CLASS)).empty()||a.attr("transform","translate("+(o+i._fixedTableColumnsWidthPreceding)+")")},_createOrUpdateLastRowSeparationLine:function(e,t){var i=this,o=i._layoutRows[X.MainBody].extent()+M,a=i._foregroundBodyD3s[X.MainBody],n=a.select("line."+i.NXXXXX.LAST_SEPARATION_LINE_CLASS);n.size()?(n.node().parentNode.appendChild(n.node()),t||(n.interrupt(),e&&i.options.transitionDuration?i._cacheTransitionFunction((function(){n.transition().duration(i.options.transitionDuration).attr("y1",o).attr("y2",o)})):n.attr("y1",o).attr("y2",o))):n=a.append("line").attr("class",i.NXXXXX.LAST_SEPARATION_LINE_CLASS).attr("x1",0).attr("x2",i._actualCompleteInnerViewWidth()).attr("y1",o).attr("y2",o),!this&&this._super()},_getOrCreateClipPathForColumn:function(e,t,i){var o="t"===e[0]?1:0;"m".indexOf(e[o])>=0&&(e=encodeURIComponent(e.replace(/_/g,"__").replace(/'/g,"_27").replace(/\(/g,"_28").replace(/\)/g,"_29")).replace(/%/g,"_"));var a=this.NXXXXX.TABLE_COLUMN_CLIPPATH_ID_PREFIX+this._uniqueID+"-"+e;null!=t&&"gfublm".indexOf(e[o])>=0&&(a+="-"+t);var n=a;if(null!=i&&"ublmoxc".indexOf(e[o])>=0&&(a+="-"+i),(l=this._defsD3.select("#"+a)).empty()){var l,r=(l=this._defsD3.append("clipPath").attr("id",a)).append("rect").attr("height",5e3);"oxc".indexOf(e[o])>=0&&r.attr("x",t),n!==a&&l.attr("class",n)}return a},_getOrCreateClipPathForRowPhantom:function(){var e=this.NXXXXX.TABLE_ROW_PHANTOM_CLIPPATH_ID_PREFIX+this._uniqueID,t=e;this._defsD3.select("#"+e).empty()&&this._defsD3.append("clipPath").attr("id",e).attr("class",t).append("rect");return e},_checkRowInsertionModeFunc:function(e,t,i){let o=this._extendCallbackArgs({sender:e.item,newRowItem:t.item,rowInsertionMode:i});return this.options.checkRowInsertionModeFunc?.(o),o.rowInsertionMode},_detachEventListenersFromRows:function(e,t){var i=this,a=i.options.detachEventListenersExFunc?[]:void 0;e.selectAll("."+i.NXXXXX.TABLE_ROW_CLASS).each((function(){delete this[h.HANDLER_FUNCTION_PROPERTY+i._EVENT_NAMESPACE],a&&a.push(this)})).selectAll("."+i.NXXXXX.COLEXP_BUTTON_CLASS).each((function(){delete this[h.HANDLER_FUNCTION_PROPERTY+i._EVENT_NAMESPACE],_.off(o.select(this).selectAll("*").nodes(),i._EVENT_NAMESPACE)})),i.options.detachEventListenersExFunc&&i.options.detachEventListenersExFunc.call(this,i._extendCallbackArgs({isForeground:t,elems:a,elemType:g.Row})),i.options.detachEventListenersFunc&&e.each((function(e){i.options.detachEventListenersFunc.call(this,i._extendCallbackArgs({isForeground:t,item:e.item,elem:this,elemType:g.Row}))}))},_PE_ActualTableViewWidth:function(){},_PE_TableViewWidth:function(){},_actualScrollableWidth:function(e){return e===L.Table?Math.max(this.actualTableViewWidth(),this.actualTableWidth())-this._fixedTableColumnsWidthPreceding-this._fixedTableColumnsWidthSucceeding:this._super(e)},_PE_IsLastColumn:function(e,t){return e===t.cellDefinitions.length-1},_PE_IsLastColumnByCellDefinitions:function(e,t){return e===t.length-1},_createLayoutGrid:function(){this._super(),this._layoutGrid&&this._layoutStacks&&this._layoutStacks[x.Columns]&&this._layoutStacks[x.Columns].appendStripes([L.Table])},_layoutStackUpdateColumns:function(e,t,i){var o=this;this._super(e,t,i),i.innerViewExtent!==t.innerViewExtent&&o._foregroundBodyD3s.forEach((function(e){e.select("line."+o.NXXXXX.LAST_SEPARATION_LINE_CLASS).attr("x2",o._actualCompleteInnerViewWidth())}))},_layoutStripeUpdateColumn:function(e,t,i){var o=this;if(this._super(e,t,i),i.innerViewExtent!==t.innerViewExtent&&e.getStripeID()===L.Table){var a=o.options.tableDefinition;if(a&&(!a.rowDefinitionsMap||!a.rowDefinitionsMap[a.rowDefinitionIDWithColumnTitles])&&!o._tableRowDefinitionWithColumnTitlesID&&null!=a.titleText)for(var n=0;n<=1;n++)o._titleVisible(n)&&o._scrollableTableTitleD3s&&o._scrollableTableTitleD3s[n]&&o._scrollableTableTitleD3s[n].select("."+o.NXXXXX.TABLE_TITLE_RECT_CLASS).attr("width",i.innerViewExtent);var l=o._actualScrollableWidth(L.Table),r=o.options.isForExport?o._layoutColumns[L.Table].innerViewExtent():o._determineTableRowWidth();r=Math.max(0,r-o._fixedTableColumnsWidthPreceding),o._foregroundBodyD3s.forEach((function(e){e.selectAll("."+o.NXXXXX.TABLE_ROW_BACKGROUND_RECT_CLASS).attr("width",r),e.selectAll("."+o.NXXXXX.SCROLLABLE_TABLE_ROW_CLASS+" ."+o.NXXXXX.SEPARATION_LINE_CLASS).attr("transform","translate("+o._fixedTableColumnsWidthPreceding+")").attr("x2",Math.max(l,i.innerViewExtent)),e.selectAll("."+o.NXXXXX.FIXED_TABLE_ROW_SUCCEEDING_CLASS+" ."+o.NXXXXX.SEPARATION_LINE_CLASS).attr("transform","translate("+(i.innerViewExtent-o._fixedTableColumnsWidthSucceeding)+")").attr("x2",o._fixedTableColumnsWidthSucceeding)}))}},_layoutStripeUpdateRow:function(e,t,i){var a=this;if(this._super(e,t,i),i.innerViewExtent!==t.innerViewExtent){var n=function(e){if(a._titleVisible(e)&&a._tableTitleD3s[e]){var t=a._actualTitleHeight(e);a._tableTitleD3s[e].selectAll("."+a.NXXXXX.TABLE_TITLE_RECT_CLASS+" ."+a.NXXXXX.FIXED_TABLE_TITLE_TEXT_CLASS).attr("height",t).each((function(){var e=o.select(a);e.selectAll("tspan").attr("y",(t-f.calculateSVGTextHeight(e))/2)}));var i=a._tableTitleD3s[e].node().querySelector(`.${a.NXXXXX.TABLE_COLUMN_SPLITTER_PARENT_CLASS}`);i&&i._splitterWidget.option("height",t)}};switch(e.getStripeID()){case X.TopTitle:n(P.top);break;case X.BottomTitle:n(P.bottom)}}},_createAndPositionDivOverlays:function(){var e=this;this._super(),this._overlayAreas[L.Table]=[];for(var t=0;t<=1;t++)this._overlayAreas[L.Table][t]=new p({layoutRow:{},layoutColumn:{}},{forX:!!t,forY:!0},e._actualScrollBarWidth.bind(e)),this._overlayAreas[L.Table][t]._createAndPositionDivOverlays(this._divScaleD3.node(),this.NXXXXX.TABLE_OVERLAY_SCROLL_PARENT_CLASS[t],this.NXXXXX.TABLE_OVERLAY_CLASS[t],this.NXXXXX.IOS_SCROLL_BAR_CLASS,t,(function(t){try{var i=[];i[L.Table]=Math.round(this.scrollLeft()*e._layoutColumns[L.Table].scrollFactorFixed());var o=[];e._verSBLayoutColumn()===L.Table&&(o[t]=this.scrollTop()),e._scrollOffsetsChanged(i,o)}catch(t){e._handleException(t,"onScroll")}}),(function(t){e._setActiveHorizontalBodyAreaIndex(t)}));this._titleVisible(P.bottom)&&this._overlayAreas[L.Table][X.MainBody].setScrollBarExistence({forX:!1})},_createAndAppendSVGRootDefs:function(){this._super(),this.options.isForExport||(this._widthClipPathRectD3s[L.Table]=this._defsD3.append("clipPath").attr("id",this.NXXXXX.WIDTH_CLIPPATH_ID[L.Table]+this._uniqueID).append("rect"),this._scrollableTableClipPathRectD3=this._defsD3.append("clipPath").attr("id",this.NXXXXX.SCROLLABLE_TABLE_CLIPPATH_ID+this._uniqueID).append("rect").attr("y",-1e3).attr("height",1e5));var e=this._defsD3.append("linearGradient").attr("id",this.NXXXXX.SELECTION_TOP_GRADIENT_CLIPPATH_ID+this._uniqueID).attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");e.append("stop").attr("class",this.NXXXXX.SELECTED_ROW_GRADIENT_START_CLASS).attr("offset","0%"),e.append("stop").attr("class",this.NXXXXX.SELECTED_ROW_GRADIENT_END_CLASS).attr("offset","100%"),(e=this._defsD3.append("linearGradient").attr("id",this.NXXXXX.SELECTION_BOTTOM_GRADIENT_CLIPPATH_ID+this._uniqueID).attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%")).append("stop").attr("class",this.NXXXXX.SELECTED_ROW_GRADIENT_START_CLASS).attr("offset","0%"),e.append("stop").attr("class",this.NXXXXX.SELECTED_ROW_GRADIENT_END_CLASS).attr("offset","100%"),(e=this._defsD3.append("linearGradient").attr("id",this.NXXXXX.SELECTION_LEFT_GRADIENT_CLIPPATH_ID+this._uniqueID).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%")).append("stop").attr("class",this.NXXXXX.SELECTED_ROW_GRADIENT_START_CLASS).attr("offset","0%"),e.append("stop").attr("class",this.NXXXXX.SELECTED_ROW_GRADIENT_END_CLASS).attr("offset","100%"),(e=this._defsD3.append("linearGradient").attr("id",this.NXXXXX.SELECTION_RIGHT_GRADIENT_CLIPPATH_ID+this._uniqueID).attr("x1","100%").attr("y1","0%").attr("x2","0%").attr("y2","0%")).append("stop").attr("class",this.NXXXXX.SELECTED_ROW_GRADIENT_START_CLASS).attr("offset","0%"),e.append("stop").attr("class",this.NXXXXX.SELECTED_ROW_GRADIENT_END_CLASS).attr("offset","100%"),["verticalHatch","forwardHatch","backwardHatch"].forEach(((e,t)=>{this._defsD3.append("pattern").attr("id",`${this.NXXXXX.WIDGET_PREFIX}pattern${this._uniqueID}-${t}`).attr("width",t?4:3).attr("height",4).attr("patternUnits","userSpaceOnUse").attr("patternTransform",`rotate(${[0,45,-45][t]})`).append("rect").attr("width",1).attr("height",4).style("fill","white"),this._defsD3.append("mask").attr("id",`${this.NXXXXX.WIDGET_PREFIX}pattern-mask${this._uniqueID}-${t}`).append("rect").attr("width","100000").attr("height","1000").style("fill",`url(#${this.NXXXXX.WIDGET_PREFIX}pattern${this._uniqueID}-${t})`)}))},_appendTitle:function(e){this._super(e),this._tableTitleD3s||(this._tableTitleD3s=[]),this._tableTitleD3s[e]||(this._tableTitleD3s[e]=this._titleD3s[e].append("g").attr("class",this.NXXXXX.TABLE_TITLE_CLASS),this.options.isForExport||this._tableTitleD3s[e].attr("clip-path","url(#"+this.NXXXXX.WIDTH_CLIPPATH_ID[L.Table]+this._uniqueID+")"))},_appendBackground:function(){this._super(),this._registerBackgroundPanningEvents()},_appendIOSScrollBars:function(){this._super();for(var e=0;e<=1;e++)this._overlayAreas[L.Table][e].appendIOSScrollBars(this._divScaleD3.node())},_doResizeOverlaysHeightWithAnimation:function(e){this._super(),this._overlayAreas&&this._resizeBodyViewsOverlaysHeight(e,this._overlayAreas[L.Table])},_innerClientXToLayoutColumn:function(e){return e>=this._actualLayoutColumnLeft(L.Table)&&e<this._actualInnerLayoutColumnRight(L.Table)?L.Table:this._super(e)},_ignoreNextScrollEvents:function(e,t){this._super(e,t),void 0!==t&&t!==L.Table||(this._ignoreNextScrollEvents[L.Table]=[e,e])},_showOrHidePermanentScrollbarOverlay:function(e){p.isPermanentScrollbarOverlayActive&&this._overlayAreas?.forEach((t=>{t.forEach((t=>{t.showOrHidePermanentScrollbarOverlay(e)}))}))},determineItemByPageCoordinates:function(e,t){let i=this._element.getBoundingClientRect();if(i.left<=e&&e<i.right&&i.top<=t&&t<i.bottom){this._showOrHidePermanentScrollbarOverlay(!1);let i=this._doDetermineItemByPageCoordinates(e,t);if(this._showOrHidePermanentScrollbarOverlay(!0),i)return this._extendCallbackArgs(i)}},elementFromPoint:function(e,t){this._showOrHidePermanentScrollbarOverlay(!1);let i=document.elementFromPoint(e,t);return this._showOrHidePermanentScrollbarOverlay(!0),i},_doDetermineItemByPageCoordinates:function(e,t){var i=this._findRowDataItemAtY(t);if(i){var a=o.select(i.foregroundRowElem).select("."+this.NXXXXX.TABLE_ROW_CLASS).node()??i.foregroundRowElem;if(a){let t=this._element.getBoundingClientRect(),o=this._element.ownerDocument.defaultView;var n=e-(t.left+o.pageXOffset),l=this._detectCellIndexInTableRowByMouseX(i,n);return{item:i.item,elem:a,elemType:g.Row,cellIndex:l}}}},refreshRowForWorldView:function(e){var t=this._getDataItem(e,this._rowDataItemsMap);t?.isDetailingRow&&!this.options.detailingRowsVisible||t&&(this._createRow(t,void 0,b.WorldView),this._renderCachedRowInWorldView(t))},_getChartSizeForWorldView:function(){var e=this._actualTitleHeight(P.top),t=this._actualTitleHeight(P.bottom),i=(e?1:0)+(this._actualBodyAreaSeparatorHeight()?1:0)+(t?1:0),o=this.options.topBodyViewAreaVisible?this._layoutRows[X.BodyAtTheTop].extent():0,a=this.options.commonBodyViewAreaVisible||!this.options.topBodyViewAreaVisible?this._layoutRows[X.MainBody].extent():0;return{width:this.actualTableWidth(),height:Math.max(e+o+a+t,this._actualScaledMainHeight()),heightPx:i}},_getViewRectsForWorldView:function(){for(var e=this,t=e._super(),i=e._actualTitleHeight(P.top),o=1,a=0;a<2;a++){var n=e._layoutRows[a].scrollStart(),l=e._layoutRows[a].innerViewExtent();if(l){for(var r=e._fixedTableColumnsWidthPreceding,s=0;s<2;s++){var d=e._layoutColumns[s].scrollStart(),_=e._layoutColumns[s].innerViewExtent();s||(_=Math.max(0,_-e._fixedTableColumnsWidthPreceding-e._fixedTableColumnsWidthSucceeding)),_&&(t.push({left:r,scrollLeft:d,leftPx:s,top:i,scrollTop:n,topPx:o,width:_,height:l,isMovable:!0,shouldRemainVisible:s>0&&e._isActiveHorizontalBodyAreaIndex(a),tableBase_colIndex:s,tableBase_rowIndex:a}),s||(r=e.actualTableWidth()))}i+=e._layoutRows[a].extent(),e._layoutRows[a].extent()&&o++}}return t},_getTopOfRowDataItemForWorldView:function(e){var t=this;let i=t._determineBodyAreaIndex(e)===X.BodyAtTheTop;return{top:t.options.titleHeight+(i?0:t._actualBodyAreaSeparatorHeight()?t._layoutRows[X.BodyAtTheTop].extent():0)+e.newY,topPx:1+(i?0:t._actualBodyAreaSeparatorHeight()?1:0)}},_renderCachedRowInWorldView:function(e,t){var i,o,a=this;if(e.totalHeight&&a._worldViewDivElem&&((!t||t.indexOf("C")>=0)&&(i=a._worldViewDivElem._worldViewCanvasWidget,o=a._getTopOfRowDataItemForWorldView(e),i.clearRect(w.Content,{left:0,top:o.top,topPx:o.topPx,width:a._tableWidth,height:e.totalHeight}),e.worldViewCache?.forEach((function(e){i[e.method].apply(i,e.args)}))),!t||t.indexOf("S")>=0)){var n=e.worldViewSelectionCacheMap;if(n){i||(i=a._worldViewDivElem._worldViewCanvasWidget);var l=a.actualTableWidth();o||(o=a._getTopOfRowDataItemForWorldView(e)),i.clearRect(w.Selection,{left:0,top:o.top,topPx:o.topPx,width:l,height:e.totalHeight}),a._clearAdditionalLayoutGridColumnsInWorldView(i,e,l,o.top,o.topPx),Object.keys(n).forEach((function(e){var t=n[e],o=[w.Selection,{strokeStyle:a.options.worldViewSelectionColor}].concat(t.args);i[t.method].apply(i,o)}))}}},_clearAdditionalLayoutGridColumnsInWorldView:function(){},_renderCompleteWorldView:function(){var e=this;if(e._super(),e._foregroundBodyD3s&&e._worldViewDivElem){var t=e._worldViewDivElem._worldViewCanvasWidget,i=e._tableTitleD3s[0].select("."+e.NXXXXX.TABLE_TITLE_RECT_CLASS);if(i.size()&&t.fillRect(w.Content,{fillStyle:window.getComputedStyle(i.node()).fill},{left:0,top:0,width:e.actualTableWidth(),height:e.options.titleHeight}),t.drawLine(w.Content,{strokeStyle:"black",lineWidth:1},{x0:0,y0:e.options.titleHeight,x1:e.actualTableWidth(),y1:e.options.titleHeight}),e._currentlyVisibleRowDataItems.forEach((function(t){t.forEach((function(t){e._renderCachedRowInWorldView(t)}))})),e._actualBodyAreaSeparatorHeight()){var o=e.options.titleHeight+e._layoutRows[X.BodyAtTheTop].extent();t.drawLine(w.Content,{strokeStyle:"black",lineWidth:1},{x0:0,y0:o,x1:e.actualTableWidth(),y1:o,yPx:1})}}}},H=n.extendClass("nTableBaseWidget",N,F);e.exports=H},346:(e,t,i)=>{var o=i(680),a=i(571),n=a.nClassFactory,l=a.nEventDispatcher,r=a.nDebugHelper,s=i(199),d=s.ElemType,_=s.HorizontalAlignment,c=s.RowInteractions,h=s.TableRowDefinitionType,u=i(651),p=u._UpdateCause,m=u._VirtualizationUpdateCause,f=u.LayoutRow,w=u.LayoutColumn,E=u.CELL_X_PROPERTY,g=i(791),T={optionDefaults:Object.assign({},g.prototype.optionDefaults,{rowItemsDraggable:!0}),construct:function(){this._super.apply(this,arguments),this._tableDefinitionChanged()},_initConstants:function(){var e=this._getOrCreateNXXXXX({WIDGET_ABBREVIATION:"ntable",WIDGET_PREFIX:"ntable-",WIDGET_NAMESPACE:".ntable",WIDGET_NAME_IN_ERROR_MESSAGES:"nTableWidget",WIDGET_PROPERTYNAME_IN_CALLBACKS:"tableWidget",WIDGET_TABLE_PREFIX:"ntable-",WIDGET_TABLE_INSERTION:""});return this._super(),e.SELECTED_ROW_GRADIENT_START_CLASS=e.WIDGET_PREFIX+"selected-gradient-start",e.SELECTED_ROW_GRADIENT_END_CLASS=e.WIDGET_PREFIX+"selected-gradient-end",e},_doResize:function(e,t,i){var a=this;if(void 0!==a._layoutRows[f.MainBody].extent()||i){a._setOption("updateSuspended",!1);var n=a._actualScaledMainWidth(),l=a._actualScaledMainHeight();a._tableViewChanged(void 0,!0);var r=a._calcBodyViewAndSeparatorHeights(l),s=a._calcInnerBodyViewAndSeparatorHeights(r),d=[];d[f.BodyAtTheTop]=s[f.BodyAtTheTop]-a._layoutRows[f.BodyAtTheTop].innerViewExtent(),d[f.MainBody]=s[f.MainBody]-a._layoutRows[f.MainBody].innerViewExtent();var _=a._shouldHeightChange(e,d);if(_){a._layoutRows[f.BodyAtTheTop].outerViewExtent(r[f.BodyAtTheTop]),(a._layoutRows[f.MainBody].outerViewExtent()||r[f.MainBody]>=0)&&a._layoutRows[f.MainBody].outerViewExtent(r[f.MainBody]),a._layoutRows[f.BodyAtTheTop].innerViewExtent(s[f.BodyAtTheTop]),(a._layoutRows[f.MainBody].innerViewExtent()||s[f.MainBody]>=0)&&a._layoutRows[f.MainBody].innerViewExtent(s[f.MainBody]),a._layoutRows[f.BodySeparator].extent(0),a._layoutRows[f.BodySeparator].outerViewExtent(r[f.BodySeparator]),a._layoutRows[f.BodySeparator].innerViewExtent(s[f.BodySeparator]);var c=0;if(a._layoutRows[f.TopTitle].start(c),c+=a._layoutRows[f.TopTitle].outerViewExtent(),a._layoutRows[f.BodyAtTheTop].start(c),c+=a._layoutRows[f.BodyAtTheTop].outerViewExtent(),a._layoutRows[f.BodySeparator].start(c),c+=a._layoutRows[f.BodySeparator].outerViewExtent(),a._layoutRows[f.MainBody].start(c),c+=a._layoutRows[f.MainBody].outerViewExtent(),a._layoutRows[f.BottomTitle].start(c),r[f.MainBody]>=0){var h=!a.options.isForExport&&a._elementHeightOnLastCallOf_doResize===a._elementHeight?function(e){return e.transition().duration(a.options.transitionDuration)}:function(e){return e.interrupt().transition(),e};a._doResizeOverlaysHeightWithAnimation((e=>h(o.select(e)))),a._doResizeAfterUpdatedBodyHeight(h),a._doResizeHeightWithOptionalAnimation(h),a.options.virtualized&&a._updateVirtualization(e||m.ViewResized,t)}}var u=a._calcWidthDifference(n),p=a._shouldWidthChange(e,u);if(p){this._currentScaledMainWidth=n;var E=a._specifyNewViewWidth(n);a._layoutColumns[w.Table].outerViewExtent(E[w.Table]);var g=a._calcInnerViewWidths(E);a._layoutColumns[w.Table].innerViewExtent(g[w.Table]);a._layoutColumns[w.Table].start(0)}if(_||p){if(a._layoutGrid.update(),a._overlayAreas){var T=u>0?a._overlayAreas[w.Table][f.MainBody].scrollLeft()*(a._layoutColumns[w.Table].scrollFactorFixed()||1):void 0,R=d[f.MainBody]>0||u>0?a._overlayAreas[w.Table][f.MainBody].scrollTop():void 0,C=[];C[w.Table]=T,C[w.TimeArea]=void 0;var I=[];I[f.BodyAtTheTop]=void 0,I[f.MainBody]=R,a._scrollOffsetsChanged(C,I)}a._provideChartSizeToWorldView(),a._provideViewRectsToWorldView()}a._updateAllRowSelections(),a._executeCachedTransitionFunctions(),a._elementHeightOnLastCallOf_doResize=a._elementHeight,!this&&this._super()}else window.setTimeout((function(){a._element&&!a._layoutRows[f.MainBody].innerViewExtent()&&a._doResize(e,t,!0)}),100)},_calcWidthDifference:function(e){return this._mainWidth-e||0},_specifyNewViewWidth:function(e){var t=[];return t[w.Table]=e,t},_shouldHeightChange:function(){return!0},_shouldWidthChange:function(){return!0},_registerBackgroundPanningEvents:function(){this._svgRootD3.classed(l.PAN_EVENT_CLASS_NAME,!this.options.rowItemsDraggable),!this&&this._super()},_onMouseLeaveOnTableRow:function(e,t){var i=this;if(!i.isInInteraction()){var a=o.select(t.target).datum();a&&a.item&&i._getDataItem(a.item,i._rowDataItemsMap)===a?i._setRowInteractionCursor(i._getActualRowInteractions(a)):i._setRowInteractionCursor(c.None)}i._super.apply(i,arguments)},scrollTo:function(e,t){try{r.assertNumberOrNull(e,"",0),r.assertNumberOrNull(t,"",1);var i=[];i[w.Table]=e,i[w.TimeArea]=void 0;var o=[];o[f.BodyAtTheTop]=void 0,o[f.MainBody]=t,this._scrollTo(i,o)}catch(e){this._handleException(e,"scrollTo")}!this&&this._super()},horizontalScrollOffset:function(){return this._layoutColumns[w.Table].scrollStart()},clientRect:function(){return this._getBodyClientRect(w.Table)},_getScrollOffsets:function(e,t){return!this&&this._super(),{horScrollOffset:this._layoutColumns[w.Table].scrollFactorFixed()>0?this._overlayAreas[w.Table][t].scrollLeft()*this._layoutColumns[w.Table].scrollFactorFixed():0,verScrollOffset:this._layoutRows[t].scrollStart()}},scrollToItem:function(e,t,i,o,a){var n;try{r.assertNotNull(e,"",0);if(!(n=this._super(e,t,i,o,a)))throw Error("Item not found")}catch(e){this._handleException(e,"scrollToItem")}return n},_tableViewChanged:function(e,t){var i=this,a=i.actualTableViewWidth()-i._cachedTableViewWidth;if(!0===i._super(e,t)){if(i.options.rowOmissionSymbolsVisible)o.select(this).selectAll("."+i.NXXXXX.ROW_OMISSION_SYMBOL_CLASS+" line").attr("x2",i._actualScaledMainWidth());a&&void 0===i._tableScrollStartAtStartDrag&&i._onColumnSplitterChanged("lastColumn")}},_tableViewChanged_DetectTableViewWidth:function(e){return!this&&this._super(),e},getElementOfItem:function(e,t){try{r.assertNotNull(e,"nTableWidget.getElementOfItem",0);var i=!0===t||1===t,o=this._getDataItem(e,this._rowDataItemsMap);if(o)return i?o.backgroundRowElem:o.foregroundRowElem}catch(e){this._handleException(e,"getElementOfItem")}return null},invalidateRow:function(e,t){this._doInvalidateRowWithCheck(e,{childRowsChangedFlag:t})},update:function(){try{this._super(),this._bodyChanged(p.RowItemsChanged)}catch(e){this._handleException(e,"update")}},_determineRowMainHeight:function(e){return!this&&this._super(),e.mainHeight},_determineCellWidth:function(e,t,i,o){if(this._PE_IsLastColumn(t,i)){var a=e.property(E);o=Math.max(0,Math.max(this._actualScaledMainWidth(),this.actualTableWidth())-this._fixedTableColumnsWidthSucceeding-a)}return!this&&this._super(),o},_determineLastColumnWidth:function(e,t){return!this&&this._super(),e?8e4:t},_determineTableRowWidth:function(){return!this&&this._super(),this._actualScaledMainWidth()},_determineXOffsetOfFirstFixedSucceedingTableColumn:function(){return!this&&this._super(),this._cachedTableViewWidth-this._fixedTableColumnsWidthSucceeding},_determineScrollableWidth:function(){return!this&&this._super(),Math.max(this._cachedTableViewWidth||0,this._actualScrollableWidth(w.Table))},_determineSucceedingColumnXOffset:function(){return!this&&this._super(),this._cachedTableViewWidth-this._fixedTableColumnsWidthSucceeding},_determineLastTableCellWidth:function(e){return!this&&this._super(),Math.max(0,Math.max(this._actualScaledMainWidth(),this.actualTableWidth())-this._fixedTableColumnsWidthSucceeding-(e-this._fixedTableColumnsWidthPreceding))},_isColumnWidthModifiable:function(e,t){return!this&&this._super(),e!==t.length-1},_updateAfterColumnResize:function(){this._doResize(),!this&&this._super()},_determineSpecificActualTableWidth:function(){return this._actualScaledMainWidth()},_bodyChanged_isSuspended:function(e){if(this.options.updateSuspended){if([p.Other,p.RowItemsChanged,p.RowItemsRootChanged].indexOf(e)>=0)return this._cachedBodyChangedArguments=Array.prototype.slice.call(arguments),!0;this._setOption("updateSuspended",!1)}return!this&&this._super(),!1},_bodyChanged_updateNeededByUpdateCause:function(){return!this&&this._super(),!0},_bodyChanged_setTotalHeight:function(e,t){this._super(e,t),e.mainHeight=t},_bodyChanged_calcTotalHeight:function(e){return!this&&this._super(),this._getMinimumRowHeight(e)},_handleVirtualizationStatusAfterCreateRow:function(){!this&&this._super()},_setOffsetCorrection:function(){this._currentOffsetCorrection={x:this.options.offsetCorrection&&+this.options.offsetCorrection.x||0,y:this.options.offsetCorrection&&+this.options.offsetCorrection.y||0},!this&&this._super()},_PE_ActualTableViewWidth:function(){return!this&&this._super(),this._mainWidth},_PE_TableViewWidth:function(){return!this&&this._super(),this._actualScaledMainWidth()},_verSBLayoutColumn:function(){return!this&&this._super(),w.Table},getDefaultWidthForLayoutColumn:function(e){return!this&&this._super(),e===w.Table?1/0:void 0}},R=n.extendClass("nTableWidget",g,T);R.WIDGET_CLASS="ntable-widget",R.ROW_HEIGHT_PROP_CLASS="ntable-row-height-dep",R.TREEVIEW_LINE_CLASS="ntable-treeview-line",R.ElemType=d,R.HorizontalAlignment=_,R.RowInteractions=c,R.RowDefinitionType=h,R.RowDefinitionTypes=h,e.exports=R},138:(e,t,i)=>{i(98),i(680),i(582),i(274);var o=i(199);Object.keys(o).forEach((function(e){t[e]=o[e]})),t.nBaseWidget=i(53),t.nTableBaseWidget=i(791),t.nTableWidget=i(346),t.nRowDragging=i(307);var a=window.netronic||{};Object.keys(t).forEach((function(e){a[e]=t[e]})),t.nInternalDefines=i(651)},571:t=>{t.exports=e},98:e=>{e.exports=t},680:e=>{e.exports=i},582:e=>{e.exports=o},274:e=>{e.exports=a}},l={};function r(e){var t=l[e];if(void 0!==t)return t.exports;var i=l[e]={exports:{}};return n[e](i,i.exports,r),i.exports}return r.m=n,r(138)})()));
/*! (c) Copyright 2013-2024 NETRONIC Software GmbH. All rights reserved. Version 9.0.1 */
"use strict";!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nwaf_apptools"),require("nwaf_table"),require("hammerjs"),require("d3-ease"),require("d3-format"),require("d3-selection"),require("d3-time-format"),require("d3-transition")):"function"==typeof define&&define.amd?define(["nwaf_apptools","nwaf_table","hammerjs","d3-ease","d3-format","d3-selection","d3-time-format","d3-transition"],t):"object"==typeof exports?exports.nwaf_gantt=t(require("nwaf_apptools"),require("nwaf_table"),require("hammerjs"),require("d3-ease"),require("d3-format"),require("d3-selection"),require("d3-time-format"),require("d3-transition")):e.nwaf_gantt=t(e.nwaf_apptools,e.nwaf_table,e.Hammer,e.d3,e.d3,e.d3,e.d3,e.d3)}(globalThis,((e,t,a,i,n,r,o,s)=>{return l={867:(e,t,a)=>{var i=a(199),n=i.NGANTT_BAR_RECT_CLASS,r="ngantt-arrow-bar-path",o=i.NGANTT_BAR_PATH_PATTERN_CLASS,s=i.NGANTT_BAR_TEXT_CLASS,l=i.ElemType,c=i.BarType,d=function(){this._optionCache={}};Object.assign(d.prototype,{createBar:function(e){e.barD3.append("path").attr("class",e.enrichClassFunc(n+" "+r,{elemType:l.BarRectangle,shape:e.barShapeId}));var t=e.dataItem.item;null!=t.fillPatternType&&e.barD3.append("path").attr("class",e.enrichClassFunc(n+" "+o,{elemType:l.BarRectangle,shape:e.barShapeId})).attr("mask",`url(#ngantt-pattern-mask${e.uniqueID}-${t.fillPatternType})`);var a=[t.startOffset,t.endOffset,t.isArrowLeft,t.isArrowRight,t.leftArrowDegree,t.rightArrowDegree,e.barHeight].join(",");if(!this._optionCache[a]){var i=+t.startOffset||0,s=+t.endOffset||0,c=null==t.isArrowLeft||!!t.isArrowLeft,d=null==t.isArrowRight||!!t.isArrowRight,m=null==t.leftArrowDegree?45:+t.leftArrowDegree||0,u=null==t.rightArrowDegree?45:+t.rightArrowDegree||0;(m<1||m>179)&&(m=45),m%90==0&&(c=!1),(u<1||u>179)&&(u=45),u%90==0&&(d=!1);var h=e.barHeight/2,p=c?Math.tan((90-m)*(Math.PI/180))*h:0,_=d?Math.tan((90-u)*(Math.PI/180))*h:0;this._optionCache[a]={startOffset:i,endOffset:s,isArrowLeft:c,isArrowRight:d,barHeightAsString:e.barHeight.toString(),halfBarHeight:h,halfBarHeightAsString:h.toString(),arrowLengthLeft:p,arrowLengthLeftAsString:p.toString(),negativeArrowLengthLeftAsString:(-p).toString(),arrowLengthRight:_,arrowLengthRightAsString:_.toString(),negativeArrowLengthRightAsString:(-_).toString(),absArrowLengthBoth:Math.abs(p)+Math.abs(_),maxArrowLengthLeft:Math.max(0,p),maxArrowLengthRight:Math.max(0,_)}}},positionBar:function(e){if(e.barD3){var t=e.dataItem.item,a=[t.startOffset,t.endOffset,t.isArrowLeft,t.isArrowRight,t.leftArrowDegree,t.rightArrowDegree,e.barHeight].join(","),i=this._optionCache[a],n=i.arrowLengthLeft,l=i.arrowLengthRight,c=i.arrowLengthLeftAsString,d=i.arrowLengthRightAsString,m=(i.negativeArrowLengthLeftAsString,i.negativeArrowLengthRightAsString),u=Math.max(0,e.width+i.startOffset+i.endOffset),h=Math.max(0,u-i.maxArrowLengthLeft-i.maxArrowLengthRight);u<i.absArrowLengthBoth&&(n=u*(n/i.absArrowLengthBoth),l=u*(l/i.absArrowLengthBoth),c=n.toString(),d=l.toString(),m=(-l).toString());var p,_=i.halfBarHeightAsString,g=h.toString(),T=(-h).toString();p=i.isArrowLeft?i.isArrowRight?["M",-Math.min(n,0)-i.startOffset,",",_,"l",c,",-",_,"h",g,"l",d,",",_,"l",m,",",_,"h",T,"Z"].join(""):["M",-Math.min(n,0)-i.startOffset,",",_,"l",c,",-",_,"h",g,"v",i.barHeightAsString,"h",T,"Z"].join(""):i.isArrowRight?["M",-i.startOffset,",0h",h,"l"+d,",",_,"l",m,",",_,"h",T,"Z"].join(""):["M",-i.startOffset,",0h",h,"v",i.barHeightAsString,"h",T,"Z"].join(""),e.barD3.select("."+r).attr("d",p),e.barD3.select("."+s).attr("transform","translate("+(n>0?n-4:0)+")"),null!=t.fillPatternType&&e.barD3.select("path."+o).attr("d",e.dataItem.item.start?p:"")}e.worldViewVisible&&(e.worldViewPathData=[{x:0,y:0},{x:e.worldViewBarWidth,y:0},{x:e.worldViewBarWidth,y:e.barHeight},{x:0,y:e.barHeight},{x:0,y:0}])},checkForBarType:function(e){return e===c.StartEnd||e===c.StartDuration||e===c.EndDuration},getBarOffsets:function(e){return{startOffset:+e.item.startOffset||0,endOffset:+e.item.endOffset||0}}}),e.exports=d},612:(e,t,a)=>{var i=a(199),n=i.NGANTT_BAR_RECT_CLASS,r=i.NGANTT_BAR_TEXT_CLASS,o=i.BarType,s=i.DisplayedElements,l=i.ElemType,c=function(){};Object.assign(c.prototype,{createBar:function(e){e.barD3.append("path").attr("class",e.enrichClassFunc(n+" ngantt-arrow-path",{elemType:l.BarRectangle,shape:e.barShapeId})).attr("transform","translate(0,"+e.barHeight/2+")").attr("d","M-8,0 L0,-10 L0,10 L-8,0")},positionBar:function(e){e.barD3&&(e.rowDataItem.isHidden||(e.rowDataItems.isDetailingRow?e.rowDataItem.areLeavesCollapsed&&e.ganttWidget._getCurrentlyDisplayedElementsInRow(e.rowDataItem)&(s.BarsInOwnHiddenLeafRows|s.BarsInLeafRowsInHiddenDescendantRows):e.rowDataItem.isCollapsed&&e.ganttWidget._getCurrentlyDisplayedElementsInRow(e.rowDataItem)&s.BarsInHiddenDescendantRows)?e.barD3.select("."+r).remove():e.barD3.select("."+r).attr("x",2))},checkForBarType:function(e){return e===o.Single||e===o.SingleRespectedByOptimization}}),e.exports=c},643:(e,t,a)=>{var i=a(199),n=i.NGANTT_BAR_RECT_CLASS,r=i.NGANTT_BAR_TEXT_CLASS,o=i.BarType,s=i.DisplayedElements,l=i.ElemType,c=function(){};Object.assign(c.prototype,{createBar:function(e){e.barD3.append("path").attr("class",e.enrichClassFunc(n+" ngantt-arrow-path",{elemType:l.BarRectangle,shape:e.barShapeId})).attr("transform","translate(0,"+e.barHeight/2+")").attr("d","M8,0 L0,-10 L0,10 L8,0")},positionBar:function(e){e.barD3&&(e.rowDataItem.isHidden||(e.rowDataItems.isDetailingRow?e.rowDataItem.areLeavesCollapsed&&e.ganttWidget._getCurrentlyDisplayedElementsInRow(e.rowDataItem)&(s.BarsInOwnHiddenLeafRows|s.BarsInLeafRowsInHiddenDescendantRows):e.rowDataItem.isCollapsed&&e.ganttWidget._getCurrentlyDisplayedElementsInRow(e.rowDataItem)&s.BarsInHiddenDescendantRows)?e.barD3.select("."+r).remove():(e.barD3.select("."+r).attr("x",10),e.barD3.selectAll(".ntexthelper-wrapping-line").attr("x",10)))},checkForBarType:function(e){return e===o.Single||e===o.SingleRespectedByOptimization}}),e.exports=c},756:(e,t,a)=>{var i=a(680),n=a(571),r=n.nD3MigrationHelper.transform,o=n.nCursorHelper,s=n.nDateHelper,l=n.nEventDispatcher,c=n.nOSDetector,d=a(442),m=a(199),u=m.BarInteractions,h=m._BarInteractions,p=m.BarSnapTargets,_=m.TimeType,g=m.ElemType,T=m._BarTypeFlags,f=m.BarType,D=m.DisplayedElements,v=a(651).LayoutRow,y=m.NGANTT_BAR_OUTLINE_CLASS,w=m.NGANTT_BAR_PHANTOM_CLASS,S=m.NGANTT_TIMEAREA_ROW_CONTENTS_CLASS,I=.05;let A=u.DragHor|u.DragHorOrVer|u.DragLeftSide|u.DragRightSide|h.DragHorOrVerOverride|h.CurrentlySmartOverride;var b=u.DragVer|u.DragHorOrVer|h.DragHorOrVerOverride|h.CurrentlySmartOverride,E=function(e,t){this._ganttWidget=e,this._options={...t},this._isInitiated=!1,this._draggedFuncPromiseCounter=0,this._draggedFuncPromiseMinimumCount=0};Object.assign(E.prototype,{destroy:function(){this._reset()},setOption:function(e,t){this._options[e]=t},isInitiated:function(){return this._isInitiated},isActive:function(){return this._isInitiated&&this._isActive},isDropped:function(){return this._isInitiated&&this._isDropped},isAutomaticRowExpansionEnabled:function(){return this._isInitiated&&(this._isAutomaticRowExpansionEnabled||this._interaction&h.DragHorOrVerOverride)},hasCoupledTimeItems:function(){return this._isInitiated&&!!this._coupledTimeDataItems},isDraggedTimeItem:function(e){return this._isInitiated&&e===this._timeDataItem},getPointerX:function(){return this._isInitiated&&this._pointerX},getPointerDateTime:function(){return this._isInitiated&&this._pointerDateTime},initiate:function(e,t,a){var i=this;if(!i._isInitiated&&(i._createBarPhantom(e,t),i._isInitiated)){if(i._draggedFuncPromiseMinimumCount=i._draggedFuncPromiseCounter,i._isActive=a,i._interaction&h.Compound)for(;t.parentTimeDataItem;)t=t.parentTimeDataItem;i.isAutomaticRowExpansionEnabled()&&i._options.checkForAutomaticRowExpansionFunc(e.center.x,e.center.y,t.rowDataItem.visibleRowDataItem,void 0,!1),i.checkForAutoscrollOnBarDragging(e,t),i._pointerType=e.pointerType,i._options.setBarInteractionCursorFunc(i._interaction&~h.CurrentlyDraggedHorOnly);var n={sender:t.item,elemType:g.Bar,interaction:i._interaction&~h.Compound,event:e.srcEvent,cancel:!1};if(i._options.dragStartFunc||i._options.dragEnterFunc){try{i._options.dragStartFunc?.call(i,n)}catch(t){throw i.terminate(e,!0),t}if(!n.cancel){Array.isArray(n.coupledItems)&&(i._coupledTimeDataItems=[],n.coupledItems.forEach((function(a){var n=i._options.getTimeDataItemFunc(a);n&&n!==t&&(n.elem&&n.item.start&&i._createBarPhantom(e,n,!0),i._coupledTimeDataItems.push(n))})),i._coupledTimeDataItems.length||delete i._coupledTimeDataItems),delete n.coupledItems;try{i._options.dragEnterFunc?.call(i,n)}catch(t){throw i.terminate(e,!0),t}}if(n.cancel)return i.terminate(e,!0),!1}var r=t.item.snapTargetsForStart??i._options.defaultBarSnapTargetsForStart,o=t.item.snapTargetsForEnd??i._options.defaultBarSnapTargetsForEnd;if(i._snapTargetsForStart=r,i._snapTargetsForEnd=o,r||o){if(i._options.dragEnterFunc&&Array.isArray(n.snapTargetStartDates)&&(i._snapTargetStartDates=n.snapTargetStartDates.slice()),i._options.dragEnterFunc&&Array.isArray(n.snapTargetEndDates)&&(i._snapTargetEndDates=n.snapTargetEndDates.slice()),i._snapTargetStartDates&&i._snapTargetStartDates.sort((function(e,t){return e-t})),i._snapTargetEndDates&&i._snapTargetEndDates.sort((function(e,t){return e-t})),i._createCachedRowDependentSnapTargets(t.rowDataItem.visibleRowDataItem),(r|o)&p.CalendarGrids){i._snapTargetStartWorkingTimeDates=[],i._snapTargetEndWorkingTimeDates=[];var s=i._options.determineCalendarForRowDataItemFunc(t.rowDataItem);let e=s?s.timeTypeChangeTimes():void 0;if(e){var l=s.determineTimeType(e[0])!==_.NonWorkingTime;e.forEach((function(e){l?i._snapTargetStartWorkingTimeDates.push(e):i._snapTargetEndWorkingTimeDates.push(e),l=!l}))}}if((r|o)&p.DateLines){var c={},d=i._options.dateLines;d&&(d.forEach((function(e){!1!==e.isSnapTarget&&e.date instanceof Date&&(c[e.date.getTime()]=!0)})),i._snapTargetDateLineDates=[],Object.keys(c).forEach((function(e){i._snapTargetDateLineDates.push(new Date(+e))})),i._snapTargetDateLineDates.sort((function(e,t){return e-t})))}if((r|o)&p.DateLineGrids){var m={},u=i._options.timeAxis.actualStart().getTime(),T=i._options.timeAxis.actualEnd().getTime(),f=i._options.dateLineGrids;if(f&&f.forEach((function(e){!1!==e.isSnapTarget&&i._options.callFunctionForAllDatesInDateLineGridFunc(u,T,e.timeType,(function(e){m[e.getTime()]=!0}))})),i._ganttWidget.options.timescaleRibbonDateLinesVisible){let e=i._ganttWidget.determineTimescaleRibbonDateLines();e&&e.forEach((e=>{m[e.getTime()]=!0}))}Object.keys(m).length&&(i._snapTargetDateLineGridDates=[],Object.keys(m).forEach((function(e){i._snapTargetDateLineGridDates.push(new Date(+e))})),i._snapTargetDateLineGridDates.sort((function(e,t){return e-t})))}}}return i._isInitiated},_createCachedRowDependentSnapTargets:function(e){var t=this;if(!t._cachedSnapTargetsForRowDataItemIDs[e.id]){var a=t._cachedSnapTargetsForRowDataItemIDs[e.id]={};if(t._snapTargetsForStart||t._snapTargetsForEnd){var i={},n={};t._doCreateCachedRowDependentSnapTargets(e,i,n),a._snapRowDependentTargetStartDates=[],Object.keys(i).forEach((function(e){a._snapRowDependentTargetStartDates.push(new Date(+e))})),a._snapRowDependentTargetStartDates.length?a._snapRowDependentTargetStartDates.sort((function(e,t){return e-t})):delete a._snapRowDependentTargetStartDates,a._snapRowDependentTargetEndDates=[],Object.keys(n).forEach((function(e){a._snapRowDependentTargetEndDates.push(new Date(+e))})),a._snapRowDependentTargetEndDates.length?a._snapRowDependentTargetEndDates.sort((function(e,t){return e-t})):delete a._snapRowDependentTargetEndDates}}},_doCreateCachedRowDependentSnapTargets:function(e,t,a,i){var n=this;(n._snapTargetsForStart|n._snapTargetsForEnd)&(p.Start|p.End)&&e.item.timeItems&&n._options.determineTimeDataItemsFunc(e.item.timeItems,!0).forEach((function(e){e!==n._timeDataItem&&(!n._coupledTimeDataItems||n._coupledTimeDataItems.indexOf(e)<0)&&(!n._snapTargetStartDates&&(n._snapTargetsForStart|n._snapTargetsForEnd)&p.Start&&e.item.startIsSnapTarget&&e.item.start instanceof Date&&(t[1e3*Math.floor(e.item.start.getTime()/1e3)]=!0),!n._snapTargetEndDates&&(n._snapTargetsForStart|n._snapTargetsForEnd)&p.End&&e.item.endIsSnapTarget&&e.item.end instanceof Date&&(a[1e3*Math.ceil(e.item.end.getTime()/1e3)]=!0))})),["detailingRowDataItems","childRowDataItems"].forEach((function(r,o){if(!e.isDetailingRow||!o){let s=n._options.getCurrentlyDisplayedElementsInRowFunc(e);s&(o?D.BarsInHiddenDescendantRows:D.BarsInLeafRowsInHiddenDescendantRows|D.BarsInOwnHiddenLeafRows)&&(o||!i||s&D.BarsInOwnHiddenLeafRows)&&e[r]?.forEach((function(e){n._doCreateCachedRowDependentSnapTargets(e,t,a,!0)}))}}))},_determineRowDependentSnapTargets:function(e){return this._cachedSnapTargetsForRowDataItemIDs[e.id]||{}},terminate:function(e,t){var a=this;a._isInitiated&&(a._options.setBarInteractionCursorFunc(u.None),a._options.onEventFunc&&e&&a._options.onEventFunc.call(a,{sender:null,eventType:"tooltip",event:e.srcEvent||e,hammerEvent:e}),a._options.stopAutoscrollFunc(),a._dropBarPhantoms(e,t||!a._dropAllowed))},checkForAutoscrollOnBarDragging:function(e,t){var a=this,i=a._interaction&A,n=a._interaction&b;a._options.checkForAutoscrollFunc(e,t,i,n)},_createBarPhantom:function(e,t,a){var n,o=this,s=i.select(t.elem),l=o._options.pointToSVGRelativeFunc(t.elem,e.center.x,e.center.y);if(n=a?o._interaction:o._options.determineBarInteractionFunc(s,o._options.getActualBarInteractionsFunc(t),l,e,!0)){var p,_=o._options.determineSuperTimeDataItemFunc(t);if(n&h.Compound||_===t){if(p=o._options.determineDescendantTimeDataItemsFunc(_).filter((e=>o._options.determineTimeRangeFunc(e))),null==_.item.barShape&&(t=void 0,p.some((function(e){return!!(o._options.getActualBarInteractionsFunc(e)&(u.DragHor|u.DragVer|u.DragHorOrVer|h.DragHorOrVerOverride))&&(t=e,!0)})),!t))return;_!==t&&(_.item.childTimeItems.length>1&&(c.isFirefox&&!_.elem.childNodes.length?l.y+=r(i.select(_.elem).attr("transform")).translate[1]-r(s.attr("transform")).translate[1]:l=o._options.pointToSVGRelativeFunc(_.elem,e.center.x,e.center.y)),t=_,s=i.select(t.elem))}var f,D,v=o._ganttWidget.options.ignoreCalendarOnBarInteractions?null:t.item.calendar||o._options.determineCalendarForRowDataItemFunc(t.rowDataItem)||o._options.defaultCalendar,I=o._ganttWidget.pageXToDate(e.center.x),A=o._options.determineTimeRangeFunc(t);n===u.DragRightSide?(f=0,D=o._options.timeAxis.convertDateToX(A.end)-o._ganttWidget.pageXToTimeAxisX(e.center.x)):n===u.DragLeftSide?(f=0,D=o._ganttWidget.pageXToTimeAxisX(e.center.x)-o._options.timeAxis.convertDateToX(A.start)):(f=a?void 0:d.calculateWorkingTime(v,I,A.start),D=0);var b=i.select(o._options.getOrCreateSpecialRowElemFunc(t.rowDataItem.visibleRowDataItem,!0,0)).select("."+S),E={phantomType:g.Bar,isMaster:!a,timeDataItem:t,start:A.start,duration:d.calculateWorkingTime(v,A.end,A.start),end:A.end,rowDataItem:t.rowDataItem,workingTimeSpanFromStartToMouseX:f,distanceFromStartToMouseX:D,newY:t.newY,oldVerticalScrollOffset:o._options.getBodyViewScrollTopFunc(t.rowDataItem),dropAllowed:!0,version:1};a&&(E.isStartingBeforeMaster=o._timeDataItem.phantomDataItem.start>A.start,E.workingTimeSpanBetweenBars=E.isStartingBeforeMaster?d.calculateWorkingTime(v,A.end,o._timeDataItem.phantomDataItem.start):d.calculateWorkingTime(v,A.start,o._timeDataItem.phantomDataItem.end)),E.duration||A.start.getTime()===A.end.getTime()||(E.duration=A.end-A.start,E.isInNonworkingTime=!0),t.phantomDataItem=E;let k=!0;if(t.backgroundElem){let e=s.select("."+y);e.size()&&(e.style("fill","rgba(255,255,255,0.5)"),k=!1)}if(k){let e=+t.item.opacity;0!==e&&(e=e||1),s.style("opacity",Math.max(0,e)*m._DefaultBarOpacity)}var R=o._options.createBarFunc(b,E);R.attr("transform","translate("+o._ganttWidget.convertXToLimitedX(E.newX)+","+E.newY+")"),E.backgroundElem&&i.select(E.backgroundElem).attr("transform",R.attr("transform"));var C=o._options.determineTimeDataItemExtentFunc(_,void 0,void 0,!0),x=t.rowDataItem.visibleRowDataItem.subRowDataItems[t.subRowIndex];E.frameD3=b.append("g").attr("transform","translate("+o._ganttWidget.convertXToLimitedX(C.left)+","+(o._ganttWidget.determineActualRowMargins().top+x.offsetY+C.top-x.minimumY)+")");var B=E.frameD3.append("rect").attr("class",w).attr("x",-o._options.phantomFrameDistance).attr("y",-o._options.phantomFrameDistance).attr("rx",o._options.phantomFrameRounding).attr("ry",o._options.phantomFrameRounding).attr("height",C.bottom-C.top+2*o._options.phantomFrameDistance);!function e(){E.frameD3&&B.transition("stroke-width").duration(o._options.phantomTransitionDuration).style("stroke-width",4-parseInt(B.style("stroke-width"))+"px").on("end",e)}();var L=o._options.registerBindingsForTimeItemsFunc(_.item);if(n&h.Compound||_===t?p.forEach((function(e){e!==t&&(null!=_.item.barShape||o._options.getActualBarInteractionsFunc(e)&(u.DragHor|u.DragVer|u.DragHorOrVer|h.DragHorOrVerOverride)||L&&L.indexOf(e.item)>=0)&&o._doCreateSiblingBarPhantom(e,E,b,I,v)})):L&&L.forEach((function(e){e!==t.item&&o._doCreateSiblingBarPhantom(o._options.getTimeDataItemFunc(e),E,b,I,v)})),E.siblings&&(E.isInNonworkingTime&&(E.duration=E.siblings.reduce((function(e,t){return e+t.duration}),0)),E.siblings.sort((function(e,t){var a=e.start instanceof Date,i=t.start instanceof Date;return a||i?a?i?e.start.getTime()-t.start.getTime():-1:1:E.siblings.indexOf(e)-E.siblings.indexOf(t)})),E.siblings.forEach((function(e,t){var a=e.timeDataItem.item.start;if(a&&a instanceof Date)for(var i=t-1;i>=0;i--){var n=E.siblings[i];if(o._options.getActualBarTypeFunc(n.timeDataItem)&T.End){var r=n.timeDataItem.item.end;r&&r instanceof Date&&(r.getTime()===a.getTime()||a>r&&!E.isInNonworkingTime&&!d.calculateWorkingTime(v,a,r))&&(n.siblingSynchronizedOnEnd=e)}}}))),E.backgroundElem&&(R.remove(),b.append((function(){return R.node()}))),!a){if(o._options.onEventFunc){var O=E.rowDataItem;O.isDetailingRow&&!o._ganttWidget.options.detailingRowsVisible&&(O=O.parentRowDataItem),o._options.onEventFunc.call(o,{sender:E.timeDataItem.item,eventType:"tooltip",event:e.srcEvent,hammerEvent:e,elem:E.elem,elemType:g.Bar,phantom:{start:E.start,end:E.end,newRowItem:O.item,interaction:n}})}o._options.setBarInteractionCursorFunc(n);var M=o._options.determineTimeDataItemExtentFunc(_,void 0,void 0,!1),V=Math.min(C.top-M.top,3),F=Math.min(M.bottom-C.bottom,3);o._options.positionDragDateLinesFunc(E,Object.assign({},C,{top:M.top+V,bottom:M.bottom-F})),o._isInitiated=!0,o._isAutomaticRowExpansionEnabled=n&u.DragVer&&!(n&u.DragHorOrVer),o._timeDataItem=t,o._elemType=g.Bar,o._interaction=n,o._offsetY=(C.bottom-C.top)/2-l.y,o._dropAllowed=!0,o._cachedSnapTargetsForRowDataItemIDs={}}}},_doCreateSiblingBarPhantom:function(e,t,a,n,r){var o=this;if(e.elem){var s=o._options.determineTimeRangeFunc(e),l=i.select(e.elem),c={phantomType:g.Bar,parentPhantomDataItem:t,timeDataItem:e,start:s.start,end:s.end,duration:d.calculateWorkingTime(t.isInNonworkingTime?void 0:r,s.end,s.start),timeDistanceFromParent:d.calculateWorkingTime(t.isInNonworkingTime?void 0:r,s.start,t.start),isInNonworkingTime:t.isInNonworkingTime,rowDataItem:e.rowDataItem,distanceFromStartToMouseX:0,newY:e.newY,oldVerticalScrollOffset:o._options.getBodyViewScrollTopFunc(e.rowDataItem),dropAllowed:!0,version:1};if(e.phantomDataItem=c,t.siblings||(t.siblings=[]),t.siblings.push(c),!t.timeDataItem.backgroundElem){let e=+t.timeDataItem.item.opacity;0!==e&&(e=e||1),l.style("opacity",Math.max(0,e)*m._DefaultBarOpacity)}o._options.createBarFunc(a,c).attr("transform","translate("+o._ganttWidget.convertXToLimitedX(c.newX)+","+c.newY+")")}},handleDrag:function(e,t,a){var i=this;if(t=i._timeDataItem,!a){if(i.isAutomaticRowExpansionEnabled()){var n=e||i._dragBarPhantomHammerEvent;n&&i._options.checkForAutomaticRowExpansionFunc(n.center.x,n.center.y,t.rowDataItem.visibleRowDataItem,void 0,!1)}e&&i.checkForAutoscrollOnBarDragging(e)}if(e)i._dragBarPhantomHammerEvent=e;else if(!(e=i._dragBarPhantomHammerEvent))return;var r=t.phantomDataItem,o=!(i._interaction&u.DragHorOrVer);if(e.srcEvent.shiftKey&&i._options.getActualBarInteractionsFunc(t)&u.DragHorOrVer&&i._interaction&(u.DragHor|u.DragVer)?i._interaction|=h.DragHorOrVerOverride:!e.srcEvent.shiftKey&&i._interaction&h.DragHorOrVerOverride&&(i._interaction&=~h.DragHorOrVerOverride),o&&i._options.setBarInteractionCursorFunc(i._interaction&~h.CurrentlyDraggedHorOnly),i._interaction&u.DragHorOrVer)(Math.abs(e.deltaX)>5||Math.abs(e.deltaY)>5)&&(i._interaction&=h.DragHorOrVerOverride|u.DragSmartHorOrVer|h.Compound,Math.abs(e.deltaX)>Math.abs(e.deltaY)?i._interaction|=u.DragHor:(i._interaction|=u.DragVer,i._isAutomaticRowExpansionEnabled=!0),i._options.setBarInteractionCursorFunc(i._interaction&~h.CurrentlyDraggedHorOnly));else if(o&&i._interaction&u.DragSmartHorOrVer)if(i._interaction&u.DragVer&&void 0===i._smartCenterX&&(i._smartCenterX=e.center.x),i._smartTimerID&&window.clearTimeout(i._smartTimerID),i._smartTimerID=a?void 0:window.setTimeout((()=>{i._smartTimerID=void 0;let n=i._options.findRowDataItemAtYFunc(e.center.y);i._interaction&u.DragHor?n!==r.rowDataItem&&(i._interaction|=h.CurrentlySmartOverride,i._smartOverriddenRowDataItem=n,i._smartCenterX=e.center.x,i.handleDrag(e,t,a)):Math.abs(i._smartCenterX-e.center.x)>i._options.maximumSnapDistance&&(i._interaction|=h.CurrentlySmartOverride,i._interaction=i._interaction&~u.DragVer|u.DragHor|h.CurrentlySmartOverride,i._smartOverriddenRowDataItem=n,i.handleDrag(e,t,a),i._interaction=i._interaction&~u.DragHor|u.DragVer|h.CurrentlySmartOverride,delete i._smartOverriddenRowDataItem,i.handleDrag(e,t,a))}),1e3),i._interaction&u.DragHor)i._options.findRowDataItemAtYFunc(e.center.y)!==r.rowDataItem&&Math.abs(e.velocityY)>I&&Math.abs(e.velocityX)<I&&(i._interaction=i._interaction&~u.DragHor|u.DragVer|h.CurrentlySmartOverride,delete i._smartOverriddenRowDataItem);else if(Math.abs(e.velocityX)>I&&Math.abs(e.velocityY)<I){i._interaction=i._interaction&~u.DragVer|u.DragHor|h.CurrentlySmartOverride;let t=i._options.findRowDataItemAtYFunc(e.center.y);i._smartOverriddenRowDataItem=t}i._options.setDragDateLinesTextVisibilityFunc((i._interaction&(h._ExcludeAdditionalFlagsMask|h.DragHorOrVerOverride|h.CurrentlySmartOverride))===u.DragVer?"hidden":null);var s=!i._options.isBindingActiveFunc()&&r.siblings&&i._interaction&(u.DragHor|u.DragVer|h.DragHorOrVerOverride)?[]:void 0;i._dragBarPhantomWithSiblings(e,r,s),i._coupledTimeDataItems&&i._coupledTimeDataItems.forEach((function(t){t.phantomDataItem&&i._dragBarPhantomWithSiblings(e,t.phantomDataItem,s,!0)}))},_setDropAllowed:function(e){var t=this;t._dropAllowed=e;var a=e?t._options.interactionCursor:"no-drop";o.setCursor(t._ganttWidget.element(),a)},_dragBarPhantomWithSiblings:function(e,t,a,i){var n=this,r=t.timeDataItem,o=n._doDragSingleBarPhantom(e,t,a,i,!1);if(n._isInitiated){for(var s=t.dropAllowed,c=n._ganttWidget.options.ignoreCalendarOnBarInteractions?null:r.item.calendar||n._options.determineCalendarForRowDataItemFunc(r.rowDataItem),m=[r.item],p=[],_={};m.length>0;)m.forEach((function(e){var a;n._interaction&(u.DragHor|h.DragHorOrVerOverride|u.DragLeftSide)&&(a=n._options.getBindingPropertyInfosAndValueFunc(e,"start","date").propertyInfos)&&(r.item===e&&(a.value=t.start),a.itemInfos.forEach((function(e){var a=e.item[n._OBJECT_ID_PROPERTY]+e.itemPropertyName;_[a]||(_[a]=!0,p.indexOf(e.item)<0&&p.push(e.item),"start"===e.itemPropertyName&&e.item.end instanceof Date?e.item.end=d.addWorkingTime(c,t.start,n._options.getBindingPropertyInfosAndValueFunc(e.item,"duration","number").value):"end"===e.itemPropertyName&&e.item.start instanceof Date&&(e.item.start=d.addWorkingTime(c,t.start,-n._options.getBindingPropertyInfosAndValueFunc(e.item,"duration","number").value)))}))),n._interaction&(u.DragLeftSide|u.DragRightSide)&&(a=n._options.getBindingPropertyInfosAndValueFunc(e,"duration","number").propertyInfos)&&(r.item===e&&(a.value=t.duration),a.itemInfos.forEach((function(e){var t=e.item[n._OBJECT_ID_PROPERTY]+e.itemPropertyName;_[t]||(_[t]=!0,p.indexOf(e.item)<0&&p.push(e.item))}))),n._interaction&(u.DragHor|h.DragHorOrVerOverride|u.DragRightSide)&&(a=n._options.getBindingPropertyInfosAndValueFunc(e,"end","date").propertyInfos)&&(r.item===e&&(a.value=t.end),a.itemInfos.forEach((function(e){var a=e.item[n._ganttWidget._OBJECT_ID_PROPERTY]+e.itemPropertyName;_[a]||(_[a]=!0,p.indexOf(e.item)<0&&p.push(e.item),"start"===e.itemPropertyName&&e.item.end instanceof Date?e.item.end=d.addWorkingTime(c,t.end,n._options.getBindingPropertyInfosAndValueFunc(e.item,"duration","number").value):"end"===e.itemPropertyName&&e.item.start instanceof Date&&(e.item.start=d.addWorkingTime(c,t.end,-n._options.getBindingPropertyInfosAndValueFunc(e.item,"duration","number").value)))})))})),m=p,p=[];var f=n._options.determineSuperTimeDataItemFunc(r),D=n._options.determineTimeDataItemExtentFunc(f,void 0,void 0,!0);D.start=t.start,D.end=t.end,!t.siblings||r.item.barShape&&!a||(t.siblings.forEach((function(o,l){if(n._doDragSingleBarPhantom(e,o,a,i,!0),a){var c=n._options.getActualBarTypeFunc(o.timeDataItem)&T.End;r.item.start.getTime()===o.timeDataItem.item.start?.getTime()&&(t.start=new Date(o.start)),c&&r.item.end.getTime()===o.timeDataItem.item.end?.getTime()&&(t.end=new Date(o.end));for(var d=l-1;d>=0;d--){var m=t.siblings[d];m.siblingSynchronizedOnEnd===o&&(m.end=new Date(o.start))}}s&&(s=o.dropAllowed)})),D.start=t.start,D.end=t.end,t.siblings.forEach((function(e){var t=e.start,a=e.end,i=n._options.handleOffsetsOnStartAndEndFunc(e.timeDataItem,t,a);i.outerStart&&(t=i.outerStart),i.outerEnd&&(a=i.outerEnd),D.start>t&&(D.start=t),D.end<a&&(D.end=a)})),a&&a.forEach((function(e){e()}))),D.left=n._options.timeAxis.convertDateToX(D.start),D.right=n._options.timeAxis.convertDateToX(D.end);var v=n._ganttWidget.determineActualRowMargins(),y=r.rowDataItem.visibleRowDataItem.subRowDataItems[r.subRowIndex];if(t.frameStart=new Date(D.start),t.frameEnd=new Date(D.end),t.frameD3.attr("transform","translate("+n._ganttWidget.convertXToLimitedX(D.left)+","+(v.top+y.offsetY+D.top-y.minimumY+o-r.newY)+")").select("."+w).attr("width",Math.max(n._ganttWidget.convertXToLimitedX(D.right)-n._ganttWidget.convertXToLimitedX(D.left),0)+2*n._options.phantomFrameDistance),!i){var S=n._options.determineTimeDataItemExtentFunc(f,void 0,void 0,!1),I=Math.min(D.top-S.top,3),A=Math.min(S.bottom-D.bottom,3);if(n._options.positionDragAreasAndDateLinesFunc(t,Object.assign({},D,{top:S.top+I,bottom:S.bottom-A}),o,v,y),n._setDropAllowed(s??n._dropAllowed),n._options.onEventFunc){var b=t.rowDataItem;b.isDetailingRow&&!n._ganttWidget.options.detailingRowsVisible&&(b=b.parentRowDataItem),n._options.onEventFunc.call(n,{sender:r.item,event:e.srcEvent,hammerEvent:e,eventType:"tooltip",elem:t.frameD3.node(),elemType:g.Bar,phantom:{start:new Date(t.start),end:new Date(t.end),newRowItem:b.item,interaction:n._interaction&~h.Compound}})}}}else e[l.CANCEL_PROPERTY]=!0},__checkSnapSourceDate:function(e,t,a,i,n,r){var o=this;if(r&&"function"==typeof o._options.checkSnapSourceDateFunc){var l={sender:e.item,actualCalendar:o._ganttWidget.options.ignoreCalendarOnBarInteractions?null:e.item.calendar||o._options.determineCalendarForRowDataItemFunc(e.rowDataItem),dates:t,sourceDate:a,sourceDateIsStart:i,resultSnapDistanceInMilliseconds:void 0};if(o._options.checkSnapSourceDateFunc(l),"number"==typeof l.resultSnapDistanceInMilliseconds)return void((null==n.snapDistance||Math.abs(n.snapDistance)>Math.abs(l.resultSnapDistanceInMilliseconds))&&(n.snapDistance=l.resultSnapDistanceInMilliseconds,n.targetDateIsStart=i))}var c=t.length?s.findDateWithinSortedArray(t,a,!1,void 0):-1;if(c>=0){var d=t[c],m=d.getTime()-a.getTime();Math.abs(n.snapDistance)>Math.abs(m)&&(n.snapDistance=m,n.targetDateIsStart=i),d<a&&null!=(d=t[c+1])&&(m=d.getTime()-a.getTime(),Math.abs(n.snapDistance)>Math.abs(m)&&(n.snapDistance=m,n.targetDateIsStart=i))}},_doDragSingleBarPhantom:function(e,t,a,n,o){var l=this,c=t.timeDataItem,m=!1,D=l._ganttWidget.pageXToTimeAxisX(e.center.x);if(!n&&!o){var v=l._options.timeAxis.actualTimeAreaWidth()-10;D>v&&(D=v,e.center.x=l._ganttWidget.timeAxisXToPageX(D)),D<10&&(D=10,e.center.x=l._ganttWidget.timeAxisXToPageX(D))}var y,w,S=n?null:D+t.distanceFromStartToMouseX,I=i.select(t.elem),A=!1,b=0;let E=l._interaction;if(E!==u.None){if(w=t.newY,!(E&u.DragHorOrVer)&&E&(u.DragVer|h.DragHorOrVerOverride|h.CurrentlySmartOverride)){if(n||o?y=E&h.CurrentlyDraggedHorOnly?c.rowDataItem:l._timeDataItem.phantomDataItem.rowDataItem:((y=l._smartOverriddenRowDataItem??l._options.findRowDataItemAtYFunc(e.center.y))===c.rowDataItem.visibleRowDataItem&&(y=c.rowDataItem),E=y===c.rowDataItem?l._interaction|=h.CurrentlyDraggedHorOnly:l._interaction&=~h.CurrentlyDraggedHorOnly),E&h.CurrentlySmartOverride&&E&u.DragHor){if(!(l._interaction&h.CurrentlyDraggedHorOnly)){var R=c.rowDataItem.visibleRowDataItem.subRowDataItems[c.subRowIndex];w-=R.offsetY}y&&(w+=y.visibleRowDataItem.oldY-c.rowDataItem.visibleRowDataItem.oldY)}else w+=e.deltaY/l._options.visualZoomFactor+(l._options.getBodyViewScrollTopFunc(c.rowDataItem)-t.oldVerticalScrollOffset);var C=r(I.attr("transform")).translate[1];w!==C&&(m=!0)}y&&l._createCachedRowDependentSnapTargets(y.visibleRowDataItem);var x=null,B=c.rowDataItem;l._ganttWidget.options.leafBarsVisibleOnParentRows&&B?.isDetailingRow&&(B=B.parentRowDataItem),l._ganttWidget.options.ignoreCalendarOnBarInteractions||t.isInNonworkingTime&&y===B||(x=c.item.calendar??l._options.determineCalendarForRowDataItemFunc(y??B));var L,O,M,V=l._ganttWidget.determineActualTimeResolutionInSeconds();if(n||(L=l._options.timeAxis.convertXToDate(S),(O=l._options.timeAxis.convertXToDate(S+1)).setSeconds(O.getSeconds()-1)),E===u.DragLeftSide)(M=x&&x.determineTimeType(L)!==_.WorkingTime?x.findStartOfNextTimeTypeChange(L):L)&&V>1&&t.start.getTime()!==M.getTime()&&(M=l._options.findRoundedTargetDateTimeFunc(x,t.start,M,!0)),M&&t.end.getTime()>M.getTime()&&(1===V&&M.getTime()===L.getTime()&&(M=s.determineBestDateBetween(M,O)),t.start.getTime()!==M.getTime()?(delete t.startIsNull,t.start=M,m=!0):S!==l._pointerX&&(m=!0));else if(E===u.DragRightSide)M=x&&x.determineTimeType(L)!==_.WorkingTime?x.findStartOfCurrentTimeTypeInterval(L):L,V>1&&t.end.getTime()!==M.getTime()&&(M=l._options.findRoundedTargetDateTimeFunc(x,t.end,M,!1)),M&&t.start.getTime()<M.getTime()&&(1===V&&M.getTime()===L.getTime()&&(M=s.determineBestDateBetween(M,O)),t.end.getTime()!==M.getTime()?(delete t.endIsNull,t.end=M,m=!0):S!==l._pointerX&&(m=!0));else if(l._timeDataItem.rowDataItem!==l._timeDataItem.phantomDataItem.rowDataItem||E&(u.DragHor|h.DragHorOrVerOverride)){if(o?t.timeDistanceFromParent?(M=d.addWorkingTime(x,t.parentPhantomDataItem.start,t.timeDistanceFromParent))&&(M=d.addWorkingTime(x,M,0)):M=new Date(t.parentPhantomDataItem.start):!(E&(u.DragHor|h.DragHorOrVerOverride))||Math.abs(e.deltaX)<=5?M=new Date(c.item.start):n&&(t.isStartingBeforeMaster?(M=d.addWorkingTime(x,l._timeDataItem.phantomDataItem.start,t.workingTimeSpanBetweenBars),b=1):M=d.addWorkingTime(x,l._timeDataItem.phantomDataItem.end,t.workingTimeSpanBetweenBars)),!M&&!n){var F=t.workingTimeSpanFromStartToMouseX||0,k=d.addWorkingTime(x,L,-F),N=d.addWorkingTime(x,O,-F);if(M=k&&N?s.determineBestDateBetween(k,N):k||N,!o&&c.item.end&&l._ganttWidget.options.ignoreCalendarOnBarInteractions){let e=l._options.timeAxis.collapseCalendar();e&&e.determineTimeType(M)===_.NonWorkingTime&&(M=d.addWorkingTime(x,M,t.duration),e.determineTimeType(M)===_.NonWorkingTime?(M=s.determineBestDateBetween(L,O),b=2):b=1)}if(c.item.end&&x&&M&&!d.addWorkingTime(x,M,t.duration)){var W=d.addWorkingTime(x,new Date(864e13),-t.duration);W&&(M=W,k=null)}M||(k=N=M=d.addWorkingTime(x,new Date(-864e13),0)),x&&k&&N&&N.getTime()-k.getTime()>O.getTime()-L.getTime()&&(M=x.findStartOfCurrentTimeTypeInterval(N))}if(!o&&M&&V>1&&(2===b?d.addWorkingTime(x,t.start,t.workingTimeSpanFromStartToMouseX):1===b?t.end:t.start).getTime()!==M.getTime())if(b>0){let e=2===b?d.addWorkingTime(x,c.item.start,t.workingTimeSpanFromStartToMouseX):c.item.end;M=new Date(M.valueOf()+1e3*V/2*(M<e?-1:1)),M=l._options.findRoundedTargetDateTimeFunc(x,e,M,!1)}else 0!==l._ganttWidget.options.horizontalDraggingUnitsPerStep||(L||O)&&(M=L||O),l._options.getActualBarTypeFunc(c)===f.EndDuration?(M=l._options.findRoundedTargetDateTimeFunc(x,c.item.end,d.addWorkingTime(x,M,t.duration),!1),M=d.addWorkingTime(x,M,-t.duration)):M=l._options.findRoundedTargetDateTimeFunc(x,c.item.start,M,!0);var P=t.start,H=t.end;if(2===b)t.start=d.addWorkingTime(null,M,-t.workingTimeSpanFromStartToMouseX),t.end=d.addWorkingTime(null,t.start,t.duration);else if(1===b)M&&x&&x.determineTimeType(M)===_.WorkingTime&&(M=d.addWorkingTime(x,M,-0)),M&&(delete t.endIsNull,t.end=M,delete t.startIsNull,t.start=d.addWorkingTime(x,M,-t.duration),t.start||(t.start=new Date(l._options.timeAxis.actualStart()),t.startIsNull=!0));else if(M&&x&&x.determineTimeType(M)===_.NonWorkingTime&&(M=d.addWorkingTime(x,M,0)),M){var X=!(E&(u.DragHor|h.DragHorOrVerOverride));X&&!o&&(M=(E&h.CurrentlySmartOverride?t.start:c.item.start)||M),delete t.startIsNull,t.start=M,delete t.endIsNull,t.end=(!X||o||d.calculateWorkingTime(x,c.item.end,M)?void 0:c.item.end)||(t.duration?d.addWorkingTime(x,M,t.duration):void 0)||t.start,t.end||(t.end=new Date(l._options.timeAxis.actualEnd()),t.endIsNull=!0),m=!0}else E&u.DragLeftSide&&S!==l._pointerX&&(m=!0);!m&&(P.getTime()!==t.start.getTime()||t.end&&H.getTime()!==t.end.getTime())&&(m=!0)}else A=!0}else A=!0,w=t.newY;if(A&&!(E&h.CurrentlySmartOverride)){var U=l._options.getBindingPropertyInfosAndValueFunc(c.item,"start","date").value,G=l._options.getBindingPropertyInfosAndValueFunc(c.item,"duration","number").value,Y=l._options.getBindingPropertyInfosAndValueFunc(c.item,"end","date").value;Y instanceof Date?U instanceof Date||(U=d.addWorkingTime(x,Y,-G)):Y=d.addWorkingTime(x,U,G),t.start.getTime()===U.getTime()&&t.end.getTime()===U.getTime()||(delete t.startIsNull,t.start=U,delete t.endIsNull,t.end=Y,m=!0)}if(!e.srcEvent.altKey&&!n&&!o&&m&&E&(u.DragLeftSide|u.DragRightSide|u.DragHor|h.DragHorOrVerOverride)&&(l._snapTargetsForStart&&!(E&u.DragRightSide)||l._snapTargetsForEnd&&!(E&u.DragLeftSide))){var z={targetDateIsStart:void 0,snapDistance:Number.MAX_VALUE},$=l._determineRowDependentSnapTargets((y||c.rowDataItem).visibleRowDataItem),Z=function(e){var a=e?l._snapTargetsForStart:l._snapTargetsForEnd,i=e?t.start:t.end;if(a&p.Start&&($&&$._snapRowDependentTargetStartDates&&l.__checkSnapSourceDate(c,$._snapRowDependentTargetStartDates,i,e,z,!0),l._snapTargetStartDates&&l.__checkSnapSourceDate(c,l._snapTargetStartDates,i,e,z,!0),e&&c.start instanceof Date&&l.__checkSnapSourceDate(c,[c.start],i,e,z,!0)),a&p.End&&($&&$._snapRowDependentTargetEndDates&&l.__checkSnapSourceDate(c,$._snapRowDependentTargetEndDates,i,e,z,!0),l._snapTargetEndDates&&l.__checkSnapSourceDate(c,l._snapTargetEndDates,i,e,z,!0)),a&p.CalendarGrids){var n=e?l._snapTargetStartWorkingTimeDates:l._snapTargetEndWorkingTimeDates;n&&l.__checkSnapSourceDate(c,n,i,e,z)}a&p.DateLines&&l._snapTargetDateLineDates&&l.__checkSnapSourceDate(c,l._snapTargetDateLineDates,i,e,z),a&p.DateLineGrids&&l._snapTargetDateLineGridDates&&l.__checkSnapSourceDate(c,l._snapTargetDateLineGridDates,i,e,z)};if(E!==u.DragRightSide&&Z.call(this,!0),E!==u.DragLeftSide&&Z.call(this,!1),null!=z.snapDistance&&(E!==u.DragRightSide?!t.startIsNull:!t.endIsNull)){var j=E!==u.DragRightSide?t.start:t.end,K=new Date(j.getTime()+z.snapDistance),q=l._options.timeAxis.convertDateToX(K,!0,l._ganttWidget.options.ignoreCalendarOnBarInteractions),Q=l._options.timeAxis.convertDateToX(j,!0,l._ganttWidget.options.ignoreCalendarOnBarInteractions);if(Math.abs(q-Q)<=l._options.maximumSnapDistance)if(E&(u.DragHor|h.DragHorOrVerOverride)&&l._options.getActualBarTypeFunc(c)&T.End){var J=d.addWorkingTime(x,K,t.duration);J&&(t.start=K,t.end=J)}else E!==u.DragRightSide?t.start=K:t.end=K,e.center.x+=q+z.snapDistance}}if(m&&l._options.draggedFunc){var ee=E&~h.Compound;ee&(h.DragHorOrVerOverride|h.CurrentlySmartOverride)&&(ee=u.DragHor|u.DragVer),y||ee&u.DragVer||(y=c.rowDataItem),y?.isDetailingRow&&!l._ganttWidget.options.detailingRowsVisible&&(y=y.parentRowDataItem);var te={sender:c.item,elemType:g.Bar,interaction:ee&h._ExcludeAdditionalFlagsMask,event:e.srcEvent,start:t.start,end:t.end,newY:w,newRowItem:y?.item,actualCalendar:x,dropAllowed:!0,cancel:!1,promise:null};if(!n&&!o)try{if(l._options.draggedFunc.call(l,te),te.cancel)return;if(t.start===te.start&&t.end===te.end||(t.start=te.start,t.end=te.end,null!=S&&(S=l._options.timeAxis.convertDateToX(d.addWorkingTime(null,te.start,t.timeSpanFromStartToMouseX)),e.center.x=l._ganttWidget.timeAxisXToPageX(S))),y?.item!==te.newRowItem&&(y=te.newRowItem&&l._options.getRowDataItemFunc(te.newRowItem)),"function"==typeof te.promise?.then){t.dropAllowed=void 0;let a=++l._draggedFuncPromiseCounter;te.promise.then((e=>{a>=l._draggedFuncPromiseMinimumCount&&(l._draggedFuncPromiseMinimumCount=a),"boolean"==typeof e?.dropAllowed&&e.dropAllowed!==l._dropAllowed&&l._setDropAllowed(e.dropAllowed)})).catch((()=>{l.terminate(e,!0)}))}else t.dropAllowed=te.dropAllowed}catch(e){throw te.cancel=!0,e}finally{te.cancel&&l.terminate(e,!0)}}if(y&&y!==t.rowDataItem&&(t.rowDataItem=y,m=!0),m){o||n||(l._isActive=!0,l._pointerX=S,l._pointerDateTime=l._options.timeAxis.convertXToDate(S),l._dragDistanceInMilliseconds=d.calculateWorkingTime(x,t.start,t.timeDataItem.item.start));var ae=function(){l._options.positionBarFullyFunc(I,void 0,t,!1,ee,void 0,w)};a?a.push(ae):ae()}return w},_deleteBarPhantom:function(e){var t=e.phantomDataItem;if(t&&(delete e.oldX,delete e.oldEndX,delete e.oldY,delete e.oldRowY,delete e.oldRowAtTheTop,t.siblings&&t.siblings.forEach((function(e){var t=e.timeDataItem;delete t.oldX,delete t.oldEndX,delete t.oldY,delete t.oldRowY,delete t.oldRowAtTheTop})),t.siblings&&t.siblings.forEach((function(t){var a=t.timeDataItem;if(!e.backgroundElem){let e=+a.item.opacity;0!==e&&(e=e||1),i.select(a.elem).style("opacity",Math.max(0,e))}delete t.oldVisibleRowDataItem,delete a.phantomDataItem,delete t.frameD3})),this._options.removeSpecialRowElemFunc(t.oldVisibleRowDataItem,0),delete this._smartOverriddenRowDataItem,delete t.oldVisibleRowDataItem,delete e.phantomDataItem,delete t.frameD3),e.elem){var a=i.select(e.elem);let t=!0;if(e.backgroundElem){let e=a.select("."+y);e.size()&&(e.style("fill","transparent"),t=!1)}if(t){let t=+e.item.opacity;0!==t&&(t=t||1),a.style("opacity",Math.max(0,t))}}},_dropBarPhantoms:function(e,t){var a=this,i=a._timeDataItem;if(a._options.unregisterAllItemsFunc(),a._isInitiated)try{a._isDropped=!0;var n,r,s=i.phantomDataItem;if(a._options.setDragDateLinesTextVisibilityFunc("hidden"),!t&&a._options.droppedFunc&&a._isActive){a._setTimeDataItemPropsForAnimation(i),a._coupledTimeDataItems&&a._coupledTimeDataItems.forEach((function(e){e.phantomDataItem&&a._setTimeDataItemPropsForAnimation(e)}));var l=a._interaction&h._ExcludeAdditionalFlagsMask;if(l&(h.DragHorOrVerOverride|h.CurrentlySmartOverride)&&(l=u.DragHor|u.DragVer),(s.rowDataItem===i.rowDataItem||a._interaction&h.CurrentlyDraggedHorOnly)&&(l&=~u.DragVer),s.start.getTime()===i.item.start?.getTime()&&(l&=~u.DragHor),l){var c=s.rowDataItem;c.isDetailingRow&&!a._ganttWidget.options.detailingRowsVisible&&(c=c.parentRowDataItem),r={sender:i.item,elemType:g.Bar,interaction:l,event:e?.srcEvent||e,start:s.start,end:s.end,newRowItem:c.item,workingTimeDistance:a._dragDistanceInMilliseconds,promise:void 0,cancel:!1},s.siblings&&(r.startsAndEndsOfChildItems=s.siblings.map((e=>({item:e.timeDataItem.item,start:e.start,end:e.end,duration:e.duration})))),a._coupledTimeDataItems&&(r.startsAndEndsOfCoupledItems=a._coupledTimeDataItems.map((e=>{var t=e.phantomDataItem,a={item:e.item,start:t&&!t.startIsNull?t.start:null,end:t&&!t.endIsNull?t.end:null};return t.siblings&&(a.startsAndEndsOfChildItems=t.siblings.map((e=>({item:e.timeDataItem.item,start:e.start,end:e.end,duration:e.duration})))),a})));try{a._options.droppedFunc.call(a,r),n=r.promise,t=r.cancel}catch(e){throw t=!0,e}}}}finally{var d=function(t){a._deleteBarPhantom(i),a._coupledTimeDataItems&&a._coupledTimeDataItems.forEach((function(e){e.phantomDataItem&&a._deleteBarPhantom(e)})),o.setCursor(a._ganttWidget.element(),null);var n=a._interaction&~h.Compound;if(n&h.DragHorOrVerOverride&&(n=u.DragHor|u.DragVer),a._reset(),a._options.resetFunc(),a._options.dragLeaveFunc||a._options.dragEndFunc){var r={sender:i.item,elemType:g.Bar,interaction:n,event:e?.srcEvent||e,canceled:t};a._options.dragLeaveFunc?.call(a,r),a._options.dragEndFunc?.call(a,r)}};n?n.then((function(e){d.call(a,!!e)}),(function(){d.call(a,!0)})):d.call(a,t)}},_setTimeDataItemPropsForAnimation:function(e){var t=e.phantomDataItem;e.oldX=t.newX,e.oldEndX=t.newEndX,e.oldY=r(i.select(t.elem).attr("transform")).translate[1],e.oldRowY=t.oldVisibleRowDataItem.oldY,e.oldRowAtTheTop=this._options.determineBodyAreaIndexFunc(t.oldVisibleRowDataItem)===v.BodyAtTheTop,t.siblings&&t.siblings.forEach((a=>{var n=a.timeDataItem;n.oldX=a.newX,n.oldEndX=a.newEndX,n.oldY=r(i.select(a.elem).attr("transform")).translate[1],n.oldRowY=a.oldVisibleRowDataItem.oldY,e.oldRowAtTheTop=this._options.determineBodyAreaIndexFunc(t.oldVisibleRowDataItem)===v.BodyAtTheTop}))},_reset:function(){var e=this;e._isInitiated=!1,delete e._isActive,delete e._isDropped,delete e._isAutomaticRowExpansionEnabled,delete e._timeDataItem,delete e._elemType,delete e._interaction,delete e._offsetY,delete e._dropAllowed,delete e._dragBarPhantomHammerEvent,delete e._pointerX,delete e._pointerDateTime,delete e._snapTargetsForStart,delete e._snapTargetsForEnd,delete e._snapTargetStartDates,delete e._snapTargetEndDates,delete e._cachedSnapTargetsForRowDataItemIDs,delete e._snapTargetStartWorkingTimeDates,delete e._snapTargetEndWorkingTimeDates,delete e._snapTargetDateLineDates,delete e._snapTargetDateLineGridDates,delete e._dragDistanceInMilliseconds,delete e._coupledTimeDataItems,delete e._smartOverriddenRowDataItem,e._smartTimerID&&window.clearTimeout(e._smartTimerID)},modifyStartEndForCoupledTimeItems:function(e,t,a){var i=this;i._isInitiated&&i._dragDistanceInMilliseconds&&(t&&(t=d.addWorkingTime(e,t,i._dragDistanceInMilliseconds)),a&&(a=d.addWorkingTime(e,a,i._dragDistanceInMilliseconds)))},isRowOfCoupledTimeItems:function(e){var t=this;return t._isInitiated&&t._rowDataItemIDsOfCoupledTimeDataItemsMap&&t._rowDataItemIDsOfCoupledTimeDataItemsMap[e.id]}}),e.exports=E},219:e=>{var t=function(){this._barShapes={}};Object.assign(t.prototype,{registerBarShape:function(e,t){var a=t.prototype;a.createBar&&a.positionBar&&(this._barShapes[e]=new t)},createBar:function(e){var t=this._barShapes[e.barShapeId];t&&t.createBar(e)},positionBar:function(e){var t=this._barShapes[e.barShapeId];t&&t.positionBar(e)},checkBarShapeForBarType:function(e,t){var a=this._barShapes[e];return!a||!a.checkForBarType||a.checkForBarType(t)},getBarOffsets:function(e){var t=this._barShapes[e.barShapeId];if(t&&t.getBarOffsets)return t.getBarOffsets(e)}}),e.exports=t},420:(e,t,a)=>{var i=a(571),n=a(199).TimeType,r={Default:0,WorkingTime:1,NonWorkingTime:2},o=function(){},s=function(t){return this instanceof s==0?new s(t):t instanceof e.exports?(this._defaultTimeType=t._defaultTimeType,this._start=t._start,this._end=t._end,this._timeTypeChangeTimes=new i.nSortedDatesWithValuesList(t._timeTypeChangeTimes),this._actualStart=t._actualStart,this._actualEnd=t._actualEnd,this._actualStartUTC=t._actualStartUTC,this._actualEndUTC=t._actualEndUTC,this._startOfValidTimeSegmentsUTC=t._startOfValidTimeSegmentsUTC,this._endOfValidTimeSegmentsUTC=t._endOfValidTimeSegmentsUTC,this._defaultValidationTimeSpan=t._defaultValidationTimeSpan,this._timeOutOfBoundsExceptionsEnabled=t._timeOutOfBoundsExceptionsEnabled,void(this._actualDefaultTimeType=t._actualDefaultTimeType)):(this._defaultTimeType=t||n.NonWorkingTime,this._start=null,this._end=null,this._timeTypeChangeTimes=null,this._yearCache={},this._monthCache={},this._dayCache={},this._actualStart=new Date(0),this._actualEnd=new Date(2200,0,1),this._actualStartUTC=this._actualStart.getTime(),this._actualEndUTC=this._actualEnd.getTime(),this._startOfValidTimeSegmentsUTC=null,this._endOfValidTimeSegmentsUTC,this._defaultValidationTimeSpan=15552e6,this._timeOutOfBoundsExceptionsEnabled=!1,void(this._actualDefaultTimeType=this._defaultTimeType))};Object.assign(s.prototype,{defaultTimeType:function(){return 0===arguments.length?this._defaultTimeType:this},timeOutOfBoundsExceptionsEnabled:function(){return 0===arguments.length?this._timeOutOfBoundsExceptionsEnabled:(this._timeOutOfBoundsExceptionsEnabled!==arguments[0]&&(this._timeOutOfBoundsExceptionsEnabled=arguments[0]),this)},allocateTimeSpan:function(e,t,a){e&&t&&e<t&&(this._timeTypeChangeTimes||(this._timeTypeChangeTimes=new i.nSortedDatesWithValuesList(this._defaultTimeType),this._start||(this._actualStart=new Date(864e10)),this._end||(this._actualEnd=new Date(-864e10))),this._timeTypeChangeTimes.allocateTimeSpan(e,t,a),this._yearCache={},this._monthCache={},this._dayCache={},this._actualStart>e&&(this._actualStart=e,this._actualStartRTC=e.getTime()),this._actualEnd<t&&(this._actualEnd=t,this._actualEndRTC=t.getTime()))},timeTypeChangeTimes:function(){return this._timeTypeChangeTimes||(this._timeTypeChangeTimes=new i.nSortedDatesWithValuesList(this._defaultTimeType)),this._timeTypeChangeTimes.dates()},timeTypeChangeTimesList:function(){return this._timeTypeChangeTimes},start:function(){if(0===arguments.length)return this._start;if((this._start instanceof Date?this._start.getTime():this._start)!==arguments[0]){var e=arguments[0];(!e||e instanceof Date)&&(this._start=e,e||(e=new Date(0)),this._actualStart=this._start,this._actualStartUTC=this._actualStart.getTime(),this._actualStartUTC>this._actualEndUTC&&(this._actualEnd=this._actualStart,this._actualEndUTC=this._actualStartUTC))}return this},end:function(){if(0===arguments.length)return this._end;if((this._end instanceof Date?this._end.getTime():this._end)!==arguments[0]){var e=arguments[0];(!e||e instanceof Date)&&(this._end=e,e||(e=new Date(2200,0,1)),this._actualEnd=this._end,this._actualEndUTC=this._end.getTime(),this._actualEndUTC<this._actualStartUTC&&(this._actualStart=this._actualEnd,this._actualStartUTC=this._actualEndUTC))}return this},actualStart:function(){return this._actualStart},actualEnd:function(){return this._actualEnd},_validateTimeRange:function(){},_getPreviousOrSameDateTime:function(e){var t=this._timeTypeChangeTimes?this._timeTypeChangeTimes.determinePreviousOrSameDateWithValue(new Date(e)):void 0;return{UTC:t?t.date.getTime():null,TimeType:t?t.value:void 0}},_getPreviousDateTime:function(e){var t=this._timeTypeChangeTimes?this._timeTypeChangeTimes.determinePreviousDateWithValue(new Date(e)):void 0;return{UTC:t?t.date.getTime():null,TimeType:t?t.value:void 0}},_getNextDateTime:function(e){if(e>=this._actualEndUTC)return{UTC:null};var t=this._timeTypeChangeTimes?this._timeTypeChangeTimes.determineNextDateWithValue(new Date(e+1)):void 0;return{UTC:t?t.date.getTime():null,TimeType:t?t.value:void 0}},_checkDateTimeBounds:function(e,t){if(this._timeOutOfBoundsExceptionsEnabled){if(e.getTime()<this._actualStartUTC)throw new RangeError(t,t+" < actualStart");if(e.getTime()>this._actualEndUTC)throw new RangeError(t,t+" > actualEnd")}},_setActualDefaultTimeType:function(e){this._actualDefaultTimeType!==e&&(this._actualDefaultTimeType=e)},_internalActualDefaultTimeType:function(){return this._defaultTimeType},addWorkingTime:function(e,t){this._checkDateTimeBounds(e,"reference");var a=function(e){return 1/e==-1/0},i=a(t),s=e.getTime(),l=this._actualDefaultTimeType;t>0?this._validateTimeRange(s-this._defaultValidationTimeSpan,s+this._defaultValidationTimeSpan):this._validateTimeRange(s-this._defaultValidationTimeSpan,s);for(var c=this._getPreviousOrSameDateTime(s),d=c.UTC,m=c.TimeType;(null===d||d<this._startOfValidTimeSegmentsUTC)&&this._startOfValidTimeSegmentsUTC>this._actualStartUTC;)this._validateTimeRange(this._startOfValidTimeSegmentsUTC-this._defaultValidationTimeSpan,this._startOfValidTimeSegmentsUTC),d=(c=this._getPreviousOrSameDateTime(s)).UTC,m=c.TimeType;if(null===d&&l===n.WorkingTime)s+=t;else if(t>=0&&!i){if(!this._timeOutOfBoundsExceptionsEnabled)if(s<this._actualStartUTC)l===n.NonWorkingTime?s=this._actualStartUTC:this._actualStartUTC-s<=t?(s+=t,t=0):(s=this._actualStartUTC,t-=this._actualStartUTC-s);else if(s>=this._actualEndUTC){if(l===n.NonWorkingTime)throw new o;s+=t,t=0}for(var u=!0;u||t>0;){u=!1;var h=this._getNextDateTime(s),p=h.UTC,_=h.TimeType;if((null===p||p>this._endOfValidTimeSegmentsUTC)&&this._endOfValidTimeSegmentsUTC<this._actualEndUTC)this._validateTimeRange(this._endOfValidTimeSegmentsUTC,this._endOfValidTimeSegmentsUTC+this._defaultValidationTimeSpan);else if(null===p){if(m!==r.WorkingTime&&(m!==r.Default||l!==n.WorkingTime))throw new o;s+=t,t=0}else m===r.WorkingTime||m===r.Default&&l===n.WorkingTime?t<=(D=p-s)?(s+=t,t=0):(s=p,t-=D):s=p,m=_}}else{var g=i?0:t;if(!this._timeOutOfBoundsExceptionsEnabled)if(s<this._actualStartUTC){if(l===n.NonWorkingTime)throw new o;s+=g,t=0}else s>this._actualEndUTC&&(l===n.NonWorkingTime?s=this._actualEndUTC:s-this._actualEndUTC<=-g?(s+=g,t=0):s=this._actualEndUTC);for(;t<0||a(t);){g=a(t)?0:t;var T=this._getPreviousDateTime(s),f=T.UTC;if(m=T.TimeType,(null===f||f<this._startOfValidTimeSegmentsUTC)&&this._startOfValidTimeSegmentsUTC>this._actualStartUTC)this._validateTimeRange(this._startOfValidTimeSegmentsUTC-this._defaultValidationTimeSpan,this._startOfValidTimeSegmentsUTC);else if(null===f){if(!(i||m===r.WorkingTime||m===r.Default&&l===n.WorkingTime))throw new o;s=i?e.getTime():s+g,t=0}else{var D;m===r.WorkingTime||m===r.Default&&l===n.WorkingTime?g>=(D=f-s)?(s+=g,t=0):(s=f,a(t)&&(t=0),t-=D):s=f}}}return new Date(s)},hasWorkingTime:function(e,t){return!!this._doCalculateWorkingTime(e,t,!0)},calculateWorkingTime:function(e,t){return this._doCalculateWorkingTime(e,t,!1)},_doCalculateWorkingTime:function(e,t,a){this._checkDateTimeBounds(e,"end"),this._checkDateTimeBounds(t,"start");var i=t.getTime(),o=e.getTime();this._validateTimeRange(i,o);var s=this._actualDefaultTimeType,l=o<i;if(l){var c=i;i=o,o=c}var d=0,m=!1;if(this._timeOutOfBoundsExceptionsEnabled||(i<this._actualStartUTC&&(o<this._actualStartUTC?(s===n.WorkingTime&&(d=o-i),m=!0):(s===n.WorkingTime&&(d=this._actualStartUTC-i),i=this._actualStartUTC)),o>this._actualEndUTC&&(i>this._actualEndUTC?(s===n.WorkingTime&&(d=o-i),m=!0):(s===n.WorkingTime&&(d+=o-this._actualEndUTC),o=this._actualEndUTC))),!m){for(var u=this._getPreviousOrSameDateTime(i),h=u.UTC,p=u.TimeType;(null===h||h<this._startOfValidTimeSegmentsUTC)&&this._startOfValidTimeSegmentsUTC>this._actualStartUTC;)this._validateTimeRange(this._startOfValidTimeSegmentsUTC-this._defaultValidationTimeSpan,this._startOfValidTimeSegmentsUTC),h=(u=this._getPreviousOrSameDateTime(i)).UTC,p=u.TimeType;if(null===h&&s===n.WorkingTime)return l?i-o:o-i;p===r.Default&&(p=s);var _=i;do{var g=this._getNextDateTime(_),T=g.UTC,f=g.TimeType;(null===T||T>this._endOfValidTimeSegmentsUTC)&&this._endOfValidTimeSegmentsUTC<this._actualEndUTC?this._validateTimeRange(this._endOfValidTimeSegmentsUTC,this._endOfValidTimeSegmentsUTC+this._defaultValidationTimeSpan):(null===T||T>o?(p===r.WorkingTime&&(d+=o-_),T=null):p===r.WorkingTime&&(d+=T-_,f===r.Default&&(f=s)),_=T,p=f)}while(!(null===_||a&&d))}return l?-d:d},determineTimeType:function(e){this._checkDateTimeBounds(e,"reference");var t=e.getTime();if(!this._timeOutOfBoundsExceptionsEnabled&&(t<this._actualStartUTC||t>=this._actualEndUTC))return this._actualDefaultTimeType;this._validateTimeRange(t-1,t+1);var a=this._getPreviousOrSameDateTime(t);return null===a.UTC||a.timeType===r.Default?this._actualDefaultTimeType:a.TimeType},findStartOfNextTimeTypeChange:function(e){this._checkDateTimeBounds(e,"reference");var t=e.getTime();if(!this._timeOutOfBoundsExceptionsEnabled){if(t>this._actualEndUTC)return null;t<this._actualStartUTC&&(t=this._actualStartUTC)}this._validateTimeRange(t,t+this._defaultValidationTimeSpan);for(var a,i=this._actualDefaultTimeType,n=this._getPreviousOrSameDateTime(t),o=n.UTC,s=n.TimeType;(null===o||o<this._startOfValidTimeSegmentsUTC)&&this._startOfValidTimeSegmentsUTC>this._actualStartUTC;)this._validateTimeRange(this._startOfValidTimeSegmentsUTC-this._defaultValidationTimeSpan,this._startOfValidTimeSegmentsUTC),o=(n=this._getPreviousOrSameDateTime(t)).UTC,s=n.TimeType;s===r.Default&&(s=i);do{o=(n=this._getNextDateTime(t)).UTC,a=n.TimeType,(null===o||o>this._endOfValidTimeSegmentsUTC)&&this._endOfValidTimeSegmentsUTC<this._actualEndUTC?(this._validateTimeRange(this._endOfValidTimeSegmentsUTC,this._endOfValidTimeSegmentsUTC+this._defaultValidationTimeSpan),a=s):null!==o&&(a===r.Default&&(a=i),t=o)}while(a===s&&null!==o);return null===o?null:new Date(o)},findStartOfPreviousTimeTypeChange:function(e){this._checkDateTimeBounds(e,"reference");var t=e.getTime();if(!this._timeOutOfBoundsExceptionsEnabled){if(t<=this._actualStartUTC)return null;t>this._actualEndUTC&&(t=this._actualEndUTC)}this._validateTimeRange(t-this._defaultValidationTimeSpan,t);for(var a=this._actualDefaultTimeType,i=this._getPreviousOrSameDateTime(t),n=i.UTC,o=i.TimeType;(null===n||n<this._startOfValidTimeSegmentsUTC)&&this._startOfValidTimeSegmentsUTC>this._actualStartUTC;)this._validateTimeRange(this._startOfValidTimeSegmentsUTC-this._defaultValidationTimeSpan,this._startOfValidTimeSegmentsUTC),n=(i=this._getPreviousOrSameDateTime(t)).UTC,o=i.TimeType;if(o===r.Default&&(o=a),null!==n){var s;t=n;do{n=(i=this._getPreviousDateTime(t)).UTC,s=i.TimeType,(null===n||n>this._endOfValidTimeSegmentsUTC)&&this._endOfValidTimeSegmentsUTC<this._actualEndUTC?(this._validateTimeRange(this._endOfValidTimeSegmentsUTC,this._endOfValidTimeSegmentsUTC+this._defaultValidationTimeSpan),s=o):null!==n&&(s===r.Default&&(s=a),t=n)}while(s===o)}return null===t?null:new Date(t)},findStartOfCurrentTimeTypeInterval:function(e){this._checkDateTimeBounds(e,"reference");var t=e.getTime(),a=!1;if(!this._timeOutOfBoundsExceptionsEnabled){if(t<this._actualStartUTC)return null;t>this._actualEndUTC&&(t=this._actualEndUTC,a=!0)}this._validateTimeRange(t-this._defaultValidationTimeSpan,t);var i=this._actualDefaultTimeType;t++;var n,o,s,l=a?i:r.Default;do{o=(n=this._getPreviousDateTime(t)).UTC,s=n.TimeType,(null===o||o<this._startOfValidTimeSegmentsUTC)&&this._startOfValidTimeSegmentsUTC>this._actualStartUTC?(this._validateTimeRange(this._startOfValidTimeSegmentsUTC-this._defaultValidationTimeSpan,this._startOfValidTimeSegmentsUTC),s=r.Default):null===o?l=s===r.WorkingTime?r.NonWorkingTime:r.WorkingTime:(s===r.Default&&(s=i),l===r.Default&&(l=s),s===l&&(t=o))}while(l===r.Default||s===l);return null===t?null:new Date(t)}}),s.TimeType=n,s.InternalTimeType=r,s.OutOfWorkingTimeException=o,e.exports=s},442:(e,t,a)=>{var i=a(199),n=a(420),r=i.TimeType,o={findNearestWorkingTime:function(e,t,a){var i=new Date(t.getTime());if(null!=e)if(i.getTime()>e.actualEnd().getTime())i.setTime(e.actualEnd().getTime());else if(i.getTime()<e.actualStart().getTime()&&i.setTime(e.actualStart().getTime()),e.determineTimeType(i)===r.NonWorkingTime)if(a){var n=e.findStartOfNextTimeTypeChange(i);null!==n&&(i=n)}else{var o=e.findStartOfCurrentTimeTypeInterval(i);null!==o&&(i=o)}return i},hasWorkingTime:function(e,t,a){return t>a&&(null==e||e.hasWorkingTime(t,a))},calculateWorkingTime:function(e,t,a){if(null!=e){var i=e.timeOutOfBoundsExceptionsEnabled();e.timeOutOfBoundsExceptionsEnabled(!1);var n=null;try{n=e.calculateWorkingTime(t,a)}catch(e){}return e.timeOutOfBoundsExceptionsEnabled(i),n}return t.getTime()-a.getTime()},addWorkingTime:function(e,t,a){if(null!=e){var i=e.timeOutOfBoundsExceptionsEnabled();e.timeOutOfBoundsExceptionsEnabled(!1);var n=null;try{n=e.addWorkingTime(t,a)}catch(e){}return e.timeOutOfBoundsExceptionsEnabled(i),n}return new Date(t.getTime()+a)},createWeekendCalendar:function(e,t,a,i){var o=new n(r.WorkingTime);if(o.start(e),o.end(t),(a%=7)==(i=(i+1)%7))return null;var s,l,c=a<i?i-a:i+7-a,d=7-c,m=(i<a||e.getDay()>a)&&e.getDay()<(i>0?i:7)?-1:1;for(s=e;s.getDay()!=a;)s=new Date(s.getFullYear(),s.getMonth(),s.getDate()+m);for(l=new Date(s.getFullYear(),s.getMonth(),s.getDate()+c),s.getTime()<e.getTime()&&(s=e);s.getTime()<t.getTime();)o.allocateTimeSpan(s,l,r.NonWorkingTime),s=new Date(l.getFullYear(),l.getMonth(),l.getDate()+d),(l=new Date(s.getFullYear(),s.getMonth(),s.getDate()+c)).getTime()>t.getTime()&&(l=t);return o}};e.exports=o},199:(e,t,a)=>{var i=a(280),n=i.WarningCode,r=i.WarningBias,o=i.HorizontalAlignment,s={Start:1,End:2,Duration:4,Summary:8,RespectedByOptimization:16},l={None:0,DragLeftSide:1,DragRightSide:2,DragHor:4,DragVer:8,DragHorOrVer:16,DragSmartHorOrVer:256},c={TimeType:{WorkingTime:1,NonWorkingTime:2},PortDirections:{Up:1,Down:2,Left:3,Right:4},RoutingType:{Curved:1,Orthogonal:2},TimeUnit:{Seconds:"s",Minutes:"m",Hours:"h",Days:"d",Weeks:"w",Months:"M",Quarters:"Q",Years:"y"},NGANTT_BAR_CLASS:"ngantt-bar",NGANTT_BAR_LAYER_CLASS:"ngantt-bar-layer",NGANTT_BAR_OUTLINE_CLASS:"ngantt-outline",NGANTT_BAR_PATH_CAL_CLASS:"ngantt-pcal",NGANTT_BAR_PATH_PATTERN_CLASS:"ngantt-bar-pattern",NGANTT_BAR_RECT_CLASS:"ngantt-bar-rect",NGANTT_BAR_RECT_CAL_CLASS:"ngantt-rcal",NGANTT_BAR_TEXT_CLASS:"ngantt-bar-text",NGANTT_BAR_WIDTH_DEPENDENT_PROP_CLASS:"ngantt-bar-width-dep",NGANTT_CONSTRAINT_SYMBOL_CLASS:"ngantt-constraint-symbol",NGANTT_CONSTRAINT_LINE_CLASS:"ngantt-constraint-line",NGANTT_COMPOUND_BAR_BACKGROUND_CLASS:"ngantt-compound-bar-background",NGANTT_COMPOUND_BAR_FOREGROUND_CLASS:"ngantt-compound-bar-foreground",NGANTT_BAR_PHANTOM_CLASS:"ngantt-bar-phantom",NGANTT_BAR_PHANTOM_NONWORK_CLASS:"ngantt-bar-phantom-nonwork",NGANTT_DATE_LINE_TEXT_CLASS:"ngantt-date-line-text",NGANTT_DRAG_DATE_LINE_TEXT_RECT_CLASS:"ngantt-drag-date-line-text-rect",NGANTT_TIMEAREA_ROW_CONTENTS_CLASS:"ngantt-timearea-row-contents",DateLineGridRecurrence:{Hourly:"h",Daily:"d",Weekly:"w",Monthly:"M",Quarterly:"Q",Yearly:"Y"},ElemType:{Row:1,GroupCell:2,TableCell:3,Link:4,Bar:5,BarRectangle:6,TableCellText:7,TableRow:8,LinkPath:9,LinkTargetMarker:10,DateLine:11,ConstraintDateSymbol:12,ConstraintDateLine:13,DateArea:14,LinkDanglingSourceBar:15,LinkDanglingTargetBar:16,LeavesIndicator:17},ConstraintType:{None:0,StartNoEarlierThan:1,EndNoEarlierThan:2,StartNoLaterThan:3,EndNoLaterThan:4,MustStartOn:5,MustEndOn:6},DisplayedElements:{None:0,Bars:1,Optimized:2,BarsInHiddenDescendantRows:4,CalendarGrid:8,BarsInOwnHiddenLeafRows:16,BarsInLeafRowsInHiddenDescendantRows:32},_BarTypeFlags:s,BarType:{None:0,Single:s.Start,SingleRespectedByOptimization:s.Start|s.RespectedByOptimization,StartEnd:s.Start|s.End,StartDuration:s.Start|s.Duration,EndDuration:s.End|s.Duration,Summary:s.Summary|s.Start|s.End},BarShape:{None:"",Custom:"nCustomBarShape",Rectangle:"nRectangleBarShape",RectangleWithLeftTopBevel:"nRectangleWithLeftTopBevelBarShape",UpwardRamp:"nUpwardRamp",DownwardRamp:"nDownwardRamp",Summary:"nSummaryBarShape",Arrow:"nArrowBarShape",Diamond:"nDiamond",ArrowLeft:"nArrowLeftShape",ArrowRight:"nArrowRightShape"},BarInteractions:l,_AllBarInteractions:l.DragLeftSide|l.DragRightSide|l.DragHor|l.DragVer|l.DragHorOrVer|l.DragSmartHorOrVer,BarSnapTargets:{None:0,Start:1,End:2,DateLines:4,CalendarGrids:8,DateLineGrids:16},LinkType:{EndStart:0,EndEnd:1,StartStart:2,StartEnd:3,SourceDateStart:4,SourceDateEnd:5,EndTargetDate:8,StartTargetDate:10,SourceDateTargetDate:12},LinkMarker:{None:0,FilledArrow:1},TimeAxisZoom:{Stretch:0,Shrink:1},DateLineLabelOrientation:{Horizontal:1,Vertical:2},TableRowDefinitionType:{BaseLevel:1,GroupingLevel:2,FixedColumnsPreceding:4,FixedColumnsSucceeding:8,FromCallback:16,Map:32,LeafDefault:64},HorizontalAlignment:o,TableCellType:{Text:1,Number:2,Date:3,ImageList:4},ProgressBarWidthCalculationMode:{ConsiderWorkingTimesOnly:0,ConsiderWorkingAndNonWorkingTimes:1},PanningMode:{None:0,HorizontallyOnly:1,VerticallyOnly:2,HorAndVer:3,AutoHorOrVer:4},DateLineLabelPosition:{Left:1,Center:2,Right:4,TopLeft:9,TopCenter:10,TopRight:12},_DefaultBarOpacity:.3,BarSortMode:{StartAndEnd:0,RowIndexes:1,RowIndexesOnSameStart:2},TimescaleInteractionModes:{None:0,ScrollingByButtons:1,Rescaling:2,Default:3},WarningBias:4e3,WarningCode:Object.assign({},Object.fromEntries(Object.entries(n).map((e=>[e[0],e[1]-r+4e3]))))};c._BarInteractions={_ExcludeAdditionalFlagsMask:1023&~l.DragSmartHorOrVer,Compound:1024,DragHorOrVerOverride:2048,CurrentlyDraggedHorOnly:4096,CurrentlySmartOverride:8192},c._BarInteractions._AllSupportedFlags=c.BarInteractions.DragLeftSide|c.BarInteractions.DragRightSide|c.BarInteractions.DragHor|c.BarInteractions.DragVer|c.BarInteractions.DragHorOrVer|c._BarInteractions.Compound|c._BarInteractions.DragHorOrVerOverride|c._BarInteractions.CurrentlyDraggedHorOnly,e.exports=c},145:(e,t,a)=>{var i=a(199),n=i.NGANTT_BAR_OUTLINE_CLASS,r=i.NGANTT_BAR_PATH_PATTERN_CLASS,o=i.NGANTT_BAR_RECT_CLASS,s=i.NGANTT_BAR_TEXT_CLASS,l=i.NGANTT_COMPOUND_BAR_BACKGROUND_CLASS,c=i.NGANTT_COMPOUND_BAR_FOREGROUND_CLASS,d=o+" ngantt-diamond-path",m=[o,r].join(" "),u="path."+r,h="."+s+", ."+s+" tspan",p=i.BarType,_=i.DisplayedElements,g=i.ElemType,T=a(853),f=function(){};Object.assign(f.prototype,{createBar:function(e){var t=e.barD3,a={elemType:g.BarRectangle,shape:e.barShapeId},i=t.classed(l),r=i||t.classed(c);e.showProgress&&T.createPredictedEndBar(e);let o=`translate(-6, ${e.barHeight/2-10})`;const s="M0,10 L6,20 L12,10 L6,0 L0,10";if(t.append("path").attr("class",e.enrichClassFunc(d,a)).attr("transform",o).attr("d",s),t.append("path").attr("class",e.enrichClassFunc(n,a)).attr("transform",o).attr("d",s),!r){let i=e.dataItem.item.fillPatternType;null!=i&&t.append("path").attr("class",e.enrichClassFunc(m,a)).attr("mask",`url(#ngantt-pattern-mask${e.uniqueID}-${i})`)}i||T.createConstraintSymbols(e)},positionBar:function(e){var t=e.barD3;if(t){var a=t.classed(l)||t.classed(c),i=e.rowDataItem;i.isHidden||(i.isDetailingRow?i.areLeavesCollapsed&&e.ganttWidget._getCurrentlyDisplayedElementsInRow(i)&(_.BarsInOwnHiddenLeafRows|_.BarsInLeafRowsInHiddenDescendantRows):i.isCollapsed&&e.ganttWidget._getCurrentlyDisplayedElementsInRow(i)&_.BarsInHiddenDescendantRows)?t.selectAll(h).remove():t.selectAll(h).attr("x",8),e.calculateProgressFunc&&(T.positionProgressBar(e),T.positionConstraintSymbols(e),T.positionPredictedEndBar(e)),a||null==e.dataItem.item.fillPatternType||t.select(u).attr("transform",`translate(-6, ${e.barHeight/2-10})`).attr("d","M0,10 L6,20 L12,10 L6,0 L0,10")}},checkForBarType:function(e){return e===p.Single||e===p.SingleRespectedByOptimization}}),e.exports=f},919:(e,t,a)=>{var i=a(199),n=i.NGANTT_BAR_RECT_CLASS,r=i.NGANTT_BAR_RECT_CAL_CLASS,o=i.NGANTT_BAR_PATH_CAL_CLASS,s=i.NGANTT_BAR_OUTLINE_CLASS,l=i.NGANTT_BAR_PATH_PATTERN_CLASS,c=i.BarType,d=i.ElemType,m=i.TimeType,u=a(442),h=a(853),p=function(){};Object.assign(p.prototype,{createBar:function(e){e.respectingCalendar?(e.barD3.append("path").attr("class",e.enrichClassFunc(n+" "+r,{elemType:d.BarRectangle,shape:e.barShapeId})),e.barD3.append("path").attr("class",e.enrichClassFunc(n+" "+o,{elemType:d.BarRectangle,shape:e.barShapeId})),h.separateBarShapeOutlinesEnabled&&(e.barD3.selectAll("path."+n).style("stroke-width",0),e.barD3.append("path").attr("class",e.enrichClassFunc(n+" "+s,{elemType:d.BarRectangle,shape:e.barShapeId})))):e.barD3.append("path").attr("class",e.enrichClassFunc(n+" "+o,{elemType:d.BarRectangle,shape:e.barShapeId})),null!=e.dataItem.item.fillPatternType&&e.barD3.append("path").attr("class",e.enrichClassFunc(n+" "+l,{elemType:d.BarRectangle,shape:e.barShapeId})).attr("mask",`url(#ngantt-pattern-mask${e.uniqueID}-${e.dataItem.item.fillPatternType})`)},positionBar:function(e){if(e.barD3){var t=!e.calendar||e.calendar.determineTimeType(e.timeRange.start)===m.WorkingTime,a=e.convertXToLimitedX;if(e.calendar){for(var i="M0,"+e.barHeight+"V0",n="M0,"+e.barHeight+(t?"V0":""),c=u.calculateWorkingTime(e.calendar,e.timeRange.end,e.timeRange.start),d=e.timeRange.start;null!==(d=e.calendar.findStartOfNextTimeTypeChange(d))&&d.getTime()<e.timeRange.end.getTime();){t=!t;var p=Math.max(a(e.timeAxis.convertDateToX(d))-a(e.timeAxis.convertDateToX(e.timeRange.start))-1,0),_=u.calculateWorkingTime(e.calendar,d,e.timeRange.start)/c*e.barHeight;i=i+"L"+p+","+_,n=n+"L"+p+","+(t?e.barHeight:_)+"V"+(t?_:e.barHeight)}i+="L"+e.width+","+e.barHeight+"H0",e.barD3.select("."+r).attr("d",i),e.barD3.select("."+o).attr("d",n+"L"+e.width+","+e.barHeight+"H0"),h.separateBarShapeOutlinesEnabled&&e.barD3.select("path."+s).attr("d",e.dataItem.item.start?i:"")}else e.barD3.select("."+o).attr("d","M0,0L"+e.width+","+e.barHeight+"V"+e.barHeight+"H0");null!=e.dataItem.item.fillPatternType&&e.barD3.select("path."+l).attr("d",e.dataItem.item.start?i:"")}e.worldViewVisible&&(e.worldViewPathData=[{x:0,y:0},{x:e.worldViewBarWidth,y:e.barHeight},{x:0,y:e.barHeight},{x:0,y:0}])},checkForBarType:function(e){return e===c.StartEnd}}),e.exports=p},207:(e,t,a)=>{var i=a(571),n=i.nClassFactory,r=i.nDOMHelper.eventListenerHelper,o=i.nSynchronizerWidget,s=a(83),l=".ngsynchronizer",c={optionDefaults:Object.assign({},o.prototype.optionDefaults,{horizontalTableScrollOffsetsSynchronized:!1,errorFunc:null}),_ignoreNextTimeAxisChangedEvents:{},_ignoreNextTableScrollOffsetsChangedEvents:{},construct:function(){var e=this;e._tableViewWidthSetOnce=!1,this._super.apply(e,arguments);var t=l+this._uniqueID;e._element.querySelectorAll(`:scope > .${s.WIDGET_CLASS}`).forEach((function(a){var i=window.getComputedStyle(a);if("none"!==i.display&&"hidden"!==i.visibility&&"collapse"!==i.visibility){r.on(a,"nganttwidgettimeaxischanged",t,(function(){try{e._onGanttTimeAxisChanged(this[o.INDEX_DATA_PROPERTY])}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}})).on(a,"nganttwidgettablescrolloffsetchanged",t,(function(){try{e._onGanttTableScrollOffsetChanged(this[o.INDEX_DATA_PROPERTY])}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}})).on(a,"nganttwidgetsplitterchanged",t,(function(){try{e._onGanttSplitterChanged(this[o.INDEX_DATA_PROPERTY])}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}})).on(a,"nganttwidgettablewidthchanged",t,(function(t){try{e._onGanttTableWidthChanged(this[o.INDEX_DATA_PROPERTY],t.detail)}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}}));let i=a._ganttWidget.verticalSplitterWidget().element();r.on(i,"nsplitterwidgetstartdrag",t,(function(){try{e._onGanttSplitterStartDrag(this.closest(".{nSynchronizerWidget.PANE_CLASS}")[o.INDEX_DATA_PROPERTY])}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}})).on(i,"nsplitterwidgetdragged",t,(function(t){try{e._onGanttSplitterDragged(this.closest(`.${o.PANE_CLASS}`)[o.INDEX_DATA_PROPERTY],t.detail.newValue)}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}})).on(i,"nsplitterwidgetenddrag",t,(function(){try{e._onGanttSplitterEndDrag(this.closest(`.${o.PANE_CLASS}`)[o.INDEX_DATA_PROPERTY])}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}}))}})),e.options.noInitialViewWidthSynchronization||e._onGanttTableWidthChanged()},destroy:function(){var e=l+this._uniqueID;this._element.querySelectorAll(`:scope > .${s.WIDGET_CLASS}`).forEach((function(t){r.off(t,e),r.off(t._ganttWidget.verticalSplitterWidget().element(),e)})),this._super()},_onGanttTimeAxisChanged:function(e){var t=this;if(t._ignoreNextTimeAxisChangedEvents[e])t._ignoreNextTimeAxisChangedEvents[e]=!1;else{var a=t._element.querySelector(`:scope > .${o.PANE_CLASS}${e}`)._ganttWidget.timeAxis();t._element.querySelectorAll(`:scope > .${s.WIDGET_CLASS}`).forEach((function(i,n){var r=n!==e?i._ganttWidget.timeAxis():null,o=!!r&&r.synchronizationNeeded(a);t._ignoreNextTimeAxisChangedEvents[n]=o,o&&r.synchronizeWith(a)}))}},_onGanttTableScrollOffsetChanged:function(e){var t=this;if(this.options.horizontalTableScrollOffsetsSynchronized)if(t._ignoreNextTableScrollOffsetsChangedEvents[e])t._ignoreNextTableScrollOffsetsChangedEvents[e]=!1;else{var a=this.querySelector(`:scope > .${o.PANE_CLASS}${e}`)._ganttWidget.horizontalTableViewScrollOffset();this._element.querySelectorAll(`:scope > .${s.WIDGET_CLASS}`).forEach((function(i,n){var r=n!==e?i._ganttWidget:null,o=!!r&&r.horizontalTableViewScrollOffset()!==a;t._ignoreNextTableScrollOffsetsChangedEvents[n]=o,o&&r.scrollTo(a,void 0,void 0)}))}},_onGanttSplitterStartDrag:function(e){this._element.querySelectorAll(`:scope > .${s.WIDGET_CLASS}`).forEach((function(t,a){a!==e&&t._ganttWidget.verticalSplitterWidget().manualStartDrag()}))},_onGanttSplitterDragged:function(e,t){this._element.querySelectorAll(`:scope > .${s.WIDGET_CLASS}`).forEach((function(a,i){i!==e&&a._ganttWidget.verticalSplitterWidget().manualDrag(t)}))},_onGanttSplitterEndDrag:function(e){this._element.querySelectorAll(`:scope > .${s.WIDGET_CLASS}`).forEach((function(t,a){a!==e&&t._ganttWidget.verticalSplitterWidget().manualEndDrag()}))},_onGanttSplitterChanged:function(e){var t=this._element.querySelector(`.${o.PANE_CLASS}${e}`)._ganttWidget.actualTableViewWidth();this._element.querySelectorAll(`:scope > .${s.WIDGET_CLASS}`).forEach((function(a,i){i!==e&&a._ganttWidget.modifyTableViewWidth(t)}))},_onGanttTableWidthChanged:function(e,t){var a,i=1/0;this._element.querySelectorAll(`:scope > .${s.WIDGET_CLASS}`).forEach((function(n,r){if("none"!==document.getComputedStyle(n).display){var o=n._ganttWidget,s=o.actualTableWidth();s&&(i=Math.min(i,s),r===e&&t&&t.inColumnWidthInteraction?a=o.actualTableViewWidth()||0:void 0===e&&(a=Math.max(a||0,o.actualTableViewWidth()||0)))}})),this._tableViewWidthSetOnce||i===1/0||(this._tableViewWidthSetOnce=!0,void 0===a&&(a=i)),this._element.querySelectorAll(`:scope > .${s.WIDGET_CLASS}`).forEach((function(t,n){var r=t._ganttWidget;r.option("tableViewWidthMaximum",i),void 0!==a&&n!==e&&r.modifyTableViewWidth(a)}))}};e.exports=n.extendClass("nGanttSynchronizerWidget",o,c)},83:(e,t,a)=>{var i=a(680),n=a(571),r=n.nD3MigrationHelper.transform,o=n.nClassFactory,s=n.nCoordinateLimiter,l=n.nCursorHelper,c=n.nDateHelper,d=n.nDebugHelper,m=n.nDOMHelper.eventListenerHelper,u=n.nEventDispatcher,h=n.nImageHelper,p=n.nLocale,_=n.nOSDetector,g=n.nOverlayArea,T=n.nRectManager,f=n.nSortedDatesWithValuesList,D=n.nSplitterWidget,v=n.nSVGSymbolBox,y=n.nSVGTextBox,w=n.nTextHelper,S=n.nWorldViewCanvasWidget.CanvasIdentifier,I=a(280),A=I.nTableBaseWidget,b=I.RowInteractions,E=Object.assign({LinkItemsChanged:2,TimeAxisChanged:7},I.nBaseWidget._UpdateCause),R=I.nBaseWidget._VirtualizationUpdateCause,C=I.nBaseWidget._RowItemVirtualizationStatus,x=I.nInternalDefines,B=x.COLLAPSED_SCALE,L=x.VER_LINE_X_PIXEL_OFFSET,O=x.HOR_LINE_Y_PIXEL_OFFSET,M=x.VER_EXTENT_X_PIXEL_OFFSET,V=x.VER_LINE2_X_PIXEL_OFFSET,F=a(199),k=F._AllBarInteractions,N=F._BarTypeFlags,W=F._BarInteractions,P=F.BarInteractions,H=F.BarShape,X=F.BarSnapTargets,U=F.BarSortMode,G=F.BarType,Y=F.ConstraintType,z=F.DateLineGridRecurrence,$=F.DateLineLabelOrientation,Z=F.DisplayedElements,j=F.ElemType,K=F.HorizontalAlignment,q=F.LinkMarker,Q=F.LinkType,J=F.PanningMode,ee=F.ProgressBarWidthCalculationMode,te=F.TableRowDefinitionType,ae=F.TimeAxisZoom,ie=F.TimescaleInteractionModes,ne=F.TimeUnit,re=a(651),oe=re.LayoutRow,se=re.LayoutColumn,le=re.LayoutElements,ce=re.TitleArea,de=a(219),me=a(756),ue=a(420).TimeType,he=a(442),pe=a(473),_e=pe.PortDirections,ge=pe.RoutingType,Te=a(853),fe=a(415),De=a(675),ve=a(717),ye=a(634),we=a(928),Se=a(919),Ie=a(875),Ae=a(867),be=a(145),Ee=a(612),Re=a(643),Ce=[oe.BodyAtTheTop,oe.MainBody],xe="ngantt-background-date-lines",Be=F.NGANTT_BAR_CLASS,Le=F.NGANTT_BAR_LAYER_CLASS,Oe=F.NGANTT_BAR_OUTLINE_CLASS,Me=F.NGANTT_BAR_PHANTOM_CLASS,Ve=F.NGANTT_BAR_PHANTOM_NONWORK_CLASS,Fe=F.NGANTT_BAR_RECT_CLASS,ke="ngantt-bar-selection",Ne=F.NGANTT_BAR_TEXT_CLASS,We=F.NGANTT_BAR_WIDTH_DEPENDENT_PROP_CLASS,Pe="ngantt-body-clippath",He="ngantt-calgrid-base",Xe="ngantt-calgrid",Ue="ngantt-calgrid-weekend",Ge="ngantt-compound-bar",Ye=F.NGANTT_COMPOUND_BAR_BACKGROUND_CLASS,ze=F.NGANTT_COMPOUND_BAR_FOREGROUND_CLASS,$e=F.NGANTT_CONSTRAINT_SYMBOL_CLASS,Ze=F.NGANTT_CONSTRAINT_LINE_CLASS,je="ngantt-cursor-date-line",Ke="ngantt-cursor-row-rect",qe="ngantt-date-area",Qe="ngantt-date-area-text",Je="ngantt-date-line",et="ngantt-date-line-line",tt="ngantt-date-line-text",at="ngantt-date-line-grid",it="_ngantt_time_type",nt="_ngantt_definition",rt="_ngantt_date-line-compatibility-displacement-y",ot="_ngantt_date-line-symbol-box",st="_ngantt_date-line-text-box",lt="ngantt-drag-date-line",ct="ngantt-drag-date-line-text-rect",dt="ngantt-drag-date-line-phantom-rect",mt="ngantt-drag-end-date-line",ut="ngantt-drag-start-date-line",ht="ngantt-foreground-date-lines",pt=[];pt[oe.BodyAtTheTop]="ngantt-top-hlt-body",pt[oe.MainBody]="ngantt-hlt-body";var _t=[];_t[oe.BodyAtTheTop]="ngantt-top-hlt-body-parent",_t[oe.MainBody]="ngantt-hlt-body-parent";var gt="ngantt-hlt-row",Tt="ngantt-invalid-time-area-marking-rect",ft="ngantt-link",Dt="ngantt-link-dangling-bar",vt="ngantt-link-dangling-source-bar",yt="ngantt-link-dangling-target-bar",wt="ngantt-link-hot-region",St="ngantt-link-path",It="ngantt-link-target-marker",At="ngantt-marked-bar",bt=[];bt[oe.BodyAtTheTop]="ngantt-top-phantoms-body",bt[oe.MainBody]="ngantt-phantoms-body";var Et=[];Et[oe.BodyAtTheTop]="ngantt-top-phantoms-body-parent",Et[oe.MainBody]="ngantt-phantoms-body-parent";var Rt="ngantt-row-background-rect",Ct="ngantt-row",xt="ngantt-row-clippath",Bt="ngantt-row-date-area",Lt="ngantt-row-date-line-group",Ot="ngantt-row-date-line",Mt="ngantt-row-height-dep",Vt="ngantt-selected-bar-mask-",Ft="ngantt-selected-link",kt="ngantt-separation-line",Nt=["ngantt-top-timearea-overlay","ngantt-timearea-overlay"],Wt=["ngantt-top-timearea-overlay-scp","ngantt-timearea-overlay-scroll-parent"],Pt="ngantt-timearea-row",Ht="ngantt-timearea-row-contents",Xt="ngantt-timescale-dep-stripes-scp",Ut=["ngantt-timescale-overlay","ngantt-timescale-overlay"],Gt=["ngantt-timescale-overlay-scroll-parent","ngantt-bottom-timescale-overlay-scp"],Yt=".ngantt",zt="ngantt-zsel-bar";const $t=`.${Be},.${Ge}`,Zt=`.${Ht},.${xe} > g,.${ht} > g`;var jt={date:Date,string:String,number:Number},Kt=0,qt=1,Qt=100,Jt=function(e){return"twice"===e||"string"==typeof e&&e.match(/^\d,\d$/)},ea={optionDefaults:Object.assign({},A.prototype.optionDefaults,{tableTreeLinesVisible:!1,tableTreeLevelIndent:14,tableColumnSplitterWidth:1,tableCellContentTopOffset:21,tableRowSeparationLinesVisible:!0,splitterWidth:8,rowItemsDraggable:!1,linkItems:null,dateLineGrids:null,dateLineGridColor:null,dateLineGridDashArray:null,dateLineGridWidth:null,dateLines:null,defaultCalendar:null,defaultBarType:G.StartEnd,defaultBarShape:H.Rectangle,defaultLeafBarShape:H.Rectangle,defaultTimeItemSelectable:!0,defaultLeafTimeItemSelectable:!0,barSortModeForOptimizedDisplayedElements:U.StartAndEnd,leafBarsVisibleOnParentRows:!1,defaultRespectingCalendar:!1,defaultBarInteractions:P.None,defaultLeafBarInteractions:P.None,forcedBarInteractions:void 0,forcedLeafBarInteractions:void 0,defaultBarSnapTargetsForStart:X.None,defaultBarSnapTargetsForEnd:X.None,alwaysDragCompoundBar:!1,tableViewWidthMaximum:1/0,timeItemsEditableInCollapsedRows:!1,timeItemsHaveSameReferenceAsRowItems:!1,timescaleSmartNavigationEnabled:!0,timescaleSmartNavigationVersion:1,timescaleInteractionsEnabled:!0,timescaleInteractionMode:ie.Default,timescaleSingleRibbonMode:!1,collapseCalendar:null,timeResolutionUnit:ne.Seconds,timeResolutionUnitsPerStep:1,horizontalDraggingUnit:void 0,horizontalDraggingUnitsPerStep:void 0,linksVisible:!0,linkMarkersVisible:!0,linksWithDanglingBarsVisible:!1,linkRoutingType:ge.Curved,defaultLinkType:Q.EndStart,linkItemsSelectable:!1,defaultLinkItemSelectable:!0,defaultLinkTargetMarker:q.FilledArrow,verticalLinkDistance:4,rowMargin:10,subRowDistance:5,defaultMaximumSubRowHeight:null,constraintSymbolHeight:8,constraintSymbolsInMargin:!1,barHeight:22,defaultLeafBarHeight:22,barCornerWidth:5,progressBarHeight:4,progressBarWidthCalculationMode:ee.ConsiderWorkingTimesOnly,predictedEndBarHeight:4,barDragAreaExtent:10,maximumSnapDistance:8,barTopOffsetAndHeightScaleFactor:1,leafBarTopOffsetAndHeightScaleFactor:1,dragDateLinesVisible:!0,horizontalMousePositionHighlightingEnabled:!1,verticalMousePositionHighlightingEnabled:!1,contextMenuEventOnRowItemInTimeArea:!1,tapEventOnRowItemInTimeArea:!1,timeItemsSelectable:!1,timeItemsSelectableByRectangle:!1,canSelectTimeItemFuncResultsCacheable:!1,barSelectionWithFrames:!0,barSelectionFramesShownWithHigherZOrder:!1,detailedConstraintSymbolsEnabled:!1,constraintViolationsVisible:!1,automaticDraggingOfSelectedTimeItems:!1,defaultRowCollapsedDisplayedElementsByExternalTypeMap:null,defaultRowExpandedDisplayedElementsByExternalTypeMap:null,timeAreaRowFillFunc:null,timeAreaRowUpdateFunc:null,createBarFunc:null,positionBarFunc:null,positionLinkFunc:null,canSelectTimeItemFunc:null,selectTimeItemFunc:null,canSelectLinkItemFunc:null,selectLinkItemFunc:null,checkVisualZoomFactorFunc:null,timeAreaViewParametersChangedFunc:null,checkSnapSourceDateFunc:null,formatDateFunc:null,asynchronousInteractiveTimeAreaStretching:!1,detachingOfDOMOnUpdateEnabled:!1,minimumLinearCoordinateExtent:void 0,maximumLinearCoordinateExtent:void 0,linearCoordinateReserve:void 0,barVisibilityCheckEnabled:!0,scrollToViewOffsetPercentage:10,timeAreaRowSeparationLinesVisible:!0,calendarGridVisible:!0,calendarGridWeekendVisible:!1,alternatingTimeStripesVisible:!1,timescaleRibbonDateLinesVisible:!1,timescaleRibbonsWideningFactor:1,differentiationBetweenEmptyArrayAndUndefined:!1,separateBarShapeOutlinesEnabled:!1,automaticCalculationOfSubRowIndexesOfBarsInRow:!0,rescalingByMouseWheelEnabled:!0,zoomingByPinchInTimeAreaEnabled:!1,minimumVisualZoomFactorOnInteraction:.5,maximumVisualZoomFactorOnInteraction:1.5,ignoreCalendarOnBarInteractions:!1,relativeDateModeEnabled:!1,timeAreaPanningMode:J.HorAndVer,selectedItemsShownHighlighted:!1,locale:null,timeZone:null,formattingByMoment:!1,watermarkOpacity:.2,dateLineCaptionOptimizedPositioningEnabled:!1,summariesEnabled:!1}),construct:function(){var e=this;e._super.apply(e,arguments),this._debugSymbolOptimization=!1,this._timeDataItemsMap=new Map,this._unusedTimeDataItemsMap=new Map,this._linkDataItemsMap=new Map,this._unusedLinkDataItemsMap=new Map,this._invalidRowDataItemIDsForSubRowIndexesMap={},this._localeListenerFunc=function(){e._localeChanged()},this.options.locale instanceof p&&this.options.locale.addListener(this._localeListenerFunc),this._nextBindingItemID=1,this._boundTargetInfosMap={},this._selectedLinkDataItemsMap=new Map,this._rowDateLineElemsByRowDataItemIds={},this._rectManager=new T,this._barFactory=new de,this._barFactory.registerBarShape(H.Rectangle,ve),this._barFactory.registerBarShape(H.RectangleWithLeftTopBevel,ye),this._barFactory.registerBarShape(H.UpwardRamp,we),this._barFactory.registerBarShape(H.DownwardRamp,Se),this._barFactory.registerBarShape(H.Summary,Ie),this._barFactory.registerBarShape(H.Arrow,Ae),this._barFactory.registerBarShape(H.Diamond,be),this._barFactory.registerBarShape(H.ArrowLeft,Ee),this._barFactory.registerBarShape(H.ArrowRight,Re),Te.separateBarShapeOutlinesEnabled=this.options.separateBarShapeOutlinesEnabled,this._pointerEnterCursorElems=[],this._pointerEnterCursorClassNames=[],this._timeAreaTransitionDuration=500,this._phantomTransitionDuration=500,this._phantomFrameDistance=3,this._phantomFrameRounding=3,this._barFrameDistance=3,this._barFrameRounding=3,this._automaticTimeExpansionParams=void 0,this._currentTimeAreaWidth=void 0,this._currentTimeAreaViewScrollOffset=void 0,this._currentActualBaseTimeUnitWidth=void 0,this._currentStart=void 0,this._currentEnd=void 0,this._selectedTimeDataItemsMap=new Map,this._nextCalendarCacheID=0,this._calendarGridDataCache={},this._currentCursorDateLineVisible=this.options.horizontalMousePositionHighlightingEnabled;var t=e.options.timeResolutionUnit||ne.Seconds;this._timeAxis=new fe,this._timeAxis.baseTimeUnit(t),this._timeAxis.baseTimeUnitWidth(40/fe.timeUnitToSeconds(ne.Days)*fe.timeUnitToSeconds(t)),this.options.updateSuspended&&this._timeAxis.cacheEvents(),this._timeAxis.anythingChangedCallback((function(t){return e._onTimeAxisAnythingChanged(t)})),this._barDragging=new me(this,{visualZoomFactor:e.options.visualZoomFactor,timeAxis:e._timeAxis,dateLines:e.options.dateLines,dateLineGrids:e.options.dateLineGrids,defaultCalendar:e.options.defaultCalendar,maximumSnapDistance:e.options.maximumSnapDistance,defaultBarSnapTargetsForStart:e.options.defaultBarSnapTargetsForStart,defaultBarSnapTargetsForEnd:e.options.defaultBarSnapTargetsForEnd,checkSnapSourceDateFunc:function(t){return e.options.checkSnapSourceDateFunc?.(e._extendCallbackArgs(t))},dragStartFunc:e._triggerBarDragStartCallback.bind(e),dragEnterFunc:function(t){return e.options.dragEnterFunc?.(e._extendCallbackArgs(t))},draggedFunc:function(t){return e.options.draggedFunc?.(e._extendCallbackArgs(t))},dragLeaveFunc:function(t){return e.options.dragLeaveFunc?.(e._extendCallbackArgs(t))},dragEndFunc:function(t){return e.options.dragEndFunc?.(e._extendCallbackArgs(t))},droppedFunc:function(t){return e.options.droppedFunc?.(e._extendCallbackArgs(t))},onEventFunc:function(t){return e._triggerEvent(t)},phantomFrameDistance:e._phantomFrameDistance,phantomFrameRounding:e._phantomFrameRounding,phantomTransitionDuration:e._phantomTransitionDuration,getRowDataItemFunc:function(t){return e._getDataItem.call(e,t,e._rowDataItemsMap)},getTimeDataItemFunc:function(t){return e._getDataItem.call(e,t,e._timeDataItemsMap)},sortBarsInRowFunc:e._sortBarsInRow.bind(e),registerBindingsForTimeItemsFunc:e._registerBindingsForTimeItems.bind(e),isBindingActiveFunc:e._isBindingActive.bind(e),getBindingPropertyInfosAndValueFunc:e._getBindingPropertyInfosAndValue.bind(e),unregisterAllItemsFunc:e._unregisterAllItems.bind(e),checkForAutomaticRowExpansionFunc:e._checkForAutomaticRowExpansion.bind(e),checkForAutoscrollFunc:function(t,a,i,n){return e._checkForAutoscroll(t.center.x,t.center.y,i,n,(function(){"press"!==t.type&&e._onBarDragMove(t,void 0,!0)}))},stopAutoscrollFunc:function(){return e._stopAutomaticRowExpansionTimer(),e._stopAutoscroll.apply(e,arguments)},pointToSVGRelativeFunc:e._pointToSVGRelative.bind(e),getBodyViewScrollTopFunc:t=>e._layoutRows[e._determineBodyAreaIndex(t)].scrollStart(),determineSuperTimeDataItemFunc:e._determineSuperTimeDataItem.bind(e),determineTimeDataItemsFunc:e._determineTimeDataItems.bind(e),determineDescendantTimeDataItemsFunc:e._determineDescendantTimeDataItems.bind(e),determineTimeRangeFunc:e._determineTimeRange.bind(e),determineTimeDataItemExtentFunc:e._determineTimeDataItemExtent.bind(e),determineCalendarForRowDataItemFunc:e._determineCalendarForRowDataItem.bind(e),determineBarInteractionFunc:e._determineBarInteraction.bind(e),getActualBarInteractionsFunc:e._getActualBarInteractions.bind(e),setBarInteractionCursorFunc:function(t){return e.setVisibilityForRowCovers(t&(P.DragVer|P.DragHorOrVer|W.DragHorOrVerOverride|W.CurrentlySmartOverride)?null:"hidden"),e._setBarInteractionCursor.apply(e,arguments)},getActualBarTypeFunc:e._getActualBarType.bind(e),getCurrentlyDisplayedElementsInRowFunc:e._getCurrentlyDisplayedElementsInRow.bind(e),determineBodyAreaIndexFunc:e._determineBodyAreaIndex.bind(e),getOrCreateSpecialRowElemFunc:e._getOrCreateSpecialRowElem.bind(e),removeSpecialRowElemFunc:e._removeSpecialRowElem.bind(e),createBarFunc:e._createBar.bind(e),positionBarFullyFunc:e._positionBarFully.bind(e),handleOffsetsOnStartAndEndFunc:e._handleOffsetsOnStartAndEnd.bind(e),positionDragDateLinesFunc:function(t,a){if(e.option("dragDateLinesVisible")){e._currentCursorDateLineVisible=!1,e._positionVerticalDragArea(t.start,t.end),e._verticalDragAreaD3.style("visibility",null),e._positionHorizontalDragArea(t.rowDataItem),e._horizontalDragAreaD3.style("visibility",null),e._dragDateLineTextBaseY=t.rowDataItem.visibleRowDataItem.newY;let n=e._determineBodyAreaIndex(t.rowDataItem);var i=e._dragDateLineTextBaseY+t.newY-e._layoutRows[n].scrollStart()+(n===oe.BodyAtTheTop?0:e._layoutRows[oe.BodyAtTheTop].innerViewExtent()+e._actualBodyAreaSeparatorHeight());e._positionDateLine(e._dragStartDateLineD3,t.start,{y:i-8,text:e._formatDate(t.start)}),e._dragStartDateLineD3.selectAll("."+tt+", ."+ct).attr("visibility","hidden"),e._dragStartDateLineD3.style("visibility",null),t.start!==t.end&&(e._positionDateLine(e._dragEndDateLineD3,t.end,{y:i+16+a.bottom-a.top,text:e._formatDate(t.end)}),e._dragEndDateLineD3.selectAll("."+tt+", ."+ct).attr("visibility","hidden"),e._dragEndDateLineD3.style("visibility",null))}},setDragDateLinesTextVisibilityFunc:function(t){e._dragStartDateLineD3.selectAll("."+tt+",."+ct).attr("visibility",t),e._dragEndDateLineD3.selectAll("."+tt+",."+ct).attr("visibility",t)},positionDragAreasAndDateLinesFunc:function(t,a,i,n,r){e._positionVerticalDragArea(t.start,t.end),e._positionHorizontalDragArea(t.rowDataItem);var o=t.timeDataItem,s=e._dragDateLineTextBaseY-e._layoutRows[e._determineBodyAreaIndex(o.rowDataItem)].scrollStart()+(e._determineBodyAreaIndex(o.rowDataItem)===oe.BodyAtTheTop?0:e._layoutRows[oe.BodyAtTheTop].innerViewExtent()+e._actualBodyAreaSeparatorHeight())+n.top+r.offsetY+a.top-r.minimumY+i-o.newY;e._positionDateLine(e._dragStartDateLineD3,t.start,{y:s-8,text:e._formatDate(t.start)}),e._positionDateLine(e._dragEndDateLineD3,t.end,{y:s+16+a.bottom-a.top,text:e._formatDate(t.end)})},callFunctionForAllDatesInDateLineGridFunc:e._callFunctionForAllDatesInDateLineGrid.bind(e),findRoundedTargetDateTimeFunc:e._findRoundedTargetDateTime.bind(e),findRowDataItemAtYFunc:e._findRowDataItemAtY.bind(e),resetFunc:function(){e._touchScrollingEnabled=!0,e._setBarInteractionCursor(P.None),e.setVisibilityForRowCovers("hidden"),e._lastBarInteractionValues&&(e._lastBarInteractionValues.outOfBar=!0),e._verticalDragAreaD3.style("visibility","hidden"),e._dragStartDateLineD3.style("visibility","hidden"),e._dragEndDateLineD3.style("visibility","hidden"),e._horizontalDragAreaD3.style("visibility","hidden"),e._currentCursorDateLineVisible=e.options.horizontalMousePositionHighlightingEnabled}}),this.options.isForExport||(this._createVerticalDragArea(),this._createHorizontalDragArea(),this._dragStartDateLineD3=this._createDateLine(e._foregroundDateLinesD3,{className:lt+" "+ut,label:"start"}),this._dragStartDateLineD3.style("visibility","hidden"),this._dragEndDateLineD3=this._createDateLine(e._foregroundDateLinesD3,{className:lt+" "+mt,label:"end"}),this._dragEndDateLineD3.style("visibility","hidden"),this._cursorDateLineD3=this._createDateLine(e._foregroundDateLinesD3,{className:je,label:"cursor date",phantom:"phantom"}),this._cursorDateLineD3.style("visibility","hidden"),this._cursorRowD3=this._createCursorRow(),this._cursorRowD3.style("visibility","hidden"),this._createXCoordinateLimiter()),this._timescaleWidgets=[];for(var a=0;a<=1;a++)if(this._titleVisible(a)&&this._timescaleD3s[a]){var n=void 0;if(this._overlayAreas){var r=a+2;n=this._overlayAreas[se.TimeArea][r].getContentOverlays()[0],m.on(n,"contextmenu"+e._EVENT_NAMESPACE,(function(t){e.options.preventDefaultOnContextMenuEvents&&(t.stopPropagation(),t.preventDefault())}))}this._timescaleWidgets[a]=new De(this._timescaleD3s[a].node(),{timescaleElementForInput:n,height:e._actualTitleHeight(a),reversedRibbonOrder:a===ce.bottom,locale:e.options.locale,timeZone:e.options.timeZone,formattingByMoment:e.options.formattingByMoment,timeAxis:e._timeAxis,asynchronousInteractiveStretching:e.options.asynchronousInteractiveTimeAreaStretching,ribbonsWideningFactor:e.options.timescaleRibbonsWideningFactor,smartNavigationVersion:e.options.timescaleSmartNavigationVersion,singleRibbonMode:e.options.timescaleSingleRibbonMode,rescalingByMouseWheelEnabled:e.options.rescalingByMouseWheelEnabled,smartNavigationEnabled:!e.options.isForExport&&e.options.timescaleSmartNavigationEnabled,relativeDateModeEnabled:e.options.relativeDateModeEnabled,errorFunc:e._handleException.bind(e),invalidTimeAreaMarkingChangedFunc:e._setInvalidTimeAreaMarking.bind(e),contextMenuFunc:e._onTimescaleContextMenu.bind(e)})}if(this._linkRouter=new pe({routingType:this.options.linkRoutingType,timeAxis:this._timeAxis,xCoordinateLimiter:this._xCoordinateLimiter}),Array.isArray(this.options.dateLineGrids)&&this.options.dateLineGrids.forEach((function(t){e._dateLineGridsD3.append("g").attr("class",at+" "+t.className).property(it,t.timeType)})),!this.options.isForExport){this._svgSplitterRootD3=this._svgRootD3.insert("g",`.${this.NXXXXX.PHANTOMS_BODY_SCROLL_PARENT_CLASS}`).attr("class","ngantt-svg-splitter-root");var o=this._PE_ActualTableViewWidth();this._verticalSplitterWidget=new D(this._svgSplitterRootD3.node(),{classes:"ngantt-ver-splitter",divElemForCursor:e._element,visualZoomFactor:e.options.visualZoomFactor,min:0,max:this.options.splitterEnabled?e.options.tableViewWidthMaximum||o:0,position:{x:o,y:0},width:this._actualSplitterWidth(),orientation:D.Orientation.Vertical,useOwnEventDispatcher:!1,startDrag:function(){e._tableViewWidthAtStartDrag=e._layoutColumns[se.Table].innerViewExtent(),e._tableScrollStartAtStartDrag=e._layoutColumns[se.Table].scrollStart()},changed:function(t,a){e._onSplitterChanged(a.newValue,!0)},dragged:function(t,a){e.options.virtualized&&e._onSplitterChanged(a.newValue)},endDrag:function(t,a){a.canceled&&e._onSplitterChanged(e._tableViewWidthAtStartDrag)}})}let s=this._actualScrollBarWidth();s&&(this._additionalVerticalSplitterDivD3=i.select(this._element).append("div").attr("class","ngantt-ver-splitter-bottom-rect").style("left",o*this.options.visualZoomFactor+"px").style("top",(this._actualScaledMainHeight()-s)*this.options.visualZoomFactor+"px").style("width",this._actualSplitterWidth()*this.options.visualZoomFactor+"px").style("height",s*this.options.visualZoomFactor+"px")),this.options.collapseCalendar&&this._collapseCalendarChanged(),this._dateLineIDsToSVGElementsMap={},this.options.dateLines&&this._dateLinesChanged(),this.options.locale instanceof p||m.on(window,"netronic_nLocales_localeChanged"+this._EVENT_NAMESPACE,(function(){e._localeChanged()})),this.options.timeZone||m.on(window,"netronic_nDateHelper_timeZoneChanged"+this._EVENT_NAMESPACE,(function(){e._localeChanged()})),this._tableDefinitionChanged()},destroy:function(){try{if(this._barDragging.destroy(),delete this._barDragging,null!=this._barPointerEnterTimeoutID&&window.clearTimeout(this._barPointerEnterTimeoutID),m.off(window,this._EVENT_NAMESPACE+"-rectselect"),this._pointerEnterTimeDataItemsMap)for(let e of this._pointerEnterTimeDataItemsMap.keys())if(e.startsWith("da"))m.off(this._pointerEnterTimeDataItemsMap.get(e),this._EVENT_NAMESPACE+"-tooltip-"+e);else{let t=this._pointerEnterTimeDataItemsMap.get(e);for(let e of t.values())m.off(e.elem,this._EVENT_NAMESPACE+"-tooltip-"+e.id)}m.off(window,this._EVENT_NAMESPACE+"-cursor"),this._dateLineIDsToSVGElementsMap=null,this.options.locale instanceof p&&this.options.locale.removeListener(this._localeListenerFunc),this._timeAreaViewParametersChangedTimerID&&window.clearTimeout(this._timeAreaViewParametersChangedTimerID),delete this._barFactory,delete this._linkRouter,delete this._timeAxis,this._super()}catch(e){this._handleException(e,"destroy")}},_setOption:function(t,a){try{var n=this,r=n.options[t];switch(t){case"tableTreeLinesVisible":this._super(t,a),this._super("treeLinesVisible",a);break;case"treeLinesVisible":this._super("tableTreeLinesVisible",a),this._super(t,a);break;case"tableTreeLevelIndent":this._super(t,a),this._super("treeLevelIndent",a);break;case"treeLevelIndent":this._super("tableTreeLevelIndent",a),this._super(t,a);break;case"tableColumnSplitterWidth":this._super(t,a),this._super("columnSplitterWidth",a);break;case"columnSplitterWidth":this._super("tableColumnSplitterWidth",a),this._super(t,a);break;case"tableCellContentTopOffset":this._super(t,a),this._super("cellContentTopOffset",a);break;case"cellContentTopOffset":this._super("tableCellContentTopOffset",a),this._super(t,a);break;case"tableRowSeparationLinesVisible":this._super(t,a),this._super("rowSeparationLinesVisible",a);break;case"rowSeparationLinesVisible":this._super("tableRowSeparationLinesVisible",a),this._super(t,a);break;case"locale":r!==a&&(this.options.locale instanceof p&&this.options.locale.removeListener(this._localeListenerFunc),this._super(t,a),this.options.locale instanceof p&&this.options.locale.addListener(this._localeListenerFunc),this._localeChanged(),this._timescaleWidgets.forEach((function(e){e.option(t,a)})));break;case"timeZone":r!==a&&(this._super(t,a),this._localeChanged(),this._timescaleWidgets.forEach((function(e){e.option(t,a)})));break;case"formattingByMoment":r!==a&&(this._super(t,a),this._timescaleWidgets.forEach((function(e){e.option(t,a)})));break;case"linkItems":case"linksWithDanglingBarsVisible":this._super(t,a),null!=this.options.rowItemsRoot&&(this._linkItemsChanged(),this._bodyChanged(E.LinkItemsChanged));break;case"linksVisible":r!==a&&(this._super(t,a),null!=this.options.rowItemsRoot&&this._bodyChanged(E.LinkItemsChanged));break;case"linkRoutingType":r!==a&&(this._super(t,a),this._linkRouter=new pe({routingType:this.options.linkRoutingType,timeAxis:this._timeAxis,xCoordinateLimiter:this._xCoordinateLimiter}));case"linkMarkersVisible":case"defaultLinkTargetMarker":case"defaultLinkType":r!==a&&(this._super(t,a),null!=this.options.rowItemsRoot&&this.options.linksVisible&&(this._linkHotRegionsD3.selectAll("."+wt).remove(),this._linksD3.selectAll("."+ft).remove(),this._selectedLinksD3.selectAll("."+Ft).remove(),this._bodyChanged(E.LinkItemsChanged)));break;case"splitterWidth":r!==(a=!isNaN(+a)&&a>=0?a:e.exports.prototype.optionDefaults[t])&&(this._layoutColumns[se.Splitter].extent(this.options.isForExport?a:0),this._layoutColumns[se.Splitter].innerViewExtent(a),this._layoutColumns[se.Splitter].outerViewExtent(a),this._verticalSplitterWidget?.option("width",a),this._additionalVerticalSplitterDivD3?.style("width",a*this.options.visualZoomFactor+"px"),this._super(t,a));break;case"timescaleInteractionsEnabled":r!==a&&(this._super(t,a),this._super("timescaleSmartNavigationEnabled",a),this._timescaleWidgets.forEach((function(e){e.option("smartNavigationEnabled",a)})),this._super("rescalingByMouseWheelEnabled",a),this._timescaleWidgets.forEach((function(e){e.option("rescalingByMouseWheelEnabled",a)})));break;case"timescaleInteractionMode":r!==a&&(this._super(t,a),this._timescaleWidgets.forEach((function(e){e.option("rescalingEnabled",a&ie.Rescaling),e.option("scrollingByButtonsEnabled",a&ie.ScrollingByButtons)})));break;case"timescaleSmartNavigationEnabled":r!==a&&(this._super(t,a),this._timescaleWidgets.forEach((function(e){e.option("smartNavigationEnabled",a)})));break;case"timescaleSmartNavigationVersion":r!==a&&(this._super(t,a),this._timescaleWidgets.forEach((function(e){e.option("smartNavigationVersion",a)})));break;case"timescaleSingleRibbonMode":r!==a&&(this._super(t,a),this._timescaleWidgets.forEach((function(e){e.option("singleRibbonMode",a)})));break;case"rescalingEnabled":case"rescalingByMouseWheelEnabled":case"relativeDateModeEnabled":case"scrollingEnabled":r!==a&&(this._super(t,a),this._timescaleWidgets.forEach((function(e){e.option(t,a)})));break;case"timescaleRibbonsWideningFactor":r!==a&&a>=1&&(this._super(t,a),this._timescaleWidgets.forEach((function(e){e.option("ribbonsWideningFactor",a)})));break;case"collapseCalendar":r!==a&&(this._super(t,a),this._collapseCalendarChanged());break;case"dateLines":this._super(t,a),this._barDragging.setOption(t,a),this._dateLinesChanged();break;case"dateLineGrids":this._super(t,a),this._barDragging.setOption(t,a),this._dateLineGridsD3.selectAll("."+at).remove(),Array.isArray(a)&&a.forEach((function(e){n._dateLineGridsD3.append("g").attr("class",at+" "+e.className).property(it,e.timeType)})),this._updateDateLineGrids();break;case"dateLineGridColor":case"dateLineGridDashArray":case"dateLineGridWidth":this._super(t,a),this._updateDateLineGrids(),this._updateTimescaleDependentStripesOrDateLines();break;case"defaultCalendar":case"maximumSnapDistance":case"defaultBarSnapTargetsForStart":case"defaultBarSnapTargetsForEnd":this._barDragging.setOption(t,a);break;case"horizontalMousePositionHighlightingEnabled":r!==a&&(this._super(t,a),this._currentCursorDateLineVisible=a);break;case"dateAreas":this._super(t,a),this._dateAreasChanged();break;case"timeItemsSelectable":r!==a&&(a||n.selectedTimeItems([]),n._super(t,a));break;case"timeItemsSelectableByRectangle":r!==a&&(n._super(t,a),n._registerBackgroundPanningEvents());break;case"timeAreaRowSeparationLinesVisible":r!==a&&(n._super(t,a),null!=this.options.rowItemsRoot&&n._backgroundBodyD3s.forEach((function(e){e.selectAll("."+Pt+" ."+kt).style("visibility",a?null:"hidden")})));break;case"editable":r!==a&&(n._super(t,a),n._dateLinesChanged());break;case"defaultBarShape":case"defaultLeafBarShape":case"progressBarWidthCalculationMode":case"barSortModeForOptimizedDisplayedElements":case"leafBarsVisibleOnParentRows":r!==a&&(n._super(t,+a||0),null!=this.options.rowItemsRoot&&(n.invalidateAllRows(),n.update()));break;case"defaultRowExpandedDisplayedElementsByExternalTypeMap":case"defaultRowCollapsedDisplayedElementsByExternalTypeMap":n._super(t,a),null!=this.options.rowItemsRoot&&(n.invalidateAllRows(),n.update());break;case"barHeight":case"defaultLeafBarHeight":case"subRowDistance":case"defaultMaximumSubRowHeight":case"barTopOffsetAndHeightScaleFactor":case"leafBarTopOffsetAndHeightScaleFactor":case"progressBarHeight":r!==(a=!isNaN(+a)&&a>0?a:e.exports.prototype.optionDefaults[t])&&(n._super(t,a),null!=this.options.rowItemsRoot&&(n.invalidateAllRows(!1,!0),"progressBarHeight"!==t&&n._actualBodyAreaSeparatorHeight()&&(n.options.updateSuspended?n._doResizeNeededWhileUpdateSuspended=!0:n._doResize(E.Other,null,!0)),n.update()));break;case"calendarGridVisible":r!==a&&(n._super(t,a),a?null!=this.options.rowItemsRoot&&(n._foregroundBodyD3s.forEach((function(e){e.selectAll("."+Ct).each((function(e){var a=i.select(this).select("."+Ht);n._createCalendarGridInRow(e,a,t)}))})),n.invalidateAllRows(),n.update()):n._backgroundBodyD3s.forEach((function(e){e.selectAll("."+Xe).remove()})));break;case"calendarGridWeekendVisible":r!==a&&(n._super(t,a),a?null!=this.options.rowItemsRoot&&(n._foregroundBodyD3s.forEach((function(e){e.selectAll("."+Ct).each((function(e){var a=i.select(this).select("."+Ht);n._createCalendarGridInRow(e,a,t)}))})),n.invalidateAllRows(),n.update()):n._backgroundBodyD3s.forEach((function(e){e.selectAll("."+Ue).remove()})));break;case"asynchronousInteractiveTimeAreaStretching":r!==a&&(n._super(t,a),this._timescaleWidgets.forEach((function(e){e.option("asynchronousInteractiveStretching",a)})));break;case"tableViewWidthMaximum":r!==(a=!isNaN(+a)&&a>=0?a:e.exports.prototype.optionDefaults[t])&&(n._super(t,a),n._tableViewChanged());break;case"timeResolutionUnit":r!==a&&(n._super(t,a),n._timeAxis.baseTimeUnit(a||ne.Seconds),n._timescaleWidgets.forEach((function(e){e.option("baseTimeUnit",a||ne.Seconds)})));break;case"timeResolutionUnitsPerStep":r!==a&&(n._super(t,a),n._timescaleWidgets.forEach((function(e){e.option("baseTimeUnitFactor",a||1)})));break;case"alternatingTimeStripesVisible":case"timescaleRibbonDateLinesVisible":r!==(a=!!a)&&(n._super(t,a),n._updateTimescaleDependentStripesOrDateLines());break;case"separateBarShapeOutlinesEnabled":r!==(a=!!a)&&(n._super(t,a),Te.separateBarShapeOutlinesEnabled=a);break;case"zoomingByPinchInTimeAreaEnabled":r!==(a=!!a)&&(n._super(t,a),n._backgroundBodyRectD3s.slice().concat(n._backgroundBodyD3s).forEach((function(e){e.classed(u.PINCH_EVENT_CLASS_NAME,a)})));break;case"automaticCalculationOfSubRowIndexesOfBarsInRow":r!==a&&(null!=this.options.rowItemsRoot&&a&&n.calculateInvalidSubRowIndexesOfBarsInRows(),n._super(t,a));break;case"updateSuspended":{let e=!!n._cachedBodyChangedArguments;n._super(t,a),r!==a&&(a?n._timeAxis.cacheEvents():(n._timeAxis.triggerCachedEvents(),n._timeAreaViewUpdateNeeded&&(delete n._timeAreaViewUpdateNeeded,n._timeAreaViewChanged(!0,!n._calculateSubRowIndexesOfBarsSuspended&&e)),delete n._calculateSubRowIndexesOfBarsSuspended));break}case"forcedBarInteractions":case"forcedLeafBarInteractions":n._super(t,a),n._pointerEnterCursorClassNames.some(((e,t)=>{if(e===Be)return n._onpointermove_cursor(n._lastPointerMoveEvent,n._pointerEnterCursorElems[t],e),!0}));break;case"watermarkURL":n._super(t,a),n._updateWatermarks();break;case"watermarkOpacity":n._super(t,a),n._backgroundWatermarkParentD3.style("opacity",a);break;case"dateLineCaptionOptimizedPositioningEnabled":n._super(t,a),n._dateLinesChanged();break;default:n._super(t,a)}}catch(e){this._handleException(e,"option")}},_initConstants:function(){var e=this._getOrCreateNXXXXX({WIDGET_ABBREVIATION:"ngantt",WIDGET_PREFIX:"ngantt-",WIDGET_NAMESPACE:".ngantt",WIDGET_NAME_IN_ERROR_MESSAGES:"nGanttWidget",WIDGET_PROPERTYNAME_IN_CALLBACKS:"ganttWidget",WIDGET_TABLE_PREFIX:"ngantt-table-",WIDGET_TABLE_INSERTION:"table-"});return this._super(),e.BAR_SELECTION_FRAMES_PARENT_CLASS=[e.WIDGET_PREFIX+"top-bar-selection-frames-parent",e.WIDGET_PREFIX+"bar-selection-frames-parent"],e.SELECTED_ROW_GRADIENT_START_CLASS=e.WIDGET_PREFIX+"table-row-selected-gradient-start",e.SELECTED_ROW_GRADIENT_END_CLASS=e.WIDGET_PREFIX+"table-row-selected-gradient-end",e.WIDTH_CLIPPATH_ID[se.Table]=e.WIDGET_PREFIX+"table-width-clippath",e.WIDTH_CLIPPATH_ID[se.TimeArea]=e.WIDGET_PREFIX+"timearea-width-clippath",e},_doScale:function(){var e=this.options.visualZoomFactor;this._timeAxis?.visualZoomFactor(e),this._barDragging?.setOption("visualZoomFactor",e),this._verticalSplitterWidget?.option("visualZoomFactor",e),this._element.querySelectorAll(`.${Je} .${D.CLASS}`).forEach((t=>{t._splitterWidget.option("visualZoomFactor",e)})),this._additionalVerticalSplitterDivD3?.style("left",this._PE_ActualTableViewWidth()*e+"px").style("width",this._actualSplitterWidth()*e+"px").style("height",this._actualScrollBarWidth()*e+"px"),this._super()},_onSplitterChanged:function(e,t){try{this._setViewWidth(se.Table,e),this._tableViewChanged(!0,!0),this._trigger("splitterChanged",null,{newValue:e,isDropped:t})}catch(e){this._handleException(e,"onSplitterChanged_verticalSplitter")}},_doResize:function(e,t,a){var n=this;if(n.options.updateSuspended&&n._doResizeNeededWhileUpdateSuspended&&(delete n._doResizeNeededWhileUpdateSuspended,a=!0),n._mainWidth>0&&n._mainHeight>0){if(void 0===n._layoutRows[oe.MainBody].extent()&&!a)return void window.setTimeout((function(){n._layoutRows[oe.MainBody].innerViewExtent()||n._doResize(e,t,!0)}),100);n._setOption("updateSuspended",!1);var r=n._actualScaledMainWidth(),o=n._actualScaledMainHeight();n._tableViewChanged();var s=n._calcBodyViewAndSeparatorHeights(o),l=n._calcInnerBodyViewAndSeparatorHeights(s),c=[];c[oe.BodyAtTheTop]=l[oe.BodyAtTheTop]-n._layoutRows[oe.BodyAtTheTop].innerViewExtent(),c[oe.MainBody]=l[oe.MainBody]-n._layoutRows[oe.MainBody].innerViewExtent();var d=n._shouldHeightChange(e,c);if(d){n._layoutRows[oe.BodyAtTheTop].outerViewExtent(s[oe.BodyAtTheTop]),(n._layoutRows[oe.MainBody].outerViewExtent()||s[oe.MainBody]>=0)&&n._layoutRows[oe.MainBody].outerViewExtent(s[oe.MainBody]),n._layoutRows[oe.BodyAtTheTop].innerViewExtent(l[oe.BodyAtTheTop]),(n._layoutRows[oe.MainBody].innerViewExtent()||l[oe.MainBody]>=0)&&n._layoutRows[oe.MainBody].innerViewExtent(l[oe.MainBody]),n._layoutRows[oe.BodySeparator].extent(0),n._layoutRows[oe.BodySeparator].outerViewExtent(s[oe.BodySeparator]),n._layoutRows[oe.BodySeparator].innerViewExtent(l[oe.BodySeparator]);var m=0;if(n._layoutRows[oe.TopTitle].start(m),m+=n._layoutRows[oe.TopTitle].outerViewExtent(),n._layoutRows[oe.BodyAtTheTop].start(m),m+=n._layoutRows[oe.BodyAtTheTop].outerViewExtent(),n._layoutRows[oe.BodySeparator].start(m),m+=n._layoutRows[oe.BodySeparator].outerViewExtent(),n._layoutRows[oe.MainBody].start(m),m+=n._layoutRows[oe.MainBody].outerViewExtent(),n._layoutRows[oe.BottomTitle].start(m),s[oe.BodyAtTheTop]>=0||s[oe.MainBody]>=0){var u=n.options.isForExport||n._elementHeightOnLastCallOf_doResize!==n._elementHeight?function(e){return e.interrupt().transition(),e}:function(e){return e.transition().duration(n.options.transitionDuration)};n._doResizeOverlaysHeightWithAnimation((e=>u(i.select(e)))),n._doResizeAfterUpdatedBodyHeight(u),n._doResizeHeightWithOptionalAnimation(u);var h=[];Ce.forEach((function(e){c[e]>0&&(h[e]=Math.max(0,n._layoutRows[e].extent()-l[e]),n._layoutRows[e].scrollStart()<=h[e]&&(h[e]=void 0))})),null==h[oe.BodyAtTheTop]&&null==h[oe.MainBody]||n._scrollOffsetsChanged([void 0,void 0],h),n.options.virtualized&&n._updateVirtualization(R.ViewResized,t)}}var p=n._calcWidthDifference(r),_=n._shouldWidthChange(e,p);if(d||_){this._currentScaledMainWidth=r;var g=n._specifyNewViewWidth(r);n._layoutColumns[se.Table].outerViewExtent(g[se.Table]),n._layoutColumns[se.TimeArea].outerViewExtent(g[se.TimeArea]);var T=n._calcInnerViewWidths(g);n._layoutColumns[se.Table].innerViewExtent(T[se.Table]),n._layoutColumns[se.TimeArea].innerViewExtent(T[se.TimeArea]);var f=0;n._layoutColumns[se.Table].start(f),f+=n._layoutColumns[se.Table].outerViewExtent(),n._layoutColumns[se.Splitter].start(f),f+=n._layoutColumns[se.Splitter].outerViewExtent(),n._layoutColumns[se.TimeArea].start(f)}(d||_)&&(n._layoutGrid.update(),n._updateWatermarks(),n._provideChartSizeToWorldView(),n._provideViewRectsToWorldView()),n._executeCachedTransitionFunctions(),n._elementHeightOnLastCallOf_doResize=n._elementHeight}!this&&this._super()},_svgRootWheelVer:function(e,t){if(this._barDragging.isActive())try{this._barDragging.handleDrag()}catch(e){throw this._eventDispatcher.stop(),e}return this._super(e,t)},_svgRootWheelHor:function(e,t){return this._innerClientXToLayoutColumn(e[0])===se.TimeArea?(this._doRelativeScroll("timearea",t),!1):this._super(e,t)},_doRelativeScroll:function(e,t,a){"timearea"===e?this._doRelativeScrollHor(se.TimeArea,t,a):this._super(e,t,a)},_onSwipe_OpacityOff:function(){this._super();for(var e=0;e<=1;e++)this._overlayAreas[se.TimeArea][e].showIOSScrollBars(!1)},_onSwipe_RecurrentCalculations:function(e){var t=this;if("timeArea"===t._bodySwipeScrollPos.view)switch(t._currentPanParams||(t._currentPanParams={}),t._currentPanParams.timeAreaPanningMode!==J.HorizontallyOnly&&t._currentPanParams.timeAreaPanningMode!==J.VerticallyOnly&&(t._currentPanParams.timeAreaPanningMode=t.options.timeAreaPanningMode),void 0===t._currentPanParams.timeAreaCachedPanningMode&&t._currentPanParams.timeAreaPanningMode===J.AutoHorOrVer&&(Math.abs(e.deltaX)>5||Math.abs(e.deltaY)>5)&&(Math.abs(e.deltaX)>Math.abs(e.deltaY)?t._currentPanParams.timeAreaPanningMode=J.HorizontallyOnly:t._currentPanParams.timeAreaPanningMode=J.VerticallyOnly),t._currentPanParams.timeAreaPanningMode){case J.VerticallyOnly:"mouse"===e.pointerType&&l.setCursor(t._element,"ns-resize"),e.deltaX=0;break;case J.HorizontallyOnly:"mouse"===e.pointerType&&l.setCursor(t._element,"ew-resize"),e.deltaY=0;break;case J.None:"mouse"===e.pointerType&&l.setCursor(t._element,null),e.deltaX=0,e.deltaY=0;break;case J.HorAndVer:"mouse"===e.pointerType&&l.setCursor(t._element,"move")}else"mouse"===e.pointerType&&l.setCursor(t._element,"move");!this&&this._super()},_onSwipe_DetectView:function(e){if(this._super(e),e&&e.row){var t=e.row.getIndex();switch(t){case oe.BodyAtTheTop:case oe.MainBody:e.column&&e.column.getIndex()===se.TimeArea&&(this._bodySwipeScrollPos.view="timeArea"),this._overlayAreas[se.TimeArea][t].showIOSScrollBars(!0)}}},_onSwipe_ScrollTo:function(e,t,a){"timeArea"===this._bodySwipeScrollPos.view?(e[se.TimeArea]=Math.min(Math.max(0,this._timeAxis.actualTimeAreaWidth()-this._timeAxis.timeAreaViewWidth()),this._bodySwipeScrollPos.lefts[se.TimeArea]-a.deltaX),this._scrollTo(e,t)):this._super(e,t,a)},_scrollLeftsChanged:function(e,t,a,i,n){var r=this;if(n.timeAxisChangedEventNeeded=!1,null!=e&&null!=e[se.TimeArea]){var o=Math.abs(r._currentTimeAreaViewScrollOffset-e[se.TimeArea])>.1;if(r._layoutColumns[se.TimeArea].cachedScrollStart(e[se.TimeArea]/r._layoutColumns[se.TimeArea].scrollFactorExceeding()),o){if(a&&r._overlayAreas)for(var s=0;s<=1;s++)r._overlayAreas[se.TimeArea][s].scrollLeft(r._layoutColumns[se.TimeArea].cachedScrollStart());a||(r._PE_SetTimeAreaViewScrollOffset(e[se.TimeArea],!0),n.timeAxisChangedEventNeeded=!0,n.viewChangedFlags[se.TimeArea]=!0,n.changedFlag=!0,r._callTimeAreaViewParametersChangedFunc())}}if(n.viewChangedFlags[se.TimeArea]){void 0===e&&(e=[]),void 0===e[se.TimeArea]&&(e[se.TimeArea]=r._getHorViewScrollOffset(se.TimeArea)),void 0===t&&(t=[]),void 0===t[oe.BodyAtTheTop]&&(t[oe.BodyAtTheTop]=r._layoutRows[oe.BodyAtTheTop].scrollStart()),void 0===t[oe.MainBody]&&(t[oe.MainBody]=r._layoutRows[oe.MainBody].scrollStart());var l=[];if(l[oe.BodyAtTheTop]="translate("+-r.convertXToLimitedX(e[se.TimeArea])+","+-t[oe.BodyAtTheTop]+")",l[oe.MainBody]="translate("+-r.convertXToLimitedX(e[se.TimeArea])+","+-t[oe.MainBody]+")",r._linkHotRegionsD3?.attr("transform",l[oe.MainBody]),r._linksD3?.attr("transform",l[oe.MainBody]),r._selectedLinksD3?.attr("transform",l[oe.MainBody]),Ce.forEach((function(e){r._barSelectionFramesD3?.[e].attr("transform",l[e]),r._rowDateLinesD3s?.[e].attr("transform",l[e])})),r._timeAreaViewChanged(),i&&void 0!==e[se.TimeArea]&&r._overlayAreas)for(s=0;s<=1;s++)r._overlayAreas[se.TimeArea][s].scrollLeft(r._layoutColumns[se.TimeArea].cachedScrollStart())}r._super(e,t,a,i,n)},_triggerChangedEventAfterScrollOffsetsChanged:function(e){this._super(e),e.timeAxisChangedEventNeeded&&this._trigger("timeAxisChanged")},_onTimeAxisAnythingChanged:function(e){var t=this;(!t._temporaryMarkMinimumDate||(new Date).getTime()>t._temporaryMarkMinimumDate)&&(t._temporaryMarkVisible=void 0),null!=e.centerCoordinateOnRescaling&&t._saveXStretchCenterCoordinate(e.centerCoordinateOnRescaling);var a=!t._timeAreaViewUpdateNeeded;if(!t._changeTimeAreaWidthScrollFactor()){var i=t._calculateTimeAreaOverlayWidth(t._layoutColumns[se.TimeArea].scrollFactorExceeding());t._layoutColumns[se.TimeArea].extent(i),t._layoutGrid.update(),t._updateWatermarks()}var n=[];n[se.TimeArea]=t._timeAxis.timeAreaViewScrollOffset(),t._currentTimeAreaViewScrollOffset!==n[se.TimeArea]&&(t._scrollTo(n,[void 0,void 0]),a=!1),a&&t._timeAreaViewChanged(),t._callTimeAreaViewParametersChangedFunc(),t._worldViewDivElem&&(t._provideChartSizeToWorldView(),t._provideViewRectsToWorldView(),t._createRows(t._currentlyVisibleRowDataItems?t._currentlyVisibleRowDataItems[0].slice().concat(t._currentlyVisibleRowDataItems[1]):[],void 0,E.WorldView)),t._trigger("timeAxisChanged")},_callTimeAreaViewParametersChangedFunc:function(){var e=this;if(e.options.timeAreaViewParametersChangedFunc){void 0!==e._timeAreaViewParametersChangedTimerID&&window.clearTimeout(e._timeAreaViewParametersChangedTimerID);var t=function(){try{if(delete e._timeAreaViewParametersChangedTimerID,e.options.timeAreaViewParametersChangedFunc){var t=e._extendCallbackArgs({scrollOffset:e._timeAxis.timeAreaViewScrollOffset(),width:e._timeAxis.timeAreaViewWidth(),start:e._timeAxis.actualStart(),end:e._timeAxis.actualEnd()});t.scrollOffset&&(t.start=he.addWorkingTime(e.options.collapseCalendar,e._timeAxis.convertXToDate(t.scrollOffset,!1,!0),0)),t.scrollOffset+t.width<e._timeAxis.actualTimeAreaWidth()&&(t.end=he.addWorkingTime(e.options.collapseCalendar,e._timeAxis.convertXToDate(t.scrollOffset+t.width,!1,!0),-0)),e.options.timeAreaViewParametersChangedFunc.call(e,t)}}catch(t){e._handleException(t,"_callTimeAreaViewParametersChangedFunc")}};e.options.scrollOffsetsChangedFuncTimeDelay?e._timeAreaViewParametersChangedTimerID=window.setTimeout(t,e.options.scrollOffsetsChangedFuncTimeDelay):t()}},verticalSplitterWidget:function(){return this._verticalSplitterWidget},scrollTo:function(e,t,a,i){try{d.assertNumberOrNull(e,"",0),d.assertNumberOrNull(t,"",1),d.assertNumberOrNull(a,"",2),d.assertNumberOrNull(i,"",3);var n=[];n[se.Table]=e,n[se.TimeArea]=t;var r=[];r[oe.BodyAtTheTop]=i,r[oe.MainBody]=a,this._scrollTo(n,r)}catch(e){this._handleException(e,"scrollTo")}!this&&this._super()},_setLayoutColumnsScrollLefts:function(e){this._super(e),null!=e&&null!=e[se.TimeArea]&&(e[se.TimeArea]=Math.max(0,Math.min(e[se.TimeArea],Math.ceil(this._timeAxis.actualTimeAreaWidth()-this._timeAxis.timeAreaViewWidth()))))},horizontalTimeAreaViewScrollOffset:function(){return this._getHorViewScrollOffset(se.TimeArea)},_determineCurrentTableViewWidthMaximum:function(){if(this.options.tableDefinition||null!=this.options.tableWidth){var e=!this.options.isForExport&&this._actualScaledMainWidth()||1/0;return Math.min(this.options.rowItemsRoot?this.actualTableWidth():1/0,Math.min(Math.max(0,e-this._actualSplitterWidth()-this._actualScrollBarWidth()),this.options.tableViewWidthMaximum))}},timeAreaBodyClientRect:function(){return this._getBodyClientRect(se.TimeArea)},_tableViewChanged_DetectTableViewWidth:function(){var e=this._layoutColumns[se.Table].rawInnerViewExtent(),t=this._determineCurrentTableViewWidthMaximum();return void 0===e?e=t:void 0!==t&&e>(t||0)&&(e=Math.max(0,t||0)),!this&&this._super(),e},_adaptVerticalSplitter:function(){if(this._verticalSplitterWidget){var e=this._determineCurrentTableViewWidthMaximum();if(void 0!==this._layoutColumns[se.Table].innerViewExtent()&&void 0!==e){this._verticalSplitterWidget.option({max:this.options.splitterEnabled&&e||0});let t=this._layoutColumns[se.Table].innerViewExtent();this._verticalSplitterWidget.isCurrentlyDragged()||this._verticalSplitterWidget.option({position:{x:t,y:0}}),this._additionalVerticalSplitterDivD3?.style("left",t*this.options.visualZoomFactor+"px")}}},_tableViewChanged_RecalcDependentColumns:function(e,t){this._layoutColumns[se.Splitter].start(t);var a=t+this._actualSplitterWidth(),i=Math.max(0,e-t-this._actualSplitterWidth()),n=Math.max(0,i-this._actualScrollBarWidth());this._layoutColumns[se.TimeArea].start(a),this._layoutColumns[se.TimeArea].outerViewExtent(i),this._layoutColumns[se.TimeArea].innerViewExtent(n),this._adaptVerticalSplitter(),!this&&this._super()},_calculateTimeAreaOverlayWidth:function(e){var t=this._timeAxis.actualTimeAreaWidth(),a=t;if(e>1){var i=this._timeAxis.timeAreaViewWidth();a=Math.ceil((t-i)/e+i)}return a},_changeTimeAreaWidthScrollFactor:function(){var e=this,t=e._timeAxis.actualTimeAreaWidth(),a=Math.max(e.options.isForExport?1:t/1e5,1);if(e._layoutColumns[se.TimeArea].scrollFactorExceeding()!==a){var n=e._timeAxis.timeAreaViewScrollOffset();e._layoutColumns[se.TimeArea].cachedScrollStart(n/a);var r=e._calculateTimeAreaOverlayWidth(a);if(e._layoutColumns[se.TimeArea].extent(r),e._ignoreNextScrollEvents(!0,se.TimeArea),e._layoutColumns[se.TimeArea].scrollFactorExceeding()>a){let t=e._layoutColumns[se.TimeArea].cachedScrollStart();e._getAllContentOverlaysForLayoutColumn(se.TimeArea).forEach((e=>{e.scrollLeft=t})),i.selectAll(e._getAllContentOverlaysForLayoutColumn(se.TimeArea)).style("width",`${r}px`)}else{i.selectAll(e._getAllContentOverlaysForLayoutColumn(se.TimeArea)).style("width",`${r}px`);let t=e._layoutColumns[se.TimeArea].cachedScrollStart();e._getAllContentOverlaysForLayoutColumn(se.TimeArea).forEach((e=>{e.scrollLeft=t}))}return e._layoutColumns[se.TimeArea].scrollFactorExceeding(a),!0}return!1},updateExportWatermarks:function(){return this._updateWatermarks()},_updateWatermarks:function(){var e=this;return new Promise((t=>{e._backgroundWatermarkParentD3.selectAll("*").remove();var a=[e.options.watermarkURL,e.options.isForExport?e.options.exportWatermarkURL:void 0],n=a.length,r=function(){--n||t()};a.forEach((t=>{if(t)if("///"===t.substring(0,3)){var a=i.select("#"+t.substring(3)),n=e._backgroundWatermarkParentD3.append("g");if(!a.size())return!1;var o=a.attr("href");if(0===o.indexOf("data:image/svg")){var s=atob(o.slice(o.indexOf(",")+1));n.node().insertAdjacentHTML("afterbegin",s)}else n.append("image").attr("href",o);let l=a.node();h.calculateOriginalImageSize(l).then((()=>{var t=l.getAttribute("data-originalwidth")??1,a=l.getAttribute("data-originalheight")??1,i=e._currentTimeAreaViewWidth/t||1,o=e._actualInnerBodyViewHeightsSumWithSeparator()/a,s=e.options.watermarkScale||Math.min(i,o),c=(e._currentTimeAreaViewWidth-t*s)/2||0,d=(e._actualInnerBodyViewHeightsSumWithSeparator()-a*s)/2;n.attr("transform",`translate(${c},${d}) scale(${s})`),r()}))}else r();else r();return!0}))}))},_timeAreaViewChanged:function(e,t){var a=this;if(a.options.updateSuspended)a._timeAreaViewUpdateNeeded=!0;else{var n=a._timeAxis.actualTimeAreaWidth(),o=a._timeAxis.timeAreaViewWidth(),s=a._timeAxis.timeAreaViewScrollOffset(),l=a._timeAxis.actualBaseTimeUnitWidth(),c=[];c[oe.BodyAtTheTop]=a._currentBodyViewScrollTops[oe.BodyAtTheTop]!==a._layoutRows[oe.BodyAtTheTop].scrollStart(),c[oe.MainBody]=a._currentBodyViewScrollTops[oe.MainBody]!==a._layoutRows[oe.MainBody].scrollStart();var d=a._currentTimeAreaWidth!==n,m=a._currentTimeAreaViewWidth!==o,u=s-a._currentTimeAreaViewScrollOffset,h=a._currentActualBaseTimeUnitWidth!==l,p=a._currentStart&&a._currentStart.getTime()!==a._timeAxis.actualStart().getTime()||a._currentEnd&&a._currentEnd.getTime()!==a._timeAxis.actualEnd().getTime();if(p&&delete a._weekendCalendar,a._currentBodyViewScrollTops[oe.BodyAtTheTop]=a._layoutRows[oe.BodyAtTheTop].scrollStart(),a._currentBodyViewScrollTops[oe.MainBody]=a._layoutRows[oe.MainBody].scrollStart(),a._currentTimeAreaWidth=n,a._currentTimeAreaViewWidth=o,a._currentTimeAreaViewScrollOffset=s,a._currentActualBaseTimeUnitWidth=l,a._currentStart=a._timeAxis.actualStart(),a._currentEnd=a._timeAxis.actualEnd(),e||c[oe.MainBody]||d||m||u||h||p){if(a.options.virtualized&&!c[oe.MainBody]&&!c[oe.BodyAtTheTop]&&u&&h&&a._removeRealizedRowsIfTooMany(),d&&!a._changeTimeAreaWidthScrollFactor()){var _=a._calculateTimeAreaOverlayWidth(a._layoutColumns[se.TimeArea].scrollFactorExceeding());a._layoutColumns[se.TimeArea].extent(_),a._doResize()}m?a._provideChartSizeToWorldView():u&&a._provideViewRectsToWorldView();var g=a._updateXCoordinateLimiterTransform()||e,T=a.getCurrentUpperXLimit()-a.getCurrentLowerXLimit(),f=a._extendCallbackArgs({isForeground:!1,width:a._actualLayoutColumnLeft(se.TimeArea)+T,timeAreaWidth:T,bodyViewScrollOffsetChanged:c[oe.MainBody],timeAreaWidthChanged:d,timeAreaViewWidthChanged:m,timeAreaViewScrollOffsetChanged:!!u,baseTimeUnitWidthChanged:h,startOrEndChanged:p,xCoordTransformChanged:g,rowHeightChanged:!1}),D=this.convertXToLimitedX(s),v="translate("+-D+")",y=[];if(y[oe.BodyAtTheTop]="translate("+-D+","+-a._layoutRows[oe.BodyAtTheTop].scrollStart()+")",y[oe.MainBody]="translate("+-D+","+-a._layoutRows[oe.MainBody].scrollStart()+")",u||m||d||h||p||g){var w=a._backgroundBodyD3s[oe.BodyAtTheTop].selectAll("."+Ct),S=a._backgroundBodyD3s[oe.MainBody].selectAll("."+Ct),I=a._foregroundBodyD3s[oe.BodyAtTheTop].selectAll("."+Ct),A=a._foregroundBodyD3s[oe.MainBody].selectAll("."+Ct),b=a._highlightedBodyD3s[oe.BodyAtTheTop].selectAll("."+gt),R=a._highlightedBodyD3s[oe.MainBody].selectAll("."+gt);[w,S].forEach((function(e){e&&e.each((function(e){var t=i.select(this).select("."+Pt),n=t.select("g."+Ht);n.size()&&(m&&(t.select("."+Rt).attr("width",o),t.select("."+kt).attr("x2",o)),null!=e.totalHeight&&((d||h||p||g)&&(a._getCurrentlyDisplayedElementsInRow(e)&Z.CalendarGrid&&a._updateCalendarGridForRow(e,n,!1),Array.isArray(a._determineDateAreasForRowDataItem(e))&&a._positionDateAreasInRow(e,t,!1)),a.options.timeAreaRowUpdateFunc&&(f.rowItem=e.item,f.rowElem=t.node(),f.parentElem=n.node(),a.options.timeAreaRowUpdateFunc.call(a,f))))}))})),f.isForeground=!0,(u||d||h||p||g)&&(t||!p&&!g||(a._invalidRowDataItemIDsForSubRowIndexesMap={}),[I,A,b,R].forEach((function(e){e&&e.each((function(e){t||!p&&!g||a._calculateSubRowIndexesOfBarsInRow(e);var n=i.select(this).select("."+Pt),r=n.select("g."+Ht);r.size()&&((e.totalHeight||a.options.linksWithDanglingBarsVisible)&&r.selectAll($t).each((function(t){if(t){var n=i.select(this);void 0!==e.oldY?a._positionBarFully(n,e,t,void 0,void 0,!0):a._positionBar(n,t,void 0,void 0,!0)}})),Array.isArray(a._determineDateAreasForRowDataItem(e))&&a._positionDateAreasInRow(e,n,!0),a.options.rowOmissionSymbolsVisible&&i.select(this).selectAll("."+a.NXXXXX.ROW_OMISSION_SYMBOL_CLASS+" line").attr("x2",a._actualScaledMainWidth()),a.options.timeAreaRowUpdateFunc&&(f.rowItem=e.item,f.rowElem=n.node(),f.parentElem=r.node(),a.options.timeAreaRowUpdateFunc.call(a,f)))}))})))}if((u||h||p||g)&&a._svgRootD3.selectAll(".ngantt-phantom-row").each((function(){var e=i.select(this).select("."+Pt).select("g."+Ht);e.attr("transform","translate("+-D+")"),(h||p||g)&&e.selectAll($t).each((function(e){if(e){var t=i.select(this),n=r(t.attr("transform")).translate[1];a._positionBarFully(t,void 0,e,void 0,void 0,void 0,n),e.frameD3&&(h||g)&&e.frameD3.attr("transform","translate("+(a.convertXToLimitedX(a._timeAxis.convertDateToX(e.frameStart))+0)+","+(e.newY+0)+")").select("."+Me).attr("width",a.convertXToLimitedX(a._timeAxis.convertDateToX(e.frameEnd))-a.convertXToLimitedX(a._timeAxis.convertDateToX(e.frameStart))+2*a._phantomFrameDistance)}}))})),d||h||p||g){var C={};a._linksD3&&a._linksD3.selectAll("."+ft).each((function(e){var t=e.sourceTimeDataItem;if(t&&a._getDataItemByID(t.id,a._timeDataItemsMap)&&(C[t.id]||(C[t.id]=!0,t.elem&&t.elem.parentElement&&!t.isHiddenByLimits&&0!==t.rowDataItem.totalHeight&&a._isTimeDataItemVisible(t)||a._positionBar(null,t,2)),(t=e.targetTimeDataItem)&&a._getDataItemByID(t.id,a._timeDataItemsMap))){C[t.id]||(C[t.id]=!0,t.elem&&t.elem.parentElement&&!t.isHiddenByLimits&&0!==t.rowDataItem.totalHeight&&a._isTimeDataItemVisible(t)||a._positionBar(null,t,2));var n=i.select(this);a._positionLink(n,e,E.LinkItemsChanged)}})),a._updateRowDateLinesX()}(u||p||g)&&([w,S,I,A,b,R].forEach((function(e){e&&e.selectAll("."+Ht).attr("transform",v)})),[a._highlightedBodyD3s,a._phantomsBodyD3s].forEach((function(e){e&&e.forEach((function(e){e.selectAll(" ."+Ht).attr("transform",v)}))})),a._verticalDragAreaD3&&a._verticalDragAreaD3.attr("transform",v)),(p||isNaN(u))&&a._updateDateLineGrids(),(d||h||g)&&([a._backgroundDateLinesD3,a._foregroundDateLinesD3,a._dateLineGridsD3].forEach((function(e){e&&e.selectAll("."+Je).each((function(){a._positionDateLine(i.select(this))}))})),a.__sortAndRepositionDateLines(),[a._backgroundDateAreasD3,a._foregroundDateAreasD3].forEach((function(e){e&&e.selectAll("."+qe).each((function(){a._positionDateArea(i.select(this))}))}))),(u||p||g)&&(a._backgroundDateLinesD3&&a._backgroundDateLinesD3.attr("transform",v),a._foregroundDateLinesD3&&a._foregroundDateLinesD3.attr("transform",v),a._backgroundDateAreasD3&&a._backgroundDateAreasD3.attr("transform",v),a._foregroundDateAreasD3&&a._foregroundDateAreasD3.attr("transform",v),a._dateLineGridsD3&&a._dateLineGridsD3.attr("transform",v),a._linkHotRegionsD3&&a._linkHotRegionsD3.attr("transform",y[oe.MainBody]),a._linksD3&&a._linksD3.attr("transform",y[oe.MainBody]),a._selectedLinksD3&&a._selectedLinksD3.attr("transform",y[oe.MainBody]),Ce.forEach((function(e){a._barSelectionFramesD3&&a._barSelectionFramesD3[e].attr("transform",y[e]),a._rowDateLinesD3s&&a._rowDateLinesD3s[e].attr("transform",y[e])}))),m&&a._foregroundBodyD3s.forEach((function(e){e&&e.select("line.ngantt-last-separation-line").attr("x2",a._actualLayoutColumnLeft(se.TimeArea)+o)})),(d||m||u||h||p)&&a._timescaleWidgets.forEach((function(e){e.render()})),(a.options.alternatingTimeStripesVisible||a.options.timescaleRibbonDateLinesVisible)&&(u||m||h||p||g)&&a._updateTimescaleDependentStripesOrDateLines()}}},_updateDateLineGrids:function(){var e=this,t=e._timeAxis.actualStart().getTime(),a=e._timeAxis.actualEnd().getTime(),n=e._dateLineGridsD3.selectAll("."+at);n.selectAll("."+Je).remove(),n.each((function(){var n=i.select(this),r=n.property(it);e._callFunctionForAllDatesInDateLineGrid(t,a,r,(function(t){e._createDateLine(n,{date:t,dateLineGridColor:e.options.dateLineGridColor,dateLineGridDashArray:e.options.dateLineGridDashArray,dateLineGridWidth:e.options.dateLineGridWidth})}))}))},_callFunctionForAllDatesInDateLineGrid:function(e,t,a,i){var n=this,r=this.options.locale instanceof p?n.options.locale.applyDateFormat:function(e){return e()};c.applyTimeZone(n.options.timeZone,(function(){for(var o=c.dateToMomentIfNecessary(new Date(e-1));!((o=r.call(n.options.locale,(function(){return c.addToDateOrMoment(c.normalizeDateOrMoment(o,a,1),a,1)}))).valueOf()>=t);)i.call(n,c.toDate(o))}))},timeRange:function(e,t){try{var a=this;d.assertDate(e,"",0),d.assertDate(t,"",1),a.options.updateSuspended||a._timeAxis.cacheEvents(),a._timeAxis.startAndEnd(e,t),a.options.updateSuspended||a._timeAxis.triggerCachedEvents(),a._timeAreaViewChanged()}catch(e){this._handleException(e,"timeRange")}return this},timeAxis:function(){return this._timeAxis},timescaleWidget:function(){return this._timescaleWidgets[ce.top]},zoom:function(e){try{var t=this;t._timeAxis.cacheEvents();var a=t._timeAxis.actualBaseTimeUnitWidth(),i=t._timeAxis.timeAreaViewScrollOffset();t._saveXStretchCenterCoordinate(i),e===ae.Stretch?t._timeAxis.baseTimeUnitWidth(1.25*a):t._timeAxis.baseTimeUnitWidth(.8*a);var n=t._timeAxis.actualBaseTimeUnitWidth();if(n!==a){var r=i*n/a;r<0&&(r=0),t._PE_SetTimeAreaViewScrollOffset(r)}t._timeAxis.triggerCachedEvents()}catch(e){this._handleException(e,"zoom")}},fitTimeAreaIntoView:function(e,t,a){try{var n=this;d.assertDateOrNull(e,"",0),d.assertDateOrNull(t,"",1),n._setOption("updateSuspended",!1),n.update(),(!n._temporaryMarkMinimumDate||(new Date).getTime()>n._temporaryMarkMinimumDate)&&(n._temporaryMarkVisible=void 0);var r=new Promise((r=>{var o=n._timeAxis.timeAreaViewWidth(),s=fe.timeUnitToSeconds(n._timeAxis.baseTimeUnit());if((!e||e.getTime()<n._timeAxis.actualStart().getTime())&&(e=n._timeAxis.actualStart()),(!t||t.getTime()>n._timeAxis.actualEnd().getTime())&&(t=n._timeAxis.actualEnd()),e.getTime()<t.getTime()){var l=he.calculateWorkingTime(n._timeAxis.collapseCalendar(),t,e);if(!l)return void r();var c=o/(l/s/1e3),d=this._timeAxis.actualBaseTimeUnitWidth(),m=this._timeAxis.timeAreaViewScrollOffset();if(c===d)return n.scrollTimeAreaViewToDate(e,!0,a),void r();n._timeAxis.cacheEvents(),n._timeAxis.baseTimeUnitWidth(c);var u=n._timeAxis.convertDateToX(e);n._timeAxis.baseTimeUnitWidth(d),n._PE_SetTimeAreaViewScrollOffset(m);var h=function(){n._timeAxis.cacheEvents(),n._timeAxis.baseTimeUnitWidth(c),n._PE_SetTimeAreaViewScrollOffset(u),n._timeAxis.setFittedTimeAreaViewStartAndEnd(e,t),n._timeAxis.triggerCachedEvents(),r()};a?h():i.select(this).transition().duration(n._timeAreaTransitionDuration).ease(i.easeLinear).tween("fitTimeAreaIntoView",(function(){var e=i.interpolate(d,c);return function(t){var a=e(t);n._timeAxis.cacheEvents(),n._timeAxis.baseTimeUnitWidth(a);var i=Math.max(0,(d-a)/(d-c));n._PE_SetTimeAreaViewScrollOffset(m+(u-m)*i),n._timeAxis.triggerCachedEvents()}})).on("end",h)}else r("Start later than end!")}))}catch(e){this._handleException(e,"fitTimeAreaIntoView")}return r},scrollTimeAreaViewToDate:function(e,t,a,n){try{var r=this;d.assertDateOrNull(e,"",0),d.assertStringOrNull(n,"",3);var o=new Promise((o=>{var s=this.options.scrollToViewOffsetPercentage;t||null==n||(n.indexOf("%")>-1?s=parseInt(n,10):n.indexOf("px")>-1&&(s=100*parseInt(n,10)/this._timeAxis.timeAreaViewWidth())),r._scrollingFinished=!1;var l=this._timeAxis.timeAreaViewScrollOffset(),c=this._timeAxis.convertDateToX(e)-(t?0:this._timeAxis.timeAreaViewWidth()*s/100);c<0&&(c=0),a||!r.options.transitionDuration?(r._PE_SetTimeAreaViewScrollOffset(c),r._scrollingFinished=!0,o()):i.select(this).transition().duration(r._timeAreaTransitionDuration).tween("text",(function(){var e=i.interpolateRound(l,c);return function(t){r._PE_SetTimeAreaViewScrollOffset(e(t))}})).on("end",(function(){r._scrollingFinished=!0,o()}))}))}catch(e){this._handleException(e,"scrollTimeAreaViewToDate")}return o},_collapseCalendarChanged:function(){var e=this;null!=this.options.rowItemsRoot&&e.invalidateAllRows();var t=Math.floor(e._timeAxis.timeAreaViewWidth()/2),a=e._timeAxis.convertXToDate(Math.round(e._timeAxis.timeAreaViewScrollOffset())+t);e._timeAxis.collapseCalendar(e.options.collapseCalendar);var i=e._timeAxis.convertDateToX(a)-t;Math.abs(e._timeAxis.timeAreaViewScrollOffset()-i)>1&&e._PE_SetTimeAreaViewScrollOffset(i),e._updateDateLineGrids(),e._bodyChanged(E.TimeAxisChanged)},eventPointToTimeArea:function(e){var t=i.pointer(e,this._svgRootD3.node());return this._pointToTimeArea(t)},pagePointToTimeArea:function(e,t){var a=this,i=a._pointToSVGRelative(a._svgRootD3.node(),e,t);return a._pointToTimeArea([i.x,i.y])},_pointToTimeArea:function(e){var t=this;if(e[1]>=t._actualBodyViewTop(oe.BodyAtTheTop)&&e[1]<t._actualInnerBodyViewBottom(oe.MainBody)&&e[0]>=t._actualLayoutColumnLeft(se.TimeArea)&&e[0]<t._actualInnerLayoutColumnRight(se.TimeArea)){var a=e[0]-t._actualLayoutColumnLeft(se.TimeArea)+t._timeAxis.timeAreaViewScrollOffset(),i=t._timeAxis.convertXToDate(a,!1,!0);return{pageX:e[0],x:a,date:i,y:e[1]-t._actualTitleHeight(ce.top)}}},pageXToTimeAxisX:function(e){return(e-this._element.getBoundingClientRect().left)/this.options.visualZoomFactor-this._actualLayoutColumnLeft(se.TimeArea)+this._timeAxis.timeAreaViewScrollOffset()},timeAxisXToPageX:function(e){return e*this.options.visualZoomFactor+this._actualLayoutColumnLeft(se.TimeArea)-this._timeAxis.timeAreaViewScrollOffset()+this._element.getBoundingClientRect().left},pageXToDate:function(e){return this._timeAxis.convertXToDate(this.pageXToTimeAxisX(e),!1,!0)},dateToPageX:function(e){return this._timeAxis.convertDateToX(e)+this._actualLayoutColumnLeft(se.TimeArea)-this._timeAxis.timeAreaViewScrollOffset()+this._element.getBoundingClientRect().left},isInInteraction:function(){try{return this._super()||this._barDragging.isInitiated()||this._isInDateLineInteraction||!!this._temporaryTimeAreaViewScrollOffsetForBarSelection}catch(e){return this._handleException(e,"isInInteraction"),!1}},isInPinchZoomInteraction:function(){try{return!!this._pinchStartTime}catch(e){return this._handleException(e,"isInPinchZoomInteraction"),!1}},_cancelInteractionAtLast:function(e){this._super(),this._barDragging.isInitiated()?this._barDragging.terminate(e,!0):this._temporaryTimeAreaViewScrollOffsetForBarSelection&&this._finishBarSelectionRectangle(void 0,!0)},getTimeItem:function(e){try{d.assertNotNull(e,"",0);var t=i.select(e).datum();return t?t.item:void 0}catch(e){this._handleException(e,"getTimeItem")}},determineTimeItemExtent:function(e,t){try{d.assertNotNull(e,"",0);var a=this,i=a._getDataItem(e,a._timeDataItemsMap);if(i)return i?a._determineTimeDataItemExtent(i,void 0,void 0,t):void 0}catch(e){this._handleException(e,"determineTimeItemExtent")}},getRowItem:function(e){try{d.assertNotNull(e,"",0);var t=this;if(e instanceof Element)return void 0===(a=t._super(e))?(a=i.select(e.closest("."+Be+",."+Pt)).data()[0])?a.item:void 0:a;var a,n=t._getDataItem(e,t._timeDataItemsMap,t._unusedTimeDataItemsMap);return(a=n?n.rowDataItem:void 0)?a.item:void 0}catch(e){this._handleException(e,"getRowItem")}},getVisibleRowItem:function(e){try{d.assertNotNull(e,"",0);var t=this,a=t._getDataItem(e,t._timeDataItemsMap,t._unusedTimeDataItemsMap),i=a&&a.rowDataItem?a.rowDataItem.visibleRowDataItem:void 0;return i?i.item:void 0}catch(e){this._handleException(e,"getVisibleRowItem")}},disposeUnusedItems:function(){try{var e=this;e._super(),e._unusedTimeDataItemsMap.clear();for(let t of e._unusedLinkDataItemsMap.values())t.sourceTimeDataItem?.linkDataItemsSet?.delete(t),t.targetTimeDataItem?.linkDataItemsSet?.delete(t);e._unusedLinkDataItemsMap.clear()}catch(e){this._handleException(e,"disposeUnusedItems")}},disposeUnusedItem:function(e){this._unusedTimeDataItemsMap.delete(e.id)||this._unusedLinkDataItemsMap.delete(e.id)||this._super(e)},scrollToItem:function(e,t,a,n,r){try{d.assertNotNull(e,"",0);var o=this,s=o._super(e,t,a,n,r);if(!s){var l,c,m=o._getDataItem(e,o._timeDataItemsMap);if(!m)throw Error("Item not found");if(m.parentTimeDataItem&&(m=m.parentTimeDataItem),!o._canTimeDataItemBeVisible(m)&&m.rowDataItem)return o._super(m.rowDataItem.item,t,a,n,r);if("string"==typeof t&&(l=(t=t.split(",")).indexOf("left")>=0?"left":t.indexOf("hcenter")>=0?"center":t.indexOf("right")>=0?"right":void 0,c=t.indexOf("top")>=0?"top":t.indexOf("vcenter")>=0?"center":t.indexOf("bottom")>=0?"bottom":void 0,t=void 0),!o._isTimeDataItemVisible(m)){var u,h=[];for(u=m.rowDataItem;u;u=u.parentRowDataItem)h.unshift(u);h.shift(),h.every((function(e,t){let a=m.rowDataItem.isDetailingRow&&t===h.length-2;return!(a?e.areLeavesCollapsed:e.isCollapsed)||(o._expandOrCollapseRow(e,!1,!1,a),!o._isTimeDataItemVisible(m))}))}var p=m.rowDataItem.visibleRowDataItem;o._isRowDataItemVirtualized(p)&&o._createRow(p,p,E.ScrollToRow);var _=o._determineBodyAreaIndex(p),g=[],T=[],f=o._determineTimeDataItemExtent(m);if(null==n||n){if(c||null!=t||(p.oldY+f.bottom<o._layoutRows[_].scrollStart()?c="top":p.oldY+f.constraintTop>o._layoutRows[_].scrollStart()+o._layoutRows[_].innerViewExtent()&&(c="bottom")),c){var D=f.bottom-f.constraintTop;t="top"===c?-o.determineActualRowMargins().top:"center"===c?(o.determineActualRowMargins().sum-(o._layoutRows[_].innerViewExtent()-D))/2:"bottom"===c?o.determineActualRowMargins().bottom-(o._layoutRows[_].innerViewExtent()-D):void 0}null!=t&&(g[_]=Math.max((p.newY||p.oldY)+(m.newY??m.oldY??0)+t+f.constraintTop,0))}if(null==a||a){t="left"===l?f.left-10:"right"===l?f.right-o._currentTimeAreaViewWidth+10:(f.right+f.left)/2-o._currentTimeAreaViewWidth/2;var v=o._currentTimeAreaViewScrollOffset>f.right,y=o._currentTimeAreaViewScrollOffset+o._currentTimeAreaViewWidth<f.left;(l||v||y)&&(T[se.TimeArea]=Math.max(t,0))}s=new Promise((e=>{if(r){var t=o._getScrollOffsets(se.TimeArea,_);void 0===T[se.TimeArea]&&(T[se.TimeArea]=t.horScrollOffset),void 0===g[_]&&(g[_]=t.verScrollOffset);var a={horScrollOffset:T[se.TimeArea],verScrollOffset:g[_]},n=["horScrollOffset","verScrollOffset"],s=Math.abs(a.horScrollOffset-t.horScrollOffset)>Math.abs(a.verScrollOffset-t.verScrollOffset)?0:1,l=(a[n[1-s]]-t[n[1-s]])/(a[n[s]]-t[n[s]]);i.select(o._element).transition().duration(o.options.transitionDuration).tween("scrollToItem",(function(){var e=i.interpolate(t[n[s]],a[n[s]]);return function(a){if(s){var i=g[_]=Math.floor(e(a));l&&isFinite(l)&&(T[se.TimeArea]=Math.floor((i-t[n[s]])*l+t[n[1-s]]))}else{var r=T[se.TimeArea]=Math.floor(e(a));l&&isFinite(l)&&(g[_]=Math.floor((r-t[n[s]])*l+t[n[1-s]]))}o._scrollTo(T,g)}})).on("end",(function(){e()}))}else o._scrollTo(T,g),e()}))}return s}catch(e){this._handleException(e,"scrollToItem")}},getItemBoundingRect:function(e){try{d.assertNotNull(e,"",0);var t=this,a=t._super(e);if(a)return a;var i=t._getDataItem(e,t._timeDataItemsMap);if(i&&t._isTimeDataItemVisible(i)){var n=t._determineTimeDataItemExtent(i);return{xOffset:0,yOffset:n.top,left:n.outerLeft,right:n.outerRight,width:n.outerRight-n.outerLeft,top:i.newY+i.rowDataItem.visibleRowDataItem.newY+n.top,bottom:i.newY+i.rowDataItem.visibleRowDataItem.newY+n.bottom,height:n.bottom-n.top}}}catch(e){this._handleException(e,"getItemBoundingRect")}return null},getElementOfItem:function(e,t){try{d.assertNotNull(e,"",0);var a=this,n=!0===t||1===t,r=a._getDataItem(e,a._rowDataItemsMap);if(r)return 2===t?i.select(r.foregroundRowElem).select("."+a.NXXXXX.TABLE_ROW_CLASS).node():n?r.backgroundRowElem:r.foregroundRowElem;if(r=a._getDataItem(e,a._timeDataItemsMap))return n?r.backgroundElem:r.elem;if(r=a._getDataItem(e,a._linkDataItemsMap))return 2===t?r.hotRegionElem:r.elem}catch(e){this._handleException(e,"getElementOfItem")}},invalidateRow:function(e,t,a){if(t){var i=this._getDataItem(e,this._rowDataItemsMap,this._unusedRowDataItemsMap);if(i){for(var n=i;i.visibleRowDataItem!==n;){if(!(this._getCurrentlyDisplayedElementsInRow(n)&Z.Bars)){n=i;break}n=n.parentRowDataItem}e=n.item}}this._doInvalidateRowWithCheck(e,{barsChangedFlag:t,childRowsChangedFlag:a})},_doInvalidateRowWithCheck:function(e,t,a){"detailingRowsVisible"===a&&(t.barsChangedFlag=!0),this._super(...arguments)},deactivateInvalidationOfSubRowIndexesOfBarsInRows:function(e){this._invalidationOfSubRowIndexesOfBarsInRowsDeactivated=e},calculateInvalidSubRowIndexesOfBarsInRows:function(){try{var e=this;Object.keys(e._invalidRowDataItemIDsForSubRowIndexesMap).forEach((function(t){var a=e._rowDataItemsMap.get(t);a&&(e._calculateSubRowIndexesOfBarsInRow(a),delete a.totalHeight)})),e._invalidRowDataItemIDsForSubRowIndexesMap={}}catch(e){this._handleException(e,"calculateInvalidSubRowIndexesOfBarsInRows")}},_handleRowInvalidationAtLast:function(e,t,a,i){this._super(e,t,a,i),this._handleAdditionalRowInvalidationAfter(e,{barsChangedFlag:a}),a||this._invalidationOfSubRowIndexesOfBarsInRowsDeactivated||e.isHidden||(this.options.automaticCalculationOfSubRowIndexesOfBarsInRow?this._calculateSubRowIndexesOfBarsInRow(e):this._invalidRowDataItemIDsForSubRowIndexesMap[e.id]=!0),(t||a)&&delete e.worldViewBarCacheMap},update:function(){try{this._super(),this.options.updateSuspended||this.calculateInvalidSubRowIndexesOfBarsInRows(),this._bodyChanged(E.RowItemsChanged)}catch(e){this._handleException(e,"update")}},_getCurrentlyDisplayedElementsInRow:function(e){return e.isCollapsed?this._getCollapsedDisplayedElementsForRowDataItem(e):this._getExpandedDisplayedElementsForRowDataItem(e)},_getCollapsedDisplayedElementsForRowDataItem:function(e){var t=e.item.collapsedDisplayedElements;return null==t&&(t=this._getDefaultOptionValueWithExternalType(e,this.options.defaultRowCollapsedDisplayedElementsByExternalTypeMap,Z.None)),+t||0},_getExpandedDisplayedElementsForRowDataItem:function(e){var t=e.item.expandedDisplayedElements;return null==t&&(t=this._getDefaultOptionValueWithExternalType(e,this.options.defaultRowExpandedDisplayedElementsByExternalTypeMap,Z.None)),(+t||0)&~Z.BarsInHiddenDescendantRows},_determineVisibleTimeDataItemsInRow:function(e){var t=this,a=function(e,i,n,r,o){Array.isArray(e.item.timeItems)&&t._doDetermineTimeDataItems(e.item.timeItems,i,!0),["detailingRowDataItems","childRowDataItems"].forEach((function(s,l){if((l||t.options.leafBarsVisibleOnParentRows)&&(l?n:r)){let c=t._getCurrentlyDisplayedElementsInRow(e);c&(l?Z.BarsInHiddenDescendantRows:Z.BarsInOwnHiddenLeafRows|Z.BarsInLeafRowsInHiddenDescendantRows)&&(l||!o||c&Z.BarsInOwnHiddenLeafRows)&&e[s]?.forEach((function(e){a(e,i,n,r,!0)}))}}))},i=[];return a(e,i,e.isCollapsed,!t.options.detailingRowsVisible||e.areLeavesCollapsed),i},_determineTimeDataItems:function(e,t){var a=[];return e&&this._doDetermineTimeDataItems(e,a,t),a},_doDetermineTimeDataItems:function(e,t,a){var i=this;e.forEach((function(e){var n=i._getDataItem(e,i._timeDataItemsMap);n&&(t.push(n),a&&Array.isArray(e.childTimeItems)&&i._doDetermineTimeDataItems(e.childTimeItems,t,!n.parentTimeDataItem))}))},_determineSuperTimeDataItem:function(e){for(var t=e;t.parentTimeDataItem?.barShape;)t=t.parentTimeDataItem;return t},_determineDescendantTimeDataItems:function(e){var t=[];return this._doDetermineDescendantTimeDataItemsRecursively(e,t),t},_doDetermineDescendantTimeDataItemsRecursively:function(e,t){var a=this;Array.isArray(e.item?.childTimeItems)&&e.item.childTimeItems.forEach((function(e){var i=a._getDataItem(e,a._timeDataItemsMap);i&&a._doDetermineDescendantTimeDataItemsRecursively(i,t)})),e.item?.childTimeItems&&!e.item?.barShape||t.push(e)},_determineTimeRange:function(e,t,a,i){var n=!!t;if(t?(t.constraintStart||(t.constraintStart=t.outerStart),t.constraintEnd||(t.constraintEnd=t.outerEnd)):t={start:void 0,outerStart:void 0,end:void 0,outerEnd:void 0},this._doDetermineTimeRangeRecursively(e,t,a,i),t.start||n)return t.end<t.start&&(t.end=new Date(t.start)),t.outerEnd<t.outerStart&&(t.outerEnd=new Date(t.outerStart)),t},_determineCalendarForRowDataItem:function(e){let t=e?.item.calendar;return"fromParentRow"===t&&(t=e.parentRowDataItem.item.calendar),void 0===t&&(t=this.options.defaultCalendar),t},_determineDateAreasForRowDataItem:function(e){let t=e.item.dateAreas;return"fromParentRow"===t&&(t=e.parentRowDataItem.item.dateAreas),t},_doDetermineTimeRangeRecursively:function(e,t,a,i){var n=this;if(e.item&&!e.item.barShape&&Array.isArray(e.item.childTimeItems)&&e.item.childTimeItems.length)e.item.childTimeItems.forEach((function(e){var r=n._getDataItem(e,n._timeDataItemsMap);r&&n._doDetermineTimeRangeRecursively(r,t,a,i)}));else if(!(i&&!1===e.item?.markable||a?.[e.id])){var r=n._timeAxis,o=n._getActualBarShape(e.timeDataItem||e),s=o===H.None?G.None:n._getActualBarType(e,!e.item),l=e.item?e.item:e,c=s&N.Start&&n._getBindingPropertyInfosAndValue(l,"start","date").value||null,d=s&N.End&&n._getBindingPropertyInfosAndValue(l,"end","date").value||c;if(s&N.Duration){var m=n._getBindingPropertyInfosAndValue(l,"duration","number").value||0,u=e.item.calendar??n._determineCalendarForRowDataItem(e.rowDataItem);c&&s&N.Start?d=he.addWorkingTime(u,c,m)||c:d&&(c=he.addWorkingTime(u,d,-m))}if((!(s&N.Start)||c)&&(!(s&N.End)||d)){if(n._barDragging.isInitiated()&&!n._barDragging.isDropped()&&(e.parentTimeDataItem||e).isCurrentlyDraggedCoupled){u=e.item.calendar??n._determineCalendarForRowDataItem(e.rowDataItem);var h=n._barDragging.modifyStartEndForCoupledTimeItems(u,c,d);c=h.start,d=h.end}var p,_=c,g=d;c&&d&&((p=n._barFactory.getBarOffsets(n._extendCallbackArgs({barShapeId:o,item:e.item,rowItem:e.rowDataItem&&e.rowDataItem.item})))&&(p.startOffset&&(_=r.convertXToDate(r.convertDateToX(c)-p.startOffset)),p.endOffset&&(g=r.convertXToDate(r.convertDateToX(d)+p.endOffset))),(p=n._handleOffsetsOnStartAndEnd(e.timeDataItem||e,c,d)).outerStart&&(_=p.outerStart),p.outerEnd&&(g=p.outerEnd)),s!==G.None&&(_&&(!t.outerStart||t.outerStart.getTime()>_.getTime())&&(t.outerStart=_,(!t.constraintStart||t.constraintStart.getTime()>_.getTime())&&(t.constraintStart=_)),c&&(!t.start||t.start.getTime()>c.getTime())&&(t.start=c),g&&(!t.outerEnd||t.outerEnd.getTime()<g.getTime())&&(t.outerEnd=g,(!t.constraintEnd||t.constraintEnd.getTime()<g.getTime())&&(t.constraintEnd=g)),d&&(!t.end||t.end.getTime()<d.getTime())&&(t.end=d),!e.rowDataItem||e.rowDataItem.visibleRowDataItem.isHidden||e.timeDataItem||(Array.isArray(e.item.constraints)&&e.item.constraints.length&&e.item.constraints.forEach((function(e){if(e.date instanceof Date){var a=e.date.getTime();t.constraintStart.getTime()>a?t.constraintStart=e.date:t.constraintEnd.getTime()<a&&(t.constraintEnd=e.date)}})),e.item.predictedEnd instanceof Date&&(t.constraintEnd.getTime()<e.item.predictedEnd.getTime()?t.constraintEnd=e.item.predictedEnd:t.constraintStart.getTime()>e.item.predictedEnd.getTime()&&(t.constraintStart=e.item.predictedEnd))))}}},_handleOffsetsOnStartAndEnd:function(e,t,a){var i,n,r=this._timeAxis,o=+e.item.startOffsetInPixels;return o&&(o>0?i=r.convertXToDate(r.convertDateToX(t)-o):n=r.convertXToDate(Math.max(r.convertDateToX(a),r.convertDateToX(t)-o))),(o=+e.item.endOffsetInPixels)&&(o>0?n=r.convertXToDate(r.convertDateToX(a)+o):i=r.convertXToDate(Math.min(r.convertDateToX(t),r.convertDateToX(a)+o))),{outerStart:i,outerEnd:n}},_determineTimeDataItemExtent:function(e,t,a,i){var n=this;if(t=n._determineTimeRange(e,t,a,i)){t.left=n._timeAxis.convertDateToX(t.start),t.right=n._timeAxis.convertDateToX(t.end),t.outerLeft=n._timeAxis.convertDateToX(t.outerStart),t.outerRight=n._timeAxis.convertDateToX(t.outerEnd),t.top=Number.MAX_VALUE,t.bottom=Number.MIN_VALUE,t.constraintLeft=n._timeAxis.convertDateToX(t.constraintStart),t.constraintRight=n._timeAxis.convertDateToX(t.constraintEnd),t.constraintTop=Number.MAX_VALUE;var r=n.options.constraintSymbolsInMargin?0:n.options.detailedConstraintSymbolsEnabled?n.options.constraintSymbolHeight+6:n.options.constraintSymbolHeight,o=(e.timeDataItem||e).rowDataItem.isDetailingRow?n.options.leafBarTopOffsetAndHeightScaleFactor:n.options.barTopOffsetAndHeightScaleFactor;if(n._determineDescendantTimeDataItems(e.timeDataItem||e).forEach((function(a){if((!i||!1!==a.item.markable)&&n._getActualBarType(a)!==G.None&&n._isTimeDataItemVisible(a)){var s=Math.round((a.item.barTopOffset||0)*o),l=n._getActualBarHeight(a);t.top>s&&(t.top=s),t.bottom<s+l&&(t.bottom=s+l),e.rowDataItem&&!e.rowDataItem.isHidden&&!e.timeDataItem&&Array.isArray(a.item.constraints)&&a.item.constraints.length&&(s-=r,t.constraintTop>s&&(t.constraintTop=s))}})),t.top!==Number.MAX_VALUE&&e.rowDataItem&&!e.rowDataItem.isHidden&&!e.timeDataItem&&Array.isArray(e.item.constraints)&&e.item.constraints.length&&(t.constraintTop=t.top-r),t.top===Number.MAX_VALUE||(e.timeDataItem||e).item.barShape){var s=Math.round(((e.timeDataItem||e).item.barTopOffset||0)*o),l=n._getActualBarHeight(e.timeDataItem||e);t.top=Math.min(s,t.top),t.bottom=Math.max(s+l,t.bottom)}t.constraintTop===Number.MAX_VALUE&&(t.constraintTop=t.top)}return t},_rowItemsRootChanged_ClearAllSelections:function(){this._super(),this._changeTimeItemSelection([])},_rowItemsRootChanged_ClearAdditionalUsages:function(e){var t=e.calendarCacheID;void 0!==t&&this._calendarGridDataCache[t]&&0==--this._calendarGridDataCache[t].usageCount&&delete this._calendarGridDataCache[t],delete e.calendarCacheID,!this&&this._super()},_rowItemsRootChanged_prepareUpdate:function(e,t){var a=this;t.oldTimeDataItemIDsSet={};for(let e of a._timeDataItemsMap.keys())t.oldTimeDataItemIDsSet[e]=!0;e.forEach((function(e){var i=a._rowItemsRootChanged_getRowDataItemWithChildren(e,t);i.timeDataItems&&(i.timeDataItems.length=0),Array.isArray(e.timeItems)&&e.timeItems.forEach((function(e){a._createTimeDataItemAndChildrenRecursively(e,i,t.oldTimeDataItemIDsSet)}))})),!this&&this._super()},_rowItemsRootChanged_update:function(e){var t=this;t.options.summariesEnabled&&e.rowDataItems.forEach((function(e){t._doCalculateSummaryTimeItemsInRow(e,!0,!1)})),Object.keys(e.oldTimeDataItemIDsSet).forEach((function(e){var a=t._timeDataItemsMap.get(e);delete a.parentTimeDataItem,delete a.rowDataItem,a&&!t.options.autoDisposeOfUnusedItems&&t._unusedTimeDataItemsMap.set(e,a),t._timeDataItemsMap.delete(e)})),t.options.rowItemsRoot&&(t.options.updateSuspended?t._calculateSubRowIndexesOfBarsSuspended=!0:t._determineRowDataItems(!0).forEach((function(e){t._calculateSubRowIndexesOfBarsInRow(e)}))),t._removeAllRowDateLines(),t._super(e)},invalidateLink:function(e){var t=this,a=t._getDataItem(e,t._linkDataItemsMap,t._unusedLinkDataItemsMap);a&&a.version++},_linkItemsChanged:function(){var e=this;e._temporaryMarkVisible=void 0;var t={},a={},i={};for(let a of e._linkDataItemsMap.keys()){let n=e._linkDataItemsMap.get(a);t[a]=!0,n.sourceTimeDataItem&&(n.sourceTimeDataItem.linkDataItemsSet.delete(n),i[n.sourceTimeDataItem.id]=!0),n.targetTimeDataItem&&(n.targetTimeDataItem.linkDataItemsSet.delete(n),i[n.targetTimeDataItem.id]=!0)}if(e.options.linkItems){for(var n={},r=0;r<e.options.linkItems.length;r++){var o=e.options.linkItems[r],s=e._getOrCreateDataItem(o,e._linkDataItemsMap,e._unusedLinkDataItemsMap);let d=s.dataItem;var l,c=d.id;d.sourceTimeDataItem=o.sourceTimeItem?e._getDataItem(o.sourceTimeItem,e._timeDataItemsMap):void 0,d.targetTimeDataItem=o.targetTimeItem?e._getDataItem(o.targetTimeItem,e._timeDataItemsMap):void 0,d.sourceTimeDataItem&&(d.sourceTimeDataItem.linkDataItemsSet.add(d),1!==d.sourceTimeDataItem.linkDataItemsSet.size||i[d.sourceTimeDataItem.id]||(n[d.sourceTimeDataItem.id]=d.sourceTimeDataItem),d.sourceTimeDataItem.rowDataItem&&(a[(l=d.sourceTimeDataItem.rowDataItem.visibleRowDataItem).id]=l)),d.targetTimeDataItem&&(d.targetTimeDataItem.linkDataItemsSet.add(d),1!==d.targetTimeDataItem.linkDataItemsSet.size||i[d.targetTimeDataItem.id]||(n[d.targetTimeDataItem.id]=d.targetTimeDataItem),d.targetTimeDataItem.rowDataItem&&(a[(l=d.targetTimeDataItem.rowDataItem.visibleRowDataItem).id]=l)),s.isCreated?e._linkDataItemsMap.set(c,d):(e._unusedLinkDataItemsMap.delete(c),e._linkDataItemsMap.set(c,d),delete t[c])}if(e.calculateInvalidSubRowIndexesOfBarsInRows(),e.options.virtualized)for(let t of Object.values(n))t.elem||(void 0===t.subRowIndex&&e._isTimeDataItemVisible(t)&&e._calculateSubRowIndexesOfBarsInRow(t.rowDataItem.visibleRowDataItem),e._positionBar(null,t,!0))}Object.keys(t).forEach((function(t){var a=e._linkDataItemsMap.get(t);a&&!e.options.autoDisposeOfUnusedItems&&e._unusedLinkDataItemsMap.set(t,a),e._linkDataItemsMap.delete(t)}))},_createTimeDataItemAndChildrenRecursively:function(e,t,a,i){var n=this,r=n._getOrCreateDataItem(e,n._timeDataItemsMap,n._unusedTimeDataItemsMap),o=r.dataItem;if(o.parentTimeDataItem=i,r.isCreated)o.linkDataItemsSet=new Set;else{o.rowDataItem&&o.rowDataItem!==t&&o.rowDataItem.timeDataItems.splice(o.rowDataItem.timeDataItems.indexOf(o),1);var s=o.id;o.version++,n._unusedTimeDataItemsMap.delete(s),n._timeDataItemsMap.set(s,o),a&&delete a[s];for(let e of o.linkDataItemsSet.values())e.version++}return t.timeDataItems||(t.timeDataItems=[]),t.timeDataItems.push(o),o.rowDataItem=t,Array.isArray(e.childTimeItems)&&e.childTimeItems.forEach((function(e){n._createTimeDataItemAndChildrenRecursively(e,t,a,o)})),o},_getActualBarType:function(e,t){t&&(e=e.timeDataItem);var a=e.item.barType;return null==a&&(a=this.options.defaultBarType),null==a&&(a=G.Single),t&&a&N.Duration&&(a=G.StartEnd),a},_getActualBarShape:function(e){var t=e.item.barShape;return null==t&&(t=e.rowDataItem.isDetailingRow?this.options.defaultLeafBarShape:this.options.defaultBarShape),null==t&&(t=H.Rectangle),this._barFactory.checkBarShapeForBarType(t,this._getActualBarType(e)&~N.Summary)||(t=H.None),t},_getActualBarHeight:function(e){var t=this,a=e.item.barHeight;null==a&&(a=e.rowDataItem.isDetailingRow?t.options.defaultLeafBarHeight:t.options.barHeight),null==a&&(a=0);var i=e.rowDataItem.isDetailingRow?t.options.leafBarTopOffsetAndHeightScaleFactor:t.options.barTopOffsetAndHeightScaleFactor;return Math.round(a*i)},_getActualBarInteractions:function(e){var t=this,a=e.item.start?e.rowDataItem.isDetailingRow?t.options.forcedLeafBarInteractions:t.options.forcedBarInteractions:P.None;return null==a&&(a=e.item.barInteractions),null==a&&(a=(e.rowDataItem.isDetailingRow?t.options.defaultLeafBarInteractions:t.options.defaultBarInteractions)||P.None),a&P.DragSmartHorOrVer&&(a|=P.DragHorOrVer),a&P.DragHorOrVer&&(a|=P.DragHor|P.DragVer),a&k},_registerBindingsForTimeItems:function(e){var t=this,a=[],i=function(e){e.childTimeItems.forEach((function(e){t._doRegisterBindingsForTimeItem(e)&&a.push(e),Array.isArray(e.childTimeItems)&&i(e)}))};return Array.isArray(e.childTimeItems)&&i(e),a.length?a:void 0},_doRegisterBindingsForTimeItem:function(e){var t=!1,a=this._getDataItem(e,this._timeDataItemsMap),i=this._getActualBarType(a);return i&N.Start&&(t|=this._registerBindingForItem(e,"start","date")),i&N.End&&(t|=this._registerBindingForItem(e,"end","date")),i&N.Duration&&(t|=this._registerBindingForItem(e,"duration","number")),t},_registerBindingForItem:function(e,t,a){var i=this,n=e[t];if(n&&(n instanceof String||"string"==typeof n)){var r=this._determineBindingTargetAndPropertyName(e,n,a);if(r){var o=r.target[this._BINDING_ID_PROPERTY];o||(o=r.target[this._BINDING_ID_PROPERTY]=this._nextBindingItemID++);var s=this._boundTargetInfosMap[o];s||(s={target:r.target,propertyInfosMap:{}},this._boundTargetInfosMap[o]=s);var l=s.propertyInfosMap[r.propertyName];if(!l){var c=r.target[r.propertyName];if(i.options.convertFunc&&r.withConversion){var d=i._extendCallbackArgs({item:r.item,attr:r.itemAttr,value:c});void 0===(c=i.options.convertFunc.call(i,d))&&(c=d.value)}l={value:c,itemInfos:[]},s.propertyInfosMap[r.propertyName]=l}return l.itemInfos.push({item:e,itemPropertyName:t}),!0}}return!1},_determineBindingTargetAndPropertyName:function(e,t,a){var i,n=!1;"convert:"===t.substring(0,8)&&(t=t.substring(8),n=!0),"."===t[0]&&(t=t.slice(1)),"_super."===t.substring(0,7)&&(t=t.substring(7),e=(i=this._getDataItem(e,this._timeDataItemsMap))?i.parentTimeDataItem.item:(i=this._getDataItem(e,this._rowDataItemsMap))?i.parentRowDataItem.item:void 0);var r=t.split("."),o=r.pop(),s=e;if(r.forEach((function(e){s&&(s=s[e])})),s&&o&&(n||typeof s[o]===a||s[o]instanceof jt[a]))return{target:s,propertyName:o,item:e,itemAttr:t,withConversion:n}},_getBindingPropertyInfosAndValue:function(e,t,a){var i=e[t];if(i&&(i instanceof String||"string"==typeof i)){var n=this._determineBindingTargetAndPropertyName(e,i,a);if(n){var r=n.target[this._BINDING_ID_PROPERTY];if(r){var o=this._boundTargetInfosMap[r];if(o){var s=o.propertyInfosMap[n.propertyName];return{propertyInfos:s,value:s.value}}}if(this.options.convertFunc&&n.withConversion){var l=this._extendCallbackArgs({item:n.item,attr:n.itemAttr,value:n.target[n.propertyName]});void 0===(i=this.options.convertFunc.call(this,l))&&(i=l.value)}else i=n.target[n.propertyName]}}return{propertyInfos:null,value:typeof i===a||i instanceof jt[a]?i:void 0}},_unregisterAllItems:function(){this._boundTargetInfosMap={}},_isBindingActive:function(){return!!Object.keys(this._boundTargetInfosMap).length},_onTimescaleContextMenu:function(e,t){var a=this;a.options.onEventFunc&&(a._setBarInteractionCursor(P.None),a._triggerEvent({sender:"Timescale",eventType:"contextmenu",elem:this,event:e,timePeriodStartDate:t.startDate,timePeriodEndDate:t.endDate})),a.options.preventDefaultOnContextMenuEvents&&(e.stopPropagation(),e.preventDefault())},_createTimeAreaRow:function(e,t,a,i,n,r){var o=this;if(r)a&&(n===E.ScrollToRow||n===E.BeforeRowCollapse||Array.isArray(o.options.linkItems)&&o.options.linkItems.length)&&o._createAllBarsInRow(e,null,i,n,r);else{var s,l=this.convertXToLimitedX(o._timeAxis.timeAreaViewScrollOffset());if(n!==E.WorldView){var c=t.append("g").attr("class",`${Pt} ${Mt}`).attr("transform","translate("+o._actualLayoutColumnLeft(se.TimeArea)+")").attr("clip-path","url(#"+o.NXXXXX.WIDTH_CLIPPATH_ID[se.TimeArea]+this._uniqueID+")");if(!a){let t=c.append("rect").attr("class",`${Mt} ${Rt}`).attr("width",o._timeAxis.timeAreaViewWidth());m.on(t.node(),"pointerdown"+o._EVENT_NAMESPACE,(function(){o._setActiveHorizontalBodyAreaIndex(o._determineBodyAreaIndex(e))}))}s=c.append("g").attr("class",Ht).attr("transform","translate("+-l+")")}a?o._createAllBarsInRow(e,s,i,n):(n!==E.WorldView&&(o._createCalendarGridInRow(e,s),o._updateCalendarGridForRow(e,s,!1)),o._determineCalendarGridForRowInWorldView(e)),r||n===E.WorldView||o._createDateAreasInRow(e,s,a,n),o._determineDateAreasForRowInWorldView(e,a),n!==E.WorldView&&(o.options.timeAreaRowFillFunc&&o.options.timeAreaRowFillFunc.call(o,o._extendCallbackArgs({rowItem:e.item,parentElem:s.node(),isForeground:a,totalHeight:e.totalHeight,oldTotalHeight:null!=e.oldTotalHeight?e.oldTotalHeight:e.totalHeight,mainHeight:o._getRowMainHeight(e),width:o.getCurrentUpperXLimit()-o.getCurrentLowerXLimit()})),a||c.append("line").attr("class",kt+" ngantt-level"+e.level).attr("x2",o._timeAxis.timeAreaViewWidth()).attr("y1",O).attr("y2",O).style("visibility",o.options.timeAreaRowSeparationLinesVisible?null:"hidden"))}},_createCalendarGridInRow:function(e,t,a){this._getCurrentlyDisplayedElementsInRow(e)&Z.CalendarGrid&&(a&&"calendarGridVisible"!==a||!this.options.calendarGridVisible||t.append("path").attr("class",He+" "+Xe),a&&"calendarGridWeekendVisible"!==a||!this.options.calendarGridWeekendVisible||t.append("path").attr("class",He+" "+Ue))},_updateCalendarGridForRow:function(e,t,a,i,n){var r=this,o=function(n){var o=t.select("."+n);if(o.size()){let t=r._determineCalendarGridPathData(e,n===Ue);o.attr("d")!==t&&o.attr("d",t);var s=e.totalHeight-r._getRowAdditionalHeight(e);if(a&&(null!=e.oldTotalHeight||i)){var l=i?0:e.oldTotalHeight-(e.oldAdditionalHeight||0);o.attr("transform","scale(1,"+Math.max(l||0,1e-6)+")"),r._cacheTransitionFunction((function(){o.transition().duration(r.options.transitionDuration).attr("transform","scale(1,"+Math.max(s||0,1e-6)+")")}))}else o.attr("transform","scale(1,"+s+")")}};r._timeAreaViewUpdateNeeded||(n&&n!==Xe||o(Xe),n&&n!==Ue||o(Ue))},_getOrCreateWeekendCalendar:function(){return this._weekendCalendar||(this._weekendCalendar=he.createWeekendCalendar(this._timeAxis.actualStart(),this._timeAxis.actualEnd(),6,0)),this._weekendCalendar},_determineCalendarGridForRowInWorldView:function(){},_determineCalendarGridPathData:function(e,t){var a=this;let n=a._determineCalendarForRowDataItem(e);if(n&&t&&(n=a._getOrCreateWeekendCalendar()),n){var r,o=a._timeAxis.collapseCalendar(),s=a._timeAxis.convertXToDate(a.getCurrentLowerXLimit()),l=a._timeAxis.convertXToDate(a.getCurrentUpperXLimit()),d=n.timeTypeChangeTimes(),m=n[a._OBJECT_ID_PROPERTY]??(n[a._OBJECT_ID_PROPERTY]=a._nextCalendarCacheID++),u=a._calendarGridDataCache[m];if(u||(u=a._calendarGridDataCache[m]={usageCount:0}),e.calendarCacheID!==m&&(void 0!==e.calendarCacheID&&0==--a._calendarGridDataCache[e.calendarCacheID].usageCount&&delete a._calendarGridDataCache[e.calendarCacheID],e.calendarCacheID=m,u.usageCount++),u.dates===d&&u.collapseCalendar===o&&u.projectStartAsTime===s.getTime()&&u.projectEndAsTime===l.getTime())r=u.reducedDates;else{r=[];var h=d.length;for(let e=c.findDateWithinSortedArray(d,s,!1);e<h;e++){let t=d[e];if(r.push(t),t.getTime()>=l)break}if(r.length||r.push(s),r[r.length-1]<l&&r.push(l),o&&r.length>2)for(let e=r.length-1;e>0;e--){var p=new Date(r[e].getTime()-1);if(o.determineTimeType(p)===ue.NonWorkingTime&&r[e-1]>=o.findStartOfCurrentTimeTypeInterval(p)&&(r.splice(--e,2),r.length<=2))break}delete(u=Object.assign(a._calendarGridDataCache[m],{dates:d,collapseCalendar:o,projectStartAsTime:s.getTime(),projectEndAsTime:l.getTime(),reducedDates:r})).pathData}if(u.pathData&&u.baseTimeUnit===a._timeAxis.baseTimeUnit()&&u.baseTimeUnitWidth===a._timeAxis.actualBaseTimeUnitWidth())return u.pathData;var _=n.determineTimeType(r[0])!==ue.WorkingTime,g=i.line().curve(i.curveStepAfter).x((function(e){return a.convertXToLimitedX(a._timeAxis.convertDateToX(e))})).y((function(){return(_=!_)?1:0}))(r);return g=[g,"V1"!==g.substring(g.length-2)?"V1H":"H",g.substring(1,g.indexOf(",")),"Z"].join(""),u.baseTimeUnit=a._timeAxis.baseTimeUnit(),u.baseTimeUnitWidth=a._timeAxis.actualBaseTimeUnitWidth(),u.pathData=g,g}return""},_calculateSubRowIndexesOfBarsInRow:function(e,t){var a=this;e.isHidden||(e.mainHeight=0,e.subRowCount=0,e.subRowDataItems=[],!1!==e.item.barsPaneVisible&&(a._doCalculateSubRowIndexesOfBarsInRow(e,a._getCurrentlyDisplayedElementsInRow(e)),["detailingRowDataItems","childRowDataItems"].forEach((function(i,n){e.isDetailingRow&&n||!(n?t:a.options.detailingRowsVisible)||(n?e.isCollapsed:e.areLeavesCollapsed)||e[i]?.forEach((function(e){a._calculateSubRowIndexesOfBarsInRow(e,t)}))}))))},_doCalculateSubRowIndexesOfBarsInRow:function(e,t){var a=this,i=a._determineAndSortPositionableTimeDataItemsInRow(e,t);if(i.length){a._doCalculateSubRowIndexesOfBars(e.subRowDataItems,i,t);var n=e.item.maximumSubRowHeight;n>0||(n=a.options.defaultMaximumSubRowHeight),null==n&&(n=Number.POSITIVE_INFINITY),e.subRowCount=e.subRowDataItems.length;var r=0;e.subRowDataItems.forEach((function(t,i){i===e.subRowCount-1&&(n=Number.POSITIVE_INFINITY),t.offsetY=r;var o=(t.maximumY===Number.MIN_VALUE?0:t.maximumY)-(t.minimumY===Number.MAX_VALUE?0:t.minimumY);r+=Math.min(o,n)+a.options.subRowDistance}));var o=a.determineActualRowMargins();e.mainHeight=e.subRowCount?o.sum+Math.ceil(r)-a.options.subRowDistance:0}var s=a._getMinimumRowHeight(e);e.mainHeight=Math.max(e.mainHeight,s);var l=e.item.maximumHeight;if(l>0||(l=a.options.defaultMaximumRowHeight),e.mainHeightLimited=l>0&&e.mainHeight>l){var c=(e.mainHeight-l)/2;e.mainHeight=l,e.subRowDataItems.forEach((function(e){e.offsetY-=c}))}},_doCalculateSubRowIndexesOfBars:function(e,t,a,i){var n=this,r=n._timeAxis.actualStart(),o=n._timeAxis.actualEnd();t.forEach((function(t){if(i?n._isTimeDataItemVisible(t)&&0!==t.rowDataItem.item.totalHeight:n._isTimeDataItemVisible(t,!0)){var s=n._determineTimeRange(t);if((s.outerStart>o||s.outerEnd<r)&&(s=void 0),t.item.barType===G.SingleRespectedByOptimization&&s.constraintStart.getTime()===s.constraintEnd.getTime()&&(s.constraintEnd=new Date(s.constraintEnd.getTime()+1e3)),s){let i=!1===t.item.stackingAllowed;var l=null,c=-1;e.some((function(e){return c++,l=e,!(a&Z.Optimized)||i||!e.timeSpans.isTimeSpanAllocated(s.constraintStart,s.constraintEnd)}))||(l={timeSpans:new f(!1),minimumY:Number.MAX_VALUE,maximumY:Number.MIN_VALUE,offsetY:0},e.push(l),c++),i||l.timeSpans.allocateTimeSpan(s.constraintStart,s.constraintEnd,!0),t.subRowIndex=c;var d=n._determineTimeDataItemExtent(t);d&&(l.minimumY>d.constraintTop&&(l.minimumY=d.constraintTop),l.maximumY<d.bottom&&(l.maximumY=d.bottom),n._determineTimeDataItems(t.item.childTimeItems,!0).forEach((function(e){e.subRowIndex=c})))}}}))},_doCalculateSummaryTimeItemsInRow:function(e,t,a){var i=this;(t||e.summariesExistent)&&(e.summariesExistent=!1,Array.isArray(e.item.timeItems)&&e.item.timeItems.forEach((function(t){var n=i._getDataItem(t,i._timeDataItemsMap);n&&i._getActualBarType(n)&N.Summary&&(i._calculateSummaryDates(n,a),e.summariesExistent=!0)})))},_calculateSummaryDates:function(e,t){var a=e.item.start,i=e.item.end;e.item.start=e.item.end=void 0,this._doCalculateSummaryDatesRecursively(e),t&&e.rowDataItem&&(e.item.start!==a||e.item.end!==i)&&this._doInvalidateRow(e.rowDataItem,{barsChangedFlag:!1,childRowsChangedFlag:!1})},_doCalculateSummaryDatesRecursively:function(e,t){var a=this,i=!1;if(t){if(Array.isArray(t.item.timeItems)){var n=a._determineCalendarForRowDataItem(t);t.item.timeItems.forEach((function(t){var r,o,s=a._getDataItem(t,a._timeDataItemsMap);if(s){var l=!1,c=a._getActualBarType(s);switch(c&N.Summary?(i=!0,c&=~N.Summary):(a._registerBindingsForTimeItems(t),l=!0),c){case G.StartEnd:r=a._getBindingPropertyInfosAndValue(t,"start","date").value,o=a._getBindingPropertyInfosAndValue(t,"end","date").value;break;case G.StartDuration:(r=a._getBindingPropertyInfosAndValue(t,"start","date").value)&&(o=he.addWorkingTime(n,r,a._getBindingPropertyInfosAndValue(t,"duration","number").value||0));break;case G.EndDuration:(o=a._getBindingPropertyInfosAndValue(t,"end","date").value)&&(r=he.addWorkingTime(n,o,-a._getBindingPropertyInfosAndValue(t,"duration","number").value||0))}if(r){var d=e.item;(!d.start||d.start>r)&&(d.start=r),(!d.end||d.end<o)&&(d.end=o)}l&&a._unregisterAllItems()}}))}}else if(!(t=e.rowDataItem))return;i||["detailingRowDataItems","childRowDataItems"].forEach((function(i,n){t.isDetailingRow&&n||t[i]?.forEach((function(t){a._doCalculateSummaryDatesRecursively(e,t)}))}))},_determinePositionableTimeDataItemsInRow:function(e,t,a){var i=this,n=[];return t&Z.Bars&&Array.isArray(e.item.timeItems)&&i._determineTimeDataItems(e.item.timeItems,!1).forEach((function(e){i._isTimeDataItemVisible(e)&&n.push(e)})),["detailingRowDataItems","childRowDataItems"].forEach((function(a,r){(r||i.options.leafBarsVisibleOnParentRows)&&t&(r?Z.BarsInHiddenDescendantRows|Z.BarsInLeafRowsInHiddenDescendantRows:Z.BarsInOwnHiddenLeafRows)&&(r?e.isCollapsed:!i.options.detailingRowsVisible||e.areLeavesCollapsed)&&e[a]?.forEach((function(e){i._findTimeDataItemsForCollapsedChildRowsRecursively(e,n,t)}))})),a||(a={}),n.forEach((function(e,t){(a[e.id]=i._determineTimeRange(e)||{})._index=t})),n.filter((function(e){return a[e.id].start}))},_determineAndSortPositionableTimeDataItemsInRow:function(e,t){var a={},i=t&Z.Optimized?this.options.barSortModeForOptimizedDisplayedElements:U.StartAndEnd;return this._determinePositionableTimeDataItemsInRow(e,t,a).sort((function(n,r){var o,s=a[n.id],l=a[r.id];if(i!==U.RowIndexes&&((o=(n.item.sortPriority??0)-(r.item.sortPriority??0))?!1!==n.item.stackingAllowed&&!1!==r.item.stackingAllowed&&t&Z.Optimized&&(o=-o):o=s.outerStart.getTime()-l.outerStart.getTime()),!o){if(i!==U.StartAndEnd){const t=function(a,i,n,r){if(r.push(i.indexOf(n)),a===e)return r;let o=a.parentRowDataItem;return t(o,o.childRowDataItems,a,r)},a=function(e){let a=e.rowDataItem;if(a.isDetailingRow){let e=a.parentRowDataItem,i=e;for(;i.isDetailingRow;)i=i.parentRowDataItem;return t(i,e.detailingRowDataItems,a,[])}return t(a,a.timeDataItems,e,[])};let i=a(n),s=a(r);for(let e=Math.min(i.length,s.length);e>0&&!(o=i.pop()-s.pop());e--);o||(o=i.length-s.length)}o||(o=s.outerEnd.getTime()-l.outerEnd.getTime())}return o||s._index-l._index}))},_createAllBarsInRow:function(e,t,a,n,r){var o=this,s=o._getCurrentlyDisplayedElementsInRow(e);!1===e.item.barsPaneVisible&&(s&=~(Z.Bars|Z.BarsInHiddenDescendantRows|Z.BarsInOwnHiddenLeafRows|Z.BarsInLeafRowsInHiddenDescendantRows));var l,c=o._determineAndSortPositionableTimeDataItemsInRow(e,s);if(o._worldViewDivElem&&(e.worldViewBarCacheMap={}),o._determineTimeDataItems(c.map((function(e){return e.item})),!0).forEach((function(a){if(!a.item.hidden){if(n!==E.WorldView){var s=t;o.options.selectedItemsShownHighlighted&&o._isTimeDataItemSelected(a)&&(s=(l=i.select(o._getOrCreateSpecialRowElem(e,!0,1))).select("."+Ht),a.highlighted=!0)}o._createBar(s,a,n,r)}})),n!==E.WorldView&&s&(Z.Bars|Z.BarsInHiddenDescendantRows|Z.BarsInOwnHiddenLeafRows|Z.BarsInLeafRowsInHiddenDescendantRows)&&!r){var d=[t];l&&d.push(l),d.forEach((function(t){t.selectAll($t).each((function(t){var r=i.select(this),s=r.select("."+$e),l=(n===E.RowExpanded||n===E.RowLeavesExpanded)&&e!==a&&!t.actuallyVisibleInCollapsedRow;if("newX"in t){var c,d="translate("+(o.convertXToLimitedX(t.newX)+0)+","+(t.newY+0)+")",m=d;if(n!==E.Virtualization&&n!==E.TimeAxisChanged&&!o._barDragging.isDropped()&&!t.phantomDataItem){if(l||void 0!==t.oldY&&void 0!==e.oldY){var u=0;if(l||(u=t.oldY+(e.oldY===e.newY?t.oldRowY-e.oldY:0),o._determineBodyAreaIndex(e)!==oe.BodyAtTheTop&&(u-=o._layoutRows[oe.BodyAtTheTop].innerViewExtent()),!1===t.oldRowAtTheTop&&(u+=o._layoutRows[oe.BodyAtTheTop].innerViewExtent())),(l||u||void 0!==t.oldX)&&(n!==E.RowCollapsed&&n!==E.RowLeavesCollapsed||u>0)){var h=o.convertXToLimitedX(void 0!==t.oldX?t.oldX:t.newX);m="translate("+(h+0)+","+(u+0)+")",s.length&&(c="translate("+(o.convertXToLimitedX(t.newX)-o.convertXToLimitedX(h))+")")}}l&&(m+=B)}r.attr("transform",m);var p=t.phantomDataItem;p&&d===m&&o._barDragging.isDropped()&&(p.newY=t.newY+t.rowDataItem.visibleRowDataItem.newY-p.rowDataItem.visibleRowDataItem.newY,o._cacheTransitionFunction((function(){i.selectAll(p.backgroundElem?[p.backgroundElem,p.elem]:[p.elem]).transition().duration(o.options.transitionDuration).attr("transform","translate("+(o.convertXToLimitedX(p.newX)+0)+","+(p.newY+0)+")")}))),d!==m?o._cacheTransitionFunction((function(){if(r.transition().duration(o.options.transitionDuration).attr("transform",d).on("end",(function(){t.oldY=t.newY,t.oldRowY=t.rowDataItem?.visibleRowDataItem.newY,delete t.actuallyVisibleInCollapsedRow})),!p&&!l&&o.options.barSelectionWithFrames&&o.options.barSelectionFramesShownWithHigherZOrder&&t.selectedFrameElem){var e=o._determineSelectionFrameExtent(t);if(e&&(i.select(t.selectedFrameElem).transition().duration(o.options.transitionDuration).attr("transform","translate("+e.xoffset+")").attr("x",e.xplus).attr("y",e.yplus).attr("width",e.wplus),t.selectedFrameMaskElem)){var a=i.select(t.selectedFrameMaskElem);(a=a.transition().duration(o.options.transitionDuration)).select("rect:nth-child(1)").attr("x",e.xplus-Qt).attr("y",e.yplus-Qt).attr("width",e.wplus+200),a.select("rect:nth-child(2)").attr("x",e.x).attr("y",e.y).attr("width",e.w)}}p&&o._barDragging.isDropped()&&(p.newY=t.newY+t.rowDataItem.visibleRowDataItem.newY-p.rowDataItem.visibleRowDataItem.newY,i.selectAll(p.backgroundElem?[p.backgroundElem,p.elem]:[p.elem]).transition().duration(o.options.transitionDuration).attr("transform","translate("+(o.convertXToLimitedX(p.newX)+0)+","+(p.newY+0)+")")),c&&(s.attr("transform",c).transition().duration(o.options.transitionDuration).attr("transform",""),r.select("."+Ze).each((function(){i.select(this).attr("opacity","0").transition().delay(o.options.transitionDuration).duration(0).attr("opacity","1")})))})):(t.oldX=t.newX,t.oldEndX=t.newEndX,t.oldY=t.newY,t.oldRowY=t.rowDataItem.visibleRowDataItem.newY,t.oldRowAtTheTop=o._determineBodyAreaIndex(t.rowDataItem)===oe.BodyAtTheTop)}}))}))}},_sortBarsInRow:function(e){var t=this;if(t._barDragging.isInitiated()&&t._barDragging.isRowOfCoupledTimeItems(e)||!(t._getCurrentlyDisplayedElementsInRow(e)&Z.Optimized)){var a=i.select(e.foregroundRowElem).select("."+Ht),n=i.select(t._getOrCreateSpecialRowElem(e,!1,1)),r=[a];n&&r.push(n),r.forEach((function(e){var a={},n=-1,r=e.selectAll($t),o=r.size()+1;r.each((function(e){if(n++,e.parentTimeDataItem){(r=a[e.parentTimeDataItem.id])||(r=a[e.parentTimeDataItem.id]={rectLeft:Number.MAX_VALUE,rectRight:-Number.MAX_VALUE});var t=e.newX||e.oldX,i=e.newEndX||e.oldEndX||t;r.rectLeft>t&&(r.rectLeft=t),r.rectRight<i&&(r.rectRight=i),a[e.id]={barIndex:n,rectLeft:t,rectRight:i}}else{var r;(r=a[e.id])||(r=a[e.id]={rectLeft:Number.MAX_VALUE,rectRight:-Number.MAX_VALUE}),r.barIndex=o*n}})),e.selectAll("."+Le).each((function(){var e=i.select(this).selectAll($t),n=e[0]||e.nodes();n.sort((function(e,n){var r=i.select(e),s=i.select(n),l=r.datum(),c=s.datum(),d=(l.parentTimeDataItem||l).isCurrentlyDraggedCoupled,m=(c.parentTimeDataItem||c).isCurrentlyDraggedCoupled;if(d!==m)return(d?1:0)-(m?1:0);var u=a[l.id],h=a[c.id],p=u.barIndex,_=h.barIndex;if(l.parentTimeDataItem?(u=a[l.parentTimeDataItem.id],Jt(l.parentTimeDataItem.item.zOrder)||(p+=u.barIndex+1)):Jt(l.item.zOrder)&&(p/=o,e===l.backgroundElem&&(p-=o-.9)),c.parentTimeDataItem?(h=a[c.parentTimeDataItem.id],Jt(c.parentTimeDataItem.item.zOrder)||(_+=h.barIndex+1)):Jt(c.item.zOrder)&&(_/=o,n===c.backgroundElem&&(_-=o-.9)),l.parentTimeDataItem!==c&&c.parentTimeDataItem!==l){let e=(l.item.sortPriority??0)-(c.item.sortPriority??0);if(!e){var g=l.rowDataItem.isDetailingRow?t.options.leafBarTopOffsetAndHeightScaleFactor:t.options.barTopOffsetAndHeightScaleFactor,T=c.rowDataItem.isDetailingRow?t.options.leafBarTopOffsetAndHeightScaleFactor:t.options.barTopOffsetAndHeightScaleFactor;e=Math.round(((l.parentTimeDataItem??l).item.barTopOffset??0)*g)-Math.round(((c.parentTimeDataItem??c).item.barTopOffset??0)*T)}if(e)return e;if(u.rectLeft!==h.rectLeft)return u.rectLeft-h.rectLeft;if(h.rectRight!==u.rectRight)return h.rectRight-u.rectRight}return p-_})),e[0]?e.order():i.selectAll(n).order()}))}))}},_findTimeDataItemsForCollapsedChildRowsRecursively:function(e,t,a){var i=this;let n=i._getCurrentlyDisplayedElementsInRow(e);n&Z.Bars&&Array.isArray(e.item.timeItems)&&0!==e.item.totalHeight&&i._determineTimeDataItems(e.item.timeItems,!1).forEach((function(e){i._isTimeDataItemVisible(e)&&t.push(e)})),n=i._getCollapsedDisplayedElementsForRowDataItem(e),["detailingRowDataItems","childRowDataItems"].forEach((function(r,o){(o||i.options.leafBarsVisibleOnParentRows)&&a&(o?Z.BarsInHiddenDescendantRows|Z.BarsInLeafRowsInHiddenDescendantRows:Z.BarsInLeafRowsInHiddenDescendantRows)&&(o||a&Z.BarsInLeafRowsInHiddenDescendantRows&&n&Z.BarsInOwnHiddenLeafRows)&&e[r]?.forEach((function(e){i._findTimeDataItemsForCollapsedChildRowsRecursively(e,t,a)}))}))},_isTimeDataItemEditable:function(e){var t=e.rowDataItem&&e.rowDataItem.visibleRowDataItem;return!(!t||!this.options.editable)&&(e.parentTimeDataItem?.item.barShape&&(e=e.parentTimeDataItem),this._getActualBarInteractions(e)!==P.None&&(!t.isCollapsed||this.options.timeItemsEditableInCollapsedRows||e.rowDataItem.isDetailingRow||(this.options.timeItemsHaveSameReferenceAsRowItems?t===e.rowDataItem.parentRowDataItem:!(t.childRowDataItems?.length&&this._getCurrentlyDisplayedElementsInRow(t)&Z.BarsInHiddenDescendantRows&&t.detailingRowDataItems?.length&&this._getCurrentlyDisplayedElementsInRow(t)&Z.BarsInLeafRowsInHiddenDescendantRows))))},_isTimeDataItemVisible:function(e,t){var a=e.item;if(a.hidden)return!1;if("function"==typeof a.isDisposed&&a.isDisposed())return!1;var i=e.rowDataItem;if(!i||!this._getDataItemByID(e.id,this._timeDataItemsMap))return!1;var n=i.visibleRowDataItem,r=n.isCollapsed;if(a.hiddenInCollapsedRow&&r)return!1;for(var o=e.parentTimeDataItem;o;){if((a=o.item).hidden||a.hiddenInCollapsedRow&&r)return!1;o=o.parentTimeDataItem}if(!t){if(!i.isHidden)return!!(this._getCurrentlyDisplayedElementsInRow(i)&Z.Bars);if(!i.isDetailingRow)return!!(this._getCollapsedDisplayedElementsForRowDataItem(n)&Z.BarsInHiddenDescendantRows);if(this.options.leafBarsVisibleOnParentRows)return i.parentRowDataItem===n?!!(this._getCurrentlyDisplayedElementsInRow(n)&Z.BarsInOwnHiddenLeafRows):!!(this._getCurrentlyDisplayedElementsInRow(n)&Z.BarsInLeafRowsInHiddenDescendantRows)}return!0},_canTimeDataItemBeVisible:function(e){if(this._isTimeDataItemVisible(e))return!0;if(!e.rowDataItem)return!1;var t=!0,a=e.rowDataItem,i=e.item;if(i.hidden)t=!1;else for(var n=e.parentTimeDataItem;t&&n;)(i=n.item).hidden?t=!1:n=n.parentTimeDataItem;if(t&&!(this._getExpandedDisplayedElementsForRowDataItem(a)&Z.Bars)){t=!1;do{if((a=a.parentRowDataItem)&&this._getCollapsedDisplayedElementsForRowDataItem(a)&Z.BarsInHiddenDescendantRows){t=!0;break}}while(a)}return t},_determineBarLayerByZOrder:function(e,t,a){t=Math.trunc(t);var i=e.datum();i.zOrdersToBarLayersD3Maps||(i.zOrdersToBarLayersD3Maps={}),i.zOrdersToBarLayersD3Maps[a]||(i.zOrdersToBarLayersD3Maps[a]={});var n=i.zOrdersToBarLayersD3Maps[a],r=n[t];if(!r){var o=Object.keys(n).map((function(e){return+e}));o.push(t),o.sort((function(e,t){return e-t}));var s=o.indexOf(t);if((r=s<o.length-1?e.insert("g",(function(){return n[o[s+1]].node()})):e.append("g")).attr("class",Le+" ngantt-z-order-"+t),n[t]=r,i.mainHeightLimited){var l=this._getOrCreateClipPathForRow(0,i.mainHeight);r.attr("clip-path","url(#"+l+")")}}return r},_barEventDispatcherHandlerFunction:function(e,t){var a=this,i=t.srcEvent?t[u.SUB_ELEM_PROPERTY]:t.target;if(!i||!i.classList.contains($e)&&!i.classList.contains(Ze))switch(t.type){case u.TAP_EVENT_NAME:if(a.options.timeItemsSelectable){var n=e.item.selectable;if(null==n?e.rowDataItem.isDetailingRow?a.options.defaultLeafTimeItemSelectable:a.options.defaultTimeItemSelectable:n){for(var r=e;r.parentTimeDataItem;)r=r.parentTimeDataItem;if(null==(n=r.item.selectable)?e.rowDataItem.isDetailingRow?a.options.defaultLeafTimeItemSelectable:a.options.defaultTimeItemSelectable:n){var o,s,l,c,d=a._isCtrlKeyPressed(t,!a._selectedTimeDataItemsMap.size);if(d){if(a._selectedRowDataItemsMap.size||a._selectedLinkDataItemsMap.size)return;var m=(o=Array.from(a._selectedTimeDataItemsMap.values()).map((e=>e.item))).indexOf(r.item);m>=0?o.splice(m,1):(l=o.slice(),o.push(r.item),s=!0)}else t.srcEvent.shiftKey||t.srcEvent.altKey?o=Array.from(a._selectedTimeDataItemsMap.values()).map((e=>e.item)):(a.options.canSelectTimeItemFunc&&!a._selectedTimeDataItemsMap.has(r.id)&&(l=[],s=!0),o=[r.item]);if(a._updateSuspendedForSelectionChanges=!0,s&&a.options.canSelectTimeItemFunc){var h=a._extendCallbackArgs({timeItem:e.item,otherSelectedTimeItems:l,altKey:t.srcEvent.altKey,shiftKey:t.srcEvent.shiftKey,metaKey:d,ctrlKey:d,event:t.srcEvent,hammerEvent:t,canSelect:!0});a.options.canSelectTimeItemFunc.call(a,h),h.canSelect||(c=!0)}!c&&a.options.selectTimeItemFunc&&(h=a._extendCallbackArgs({timeItem:r.item,oldSelectedRowItems:a.selectedRowItems(),oldSelectedItems:Array.from(a._selectedTimeDataItemsMap.values()).map((e=>e.item)),newSelectedItems:o,altKey:t.srcEvent.altKey,shiftKey:t.srcEvent.shiftKey,metaKey:d,ctrlKey:d,event:t.srcEvent,hammerEvent:t,cancel:!1}),a.options.selectTimeItemFunc.call(a,h),h.cancel&&(c=!0)),c||((o=Array.isArray(h.newSelectedItems)?h.newSelectedItems:[]).length&&(a.options.timeItemsHaveSameReferenceAsRowItems||a._changeRowItemSelection([]),a._changeLinkItemSelection([])),o&&a._changeTimeItemSelection(o)),delete a._updateSuspendedForSelectionChanges,c||a.update()}}}a._triggerEvent({sender:e.item,eventType:"tap",elem:e.elem,elemType:j.Bar,event:t.srcEvent,hammerEvent:t});break;case u.DOUBLE_TAP_EVENT_NAME:a._triggerEvent({sender:e.item,eventType:"doubletap",elem:e.elem,elemType:j.Bar,event:t.srcEvent,hammerEvent:t});break;case u.CONTEXTMENU_EVENT_NAME:a.options.onEventFunc&&(a._setBarInteractionCursor(P.None),a._triggerEvent({sender:e.item,eventType:"contextmenu",elem:e.elem,elemType:j.Bar,event:t})),a.options.preventDefaultOnContextMenuEvents&&(t.stopPropagation(),t.preventDefault());break;case u.PAN_EVENT_NAME+"start":a._onBarDragStart(t,e);break;case u.PAN_EVENT_NAME+"move":a._onBarDragMove(t,e);break;case u.PAN_EVENT_NAME+"end":a._onBarDragMove(t,e);case u.PAN_EVENT_NAME+"cancel":a._onBarDragEnd(t);break;case u.PRESS_EVENT_NAME:"touch"===t.pointerType&&a._onBarPress(t,e);break;case u.PRESS_EVENT_NAME+"up":"touch"===t.pointerType&&a._onBarPressUp(t,e)}},__onPointerEnterOrMoveOnBar:function(e,t,a,n,r,o){var s=this;try{let r=o(a,n),u=a.parentTimeDataItem??a;if(["mouse","pen"].includes(e.pointerType)){var l=function(t){s._lastTooltipDataItem===a&&delete s._lastTooltipDataItem,t&&s._getDataItemByID(t.id,s._timeDataItemsMap)||s._triggerEvent({sender:null,eventType:"tooltip",elem:null,event:e})},c=function(){if(r&&(s._onpointerenter_cursor(e,r,Be),r=o(a,n),r&&!s.isInInteraction()&&"pointerenter"===e.type)){s._lastTooltipDataItem=a,s._triggerEvent({sender:a.item,eventType:"tooltip",elem:a.elem,event:e}),s._pointerEnterTimeDataItemsMap||(s._pointerEnterTimeDataItemsMap=new Map);let n=s._pointerEnterTimeDataItemsMap.get(u.id);n||(n=new Set,s._pointerEnterTimeDataItemsMap.set(u.id,n)),n.has(a)||(n.add(a),m.on(t,"pointerleave",`${s._EVENT_NAMESPACE}-tooltip-${a.id}`,(function(e){try{let o=e.relatedTarget&&i.select(e.relatedTarget),c=o?.datum();if(c!==a&&c!==u&&c?.parentTimeDataItem!==u){for(let e of n.values())m.off(t,"pointerleave",`${s._EVENT_NAMESPACE}-tooltip-${e.id}`);s._pointerEnterTimeDataItemsMap.delete(u.id),s._onpointerleave_cursor(r),l(c)}}catch(e){s._handleException(e,"onPointerLeave_bar")}})))}};if("pointerenter"!==e.type||s._pointerEnterTimeDataItemsMap?.has(u.id))null==s._barPointerEnterTimeoutID&&c();else{var d=()=>{null!=s._barPointerEnterTimeoutID&&(window.clearTimeout(s._barPointerEnterTimeoutID),delete s._barPointerEnterTimeoutID)};d(),m.on(t,"pointerleave",`${s._EVENT_NAMESPACE}-ttenter-${a.id}`,(function(e){["mouse","pen"].includes(e.pointerType)&&(d(),m.off(t,"pointerleave",`${s._EVENT_NAMESPACE}-ttenter-${a.id}`),l())})),s._barPointerEnterTimeoutID=window.setTimeout((function(){delete s._barPointerEnterTimeoutID,m.off(t,"pointerleave",`${s._EVENT_NAMESPACE}-ttenter-${a.id}`),r.parentElement&&c()}),100)}}}catch(e){s._handleException(e,r)}},_createBar:function(e,t,a,n){var r=this;let o=!0;if(a===E.WorldView||!n){var s,l;t.phantomType?(l=(s=t).timeDataItem,s.oldVisibleRowDataItem=l.rowDataItem.visibleRowDataItem):l=t;let S=l.rowDataItem.visibleRowDataItem;if(a!==E.WorldView){if(t.elem){let e=t.elem;r._detachTimeDataItem(t,!1),e.remove()}t.version++;var c=Array.isArray(l.item.childTimeItems)&&l.item.childTimeItems.length;if(l){let a=`${u.TAP_EVENT_CLASS_NAME} ${u.DOUBLE_TAP_EVENT_CLASS_NAME} ${u.CONTEXTMENU_EVENT_CLASS_NAME}`;var d=`${c?Ge:Be} ${a}`;d=r._enrichClass(l,d,{elemType:j.Bar});let y=Jt(l.item.zOrder);var h,p,T=c&&null==l.item.zOrder?-1e3:y?0:100*(parseFloat(l.item.zOrder)||0);if(y)if(c&&l.item.barShape){let i=function(e){return"twice"===e?[0,0]:e.match(/\d/g).map((e=>parseInt(e)))}(l.item.zOrder);T=i[0],h=r._determineBarLayerByZOrder(e,T,s?1:l.highlighted?2:0),p=h.append("g").attr("class",`${Ge} ${Ye} ${a}`).datum(t).property(r._ITEM_VERSION_PROPERTY,t.version),t.backgroundElem=p.node(),T=i[1],d+=" "+ze}else T=0;let I=l.parentTimeDataItem;T+=(l.subRowIndex??I?.subRowIndex)||0;var f=r._determineBarLayerByZOrder(e,T,s?1:l.highlighted?2:0);let A=!y&&I&&Jt(I.item.zOrder)&&(s?I.phantomDataItem:I).elem;var D=f.insert("g",(()=>A||null)).attr("class",d).datum(t).property(r._ITEM_VERSION_PROPERTY,t.version);if(t.elem=D.node(),s||(l.selected?r._prependBarSelectedRect(l,D):r._isTimeDataItemSelected(l)&&r._checkHighlightingForTimeDataItem(l,D)),!s&&l.item.marked&&D.append("rect").attr("class",At).attr("rx",r._barFrameRounding).attr("ry",r._barFrameRounding),!c||l.item.barShape){var v=function(){let e=p??D,a=r._isTimeDataItemEditable(l)?u.PRESS_PAN_EVENT_CLASS_NAME:u.PRESS_EVENT_CLASS_NAME;p&&e.classed(a,!0),D.classed(a,!0),e.node()[u.HANDLER_FUNCTION_PROPERTY+Yt+r._uniqueID]=function(e){try{r._barEventDispatcherHandlerFunction(l,e)}catch(e){r._handleException(e,"onEventDispatch_bar")}},!s&&l.phantomDataItem&&!l.phantomDataItem.parentPhantomDataItem&&r._currentDragParams&&r._currentDragParams.elemType===j.Bar&&(!Jt(l.item.zOrder)||T>=0)&&r._eventDispatcher.replacePressOrPanTargetElem(e.node()),r.options.attachEventListenersFunc&&r.options.attachEventListenersFunc.call(r,r._extendCallbackArgs({isForeground:!0,item:e.datum().item,elem:this,elemType:j.Bar}));var n=l.item.respectingCalendar;void 0===n&&(n=r.options.defaultRespectingCalendar),n&&(n=!!(l.item.calendar??r._determineCalendarForRowDataItem(l.rowDataItem)));var o,d,h=r._getActualBarHeight(l),f=r._getActualBarShape(l);if(r._barFactory.createBar(r._extendCallbackArgs({barShapeId:f,barD3:D,barHeight:h,respectingCalendar:n,dataItem:l,rowDataItem:l.rowDataItem.visibleRowDataItem,uniqueID:r._uniqueID,showProgress:!l.parentTimeDataItem?.item.barShape,enrichClassFunc:function(e,t){return r._enrichClass(l,e,t)}})),p&&r._barFactory.createBar(r._extendCallbackArgs({barShapeId:f,barD3:p,barHeight:h,respectingCalendar:n,dataItem:l,rowDataItem:l.rowDataItem.visibleRowDataItem,uniqueID:r._uniqueID,showProgress:!1,enrichClassFunc:function(e){return e},nwtColorVisible:!0})),r.options.createBarFunc&&(d=r._extendCallbackArgs({timeItem:l.item,elem:D.node(),backgroundElem:t.backgroundElem,isBarInInteraction:!s&&!!l.phantomDataItem,isPhantom:!!s,caption:void 0}),void 0===(o=r.options.createBarFunc.call(r,d))&&(o=d.caption),l.worldViewFillColor=d.worldViewFillColor,l.worldViewBorderColor=d.worldViewBorderColor),o){var v,y=2+((l.item.leftCaptionOffset||void 0)+2||0);if("string"==typeof o){let e=D.select("."+Oe);(v=e.size()?D.insert("text",(function(){return e.node()})):D.append("text")).attr("class",Ne).attr("x",y).attr("y",h/2).attr("dy",".3em").text(o)}else if(o instanceof Element)o instanceof SVGTextElement&&(v=i.select(o).attr("class",Ne).attr("x",y).attr("dy",".3em"));else if(void 0!==o.text){if(void 0!==o.elem)v=i.select(o.elem);else{let e=D.select("."+Oe);v=e.size()?D.insert("text",(function(){return e.node()})):D.append("text")}v.classed(Ne,!0).attr("x",y).attr("y",h/2).attr("dy",".3em"),o.width?(v.attr("data-text",o.text).attr("data-inline-width",o.width),null!=o.wrapMode&&v.attr("y",".7em").attr("data-wrap-mode",o.wrapMode),w.wrapSVGText(v),v.attr("data-text",null)):v.text(o.text)}v&&d&&d.finalizeFunc&&d.finalizeFunc.call(r,r._extendCallbackArgs({elem:v.node()}))}if(!s&&!_.isIOS&&!r.options.isForExport&&l.item.barShape){let e=function(e,t){if(e.backgroundElem??e.elem){let a=i.select(e.backgroundElem??e.elem),n=t||a.classed(Oe)?a:a.select("."+Oe);return(n.size()?n:i.select(e.elem)).select("."+Fe).node()||e.elem}};if(c){let t=i.select(l.elem).select(`.${Oe}`);if(t.size()){let a=t.node(),n=e(l,c);a!==n&&(i.select(n).attr(g.POINTER_ENTER_ATTR_NAME,"1").attr(g.POINTER_LEAVE_ATTR_NAME,"1"),m.on(n,"pointerenter pointermove",r._EVENT_NAMESPACE,(function(t){r.__onPointerEnterOrMoveOnBar(t,a,l,c,"onPointerEnter_compoundbar",e)})),l.elem[u.HANDLER_FUNCTION_PROPERTY+Yt+r._uniqueID]=function(e){try{r._barEventDispatcherHandlerFunction(l,e)}catch(e){r._handleException(e,"onEventDispatch_compoundbar")}})}}let t=e(l,c);i.select(t).attr(g.POINTER_ENTER_ATTR_NAME,"1").attr(g.POINTER_LEAVE_ATTR_NAME,"1"),m.on(t,"pointerenter pointermove",r._EVENT_NAMESPACE,(function(a){r.__onPointerEnterOrMoveOnBar(a,t,l,c,"onPointerEnter_bar",e)}))}s&&D.append("path").attr("class",Ve)};if(!s&&r.options.asynchronousRendering){let e=r._determineTimeDataItemExtent(l),t=r._timeAxis,a=t.timeAreaViewScrollOffset();e&&(e.right>a&&e.left<a+t.timeAreaViewWidth()?v():(r._createOrRemoveRowPartsAsynchronously("b",S,(function(){let e=l.rowDataItem?.visibleRowDataItem;e?.foregroundRowElem&&(v(),r._positionBarFully(D,e,l,n,void 0,!0))})),o=!1))}else v()}let b=l.item.opacity;if(b<1){let e=D.select("."+Oe);e.size()||(e=D),b>=0?e.style("fill",`rgba(255,255,255,${1-b})`):e.classed(this.NXXXXX.LESSENED_CLASS,!0)}}}else{var y;r.options.createBarFunc&&!s&&(y=r._extendCallbackArgs({timeItem:l.item,caption:void 0}),r.options.createBarFunc.call(r,y),l.worldViewFillColor=y.worldViewFillColor,l.worldViewBorderColor=y.worldViewBorderColor)}return o&&(D?r._positionBarFully(D,S,t,a===E.WorldView?3:n,void 0,!0):r._positionBar(D,t,a===E.WorldView?3:n,void 0,!0)),D}return r._positionBar(null,t,n),null},_checkBarVisibilityForLimitedXCoords:function(e,t){var a=this;if(a.options.barVisibilityCheckEnabled){var i=t.newX,n=t.newEndX;t.outerStart&&(i=Math.min(i,a._timeAxis.convertDateToX(t.outerStart)),n=Math.max(n,a._timeAxis.convertDateToX(t.outerEnd)));var r=a._isXOutsideLimits(i);r&&r===a._isXOutsideLimits(n)?"unlimitedVisibility"in t||(t.unlimitedVisibility=e.attr("visibility"),e.attr("visibility","hidden"),t.isHiddenByLimits=!0):"unlimitedVisibility"in t&&(e.attr("visibility",t.unlimitedVisibility),delete t.unlimitedVisibility,delete t.isHiddenByLimits)}},_calculateProgress:function(e,t,a,i){var n;return i?i instanceof Date?i:i>=100?a:i<0?t:he.hasWorkingTime(e,a,t)&&this.options.progressBarWidthCalculationMode===ee.ConsiderWorkingTimesOnly?(n=he.calculateWorkingTime(e,a,t)*i/100,he.addWorkingTime(e,t,n)):(n=(a.getTime()-t.getTime())*i/100,new Date(t.getTime()+n)):t},_positionBar:function(e,t,a,n,r){var o,s,l=this;if(!l._timeAreaViewUpdateNeeded&&(s=t.phantomType?(o=t).timeDataItem:t,2===a||(a?l._isTimeDataItemVisible(s):t.elem))){var c,d,m=l._timeAxis,u=Array.isArray(s.item.childTimeItems)&&s.item.childTimeItems.length;u&&t.backgroundElem&&(d=i.select(t.backgroundElem));var h=null,p=null;if(!a)if(o)h=l._determineTimeDataItemExtent(o);else{if(s.selectedFrameElem){var _=l._determineSelectionFrameExtent(s);_&&l._positionSelectionFrame(s,i.select(s.selectedFrameElem),s.selectedFrameMaskElem&&i.select(s.selectedFrameMaskElem),_)}s.item.marked&&(p=l._determineTimeDataItemExtent(s,void 0,void 0,!0))&&(h=l._determineTimeDataItemExtent(s),e.select("."+At).attr("transform","translate("+(l.convertXToLimitedX(h.outerLeft)-l.convertXToLimitedX(h.left))+")").attr("x",-l._barFrameDistance+l.convertXToLimitedX(p.left)-l.convertXToLimitedX(h.left)).attr("y",-l._barFrameDistance+p.top-h.top).attr("width",Math.max(l.convertXToLimitedX(p.outerRight)-l.convertXToLimitedX(p.outerLeft),0)+2*l._barFrameDistance).attr("height",p.bottom-p.top+2*l._barFrameDistance))}var g=null!==h?h:l._determineTimeRange(t);if(g){var T,f;if(h)T=h.left,f=h.right;else{var D=t.item.calcStartEndX(m.convertDateToX(g.start),m.convertDateToX(g.end));T=D.startX,f=D.endX}var v=Math.max(l.convertXToLimitedX(f)-l.convertXToLimitedX(T),0),y=l._barDragging.isActive()&&!l._barDragging.hasCoupledTimeItems(),w=y&&l._barDragging.getPointerX()-T||0,S=y&&l._barDragging.getPointerDateTime()||void 0,I=l._getActualBarShape(s);t.newX=T,t.newEndX=f;var A=s.rowDataItem.visibleRowDataItem.subRowDataItems[s.subRowIndex],b=s.rowDataItem.isDetailingRow?l.options.leafBarTopOffsetAndHeightScaleFactor:l.options.barTopOffsetAndHeightScaleFactor,E=Math.round((s.item.barTopOffset||0)*b);if(t.newY=l.determineActualRowMargins().top+(A?A.offsetY:0)+E-(A?A.minimumY:0),t.phantomDataItem&&(t.phantomDataItem.newY=s.newY+s.rowDataItem.visibleRowDataItem.newY-t.phantomDataItem.rowDataItem.visibleRowDataItem.newY),t.phantomDataItem&&t.phantomDataItem.frameD3&&l._barDragging.isDropped()){null===p&&(p=l._determineTimeDataItemExtent(s,void 0,void 0,!0)),t.phantomDataItem.frameStart=p.start,t.phantomDataItem.frameEnd=p.end;var R=t.phantomDataItem.newY;t.phantomDataItem.frameD3.transition().duration(l.options.transitionDuration).attr("transform","translate("+(l.convertXToLimitedX(l._timeAxis.convertDateToX(t.phantomDataItem.frameStart))+0)+","+(R+0)+")").select("."+Me).attr("width",l.convertXToLimitedX(l._timeAxis.convertDateToX(t.phantomDataItem.frameEnd))-l.convertXToLimitedX(l._timeAxis.convertDateToX(t.phantomDataItem.frameStart))+2*l._phantomFrameDistance)}if(3!==a&&r&&!o&&l._checkBarVisibilityForLimitedXCoords(e,s),!u||s.item.barShape){var C=3!==a&&s.item.respectingCalendar;if(void 0===C&&(C=l.options.defaultRespectingCalendar),a){if(3===a){let e=l._extendCallbackArgs({barShapeId:I,barHeight:l._getActualBarHeight(s),barCornerWidth:l.options.barCornerWidth,worldViewBarWidth:f-T,considerPhantomStart:l._barDragging.isActive()&&!l._barDragging.isDropped(),dataItem:s,rowDataItem:s.rowDataItem,timeRange:g,calculateProgressFunc:null,worldViewVisible:!0,uniqueID:l._uniqueID});this._barFactory.positionBar(e),l.options.positionBarFunc&&(Z=l._extendCallbackArgs({timeItem:s.item,width:f-T,isPhantom:!!o,start:g.start,duration:he.calculateWorkingTime(V,g.end,g.start),end:g.end,progress:c,worldViewVisible:!0}),l.options.positionBarFunc.call(l,Z)),l._worldViewDivElem&&l._putBarIntoWorldViewCache(s,Z&&Z.worldViewPathData||e.worldViewPathData)}}else{var x=m.isDateAfterEnd(g.constraintStart)||m.isDateBeforeStart(g.constraintEnd);if(!s.isHiddenByLimits||l._worldViewDivElem){if(!s.isHiddenByLimits){if(!x){var B=m.collapseCalendar();B&&l._getActualBarType(s)!==G.Single&&B.determineTimeType(g.start)!==ue.WorkingTime&&!he.calculateWorkingTime(B,g.end,g.start)&&(x=!0)}e.attr("visibility",x?"hidden":null)}if(!x||l._worldViewDivElem){let t=Math.max(1,v);e.selectAll("."+We).attr("width",t),d?.selectAll("."+We).attr("width",t);var M=l._getActualBarHeight(s),V=C?s.item.calendar??l._determineCalendarForRowDataItem(s.rowDataItem):void 0,F=C&&o&&n&(P.DragVer|W.CurrentlySmartOverride)?s.item.calendar??l._determineCalendarForRowDataItem(o.rowDataItem):V,k=x?void 0:V&&o&&l._barDragging.isInitiated()&&n&P.DragLeftSide,N=x?void 0:k&&w&&g.start.getTime()>S.getTime(),X=x?void 0:V&&o&&l._barDragging.isInitiated()&&n&P.DragRightSide,U=x?void 0:X&&w!==v&&g.end.getTime()<S.getTime();let u=l._extendCallbackArgs({barShapeId:I,barD3:x?void 0:e,barHeight:M,barCornerWidth:l.options.barCornerWidth,width:v,worldViewBarWidth:f-T,pointerX:w,considerPhantomStart:l._barDragging.isActive()&&!l._barDragging.isDropped(),calendar:F,dataItem:s,rowDataItem:s.rowDataItem,timeAxis:l._timeAxis,timeRange:g,draggingLeftSide:k,draggingRightSide:X,openOnLeftSide:N,openOnRightSide:U,calculateProgressFunc:s.parentTimeDataItem?.item.barShape?null:function(){return l._calculateProgress(V,g.start,g.end,s.item.progress)},convertXToLimitedX:function(e){return l.convertXToLimitedX(e)},worldViewVisible:!!l._worldViewDivElem,uniqueID:l._uniqueID});if(this._barFactory.positionBar(u),!x&&(d&&this._barFactory.positionBar(Object.assign({},u,{barD3:d,calculateProgressFunc:null,nwtColorVisible:!0,worldViewVisible:!1})),I===H.Custom)){var Y=m.convertDateToX(g.start),z=l.determineActualRowMargins().top+M/2;e.attr("transform","translate("+(l.convertXToLimitedX(Y)+L)+","+(z+O)+")")}if(l._worldViewDivElem&&l._putBarIntoWorldViewCache(s,u.worldViewPathData),!x){var $=l._getActualBarType(s)>G.Single;e.selectAll("."+Ne).each((function(){var e=i.select(this);if(e.node()&&!e.attr("data-text")&&$&&Te.isTextClippingAllowed(I)){if(s.item.clipEndAtNextItemStart&&void 0!==s.subRowIndex){var t=s.rowDataItem.visibleRowDataItem.subRowDataItems[s.subRowIndex];if(t.timeSpans&&!t.timeSpans.getValueAtDate(g.end)){var a=t.timeSpans.determineNextDateWithValue(g.end);v=a?Math.max(l.convertXToLimitedX(m.convertDateToX(a.date))-l.convertXToLimitedX(T),0):-1}}v>=0?l.setClipPathAttrOnElemD3WithRefCount(e,l.getOrCreateClipPathForRange(0,v)):l.setClipPathAttrOnElemD3WithRefCount(e)}}))}var Z;if(l.options.positionBarFunc&&(Z=l._extendCallbackArgs({timeItem:s.item,elem:x?void 0:e.node(),width:f-T,isPhantom:!!o,pointerX:!x&&l._barDragging.isInitiated()?l._barDragging.getPointerX():void 0,calendar:V,start:g.start,duration:he.calculateWorkingTime(V,g.end,g.start),end:g.end,progress:c}),!x&&d&&(Z.backgroundElem=d.node()),l.options.positionBarFunc.call(l,Z)),l._worldViewDivElem&&l._putBarIntoWorldViewCache(s,Z&&Z.worldViewPathData||u.worldViewPathData),!x&&!o&&s.phantomDataItem){var j=s.phantomDataItem;j.start=l._getBindingPropertyInfosAndValue(s.item,"start","date").value,j.end=l._getBindingPropertyInfosAndValue(s.item,"end","date").value,l._positionBar(i.select(j.elem),j,a,n,r)}}}}}}}},_putBarIntoWorldViewCache:function(e,t){var a=this;if(a._worldViewDivElem&&t){var i=e.rowDataItem.visibleRowDataItem,n=a._getTopOfRowDataItemForWorldView(i),r=a._timeAxis.actualTimeAreaWidth();t=t.map((function(t){return{x:Math.min(Math.max(t.x+e.newX,0),r),y:t.y}}));var o={x:a.actualTableWidth(),xPx:1,y:n.top+e.newY,yPx:n.topPx};null==e.worldViewFillColor||["none","transparent"].includes(e.worldViewFillColor)||(i.worldViewBarCacheMap||(i.worldViewBarCacheMap={}),i.worldViewBarCacheMap["F"+e.id]={method:"fillPath",args:[S.Content,{fillStyle:e.worldViewFillColor},t,o]}),null==e.worldViewBorderColor||["none","transparent"].includes(e.worldViewBorderColor)||(i.worldViewBarCacheMap||(i.worldViewBarCacheMap={}),i.worldViewBarCacheMap["S"+e.id]={method:"drawPath",args:[S.Content,{strokeStyle:e.worldViewBorderColor},t,o]}),e.worldViewRowDataItem!==i&&(e.worldViewRowDataItem&&e.worldViewRowDataItem.worldViewBarCacheMap&&(delete e.worldViewRowDataItem.worldViewBarCacheMap["F"+e.id],delete e.worldViewRowDataItem.worldViewBarCacheMap["S"+e.id]),e.worldViewRowDataItem=i)}},_positionBarFully:function(e,t,a,n,r,o,s){var l=this;if(!l._timeAreaViewUpdateNeeded&&(l._positionBar(e,a,n,r,o),"newX"in a)){e.interrupt(),e.transition().each((function(){i.select(this).interrupt()})),null==s&&(s=a.newY);var c="translate("+(l.convertXToLimitedX(a.newX)+0)+","+(s+0)+")";e.attr("transform")!==c&&(e.attr("transform",c),a.backgroundElem&&i.select(a.backgroundElem).attr("transform",c),"phantomType"in a||(a.oldX=a.newX,a.oldEndX=a.newEndX,a.oldY=a.newY,t&&(a.oldRowY=t.newY,a.oldRowAtTheTop=l._determineBodyAreaIndex(t)===oe.BodyAtTheTop)))}},recheckBarInteractions:function(e){var t=this,a=t._getDataItem(e,t._timeDataItemsMap);a&&a.elem&&t._pointerEnterCursorElems.length&&t._pointerEnterCursorElems.some((e=>{if(a.elem===e||a.elem===e.parentNode)return delete t._lastBarInteractionValues,t._onpointermove_cursor(t._lastPointerMoveEvent,e,Be),!0}))},_onpointermove_cursor:function(e,t,a){var n=this;if(n._lastPointerMoveEvent=e,!n._currentPanParams&&a===Be){var r=i.select(t),o=r.datum();if(o&&!o.timeDataItem){o.parentTimeDataItem?.item.barShape&&(t=(o=o.parentTimeDataItem).elem);var s=n._pointToSVGRelative(t,e.pageX,e.pageY),l=n._determineBarInteraction(r,n._getActualBarInteractions(o),s,e);n._setBarInteractionCursor(l)}}},_onpointerenter_cursor:function(e,t,a){var n=this,r=i.select(t).datum();if(!n.isInInteraction()){if(n._pointerEnterCursorElems.indexOf(t)<0){a===Be&&n._pointerEnterCursorElems.slice().forEach((function(e){let t=i.select(e).datum();t&&(t.parentTimeDataItem&&(t.parentTimeDataItem===r?.parentTimeDataItem||t.parentTimeDataItem===r)||t===r.parentTimeDataItem)||n._onpointerleave_cursor(e)})),n._pointerEnterCursorElems.push(t),n._pointerEnterCursorClassNames.push(a);var o=r?.id||"";m.on(t,"pointermove",n._EVENT_NAMESPACE+"_"+o+"-cursor",(function(e){try{n.isInInteraction()||n._onpointermove_cursor(e,t,a)}catch(e){n._handleException(e,"onPointerMove_cursor")}})).on(t,"pointerleave",n._EVENT_NAMESPACE+"_"+o+"-cursor",(function(e){try{if(!n.isInInteraction()){if(e.relatedTarget){let t=i.select(e.relatedTarget).datum();if(t&&(t.parentTimeDataItem&&(t.parentTimeDataItem===r?.parentTimeDataItem||t.parentTimeDataItem===r)||t===r?.parentTimeDataItem))return}n._onpointerleave_cursor(t,o)}}catch(e){n._handleException(e,"onPointerLeave_cursor")}}))}n._onpointermove_cursor(e,t,a)}},_onpointerleave_cursor:function(e,t){var a=this;let n=i.select(e).datum();null==t&&(t=n?.id),m.off(e,"pointermove pointerleave",a._EVENT_NAMESPACE+"_"+t+"-cursor");var r=a._pointerEnterCursorElems.indexOf(e);r>=0&&(a._pointerEnterCursorElems.splice(r,1),a._pointerEnterCursorClassNames.splice(r,1)),n&&a._pointerEnterCursorElems.slice().every((function(e){let t=i.select(e).datum();return!t||(!t.parentTimeDataItem||t.parentTimeDataItem!==n.parentTimeDataItem&&t.parentTimeDataItem!==n)&&t!==n.parentTimeDataItem||(a._onpointerleave_cursor(e),!1)})),a.isInInteraction()||a._pointerEnterCursorElems.length||(a._setBarInteractionCursor(P.None),a._lastBarInteractionValues&&(a._lastBarInteractionValues.outOfBar=!0))},_shouldDragCompoundBar:function(e){var t=this.options.alwaysDragCompoundBar;return!t&&e&&((e.srcEvent?e.srcEvent:e)._shiftKey||e.pointers&&2===e.pointers.length)&&(t=!0),t},_determineBarInteraction:function(e,t,a,i,n){var r=this;if(!this.options.editable)return P.None;var o=i.srcEvent?i[u.SUB_ELEM_PROPERTY]:i.target;if(o&&(o.classList.contains($e)||o.classList.contains(Ze)))return P.None;var s=e.datum();t&P.DragHorOrVer&&(t|=P.DragHor|P.DragVer);var l=!1;s.parentTimeDataItem&&(s.parentTimeDataItem.item.barShape||r._shouldDragCompoundBar(i)||t===P.None)&&(s=s.parentTimeDataItem,t=r._getActualBarInteractions(s),l=!0);var c=r._isTimeDataItemEditable(s),d=t;if(c){if(d&(P.DragHor|P.DragLeftSide|P.DragRightSide)){var m=s.rowDataItem;m.visibleRowDataItem.isCollapsed&&!r.options.timeItemsEditableInCollapsedRows&&(r.options.timeItemsHaveSameReferenceAsRowItems&&(m=m.parentRowDataItem),m.visibleRowDataItem!==m&&(d&=~(P.DragHor|P.DragHorOrVer|P.DragLeftSide|P.DragRightSide)))}}else d=P.None;if(!r._lastBarInteractionValues||!n&&r._lastBarInteractionValues.outOfBar||r._lastBarInteractionValues.timeItem!==s.item||r._lastBarInteractionValues.determinedBarInteractions!==d)if(r._lastBarInteractionValues={timeItem:s.item,possibleBarInteractions:t,determinedBarInteractions:d,finalBarInteractions:d,outOfBar:!1},r.options.checkPossibleInteractionsFunc){var h=r._extendCallbackArgs({item:s.item,elemType:j.Bar,elem:s.elem,event:i.center?i.srcEvent:i,hammerEvent:i.center?i:void 0,point:a,startX:s.oldX,endX:s.oldEndX,isEditable:c,isInCollapsedRow:s.rowDataItem.visibleRowDataItem.isCollapsed,possibleInteractions:t,interactions:d,dragCompound:l||r._shouldDragCompoundBar(i)});r.options.checkPossibleInteractionsFunc(h),r._lastBarInteractionValues.finalBarInteractions=null!=r.options.forcedBarInteractions?s.rowDataItem.isDetailingRow?r.options.forcedLeafBarInteractions:r.options.forcedBarInteractions:h.interactions,r._lastBarInteractionValues.finalBarInteractions!==P.None&&h.dragCompound&&(r._lastBarInteractionValues.finalBarInteractions|=W.Compound)}else r._lastBarInteractionValues.finalBarInteractions!==P.None&&(l||r._shouldDragCompoundBar(i))&&(r._lastBarInteractionValues.finalBarInteractions|=W.Compound,l&&!r._shouldDragCompoundBar(i)||(r._lastBarInteractionValues.finalBarInteractions&=~(P.DragLeftSide|P.DragRightSide)));var p=r._lastBarInteractionValues.finalBarInteractions;if(r._getActualBarType(s)&(N.End|N.Duration)||(p&=~(P.DragLeftSide|P.DragRightSide)),p&P.DragRightSide){var _=r.convertXToLimitedX(void 0!==s.newX?s.newX:s.oldX),g=r.convertXToLimitedX(void 0!==s.newEndX?s.newEndX:s.oldEndX);if(Math.abs(a.x)>g-_-r.options.barDragAreaExtent&&(!(p&(P.DragHor|P.DragVer|P.DragHorOrVer))||g-_>r.options.barDragAreaExtent))return P.DragRightSide}return p&P.DragLeftSide&&(_=r.convertXToLimitedX(void 0!==s.newX?s.newX:s.oldX),g=r.convertXToLimitedX(void 0!==s.newEndX?s.newEndX:s.oldEndX),Math.abs(a.x)<r.options.barDragAreaExtent&&(!(p&(P.DragHor|P.DragVer|P.DragHorOrVer))||g-_>(p&P.DragLeftSide?2.5*r.options.barDragAreaExtent:r.options.barDragAreaExtent)))?P.DragLeftSide:p&~(P.DragLeftSide|P.DragRightSide)&k},determineActualTimeResolutionInSeconds:function(){var e=this,t=e.options.horizontalDraggingUnit,a=e.options.horizontalDraggingUnitsPerStep;return null!=t&&null!=a||(t=e.options.timeResolutionUnit,a=e.options.timeResolutionUnitsPerStep),fe.timeUnitToSeconds(t)*(a||1)},_convertXToDateInActualTimeResolution:function(e){var t=this,a=t.determineActualTimeResolutionInSeconds(),i=t._timeAxis.convertXToDate(e,!1,!0).getTime(),n=i-i%a;if((n!==i?t._timeAxis.convertDateToX(new Date(n)):e)!==e){var r=n+a;i=t._timeAxis.convertDateToX(new Date(r))>e?n:r}else i=n;return new Date(i)},_setBarInteractionCursor:function(e){var t=this,a="";switch(t.options.isContextMenuActive&&(e=P.None),e&W._AllSupportedFlags&~(W.Compound|W.CurrentlySmartOverride)){case P.DragHor:a="ew-resize";break;case P.DragLeftSide:case P.DragRightSide:a="col-resize";break;case P.DragVer:a="ns-resize";break;case P.DragHorOrVer:case P.DragHor|P.DragVer:case P.DragHor|P.DragVer|P.DragHorOrVer:case P.DragHor|W.DragHorOrVerOverride:case P.DragVer|W.DragHorOrVerOverride:a="move"}t._barDragging.isInitiated()&&t._barDragging.setOption("interactionCursor",a),l.setCursor(t._element,a)},_onBarPress:function(e,t){var a=this,n=!0;if(!a._barDragging.isInitiated()){t.parentTimeDataItem?.item.barShape&&(t=t.parentTimeDataItem);var r=a._pointToSVGRelative(t.elem,e.center.x,e.center.y),o=a._determineBarInteraction(i.select(t.elem),a._getActualBarInteractions(t),r,e,!0);try{o!==P.None&&a._barDragging.initiate(e,t,!1)&&(a._touchScrollingEnabled=!1,n=!1)}catch(e){throw a._eventDispatcher.stop(),e}}n&&["mouse","pen"].includes(e.pointerType)&&(e[u.CANCEL_PROPERTY]=!0)},_onBarPressUp:function(e,t){var a=this,i=a._barDragging.isActive(),n=!i;if(a._barDragging.isInitiated())try{a._barDragging.terminate(e,!i)}catch(e){throw a._eventDispatcher.stop(),e}n&&"touch"===e.pointerType&&a.options.onEventFunc&&(a._setBarInteractionCursor(P.None),a._triggerEvent({sender:t.item,eventType:"contextmenu",elem:t.elem,elemType:j.Bar,event:e.srcEvent,hammerEvent:e}))},_onBarDragStart:function(e,t){var a=this,n=!0;if(a._barDragging.isInitiated())n=!1;else if("mouse"===e.pointerType){t.parentTimeDataItem?.item.barShape&&(t=t.parentTimeDataItem);var r=a._pointToSVGRelative(t.elem,e.center.x,e.center.y),o=a._determineBarInteraction(i.select(t.elem),a._getActualBarInteractions(t),r,e,!0);try{o!==P.None&&a._barDragging.initiate(e,t,!0)&&(n=!1)}catch(e){throw a._eventDispatcher.stop(),e}}n&&(e[u.CANCEL_PROPERTY]=!0)},_onBarDragMove:function(e,t,a){var i=this;if(i._barDragging.isInitiated()){t?.parentTimeDataItem?.item.barShape&&(t=t.parentTimeDataItem);try{i._barDragging.handleDrag(e,t,a)}catch(e){throw i._eventDispatcher.stop(),e}}},_onBarDragEnd:function(e){try{this._barDragging.terminate(e,e.type.indexOf("cancel")>=0)}catch(e){throw this._eventDispatcher.stop(),e}},_triggerBarDragStartCallback:function(e){var t=this,a=t._getDataItem(e.sender,t._timeDataItemsMap),i=function(){var i=t._determineSuperTimeDataItem(a);e.coupledItems=t.selectedTimeItems().filter((function(e){return e!==i.item})).map((function(e){for(var a=t._getDataItem(e,t._timeDataItemsMap),i=t._determineSuperTimeDataItem(a),n=t._determineTimeDataItems([i.item],!0);a=n.pop();)if(t._getActualBarInteractions(a))return a.item})).filter((function(e){return e}))};(a.rowDataItem.isDetailingRow?t.options.forcedLeafBarInteractions:t.options.forcedBarInteractions)===P.None?e.cancel=!0:e.interaction&(P.DragLeftSide|P.DragRightSide)||!t.options.automaticDraggingOfSelectedTimeItems||i(),t.options.dragStartFunc&&(t.options.dragStartFunc(t._extendCallbackArgs(e)),e.cancel||e.interaction&(P.DragLeftSide|P.DragRightSide)||!t.options.automaticDraggingOfSelectedTimeItems?delete e.coupledItems:i())},_findRoundedTargetDateTime:function(e,t,a,i){var n=this,r=t,o=n.determineActualTimeResolutionInSeconds();if(t.getTime()!==a.getTime())if(null!=n.options.horizontalDraggingUnitsPerStep&&o<86400&&o>1&&(r=c.roundDateTimeWithExactStepping(r,n.options.horizontalDraggingUnit,n.options.horizontalDraggingUnitsPerStep)),86400===o&&0===n.options.horizontalDraggingUnitsPerStep){let t=new Date(a);t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),a.getHours()>=12&&t.setDate(t.getDate()+1),r=he.addWorkingTime(e,t,0);let i=new Date(t);if(a<r)do{i.setDate(i.getDate()-1)}while(!he.calculateWorkingTime(e,i,a));else i.setDate(i.getDate()+1);i=he.addWorkingTime(e,i,0),Math.abs(r-a)>Math.abs(i-a)&&(r=i)}else{var s=r<a?1:-1,l=1e3*s,d=n.options.horizontalDraggingUnit,m=n.options.horizontalDraggingUnitsPerStep;null!=d&&null!=m||(d=n.options.timeResolutionUnit,m=n.options.timeResolutionUnitsPerStep),m*=s,d===ne.Quarters&&(m*=3);let c=function(t,a,n){var r=new Date(t);switch(d){case ne.Quarters:case ne.Months:r.setMonth(r.getMonth()+a*m);break;case ne.Years:r.setFullYear(r.getFullYear()+a*m);break;case ne.Days:case ne.Weeks:r=he.addWorkingTime(null,t,a*l*o);break;default:r=he.addWorkingTime(e,t,a*l*o)}if(!r)return t;if(e&&(n||o<86400))if(i){if(e.determineTimeType(r)!==ue.WorkingTime){let t=e.findStartOfNextTimeTypeChange(r);(o<86400||a<0&&t-r<o)&&(r=t)}}else{let t=new Date(r);t.setMilliseconds(t.getMilliseconds()-1),e.determineTimeType(t)!==ue.WorkingTime&&(t=e.findStartOfCurrentTimeTypeInterval(t),(o<86400||a<0&&r-t<o)&&(r=t))}return r};for(;l>0?r<a:r>a;){var u=c(r,1,!1);if(o>=86400&&(l>0?u>a:u<a)&&(u=c(r,1,!0)),!u||u.getTime()===r.getTime())break;if(r=u,l>0?u>a:u<a)break}if(r.getTime()!==a.getTime()){var h=c(r,-1,!0);if(h){if(e)if(i)e.determineTimeType(h)!==ue.WorkingTime&&(h=e.findStartOfNextTimeTypeChange(h));else{var p=new Date(h);p.setMilliseconds(p.getMilliseconds()-1),e.determineTimeType(p)!==ue.WorkingTime&&(h=e.findStartOfCurrentTimeTypeInterval(h))}Math.abs(h-a)<Math.abs(r-a)&&(r=h),1===o&&Math.abs(a-t)<Math.abs(r-t)&&(r=t)}}}return r},_calculateStartForEntityPhantomFromPointer:function(e,t,a,i){var n=this,r=i-n.actualTableViewWidth()-n._actualSplitterWidth(),o=e&&(Math.abs(a)||0),s=o?t??n._determineCalendarForRowDataItem(e):void 0,l=n._convertXToDateInActualTimeResolution(r+n._timeAxis.timeAreaViewScrollOffset());if(l=he.addWorkingTime(s,l,-Math.floor(o/2))||l,o&&s&&!he.addWorkingTime(s,l,o)){var c=he.addWorkingTime(s,l,-o);c?l=c:s=null}var d=new Date(l),m=n.options.horizontalDraggingUnit,u=n.options.horizontalDraggingUnitsPerStep;switch(null!=m&&null!=u||(m=n.options.timeResolutionUnit,u=n.options.timeResolutionUnitsPerStep),u*=2,m){case ne.Quarters:u*=3;case ne.Months:d.setMonth(d.getMonth()+u);break;case ne.Years:d.setFullYear(d.getFullYear()+u);break;default:var h=n.determineActualTimeResolutionInSeconds();(d=he.addWorkingTime(s,l,2e3*h-1)).setSeconds(d.getSeconds()-(60*(60*(24*d.getDate()+d.getHours())+d.getMinutes())+d.getSeconds())%h)}return l=n._findRoundedTargetDateTime(s,d,l,!0),{start:l=he.addWorkingTime(s,l,0),end:o?he.addWorkingTime(s,l,o):void 0}},_getPhantomReferenceElem:function(e){return i.select(e.foregroundRowElem).select("."+this.NXXXXX.TABLE_ROW_CLASS).node()},_getActualRowInteractions:function(e){return this._super(e)&(b.DragVertically|b.DragOnSameLevelOnly|b.DragInSameTableParentOnly)},_updateVerticalDOMElementsForRowDrag:function(e,t,a){var i=this;if(i._super.apply(i,arguments),i._currentCursorDateLineVisible){var n=i._calculateStartForEntityPhantomFromPointer(t,e.object.calendar,e.object.duration,a.x);i._positionDateLine(i._cursorDateLineD3,n.start,{y:18,text:i._formatDate(n.start)},{y:a.y-i._actualTitleHeight(ce.top),endDate:n.end}),i._cursorDateLineD3.style("visibility",null)}},_updateHorizontalDOMElementsForRowDrag:function(e,t,a){var i=this;i._super.apply(i,arguments),t?(i._horizontalDragAreaD3.style("visibility",null),i._positionHorizontalDragArea(t)):i._horizontalDragAreaD3.style("visibility","hidden")},_determineStartEndForRowDrag:function(e,t,a){var i=this;if(i._super.apply(i,arguments),t)return i._calculateStartForEntityPhantomFromPointer(t,e.object.calendar,e.object.duration,a.x)},_handleDragEnterForRowDrag:function(e){var t=this;t._super.apply(t,arguments),"netronic_rowItem"===e.objectType&&(t._isInDragOver=!0,"ngantt"===e.senderWidget.NXXXXX.WIDGET_ABBREVIATION?t._currentCursorDateLineVisible=!1:t._currentCursorDateLineVisible=!0)},_handleDragLeaveForRowDrag:function(){var e=this;e._super.apply(e,arguments),e._horizontalDragAreaD3.style("visibility","hidden"),e._currentCursorDateLineVisible=e.options.horizontalMousePositionHighlightingEnabled,e._currentCursorDateLineVisible||e._cursorDateLineD3.style("visibility","hidden")},_getOrCreateSpecialRowElem:function(e,t,a){var i=this;e.specialRowElems||(e.specialRowElems={});var n=e.specialRowElems[a];if(!n&&t){var r=(a?i._highlightedBodyD3s:i._phantomsBodyD3s)[i._determineBodyAreaIndex(e)].append("g").attr("class",a?gt:i.NXXXXX.PHANTOM_ROW_CLASS).attr("transform","translate(0,"+e.newY+")").data([e]);n=r.node(),e.specialRowElems[a]=n,r.append("g").attr("class",Pt).attr("transform","translate("+i._actualLayoutColumnLeft(se.TimeArea)+")").attr("clip-path","url(#"+i.NXXXXX.WIDTH_CLIPPATH_ID[se.TimeArea]+this._uniqueID+")").attr("height",e.totalHeight).append("g").attr("class",Ht).attr("transform","translate("+-i.convertXToLimitedX(i._timeAxis.timeAreaViewScrollOffset())+")")}return n},_removeSpecialRowElem:function(e,t){var a=e.specialRowElems[t];a&&(i.select(a).remove(),e.specialRowElems[t]=void 0,e.zOrdersToBarLayersD3Maps&&delete e.zOrdersToBarLayersD3Maps[t+1])},_createVerticalDragArea:function(){var e=this._verticalDragAreaParentD3.append("g").attr("class","ngantt-vertical-drag-area").attr("transform","translate("+this.convertXToLimitedX(this._timeAxis.timeAreaViewScrollOffset())+")").style("visibility","hidden");e.append("rect").attr("class","ngantt-vertical-drag-area-rect"),this._verticalDragAreaD3=e},_positionVerticalDragArea:function(e,t){var a=this._verticalDragAreaD3.select("rect"),i=this.convertXToLimitedX(this._timeAxis.convertDateToX(e)),n=this.convertXToLimitedX(this._timeAxis.convertDateToX(t));a.attr("x",i).attr("y",0).attr("width",Math.max(n-i,0)).attr("height",this._actualInnerBodyViewHeightsSumWithSeparator())},_createHorizontalDragArea:function(){var e=this._horizontalDragAreaParentD3.append("g").attr("class","ngantt-horizontal-drag-area").style("visibility","hidden");e.append("rect").attr("class","ngantt-horizontal-drag-area-rect"),this._horizontalDragAreaD3=e},_positionHorizontalDragArea:function(e){var t=this,a=this._horizontalDragAreaD3.select("rect"),i=(e=e.visibleRowDataItem).newY;t._determineBodyAreaIndex(e)!==oe.BodyAtTheTop&&(i+=t._layoutRows[oe.BodyAtTheTop].innerViewExtent()+t._actualBodyAreaSeparatorHeight()),a.attr("y",i-this.verticalScrollOffset()).attr("width",this._currentTimeAreaViewWidth).attr("height",e.totalHeight)},_createCursorRow:function(){var e=this._horizontalDragAreaParentD3.append("g").attr("class","ngantt-cursor-row").style("visibility","hidden");return e.append("rect").attr("class",Ke),e},_positionCursorRow:function(e){var t=this;if(e){var a=this._horizontalDragAreaParentD3.select("."+Ke),i=(e=e.visibleRowDataItem).newY;t._determineBodyAreaIndex(e)!==oe.BodyAtTheTop&&(i+=t._layoutRows[oe.BodyAtTheTop].innerViewExtent()+t._actualBodyAreaSeparatorHeight()),a.attr("y",i-this.verticalScrollOffset()).attr("width",this._currentTimeAreaViewWidth).attr("height",e.totalHeight)}},_registerGestureEventsOnTimeAreaBackground:function(e){var t=this;e.classed(u.TAP_EVENT_CLASS_NAME,!0).classed(u.DOUBLE_TAP_EVENT_CLASS_NAME,!0).classed(u.CONTEXTMENU_EVENT_CLASS_NAME,!0).classed(u.PINCH_EVENT_CLASS_NAME,t.options.zoomingByPinchInTimeAreaEnabled),e.node()[u.HANDLER_FUNCTION_PROPERTY+Yt+this._uniqueID]=function(e){try{t._handleGestureEventOnTimeAreaBackground(e)}catch(e){t._handleException(e,"onEventDispatch_background")}}},_handleGestureEventOnTimeAreaBackground:function(e){var t=this,a=e.srcEvent||e,n=i.pointer(a,t._backgroundBodyD3s[oe.BodyAtTheTop].node()),r=t.actualTableViewWidth(),o=n[0]>=0&&n[0]<r;if(o&&t._isInsideFixedPrecedingImageListColumn(e))e.type===u.CONTEXTMENU_EVENT_NAME&&(t.options.onEventFunc&&t._triggerEvent({sender:null,eventType:"contextmenu",event:a}),t.options.preventDefaultOnContextMenuEvents&&(e.stopPropagation(),e.preventDefault()));else switch(e.type){case u.TAP_EVENT_NAME:case u.DOUBLE_TAP_EVENT_NAME:if(t.options.onEventFunc){let a=e.type===u.DOUBLE_TAP_EVENT_NAME;t._handleTapOnTimeAreaBackground(e);let i=t.options.tapEventOnRowItemInTimeArea&&t._findRowDataItemAtY(e.center.y);i?t._triggerEvent({sender:i.item,elem:i.foregroundRowElem,elemType:j.Row,eventType:a?"doubletap":"tap",event:e.srcEvent,hammerEvent:e}):t._triggerEvent({sender:o?null:"TimeAreaBackground",eventType:a?"doubletap":"tap",event:e.srcEvent,hammerEvent:e})}break;case u.CONTEXTMENU_EVENT_NAME:if(t.options.onEventFunc){let a=t.options.contextMenuEventOnRowItemInTimeArea&&t._findRowDataItemAtY(e.pageY);a?t._triggerEvent({sender:a.item,elem:a.foregroundRowElem,elemType:j.Row,eventType:"contextmenu",event:e}):t._triggerEvent({sender:o?null:"TimeAreaBackground",eventType:"contextmenu",event:e})}t.options.preventDefaultOnContextMenuEvents&&(e.stopPropagation(),e.preventDefault());break;case u.PINCH_EVENT_NAME+"start":t._pinchStartVisualZoomFactor=t.options.visualZoomFactor,t._pinchCounter=0,t._pinchStartTime=performance.now(),t._pinchStartTimeStamp=e.srcEvent.timeStamp,t._pinchLastTimeStamp=0;break;case u.PINCH_EVENT_NAME:case u.PINCH_EVENT_NAME+"end":var s=e.type===u.PINCH_EVENT_NAME+"end";!function(){delete t._pinchTimerId;var a=t.options.visualZoomFactor,i=t._pinchStartVisualZoomFactor*e.scale,n=Math.max(t.options.minimumVisualZoomFactorOnInteraction,Math.min(t.options.maximumVisualZoomFactorOnInteraction,i));if(t.options.checkVisualZoomFactorFunc){var r=t._extendCallbackArgs({oldVisualZoomFactor:a,newVisualZoomFactorRaw:i,newVisualZoomFactor:n,hammerEvent:e,event:e.srcEvent,finished:s});s&&delete t._pinchStartTime,t.options.checkVisualZoomFactorFunc.call(t,r),n=r.newVisualZoomFactor}if(a!==n){var o=n/a,l=t._actualLayoutColumnLeft(se.TimeArea),c=l*a,d=l*n,m=t._actualTitleHeight(ce.top)*a,u=t._actualTitleHeight(ce.top)*n,h=t.horizontalTimeAreaViewScrollOffset(),p=t.verticalScrollOffset(),_=t._pointToSVGRelative(t._svgRootD3.node(),e.center.x,e.center.y);t.option("visualZoomFactor",n),t.scrollTo(void 0,h+(d-c)+(_.x-d)*(o-1)/a,p+(u-m)+(_.y-u)*(o-1)/a),t._pinchCounter=0}}(),t._pinchLastTimeStamp=e.srcEvent.timeStamp,e.preventDefault(),s&&(delete t._pinchStartVisualZoomFactor,delete t._pinchCounter,delete t._pinchStartTime,delete t._pinchStartTimeStamp,delete t._pinchLastTimeStamp)}},handleTapOnTimeAreaBackground:function(e){this._handleTapOnTimeAreaBackground(e)},_handleTapOnTimeAreaBackground:function(e){var t=this;if(t.options.timeItemsSelectable&&t._selectedTimeDataItemsMap.size){let i=Array.from(t._selectedTimeDataItemsMap.values()).map((e=>e.item));var a=t._extendCallbackArgs({timeItem:null,oldSelectedRowItems:t.selectedRowItems(),oldSelectedLinkItems:[],oldSelectedItems:i,newSelectedItems:(_.isMacOrIOS?e.srcEvent.metaKey:e.srcEvent.ctrlKey)?i.slice():[],altKey:e.srcEvent.altKey,shiftKey:e.srcEvent.shiftKey,metaKey:e.srcEvent.metaKey,ctrlKey:e.srcEvent.ctrlKey,event:e.srcEvent,hammerEvent:e,cancel:!1});if(t.options.selectTimeItemFunc){if(t.options.selectTimeItemFunc.call(t,a),a.cancel)return;Array.isArray(a.newSelectedItems)||(a.newSelectedItems=[])}else if(a.newSelectedItems.length)return;t.options.timeItemsHaveSameReferenceAsRowItems||t._changeRowItemSelection([]),t._changeLinkItemSelection([]),t._changeTimeItemSelection(a.newSelectedItems)}else if(t.options.rowItemsSelectable&&(t._selectedRowDataItemsMap.size||t.options.selectRowItemFuncCalledForDeselectionForced)){let a=t.selectedRowItems(),i=t._extendCallbackArgs({rowItem:null,oldSelectedTimeItems:Array.from(t._selectedTimeDataItemsMap.values()).map((e=>e.item)),oldSelectedLinkItems:[],oldSelectedItems:a,newSelectedItems:(_.isMacOrIOS?e.srcEvent.metaKey:e.srcEvent.ctrlKey)?a.slice():[],altKey:e.srcEvent.altKey,shiftKey:e.srcEvent.shiftKey,metaKey:e.srcEvent.metaKey,ctrlKey:e.srcEvent.ctrlKey,event:e.srcEvent,hammerEvent:e,cancel:!1});if(t.options.selectRowItemFunc){if(t.options.selectRowItemFunc.call(t,i),i.cancel)return;Array.isArray(i.newSelectedItems)||(i.newSelectedItems=[])}else if(i.newSelectedItems.length)return;t.options.timeItemsHaveSameReferenceAsRowItems||t._changeTimeItemSelection([]),t._changeLinkItemSelection([]),t._changeRowItemSelection(i.newSelectedItems),t.update()}else if(t.options.linkItemsSelectable&&t._selectedLinkDataItemsMap.size){if(a=t._extendCallbackArgs({linkItem:null,oldSelectedTimeItems:[],oldSelectedRowItems:[],oldSelectedItems:t.selectedLinkItems(),newSelectedItems:(_.isMacOrIOS?e.srcEvent.metaKey:e.srcEvent.ctrlKey)?t.selectedLinkItems():[],altKey:e.srcEvent.altKey,shiftKey:e.srcEvent.shiftKey,metaKey:e.srcEvent.metaKey,ctrlKey:e.srcEvent.ctrlKey,event:e.srcEvent,hammerEvent:e,cancel:!1}),t.options.selectLinkItemFunc){if(t.options.selectLinkItemFunc.call(t,a),a.cancel)return;Array.isArray(a.newSelectedItems)||(a.newSelectedItems=[])}else if(a.newSelectedItems.length)return;t._changeTimeItemSelection([]),t._changeRowItemSelection([]),t._changeLinkItemSelection(a.newSelectedItems),t.update()}},_changeTimeItemSelection:function(e){var t=this,a=new Map,n=!!t._selectedTimeDataItemsMap.size;for(let e of t._selectedTimeDataItemsMap.values())a.set(e,e.selected),e.selected=!1;t._selectedTimeDataItemsMap.clear(),e.forEach((function(e){var i=e.selectable,n=t._getDataItem(e,t._timeDataItemsMap);n&&(i??(n.rowDataItem.isDetailingRow?t.options.defaultLeafTimeItemSelectable:t.options.defaultTimeItemSelectable))&&(a.set(n,n.selected),t._selectedTimeDataItemsMap.set(n.id,n),n.selected=!0)}));for(let e of a.keys())e.selected!==a.get(e)&&(e.selected?e.elem&&t._isTimeDataItemVisible(e)&&e.rowDataItem?.visibleRowDataItem?.totalHeight&&t._prependBarSelectedRect(e,i.select(e.elem)):t._removeSelectionFrameOfTimeDataItem(e));"auto"===t.options.unselectedItemsShownCovered&&n!==!!e.length&&t._foregroundBodyD3s.forEach((function(e){e.selectAll("."+t.NXXXXX.ROW_CLASS).each((function(e){t._checkForVisibilityOfUnselectedRowCover(e)}))}))},_moveSelectedBar:function(e,t,a){var n=this;if(n.options.selectedItemsShownHighlighted&&!!e.highlighted!==a){var r=i.select(n._getOrCreateSpecialRowElem(e.rowDataItem.visibleRowDataItem,!0,1)),o=(a?r:i.select(e.rowDataItem.visibleRowDataItem.foregroundRowElem)).select("."+Ht),s=Array.isArray(e.item.childTimeItems)&&e.item.childTimeItems.length,l=t.classed(Ye);s&&!l&&(e.backgroundElem&&n._moveSelectedBar(e,i.select(e.backgroundElem),a),e.item.childTimeItems.forEach((function(e){var t=n._getDataItem(e,n._timeDataItemsMap);n._moveSelectedBar(t,i.select(t.elem),a)})));var c=s&&(null==e.item.zOrder||l)?-1e3:100*(parseFloat(e.item.zOrder)||0);c+=e.subRowIndex,n._determineBarLayerByZOrder(o,c,a?2:0).node().appendChild(t.node()),e.highlighted=a}},_checkHighlightingForTimeDataItem:function(e,t){e.rowDataItem&&this._checkForVisibilityOfUnselectedRowCover(e.rowDataItem.visibleRowDataItem),this.options.selectedItemsShownHighlighted&&this._moveSelectedBar(e,t,!0)},_prependBarSelectedRect:function(e,t){var a=this;if(a._checkHighlightingForTimeDataItem(e,t),e.selectedFrameElem&&(i.select(e.selectedFrameElem).remove(),delete e.selectedFrameElem),e.selectedFrameMaskElem&&(i.select(e.selectedFrameMaskElem).remove(),delete e.selectedFrameMaskElem),a.options.barSelectionWithFrames){var n=a._determineSelectionFrameExtent(e);if(n){var r,o=a._determineBodyAreaIndex(e.rowDataItem);(null!=e.item.barShape&&Array.isArray(e.item.childTimeItems)||a.options.barSelectionFramesShownWithHigherZOrder)&&(r=a.options.barSelectionFramesShownWithHigherZOrder?a._barSelectionFramesD3[o].append("mask"):t.insert("mask",":first-child")),r&&(r.attr("class","ngantt-selected-bar-mask").attr("id",Vt+e.id),r.append("rect").attr("fill","white"),r.append("rect").attr("fill","black"),e.selectedFrameMaskElem=r.node()),a.options.barSelectionFramesShownWithHigherZOrder&&t.classed(zt,!0);var s=(a.options.barSelectionFramesShownWithHigherZOrder?a._barSelectionFramesD3[o].append("rect"):t.insert("rect",":first-child")).attr("class","ngantt-selected-bar").attr("filter","url(#"+a.NXXXXX.BLUR_FILTER_ID+a._uniqueID+")");a._positionSelectionFrame(e,s,r,n),a.options.barSelectionFramesShownWithHigherZOrder&&!e.rowDataItem.visibleRowDataItem.entered&&(e.rowDataItem.oldVisibleRowDataItem&&e.rowDataItem.visibleRowDataItem!==e.rowDataItem.oldVisibleRowDataItem||e.rowDataItem.visibleRowDataItem.oldY!==e.rowDataItem.visibleRowDataItem.newY)&&(s.attr("visibility","hidden"),window.setTimeout((function(){a._element&&e.selected&&(n=a._determineSelectionFrameExtent(e),a._positionSelectionFrame(e,s,r,n),i.select(e.selectedFrameElem).attr("visibility",null))}),a.options.transitionDuration+50)),r&&s.attr("mask","url(#"+Vt+e.id+")"),e.selectedFrameElem=s.node()}}},_determineSelectionFrameExtent:function(e){var t=this,a=t._determineTimeDataItemExtent(e,void 0,void 0,!0);if(a){var i=e.rowDataItem.visibleRowDataItem,n=i.subRowDataItems[e.subRowIndex],r=t.convertXToLimitedX(a.left),o=a.top,s=r,l=o;if(t._worldViewDivElem&&(n&&(l+=n.offsetY-n.minimumY),l+=t.determineActualRowMargins().top),t.options.barSelectionFramesShownWithHigherZOrder)n&&(o+=n.offsetY-n.minimumY),o+=t.determineActualRowMargins().top+(i.oldY??i.newY);else{var c=t._determineTimeDataItemExtent(e);r-=t.convertXToLimitedX(c.left)}var d=t.convertXToLimitedX(a.outerRight)-t.convertXToLimitedX(a.outerLeft),m=a.bottom-a.top;return{x:r,y:o,w:d,h:m,worldViewX:s,worldViewY:l,xplus:-t._barFrameDistance+r,yplus:-2*t._barFrameDistance+o,wplus:d+2*t._barFrameDistance,hplus:m+4*t._barFrameDistance,xoffset:t.convertXToLimitedX(a.outerLeft)-t.convertXToLimitedX(a.left)}}},_positionSelectionFrame:function(e,t,a,i){if(i){var n=this;if(a&&(a.select("rect:nth-child(1)").attr("x",i.xplus-Qt).attr("y",i.yplus-Qt).attr("width",i.wplus+200).attr("height",i.hplus+200),a.select("rect:nth-child(2)").attr("x",i.x).attr("y",i.y).attr("width",i.w).attr("height",i.h)),t.attr("transform","translate("+i.xoffset+")").attr("x",i.xplus).attr("y",i.yplus).attr("width",i.wplus).attr("height",i.hplus),n._worldViewDivElem){var r=e.rowDataItem.visibleRowDataItem;r.worldViewSelectionCacheMap||(r.worldViewSelectionCacheMap={});var o=n._getTopOfRowDataItemForWorldView(r);r.worldViewSelectionCacheMap["T"+e.id]={method:"drawRect",args:[{left:n.actualTableWidth()+i.worldViewX,leftPx:1,top:o.top+i.worldViewY,topPx:o.topPx,width:i.w,height:i.h}]},n._renderCachedRowInWorldView(r,"S")}}},_removeSelectionFrameOfTimeDataItem:function(e){var t=this;if(e.elem&&(e.rowDataItem&&t._checkForVisibilityOfUnselectedRowCover(e.rowDataItem.visibleRowDataItem),e.highlighted&&t._moveSelectedBar(e,i.select(e.elem),!1),i.select(e.elem).classed(zt,!1)),i.select(e.selectedFrameElem).remove(),i.select(e.selectedFrameMaskElem).remove(),delete e.selectedFrameElem,delete e.selectedFrameMaskElem,e.rowDataItem){var a=e.rowDataItem.visibleRowDataItem;a.worldViewSelectionCacheMap&&delete a.worldViewSelectionCacheMap["T"+e.id],t._worldViewDivElem&&t._renderCachedRowInWorldView(a,"S")}},_isAnyItemSelected:function(){var e=this;return e._super()||!!e._selectedTimeDataItemsMap.size||!!e._selectedLinkDataItemsMap.size},isTimeItemSelected:function(e){try{d.assertNotNull(e,"",0);var t=this._getDataItem(e,this._timeDataItemsMap);return this._isTimeDataItemSelected(t)}catch(e){this._handleException(e,"isTimeItemSelected")}},_isTimeDataItemSelected:function(e){if(e){for(var t=e;t.parentTimeDataItem;)t=t.parentTimeDataItem;return!!t.selected}},selectedTimeItems:function(e){try{d.assertArrayOrNull(e,"",0);var t=this;if(void 0===e){var a=[],i=!1;for(let e of t._selectedTimeDataItemsMap.keys()){let n=t._getDataItemByID(e,t._timeDataItemsMap);n?a.push(n.item):i=!0}return i&&this._changeTimeItemSelection(a),a}if(t.options.timeItemsSelectable){var n=e;Array.isArray(e)&&(n=[],e.forEach((function(e){var a=t._getDataItem(e,t._timeDataItemsMap);if(a){for(var i=a;i.parentTimeDataItem;)i=i.parentTimeDataItem;n.push(i.item)}}))),t.options.timeItemsHaveSameReferenceAsRowItems||t._changeRowItemSelection([]),t._changeLinkItemSelection([]),t._changeTimeItemSelection(n),t._updateSuspendedForSelectionChanges||t._barDragging.isActive()&&t._barDragging.isDropped()||t.update()}}catch(e){this._handleException(e,"selectedTimeItems")}},_registerBackgroundPanningEvents:function(){var e=this;e._backgroundBodyScrollParentD3.classed(u.PRESS_PAN_EVENT_CLASS_NAME,e.options.timeItemsSelectableByRectangle).classed(u.PAN_EVENT_CLASS_NAME,e.options.timeItemsSelectableByRectangle),e._svgRootD3.classed(u.PAN_EVENT_CLASS_NAME,!e.options.rowItemsDraggable&&!e.options.timeItemsSelectableByRectangle);let t=`keydown${e._EVENT_NAMESPACE}-rectselect keyup${e._EVENT_NAMESPACE}-rectselect`;e.options.timeItemsSelectableByRectangle?m.on(window,t,(function(t){e._checkModifierKeysForBarSelectionByRectangle(t)})):m.off(window,t),!this&&this._super()},_checkModifierKeysForBarSelectionByRectangle:function(e){try{var t=this;t._cachedHammerEventForSelectionByRect&&(_.isMacOrIOS?"Meta"===e.key:"Control"===e.key)&&(t._cachedHammerEventForSelectionByRect.srcEvent=e,t._dragBarSelectionRectangle(t._cachedHammerEventForSelectionByRect))}catch(e){this._handleException(e,"onKeyDown_selectionRect")}},_checkBarSelectionRectangleEvents:function(e){var t=this;switch(e.type){case u.PRESS_EVENT_NAME:t._pressOnDiagramActive="touch"===e.pointerType,t._pressOnDiagramActive?t._temporaryMarkVisible=void 0:e[u.CANCEL_PROPERTY]=!0;break;case u.PRESS_EVENT_NAME+"up":if(t._pressOnDiagramActive=!1,t._finishBarSelectionRectangle(e,!0),"touch"===e.pointerType&&t.options.onEventFunc){var a=t.options.contextMenuEventOnRowItemInTimeArea&&t._findRowDataItemAtY(e.center.y);a?t._triggerEvent({sender:a.item,elem:a.foregroundRowElem,elemType:j.Row,eventType:"contextmenu",event:e.srcEvent,hammerEvent:e}):t._triggerEvent({sender:"TimeAreaBackground",eventType:"contextmenu",event:e.srcEvent,hammerEvent:e}),t.options.preventDefaultOnContextMenuEvents&&(e.stopPropagation(),e.preventDefault())}break;case u.PAN_EVENT_NAME+"start":("mouse"===e.pointerType||t._pressOnDiagramActive)&&t._startDraggingBarSelectionRectangle(e)||(e[u.CANCEL_PROPERTY]=!0),t._pressOnDiagramActive=!1;break;case u.PAN_EVENT_NAME+"move":t._dragBarSelectionRectangle(e);break;case u.PAN_EVENT_NAME+"end":t._finishBarSelectionRectangle(e,!1);break;case u.PAN_EVENT_NAME+"cancel":t._finishBarSelectionRectangle(e,!0)}},_startDraggingBarSelectionRectangle:function(e){var t=this;l.setCursor(t._element,"crosshair");var a=t._pointToSVGRelative(t._svgRootD3.node(),e.center.x,e.center.y),n=a.y>=t._actualTitleHeight(ce.top)+t._layoutRows[oe.BodyAtTheTop].innerViewExtent()?1:0;if(n&&(a.y-=t._layoutRows[oe.BodyAtTheTop].innerViewExtent()+t._actualBodyAreaSeparatorHeight()),a.y+=-t._actualTitleHeight(ce.top)+t._layoutRows[n].scrollStart(),a.x<t._layoutColumns[se.Table]+t.options.splitterWidth)return!1;if(t._phantomsBodyD3s[n].append("g").attr("class",ke).attr("transform","translate("+a.x+","+a.y+")").append("g").attr("transform","scale("+1/t.options.visualZoomFactor+")").append("rect"),t._temporaryTimeAreaViewScrollOffsetForBarSelection=t._timeAxis.timeAreaViewScrollOffset(),t._temporaryHorizontalBodyAreaIndexForBarSelection=n,t._temporaryForcedLeafTimeItems=void 0,t._temporaryForcedLeafTimeItemsQuadrant=void 0,t.options.selectedItemsShownHighlighted||"touch"===e.pointerType!==(_.isMacOrIOS?e.srcEvent.metaKey:e.srcEvent.ctrlKey)){t._temporarilySelectedTimeDataItemsByRect=[];for(let e of t._selectedTimeDataItemsMap.keys()){let a=t._getDataItemByID(e,t._timeDataItemsMap);a&&a.rowDataItem&&t._determineBodyAreaIndex(a.rowDataItem)!==n&&t._temporarilySelectedTimeDataItemsByRect.push(a)}}else for(let e of t._selectedTimeDataItemsMap.keys()){let a=t._getDataItemByID(e,t._timeDataItemsMap);a&&a.elem&&t._removeSelectionFrameOfTimeDataItem(a)}if(!t.options.timeItemsHaveSameReferenceAsRowItems){var r=t.selectedRowItems();r.length&&r.forEach((function(e){var a=t._getDataItem(e,t._rowDataItemsMap);a&&a.foregroundRowElem&&i.select(a.foregroundRowElem).selectAll("."+t.NXXXXX.SELECTED_ROW_CLASS).remove()}))}return t.options.canSelectTimeItemFuncResultsCacheable&&(t._temporaryTimeDataItemIDToSelectionAllowedMap={}),!0},_dragBarSelectionRectangle:function(e,t){var a=this,n=this._pointToSVGRelative(this._svgRootD3.node(),e.center.x,e.center.y);a._temporaryHorizontalBodyAreaIndexForBarSelection?n.y+=-a._actualTitleHeight(ce.top)-a._layoutRows[oe.BodyAtTheTop].innerViewExtent()-a._actualBodyAreaSeparatorHeight()+a._layoutRows[oe.MainBody].scrollStart():n.y+=-a._actualTitleHeight(ce.top)+a._layoutRows[oe.BodyAtTheTop].scrollStart(),n.x=Math.max(n.x,a._layoutColumns[se.Table].innerViewExtent()+a.options.splitterWidth+1);var o=this._phantomsBodyD3s[a._temporaryHorizontalBodyAreaIndexForBarSelection].select("."+ke);if(!o.size)return void(e[u.CANCEL_PROPERTY]=!0);var s=r(o.attr("transform")),l=o.select("rect");if(t){var c=a._timeAxis.timeAreaViewScrollOffset();s.translate[0]+=a._temporaryTimeAreaViewScrollOffsetForBarSelection-c,o.attr("transform",s.toString()),a._temporaryTimeAreaViewScrollOffsetForBarSelection=c}var d=!(2==a.options.timeItemsSelectableByRectangle)||s.translate[0]>n.x,m=n.x-s.translate[0],h=n.y-s.translate[1];l.attr("x",m>=0?0:m*a.options.visualZoomFactor).attr("y",h>=0?0:h*a.options.visualZoomFactor).attr("width",Math.abs(m)*a.options.visualZoomFactor).attr("height",Math.abs(h)*a.options.visualZoomFactor).classed("ngantt-bar-selection-partially",d).classed("ngantt-bar-selection-fully",!d);let p=(m>=0?0:1)+(h>=0?0:2);a._temporaryForcedLeafTimeItemsQuadrant!==p&&(a._temporaryForcedLeafTimeItemsQuadrant=p,a._temporaryForcedLeafTimeItems=void 0);var _=a._findTimeDataItemsInRect({x:s.translate[0],y:s.translate[1]},{x:n.x,y:n.y},d),g=a._isCtrlKeyPressed(e,!a._selectedTimeDataItemsMap.size);if(g)for(let e of a._selectedTimeDataItemsMap.keys()){let t=a._getDataItemByID(e,a._timeDataItemsMap,a._unusedTimeDataItemsMap);if(t){var T=_.indexOf(t);T<0?_.push(t):_.splice(T,1)}}var f,D=_.slice();if(a._temporarilySelectedTimeDataItemsByRect&&(a._temporarilySelectedTimeDataItemsByRect.forEach((function(e){var t=D.indexOf(e);t>=0&&D.splice(t,1)})),f=a._temporarilySelectedTimeDataItemsByRect.slice(),_.forEach((function(e){var t=f.indexOf(e);t>=0&&f.splice(t,1)}))),D.length&&a.options.canSelectTimeItemFunc){var v=a._temporarilySelectedTimeDataItemsByRect?a._temporarilySelectedTimeDataItemsByRect.slice():[];f&&f.forEach((function(e){v.splice(v.indexOf(e),1)})),D.slice().forEach((function(t){var i=!0;if(a._temporaryTimeDataItemIDToSelectionAllowedMap&&t.id in a._temporaryTimeDataItemIDToSelectionAllowedMap)i=a._temporaryTimeDataItemIDToSelectionAllowedMap[t.id];else{var n=a._extendCallbackArgs({timeItem:t.item,otherSelectedTimeItems:v.map((function(e){return e.item})),altKey:e.srcEvent.altKey,shiftKey:e.srcEvent.shiftKey,metaKey:g,ctrlKey:g,event:e.srcEvent,hammerEvent:e,canSelect:!0});a.options.canSelectTimeItemFunc.call(a,n),a._temporaryTimeDataItemIDToSelectionAllowedMap&&(a._temporaryTimeDataItemIDToSelectionAllowedMap[t.id]=n.canSelect),i=n.canSelect}i?v.push(t):D.splice(D.indexOf(t),1)})),_=v}a._temporarilySelectedTimeDataItemsByRect=_,a._cachedHammerEventForSelectionByRect=Object.assign({},e),D.forEach((function(e){e&&a._prependBarSelectedRect(e,i.select(e.elem))})),f&&f.forEach((function(e){a._removeSelectionFrameOfTimeDataItem(e)})),t||a._checkForAutoscroll(e.center.x,e.center.y,!0,!0,(function(){a._dragBarSelectionRectangle(e,!0)}))},_finishBarSelectionRectangle:function(e,t){var a=this;if(e||(t=!0),l.setCursor(a._element,null),a._stopAutoscroll(),void 0!==a._temporaryTimeAreaViewScrollOffsetForBarSelection){this._phantomsBodyD3s[a._temporaryHorizontalBodyAreaIndexForBarSelection].select("."+ke).remove(),a._temporarilySelectedTimeDataItemsByRect&&a._temporarilySelectedTimeDataItemsByRect.forEach((function(e){a._removeSelectionFrameOfTimeDataItem(e)}));for(let e of a._selectedTimeDataItemsMap.keys()){let t=a._getDataItemByID(e,a._timeDataItemsMap);t&&a._prependBarSelectedRect(t,i.select(t.elem))}if(!t){var n=a._isCtrlKeyPressed(e,!a._selectedTimeDataItemsMap.size),r=[];if(a._temporarilySelectedTimeDataItemsByRect&&a._temporarilySelectedTimeDataItemsByRect.forEach((function(e){r.push(e.item)})),a.options.selectTimeItemFunc){var o=a._extendCallbackArgs({timeItem:r[0],oldSelectedRowItems:a.selectedRowItems(),oldSelectedItems:Array.from(a._selectedTimeDataItemsMap.values()).map((e=>e.item)),newSelectedItems:r,altKey:e.srcEvent.altKey,shiftKey:e.srcEvent.shiftKey,metaKey:n,ctrlKey:n,event:e.srcEvent,hammerEvent:e,cancel:!1});a.options.selectTimeItemFunc.call(a,o),!o.cancel&&Array.isArray(o.newSelectedItems)||(t=!0)}t||(a.options.timeItemsHaveSameReferenceAsRowItems||!o.newSelectedItems.length||a.options.timeItemsHaveSameReferenceAsRowItems||a._changeRowItemSelection([]),this._changeLinkItemSelection([]),a._changeTimeItemSelection(o.newSelectedItems),a.update())}}t&&!a.options.timeItemsHaveSameReferenceAsRowItems&&a._updateAllRowSelections(),delete a._temporaryTimeAreaViewScrollOffsetForBarSelection,delete a._temporarilySelectedTimeDataItemsByRect,delete a._cachedHammerEventForSelectionByRect,delete a._temporaryTimeDataItemIDToSelectionAllowedMap,delete a._temporaryHorizontalBodyAreaIndexForBarSelection,delete a._temporaryForcedLeafTimeItemsQuadrant,delete a._temporaryForcedLeafTimeItems},_findTimeDataItemsInRect:function(e,t,a){var i=this,n=i._temporaryTimeAreaViewScrollOffsetForBarSelection,r=i.actualTableViewWidth(),o={left:Math.min(e.x,t.x)-r-i._actualSplitterWidth()+n,right:Math.max(e.x,t.x)-r-i._actualSplitterWidth()+n,top:Math.min(e.y,t.y),bottom:Math.max(e.y,t.y)},s=[],l=i._determineRowDataItems(!0,void 0,void 0,i._temporaryHorizontalBodyAreaIndexForBarSelection),c=[];return l.forEach((function(e){if(e.newY>o.bottom)return!1;e.newY+e.totalHeight>=o.top&&c.push(e)})),t.y<e.y&&(c=c.reverse()),c.forEach((function(e){i._findTimeDataItemsInRowRecursively(e,s,o,a)})),s},_findTimeDataItemsInRowRecursively:function(e,t,a,i,n){var r=this;if(r._temporaryForcedLeafTimeItems=r._temporaryForcedLeafTimeItems??t[0]?.rowDataItem.isDetailingRow,(null==r._temporaryForcedLeafTimeItems||e.isDetailingRow===r._temporaryForcedLeafTimeItems)&&Array.isArray(e.item.timeItems)){let n=e.isDetailingRow?r.options.defaultLeafTimeItemSelectable:r.options.defaultTimeItemSelectable;e.timeDataItems.forEach((function(e){if(!1!==e.item.markable&&(e.item.selectable??n)){var o=r._determineTimeDataItemExtent(e,void 0,void 0,!0);if(o){var s=e.newY+e.rowDataItem.visibleRowDataItem.newY+o.top,l=e.newY+e.rowDataItem.visibleRowDataItem.newY+o.bottom;(i?a.right>=o.outerLeft&&a.left<=o.outerRight&&a.bottom>=s&&a.top<=l:a.left<=o.outerLeft&&a.right>=o.outerRight&&a.top<=s&&a.bottom>=l)&&t.push(e)}}}))}["detailingRowDataItems","childRowDataItems"].forEach((function(o,s){if((s||r.options.leafBarsVisibleOnParentRows)&&(s?e.isCollapsed:!r.options.detailingRowsVisible||e.areLeavesCollapsed)){let l=r._getCurrentlyDisplayedElementsInRow(e);l&(s?Z.BarsInHiddenDescendantRows:Z.BarsInOwnHiddenLeafRows|Z.BarsInLeafRowsInHiddenDescendantRows)&&(s||!n||l&Z.BarsInOwnHiddenLeafRows)&&e[o]?.forEach((function(e){r._findTimeDataItemsInRowRecursively(e,t,a,i,!0)}))}}))},_changeLinkItemSelection:function(e){var t,a,i=this,n=new Map;for(a=0;a<e.length;a++)e[a]&&(t=i._getDataItem(e[a],i._linkDataItemsMap))&&n.set(t.id,t);for(let e of i._selectedLinkDataItemsMap.values())n.has(e.id)||(delete e.selected,e.version++,i._selectedLinkDataItemsMap.delete(e.id));for(let e of n.values())(e.item.selectable??i.options.defaultLinkItemSelectable)&&(i._selectedLinkDataItemsMap.has(e.id)||(e.selected=!0,i._selectedLinkDataItemsMap.set(e.id,e),e.version++))},_selectLink:function(e,t){var a,i,n,r=this,o=r.selectedLinkItems(),s=o.slice(),l=r._isCtrlKeyPressed(t,!r._selectedLinkDataItemsMap.size);if(l){if(r._selectedTimeDataItemsMap.size||r._selectedRowDataItemsMap.size)return;if(r._selectedLinkDataItemsMap.has(e.id)){var c=s.indexOf(e.item);c>-1&&s.splice(c,1)}else i=s.slice(),s.push(e.item),a=!0}else r.options.canSelectLinkItemFunc&&o.indexOf(e.item)<0&&(i=[],a=!0),s=[e.item];if(r._updateSuspendedForSelectionChanges=!0,a&&r.options.canSelectLinkItemFunc){var d=r._extendCallbackArgs({linkItem:e.item,otherSelectedLinkItems:i,altKey:t.srcEvent.altKey,shiftKey:t.srcEvent.shiftKey,metaKey:l,ctrlKey:l,event:t.srcEvent,hammerEvent:t,canSelect:!0});r.options.canSelectLinkItemFunc.call(r,d),d.canSelect||(n=!0)}!n&&r.options.selectLinkItemFunc&&(d=r._extendCallbackArgs({linkItem:e.item,oldSelectedTimeItems:Array.from(r._selectedTimeDataItemsMap.values()).map((e=>e.item)),oldSelectedRowItems:r.selectedRowItems(),oldSelectedItems:r.selectedLinkItems(),newSelectedItems:s,altKey:t.srcEvent.altKey,shiftKey:t.srcEvent.shiftKey,metaKey:l,ctrlKey:l,event:t.srcEvent,hammerEvent:t,cancel:!1}),r.options.selectLinkItemFunc.call(r,d),d.cancel?n=!0:s=Array.isArray(d.newSelectedItems)?d.newSelectedItems:[]),delete r._updateSuspendedForSelectionChanges,n||r.selectedLinkItems(s)},isLinkItemSelected:function(e){try{d.assertNotNull(e,"",0);var t=this,a=t._getDataItem(e,t._linkDataItemsMap);if(a)return t._selectedLinkDataItemsMap.has(a.id)}catch(e){this._handleException(e,"isLinkItemSelected")}},selectedLinkItems:function(e){try{d.assertArrayOrNull(e,"",0);var t=this;if(void 0===e)return Array.from(t._selectedLinkDataItemsMap.values()).map((e=>e.item));t.options.linkItemsSelectable&&(t._changeTimeItemSelection([]),t._changeRowItemSelection([]),t._changeLinkItemSelection(e),t.update())}catch(e){this._handleException(e,"selectedLinkItems")}},_removeLinks:function(e){var t=this;e.each((function(e){e.selectedLinkElem&&(delete e.selectedLinkElem[u.HANDLER_FUNCTION_PROPERTY+Yt+t._uniqueID],i.select(e.selectedLinkElem).remove(),delete e.selectedLinkElem),e.colorGradientElem&&(i.select(e.colorGradientElem).remove(),delete e.colorGradientElem),m.off(this,t._EVENT_NAMESPACE),e.elem=void 0;let a=i.select(e.hotRegionElem);a.remove(),m.off(a.select("path").node(),"",t._EVENT_NAMESPACE),delete e.hotRegionElem[u.HANDLER_FUNCTION_PROPERTY+Yt+t._uniqueID],delete e.hotRegionElem})).remove()},_createAndUpdateAllLinks:function(e){var t=this,a=[];if(t.options.linksVisible){let e=t.options.maximumTopBodyViewAreaHeightRatio<0;var n=t._calculateVisibleVerticalBodyRangeForVirtualization(e?oe.BodyAtTheTop:oe.MainBody);let i=t.options.isForExport;t.options.isForExport=!1;for(let i of t._linkDataItemsMap.values()){var r=i.sourceTimeDataItem?i.sourceTimeDataItem.rowDataItem:void 0,o=i.targetTimeDataItem?i.targetTimeDataItem.rowDataItem:void 0;if(r&&e===(t._determineBodyAreaIndex(r)===oe.BodyAtTheTop)&&r.visibleRowDataItem.arrayIndex>=0&&o&&e===(t._determineBodyAreaIndex(o)===oe.BodyAtTheTop)&&o.visibleRowDataItem.arrayIndex>=0){var s=t._isTimeDataItemVisible(i.sourceTimeDataItem)&&0!==r.visibleRowDataItem.totalHeight,l=t._isTimeDataItemVisible(i.targetTimeDataItem)&&0!==o.visibleRowDataItem.totalHeight;if(t.options.linksWithDanglingBarsVisible?s||l:s&&l){var c=r.visibleRowDataItem.newY,d=o.visibleRowDataItem.newY,h=c+r.visibleRowDataItem.totalHeight,p=d+o.visibleRowDataItem.totalHeight,_=h<n.top?-1:c>n.bottom?1:0;_===(p<n.top?-1:d>n.bottom?1:0)&&_||(a.push(i),i.lastSourceRowY===c&&i.lastSourceRowYEnd===h&&i.lastTargetRowY===d&&i.lastTargetRowYEnd===p||(i.lastSourceRowY=c,i.lastSourceRowYEnd=h,i.lastTargetRowY=d,i.lastTargetRowYEnd=p,i.version++))}}}t.options.isForExport=i}var T=t._linksD3.selectAll(`.${ft}`).data(a,(e=>e.id));let f=T.filter((e=>{if(e.version!==e.oldVersion)return e.oldVersion=e.version,!0}));var D=T.enter().append("g").attr("class",(function(e){return t._enrichClass(e,ft,{elemType:j.Link})}));this.options.linksWithDanglingBarsVisible&&D.each((function(){i.select(this).append("circle").attr("class",(function(e){return t._enrichClass(e,Dt+" "+vt,{elemType:j.LinkDanglingSourceBar})})).attr("r","6").attr("visibility","hidden"),i.select(this).append("circle").attr("class",(function(e){return t._enrichClass(e,Dt+" "+yt,{elemType:j.LinkDanglingTargetBar})})).attr("r","6").attr("visibility","hidden")})),D.append("path").attr("class",(function(e){return t._enrichClass(e,St,{elemType:j.LinkPath})})),D.each((function(e){e.elem=this,e.oldVersion=e.version;var a=`${wt} ${u.CONTEXTMENU_EVENT_CLASS_NAME} ${u.PRESS_EVENT_CLASS_NAME} ${u.TAP_EVENT_CLASS_NAME} ${u.DOUBLE_TAP_EVENT_CLASS_NAME}`,n=t._linkHotRegionsD3.append("g").attr("class",a);if(n.append("path"),e.hotRegionElem=n.node(),e.hotRegionElem[u.HANDLER_FUNCTION_PROPERTY+Yt+t._uniqueID]=function(a){try{switch(a.type){case u.CONTEXTMENU_EVENT_NAME:t.options.onEventFunc&&(t._setBarInteractionCursor(P.None),t._triggerEvent({sender:e.item,eventType:"contextmenu",elemType:j.Link,event:a})),t.options.preventDefaultOnContextMenuEvents&&(a.stopPropagation(),a.preventDefault());break;case u.PRESS_EVENT_NAME+"up":t.options.onEventFunc&&"touch"===a.pointerType&&(t._setBarInteractionCursor(P.None),t._triggerEvent({sender:e.item,eventType:"contextmenu",elemType:j.Link,event:a.srcEvent,hammerEvent:a}));break;case u.TAP_EVENT_NAME:t.options.onEventFunc&&t._triggerEvent({sender:e.item,eventType:"tap",elem:this,elemType:j.Link,event:a.srcEvent,hammerEvent:a});var i=e.item.selectable;(null==i?t.options.defaultLinkItemSelectable:i)&&t._selectLink(e,a);break;case u.DOUBLE_TAP_EVENT_NAME:t.options.onEventFunc&&t._triggerEvent({sender:e.item,eventType:"doubletap",elem:this,elemType:j.Link,event:a.srcEvent,hammerEvent:a})}}catch(e){t._handleException(e,"onEventDispatch_link")}},!t.options.isForExport){var r=i.select(e.hotRegionElem).select("path").node();i.select(r).attr(g.POINTER_ENTER_ATTR_NAME,"1").attr(g.POINTER_LEAVE_ATTR_NAME,"1"),m.on(r,"pointerenter",t._EVENT_NAMESPACE,(function(a){try{if(t._onpointerenter_cursor(a,this,ft),!t.isInInteraction()){t._triggerEvent({sender:e.item,event:a,eventType:"tooltip",elem:this,elemType:j.Link});var i=this;m.on(r,"pointerleave",t._EVENT_NAMESPACE,(function(a){try{m.off(r,"pointerleave",t._EVENT_NAMESPACE),t._onpointerleave_cursor(i,e.id),!t._pointerEnterCursorElems.length&&t.options.onEventFunc&&t._triggerEvent({sender:null,eventType:"tooltip",elem:null,event:a})}catch(e){t._handleException(e,"onPointerLeave_link")}}))}}catch(e){t._handleException(e,"onPointerEnter_link")}}))}}));var v=i.selectAll([...D.nodes(),...f.nodes()]);let y=u.HANDLER_FUNCTION_PROPERTY+Yt+t._uniqueID;if(v.each((function(e){if(e.selected&&!e.selectedLinkElem){let a=t._selectedLinksD3.append("path").attr("class",Ft+" "+u.CONTEXTMENU_EVENT_CLASS_NAME+" "+u.PRESS_EVENT_CLASS_NAME+" "+u.TAP_EVENT_CLASS_NAME+" "+u.DOUBLE_TAP_EVENT_CLASS_NAME).node();e.selectedLinkElem=a,a[y]=function(t){e.hotRegionElem[y](t)}}else!e.selected&&e.selectedLinkElem&&(delete e.selectedLinkElem[y],i.select(e.selectedLinkElem).remove(),e.selectedLinkElem=void 0);let a=e.item.color,n=i.select(this),r=e.item.entries;if(r?.length)if(e.colorGradientElem)e.colorGradientElem.innerHTML="";else{let a=`ngantt-lcg-${e.id}-${t._uniqueID}`;e.colorGradientElem=n.insert("linearGradient",(()=>this.children[0])).attr("id",a).node()}else e.colorGradientElem&&delete e.colorGradientElem,n.select(`.${St}`).style("stroke",a);if(t.options.linksWithDanglingBarsVisible){let e=i.select(this);e.select(`.${Dt}.${vt}`).empty()&&e.insert("circle",":first-child").attr("class",(function(e){return t._enrichClass(e,Dt+" "+vt,{elemType:j.LinkDanglingSourceBar})})).attr("r","6").attr("visibility","hidden"),e.select(`.${Dt}.${yt}`).empty()&&e.insert("circle",":first-child").attr("class",(function(e){return t._enrichClass(e,Dt+" "+yt,{elemType:j.LinkDanglingTargetBar})})).attr("r","6").attr("visibility","hidden")}})),this.options.linkMarkersVisible&&v.each((function(e){var a=i.select(this);let n=a.select(`.${It}`);if((e.item.targetMarker??t.options.defaultLinkTargetMarker)!==q.None){n.size()||(n=a.append("path").attr("class",(function(e){return t._enrichClass(e,It,{elemType:j.LinkTargetMarker})})));let i=e.item.color;n.style("stroke",i).style("fill",i)}else n.remove()})),!t._timeAreaViewUpdateNeeded){var w=[];v.each((function(a){var n=i.select(this);[a.sourceTimeDataItem,a.targetTimeDataItem].forEach((function(e){e&&t._getDataItemByID(e.id,t._timeDataItemsMap)&&(w[e.id]||(w[e.id]=!0,e.elem&&e.elem.parentElement&&!e.isHiddenByLimits&&0!==e.rowDataItem.totalHeight&&t._isTimeDataItemVisible(e)||t._positionBar(null,e,2)))})),t._positionLink(n,a,e)}))}t._removeLinks(T.exit())},_doDetermineLinkInfo:function(e,t){var a,i,n,r,o=e.sourceTimeDataItem,s=e.targetTimeDataItem,l=o.rowDataItem.visibleRowDataItem,c=s.rowDataItem.visibleRowDataItem,d=l.newY+o.newY,m=c.newY+s.newY,u=this._getActualBarHeight(o),h=this._getActualBarHeight(s),p=e.item.type||this.options.defaultLinkType||Q.EndStart;switch(p){case Q.EndEnd:a="End",i="End";break;case Q.SourceDateEnd:a="SourceDate",i="End";break;case Q.StartEnd:a="Start",i="End";break;case Q.EndStart:a="End",i="Start";break;case Q.SourceDateStart:a="SourceDate",i="Start";break;case Q.StartStart:a="Start",i="Start";break;case Q.EndTargetDate:a="End",i="TargetDate";break;case Q.SourceDateTargetDate:a="SourceDate",i="TargetDate";break;case Q.StartTargetDate:a="Start",i="TargetDate"}"SourceDate"===a&&(o.item.linkSourceDate instanceof Date?(n=this._timeAxis.convertDateToX(o.item.linkSourceDate))===o.newX?(n=void 0,a="Start"):n===o.newEndX&&(n=void 0,a="End"):(a="End",n=o.newEndX)),"TargetDate"===i&&(s.item.linkTargetDate instanceof Date?(r=this._timeAxis.convertDateToX(s.item.linkTargetDate))===s.newX?i="Start":r===s.newEndX&&(i="End"):(i="Start",r=s.newX));var _,g,T,f,D,v,y,w,S,I={type:p};switch(a){case"Start":g=o.newX,T=o.item.start;break;case"End":g=o.newEndX,T=o.item.end;break;case"SourceDate":g=n,T=o.item.linkSourceDate}switch(i){case"Start":f=s.newX,D=o.item.start;break;case"End":f=s.newEndX,D=o.item.end;break;case"TargetDate":f=r,D=o.item.linkTargetDate}switch(a){case"Start":v=m>=d?d+u:d+this.options.barCornerWidth,y=m>=d?_e.Down:_e.Up;break;case"End":(_=f-g)<t?(v=m>=d?d+u:d,y=m>=d?_e.Down:_e.Up):(v=d+u/2,y=_e.Right);break;case"SourceDate":v=m>=d?d+u:d,y=m>=d?_e.Down:_e.Up}switch(i){case"Start":(_=f-g)<t?(w=m>=d?m+this.options.barCornerWidth/2:m+h,S=m>=d?_e.Up:_e.Down):(w=m+h/2,S=_e.Left);break;case"End":_<t&&d<m+h&&m<d+u?(w=m>=d?m+h:m,S=m>=d?_e.Down:_e.Up):(w=m>=d?m:m+h,S=m>=d?_e.Up:_e.Down);break;case"TargetDate":w=m>=d?m:m+h,S=m>=d?_e.Up:_e.Down}return I.source={x:g,date:T,y:v,portDirection:y},I.target={x:f,date:D,y:w,portDirection:S},l.subRowDataItems[o.subRowIndex]&&(I.source.allocatedTimeSpans=l.subRowDataItems[o.subRowIndex].timeSpans),c.subRowDataItems[s.subRowIndex]&&(I.target.allocatedTimeSpans=c.subRowDataItems[s.subRowIndex].timeSpans),I.source.y&&(I.source.yAbove=d-this.options.verticalLinkDistance,I.source.yBelow=d+u+this.options.verticalLinkDistance),I.target.y&&(I.target.yAbove=m-this.options.verticalLinkDistance,I.target.yBelow=m+h+this.options.verticalLinkDistance),I.routingType=e.item.routingType,this.options.linksWithDanglingBarsVisible&&(0===l.totalHeight?(I.source.y=l.newY,I.source.yAbove=l.newY,I.source.yBelow=l.newY):this._isTimeDataItemVisible(o)||(I.source.y=I.source.y-6,I.source.yAbove=I.source.y,I.source.yBelow=I.source.y),0===c.totalHeight?(I.target.y=c.newY,I.target.yAbove=c.newY,I.target.yBelow=c.newY):this._isTimeDataItemVisible(s)||(I.target.y=I.target.y-6,I.target.yAbove=I.target.y,I.target.yBelow=I.target.y)),I},_positionLink:function(e,t,a){var n=this;if(!n._timeAreaViewUpdateNeeded){var r=void 0!==t.item.routingType?t.item.routingType:this._linkRouter.options.routingType,o=(t.item.targetMarker??n.options.defaultLinkTargetMarker)!==q.None;r===ge.Orthogonal?this.options.linkMarkersVisible&&o?(this._linkRouter.options.sourcePortSectionExtent=0,this._linkRouter.options.targetPortSectionExtent=10):(this._linkRouter.options.sourcePortSectionExtent=5,this._linkRouter.options.targetPortSectionExtent=5):this.options.linkMarkersVisible&&o?(this._linkRouter.options.sourcePortSectionExtent=0,this._linkRouter.options.targetPortSectionExtent=5):(this._linkRouter.options.sourcePortSectionExtent=0,this._linkRouter.options.targetPortSectionExtent=0);var s=null,l=this._doDetermineLinkInfo(t,this._linkRouter.options.sourcePortSectionExtent+this._linkRouter.options.targetPortSectionExtent+5),c=i.select(t.hotRegionElem),d=t.selectedLinkElem?i.select(t.selectedLinkElem):null;if(isNaN(l.source.x)||null==l.source.x||isNaN(l.source.y)||isNaN(l.target.x)||null==l.target.x||isNaN(l.target.y))s="hidden";else{var m=this._linkRouter.determinePath(l);if(n.options.linksWithDanglingBarsVisible){let a=0===t.sourceTimeDataItem.rowDataItem.visibleRowDataItem.totalHeight||!n._isTimeDataItemVisible(t.sourceTimeDataItem),i=e.select("circle."+vt).attr("visibility",a?null:"hidden");a&&i.attr("cx",n.convertXToLimitedX(l.source.x)).attr("cy",l.source.y),a=0===t.targetTimeDataItem.rowDataItem.visibleRowDataItem.totalHeight||!n._isTimeDataItemVisible(t.targetTimeDataItem),i=e.select("circle."+yt).attr("visibility",a?null:"hidden"),a&&i.attr("cx",n.convertXToLimitedX(l.target.x)).attr("cy",l.target.y)}let r=t.colorGradientElem;if(r){r.innerHTML="";let a=t.item.color,o=i.select(r),s=0,c=l.target.x-l.source.x;if(c>0){c=Math.abs(c);let i,d=new Date(l.source.date);t.item.entries.forEach((e=>{o.append("stop").attr("offset",s).attr("stop-color",e.color);let t=e.duration;d.setTime(d.getTime()+t);let a=n._timeAxis.convertDateToX(d);s=(a-l.source.x)/c,o.append("stop").attr("offset",s).attr("stop-color",e.color),i=e})),s<1&&o.append("stop").attr("offset",s).attr("stop-color",i?.color??a),o.append("stop").attr("offset",s).attr("stop-color",a),o.append("stop").attr("offset",1).attr("stop-color",a),e.select(`.${St}`).style("stroke",`url(#${r.id})`)}else{let i=c?a:t.item.entries.find((e=>e.duration>0))?.color;e.select(`.${St}`).style("stroke",i??a)}}let g="";if(o){var u={[_e.Left]:0,[_e.Up]:90,[_e.Right]:180,[_e.Down]:270}[l.target.portDirection];g={[_e.Left]:"h5",[_e.Up]:"v5",[_e.Right]:"h-5",[_e.Down]:"v-5"}[l.target.portDirection],e.select("."+It).attr("d","M0,0l-5,-3v6L0,0z")}var h=n.getCurrentLowerXLimit(),p=n.getCurrentUpperXLimit();(l.source.x<h&&l.target.x<h||l.source.x>=p&&l.target.x>=p)&&(s="hidden");var _=e.select("."+St);(t.transitionActive||_.attr("d")!==m||d&&d.attr("d")!==m)&&(t.elem&&a!==E.LinkItemsChanged&&a!==E.TimeAxisChanged&&"hidden"!==s?(t.transitionActive=!0,n._cacheTransitionFunction((function(){t.transitionActive&&(e.select("."+St).transition().duration(n.options.transitionDuration).attr("d",m),d?.transition().duration(n.options.transitionDuration).attr("d",m),c.select("path").transition().duration(n.options.transitionDuration).attr("d",m),e.select("."+It).transition().duration(n.options.transitionDuration).attr("transform","translate("+n.convertXToLimitedX(l.target.x)+","+l.target.y+") rotate("+u+")"))}))):(delete t.transitionActive,e.select("."+St).attr("d",m).interrupt().transition(),c.select("path").attr("d",`${m}${g}`).interrupt().transition(),d?.attr("d",m).interrupt().transition(),e.select("."+It).attr("transform","translate("+n.convertXToLimitedX(l.target.x)+","+l.target.y+") rotate("+u+")").interrupt().transition(),"hidden"===s||a!==E.RowExpanded&&a!==E.RowLeavesExpanded||(s="hidden",window.setTimeout((function(){n._element&&(e.attr("visibility",null),c.attr("visibility",null),d?.attr("visibility",null))}),n.options.transitionDuration))))}e.attr("visibility",s),c.attr("visibility",s),d?.attr("visibility",s),n.options.positionLinkFunc?.call(n,n._extendCallbackArgs({linkItem:t.item,elem:e.node()}))}},_createTableRow:function(e,t,a,i){var n=i===E.WorldView?void 0:t.append("g").attr("class",this.NXXXXX.TABLE_ROW_CLASS);this._super(e,n,a,i,j.TableRow)},_determineLastTableCellWidth:function(e){return!this&&this._super(),Math.max(0,Math.max(this.actualTableWidth(),this.actualTableViewWidth())-this._fixedTableColumnsWidthSucceeding-e)},_shouldExistSplitterForLastColumn:function(){return!this&&this._super(),!0},_isColumnWidthModifiable:function(){return!this&&this._super(),!0},addDateLine:function(e,t){try{d.assertNotNull(e,"",0),e.id&&(this._dateLineIDsToSVGElementsMap[e.id]||(Array.isArray(this.options.dateLines)||(this.options.dateLines=[]),this.options.dateLines.push(e),this._createDateLine(!1!==e.inForeground?this._foregroundDateLinesD3:this._backgroundDateLinesD3,e)),t||this.__sortAndRepositionDateLines())}catch(e){this._handleException(e,"addDateLine")}},__sortAndRepositionDateLines:function(e){var t=this;if(this.options.dateLineCaptionOptimizedPositioningEnabled){var a=this.options.dateLines;if(Array.isArray(a)&&a.length>1){e||this._sortDatelines(),this._rectManager.removeRects();var n=1;!0===this._debugSymbolOptimization&&(n=0);for(var r=n;r<=1;r++)a.forEach((function(e){var a=t._dateLineIDsToSVGElementsMap[e.id];a&&t._positionDateLine(i.select(a),void 0,void 0,void 0,r)}))}}},addRowDateLine:function(e){try{d.assertNotNull(e,"",0);var t,a,i=this;if(e.timeItem&&(t=i._getDataItem(e.timeItem,i._timeDataItemsMap,i._unusedTimeDataItemsMap),e.rowItem=e.rowItem||t.rowDataItem.item,a=i._getDataItem(e.rowItem,i._rowDataItemsMap,i._unusedRowDataItemsMap),e.date?e.timeItem=void 0:e.date=e.timeItem.start),e.yStartOffsetInRow||(e.yStartOffsetInRow=0),e.rowItem&&e.date&&a){if(e.rowItem.dateLines){for(var n=!0,r=0;r<e.rowItem.dateLines.length;r++){var o=e.rowItem.dateLines[r];o.date.getTime()===e.date.getTime()&&o.yStartOffsetInRow===e.yStartOffsetInRow&&(n=!1)}n&&e.rowItem.dateLines.push(e)}else e.rowItem.dateLines=[],e.rowItem.dateLines.push(e);var s=function(t){var a=i._rowDateLinesD3s[i._determineBodyAreaIndex(t)].append("g").classed(Lt,!0);a.append("line").classed(Ot,!0),a.property(nt,e),i._rowDateLineElemsByRowDataItemIds[t.id].push(a)};if(i._rowDateLineElemsByRowDataItemIds[a.id]){var l=!0;for(r=0;r<i._rowDateLineElemsByRowDataItemIds[a.id].length;r++){var c=i._rowDateLineElemsByRowDataItemIds[a.id][r].property(nt);c.date.getTime()===e.date.getTime()&&c.yStartOffsetInRow===e.yStartOffsetInRow&&(l=!1)}l&&s(a)}else i._rowDateLineElemsByRowDataItemIds[a.id]=[],s(a);return!0}}catch(e){this._handleException(e,"addRowDateLine")}return!1},_updateRowDateLines:function(e){Array.isArray(e.item.dateLines)&&e.item.dateLines.forEach((function(e){e.timeItem&&(e.date=e.timeItem.start)}))},removeDateLine:function(e){try{d.assertString(e,"",0);var t=this;if(e){var a=t._dateLineIDsToSVGElementsMap[e];if(a&&(t._elementD3.select("#"+e).remove(),delete t._dateLineIDsToSVGElementsMap[e],Array.isArray(this.options.dateLines))){var n=this.options.dateLines.indexOf(i.select(a).property(nt));n>=0&&(this.options.dateLines.splice(n,1),this.__sortAndRepositionDateLines(!0))}}}catch(e){this._handleException(e,"removeDateLine")}},_dateLinesChanged:function(e){var t=this;t._timeAreaIsCurrentlyInvalid?t._dateLinesWereChangedWhileTimeAreaWasInvalid=!0:e&&!t._dateLinesWereChangedWhileTimeAreaWasInvalid||(delete t._dateLinesWereChangedWhileTimeAreaWasInvalid,t._backgroundDateLinesD3.selectAll("."+Je).remove(),t._foregroundDateLinesD3.selectAll("."+Je+":not(."+lt+"):not(."+je+")").remove(),t._dateLineIDsToSVGElementsMap={},this._rectManager.removeRects(),Array.isArray(t.options.dateLines)&&(this._sortDatelines(),t.options.dateLines.forEach((function(e){t._createDateLine(!1!==e.inForeground?t._foregroundDateLinesD3:t._backgroundDateLinesD3,e)}))),t.options.worldViewVisible&&t._renderCompleteWorldView())},_createDateLine:function(e,t){var a=this,i=e.append("g").attr("class",Je);t.className&&i.classed(t.className,!0);var n=i.append("g").attr("class","ngantt-date-line-group");t.id&&(a._dateLineIDsToSVGElementsMap[t.id]=i.node(),i.attr("id",t.id)),i.property(nt,t);var r=a._actualInnerBodyViewHeightsSumWithSeparator(),o=n.append("line").attr("class",et).attr("y2",r);if(null!=t.dateLineGridColor&&o.style("stroke",t.dateLineGridColor),t.dateLineGridDashArray&&o.style("stroke-dasharray",t.dateLineGridDashArray),null!=t.dateLineGridWidth&&o.style("stroke-width",t.dateLineGridWidth),null!=t.rab_symbolID){var s=new v(t.id,2,!1);if(i.property(ot,s),s.appendTo(n),null!=t.rab_symbolWidth||null!=t.rab_symbolHeight){var l=null!=t.rab_symbolWidth?parseFloat(t.rab_symbolWidth):0,c=null!=t.rab_symbolHeight?parseFloat(t.rab_symbolHeight):0;s.setWidthHeight(l,c),s.calcInitialPosition(l,c),i.property(rt,c)}}if(t.label){var d=new y(t.id,t.labelPosition,!(t.labelOrientation===$.Horizontal));if(i.property(st,d),d.appendTo(n,tt),t.className&&(t.className.indexOf(ut)>-1||t.className.indexOf(mt)>-1||t.className.indexOf(je)>-1))d.classed(ct,!0);else{var m=t.labelPosition;t.labelOrientation===$.Horizontal&&8&m&&(d.setScale(.66),d.classed("ngantt-date-line-caption-background ntimescale-ribbon-cell",!0)),d.setText(t.label)}}return t.draggable&&a.options.editable&&!a.options.isForExport&&(i.node()._splitterWidget=new D(i.node(),{divElemForCursor:a._element,visualZoomFactor:a.options.visualZoomFactor,height:r,width:1,svgGroupElem:n.node(),svgLineElem:n.select("line").node(),changed:function(e,t){a._onDateLineDropped(this,e,t)},startDrag:function(e,t){a._onDateLineDragStart(this,e,t)},endDrag:function(e,t){a._onDateLineDragEnd(this,e,t)},dragged:function(e,t){a._onDateLineDragged(this,e,t.newValue)},showDragStart:!0,useOwnEventDispatcher:!1})),t.createFunc&&t.createFunc.call(this,this._extendCallbackArgs({parentD3:n,dateLineDefinition:t})),t.phantom&&n.append("rect").attr("class",dt),this._positionDateLine(i),i},moveDateLine:function(e,t){try{d.assertString(e,"",0),d.assertDate(t,"",1);var a=this,n=a._dateLineIDsToSVGElementsMap[e];return n&&(a._positionDateLine(i.select(n),t),a.__sortAndRepositionDateLines()),!!n}catch(e){this._handleException(e,"moveDateLine")}},getDateLine:function(e){try{d.assertString(e,"",0);var t=this._dateLineIDsToSVGElementsMap[e];return t?i.select(t).property(nt):void 0}catch(e){this._handleException(e,"getDateLine")}},_sortDatelines:function(){var e=this.options.dateLines;Array.isArray(e)&&e.length>1&&e.sort((function(e,t){var a=0;return e.date&&t.date&&(a=Date.parse(e.date)-Date.parse(t.date)),0===a&&(a=e.id<t.id?-1:1),a}))},_positionDateLine:function(e,t,a,i,n){var r=this;if(!r._timeAreaViewUpdateNeeded){var o=e.property(nt);t&&(o.date=t);var s=o.date;if(s){e.attr("visibility",null);var l=r.convertXToLimitedX(r._timeAxis.convertDateToX(s));if(e.classed(D.CLASS)?e.node()._splitterWidget.option({min:0,max:r._timeAxis.actualTimeAreaWidth(),height:r._actualInnerBodyViewHeightsSumWithSeparator(),position:{x:l,y:0}}):e.attr("transform","translate("+l+")"),r.options.dateLineCaptionOptimizedPositioningEnabled){if(void 0===n&&(n=-1),!1===this._debugSymbolOptimization&&(n=1),-1===n||0===n){var c=e.property(ot);c&&c.optimizePosition(this._rectManager,Kt,this.options.visualZoomFactor)}if((-1===n||1===n)&&o.label&&!o.phantom&&!a&&!i){var d=e.property(st);if(d){let t=0;!1===this._debugSymbolOptimization&&(t=e.property(rt)||0),d.setXY(0,t),d.optimizePosition(this._rectManager,qt,this.options.visualZoomFactor)}}}else{let t=e.property(st);if(t){let a=e.property(rt)||0;t.setXY(0,a)}}if(a){var m=!1;if(e===r._cursorDateLineD3){var u=l-r.convertXToLimitedX(r._timeAxis.timeAreaViewScrollOffset());(u<=0||u>r._timeAxis.timeAreaViewWidth())&&(m=!0)}var h,p=e.select("text").attr("transform","translate(0,"+(a.y||0)+")");a.text&&p.text(m?"":a.text);try{h=p.node().getBBox()}catch(e){h={height:0,width:0,x:0,y:0}}var _="end"===p.style("text-anchor")?-h.width:"middle"===p.style("text-anchor")?-h.width/2:0;e.select("."+ct).attr("x",_).attr("y",(a.y||0)+h.y).attr("width",h.width).attr("height",h.height).attr("display",m?"none":"initial")}if(i&&i.endDate){var g=r.convertXToLimitedX(r._timeAxis.convertDateToX(i.endDate));e.select("."+dt).attr("x",0).attr("y",i.y-r.options.barHeight/2||0).attr("width",g-l).attr("height",r.options.barHeight)}else e.select("."+dt).attr("width",0)}else e.attr("visibility","collapse")}},_dateLineDefinitionByElem:function(e){for(var t,a=this,i=Object.keys(a._dateLineIDsToSVGElementsMap),n=i.length-1;n>=0&&(t=i[n],a._dateLineIDsToSVGElementsMap[t]!==e);n--);if(void 0!==t)for(n=a.options.dateLines.length-1;n>=0;n--){var r=a.options.dateLines[n];if(r.id===t)return r}},_getCallbackArgsForDateLine:function(e){if(e){var t=this._dateLineDefinitionByElem(e);if(t)return this._extendCallbackArgs({sender:t,elem:e,elemType:j.DateLine,cancel:!1})}},_onDateLineDragStart:function(e,t,a){var n=this,r=n._getCallbackArgsForDateLine(e);r&&(r.event=t,n.options.dragStartFunc&&(n.options.dragStartFunc.call(n,r),a.cancel=r.cancel),!r.cancel&&n.options.dragEnterFunc&&(n.options.dragEnterFunc.call(n,r),a.cancel=r.cancel),a.cancel||(n._isInDateLineInteraction=!0,n.__wasCursorDateLineVisible=n.option("horizontalMousePositionHighlightingEnabled"),n._cursorDateLineD3.select("line").attr("visibility","hidden"),n.option("horizontalMousePositionHighlightingEnabled",!0),i.select(e).selectAll("."+et+",."+tt).style("opacity",F._DefaultBarOpacity)))},_onDateLineDragEnd:function(e,t,a){var n=this;n._isInDateLineInteraction=!1;var r=n._getCallbackArgsForDateLine(e);if(r){i.select(e).selectAll("."+et+", ."+tt).style("opacity",null),n._cursorDateLineD3.select("line").attr("visibility",null),n.option("horizontalMousePositionHighlightingEnabled",n.__wasCursorDateLineVisible),delete n.__wasCursorDateLineVisible,n._currentCursorDateLineVisible||n._cursorDateLineD3.style("visibility","hidden");var o=a.newValue;o&&(L<0&&_.isFirefox&&o++,o=n.convertLimitedXToX(o),(n.options.dragLeaveFunc||n.options.dragEndFunc)&&(r.newDate=n._timeAxis.convertXToDate(o,!1,!0),r.event=t,r.cancel=a.canceled,n.options.dragLeaveFunc?.call(n,r),n.options.dragEndFunc?.call(n,r)),a.canceled=!0)}},_onDateLineDragged:function(e,t,a){var i=this;L<0&&_.isFirefox&&a++,a=i.convertLimitedXToX(a),i._currentCursorDateLineVisible&&g.isPermanentScrollbarOverlayActive&&i._updateCursorHighlighters(t);var n,r=i._timeAxis.timeAreaViewScrollOffset();if(i._checkForAutoscroll(t.pageX,t.pageY,!0,!1,(function(){n&&window.clearTimeout(n),n=window.setTimeout((function(){try{if(i._element){var t=i._timeAxis.timeAreaViewScrollOffset()-r;e._splitterWidget.manualDrag(a,t),a+=t,r=i._timeAxis.timeAreaViewScrollOffset()}}catch(e){i._handleException(e,"_onDateLineDragged")}}),10)})),i.options.draggedFunc){var o=i._getCallbackArgsForDateLine(e);if(o)return o.newDate=i._timeAxis.convertXToDate(a,!1,!0),o.event=t,i.options.draggedFunc.call(i,o),!o.cancel}},_onDateLineDropped:function(e,t,a){var i=this;i._stopAutoscroll();var n=i._getCallbackArgsForDateLine(e);if(n){var r=a.newValue;L<0&&_.isFirefox&&r++,r=i.convertLimitedXToX(r),i.options.droppedFunc&&(n.newDate=i._timeAxis.convertXToDate(r,!1,!0),n.event=t,i.options.droppedFunc.call(i,n),a.canceled=n.cancel)}},_updateRelevantRowDateLines:function(){var e=this;if(Object.keys(e._rowDateLineElemsByRowDataItemIds).length){var t=function(a,i){i.add(a.parentRowDataItem)||a.parentRowDataItem?.item===e.options.rowItemsRoot||t(a.parentRowDataItem,i)},a=new Set;for(let i of e._realizedVisibleRowsSet)a.add(i),t(i,a);for(let i of e._realizedInvisibleRowsSet)a.add(i),t(i,a);a.forEach((function(t){if(t.item.dateLines){var a=e._rowDateLineElemsByRowDataItemIds[t.id],i=t.item.dateLines;if(t.isCollapsed){if(a&&i)for(l=0;l<a.length;l++)c=a[l].select("."+Ot),d=i[l],_=e._timeAxis.convertDateToX(d.date),g=e.options.transitionDuration,T=a[l],f=c,e._cacheTransitionFunction((function(){T.attr("transform","translate("+_+")"),f.attr("y1",c.attr("y1")).attr("y2",c.attr("y2")).transition().duration(g).attr("y1",c.attr("y1")).attr("y2",c.attr("y1"))}))}else{var n,r=function(t){var a=void 0;return["detailingRowDataItems","childRowDataItems"].every((function(i,n){if(!t.isDetailingRow||!n){let r=t?.[i];if(r&&!(n?t.isCollapsed:!e.options.detailingRowsVisible||t.areLeavesCollapsed))return a=r[r.length-1],!1}return!0})),(a&&r(a))??a??t},o=r(t);a?"number"==typeof a[0].select("."+Ot).attr("y2")?n=a[0].select("."+Ot).attr("y2"):(n=parseFloat(a[0].select("."+Ot).attr("y2")))||(n=o.oldY+(o.oldTotalHeight||o.totalHeight)):n=o.oldY+(o.oldTotalHeight||o.totalHeight);var s=o.newY+(o.totalHeight||o.oldTotalHeight);if(a&&i)for(var l=0;l<a.length;l++){var c=a[l].select("."+Ot),d=i[l];if(o){var m=t.oldY+d.yStartOffsetInRow,u=n,h=t.newY+d.yStartOffsetInRow,p=s,_=e._timeAxis.convertDateToX(d.date),g=e.options.transitionDuration,T=a[l],f=c;e._cacheTransitionFunction((function(){T.attr("transform","translate("+_+")"),m&&u?f.attr("y1",m).attr("y2",u).transition().duration(g).attr("y1",h).attr("y2",p):f.attr("y1",h).attr("y2",p)}))}else{var _=e._timeAxis.convertDateToX(d.date),g=e.options.transitionDuration,T=a[l],f=c;e._cacheTransitionFunction((function(){T.attr("transform","translate("+_+")"),f.attr("y1",c.attr("y1")).attr("y2",c.attr("y2")).transition().duration(g).attr("y1",c.attr("y1")).attr("y2",c.attr("y1"))}))}}}}}))}},_updateRowDateLinesX:function(){var e=this;e._rowDateLinesD3s.forEach((function(t){t.selectAll("."+Lt).each((function(){var t=i.select(this).property(nt);i.select(this).attr("transform","translate("+e.convertXToLimitedX(e._timeAxis.convertDateToX(t.date))+")")}))}))},_removeAllRowDateLines:function(){this._rowDateLineElemsByRowDataItemIds={},i.selectAll("."+Lt).remove()},_removeRowDateLines:function(e,t,a){var i=this,n=i._rowDateLineElemsByRowDataItemIds[e.id];if(n)if(t)(o=n[t].select("."+Ot)).attr("y1",o.attr("y1")).attr("y2",o.attr("y2")).transition().duration(i.options.transitionDuration).attr("y1",a||o.attr("y1")).attr("y2",a||o.attr("y1")),n[t].transition().duration(i.options.transitionDuration).remove(),n.splice(t,1);else{for(var r=0;r<n.length;r++){var o;(o=n[r].select("."+Ot)).attr("y1",o.attr("y1")).attr("y2",o.attr("y2")).transition().duration(i.options.transitionDuration).attr("y1",a||o.attr("y1")).attr("y2",a||o.attr("y1")),n[r].transition().duration(i.options.transitionDuration).remove()}delete i._rowDateLineElemsByRowDataItemIds[e.id]}},_findDateAreaEntry:function(e,t){var a=this,i=a._pointToSVGRelative(a._svgRootD3.node(),t.center?t.center.x:t.pageX,t.center?t.center.y:t.pageY),n=a._timeAxis.convertXToDate(i.x-a.actualTableViewWidth()-a._actualSplitterWidth()+a._timeAxis.timeAreaViewScrollOffset());if(n){var r,o=n.getTime(),s=a._timeAxis.convertXToDate(i.x-a.actualTableViewWidth()-a._actualSplitterWidth()+a._timeAxis.timeAreaViewScrollOffset()+1),l=s?s.getTime()-1:o;if(Array.isArray(e.entries)&&!e.entries.slice().reverse().every((function(e,t){return!(e.start&&e.end&&e.start.getTime()<=l&&e.end.getTime()>=o&&(r=t,1))})))return e.entries.length-1-r}},_dateAreasChanged:function(){var e=this;e._backgroundDateAreasD3.selectAll("."+qe).remove().each((function(){delete this[u.HANDLER_FUNCTION_PROPERTY+Yt+e._uniqueID],m.off(this,Yt+e._uniqueID)})),e._foregroundDateAreasD3.selectAll("."+qe).remove().each((function(){delete this[u.HANDLER_FUNCTION_PROPERTY+Yt+e._uniqueID],m.off(this,Yt+e._uniqueID)})),Array.isArray(e.options.dateAreas)&&e.options.dateAreas.forEach((function(t){e._createDateArea(t,t.inForeground?e._foregroundDateAreasD3:e._backgroundDateAreasD3,null)}))},_createDateArea:function(e,t,a){var i,r=this;if(null!=e.id){let l=a?.item;i=t.append("g").attr("class",l?Bt:qe),e.className&&i.classed(e.className,!0),l?i.property(r._OBJECT_ID_PROPERTY,e.id):i.attr("id",e.id);var o=i.append("path");if(l)o.attr("class",[r.NXXXXX.ROW_MAIN_HEIGHT_SCALE_CLASS,u.PRESS_EVENT_CLASS_NAME,u.TAP_EVENT_CLASS_NAME,u.DOUBLE_TAP_EVENT_CLASS_NAME,u.CONTEXTMENU_EVENT_CLASS_NAME].join(" "));else{var s=r._actualInnerBodyViewHeightsSumWithSeparator();o.attr("height",s)}"fromParentRow"!==l?.dateAreas&&(Array.isArray(e.entries)?e.entries.some((function(e){return!!e.caption})):e.caption)&&(e.entries||[e]).forEach((function(e){e.caption&&i.append("text").attr("class",Qe).attr("dy","1em").text(e.caption)})),e.createFunc&&e.createFunc.call(e,r._extendCallbackArgs({dateArea:i.node(),dateAreaDefinition:e,rowItem:l})),_.isIOS||r.options.isForExport||o.attr(g.POINTER_ENTER_ATTR_NAME,"1").attr(g.POINTER_LEAVE_ATTR_NAME,"1"),m.on(o.node(),"pointerenter",r._EVENT_NAMESPACE,(function(t){try{if(r._onpointerenter_cursor(t,i.node(),Bt),!r.isInInteraction()){r._lastTooltipDataItem=e;var a=Array.isArray(e.entries),n=r._findDateAreaEntry(e,t);(!a||n>=0)&&(r._lastTooltipDateAreaEntryIndex=n,r._triggerEvent({sender:e,entryIndex:n,eventType:"tooltip",rowItem:l,elem:this,elemType:j.DateArea,event:t}),r._pointerEnterTimeDataItemsMap||(r._pointerEnterTimeDataItemsMap=new Map),r._pointerEnterTimeDataItemsMap.set("da"+e.id,o.node()),m.on(o.node(),"pointerleave",r._EVENT_NAMESPACE,(function(t){m.off(o.node(),"pointerleave",r._EVENT_NAMESPACE).off(o.node(),"pointermove",r._EVENT_NAMESPACE+"-tooltip-da"+e.id),r._pointerEnterTimeDataItemsMap.delete("da"+e.id),r._triggerEvent({sender:null,eventType:"tooltip",elem:null,event:t})})).on(i.node(),"pointermove"+r._EVENT_NAMESPACE+"-tooltip-da"+e.id,(function(t){try{var a=t.target,i=!0;if(e!==r._lastTooltipDataItem&&(i=!1),i){var n=Array.isArray(e.entries),o=r._findDateAreaEntry(e,t);n&&o===r._lastTooltipDateAreaEntryIndex?r._lastTooltipDataItem===e&&(i=!1):r._lastTooltipDateAreaEntryIndex=o,i&&null!=o&&r._triggerEvent({sender:e,entryIndex:o,eventType:"tooltip",rowItem:l,elem:a,elemType:j.DateArea,event:t})}}catch(e){r._handleException(e,"onPointerMove_dateArea")}})))}}catch(e){r._handleException(e,"onPointerEnter_dateArea")}})),o.node()[u.HANDLER_FUNCTION_PROPERTY+Yt+r._uniqueID]=function(t){try{var a=Array.isArray(e.entries),i=r._findDateAreaEntry(e,t);if(!a||i>=0)switch(t.type){case u.TAP_EVENT_NAME:r._handleTapOnTimeAreaBackground(t),r._triggerEvent({sender:e,entryIndex:i,elemType:j.DateArea,rowItem:l,eventType:"tap",event:t.srcEvent,hammerEvent:t});break;case u.DOUBLE_TAP_EVENT_NAME:r._triggerEvent({sender:e,entryIndex:i,elemType:j.DateArea,rowItem:l,eventType:"doubletap",event:t.srcEvent,hammerEvent:t});break;case u.PRESS_EVENT_NAME:["mouse","pen"].includes(t.pointerType)&&(t[n.nEventDispatcher.CANCEL_PROPERTY]=!0);break;case u.PRESS_EVENT_NAME+"up":r._triggerEvent({sender:e,entryIndex:i,elemType:j.DateArea,rowItem:l,eventType:"contextmenu",event:t.srcEvent,hammerEvent:t});break;case u.CONTEXTMENU_EVENT_NAME:r._triggerEvent({sender:e,entryIndex:i,elemType:j.DateArea,rowItem:l,eventType:"contextmenu",event:t}),r.options.preventDefaultOnContextMenuEvents&&(t.stopPropagation(),t.preventDefault())}}catch(e){r._handleException(e,"onEventDispatch_dateArea")}},r._positionDateArea(i,e,a)}return i},_positionDateArea:function(e,t,a){var n=this;if(t?((t={...t}).entries=t.entries?.map((e=>({...e}))),e.datum(t)):t=e.datum(),!n._timeAreaViewUpdateNeeded){var r=e.selectAll("."+Qe).nodes(),o=t.entries||[t],s="",l=0;o.forEach((function(e){var t=e.start,o=e.end;if(t&&o&&t<o&&o>n._currentStart&&t<n._currentEnd){var c=n.convertXToLimitedX(n._timeAxis.convertDateToX(t)),d=n.convertXToLimitedX(n._timeAxis.convertDateToX(o));if(s+=["M",c,",0H",d,"V",a?1:n._actualInnerBodyViewHeightsSumWithSeparator(),"H",c,"Z"].join(""),e.caption&&"fromParentRow"!==a?.item.dateAreas){var m=i.select(r[l++]);m.attr("x",c+2),n.setClipPathAttrOnElemD3WithRefCount(m,n.getOrCreateClipPathForRange(c,Math.max(d-2,c)))}}})),e.select("path").attr("d",s)}},_createDateAreasInRow:function(e,t,a){var i,n=this;let r=n._determineDateAreasForRowDataItem(e);Array.isArray(r)&&r.forEach((function(r){!!r.inForeground===a&&(i||(i=t.append("g").attr("class",a?"ngantt-foreground-row-date-areas":"ngantt-background-row-date-areas")),n._createDateArea(r,i,e))}))},_determineDateAreasForRowInWorldView:function(){},_positionDateAreasInRow:function(e,t,a){var n=this;if(!n._timeAreaViewUpdateNeeded){let o=n._determineDateAreasForRowDataItem(e);if(Array.isArray(o)){var r={};o.forEach((function(e){!!e.inForeground===a&&(r[e.id]=e)})),t.selectAll("."+Bt).each((function(){var t=i.select(this);r[t.property(n._OBJECT_ID_PROPERTY)]&&n._positionDateArea(t,void 0,e)}))}}},_initializeTimescaleDependentStripesOrDateLines:function(){var e="url(#"+this.NXXXXX.WIDTH_CLIPPATH_ID[se.TimeArea]+this._uniqueID+")";this._alternatingTimeStripesScrollParentD3=this._svgRootD3.append("g").attr("class",Xt).attr("clip-path",e),this._alternatingTimeStripesD3=this._alternatingTimeStripesScrollParentD3.append("path").attr("class","ngantt-alt-time-stripes"),this._timescaleRibbonDateLinesScrollParentD3=this._svgRootD3.append("g").attr("class",Xt).attr("clip-path",e),this._timescaleRibbonDateLinesD3=this._timescaleRibbonDateLinesScrollParentD3.append("path").attr("class","ngantt-ribbon-date-lines")},_updateTimescaleDependentStripesOrDateLines:function(){var e=this;if(e.options.alternatingTimeStripesVisible){this._alternatingTimeStripesD3.attr("visibility",null);var t=e.determineTimescaleRibbonDateLines();if(t&&t.length){for(var a=(e._timescaleWidgets[ce.top]||e._timescaleWidgets[ce.bottom]).getCurrentTypicalCellWidthOfMostDetailedRibbon(),i=Math.floor(t[0].getTime()/a)%2,n=e._timeAxis,r=this.convertXToLimitedX(n.timeAreaViewScrollOffset()),o=i?2:0,s=t.length,l=n.convertXToDate(n.timeAreaViewScrollOffset()+n.timeAreaViewWidth()),d=Math.max(e._actualInnerBodyViewHeightsSumWithSeparator(),e._actualBodyHeightsSum()).toString(),m=[];o<=s;){if(i){var u=e.convertXToLimitedX(e._timeAxis.convertDateToX(t[o-1]))-r,h=e.convertXToLimitedX(e._timeAxis.convertDateToX(t[o]||l))-r;u!==h&&(u=u.toString(),h=h.toString(),m.push("M",u,",0H",h,"V",d,"H",u,"Z"))}i=!i,o++}this._alternatingTimeStripesD3.attr("d",m.join(""))}}else this._alternatingTimeStripesD3.attr("visibility","hidden").attr("d",null);if(e.options.timescaleRibbonDateLinesVisible){if(e._layoutRows[oe.BodyAtTheTop].innerViewExtent()||e._layoutRows[oe.MainBody].innerViewExtent()){var p=(e._timescaleWidgets[ce.top]||e._timescaleWidgets[ce.bottom]).getCellsOfMostDetailedRibbon();if(p&&p.length){var _=(n=e._timeAxis).collapseCalendar(),g=this.convertXToLimitedX(n.timeAreaViewScrollOffset());s=p.length,d=(d=e._actualInnerBodyViewHeightsSumWithSeparator()).toString(),m=[],c.applyTimeZone(e.options.timeZone,(function(){for(var t=1;t<s;t++){var i=p[t];if(t||i.width<a)var n=!!_&&i.previousDateSkipped;var r=e.convertXToLimitedX(e._timeAxis.convertDateToX(c.toDate(i.dateOrMoment)))-g;n?m.push("M",(r-1).toString(),",0V",d,"M",(r+1).toString(),",0V",d):m.push("M",r.toString(),",0V",d)}})),this._timescaleRibbonDateLinesD3.style("stroke",e.options.dateLineGridColor),this._timescaleRibbonDateLinesD3.style("stroke-dasharray",e.options.dateLineGridDashArray),this._timescaleRibbonDateLinesD3.style("stroke-width",e.options.dateLineGridWidth),this._timescaleRibbonDateLinesD3.attr("d",m.join("")).attr("visibility",null)}}}else this._timescaleRibbonDateLinesD3.attr("visibility","hidden").attr("d",null)},determineTimescaleRibbonDateLines:function(){var e=this._timescaleWidgets[ce.top]||this._timescaleWidgets[ce.bottom];return e&&e.getDatesOfMostDetailedRibbon(!0)},_bodyChanged_isSuspended:function(e){if(this.options.updateSuspended){if([E.Other,E.RowItemsChanged,E.RowItemsRootChanged,E.LinkItemsChanged].indexOf(e)>=0)return this._cachedBodyChangedArguments&&e===E.LinkItemsChanged||(this._cachedBodyChangedArguments=Array.prototype.slice.call(arguments)),!0;this._setOption("updateSuspended",!1)}return!this&&this._super(),!1},_bodyChanged_prepareUpdate:function(){var e=this;e._calculateSubRowIndexesOfBarsSuspended?e._determineRowDataItems(!0).forEach((function(t){e._calculateSubRowIndexesOfBarsInRow(t)})):e.options.automaticCalculationOfSubRowIndexesOfBarsInRow||e.calculateInvalidSubRowIndexesOfBarsInRows(),!e&&e._super()},_bodyChanged_additionalUpdates:function(e){null!=e?this._createAndUpdateAllLinks(e):this._createAndUpdateAllLinks(E.LinkItemsChanged),!this&&this._super()},_bodyChanged_updateNeededByUpdateCause:function(e){return!this&&this._super(),e!==E.LinkItemsChanged},_bodyChanged_restrictTotalHeight:function(e){if(!1===e.item.barsPaneVisible){var t=this._getMinimumRowHeight(e);this._bodyChanged_setTotalHeight(e,Math.max(e.totalHeight,t))}!this&&this._super()},_bodyChanged_setTotalHeight:function(e,t){var a=this;a.options.barSelectionFramesShownWithHigherZOrder&&0!==e.totalHeight&&0===t&&a._determineVisibleTimeDataItemsInRow(e).forEach((e=>{e.selectedFrameElem&&a._removeSelectionFrameOfTimeDataItem(e)})),this._super(e,t)},_bodyChanged_calcTotalHeight:function(e){return!this&&this._super(),Math.max(this._doGetMinimumRowHeight(e,!1===e.item.barsPaneVisible),e.mainHeight??0)},_updateRows_moveVertically:function(e,t,a,n){var o=this;if(e.phantomRowElem&&t!==E.RowExpanded&&t!==E.RowLeavesExpanded){var s=r(i.select(e.phantomRowElem).attr("transform"));s.translate[1]+=n,i.select(e.phantomRowElem).transition().duration(o.options.transitionDuration).attr("transform",s.toString())}if(o.options.barSelectionFramesShownWithHigherZOrder||o.options.selectedItemsShownHighlighted){var l;if(o.options.selectedItemsShownHighlighted){var c=o._getOrCreateSpecialRowElem(e,!1,1);c&&(l=i.select(c).selectAll($t))}else l=a.selectAll("."+zt);l&&l.each((function(a){if(a.selectedFrameElem&&(o.options.barSelectionFramesShownWithHigherZOrder||o._worldViewDivElem))if(a.rowDataItem.visibleRowDataItem.totalHeight&&!a.rowDataItem.visibleRowDataItem.isHidden){if(o.options.barSelectionFramesShownWithHigherZOrder&&(a.rowDataItem.visibleRowDataItem.entered||t===E.RowExpanded||t===E.RowLeavesExpanded)){let e=i.select(a.selectedFrameElem);if(e.transition().duration(o.options.transitionDuration).attr("y",+e.attr("y")+n),a.selectedFrameMaskElem){var r=i.select(a.selectedFrameMaskElem),s=r.select("rect:nth-child(1)");s.transition().duration(o.options.transitionDuration).attr("y",+s.attr("y")+n);var l=r.select("rect:nth-child(2)");l.transition().duration(o.options.transitionDuration).attr("y",+l.attr("y")+n)}}o._worldViewDivElem&&(e.worldViewSelectionCacheMap["T"+a.id].args[0].top+=n)}else o._removeSelectionFrameOfTimeDataItem(a)}))}!this&&this._super()},_updateRows_hideSelectionFrameForHiddenRow:function(e){if(e&&e.selectedFrameElem&&this.options.barSelectionFramesShownWithHigherZOrder){var t=i.select(e.selectedFrameElem);t.attr("transform",t.attr("transform")+" "+B)}!this&&this._super()},_updateRows_updateSingleRow:function(e,t,a,i){this._updateCalendarGridForRow(e,t,!0,a&&e!==i),!this&&this._super()},_updateRows_prepareExitingRow:function(e){var t=this;t._determineVisibleTimeDataItemsInRow(e).forEach((function(a){a.oldX=a.newX,a.oldEndX=a.newEndX,a.oldY=a.newY,a.oldRowY=e.newY,a.oldRowAtTheTop=t._determineBodyAreaIndex(e)===oe.BodyAtTheTop})),!this&&this._super()},_updateRows_handleExitingRows:function(e,t){var a=this;a._updateRelevantRowDateLines(),e.forEach((function(e){a._removeRowCompletely(e,!0),a._removeRowDateLines(e,void 0,t?(t.newY??t.oldY)+(t.newTotalHeight??t.oldTotalHeight):void 0)})),!this&&this._super()},_updateRows_callback:function(e,t,a){var i=this;if(i.options.timeAreaRowUpdateFunc){var n=i.getCurrentUpperXLimit()-i.getCurrentLowerXLimit(),r=i._extendCallbackArgs({isForeground:!1,width:i._actualLayoutColumnLeft(se.TimeArea)+n,timeAreaWidth:n,bodyViewScrollOffsetChanged:!1,timeAreaWidthChanged:!1,timeAreaViewWidthChanged:!1,timeAreaViewScrollOffsetChanged:!1,baseTimeUnitWidthChanged:!1,startOrEndChanged:!1,xCoordTransformChanged:!1,rowHeightChanged:!0});r.rowItem=e.item;var o=t.select("."+Pt),s=o.select("g."+Ht);r.isForeground=!1,r.rowElem=o.node(),r.parentElem=s.node(),i.options.timeAreaRowUpdateFunc.call(i,r),s=(o=a.select("."+Pt)).select("g."+Ht),r.isForeground=!0,r.rowElem=o.node(),r.parentElem=s.node(),i.options.timeAreaRowUpdateFunc.call(i,r)}!this&&this._super()},_removeSelectionFrames:function(e,t){var a=this,i=e.datum();(a.options.barSelectionFramesShownWithHigherZOrder||i.worldViewSelectionCacheMap)&&e.selectAll("."+zt).each((function(e){!a.options.barSelectionFramesShownWithHigherZOrder||!t&&a._isTimeDataItemVisible(e)||a._removeSelectionFrameOfTimeDataItem(e),i.worldViewSelectionCacheMap&&delete i.worldViewSelectionCacheMap["T"+e.id]})),!this&&this._super()},_doExpandOrCollapseRow:function(e,t){return t.additionalFlagsForInvalidateRows={barsChangedFlag:!0},this._super(e,t)},_createRow:function(e,t,a){var i=this;return a===E.BeforeRowCollapse&&!i.options.automaticCalculationOfSubRowIndexesOfBarsInRow&&i._invalidRowDataItemIDsForSubRowIndexesMap[e.id]&&i.calculateInvalidSubRowIndexesOfBarsInRows(),i._super(e,t,a)},_handleBeforeExpandOrCollapseRow:function(e,t){var a=this;if(a._super(e,t),t?e.areLeavesCollapsed:e.isCollapsed){var i=function(e){["detailingRowDataItems","childRowDataItems"].forEach((function(t,n){e.isDetailingRow&&n||e[t]?.forEach((function(t){Array.isArray(t.item.timeItems)&&t.item.timeItems.forEach((function(e){if(e){let n=a._getDataItem(e,a._timeDataItemsMap);if(n)for(var t=[n],i=0;i<t.length;i++)n=t[i],n.elem&&(n.actuallyVisibleInCollapsedRow=!0),Array.isArray(n.item.childTimeItems)&&n.item.childTimeItems.forEach((function(e){if(e){let i=a._getDataItem(e,a._timeDataItemsMap);i&&t.push(i)}}))}})),(!n||a._getCollapsedDisplayedElementsForRowDataItem(e)&Z.BarsInLeafRowsInHiddenDescendantRows)&&i(t)}))}))};(t?a.options.leafBarsVisibleOnParentRows&&a._getCurrentlyDisplayedElementsInRow(e)&Z.BarsInOwnHiddenLeafRows:a._getCollapsedDisplayedElementsForRowDataItem(e)&Z.BarsInHiddenDescendantRows)&&i(e)}},_handleAfterExpandOrCollapseRow:function(e,t){var a=this;if(a._super(e,t),a.options.automaticCalculationOfSubRowIndexesOfBarsInRow)a._calculateSubRowIndexesOfBarsInRow(e,!0);else if(!(e.isCollapsed||t&&e.areLeavesCollapsed)){var i=function(e){a._invalidRowDataItemIDsForSubRowIndexesMap[e.id]=!0,["detailingRowDataItems","childRowDataItems"].forEach((function(a,n){e.isDetailingRow&&n||n&&t||e[a]?.forEach((function(e){i(e)}))}))};i(e)}},_getOrCreateClipPathForRow:function(e,t){var a=this,i=[xt,a._uniqueID,"_",e,"_",t].join(""),n=a._defsD3.select("#"+i);return n.size()||(n=a._defsD3.append("clipPath").attr("id",i)).append("rect").attr("width",a.options.isForExport?1e7:1e5).attr("y",e).attr("height",t-e),i},_localeChanged:function(){try{this._updateDateLineGrids(),this._super()}catch(e){this._handleException(e,"onLocaleChanged")}},_formatDate:function(e,t){var a,i=this;return c.applyTimeZone(i.options.timeZone,(function(){if(a=c.formatDate(i.options.locale,i.options.timeResolutionUnit??"d",i.options.relativeDateModeEnabled,e,t),i.options.formatDateFunc){var n={ganttWidget:i,date:e,text:a};i.options.formatDateFunc.call(i,n),a=n.text}})),a},_textReplacements:function(e,t){return this._super(e,t).replace("{{#Date}}",this._formatDate(e.now))},_detachEventListenersFromBars:function(e){var t=this,a=t.options.detachEventListenersExFunc?[]:void 0;e.size()&&(e.each((function(){m.off(this,t._EVENT_NAMESPACE),a&&a.push(this)})),t.options.detachEventListenersExFunc?.call(t,t._extendCallbackArgs({isForeground:!0,elems:a,elemType:j.Bar})),t.options.detachEventListenersFunc&&e.each((function(e){e&&t.options.detachEventListenersFunc.call(t,t._extendCallbackArgs({isForeground:!0,item:e.item,elem:this,elemType:j.Bar}))})))},_detachTimeDataItem:function(e,t,a){var n=this;e.elem&&(t||(t=i.select(e.elem)),e.version===t.property(n._ITEM_VERSION_PROPERTY)&&(n._detachEventListenersFromBars(t),e.elem=void 0,delete e.unlimitedVisibility,delete e.isHiddenByLimits,delete e.highlighted,a&&(delete e.oldX,delete e.oldEndX,delete e.oldY,delete e.oldRowY,delete e.oldRowAtTheTop,e.selectedFrameElem&&n._removeSelectionFrameOfTimeDataItem(e)),t.datum(null)))},_createXCoordinateLimiter:function(){this._xCoordinateLimiter=new s(this.options.minimumLinearCoordinateExtent,this.options.maximumLinearCoordinateExtent,this.options.linearCoordinateReserve)},_saveXStretchCenterCoordinate:function(e){this._savedXStretchCenterCoordinate=e},_updateXCoordinateLimiterTransform:function(){if(!this._xCoordinateLimiter)return!1;var e=this._savedXStretchCenterCoordinate;return this._savedXStretchCenterCoordinate=void 0,this._xCoordinateLimiter.updateTransformIfNecessary({viewExtent:this._layoutColumns[se.TimeArea].innerViewExtent(),viewScrollOffset:this._timeAxis.timeAreaViewScrollOffset(),chartExtent:this._timeAxis.actualTimeAreaWidth(),chartStretchCenterCoordinate:e})},convertXToLimitedX:function(e){return d.assertNumber(e,"nGanttWidget.convertXToLimitedX",0),this._xCoordinateLimiter?this._xCoordinateLimiter.transform(e):e},convertLimitedXToX:function(e){return d.assertNumber(e,"nGanttWidget.convertLimitedXToX",0),this._xCoordinateLimiter?this._xCoordinateLimiter.reverseTransform(e):e},_limitX:function(e){return this._xCoordinateLimiter?this._xCoordinateLimiter.limit(e):e},_isXOutsideLimits:function(e){return this._xCoordinateLimiter?this._xCoordinateLimiter.isCoordOutsideLimits(e):0},getCurrentLowerXLimit:function(){return this._xCoordinateLimiter?this._xCoordinateLimiter.getCurrentLowerLimit():this._timeAxis.convertDateToX(this._timeAxis.actualStart())},getCurrentUpperXLimit:function(){return this._xCoordinateLimiter?this._xCoordinateLimiter.getCurrentUpperLimit():this._timeAxis.convertDateToX(this._timeAxis.actualEnd())},_setOffsetCorrection:function(){this._currentOffsetCorrection={x:this.options.offsetCorrection&&+this.options.offsetCorrection.x||0,y:this.options.offsetCorrection&&+this.options.offsetCorrection.y||0},!this&&this._super()},_updateCursorHighlighters:function(e){var t=this;if(t._currentCursorDateLineVisible){var a=t._pointToSVGRelative(t._svgRootD3.node(),e.pageX,e.pageY),i=t._timeAxis.convertXToDate(a.x-t._layoutColumns[se.Table].innerViewExtent()-t._actualSplitterWidth()+t._timeAxis.timeAreaViewScrollOffset(),!1,!0),n=a.y-t._actualTitleHeight(ce.top)+18+16/t.options.visualZoomFactor,r=t._actualInnerBodyViewHeightsSumWithSeparator();n>r&&(n=r),t._positionDateLine(t._cursorDateLineD3,i,{y:n,text:t._formatDate(i)}),t._cursorDateLineD3.style("visibility",null)}else t._cursorDateLineD3.style("visibility","hidden");if(t.options.verticalMousePositionHighlightingEnabled&&"hidden"===t._verticalDragAreaD3.style("visibility")){var o=t._findRowDataItemAtY(e.pageY);t._positionCursorRow(o),t._cursorRowD3.style("visibility",null)}else t._cursorRowD3.style("visibility","hidden");!this&&this._super()},_makeCursorHighlightersInvisible:function(e){var t=this;t._cursorDateLineD3.style("visibility","hidden"),t._cursorRowD3.style("visibility","hidden"),t._super(e)},_PE_ActualTableViewWidth:function(){return!this&&this._super(),this.actualTableViewWidth()},_PE_TableViewWidth:function(){return!this&&this._super(),this._determineCurrentTableViewWidthMaximum()},_actualScrollableWidth:function(e){return e===se.TimeArea?this._timeAxis.actualTimeAreaWidth():this._super(e)},_actualSplitterWidth:function(){return this._layoutColumns[se.Splitter].outerViewExtent()},_createLayoutGrid:function(){this._super(),this._layoutGrid&&this._layoutStacks&&this._layoutStacks[le.Columns]&&(this._layoutStacks[le.Columns].appendStripes([se.TimeArea,se.Splitter]),this._layoutColumns[se.Splitter].extent(this.options.isForExport?this.options.splitterWidth:0),this._layoutColumns[se.Splitter].innerViewExtent(this.options.splitterWidth),this._layoutColumns[se.Splitter].outerViewExtent(this.options.splitterWidth))},_layoutStackUpdateRows:function(e,t,a){var n=this;if(this._super(e,t,a),a.innerViewExtent!==t.innerViewExtent){var r=this._actualScaledMainHeight(),o=this._actualInnerBodyViewHeightsSumWithSeparator();this._verticalSplitterWidget?.option("height",r),this._additionalVerticalSplitterDivD3?.style("top",(r-this._actualScrollBarWidth())*this.options.visualZoomFactor+"px"),this._updateTimescaleDependentStripesOrDateLines(),[this._backgroundDateLinesD3,this._foregroundDateLinesD3].forEach((function(e){e.selectAll("."+Je).each((function(){var e=i.select(this);e.classed(D.CLASS)?e.node()._splitterWidget.option({height:Math.max(o+1,0)}):e.select("line").attr("y2",Math.max(o,0))}))})),[this._backgroundDateAreasD3,this._foregroundDateAreasD3].forEach((function(e){e.selectAll("."+qe).each((function(){n._positionDateArea(i.select(this))}))})),this._dateLineGridsD3.selectAll("."+Je+" line").attr("y2",o+1)}},_layoutStripeUpdateColumn:function(e,t,a){switch(this._super(e,t,a),e.getStripeID()){case se.Splitter:if(a.start!==t.start){if(this._tableTitleSplitterLineD3s)for(var i=0;i<=1;i++)this._titleVisible(i)&&this._tableTitleSplitterLineD3s[i]&&this._tableTitleSplitterLineD3s[i].attr("x1",a.start).attr("x2",a.start);if(this._tableBodySplitterLineD3s)for(var n=0;n<=1;n++)this._tableBodySplitterLineD3s[n]&&this._tableBodySplitterLineD3s[n].attr("x1",a.start).attr("x2",a.start)}break;case se.TimeArea:if(a.start!==t.start){var r="translate("+this._actualLayoutColumnLeft(se.TimeArea)+")";for(i=0;i<=1;i++)this._titleVisible(i)&&this._timescaleD3s[i]&&this._timescaleD3s[i].attr("transform",r);this._linkHotRegionsContainerD3.attr("transform",r),this._linksContainerD3.attr("transform",r),this._rowDateLinesContainerD3s.forEach((function(e){e.attr("transform",r)})),this._backgroundBodyD3s.slice().concat(this._foregroundBodyD3s).forEach((function(e){e.selectAll("."+Pt).attr("transform",r)})),this._updateD3sXY()}a.innerViewExtent!==t.innerViewExtent&&this._timeAxis.timeAreaViewWidth(Math.max(0,a.innerViewExtent))}},_layoutStripeUpdateRow:function(e,t,a){var i=this;if(this._super(e,t,a),a.start!==t.start){var n=function(e){i._titleVisible(e)&&i._tableTitleSplitterLineD3s&&i._tableTitleSplitterLineD3s[e]&&i._tableTitleSplitterLineD3s[e].attr("y1",i._actualTitleAreaTop(e)).attr("y2",i._actualTitleAreaBottom(e))},r=function(e){i._tableBodySplitterLineD3s&&i._tableBodySplitterLineD3s[e]&&i._tableBodySplitterLineD3s[e].attr("y1",i._actualBodyViewTop(e)).attr("y2",i._actualOuterBodyViewBottom(e))};switch(e.getStripeID()){case oe.TopTitle:n(ce.top);break;case oe.BodyAtTheTop:r(oe.BodyAtTheTop);break;case oe.MainBody:r(oe.MainBody);break;case oe.BottomTitle:n(ce.bottom)}}if(a.innerViewExtent!==t.innerViewExtent){var o=function(e){if(i._titleVisible(e)){var t=i._actualTitleHeight(e);i._timescaleWidgets[e]&&i._timescaleWidgets[e].option("height",t),i._tableTitleSplitterLineD3s&&i._tableTitleSplitterLineD3s[e]&&i._tableTitleSplitterLineD3s[e].attr("y2",i._actualTitleAreaBottom(e))}},s=function(e){i._tableBodySplitterLineD3s&&i._tableBodySplitterLineD3s[e]&&i._tableBodySplitterLineD3s[e].attr("y2",i._actualOuterBodyViewBottom(e))};switch(e.getStripeID()){case oe.TopTitle:o(ce.top),this._updateD3sXY();break;case oe.BodyAtTheTop:s(oe.BodyAtTheTop);break;case oe.MainBody:s(oe.MainBody);break;case oe.BottomTitle:o(ce.bottom)}}},_updateD3sXY:function(){var e=this,t=this._actualTitleHeight(ce.top),a=this._actualLayoutColumnLeft(se.TimeArea),i="translate("+(a+L)+","+t+")",n="translate("+(a+M)+","+t+")";this._alternatingTimeStripesScrollParentD3.attr("transform",n),this._timescaleRibbonDateLinesScrollParentD3.attr("transform","translate("+(a+V)+","+t+")"),this._verticalDragAreaParentD3&&this._verticalDragAreaParentD3.attr("transform",n),this._horizontalDragAreaParentD3&&this._horizontalDragAreaParentD3.attr("transform",n),this._dateLineGridsParentD3.attr("transform","translate("+(a+V)+","+t+")"),e._barSelectionFramesParentsD3&&Ce.forEach((function(t){e._barSelectionFramesParentsD3[t].attr("transform","translate("+(a+V)+","+e._actualBodyViewTop(t)+")")})),this._backgroundWatermarkParentD3.attr("transform",n),this._backgroundDateLinesParentD3.attr("transform",i),this._foregroundDateLinesParentD3.attr("transform",i),this._backgroundDateAreasParentD3.attr("transform",n),this._foregroundDateAreasParentD3.attr("transform",n)},_createAndPositionDivOverlays:function(){var e=this;this._super(),this._overlayAreas[se.TimeArea]=[];for(var t=0;t<=1;t++)this._overlayAreas[se.TimeArea][t]=new g({layoutRow:{},layoutColumn:{}},{forX:!!t,forY:!0},e._actualScrollBarWidth.bind(e)),this._overlayAreas[se.TimeArea][t]._createAndPositionDivOverlays(this._divScaleD3.node(),Wt[t],Nt[t],this.NXXXXX.IOS_SCROLL_BAR_CLASS,t,(function(t){try{if(t){var a=this.scrollLeft();e._layoutColumns[se.TimeArea].cachedScrollStart()-a<1&&e._layoutColumns[se.TimeArea].cachedScrollStart()-a>-.1&&(a=e._layoutColumns[se.TimeArea].cachedScrollStart())}var i=[];i[se.TimeArea]=t?a*e._layoutColumns[se.TimeArea].scrollFactorExceeding():void 0;var n=[];n[t]=this.scrollTop(),e._scrollOffsetsChanged(i,n)}catch(t){e._handleException(t,"onScroll")}}),(function(t){e._setActiveHorizontalBodyAreaIndex(t)}));for(var a=0;a<=1;a++)if(this._titleVisible(a)){var i=a+2;this._overlayAreas[se.TimeArea][i]=new g({layoutRow:{},layoutColumn:{}},{forX:!1,forY:!1}),this._overlayAreas[se.TimeArea][i]._createAndPositionDivOverlays(this._divScaleD3.node(),Gt[a],Ut[a],this.NXXXXX.IOS_SCROLL_BAR_CLASS,i,void 0)}this._overlayAreas[se.Table][oe.BodyAtTheTop].setScrollBarExistence({forY:!1}),this._overlayAreas[se.Table][oe.MainBody].setScrollBarExistence({forY:!1}),this._titleVisible(ce.bottom)&&this._overlayAreas[se.TimeArea][oe.MainBody].setScrollBarExistence({forX:!1})},_createAndAppendSVGRootDefs:function(){this._super(),this._widthClipPathRectD3s[se.TimeArea]=this._defsD3.append("clipPath").attr("id",this.NXXXXX.WIDTH_CLIPPATH_ID[se.TimeArea]+this._uniqueID).append("rect"),this._defsD3.append("pattern").attr("id","ngantt-graying-pattern").attr("patternUnits","userSpaceOnUse").attr("width",2).attr("height",2).append("line").attr("x2",2).attr("y2",2).attr("opacity",1).attr("stroke","white").attr("stroke-width",1)},_appendTitle:function(e){this._super(e),this._tableTitleD3s[e]&&(this._timescaleD3s||(this._timescaleD3s=[]),this._timescaleD3s[e]=this._titleD3s[e].append("g").attr("class","ngantt-timescale"),this._timescaleD3s[e].attr("clip-path","url(#"+this.NXXXXX.WIDTH_CLIPPATH_ID[se.TimeArea]+this._uniqueID+")"),this.options.isForExport&&(this._tableTitleSplitterLineD3s||(this._tableTitleSplitterLineD3s=[]),this._tableTitleSplitterLineD3s[e]||(this._tableTitleSplitterLineD3s[e]=this._svgRootD3.append("line").attr("class","ngantt-table-title-splitter-line"))))},_appendBackground:function(){var e=this;this._super(),this._backgroundBodyScrollParentD3.node()[u.HANDLER_FUNCTION_PROPERTY+Yt+e._uniqueID]=function(t){try{e._checkBarSelectionRectangleEvents(t,this)}catch(t){e._handleException(t,"onEventDispatch_background")}},this._registerGestureEventsOnTimeAreaBackground(this._backgroundBodyRectD3s[oe.BodyAtTheTop]),this._registerGestureEventsOnTimeAreaBackground(this._backgroundBodyRectD3s[oe.MainBody]),this._registerGestureEventsOnTimeAreaBackground(this._backgroundBodyD3s[oe.BodyAtTheTop]),this._registerGestureEventsOnTimeAreaBackground(this._backgroundBodyD3s[oe.MainBody]),this._initializeTimescaleDependentStripesOrDateLines(0);var t="url(#"+this.NXXXXX.WIDTH_CLIPPATH_ID[se.TimeArea]+this._uniqueID+")";this.options.isForExport||(this._verticalDragAreaParentD3=this._svgRootD3.append("g").attr("class","ngantt-vertical-drag-area-parent").attr("clip-path",t),this._horizontalDragAreaParentD3=this._svgRootD3.append("g").attr("class","ngantt-horizontal-drag-area-parent").attr("clip-path","url(#"+Pe+this._uniqueID+")")),this._backgroundWatermarkParentD3=this._svgRootD3.append("g").attr("class","ngantt-background-watermark-parent").style("opacity",this.options.watermarkOpacity),this._dateLineGridsParentD3=this._svgRootD3.append("g").attr("class","ngantt-date-line-grids-parent").attr("clip-path",t),this._dateLineGridsD3=this._dateLineGridsParentD3.append("g").attr("class","ngantt-date-line-grids"),this._backgroundDateAreasParentD3=this._svgRootD3.append("g").attr("class","ngantt-background-date-areas").attr("clip-path",t),this._backgroundDateAreasD3=this._backgroundDateAreasParentD3.append("g"),this._backgroundDateLinesParentD3=this._svgRootD3.append("g").attr("class",xe).attr("clip-path",t),this._backgroundDateLinesD3=this._backgroundDateLinesParentD3.append("g")},_appendForeground:function(){var e=this;this._super();var t="url(#"+this.NXXXXX.WIDTH_CLIPPATH_ID[se.TimeArea]+this._uniqueID+")";this._linkHotRegionsContainerD3=this._foregroundBodyParentD3s[oe.MainBody].append("g").attr("clip-path",t),this._linkHotRegionsD3=this._linkHotRegionsContainerD3.append("g").attr("class","ngantt-link-hot-regions"),this._linksContainerD3=this._foregroundBodyParentD3s[oe.MainBody].append("g").attr("clip-path",t),this._selectedLinksD3=this._linksContainerD3.append("g"),this._linksD3=this._linksContainerD3.append("g").attr("class","ngantt-links"),this._rowDateLinesContainerD3s=[],this._rowDateLinesD3s=[];for(var a=0;a<=1;a++)this._rowDateLinesContainerD3s[a]=this._foregroundBodyParentD3s[a].append("g").attr("clip-path",t),this._rowDateLinesD3s[a]=this._rowDateLinesContainerD3s[a].append("g").attr("class","ngantt-row-date-lines");if(this._highlightedBodyParentD3s=[],this._highlightedBodyD3s=[],this._highlightedBodyScrollParentD3=function(t,a,i,n,r,o){for(var s=e._svgRootD3.append("g").attr("class",i).attr("clip-path","url(#"+Pe+e._uniqueID+")"),l=0;l<=1;l++){var c=t[l]=s.append("g").attr("class",n[l]);o&&!e.options.isForExport&&c.attr("clip-path","url(#"+e.NXXXXX.BODY_PARENT_CLIPPATH_ID[l]+e._uniqueID+")"),a[l]=c.append("g").attr("class",r[l])}return s}(this._highlightedBodyParentD3s,this._highlightedBodyD3s,"ngantt-hlt-body-scroll-parent",_t,pt,!0),this._foregroundDateAreasParentD3=this._svgRootD3.append("g").attr("class","ngantt-foreground-date-areas").attr("clip-path",t),this._foregroundDateAreasD3=this._foregroundDateAreasParentD3.append("g"),this._foregroundDateLinesParentD3=this._svgRootD3.insert("g",`.${this.NXXXXX.PHANTOMS_BODY_SCROLL_PARENT_CLASS}`).attr("class",ht).attr("clip-path",t),this._foregroundDateLinesD3=this._foregroundDateLinesParentD3.append("g"),!this.options.isForExport)for(this._barSelectionFramesParentsD3=[],this._barSelectionFramesD3=[],a=0;a<=1;a++)this._barSelectionFramesParentsD3[a]=this._svgRootD3.append("g").attr("class",this.NXXXXX.BAR_SELECTION_FRAMES_PARENT_CLASS[a]).attr("clip-path","url(#"+this.NXXXXX.BODY_PARENT_CLIPPATH_ID[a]+this._uniqueID+")"),this._barSelectionFramesD3[a]=this._barSelectionFramesParentsD3[a].append("g").attr("class","ngantt-bar-selection-frames");if(this.options.isForExport)for(this._tableBodySplitterLineD3s||(this._tableBodySplitterLineD3s=[]),a=0;a<=1;a++)this._tableBodySplitterLineD3s[a]||(this._tableBodySplitterLineD3s[a]=this._svgRootD3.append("line").attr("class","ngantt-table-body-splitter-line"))},_appendIOSScrollBars:function(){this._super();for(var e=0;e<=1;e++)this._overlayAreas[se.TimeArea][e].appendIOSScrollBars(this._divScaleD3.node())},_setInvalidTimeAreaMarking:function(e,t){var a=this;function i(e){a._svgRootD3.selectAll(Zt).attr("transform",e.replace("%%%","")),[a._linksD3,a._linkHotRegionsD3,a._rowDateLinesD3s[oe.BodyAtTheTop],a._rowDateLinesD3s[oe.MainBody]].forEach((t=>{let a=r(t.attr("transform")).translate[1];t.attr("transform",e.replace("%%%",`,${a}`))})),Ce.forEach((function(t){a._barSelectionFramesD3?.[t].attr("transform",e.replace("%%%",","+-a._layoutRows[t].scrollStart()))}))}a._timeAreaIsCurrentlyInvalid=e;let n=a._svgRootD3.select(`.${Tt}`);if(e){if(!n.size()){let e=(a._PE_ActualTableViewWidth()+a.options.splitterWidth)*a.options.visualZoomFactor,t=a.options.titleHeight*a.options.visualZoomFactor,i=a._actualScrollBarWidth()*a.options.visualZoomFactor;a._svgRootD3.append("rect").attr("class",Tt).attr("transform",`scale(${1/a.options.visualZoomFactor})`).attr("x",e).attr("y",t).attr("width",Math.max(0,a._elementWidth-e-i)).attr("height",Math.max(0,a._elementHeight-t-i)).attr("fill",`url(#${a.NXXXXX.ASYNC_WAIT_PATTERN_ID}${a._uniqueID})`).attr("shape-rendering","geometricPrecision");let n=a._svgRootD3.select(`.${Ht}`),r=n.size()?+n.attr("transform").match(/translate\(-?(\d+.?\d*)\)/)?.[1]??0:0;a._invalidTimeAreaScrollOffsetOffset=a.convertLimitedXToX(r)-r}i(`translate(${-(a._timeAxis.timeAreaViewScrollOffset()-a._invalidTimeAreaScrollOffsetOffset*t)}%%%)scale(${t} 1)`)}else delete a._invalidTimeAreaScrollOffsetOffset,n.remove(),i(`translate(${-a.convertXToLimitedX(a._timeAxis.timeAreaViewScrollOffset())}%%%)`),a._dateLinesChanged(!0)},_hideInvisiblesForPrinting:function(e,t){switch(this._super(e,t),e.printingMode){case 0:break;case 1:case 2:this._hideInvisiblesForPrintingAtLast(e,t,$t),this._hideInvisiblesForPrintingAtLast(e,t,"."+Ct)}},_calcRepeatedWidthForPrinting:function(){return!this&&this._super(),this._layoutColumns[se.Table].extent()+this._layoutColumns[se.Splitter].extent()},_calcWidthDifference:function(e){return!this&&this._super(),this._calcInnerTimeAreaViewWidth(e)-this._layoutColumns[se.TimeArea].innerViewExtent()},_specifyNewViewWidth:function(e){var t=[];return t[se.Table]=this.actualTableViewWidth(),t[se.TimeArea]=this._calcTimeAreaViewWidth(e),!this&&this._super(),t},_shouldHeightChange:function(e,t){var a=e||Math.abs(t[oe.MainBody])>=1||Math.abs(t[oe.BodyAtTheTop])>=1;return!this&&this._super(),a},_shouldWidthChange:function(e,t){return!this&&this._super(),Math.abs(t)>=1},_calcTimeAreaViewWidth:function(e){return Math.max(0,e-this.actualTableViewWidth()-this._actualSplitterWidth())},_calcInnerTimeAreaViewWidth:function(e){var t=this._calcTimeAreaViewWidth(e)-this._actualScrollBarWidth();return t<0&&(t=0),t},_doResizeOverlaysHeightWithAnimation:function(e){this._super(e),this._overlayAreas&&(this._resizeBodyViewsOverlaysHeight(e,this._overlayAreas[se.TimeArea]),this._titleVisible(ce.bottom)&&this._overlayAreas[se.TimeArea][oe.BottomTitle]._setViewTopHeightWithAnimation(e,this._actualTitleAreaTop(ce.bottom),this._actualTitleHeight(ce.bottom)+this._actualTitleAreaScrollBarWidth(ce.bottom)))},_doResizeHeightWithOptionalAnimation:function(e){var t=this;if(t._super(e),t._barSelectionFramesParentsD3){var a=this._actualLayoutColumnLeft(se.TimeArea);e(t._barSelectionFramesParentsD3[oe.MainBody].attr("transform","translate("+a+","+t._actualBodyViewTop(oe.MainBody)+")"))}},_getHorViewScrollOffset:function(e){return e===se.TimeArea?this._timeAxis.timeAreaViewScrollOffset():this._super(e)},_getScrollOffsets:function(e,t){return!this&&this._super(),{horScrollOffset:this._getHorViewScrollOffset(e),verScrollOffset:this._layoutRows[t].scrollStart()}},_additionalVirtualizationUpdate:function(e){e===R.OptionChanged||e===R.ScrolledVertically?this._createAndUpdateAllLinks(E.LinkItemsChanged):this._createAndUpdateAllLinks(E.Other),this._super()},_getParentAtLast:function(e){var t=this,a=t._super(e);if(a)return a;var i=t._getDataItem(e,t._timeDataItemsMap,t._unusedTimeDataItemsMap);return i?.parentTimeDataItem?.item},_PE_DoInvalidateRow_111:function(e){if(!this&&this._super(),this.options.summariesEnabled)for(;e=e.parentRowDataItem;)this._doCalculateSummaryTimeItemsInRow(e,!1,!0)},_handleAdditionalRowInvalidationBefore:function(e,t,a){e.oldSummariesExistent=e.summariesExistent,e.summariesExistent=void 0,(t.barsChangedFlag||a)&&this._updateRowDateLines(e),this.options.linksVisible&&this.options.linkItems&&this.options.linkItems.length&&!t.timeItemsWithLinksSet&&(t.timeItemsWithLinksSet={}),!this&&this._super()},_handleAdditionalRowInvalidationAfter:function(e,t,a){var i=this,n=e.item;if(t.barsChangedFlag||a){var r={};Array.isArray(e.timeDataItems)&&(e.timeDataItems.forEach((function(e){r[e.id]=!0})),e.timeDataItems&&(e.timeDataItems.length=0)),e.summariesExistent=!1,Array.isArray(n.timeItems)&&n.timeItems.forEach((function(a){var n=i._createTimeDataItemAndChildrenRecursively(a,e,r);i.options.summariesEnabled&&n&&i._getActualBarType(n)&N.Summary&&(e.summariesExistent=!0),t.timeItemsWithLinksSet&&(n?.linkDataItemsSet?.size&&(t.timeItemsWithLinksSet[n.id]=!0),Array.isArray(a.childTimeItems)&&a.childTimeItems.forEach((function(e){var a=i._getDataItem(e,i._timeDataItemsMap);a?.linkDataItemsSet?.size&&(t.timeItemsWithLinksSet[a.id]=!0)})))})),Object.keys(r).forEach((function(e){var t=i._timeDataItemsMap.get(e);t&&(delete t.parentTimeDataItem,delete t.rowDataItem,i.options.autoDisposeOfUnusedItems||i._unusedTimeDataItemsMap.set(t.id,t),i._timeDataItemsMap.delete(t.id),t.selected&&i._selectedTimeDataItemsMap.delete(t.id),delete t.selected)}))}else{if(i.options.summariesEnabled&&Array.isArray(n.timeItems))for(var o=0;o<n.timeItems.length;o++){var s=i._getDataItem(n.timeItems[o],i._timeDataItemsMap);if(s&&i._getActualBarType(s)&N.Summary){e.summariesExistent=!0;break}}t.timeItemsWithLinksSet&&Array.isArray(n.timeItems)&&n.timeItems.forEach((function(e){var a=i._getDataItem(e,i._timeDataItemsMap);a&&a.linkDataItemsSet?.size&&(t.timeItemsWithLinksSet[a.id]=!0),Array.isArray(e.childTimeItems)&&e.childTimeItems.forEach((function(e){var a=i._getDataItem(e,i._timeDataItemsMap);a?.linkDataItemsSet?.size&&(t.timeItemsWithLinksSet[a.id]=!0)}))}))}e.summariesExistent&&((t.barsChangedFlag||a||t.childRowsChangedFlag)&&i._doCalculateSummaryTimeItemsInRow(e,!1,!1),e.oldSummariesExistent||(a=!0)),i._invalidationOfSubRowIndexesOfBarsInRowsDeactivated||!t.barsChangedFlag&&!a||(i.options.automaticCalculationOfSubRowIndexesOfBarsInRow?i._calculateSubRowIndexesOfBarsInRow(e):i._invalidRowDataItemIDsForSubRowIndexesMap[e.id]=!0),i._updateOfRowsNeeded=!0,!this&&this._super()},_determineFrameRectD3:function(e){var t=this,a=t._super(e);if(!a){var n=t._getDataItem(e,t._timeDataItemsMap);if(n){var r=n.elem;if(r){var o=t._determineBodyAreaIndex(n.rowDataItem),s=t.getItemBoundingRect(e);if(s){var l,c,d=-3+s.xOffset,m=-3+s.yOffset;return t.options.barSelectionFramesShownWithHigherZOrder?(d+=n.newX,m+=n.newY+n.rowDataItem.visibleRowDataItem.newY,l=t.convertXToLimitedX(d),c=t.convertXToLimitedX(d+s.width+6),a=t._barSelectionFramesD3[o].append("rect")):(l=d,c=d+s.width+6,a=i.select(r).append("rect")),a.attr("x",l).attr("y",m).attr("rx",3).attr("ry",3).attr("width",c-l).attr("height",s.height+6).attr("class",t.NXXXXX.TEMP_MARKING_CLASS),t.options.itemHighlightingColor&&a.style("stroke",t.options.itemHighlightingColor),a}}}}return a},_PE_OnDragEvent_Interaction:function(){return P.Move},_isAdditionalRowSelectionCurrentlyPossible:function(){return!this&&this._super(),!this._selectedTimeDataItemsMap.size&&!this._selectedLinkDataItemsMap.size},_PE_SelectRow_111:function(e){e.oldSelectedTimeItems=Array.from(this._selectedTimeDataItemsMap.values()).map((e=>e.item)),!this&&this._super()},_PE_SelectedRowItems_01:function(e){var t=this;e.length&&(t.options.timeItemsHaveSameReferenceAsRowItems||t._changeTimeItemSelection([]),t._changeLinkItemSelection([])),!this&&this._super()},_determineRowMainHeight:function(e){return!this&&this._super(),this._getRowMainHeight(e)},_determineCellWidth:function(e,t,a,i){return!this&&this._super(),i},_determineLastColumnWidth:function(e,t){return!this&&this._super(),t},_determineTableRowClasses:function(e,t){var a=this._super(e,t);return this._enrichClass(e,a,{elemType:t,level:e.level})},_PE_LastColumnWidth:function(e,t){return t},_determineTableRowWidth:function(){return!this&&this._super(),Math.max(this.actualTableWidth(),this.actualTableViewWidth())},_determineXOffsetOfFirstFixedSucceedingTableColumn:function(){return!this&&this._super(),this._layoutColumns[se.Table].innerViewExtent()-this._fixedTableColumnsWidthSucceeding},_determineScrollableWidth:function(){return!this&&this._super(),Math.max(this.actualTableViewWidth(),this._actualScrollableWidth(se.Table))},_determineSucceedingColumnXOffset:function(){return!this&&this._super(),this._layoutColumns[se.Table].innerViewExtent()-this._fixedTableColumnsWidthSucceeding},_updateAfterColumnResize:function(e,t,a){e!==t.length-1?this._setViewWidth(se.Table,this._tableViewWidthAtStartDrag):this._setViewWidth(se.Table,this._layoutColumns[se.Table].innerViewExtent()+a),this._tableViewChanged(!0,!0),!this&&this._super()},_determineSpecificActualTableWidth:function(){return!this&&this._super(),this._layoutColumns[se.Table].innerViewExtent()},_doCreateRowContent:function(e,t,a,i,n,r){this._super(e,t,a,i,n,r),r!==E.AncestorsNeeded&&this._createTimeAreaRow(e,t,a,n,r)},_handleVirtualizationStatusAfterCreateRow:function(e,t,a){e.virtualizationStatus===C.Unrealized&&(this._createTimeAreaRow(e,void 0,!0,t,a,!0),e.virtualizationStatus=C.Precalculated),!this&&this._super()},_detachRowContents:function(e,t){var a=this;delete e.datum().zOrdersToBarLayersD3Maps,e.selectAll($t).each((function(e){a._detachTimeDataItem(e,i.select(this),t)})),!this&&this._super()},_verSBLayoutColumn:function(){return!this&&this._super(),se.TimeArea},getDefaultWidthForLayoutColumn:function(e){return!this&&this._super(),e===se.Table?0:1/0},_innerClientXToLayoutColumn:function(e){return e>=this._actualLayoutColumnLeft(se.TimeArea)&&e<this._actualInnerLayoutColumnRight(se.TimeArea)?se.TimeArea:this._super(e)},_setViewWidth:function(e,t){var a;e===se.Table&&(a=this._layoutColumns[e].innerViewExtent()),this._super.apply(this,arguments),e===se.Table&&a!==t&&(this._tableViewWidthChanged=!0)},getAndClearTableViewWidthChanged:function(){let e=this._tableViewWidthChanged;return this._tableViewWidthChanged=!1,e},_determineTableRowElemD3:function(e){return!this&&this._super(),i.select(e.foregroundRowElem).select("."+this.NXXXXX.TABLE_ROW_CLASS)},_PE_SetTimeAreaViewScrollOffset:function(e,t){this._timeAxis.timeAreaViewScrollOffset(e,t),this._layoutColumns[se.TimeArea].scrollStart(this._timeAxis.timeAreaViewScrollOffset())},_ignoreNextScrollEvents:function(e,t){this._super(e,t),void 0!==t&&t!==se.TimeArea||(this._ignoreNextScrollEvents[se.TimeArea]=[e,e])},_doDetermineItemByPageCoordinates:function(e,t){if(this._pointToSVGRelative(this._foregroundBodyD3s[oe.MainBody].node(),e,t).x<this.actualTableViewWidth()+this.options.splitterWidth)return this._super(e,t);let a=document.elementFromPoint(e,t);if(a){if(a.parentNode.getAttribute("class")===Bt){let n=this._findRowDataItemAtY(t),r=i.select(a.parentNode).property(this._OBJECT_ID_PROPERTY),o=this._determineDateAreasForRowDataItem(n);if(Array.isArray(o)){let a=o.find((e=>e.id===r));return{sender:a,entryIndex:this._findDateAreaEntry(a,{pageX:e,pageY:t}),eventType:"tooltip",rowItem:n.item,elemType:j.DateArea}}}if(a.getAttribute("class")===et)return null;let n=i.select(a).datum();if(n?.id&&n.item){if(this._rowDataItemsMap.get(n.id)===n)return{item:n.item,elemType:j.Row};if(this._timeDataItemsMap.get(n.id)===n)return{item:n.item,elemType:j.Bar};if(this._linkDataItemsMap.get(n.id)===n)return{item:n.item,elemType:j.Link}}}},_getChartSizeForWorldView:function(){var e=this._super();return this._timeAxis&&(e.width+=this._timeAxis.actualTimeAreaWidth()),e.widthPx=2,e},_renderCompleteWorldView:function(){var e=this;if(e._super(),e._foregroundBodyD3s&&e._worldViewDivElem){var t=e._worldViewDivElem._worldViewCanvasWidget,a=e.actualTableWidth(),n=e._getChartSizeForWorldView(),r=function(r){if(Array.isArray(e.options.dateLines)){var o=e._timeAxis,s=o.actualStart(),l=o.actualEnd(),c=function(e){if(e&&"none"!==e)return e.split(/, /).map((function(e){return parseFloat(e)}))};e.options.dateLines.forEach((function(d){if(d.id&&!1!==d.inForeground===r){var m=i.select(e._dateLineIDsToSVGElementsMap[d.id]).select("line").node(),u=d.date;if(d.date&&d.date>=s&&d.date<l){var h=a+o.convertDateToX(u);t.drawLine(S.DateLines,{strokeStyle:window.getComputedStyle(m).stroke,lineDash:c(window.getComputedStyle(m).getPropertyValue("stroke-dasharray")),lineWidth:1},{x0:h,y0:e.options.titleHeight,y0Px:1,x1:h,y1:n.height,xPx:1,y1Px:n.heightPx})}}}))}};r(!1),t.drawLine(S.Content,{strokeStyle:"black",lineWidth:1},{x0:a,y0:0,x1:a,y1:n.height,y1Px:n.heightPx-1});var o=e._timescaleD3s[0].select(".ntimescale-ribbon-cell-rect:not(.ntimescale-ribbon-cell-weekend),.ntimescale-ribbon-cell-rect");if(o.size()&&t.fillRect(S.Content,{fillStyle:window.getComputedStyle(o.node()).fill},{left:a,leftPx:1,top:0,width:n.width-a,height:e.options.titleHeight}),t.drawLine(S.Content,{strokeStyle:"black",lineWidth:1},{x0:a,y0:e.options.titleHeight,x1:n.width,y1:e.options.titleHeight,x1Px:1}),e._actualBodyAreaSeparatorHeight()){var s=e.options.titleHeight+e._layoutRows[oe.BodyAtTheTop].extent();t.drawLine(S.Content,{strokeStyle:"black",lineWidth:1},{x0:a,y0:s,x1:n.width,y1:s,xPx:n.widthPx,yPx:1})}r(!0),t.drawLine(S.Content,{strokeStyle:"black",lineWidth:1},{x0:n.width,y0:0,x1:n.width,y1:n.height,xPx:n.widthPx-1,y1Px:n.heightPx-1})}},_onViewRectMovedInWorldView:function(e){var t=this;t._super.apply(t,arguments);var a=[e.newLeftTop.x],i=[e.newLeftTop.y];e.viewRect.tableBase_colIndex&&(a[0]-=t._layoutColumns[0].extent()),e.viewRect.tableBase_rowIndex&&t._layoutRows[0].innerViewExtent()&&(i[0]-=t._layoutRows[0].extent()),t.scrollTo(a[e.viewRect.tableBase_colIndex],a[1-e.viewRect.tableBase_colIndex],i[1-e.viewRect.tableBase_rowIndex],i[e.viewRect.tableBase_rowIndex])},_clearAdditionalLayoutGridColumnsInWorldView:function(e,t,a,i,n){this._super.apply(this,arguments),e.clearRect(S.Selection,{left:a,leftPx:1,top:i,topPx:n,width:this._timeAxis.actualTimeAreaWidth(),height:t.totalHeight})},_renderCachedRowInWorldView:function(e,t){var a=this;if(a._super.apply(this,arguments),e.totalHeight){var i=a._worldViewDivElem._worldViewCanvasWidget;if(!t||t.indexOf("C")>=0){var n=a._getTopOfRowDataItemForWorldView(e);i.clearRect(S.Content,{left:a._tableWidth,leftPx:1,top:n.top,topPx:n.topPx,width:a._timeAxis.actualTimeAreaWidth(),height:e.totalHeight});var r=e.worldViewBarCacheMap;r&&Object.keys(r).forEach((function(e){var t=r[e];i[t.method].apply(i,t.args)}))}}}},ta=o.extendClass("nGanttWidget",A,ea);ta.CALGRID_CLASS=Xe,ta.CALGRID_WEEKEND_CLASS=Ue,ta.WIDGET_CLASS="ngantt-widget",ta.NAMESPACE=Yt,ta.ROW_HEIGHT_PROP_CLASS=Mt,ta.BAR_WIDTH_DEPENDENT_PROP_CLASS=We,ta.TREEVIEW_LINE_CLASS="ngantt-treeview-line",ta.BarInteractions=P,ta.BarType=G,ta.BarShape=H,ta.BarSnapTargets=X,ta.ConstraintType=Y,ta.DateLineGridRecurrence=z,ta.DateLineLabelOrientation=$,ta.DisplayedElements=Z,ta.ElemType=j,ta.HorizontalAlignment=K,ta.LinkType=Q,ta._LinkTypeFlags={SourceStart:2,TargetEnd:1},ta.RowInteractions=b,ta.TableRowDefinitionType=ta.TableRowDefinitionTypes=te,ta.TimeAxisZoom=ae,e.exports=ta},651:(e,t,a)=>{var i=a(280).nInternalDefines,n={LayoutRow:Object.assign({},i.LayoutRow),LayoutColumn:Object.assign({},i.LayoutColumn,{TimeArea:1,Splitter:2}),LayoutElements:Object.assign({},i.LayoutElements),TitleArea:Object.assign({},i.TitleArea)};e.exports=n},473:(e,t,a)=>{var i=a(199),n=i.PortDirections,r=i.RoutingType,o=function(e){if(!(this instanceof o))return new o(e);this.options=Object.assign({},{sourcePortSectionExtent:5,targetPortSectionExtent:5,routingType:r.Curved,timeAxis:null,xCoordinateLimiter:null},e);var t=e.xCoordinateLimiter;this._transformXToLimitedX=t?function(e){return t.transform(e)}:function(e){return e}};Object.assign(o.prototype,{determinePath:function(e){return(void 0!==e.routingType?e.routingType:this.options.routingType)===r.Orthogonal?this._determineOrthogonalPath(e):this._determineCurvedPath(e)},_determineCurvedPath:function(e){var t={x:e.source.x,y:e.source.y},a={x:e.target.x,y:e.target.y},i=function(e){return Math.floor(e.x)+","+Math.floor(e.y)},r=this._transformXToLimitedX;switch(e.source.portDirection){case n.Left:t.x+=this.options.sourcePortSectionExtent;break;case n.Right:t.x-=this.options.sourcePortSectionExtent;break;case n.Up:t.y-=this.options.sourcePortSectionExtent;break;case n.Down:t.y+=this.options.sourcePortSectionExtent}switch(e.target.portDirection){case n.Left:a.x-=this.options.targetPortSectionExtent;break;case n.Right:a.x+=this.options.targetPortSectionExtent;break;case n.Up:a.y-=this.options.targetPortSectionExtent;break;case n.Down:a.y+=this.options.targetPortSectionExtent}var o={},s={};switch(e.source.portDirection){case n.Left:case n.Right:o.x=r((t.x+a.x)/2),o.y=t.y;break;case n.Up:case n.Down:o.x=r(t.x),o.y=(t.y+a.y)/2}switch(e.target.portDirection){case n.Left:case n.Right:s.x=r((a.x+t.x)/2),s.y=a.y;break;case n.Up:case n.Down:s.x=r(a.x),s.y=(a.y+t.y)/2}return t.x=r(t.x),a.x=r(a.x),"M"+i(t)+"C"+i(o)+" "+i(s)+" "+i(a)},_determineOrthogonalPath:function(e){var t=this._transformXToLimitedX,a=this.options.timeAxis,i="",r=e.source,o={x:r.x,y:r.y},s=e.target,l={x:s.x,y:s.y};if(r.portDirection===n.Left?o.x-=this.options.sourcePortSectionExtent:r.portDirection===n.Right&&(o.x+=this.options.sourcePortSectionExtent),s.portDirection===n.Left?l.x-=this.options.targetPortSectionExtent:s.portDirection===n.Right&&(l.x+=this.options.targetPortSectionExtent),r.y===s.y&&r.portDirection===n.Up&&s.portDirection===n.Up){var c=Math.abs(r.x-s.x),d=this.options.sourcePortSectionExtent+this.options.targetPortSectionExtent;if(c<d){var m=(d-c)/2;r.y>s.x&&(m=-m),r.x-=m,s.x+=m}}var u=void 0;if(i+="M"+t(r.x)+","+r.y,r.y===s.y&&r.portDirection&(n.Left|n.Right)&&s.portDirection&(n.Left|n.Right)&&(u=r.y),void 0===u&&(r.y===s.y&&r.portDirection===n.Right&&s.portDirection===n.Left||r.portDirection===n.Right&&l.x>=o.x||r.portDirection===n.Left&&l.x<=o.x))if(a){var h=a.convertXToDate(Math.min(l.x,o.x)+1),p=a.convertXToDate(Math.max(l.x,o.x)-2);r.allocatedTimeSpans&&r.allocatedTimeSpans.isTimeSpanAllocated(h,p)||(u=r.y)}else u=r.y;return void 0===u&&(s.portDirection===n.Right&&l.x<=o.x||s.portDirection===n.Left&&l.x>=o.x)&&(a?(h=this.options.timeAxis.convertXToDate(Math.min(l.x,o.x)+1),p=this.options.timeAxis.convertXToDate(Math.max(l.x,o.x)-2),s.allocatedTimeSpans&&s.allocatedTimeSpans.isTimeSpanAllocated(h,p)||(u=s.y)):u=s.y),void 0===u&&l.x>=o.x&&(r.portDirection===n.Down?u=r.yBelow:r.portDirection===n.Up&&(u=r.yAbove)),void 0===u&&(u=s.y>r.y?r.yBelow:r.yAbove),i+="H"+t(o.x),i+="V"+u,i+="H"+t(l.x),i+="V"+s.y,i+="H"+t(s.x)}}),o.PortDirections=n,o.RoutingType=r,e.exports=o},717:(e,t,a)=>{var i=a(199),n=i.NGANTT_BAR_RECT_CLASS,r=i.NGANTT_BAR_PATH_CAL_CLASS,o=i.NGANTT_BAR_RECT_CAL_CLASS,s=i.NGANTT_BAR_PATH_PATTERN_CLASS,l=i.NGANTT_BAR_OUTLINE_CLASS,c=i.NGANTT_BAR_PHANTOM_NONWORK_CLASS,d=i.NGANTT_BAR_WIDTH_DEPENDENT_PROP_CLASS,m=i.NGANTT_COMPOUND_BAR_BACKGROUND_CLASS,u=i.NGANTT_COMPOUND_BAR_FOREGROUND_CLASS,h=[n,r,d].join(" "),p=[n,o].join(" "),_=[n,s].join(" "),g=[n,l].join(" "),T=`rect.${n},path.${n}`,f=`path.${o}`,D=`rect.${s}`,v=`rect.${l}`,y=`path.${c}`,w=i.BarType,S=i.ElemType,I=i.TimeType,A=a(853),b=function(){};Object.assign(b.prototype,{createBar:function(e){var t=e.barD3.classed(m),a=e.barD3.classed(u),i=!e.nwtColorVisible&&t||a,n=t||a,r={elemType:S.BarRectangle,shape:e.barShapeId};e.respectingCalendar?i||(e.barD3.append("rect").attr("class",e.enrichClassFunc(h,r)).attr("height",e.barHeight),e.barD3.append("path").attr("class",e.enrichClassFunc(p,r))):e.barD3.append("rect").attr("class",e.enrichClassFunc(h,r)).attr("height",e.barHeight),null==e.dataItem.item.fillPatternType||i||e.barD3.append("rect").attr("class",e.enrichClassFunc(_,r)).attr("height",e.barHeight).attr("mask",`url(#ngantt-pattern-mask${e.uniqueID}-${e.dataItem.item.fillPatternType})`),e.showProgress&&(A.createProgressBar(e),A.createPredictedEndBar(e)),(n||A.separateBarShapeOutlinesEnabled&&!e.dataItem.parentTimeDataItem?.item.barShape)&&(e.barD3.selectAll(T).style("stroke-width",0),e.barD3.append("rect").attr("class",e.enrichClassFunc(g,r)).attr("height",e.barHeight)),t||A.createConstraintSymbols(e)},positionBar:function(e){var t=e.barHeight,a=e.barD3;if(a){var i=!e.calendar||e.calendar.determineTimeType(e.timeRange.start)===I.WorkingTime,n=e.convertXToLimitedX,r=a.classed(m),o=a.classed(u),s=!e.nwtColorVisible&&r||o,l=r||o,c=t.toString(),d=e.pointerX.toString(),h=e.width,p=h.toString(),_=Math.max(1,h),g=e.calendar,T=e.dataItem,w=!!T.item.start,S=e.timeRange.end.getTime();if(!s){if(g){for(var b=e.timeAxis,E=`M0,${i?c:"0"}`,R=e.timeRange.start,C=n(e.timeAxis.convertDateToX(R)),x=0;null!==(R=g.findStartOfNextTimeTypeChange(R))&&R.getTime()<S;){i=!i;var B=n(b.convertDateToX(R))-C;x=B,E=`${E}H${B}V${i?c:"0"}`}E=x||!i?`${E}${i?"":`H${p}V${c}`}H0V0`:"",a.select(f).attr("d",E)}null!=T.item.fillPatternType&&a.select(D).attr("width",w?_:0)}if((l||A.separateBarShapeOutlinesEnabled&&!T.parentTimeDataItem?.item.barShape)&&a.select(v).attr("width",w?_:0),e.draggingLeftSide||e.draggingRightSide){var L="";e.openOnLeftSide?L=`M${d},${c}H0M${d},${c}V0M${d},0H0`:e.openOnRightSide&&(L=`M${p},0H${d}M${d},0V${c}M${p},${c}H${d}`),a.select(y).attr("d",L)}e.calculateProgressFunc&&(A.positionProgressBar(e),A.positionConstraintSymbols(e),A.positionPredictedEndBar(e))}if(o&&e.barD3.select(v).style("pointer-events",h>0?null:"visibleStroke"),e.worldViewVisible){let a=e.worldViewBarWidth;e.worldViewPathData=[{x:0,y:0},{x:a,y:0},{x:a,y:t},{x:0,y:t},{x:0,y:0}]}},checkForBarType:function(e){return e===w.StartEnd||e===w.StartDuration||e===w.EndDuration}}),e.exports=b},634:(e,t,a)=>{var i=a(199),n=i.NGANTT_BAR_RECT_CLASS,r=i.NGANTT_BAR_PATH_CAL_CLASS,o=i.NGANTT_BAR_RECT_CAL_CLASS,s=i.NGANTT_BAR_PATH_PATTERN_CLASS,l=i.NGANTT_BAR_OUTLINE_CLASS,c=i.NGANTT_BAR_PHANTOM_NONWORK_CLASS,d=i.NGANTT_COMPOUND_BAR_BACKGROUND_CLASS,m=i.NGANTT_COMPOUND_BAR_FOREGROUND_CLASS,u=[n,r].join(" "),h=[n,o].join(" "),p=[n,s].join(" "),_=[n,l].join(" "),g=`path.${n}`,T=`path.${o}`,f=`path.${r}`,D=`path.${s}`,v=`path.${l}`,y=`path.${c}`,w=i.BarType,S=i.ElemType,I=i.TimeType,A=a(853),b=function(){};Object.assign(b.prototype,{createBar:function(e){var t=e.barD3,a=t.classed(d),i=t.classed(m),n=!e.nwtColorVisible&&a||i,r=a||i,o={elemType:S.BarRectangle,shape:e.barShapeId};e.respectingCalendar?n||(t.append("path").attr("class",e.enrichClassFunc(u,o)),t.append("path").attr("class",e.enrichClassFunc(h,o))):t.append("path").attr("class",e.enrichClassFunc(u,o)),null==e.dataItem.item.fillPatternType||n||t.append("path").attr("class",e.enrichClassFunc(p,o)).attr("mask",`url(#ngantt-pattern-mask${e.uniqueID}-${e.dataItem.item.fillPatternType})`),e.showProgress&&(A.createProgressBar(e),A.createPredictedEndBar(e)),(r||A.separateBarShapeOutlinesEnabled&&!e.dataItem.parentTimeDataItem?.item.barShape)&&(t.selectAll(g).style("stroke-width",0),t.append("path").attr("class",e.enrichClassFunc(_,o))),a||A.createConstraintSymbols(e)},positionBar:function(e){var t=e.barHeight;if(e.barD3){var a,i,n=e.calendar,r=e.pointerX,o=e.barCornerWidth,s=e.dataItem,l=!!s.item.start,c=e.timeAxis,u=e.convertXToLimitedX,h=e.timeRange.start,p=n?.determineTimeType(h)===I.WorkingTime??!0,_=u(c.convertDateToX(h)),g=e.timeRange.end.getTime(),w=l&&s.parentTimeDataItem,S=e.considerPhantomStart&&w?.phantomDataItem,b=S?S.start:l&&s.parentTimeDataItem?.item.start,E=b?Math.min(u(c.convertDateToX(b))-_,o):0,R=(e.draggingLeftSide?Math.min(r,E):E)+o,C=Math.max(R,0),x=Math.max(0,e.width),B=e.barD3.classed(d),L=e.barD3.classed(m),O=!e.nwtColorVisible&&B||L,M=B||L,V=t.toString(),F=r.toString();if(x){if(i=`M0,${V}V${C}`,O||(a=p?`M0,${V}`:`M0,${V}V${C}`),i=`${i=x<C?`${i}L${x},${C-x}`:`${i}${C?`L${C},0`:""}H${x}`}V${V}H0`,!O){if(n){for(var k=0,N=h;null!==(N=n.findStartOfNextTimeTypeChange(N))&&N.getTime()<g;){p=!p;var W=u(c.convertDateToX(N))-_;a=p?`${a=k<R?W<=R?`${a}L${W},${R-W}`:`${a}L${R},0H${W}`:`${a}H${W}`}V${V}`:W<R?`${a}H${W}V${R-W}`:`${a}H${W}V0`,k=W}!k&&p?a="":p||(x<C?a=`${a}L${x},${C-x}`:(k<C&&(a=`${a}L${C},0`),a=`${a}H${x}`),a=`${a}V${V}`)}e.barD3.select(f).attr("d",i),e.barD3.select(T).attr("d",n&&a?`${a}H0`:"")}}else O||(e.barD3.select(f).attr("d",`M0,${V}V0`),e.barD3.select(T).attr("d",""));if((M||A.separateBarShapeOutlinesEnabled&&!s.parentTimeDataItem?.item.barShape)&&e.barD3.select(v).attr("d",l?i??`M0,${V}V0`:""),null==s.item.fillPatternType||O||e.barD3.select(D).attr("d",l?i:""),e.draggingLeftSide||e.draggingRightSide){var P="";e.openOnLeftSide?(P=`M${F},${V}H0M${F},${V}V${o}`,P=R>0?`${P}L0,${R}`:`${P}L${R},0H0`):e.openOnRightSide&&(P=`M${x},`,x<R?(P+=Math.max(R-x,0),P=e.pointerX<R?`${P}L${F},${R-r}`:`${P}L${R},0H${F}`):P=`${P}0H${F}`,P=`${P}M${F},0V${V}M${x},${V}H${F}`),e.barD3.select(y).attr("d",P)}e.calculateProgressFunc&&(A.positionProgressBar(e),A.positionConstraintSymbols(e),A.positionPredictedEndBar(e))}if(L&&e.barD3.select(v).style("pointer-events",x?null:"visibleStroke"),e.worldViewVisible){let a=e.worldViewBarWidth;e.worldViewPathData=[{x:0,y:0},{x:a,y:0},{x:a,y:t},{x:0,y:t},{x:0,y:0}]}},checkForBarType:function(e){return e===w.StartEnd||e===w.StartDuration||e===w.EndDuration}}),e.exports=b},853:(e,t,a)=>{var i=a(199),n=i.NGANTT_CONSTRAINT_LINE_CLASS,r=i.NGANTT_CONSTRAINT_SYMBOL_CLASS,o="ngantt-predicted-end-bar",s="ngantt-progress-bar",l="ngantt-progress-bar-background",c="ngantt-progress-nonworking-bar",d=i.BarShape,m=i.ElemType,u=i.TimeType,h=i.ConstraintType,p={isTextClippingAllowed:function(e){switch(e){case d.Diamond:case d.ArrowLeft:case d.ArrowRight:return!1;default:return!0}},createProgressBar:function(e){var t=e.dataItem.item;t.progressBackgroundVisible&&e.barD3.append("rect").attr("class",l).attr("height",e.ganttWidget.options.progressBarHeight).attr("y",e.barHeight-e.ganttWidget.options.progressBarHeight),t.progress&&(e.respectingCalendar?(e.barD3.append("rect").attr("class",c).attr("height",e.ganttWidget.options.progressBarHeight).attr("y",e.barHeight-e.ganttWidget.options.progressBarHeight),e.barD3.append("path").attr("class",s)):e.barD3.append("rect").attr("class",s).attr("height",e.ganttWidget.options.progressBarHeight).attr("y",e.barHeight-e.ganttWidget.options.progressBarHeight))},positionProgressBar:function(e){var t=e.dataItem.item;if(t){if(t.progressBackgroundVisible){var a=e.convertXToLimitedX,i=e.barD3.select("."+l);if(!i.empty()){var n=a(e.timeAxis.convertDateToX(e.timeRange.end))-(m=a(e.timeAxis.convertDateToX(e.timeRange.start)));i.attr("width",n)}}if(t.progress){a=e.convertXToLimitedX;var r=e.barD3.select("."+s);if(!r.empty()){var o=e.calculateProgressFunc.call(this);if(o){var d=a(e.timeAxis.convertDateToX(o)),m=a(e.timeAxis.convertDateToX(e.timeRange.start)),h=Math.max(0,d-m);if(e.calendar){var p="",_=e.timeRange.start,g=0;if(e.calendar.determineTimeType(_)!==u.WorkingTime&&(_=e.calendar.findStartOfNextTimeTypeChange(_))&&(g=a(e.timeAxis.convertDateToX(_))-m),_&&_.getTime()<o.getTime()){for(;;){(!(_=e.calendar.findStartOfNextTimeTypeChange(_))||_.getTime()>o.getTime())&&(_=o);var T=Math.max(a(e.timeAxis.convertDateToX(_))-m,0);if(p+="M"+g+","+(e.barHeight-e.ganttWidget.options.progressBarHeight)+"H"+T+"V"+e.barHeight+"H"+g+"Z",!(_=e.calendar.findStartOfNextTimeTypeChange(_))||_.getTime()>=o.getTime())break;g=a(e.timeAxis.convertDateToX(_))-m}r.attr("d",p)}}r.attr("width",h),e.barD3.select("."+c).attr("width",h)}}}}},createPredictedEndBar:function(e){e.dataItem.item.predictedEnd&&e.barD3.append("rect").attr("class",o).attr("height",e.ganttWidget.options.predictedEndBarHeight).attr("y",e.barHeight-e.ganttWidget.options.predictedEndBarHeight)},positionPredictedEndBar:function(e){var t=e.dataItem.item;if(t&&t.predictedEnd){var a=e.convertXToLimitedX,i=e.barD3.select("."+o);if(!i.empty()){var n=a(e.timeAxis.convertDateToX(t.predictedEnd)),r=a(e.timeAxis.convertDateToX(e.timeRange.start)),s=a(e.timeAxis.convertDateToX(e.timeRange.end)),l=s-n,c=l<0?s-r:n-r;i.attr("width",Math.abs(l)).attr("x",c)}}},createConstraintSymbols:function(e){var t=e.dataItem.item;if(t.constraints){if(e.rowDataItem.isHidden)return;t.constraints.forEach((function(t,a){e.barD3.insert("line",":first-child").attr("class",e.enrichClassFunc(n+" "+n+a,{elemType:m.ConstraintDateLine,constraintDateIndex:a})).attr("y1",-1).attr("y2",-1),e.barD3.insert("path",":first-child").attr("class",e.enrichClassFunc(r+" "+r+a,{elemType:m.ConstraintDateSymbol,constraintDateIndex:a})),(null==e.dataItem.outerStart||e.dataItem.outerStart>t.date)&&(e.dataItem.outerStart=t.date),(null==e.dataItem.outerEnd||e.dataItem.outerEnd<t.date)&&(e.dataItem.outerEnd=t.date)}))}else e.dataItem.outerStart=e.dataItem.outerEnd=void 0},positionConstraintSymbols:function(e){var t=e.dataItem.item;if(t.constraints){var a=e.convertXToLimitedX,i=a(e.timeAxis.convertDateToX(e.timeRange.start)),o=a(e.timeAxis.convertDateToX(e.timeRange.end));t.constraints.forEach((function(t,s){var l=e.barD3.select("."+r+s);if(!l.empty()){var c=e.timeAxis.convertDateToX(t.date),d=a(c),m=e.barD3.select("."+n+s);d<i?m.attr("visibility",null).attr("x1",d-i).attr("x2",0):d>o?m.attr("visibility",null).attr("x1",d-i).attr("x2",o-i):m.attr("visibility","hidden");var u,p=e.ganttWidget.options.constraintSymbolHeight,_=e.ganttWidget.options.detailedConstraintSymbolsEnabled,g=["M",(d-i).toString(),",-1l",(p/2).toString(),",-",p.toString(),"h-",p.toString(),"Z"].join(""),T=t.date.getTime();switch(t.type){case h.StartNoEarlierThan:u=e.timeRange.start.getTime()<T,_&&(g=["M",(d-i).toString(),",0v-14h1l6,4l-6,4v6Z"].join(""));break;case h.EndNoEarlierThan:u=e.timeRange.end.getTime()<T,_&&(g=["M",(d-i).toString(),",0v-14h7v7h-6v6Z"].join(""));break;case h.StartNoLaterThan:u=e.timeRange.start.getTime()>T,_&&(g=["M",(d-i).toString(),",0v-14h-1l-6,4l6,4v6Z"].join(""));break;case h.EndNoLaterThan:u=e.timeRange.end.getTime()>T,_&&(g=["M",(d-i).toString(),",0v-14h-7v7h6v6Z"].join(""));break;case h.MustStartOn:u=e.timeRange.start.getTime()!==T,_&&(g=["M",(d-i).toString(),",0v-6l",(p/2).toString(),",-",p.toString(),"h-",(p+1).toString(),"l",(p/2).toString(),",",p.toString(),"v6Z"].join(""));break;case h.MustEndOn:u=e.timeRange.end.getTime()!==T,_&&(g=["M",(d-i).toString(),",0v-7h3v-7h-7v7h3v7Z"].join(""))}l.attr("d",g),t.color&&l.style("fill",t.color),e.ganttWidget.options.constraintViolationsVisible&&u&&l.style("fill","#E01818")}}))}}};e.exports=p},875:(e,t,a)=>{var i=a(199),n=i.NGANTT_BAR_RECT_CLASS,r=i.NGANTT_BAR_OUTLINE_CLASS,o=i.NGANTT_BAR_PATH_PATTERN_CLASS,s="ngantt-summary-bar-path",l=i.NGANTT_BAR_TEXT_CLASS,c=i.NGANTT_COMPOUND_BAR_BACKGROUND_CLASS,d=[n,s].join(" "),m=[n,o].join(" "),u=`.${s},.${r}`,h="path."+o,p="."+l+", ."+l+" tspan",_=i.BarType,g=i.ElemType,T=a(853),f=function(){};Object.assign(f.prototype,{createBar:function(e){var t=e.barD3,a={elemType:g.BarRectangle,shape:e.barShapeId};t.append("path").attr("class",e.enrichClassFunc(d,a)),t.append("path").attr("class",e.enrichClassFunc(r,a)),t.classed(c)||T.createConstraintSymbols(e);let i=e.dataItem.item.fillPatternType;null!=i&&t.append("path").attr("class",e.enrichClassFunc(m,a)).attr("mask",`url(#ngantt-pattern-mask${e.uniqueID}-${i})`)},positionBar:function(e){var t=e.barHeight,a=t/2,i=e.barD3;if(i){var n=e.width,r=e.dataItem.item,o=!!r.start,s=`M0,0V${t}L${Math.min(a,n)},${a}H${Math.max(n-a,0)}L${n},${t}V0H0`;i.selectAll(u).attr("d",o?s:""),i.selectAll(p).attr("x",8).attr("y",t),i.classed(c)||T.positionConstraintSymbols(e),null!=r.fillPatternType&&i.select(h).attr("d",o?s:"")}if(e.worldViewVisible){let i=e.worldViewBarWidth;e.worldViewPathData=[{x:0,y:t},{x:Math.min(a,i),y:a},{x:Math.max(i-a,0),y:a},{x:i,y:t},{x:i,y:0},{x:0,y:0},{x:0,y:t}]}},checkForBarType:function(e){return e===_.StartEnd||e===_.StartDuration||e===_.EndDuration}}),e.exports=f},415:(e,t,a)=>{var i=a(571).nDateHelper,n=a(199).TimeUnit,r=a(442);const o={[n.Seconds]:1e3,[n.Minutes]:6e4,[n.Hours]:36e5,[n.Days]:864e5,[n.Weeks]:6048e5,[n.Months]:2629746e3,[n.Quarters]:7889238e3,[n.Years]:31556952e3};var s=function(){if(!(this instanceof s))return new s;this._start=new Date,this._end=new Date(this._start.getTime()+864e5),this._startEndExternallySet=!1,this._baseTimeUnit=n.Seconds,this._baseTimeUnitWidth=1,this._actualTimeAreaWidth=0,this._timeAreaViewWidth=0,this._timeAreaViewScrollOffset=0,this._actualStart=null,this._actualEnd=null,this._actualStartPlusOneSecond=null,this._actualBaseTimeUnitWidth=1,this._currentlyVisibleStart=null,this._currentlyVisibleEnd=null,this._collapseCalendar=null,this._isCachingEvents=!1,this._eventArgsCached=null,this._eventIsPending=!1,this._lastDate=null,this._lastDuration=0,this._visualZoomFactor=1};Object.assign(s.prototype,{cacheEvents:function(){this._isCachingEvents=!0},triggerCachedEvents:function(){this._isCachingEvents=!1,this._eventArgsCached&&(this._trigger(this._eventArgsCached),this._eventArgsCached=null)},anythingChangedCallback:function(e){return void 0!==e&&(this._eventFunc=e),this._eventFunc},_anyTimePropertyChanged:function(){var t=this._collapseCalendar;this._timeRangeHasWorkingTime=this._end>this._start&&r.hasWorkingTime(t,this._end,this._start),this._timeRangeHasWorkingTime||(t=null),this._baseTimeUnitInMilliseconds=1e3*e.exports.timeUnitToSeconds(this._baseTimeUnit);var a=this._actualBaseTimeUnitWidth,i=this._actualStart,n=this._actualEnd,o=this._actualTimeAreaWidth;this._actualStart=this._start,this._timeRangeHasWorkingTime||a===this._actualBaseTimeUnitWidth&&this._start.getTime()==i?this._actualStartPlusOneSecond=null:this._actualStartPlusOneSecond=new Date(this._actualStart.getTime()+1e3),this._actualEnd=this._end;var s,l=(this._timeRangeHasWorkingTime?r.calculateWorkingTime(t,this._end,this._start):1e3)/this._baseTimeUnitInMilliseconds;l<1&&(l=1,null!==(s=r.addWorkingTime(t,this._actualStart,l*this._baseTimeUnitInMilliseconds))&&(this._actualEnd=s)),this._actualBaseTimeUnitWidth=this._baseTimeUnitWidth,this._actualTimeAreaWidth=Math.ceil(l*this._baseTimeUnitWidth-1e-4),this._actualTimeAreaWidth<100&&(this._timeRangeHasWorkingTime||!this._collapseCalendar)&&(this._actualTimeAreaWidth=100,0!==this._baseTimeUnitWidth&&null!==(s=r.addWorkingTime(t,this._actualStart,this._actualTimeAreaWidth/this._baseTimeUnitWidth*this._baseTimeUnitInMilliseconds))&&(this._actualEnd=s)),(this._actualTimeAreaWidth<this._timeAreaViewWidth||!this._timeRangeHasWorkingTime&&this._collapseCalendar)&&(this._actualBaseTimeUnitWidth=this._timeAreaViewWidth/l,this._actualTimeAreaWidth=this._timeAreaViewWidth);var c=this.convertDateToX(this._actualEnd);c<this._timeAreaViewScrollOffset+this._timeAreaViewWidth-1&&(this._timeAreaViewScrollOffset=c-this._timeAreaViewWidth+1);var d=!1;if((this._actualBaseTimeUnitWidth!==a||this._actualStart!=i||this._actualEnd!=n||this._actualTimeAreaWidth!=o)&&(d=!0),this._currentlyVisibleStart=this.convertXToDate(this._timeAreaViewScrollOffset),this._currentlyVisibleEnd=this.convertXToDate(this._timeAreaViewScrollOffset+this._timeAreaViewWidth-1),d){delete this._fittedTimeAreaViewStart,delete this._fittedTimeAreaViewEnd;var m={sender:this};this._isCachingEvents?this._eventArgsCached||(this._eventArgsCached=m):this._trigger(m)}},_trigger:function(e){!this._eventIsPending&&this._eventFunc&&this._eventFunc(e)},convertDateToX:function(e,t,a){var i,n,s,l=a?null:this._collapseCalendar;if(l&&this._lastDate&&this._lastDate<e?(i=this._lastDate,n=this._lastDuration):(i=this._actualStart,n=0),this._timeRangeHasWorkingTime?s=r.calculateWorkingTime(l,e,i):(a=!0,s=e>this._actualStart?2*this._baseTimeUnitInMilliseconds:e<this._actualStart?-this._baseTimeUnitInMilliseconds:0),null!==s){s+=n;var c=Math.floor(s/o[this._baseTimeUnit]*this._actualBaseTimeUnitWidth+.1);return!1===t&&(c<0?c=0:c>=this._actualTimeAreaWidth&&(c=this._actualTimeAreaWidth-1)),a||(this._lastDate=e,this._lastDuration=s),c}return null},setFittedTimeAreaViewStartAndEnd:function(e,t){this._fittedTimeAreaViewStart=new Date(e),this._fittedTimeAreaViewEnd=new Date(t)},convertXToDate:function(e,t,a){var n=this,s=n._timeRangeHasWorkingTime?n._collapseCalendar:null,l=r.addWorkingTime(s,n._actualStart,e*o[n._baseTimeUnit]/n._actualBaseTimeUnitWidth);if(a&&null!==l){var c=r.addWorkingTime(s,n._actualStart,(e+1)*o[n._baseTimeUnit]/n._actualBaseTimeUnitWidth);null!==c&&(c=new Date(c.valueOf()-1),l=i.determineBestDateBetween(l,c))}if(null===l)return e>0?n.actualEnd():n._actualStart;if(l.setMilliseconds(0),!1===t){if(l<n._actualStart)return n._actualStart;if(l>n._actualEnd)return n._actualEnd}if(n._timeRangeHasWorkingTime||!n._collapseCalendar){var d,m="uncalculated";if(![n._fittedTimeAreaViewStart,n._fittedTimeAreaViewEnd,n._actualStart,n._actualEnd].every((function(t){return!(t&&l.getTime()<t.getTime()&&("uncalculated"==m&&(m=r.addWorkingTime(s,n._actualStart,(e+1)*o[n._baseTimeUnit]/n._actualBaseTimeUnitWidth)),!m||m.getTime()>t.getTime())&&(d=new Date(t),1))})))return d}return l},hasCollapsedTimeAtX:function(e){if(!this._collapseCalendar)return!1;var t=this.convertXToDate(e,!0),a=this.convertXToDate(e+1,!0);return r.calculateWorkingTime(this._collapseCalendar,a,t)<a-t},start:function(){return 0===arguments.length?this._start:(this._start.getTime()!==arguments[0]?.getTime()&&(this._start=new Date(arguments[0]),this._anyTimePropertyChanged()),this)},end:function(){return 0===arguments.length?this._end:(this._end.getTime()!==arguments[0]?.getTime()&&(this._end=new Date(arguments[0]),this._anyTimePropertyChanged()),this)},startAndEnd:function(e,t){if(!(arguments.length<=1)){var a=new Date(this._currentlyVisibleStart);this.start(e),this.end(t),this._startEndExternallySet&&(a<e?this.timeAreaViewScrollOffset(Math.max(0,this.convertDateToX(e))):t<a?this.timeAreaViewScrollOffset(Math.max(0,this.convertDateToX(t)-this._timeAreaViewWidth+1)):this.timeAreaViewScrollOffset(Math.max(0,this.convertDateToX(a)))),this._startEndExternallySet=!0}},baseTimeUnit:function(){return 0===arguments.length?this._baseTimeUnit:(this._baseTimeUnit!=arguments[0]&&(this._baseTimeUnitWidth=this._baseTimeUnitWidth/e.exports.timeUnitToSeconds(this._baseTimeUnit)*e.exports.timeUnitToSeconds(arguments[0]),this._baseTimeUnit=arguments[0],this._anyTimePropertyChanged()),this)},baseTimeUnitWidth:function(){return 0===arguments.length?this._baseTimeUnitWidth:(this._baseTimeUnitWidth!==arguments[0]&&(this._baseTimeUnitWidth=arguments[0],this._anyTimePropertyChanged()),this)},setResolution:function(t,a){this.baseTimeUnitWidth(a/e.exports.timeUnitToSeconds(t)*e.exports.timeUnitToSeconds(this._baseTimeUnit))},getResolution:function(t){return this._baseTimeUnitWidth/e.exports.timeUnitToSeconds(this._baseTimeUnit)*e.exports.timeUnitToSeconds(t)},timeAreaViewWidth:function(){if(0===arguments.length)return this._timeAreaViewWidth;if(this._timeAreaViewWidth!==arguments[0]){this._timeAreaViewWidth=arguments[0];var e=this._isCachingEvents;e||(this._isCachingEvents=!0),this._anyTimePropertyChanged();var t=this._actualTimeAreaWidth-this._timeAreaViewWidth;this._timeAreaViewScrollOffset>t&&(this._timeAreaViewScrollOffset=t),this._eventArgsCached||(this._eventArgsCached={sender:this}),e||this.triggerCachedEvents()}return this},synchronizationNeeded:function(e){return this.start().getTime()!==e.start().getTime()||this.end().getTime()!==e.end().getTime()||this.baseTimeUnit()!==e.baseTimeUnit()||this.baseTimeUnitWidth()!==e.baseTimeUnitWidth()||this.collapseCalendar()!==e.collapseCalendar()||this.timeAreaViewScrollOffset()!==e.timeAreaViewScrollOffset()},synchronizeWith:function(e){if(this.synchronizationNeeded(e)){var t=this._isCachingEvents;t||this.cacheEvents(),this.start(e.start()),this.end(e.end()),this.baseTimeUnit(e.baseTimeUnit()),this.baseTimeUnitWidth(e.baseTimeUnitWidth()),this.collapseCalendar(e.collapseCalendar()),this.timeAreaViewScrollOffset(e.timeAreaViewScrollOffset()),t||this.triggerCachedEvents()}},timeAreaViewScrollOffset:function(){if(0===arguments.length)return Math.round(this._timeAreaViewScrollOffset);var e=arguments[0],t=Math.max(0,e),a=this._actualTimeAreaWidth-this._timeAreaViewWidth;if(t>a&&(t=a),this._timeAreaViewScrollOffset!==e&&(this._timeAreaViewScrollOffset=t,this._currentlyVisibleStart=this.convertXToDate(this._timeAreaViewScrollOffset),this._currentlyVisibleEnd=this.convertXToDate(this._timeAreaViewScrollOffset+this._timeAreaViewWidth-1),!arguments[1])){var i={sender:this};this._isCachingEvents?this._eventArgsCached||(this._eventArgsCached=i):this._trigger(i)}return this},rescale:function(e,t){var a=this._isCachingEvents;a||(this._isCachingEvents=!0);var i=this._timeAreaViewScrollOffset,n=this._actualBaseTimeUnitWidth;if(this._baseTimeUnitWidth=t,this._anyTimePropertyChanged(),(t=this._actualBaseTimeUnitWidth)!=n){var r=i*t/n+e*(t/n-1)/this.visualZoomFactor();r<0&&(r=0),this._timeAreaViewScrollOffset=r,this._anyTimePropertyChanged()}a||(this._eventArgsCached&&(this._eventArgsCached.centerCoordinateOnRescaling=i),this.triggerCachedEvents())},actualTimeAreaWidth:function(){return this._actualTimeAreaWidth},actualStart:function(){return this._actualStart},actualEnd:function(){return r.hasWorkingTime(this._collapseCalendar,this._actualEnd,this._actualStart)?this._actualEnd:this._actualStartPlusOneSecond},currentlyVisibleStart:function(){return this._currentlyVisibleStart},currentlyVisibleEnd:function(){return this._currentlyVisibleEnd},actualTimeRangeIncludesWorkingTime:function(){return this._timeRangeHasWorkingTime},isDateVisible:function(e){var t=e.valueOf();return this._actualStart.getTime()<=t&&t<this._actualEnd.getTime()},isDateNotVisible:function(e){var t=e.valueOf();return this._actualStart>t?-1:t>this._actualEnd?1:0},isDateBeforeStart:function(e){return this._actualStart>e.valueOf()},isDateAfterEnd:function(e){return this._actualEnd<e.valueOf()},actualBaseTimeUnitWidth:function(){return this._actualBaseTimeUnitWidth},actualWidthPerSecond:function(){return this._actualBaseTimeUnitWidth/e.exports.timeUnitToSeconds(this._baseTimeUnit)},collapseCalendar:function(){return 0===arguments.length?this._collapseCalendar:((this._collapseCalendar!==arguments[0]||arguments[1])&&(this._collapseCalendar=arguments[0],this._lastDate=null,this._lastDuration=0,this._anyTimePropertyChanged()),this)},addTimeUnit:function(e,t){return e.setTime(e.getTime()+o[t]),e},visualZoomFactor:function(){return 0===arguments.length?this._visualZoomFactor:(this._visualZoomFactor!==arguments[0]&&(this._visualZoomFactor=arguments[0]),this)}}),s.timeUnitToSeconds=function(e){return o[e]/1e3},s.TimeUnit=n,e.exports=s},675:(e,t,a)=>{var i=a(680),n=a(337),r=a(571),o=r.nClassFactory,s=r.nCursorHelper,l=r.nDateHelper,c=r.nDOMHelper.eventListenerHelper,d=r.nEventDispatcher,m=r.nLocale,u=r.nLocales,h=r.nSubsequentIDGenerator,p=r.nWidget,_=a(199).TimeUnit,g=".ntimescale",T="ntimescale-ribbon",f="ntimescale-ribbon-cell",D="ntimescale-ribbon-cell-rect",v="ntimescale-ribbon-cell-rect-hover",y="ntimescale-scroll-handle",w="ntimescale-scroll-handle-version2",S="ntimescale-scroll-handle-background",I="ntimescale-scroll-handle-background-hover",A="ntimescale-scroll-handle-content",b="ntimescale-scroll-handle-symbol",E="ntimescale-scroll-handle-left",R="ntimescale-scroll-handle-right",C="ntimescale-up-handle",x="ntimescale-up-handle-background",B="ntimescale-up-handle-background-hover",L="pinch",O="pan",M="singletap",V="press",F=-.5,k=a(442),N=a(415),W=a(382),P=W.RibbonType,H=Object.assign({},P),X={};X[_.Seconds]=[1,5,10,15,30],X[_.Minutes]=[1,5,10,15,30],X[_.Hours]=[1,2,3,6,12];var U={};U[H.Seconds]=1,U[H.Seconds5]=5,U[H.Seconds10]=10,U[H.Seconds15]=15,U[H.Seconds30]=30,U[H.Minutes]=60,U[H.Minutes5]=300,U[H.Minutes10]=600,U[H.Minutes15]=900,U[H.Minutes30]=1800,U[H.Minutes30Small]=1800,U[H.Hours]=3600,U[H.Hours2]=7200,U[H.Hours3]=10800,U[H.Hours6]=21600,U[H.Hours12]=43200,U[H.Hours12Small]=43200,U[H.Days]=86400,U[H.Weeks]=604800,U[H.Months]=2592e3,U[H.Quarters]=7776e3,U[H.Years]=31536e3,U[H.RelSeconds]=1,U[H.RelSeconds5]=5,U[H.RelSeconds10]=10,U[H.RelSeconds15]=15,U[H.RelSeconds30]=30,U[H.RelSeconds30Small]=30,U[H.RelMinutes]=60,U[H.RelMinutes5]=300,U[H.RelMinutes10]=600,U[H.RelMinutes15]=900,U[H.RelMinutes30]=1800,U[H.RelMinutes30Small]=1800,U[H.RelHours]=3600,U[H.RelHours2]=7200,U[H.RelHours3]=10800,U[H.RelHours6]=21600,U[H.RelHours12]=43200,U[H.RelDays]=86400,U[H.RelWeeks]=604800,U[H.RelMonths]=2592e3,U[H.RelQuarters]=7776e3,U[H.RelYears]=31536e3;const G={[_.Seconds]:H.Seconds,[_.Minutes]:H.Minutes,[_.Hours]:H.Hours,[_.Days]:H.Days,[_.Weeks]:H.Weeks,[_.Months]:H.Months,[_.Quarters]:H.Quarters,[_.Years]:H.Years},Y={[_.Seconds]:H.RelSeconds,[_.Minutes]:H.RelMinutes,[_.Hours]:H.RelHours,[_.Days]:H.RelDays,[_.Weeks]:H.RelWeeks,[_.Months]:H.RelMonths,[_.Quarters]:H.RelQuarters,[_.Years]:H.RelYears};var z={optionDefaults:Object.assign({},p.prototype.optionDefaults,{locale:null,timeZone:null,formattingByMoment:!1,timescaleElementForInput:null,timeAxis:null,baseTimeUnit:void 0,baseTimeUnitFactor:1,height:0,smartNavigationEnabled:!0,smartNavigationVersion:1,asynchronousInteractiveStretching:!1,rescalingByMouseWheelEnabled:!0,rescalingEnabled:!0,scrollingByButtonsEnabled:!0,ribbonsWideningFactor:1,relativeDateModeEnabled:!1,singleRibbonMode:!1,labelRibbonVisible:!1,reversedRibbonOrder:!1,invalidTimeAreaMarkingChangedFunc:null,contextMenuFunc:null}),construct:function(){var e=this;e._super.apply(e,arguments),this._ribbonTypesByTimescaleType=[],this._ribbonTypesByTimescaleType[H.Seconds]=[P.Days,P.Seconds],this._ribbonTypesByTimescaleType[H.Seconds5]=[P.Days,P.Seconds5],this._ribbonTypesByTimescaleType[H.Seconds10]=[P.Days,P.Seconds10],this._ribbonTypesByTimescaleType[H.Seconds15]=[P.Days,P.Seconds15],this._ribbonTypesByTimescaleType[H.Seconds30]=[P.Days,P.Seconds30],this._ribbonTypesByTimescaleType[H.Minutes]=[P.Days,P.Minutes],this._ribbonTypesByTimescaleType[H.Minutes5]=[P.Days,P.Minutes5],this._ribbonTypesByTimescaleType[H.Minutes10]=[P.Days,P.Minutes10],this._ribbonTypesByTimescaleType[H.Minutes15]=[P.Days,P.Minutes15],this._ribbonTypesByTimescaleType[H.Minutes30]=[P.Days,P.Minutes30],this._ribbonTypesByTimescaleType[H.Minutes30Small]=[P.Days,P.Minutes30Small],this._ribbonTypesByTimescaleType[H.Hours]=[P.Days,P.Hours],this._ribbonTypesByTimescaleType[H.Hours3]=[P.Days,P.Hours3],this._ribbonTypesByTimescaleType[H.Hours2]=[P.Days,P.Hours2],this._ribbonTypesByTimescaleType[H.Hours6]=[P.Days,P.Hours6],this._ribbonTypesByTimescaleType[H.Hours12]=[P.Days,P.Hours12],this._ribbonTypesByTimescaleType[H.Hours12Small]=[P.Days,P.Hours12Small],this._ribbonTypesByTimescaleType[H.Days]=[P.Months,P.Weeks,P.Days],this._ribbonTypesByTimescaleType[H.Weeks]=[P.Months,P.Weeks],this._ribbonTypesByTimescaleType[H.Months]=[P.Years,P.Months],this._ribbonTypesByTimescaleType[H.Quarters]=[P.Years,P.Quarters],this._ribbonTypesByTimescaleType[H.Years]=[P.Years],this._ribbonTypesByTimescaleType[H.RelSeconds]=[P.RelMinutes,P.RelSeconds],this._ribbonTypesByTimescaleType[H.RelSeconds5]=[P.RelMinutes,P.RelSeconds5],this._ribbonTypesByTimescaleType[H.RelSeconds10]=[P.RelMinutes,P.RelSeconds10],this._ribbonTypesByTimescaleType[H.RelSeconds15]=[P.RelMinutes,P.RelSeconds15],this._ribbonTypesByTimescaleType[H.RelSeconds30]=[P.RelMinutes,P.RelSeconds30],this._ribbonTypesByTimescaleType[H.RelSeconds30Small]=[P.RelMinutes5,P.RelSeconds30],this._ribbonTypesByTimescaleType[H.RelMinutes]=[P.RelHours,P.RelMinutes],this._ribbonTypesByTimescaleType[H.RelMinutes5]=[P.RelHours,P.RelMinutes5],this._ribbonTypesByTimescaleType[H.RelMinutes10]=[P.RelHours,P.RelMinutes10],this._ribbonTypesByTimescaleType[H.RelMinutes15]=[P.RelHours,P.RelMinutes15],this._ribbonTypesByTimescaleType[H.RelMinutes30]=[P.RelHours,P.RelMinutes30],this._ribbonTypesByTimescaleType[H.RelMinutes30Small]=[P.RelHours2,P.RelMinutes30],this._ribbonTypesByTimescaleType[H.RelHours]=[P.RelDays,P.RelHours],this._ribbonTypesByTimescaleType[H.RelHours3]=[P.RelDays,P.RelHours3],this._ribbonTypesByTimescaleType[H.RelHours2]=[P.RelDays,P.RelHours2],this._ribbonTypesByTimescaleType[H.RelHours6]=[P.RelDays,P.RelHours6],this._ribbonTypesByTimescaleType[H.RelHours12]=[P.RelDays,P.RelHours12],this._ribbonTypesByTimescaleType[H.RelDays]=[P.RelWeeks,P.RelDays],this._ribbonTypesByTimescaleType[H.RelWeeks]=[P.RelMonths,P.RelWeeks],this._ribbonTypesByTimescaleType[H.RelMonths]=[P.RelQuarters,P.RelMonths],this._ribbonTypesByTimescaleType[H.RelQuarters]=[P.RelYears,P.RelQuarters],this._ribbonTypesByTimescaleType[H.RelYears]=[P.RelYears],this._ribbonTextFormatsByTimescaleType=[],this._ribbonTextFormatsAdapted=!1,this._timescaleD3ForRendering=i.select(this._element),this._timescaleD3ForRendering.classed("ntimescale",!0),this._currentTimescaleType=void 0,this._mostDetailedTimescaleType=e.options.relativeDateModeEnabled?H.RelSeconds:H.Seconds,this._leastDetailedTimescaleType=e.options.relativeDateModeEnabled?H.RelYears:H.Years,this._ignoreNextScrollEvent=!1,this._pinchStartUnitWidth=1,this._cachedCurrentTimescaleType=void 0,this._cachedTimeAxis=null,this._cachedTimeAxisActualStart=0,this._cachedTimeAxisActualEnd=0,this._cachedTimeAxisBaseTimeUnit=void 0,this._cachedTimeAxisActualBaseTimeUnitWidth=0,this._cachedCollapseCalendar=void 0,this._cachedWidth=0,this._cachedScrollLeft=-1,this._ribbons=[],this._timescaleD3ForRendering.data([this]),this._cachedCellRect=null,this._ignoreClick=!1,this._mouseIsInside=!1,this._mouseAndSmartNavigationEnabled=!0,this._id=h.generate(),e.options.locale instanceof m||c.on(window,"netronic_nLocales_localeChanged"+g+this._id,(function(){try{e._localeChanged()}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}})).on(window,"netronic_nDateHelper_timeZoneChanged"+g+this._id,(function(){try{e._localeChanged()}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}})),this._pointerEvents=["pointerdown","pointermove","pointerup","pointerover","pointerout","pointerenter","pointerleave","click"].map((e=>`${e}${g}${this._id}`)).join(" "),this._init()},_init:function(){var e=this;this._initRibbonTextFormats(),this._limitMostDetailedTimescaleType();let t=e.options.timescaleElementForInput;if(t){i.select(t).classed("ntimescale-overlay",!0),c.on(t,`pointerenter${g}${this._id}`,(function(t){try{return e._onMouseEnter(t)}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}})).on(t,`pointermove${g}${this._id}`,(function(t){try{return e._onPointerMove(t)}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}})).on(t,`pointerleave${g}${this._id}`,(function(t){try{return e._onMouseLeave(t)}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}})).on(t,`wheel${g}${this._id}`,(function(t){try{return e._onWheel(t)}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}})).on(t,`pointerdown${g}${this._id}`,(function(t){try{3===t.which&&e._onContextMenu(t)}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}}));var a=new n.Manager(t);a.add(new n.Pinch({event:L})),a.on(L+"start",(function(t){try{e.onPinchStart(t)}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}})),a.on(L,(function(t){try{e.onPinch(t)}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}})),a.add(new n.Pan({event:O,direction:n.DIRECTION_HORIZONTAL})),a.on(O+"start",(function(t){try{e._onPanStart(t)}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}})),a.on(O+"move",(function(t){try{e._onPan(t)}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}})),a.on(O+"end",(function(t){try{e._onPanEnd(t)}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}}));let r=function(t){try{e._onSingleTap(t)}catch(t){if(!e.options.errorFunc)throw t;e.options.errorFunc.call(e,t)}};a.add(new n.Tap({event:M})),a.on(M,r),a.add(new n.Press({event:V})),a.on(V+"up",(function(e){"mouse"===e.pointerType&&r(e)}))}e._mouseAndSmartNavigationEnabled=e.options.smartNavigationEnabled&&e.options.rescalingByMouseWheelEnabled,e._localeListenerFunc=function(){e._localeChanged()},e.options.locale instanceof m&&e.options.locale.addListener(e._localeListenerFunc),e.options.reversedRibbonOrder&&e._ribbonTypesByTimescaleType.forEach((function(t,a){e._ribbonTypesByTimescaleType[a]=t.reverse()}))},destroy:function(){c.off([window,this.options.timescaleElementForInput],`${g}${this._id}`),this.options.timescaleElementForInput=null,this.options.timeAxis=null,this.options.locale instanceof m&&this.options.locale.removeListener(this._localeListenerFunc),this._smartNavigationTimer&&window.clearTimeout(this._smartNavigationTimer),void 0!==this._timeAxisTriggerEventTimerID&&window.clearTimeout(this._timeAxisTriggerEventTimerID),this._super()},_setOption:function(e,t){var a=this,i=a.options[e];switch(a._super(e,t),e){case"locale":i&&i.removeListener(this._localeListenerFunc),t&&t.addListener(this._localeListenerFunc),this._localeChanged();break;case"timeZone":case"formattingByMoment":this._localeChanged();break;case"height":this._cachedTimeAxis=null,this.render();break;case"baseTimeUnit":case"baseTimeUnitFactor":if(i!==t){let e=a._mostDetailedTimescaleType;if(a._limitMostDetailedTimescaleType(),e!==a._mostDetailedTimescaleType){let e=a.options.timeAxis;a._rescale(null,e.actualBaseTimeUnitWidth(),!0)}}break;case"smartNavigationEnabled":this._mouseAndSmartNavigationEnabled=t&&this.options.rescalingByMouseWheelEnabled,this.render();break;case"singleRibbonMode":case"smartNavigationVersion":case"labelRibbonVisible":case"scrollingByButtonsEnabled":this.render();break;case"rescalingByMouseWheelEnabled":this._mouseAndSmartNavigationEnabled=t&&this.options.smartNavigationEnabled;break;case"rescalingEnabled":this.options.rescalingByMouseWheelEnabled=t,this.render();break;case"relativeDateModeEnabled":this._limitMostDetailedTimescaleType(),this._leastDetailedTimescaleType=t?H.RelYears:H.Years,this.render();break;case"reversedRibbonOrder":t!==i&&(a._ribbonTypesByTimescaleType.forEach((function(e,t){a._ribbonTypesByTimescaleType[t]=e.reverse()})),this._localeChanged())}},_localeChanged:function(){var e=this;e._ribbonTextFormatsAdapted=!1;var t=function(){e._initRibbonTextFormats(!0)};e.options.locale instanceof m?e.options.locale.applyDateFormat(t):t(),e.render(!0)},_initRibbonTextFormats:function(){var e=this;e._ribbonTextFormatsByTimescaleType[H.Seconds]=[["D"],["T"]],e._ribbonTextFormatsByTimescaleType[H.Seconds5]=[["D"],["T"]],e._ribbonTextFormatsByTimescaleType[H.Seconds10]=[["D"],["T"]],e._ribbonTextFormatsByTimescaleType[H.Seconds15]=[["D"],["T"]],e._ribbonTextFormatsByTimescaleType[H.Seconds30]=[["D"],["T"]],e._ribbonTextFormatsByTimescaleType[H.Minutes]=[["D"],["t"]],e._ribbonTextFormatsByTimescaleType[H.Minutes5]=[["D"],["t"]],e._ribbonTextFormatsByTimescaleType[H.Minutes10]=[["D"],["t"]],e._ribbonTextFormatsByTimescaleType[H.Minutes15]=[["D"],["t"]],e._ribbonTextFormatsByTimescaleType[H.Minutes30]=[["D"],["t"]],e._ribbonTextFormatsByTimescaleType[H.Minutes30Small]=[["D",[["%B","%b"]]],["t"]],e._ribbonTextFormatsByTimescaleType[H.Hours]=[["D"],["t"]],e._ribbonTextFormatsByTimescaleType[H.Hours2]=[["D"],["t"]],e._ribbonTextFormatsByTimescaleType[H.Hours3]=[["D"],["t"]],e._ribbonTextFormatsByTimescaleType[H.Hours6]=[["D"],["t"]],e._ribbonTextFormatsByTimescaleType[H.Hours12]=[["D",[["%A","%a"],["%B","%b"]]],["t"]],e._ribbonTextFormatsByTimescaleType[H.Hours12Small]=[["D",[["%A,",""],["%A",""],["%B","%b"]]],["t"]],e._ribbonTextFormatsByTimescaleType[H.Days]=[["%B %Y"],["W"],["%d"]],e._ribbonTextFormatsByTimescaleType[H.Weeks]=[["%B %Y"],["W"]],e._ribbonTextFormatsByTimescaleType[H.Months]=[["%Y"],["%b"]],e._ribbonTextFormatsByTimescaleType[H.Quarters]=[["%Y"],["Q"]],e._ribbonTextFormatsByTimescaleType[H.Years]=[["%Y"]],e._ribbonTextFormatsByTimescaleType[H.RelSeconds]=[["M : d : h : m"],["s"]],e._ribbonTextFormatsByTimescaleType[H.RelSeconds5]=[["M : d : h : m"],["s"]],e._ribbonTextFormatsByTimescaleType[H.RelSeconds10]=[["M : d : h : m"],["s"]],e._ribbonTextFormatsByTimescaleType[H.RelSeconds15]=[["M : d : h : m"],["s"]],e._ribbonTextFormatsByTimescaleType[H.RelSeconds30]=[["M : d : h : m"],["s"]],e._ribbonTextFormatsByTimescaleType[H.RelSeconds30Small]=[["M : d : h : m"],["s"]],e._ribbonTextFormatsByTimescaleType[H.RelMinutes]=[["M : d : h : m"],["m"]],e._ribbonTextFormatsByTimescaleType[H.RelMinutes5]=[["M : d : h : m"],["m"]],e._ribbonTextFormatsByTimescaleType[H.RelMinutes10]=[["M : d : h : m"],["m"]],e._ribbonTextFormatsByTimescaleType[H.RelMinutes15]=[["M : d : h : m"],["m"]],e._ribbonTextFormatsByTimescaleType[H.RelMinutes30]=[["M : d : h : m"],["m"]],e._ribbonTextFormatsByTimescaleType[H.RelMinutes30Small]=[["M : d : h : m"],["m"]],e._ribbonTextFormatsByTimescaleType[H.RelHours]=[["M : d : h : m"],["h"]],e._ribbonTextFormatsByTimescaleType[H.RelHours2]=[["M : d : h : m"],["h"]],e._ribbonTextFormatsByTimescaleType[H.RelHours3]=[["M : d : h : m"],["h"]],e._ribbonTextFormatsByTimescaleType[H.RelHours6]=[["M : d : h : m"],["h"]],e._ribbonTextFormatsByTimescaleType[H.RelHours12]=[["M : d : h : m"],["h"]],e._ribbonTextFormatsByTimescaleType[H.RelDays]=[["M : d : h : m"],["d"]],e._ribbonTextFormatsByTimescaleType[H.RelWeeks]=[["M : d : h : m"],["d"]],e._ribbonTextFormatsByTimescaleType[H.RelMonths]=[["M : d : h : m"],["M"]],e._ribbonTextFormatsByTimescaleType[H.RelQuarters]=[["M : d : h : m"],["Q"]],e._ribbonTextFormatsByTimescaleType[H.RelYears]=[["M : d : h : m"],["Y"]],e.options.reversedRibbonOrder&&e._ribbonTextFormatsByTimescaleType.forEach((function(t,a){e._ribbonTextFormatsByTimescaleType[a]=t.reverse()}));var t=e.options.locale?e.options.locale.params():u.locale();e._ribbonTextFormatsAdapted||(e._ribbonTextFormatsAdapted=!0,Object.keys(e._ribbonTextFormatsByTimescaleType).forEach((function(a){for(var i=0;i<e._ribbonTextFormatsByTimescaleType[a].length;i++){var n=e._ribbonTextFormatsByTimescaleType[a][i],r=n[0];-1!==r.indexOf("t")?r=r.replace("t",t.patterns.t):-1!==r.indexOf("T")?r=r.replace("T",t.patterns.T):-1!==r.indexOf("W")?r=r.replace("W",t.patterns.W):-1!==r.indexOf("D")?r=r.replace("D",t.patterns.D):-1!==r.indexOf("Q")&&(r=r.replace("Q",t.patterns.Q)),r=r.replace("'den '","%A' den '");for(var o=1;o<n.length;o++)for(var s=0;s<n[o].length;s++)r=r.replace(n[o][s][0],n[o][s][1]);e._ribbonTextFormatsByTimescaleType[a][i]=r}})));var a=e._minimumUnitWidths={},i=e.options.reversedRibbonOrder?0:1,n=function(t,n,r){a[t]=e._ribbonTextFormatsByTimescaleType[t][i].indexOf("%p")>=0?n:r};n(H.Seconds,70,64),n(H.Seconds5,70,64),n(H.Seconds10,70,64),n(H.Seconds15,70,64),n(H.Seconds30,70,64),n(H.Minutes,64,40),n(H.Minutes5,64,40),n(H.Minutes10,64,40),n(H.Minutes15,64,40),n(H.Minutes30,64,40),n(H.Minutes30Small,64,40),n(H.Hours,64,40),n(H.Hours2,64,40),n(H.Hours3,64,40),n(H.Hours6,64,40),n(H.Hours12,64,48),n(H.Hours12Small,56,40),a[H.Days]=24,a[H.Weeks]=48,a[H.Months]=64,a[H.Quarters]=32,a[H.Years]=100,a[H.RelSeconds]=30,a[H.RelSeconds5]=30,a[H.RelSeconds10]=30,a[H.RelSeconds15]=30,a[H.RelSeconds30]=30,a[H.RelSeconds30Small]=68,a[H.RelMinutes]=30,a[H.RelMinutes5]=30,a[H.RelMinutes10]=30,a[H.RelMinutes15]=30,a[H.RelMinutes30]=53,a[H.RelMinutes30Small]=53,a[H.RelHours]=30,a[H.RelHours2]=30,a[H.RelHours3]=30,a[H.RelHours6]=30,a[H.RelHours12]=53,a[H.RelDays]=30,a[H.RelWeeks]=30,a[H.RelMonths]=39,a[H.RelQuarters]=116,a[H.RelYears]=116},_limitMostDetailedTimescaleType:function(){var e=this;if(e.options.timeAxis instanceof N){var t=e.options.baseTimeUnit??e.options.timeAxis.baseTimeUnit();e._mostDetailedTimescaleType=(this.options.relativeDateModeEnabled?Y:G)[t];var a=e.options.baseTimeUnitFactor;if(a>1){var i=0,n=X[t];n?.forEach(((e,t)=>{e<=a&&(i=t)})),e._mostDetailedTimescaleType+=i}}},_selectCellRectAt:function(e,t,a){if(this.options.rescalingEnabled){var n,r=this;if(r.options.timeAxis.actualTimeRangeIncludesWorkingTime()){void 0!==r._panStartScrollOffset&&(a=!0);var o=r._timescaleD3ForRendering.selectAll("."+C);if(o.size()&&"hidden"!==o.attr("visibility")){var s=(n=o.node().getBoundingClientRect()).width/2,c=e-n.left-s,d=t-n.top;if(Math.sqrt(c*c+d*d)<=s)return i.select(r._cachedCellRect).classed(v,!1),r._cachedCellRect=null,r._timescaleD3ForRendering.select("."+x).classed(B,!0),r._cachedCellRect}var m=!1;if(r._timescaleD3ForRendering.selectAll("."+w).each((function(){n=this.getBoundingClientRect(),s=n.height/2,i.select(this).classed(R)?(c=e-n.left,d=t-n.top-s,Math.sqrt(c*c+d*d)<=s&&(i.select(r._cachedCellRect).classed(v,!1),r._cachedCellRect=null,r._timescaleD3ForRendering.select("."+R+" ."+S).classed(I,!0),m=!0)):(c=e-n.left-s,d=t-n.top-s,Math.sqrt(c*c+d*d)<=s&&(i.select(r._cachedCellRect).classed(v,!1),r._cachedCellRect=null,r._timescaleD3ForRendering.select("."+E+" ."+S).classed(I,!0),m=!0))})),m)return r._cachedCellRect;if(r._timescaleD3ForRendering.select("."+x).classed(B,!1),r._timescaleD3ForRendering.select("."+R+" ."+S).classed(I,!1),r._timescaleD3ForRendering.select("."+E+" ."+S).classed(I,!1),r._cachedCellRect){if(n=r._cachedCellRect.getBoundingClientRect(),!a&&n.left<=e&&e<n.right&&n.top<=t&&t<n.bottom)return r._cachedCellRect;i.select(r._cachedCellRect).classed(v,!1),r._cachedCellRect=null}a||l.applyTimeZone(r.options.timeZone,(function(){let a=r._currentTimescaleType===r._mostDetailedTimescaleType;r._timescaleD3ForRendering.selectAll("."+D).each((function(){let o=0===this.closest("."+T)._nTi_revIndex;r._cachedCellRect||a&&o||(n=this.getBoundingClientRect()).left<=e&&e<n.right&&n.top<=t&&t<n.bottom&&(!a||r.options.timeAxis.timeAreaViewWidth()<=r.options.timeAxis.convertDateToX(l.toDate(this.nwaf_gantt_cell_data.nextDateOrMoment))-r.options.timeAxis.convertDateToX(l.toDate(this.nwaf_gantt_cell_data.originalDateOrMoment)))&&(r._mouseIsInside&&i.select(this).classed(v,!0),r._cachedCellRect=this)}))}))}else r._cachedCellRect=null;return r._cachedCellRect}},_refreshRibbons:function(e){var t=this,a=t.options.timeAxis;if(e||t._cachedCurrentTimescaleType!==t._currentTimescaleType||t._cachedTimeAxis!=a||t._cachedTimeAxisActualStart!=a.actualStart()||t._cachedTimeAxisActualEnd!=a.actualEnd()||t._cachedTimeAxisBaseTimeUnit!=a.baseTimeUnit()||t._cachedTimeAxisActualBaseTimeUnitWidth!=a.actualBaseTimeUnitWidth()||t._cachedWidth!=a.timeAreaViewWidth()||t._cachedScrollLeft!=a.timeAreaViewScrollOffset()||t._cachedCollapseCalendar!=a.collapseCalendar()){t._fillCache();var i=function(){l.applyTimeZone(t.options.timeZone,(function(){for(var e=0;e<t._ribbons.length;e++)t._ribbons[e].render(a)}))};t.options.locale instanceof m?t.options.locale.applyDateFormat(i):i()}},getCurrentTypicalCellWidthOfMostDetailedRibbon:function(){var e=this;if(e._ribbons)return l.applyTimeZone(e.options.timeZone,(function(){var t=e._ribbons[e.options.reversedRibbonOrder?0:e._ribbons.length-1];if(t)return t._getCurrentTypicalCellWidth(e.options.timeAxis)}))},getDatesOfMostDetailedRibbon:function(){var e=this;return l.applyTimeZone(e.options.timeZone,(function(){if(e._ribbons){var t=e._ribbons[e.options.reversedRibbonOrder?0:e._ribbons.length-1];if(t)return t._getDates(e.options.timeAxis)}}))},getCellsOfMostDetailedRibbon:function(){var e=this;if(e._ribbons){var t=e._ribbons[e.options.reversedRibbonOrder?0:e._ribbons.length-1];if(t)return t.cells()}},_fillCache:function(){var e=this;e._cachedCurrentTimescaleType=e._currentTimescaleType,e._cachedTimeAxis=e.options.timeAxis,e._cachedTimeAxisActualStart=e.options.timeAxis.actualStart(),e._cachedTimeAxisActualEnd=e.options.timeAxis.actualEnd(),e._cachedTimeAxisBaseTimeUnit=e.options.timeAxis.baseTimeUnit(),e._cachedTimeAxisActualBaseTimeUnitWidth=e.options.timeAxis.actualBaseTimeUnitWidth(),e._cachedWidth=e.options.timeAxis.timeAreaViewWidth(),e._cachedScrollLeft=e.options.timeAxis.timeAreaViewScrollOffset(),e._cachedCollapseCalendar=e.options.timeAxis.collapseCalendar()},_renderRibbons:function(e){for(var t=this,a=t._leastDetailedTimescaleType,i=t.options.timeAxis.actualWidthPerSecond(),n=t._leastDetailedTimescaleType;n>=t._mostDetailedTimescaleType&&i*U[n]>=t._minimumUnitWidths[n]*t.options.ribbonsWideningFactor;n--)a=n;a!==t._currentTimescaleType||e?l.applyTimeZone(t.options.timeZone,(function(){t._currentTimescaleType=a;var e=t._ribbonTypesByTimescaleType[t._currentTimescaleType].slice(),i=t._ribbonTextFormatsByTimescaleType[t._currentTimescaleType].slice();t.options.singleRibbonMode&&(e=[e.pop()],i=[i.pop()]);var n=function(){t._ribbons.length=0;for(var a=0;a<e.length;a++)t._ribbons[a]=new W(t.options.timeAxis,e[a],i[a])};t.options.locale instanceof m?t.options.locale.applyDateFormat(n):n(),t._fillCache()})):t._refreshRibbons(e)},_onMouseEnter:function(e){this._mouseAndSmartNavigationEnabled&&(this._mouseIsInside=!0,this.options.smartNavigationVersion<2&&this._timescaleD3ForRendering.selectAll("."+y).transition().attr("transform","translate("+this.options.timeAxis.timeAreaViewWidth()+")"),this._selectCellRectAt(e.clientX,e.clientY,!!e.buttons))},_onPointerMove:function(e){var t=this;if(t._mouseAndSmartNavigationEnabled){if(window.clearTimeout(this._smartNavigationTimer),e.buttons)return;this._ignoreClick=!1,t.options.smartNavigationVersion<2&&this._timescaleD3ForRendering.selectAll("."+y).transition().attr("transform","translate("+this.options.timeAxis.timeAreaViewWidth()+")"),this._smartNavigationTimer=window.setTimeout((function(){t._selectCellRectAt(e.clientX,e.clientY,!!e.buttons)}),50)}},_onMouseLeave:function(){this._mouseAndSmartNavigationEnabled&&(this._mouseIsInside=!1,clearTimeout(this._smartNavigationTimer),this.options.smartNavigationVersion<2&&this._timescaleD3ForRendering.selectAll("."+y).transition().attr("transform","translate("+(this.options.timeAxis.timeAreaViewWidth()+11+3)+")"),this._cachedCellRect&&(i.select(this._cachedCellRect).classed(v,!1),this._cachedCellRect=null),this._timescaleD3ForRendering.select("."+x).classed(B,!1),this._timescaleD3ForRendering.select("."+R+" ."+S).classed(I,!1),this._timescaleD3ForRendering.select("."+E+" ."+S).classed(I,!1))},_onContextMenu:function(e){var t=this;if(t.options.contextMenuFunc){var a={};l.applyTimeZone(t.options.timeZone,(function(){t._timescaleD3ForRendering.selectAll("."+D).each((function(){var t=this.getBoundingClientRect();if(t.left<=e.clientX&&e.clientX<t.right&&t.top<=e.clientY&&e.clientY<t.bottom)return a.startDate=l.toDate(this.nwaf_gantt_cell_data.originalDateOrMoment),void(a.endDate=l.toDate(this.nwaf_gantt_cell_data.nextDateOrMoment))}))})),t.options.contextMenuFunc(e,a)}},_onWheel:function(e){if(!e.ctrlKey&&!e.altKey&&!e.metaKey)if(e.preventDefault(),e.shiftKey);else if(this.options.rescalingByMouseWheelEnabled&&this.options.rescalingEnabled){var t=this.options.asynchronousInteractiveStretching?.5:1,a=this.options.timeAxis.actualBaseTimeUnitWidth(),i=(e.deltaX||e.deltaY)<0?a*(1+.25*t):a*(1-.2*t);return this._rescale(e.pageX,i),!1}},_rescale:function(e,t,a){var i=this,n=i.options.timeAxis;let r=!a&&i.options.asynchronousInteractiveStretching;null!=e?e-=i.options.timescaleElementForInput.getBoundingClientRect().left+document.body.scrollLeft:e=n.timeAreaViewScrollOffset(),r&&n.cacheEvents();let o=n.baseTimeUnit(),s=i.options.baseTimeUnit??o;var l=i._minimumUnitWidths[i._mostDetailedTimescaleType]/i.options.baseTimeUnitFactor*i.options.ribbonsWideningFactor;s!==o&&(l*=N.timeUnitToSeconds(o)/N.timeUnitToSeconds(s)),t=Math.min(t,l);var c=n.actualBaseTimeUnitWidth();t>c&&1==i._ribbons[i.options.reversedRibbonOrder?0:i._ribbons.length-1]._cells.length||(n.rescale(e,t),i.render(),void 0!==i._timeAxisTriggerEventTimerID?window.clearTimeout(i._timeAxisTriggerEventTimerID):r&&(i._unitWidthBeforeInteractiveRescale=c),r?(i.options.invalidTimeAreaMarkingChangedFunc?.(!0,n.actualBaseTimeUnitWidth()/i._unitWidthBeforeInteractiveRescale),i._timeAxisTriggerEventTimerID=window.setTimeout((function(){delete i._timeAxisTriggerEventTimerID,delete i._unitWidthBeforeInteractiveRescale,i.options.invalidTimeAreaMarkingChangedFunc?.(!1),n.triggerCachedEvents()}),500)):delete i._timeAxisTriggerEventTimerID)},onPinchStart:function(){this._pinchStartUnitWidth=this.options.timeAxis.actualBaseTimeUnitWidth()},onPinch:function(e){var t=this._pinchStartUnitWidth*e.scale;this._rescale(e.center.x,t)},_onPanStart:function(){i.select(this.options.timescaleElementForInput).style("pointer-events","all"),s.setCursor(this.options.timescaleElementForInput,"ew-grabbing"),this._panStartScrollOffset=this.options.timeAxis.timeAreaViewScrollOffset()},_onPan:function(e){this.options.timeAxis.timeAreaViewScrollOffset(this._panStartScrollOffset-e.deltaX/this.options.timeAxis.visualZoomFactor())},_onPanEnd:function(e){i.select(this.options.timescaleElementForInput).style("pointer-events",null),s.setCursor(this.options.timescaleElementForInput,null),delete this._panStartScrollOffset;var t=Object.assign({},e.srcEvent);t.buttons=0,this._onPointerMove(t)},_onSingleTap:function(e){if(this._mouseAndSmartNavigationEnabled){if(this._ignoreClick)return void(this._ignoreClick=!1);var t=this;l.applyTimeZone(t.options.timeZone,(function(){var a=t._selectCellRectAt(e.center.x,e.center.y);t._cachedCellRect=null;let n=i.select(e.target);var r=n.style("display");n.style("display","none");var o=document.elementFromPoint(e.srcEvent.clientX,e.srcEvent.clientY);if(n.style("display",r),o&&o.closest("."+C)){var s=t.options.timeAxis.actualBaseTimeUnitWidth(),c=.5*s,d=t.options.timescaleElementForInput.getBoundingClientRect();i.select(t).transition().duration(500).tween("Up",(function(){var e=i.interpolate(s,c);return function(a){t._rescale(d.left+document.body.scrollLeft+t.options.timeAxis.timeAreaViewWidth()/2,e(a))}})),window.setTimeout((function(){t._element&&t._selectCellRectAt(e.center.x,e.center.y,"touch"===e.pointerType)}),601)}else if(o&&o.closest("."+E)){var m=t.options.timeAxis.timeAreaViewScrollOffset();if(t.options.smartNavigationVersion<2){var u=l.toDate(t._ribbons[t.options.reversedRibbonOrder?t._ribbons.length-1:0]._cells[0].nextDateOrMoment);h=t.options.timeAxis.convertDateToX(u)}else h=m+t.options.timeAxis.timeAreaViewWidth();i.select(t).transition().duration(500).tween("ScrollLeft",(function(){var e=i.interpolateRound(m,h);return function(a){t.options.timeAxis.timeAreaViewScrollOffset(e(a))}})).on("end",(function(){t.options.smartNavigationVersion<2&&t._timescaleD3ForRendering.selectAll("."+y).attr("transform","translate("+t.options.timeAxis.timeAreaViewWidth()+")")})),window.setTimeout((function(){t._element&&t._selectCellRectAt(e.center.x,e.center.y,"touch"===e.pointerType)}),501)}else if(o&&o.closest("."+R)){var h;m=t.options.timeAxis.timeAreaViewScrollOffset(),t.options.smartNavigationVersion<2?(u=l.toDate(t._ribbons[t.options.reversedRibbonOrder?t._ribbons.length-1:0]._cells[0].previousDateOrMoment),h=t.options.timeAxis.convertDateToX(u)):h=m-t.options.timeAxis.timeAreaViewWidth(),i.select(t).transition().duration(500).tween("ScrollRight",(function(){var e=i.interpolateRound(m,h);return function(a){t.options.timeAxis.timeAreaViewScrollOffset(e(a))}})).on("end",(function(){t.options.smartNavigationVersion<2&&t._timescaleD3ForRendering.selectAll("."+y).attr("transform","translate("+t.options.timeAxis.timeAreaViewWidth()+")")})),window.setTimeout((function(){t._element&&t._selectCellRectAt(e.center.x,e.center.y,"touch"===e.pointerType)}),501)}else if(a){var p=t.options.timeAxis.actualBaseTimeUnitWidth(),_=l.toDate(a.nwaf_gantt_cell_data.originalDateOrMoment);_.getTime()<t.options.timeAxis.start().getTime()&&_.setTime(t.options.timeAxis.start().getTime());var g=l.toDate(a.nwaf_gantt_cell_data.nextDateOrMoment);g.getTime()>t.options.timeAxis.end().getTime()&&g.setTime(t.options.timeAxis.end().getTime());var T=k.calculateWorkingTime(t.options.timeAxis.collapseCalendar(),g,_)/1e3*t.options.timeAxis.actualWidthPerSecond(),f=t.options.timeAxis.timeAreaViewWidth()/T*p,D=t.options.timeAxis.convertDateToX(_)-t.options.timeAxis.timeAreaViewScrollOffset(),v=t.options.timeAxis.actualBaseTimeUnitWidth();d=t.options.timescaleElementForInput.getBoundingClientRect(),t._rescale(d.left+document.body.scrollLeft,f,!0);var w=t.options.timeAxis.actualBaseTimeUnitWidth();w!==v&&w!==f?t.options.timeAxis.timeAreaViewScrollOffset(Math.max(0,t.options.timeAxis.convertDateToX(_)-D)):t.options.timeAxis.timeAreaViewScrollOffset(t.options.timeAxis.convertDateToX(_)),window.setTimeout((function(){t._element&&(t._selectCellRectAt(e.center.x,e.center.y,"touch"===e.pointerType),["mouse","pen"].includes(e.pointerType)&&t.options.smartNavigationVersion<2&&t._timescaleD3ForRendering.selectAll("."+y).transition().attr("transform","translate("+t.options.timeAxis.timeAreaViewWidth()+")"))}),200)}}))}},render:function(e){var t=this,a=t.options.timeAxis.timeAreaViewWidth();if(a){var n=t.options.timeAxis.actualTimeAreaWidth(),r=t.options.timeAxis.timeAreaViewScrollOffset(),o=t.options.locale;o instanceof m||(o=null);var s=o?o.applyDateFormat:function(e){return e()},c=o?o.params():u.locale();t._renderRibbons(e),t._timescaleD3ForRendering.selectAll("g").remove(),t._timescaleD3ForRendering.selectAll("rect").remove();var h=0;t.options.labelRibbonVisible&&(h=10/t._ribbons.length,t._timescaleD3ForRendering.append("rect").attr("width",1e4).attr("height",t.options.height).attr("class",f));var p=t.options.height/t._ribbons.length-h,_=t._timescaleD3ForRendering.selectAll("g").data(t._ribbons).enter().append("g").attr("class",T).attr("transform",(function(e,a){return this._nTi_revIndex=t._ribbons.length-1-a,"translate(0, "+a*p+")"}));if(_.selectAll("g").data((function(e){return e.cells()})).enter().append("g").attr("class",(function(e){var a=i.select(this.parentNode).data()[0],n=e.dateOrMoment;return l.applyTimeZone(t.options.timeZone,(function(){var e=f+" ntimescale-ribbon-cell-"+a.getCellClassNameSuffix();if(a.type()<=P.Days){var t=l.isMoment(n)?n.day():n.getDay();0!=t&&6!=t||(e+=" ntimescale-ribbon-cell-weekend")}return e}))})).each((function(e,n){var r=i.select(this),d=i.select(this.parentNode).data()[0],m=e.x;r.append("rect").attr("class",D).attr("width",e.width).attr("height",p).attr("x",m).each((function(e){this.nwaf_gantt_cell_data=e})),e.previousDateSkipped&&n?(r.append("line").attr("class","ntimescale-ribbon-cell-nonworking-outer-tick").attr("x1",m+F).attr("y1",0).attr("x2",m+F).attr("y2",p),r.append("line").attr("class","ntimescale-ribbon-cell-nonworking-inner-tick").attr("x1",m+F).attr("y1",0).attr("x2",m+F).attr("y2",p)):r.append("line").attr("class","ntimescale-ribbon-cell-tick").attr("x1",m+F).attr("y1",t.options.relativeDateModeEnabled?t.options.reversedRibbonOrder?0:p/2+2:0).attr("x2",m+F).attr("y2",t.options.relativeDateModeEnabled&&t.options.reversedRibbonOrder?p/2-2:p);var u=e.width>=a;t.options.relativeDateModeEnabled&&0===n&&!u||r.append("text").attr("x",m).attr("y",t.options.relativeDateModeEnabled?t.options.reversedRibbonOrder?p/2+5:p/2-4:p/2).attr("dy",".3em").attr("dx",t.options.relativeDateModeEnabled?0:5).style("text-anchor",t.options.relativeDateModeEnabled?"middle":"start").text((function(){return l.applyTimeZone(t.options.timeZone,(function(){var a=l.isMoment(e.dateOrMoment);if(t.options.relativeDateModeEnabled){var n=l.dateToRelativeDateTimeString(e.dateOrMoment),r=-1===d.textFormat().indexOf(":"),m="-"===n[0]?"-":" ",u=n.split(":");return d.textFormat().replace("M",u[0]+(r?"M":"")).replace("d",(r?m:"")+u[1]+(r?"d":"")).replace("h",(r?m:"")+u[2]+(r?"h":"")).replace("m",(r?m:"")+u[3]+(r?"m":"")).replace("s",(r?m:"")+u[4]+(r?"s":""))}if(d.type()===P.Quarters){var h=a?e.dateOrMoment.quarter():Math.floor(e.dateOrMoment.getMonth()/3)+1;return d.textFormat()+" "+h}if(d.type()===P.Weeks){var p,_=c.weekNumbering,g=l.toDate(e.dateOrMoment),T=new Date(g.getFullYear(),0);if("USA"===_){var f=(7+T.getDay()-c.firstDay)%7;p=Math.floor(Math.floor((g.getTime()-6e4*g.getTimezoneOffset()-(T.getTime()-6e4*T.getTimezoneOffset()))/864e5+.001+f)/7)+1}else{var D=new Date(g.getFullYear(),0,4);if(f=(7+D.getDay()-c.firstDay)%7,p=Math.floor(Math.floor((g.getTime()-6e4*g.getTimezoneOffset()-(D.getTime()-6e4*D.getTimezoneOffset()))/864e5+.001+f)/7)+1,11===g.getMonth()&&g.getDate()>=29){var v=(7+new Date(g.getFullYear()+1,0,4).getDay()-c.firstDay)%7;v>3&&g.getDate()>=31-v%4&&(p=1)}else if(0===g.getMonth()&&g.getDate()<=3-f&&f<3){var y=new Date(g.getFullYear()-1,0,4),w=(7+y.getDay()-c.firstDay)%7;p=Math.floor(Math.floor((g.getTime()-6e4*g.getTimezoneOffset()-(y.getTime()-6e4*y.getTimezoneOffset()))/864e5+.001+w)/7)+1}}var S=i.format("02d")(p),I=d.textFormat().replace("%W",S).replace("%U",S);return s.call(o,(function(){return i.timeFormat(I)(g)}))}return a&&t.options.formattingByMoment?s.call(o,(function(){return e.dateOrMoment.format(d.textFormatForMomentJS())})):s.call(o,(function(){return d.textFormatForD3()(l.toDisplayDate(e.dateOrMoment))}))}))}))})),this._mouseAndSmartNavigationEnabled){var g=i.select(_.nodes().pop());if(t.options.smartNavigationVersion<2){var v=g.append("g").attr("class",y+" "+E+" "+d.TAP_EVENT_CLASS_NAME).attr("transform","translate("+(a+11+3)+")");v.append("path").attr("d","M0,1h-4l-7,7v"+(t.options.height/2-16)+"l7,7h4L0,1").attr("transform","translate(0,"+(p-t.options.height)+")"),v.append("path").attr("class",A).attr("d","M0,0 V12 L6,6 L0,0").attr("transform","translate(-8, "+(p-3*t.options.height/4-6)+")")}else if(t.options.scrollingByButtonsEnabled){var I=14,B=-p*(t._ribbons.length-1)+I;(v=g.append("g").attr("class",y+" "+w+" "+E+" "+d.TAP_EVENT_CLASS_NAME).attr("transform","translate("+(a-1)+","+(+B+1)+")").attr("visibility",r+1<=n-a?null:"hidden")).append("path").attr("transform","rotate(90)").attr("class",S).attr("d","M-"+I+",0 a1,1 0 0,0 "+2*I+",0"),v.append("path").attr("class",A+" "+b).attr("d","M12.970992,0L21.524992,0 11.658996,12.152008 8.5930022,15.931 8.6660002,16.020996 11.772003,19.846008 21.636,32 13.082,32 4.3889922,21.290009 4.3150023,21.200989 4.2769927,21.247009 0,15.977997 4.2769927,10.708008z").attr("transform","translate(-2, 6) scale(0.4) rotate(180)")}if(t.options.smartNavigationVersion<2?((v=g.append("g").attr("class",y+" "+R+" "+d.TAP_EVENT_CLASS_NAME).attr("transform","translate("+(a+11+3)+")")).append("path").attr("d","M0,1h-4l-7,7v"+(t.options.height/2-16)+"l7,7h4L0,1").attr("transform","translate(0,"+(p-t.options.height/2)+")"),v.append("path").attr("class",A).attr("d","M0,6L6,12 V0 L0,6").attr("transform","translate(-9, "+(p-t.options.height/4-6)+")")):t.options.scrollingByButtonsEnabled&&(I=14,B=-p*(t._ribbons.length-1)+I,(v=g.append("g").attr("class",y+" "+w+" "+R+" "+d.TAP_EVENT_CLASS_NAME).attr("transform","translate(1,"+(+B+1)+")").attr("visibility",r<1?"hidden":null)).append("path").attr("transform","rotate(-90)").attr("class",S).attr("d","M-"+I+",0 a1,1 0 0,0 "+2*I+",0"),v.append("path").attr("class",A+" "+b).attr("d","M12.970992,0L21.524992,0 11.658996,12.152008 8.5930022,15.931 8.6660002,16.020996 11.772003,19.846008 21.636,32 13.082,32 4.3889922,21.290009 4.3150023,21.200989 4.2769927,21.247009 0,15.977997 4.2769927,10.708008z").attr("transform","translate(2, -6) scale(0.4)")),t.options.smartNavigationVersion>1&&t.options.rescalingEnabled){var L=i.select(_.nodes()[0]).append("g").attr("transform","translate("+a/2+")").attr("class",C+" "+d.TAP_EVENT_CLASS_NAME).attr("visibility",r+1<=n-a||r>=1?null:"hidden");I=18,L.append("path").attr("transform","translate(0, 1)").attr("class",x).attr("d","M-"+I+",0 a1,1 0 0,0 "+2*I+",0"),L.append("path").attr("class","ntimescale-up-handle-symbol").attr("d","M16.261993,0L16.359985,0.065002445 16.454987,0 16.48999,0.15399169 32,11.294986 32,19.745 16.359985,8.5149861 0,19.745 0,11.294986 16.22699,0.15399169z").attr("transform","translate(-8, 3) scale(0.5)")}this._mouseIsInside&&t.options.smartNavigationVersion<2&&this._timescaleD3ForRendering.selectAll("."+y).attr("transform","translate("+this.options.timeAxis.timeAreaViewWidth()+")")}}return this},getMinimumUnitWidthForTimeUnit:function(e){return this._minimumUnitWidths[(this.options.relativeDateModeEnabled?Y:G)[e]]}},$=o.extendClass("nTimescaleWidget",p,z);$.RibbonType=P,$.TimescaleType=H,e.exports=$},382:(e,t,a)=>{var i=a(680),n=a(571),r=n.nDateHelper,o=a(442),s={Seconds:0,Seconds5:1,Seconds10:2,Seconds15:3,Seconds30:4,Minutes:5,Minutes5:6,Minutes10:7,Minutes15:8,Minutes30:9,Minutes30Small:10,Hours:11,Hours2:12,Hours3:13,Hours6:14,Hours12:15,Hours12Small:16,Days:17,Weeks:18,Months:19,Quarters:20,Years:21,RelSeconds:22,RelSeconds5:23,RelSeconds10:24,RelSeconds15:25,RelSeconds30:26,RelSeconds30Small:27,RelMinutes:28,RelMinutes5:29,RelMinutes10:30,RelMinutes15:31,RelMinutes30:32,RelMinutes30Small:33,RelHours:34,RelHours2:35,RelHours3:36,RelHours6:37,RelHours12:38,RelDays:39,RelWeeks:40,RelMonths:41,RelQuarters:42,RelYears:43},l=function(e,t,a){this._cells=[],this._type=t,this._relativeDateModeEnabled=t>=22&&t<=43,this._textFormat=a,n.nDateHelper.isMomentJSCurrentlyUsed?(this._textFormatForMomentJS=r.d3TimeFormatToMomentFormat(a),this._textFormatForD3=i.utcFormat(a)):this._textFormatForD3=i.timeFormat(a),this.render(e)},c={};c[s.Seconds]={cellClassNameSuffix:"second",modulus:1,unit:"s"},c[s.Seconds5]={cellClassNameSuffix:"second5",modulus:5,unit:"s"},c[s.Seconds10]={cellClassNameSuffix:"second10",modulus:10,unit:"s"},c[s.Seconds15]={cellClassNameSuffix:"second15",modulus:15,unit:"s"},c[s.Seconds30]={cellClassNameSuffix:"second30",modulus:30,unit:"s"},c[s.Minutes]={cellClassNameSuffix:"minute",modulus:1,unit:"m"},c[s.Minutes5]={cellClassNameSuffix:"minute5",modulus:5,unit:"m"},c[s.Minutes10]={cellClassNameSuffix:"minute10",modulus:10,unit:"m"},c[s.Minutes15]={cellClassNameSuffix:"minute15",modulus:15,unit:"m"},c[s.Minutes30]={cellClassNameSuffix:"minute30",modulus:30,unit:"m"},c[s.Minutes30Small]={cellClassNameSuffix:"minute30small",modulus:30,unit:"m"},c[s.Hours]={cellClassNameSuffix:"hour",modulus:1,unit:"h"},c[s.Hours2]={cellClassNameSuffix:"hour2",modulus:2,unit:"h"},c[s.Hours3]={cellClassNameSuffix:"hour3",modulus:3,unit:"h"},c[s.Hours6]={cellClassNameSuffix:"hour6",modulus:6,unit:"h"},c[s.Hours12]={cellClassNameSuffix:"hour12",modulus:12,unit:"h"},c[s.Hours12Small]={cellClassNameSuffix:"hour12small",modulus:12,unit:"h"},c[s.Days]={cellClassNameSuffix:"day",modulus:1,unit:"d"},c[s.Weeks]={cellClassNameSuffix:"week",modulus:1,unit:"w"},c[s.Months]={cellClassNameSuffix:"month",modulus:1,unit:"M"},c[s.Quarters]={cellClassNameSuffix:"quarter",modulus:1,unit:"Q"},c[s.Years]={cellClassNameSuffix:"year",modulus:1,unit:"y"},c[s.RelSeconds]={cellClassNameSuffix:"second",modulus:1,unit:"s"},c[s.RelSeconds5]={cellClassNameSuffix:"second5",modulus:5,unit:"s"},c[s.RelSeconds10]={cellClassNameSuffix:"second10",modulus:10,unit:"s"},c[s.RelSeconds15]={cellClassNameSuffix:"second15",modulus:15,unit:"s"},c[s.RelSeconds30]={cellClassNameSuffix:"second30",modulus:30,unit:"s"},c[s.RelMinutes]={cellClassNameSuffix:"minute",modulus:1,unit:"m"},c[s.RelMinutes5]={cellClassNameSuffix:"minute5",modulus:5,unit:"m"},c[s.RelMinutes10]={cellClassNameSuffix:"minute10",modulus:10,unit:"m"},c[s.RelMinutes15]={cellClassNameSuffix:"minute15",modulus:15,unit:"m"},c[s.RelMinutes30]={cellClassNameSuffix:"minute30",modulus:30,unit:"m"},c[s.RelHours]={cellClassNameSuffix:"hour",modulus:1,unit:"h"},c[s.RelHours2]={cellClassNameSuffix:"hour2",modulus:2,unit:"h"},c[s.RelHours3]={cellClassNameSuffix:"hour3",modulus:3,unit:"h"},c[s.RelHours6]={cellClassNameSuffix:"hour6",modulus:6,unit:"h"},c[s.RelHours12]={cellClassNameSuffix:"hour12",modulus:12,unit:"h"},c[s.RelDays]={cellClassNameSuffix:"day",modulus:1,unit:"d"},c[s.RelWeeks]={cellClassNameSuffix:"week",modulus:5,unit:"d"},c[s.RelMonths]={cellClassNameSuffix:"month",modulus:30,unit:"d"},c[s.RelQuarters]={cellClassNameSuffix:"quarter",modulus:90,unit:"d"},c[s.RelYears]={cellClassNameSuffix:"year",modulus:270,unit:"d"},Object.assign(l.prototype,{normalizeDateOrMoment:function(e){var t=c[this._type];return n.nDateHelper.normalizeDateOrMoment(e,t.unit,t.modulus,this._relativeDateModeEnabled)},_roundDateOrMoment:function(e){var t=c[this._type];return n.nDateHelper.roundDateOrMoment(e,t.unit,this._relativeDateModeEnabled)},addTimeUnit:function(e){var t=c[this._type];return n.nDateHelper.addToDateOrMoment(e,t.unit,t.modulus,this._relativeDateModeEnabled)},render:function(e){var t,a,i=this,r=e.collapseCalendar()&&!e.actualTimeRangeIncludesWorkingTime(),l=Math.max(e.timeAreaViewScrollOffset(),0),d=0,m=e.timeAreaViewWidth()-1,u=n.nDateHelper.dateToMomentIfNecessary(e.convertXToDate(l)),h=n.nDateHelper.createDateOrMoment(u),p=n.nDateHelper.dateToMomentIfNecessary(e.convertXToDate(l+m)),_=n.nDateHelper.dateToMomentIfNecessary(e.convertXToDate(Math.max(0,l-1)));_=i._roundDateOrMoment(_),u=i.normalizeDateOrMoment(u),i._cells=[];for(var g=!0,T=!1,f=!1;u.valueOf()<=p.valueOf();){var D=i.addTimeUnit(u);D=i.normalizeDateOrMoment(D);var v=!1;if(i._type===s.Weeks&&"USA"===n.nLocales.locale().weekNumbering){var y=n.nDateHelper.isMomentJSCurrentlyUsed?u.year():u.getFullYear();(n.nDateHelper.isMomentJSCurrentlyUsed?D.year():D.getFullYear())>y&&(D=n.nDateHelper.roundDateOrMoment(D,"y"),v=!0)}if((t=e.convertDateToX(n.nDateHelper.toDate(D))-l)>m&&(t=m),a=u,t-d<=0)(g||0===t)&&(h=n.nDateHelper.createDateOrMoment(D)),g=!1,u=D,T=!0;else{g=!1;var w=r?u:o.addWorkingTime(e.collapseCalendar(),n.nDateHelper.toDate(u),0),S=w?n.nDateHelper.dateToMomentIfNecessary(w):u;T||(f?(i._type=s.Days,S=i._roundDateOrMoment(S),i._type=s.Weeks):S=i._roundDateOrMoment(S),S.valueOf()!==u.valueOf()&&(T=!0));var I={dateOrMoment:S,x:d,width:Math.max(t-d+1,0),originalDateOrMoment:a,nextDateOrMoment:D,previousDateOrMoment:_,previousDateSkipped:T,ribbonType:i._type,modulus:c[i._type].modulus};i._cells.push(I),_=u,u=D,d=t,T=!1,f=v}}i._cells.length&&!r&&(w=o.addWorkingTime(e.collapseCalendar(),n.nDateHelper.toDate(h),0),i._cells[0].dateOrMoment=w?n.nDateHelper.dateToMomentIfNecessary(w):h)},_getCurrentTypicalCellWidth:function(e){var t=e.timeAreaViewScrollOffset(),a=this.normalizeDateOrMoment(n.nDateHelper.dateToMomentIfNecessary(e.convertXToDate(t)));return this.addTimeUnit(a).valueOf()-a.valueOf()},_getDates:function(e){var t=this,a=e.timeAreaViewScrollOffset(),i=n.nDateHelper.dateToMomentIfNecessary(e.convertXToDate(a));i=t.normalizeDateOrMoment(i);for(var r=e.convertXToDate(a+e.timeAreaViewWidth()),o=[];i.valueOf()<r;)o.push(n.nDateHelper.toDate(i)),i=t.addTimeUnit(i),i=t.normalizeDateOrMoment(i);return o},type:function(){return this._type},textFormat:function(){return this._textFormat},textFormatForMomentJS:function(){return this._textFormatForMomentJS},textFormatForD3:function(){return this._textFormatForD3},cells:function(){return this._cells},getCellClassNameSuffix:function(){return c[this._type].cellClassNameSuffix}}),l.RibbonType=s,e.exports=l},928:(e,t,a)=>{var i=a(199),n=i.NGANTT_BAR_RECT_CLASS,r=i.NGANTT_BAR_RECT_CAL_CLASS,o=i.NGANTT_BAR_PATH_CAL_CLASS,s=i.NGANTT_BAR_OUTLINE_CLASS,l=i.NGANTT_BAR_PATH_PATTERN_CLASS,c=i.BarType,d=i.ElemType,m=i.TimeType,u=a(442),h=a(853),p=function(){};Object.assign(p.prototype,{createBar:function(e){e.respectingCalendar?(e.barD3.append("path").attr("class",e.enrichClassFunc(n+" "+r,{elemType:d.BarRectangle,shape:e.barShapeId})),e.barD3.append("path").attr("class",e.enrichClassFunc(n+" "+o,{elemType:d.BarRectangle,shape:e.barShapeId})),h.separateBarShapeOutlinesEnabled&&(e.barD3.selectAll("path."+n).style("stroke-width",0),e.barD3.append("path").attr("class",e.enrichClassFunc(n+" "+s,{elemType:d.BarRectangle,shape:e.barShapeId})))):e.barD3.append("path").attr("class",e.enrichClassFunc(n+" "+o,{elemType:d.BarRectangle,shape:e.barShapeId})),null!=e.dataItem.item.fillPatternType&&e.barD3.append("path").attr("class",e.enrichClassFunc(n+" "+l,{elemType:d.BarRectangle,shape:e.barShapeId})).attr("mask",`url(#ngantt-pattern-mask${e.uniqueID}-${e.dataItem.item.fillPatternType})`)},positionBar:function(e){if(e.barD3){var t=!e.calendar||e.calendar.determineTimeType(e.timeRange.start)===m.WorkingTime,a=e.convertXToLimitedX;if(e.calendar){for(var i="M0,"+e.barHeight,n=i,c=u.calculateWorkingTime(e.calendar,e.timeRange.end,e.timeRange.start),d=e.timeRange.start;null!==(d=e.calendar.findStartOfNextTimeTypeChange(d))&&d.getTime()<e.timeRange.end.getTime();){t=!t;var p=Math.max(a(e.timeAxis.convertDateToX(d))-a(e.timeAxis.convertDateToX(e.timeRange.start))-1,0),_=(1-u.calculateWorkingTime(e.calendar,d,e.timeRange.start)/c)*e.barHeight;i=i+"L"+p+","+_,n=n+"L"+p+","+(t?e.barHeight:_)+"V"+(t?_:e.barHeight)}i+="L"+e.width+",0V"+e.barHeight+"H0",e.barD3.select("."+r).attr("d",i),e.barD3.select("."+o).attr("d",n+"L"+e.width+","+(t?"0":e.barHeight)+"V"+e.barHeight+"H0"),h.separateBarShapeOutlinesEnabled&&e.barD3.select("path."+s).attr("d",e.dataItem.item.start?i:"")}else e.barD3.select("."+o).attr("d","M0,"+e.barHeight+"L"+e.width+",0V"+e.barHeight+"H0");null!=e.dataItem.item.fillPatternType&&e.barD3.select("path."+l).attr("d",e.dataItem.item.start?i:"")}e.worldViewVisible&&(e.worldViewPathData=[{x:0,y:e.barHeight},{x:e.worldViewBarWidth,y:0},{x:e.worldViewBarWidth,y:e.barHeight},{x:0,y:e.barHeight}])},checkForBarType:function(e){return e===c.StartEnd}}),e.exports=p},138:(e,t,a)=>{a(104),a(98),a(680),a(582),a(274);var i=a(199);if(Object.keys(i).forEach((function(e){t[e]=i[e]})),t.nCalendar=a(420),t.nCalendarHelper=a(442),t.nTimeAxis=a(415),t.nTimescaleWidget=a(675),t.nTimescaleWidgetRibbon=a(382),t.nLinkRouter=a(473),t.nBarDragging=a(756),t.nGanttWidget=a(83),t.nGanttSynchronizerWidget=a(207),t.nShapeHelper=a(853),t.nBarFactory=a(219),t.nArrowBarShape=a(867),t.nArrowLeftShape=a(612),t.nArrowRightShape=a(643),t.nDiamondShape=a(145),t.nDownwardRampBarShape=a(919),t.nRectangleBarShape=a(717),t.nRectangleWithLeftTopBevelBarShape=a(634),t.nSummaryBarShape=a(875),t.nUpwardRampBarShape=a(928),self){var n=self.netronic=self.netronic||{};Object.keys(t).forEach((function(e){n[e]=t[e]}))}},571:t=>{t.exports=e},280:e=>{e.exports=t},337:e=>{e.exports=a},104:e=>{e.exports=i},98:e=>{e.exports=n},680:e=>{e.exports=r},582:e=>{e.exports=o},274:e=>{e.exports=s}},c={},function e(t){var a=c[t];if(void 0!==a)return a.exports;var i=c[t]={exports:{}};return l[t](i,i.exports,e),i.exports}(138);var l,c}));
/*! (c) Copyright 2013-2024 NETRONIC Software GmbH. All rights reserved. Version 9.0.1 */
"use strict";!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("nwaf_apptools"),require("nwaf_gantt"),require("nwaf_table"),require("d3-axis"),require("d3-format"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("tinycolor2")):"function"==typeof define&&define.amd?define(["nwaf_apptools","nwaf_gantt","nwaf_table","d3-axis","d3-format","d3-scale","d3-selection","d3-shape","d3-time-format","d3-transition","tinycolor2"],t):"object"==typeof exports?exports.nwaf_rab=t(require("nwaf_apptools"),require("nwaf_gantt"),require("nwaf_table"),require("d3-axis"),require("d3-format"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("tinycolor2")):e.nwaf_rab=t(e.nwaf_apptools,e.nwaf_gantt,e.nwaf_table,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.tinycolor)}(globalThis,((e,t,i,a,n,o,r,l,s,d,c)=>(()=>{var u={8138:(e,t,i)=>{i(9816),i(3098),i(4379),i(8680),i(8625),i(2582),i(274);var a=i(476);Object.keys(a).forEach((function(e){t[e]=a[e]})),t.rabAbout=i(6898),t.rabActivitiesViewModel=i(6560),t.rabActivity=i(1222),t.rabActivityEntry=i(2659),t.rabActivityEntryTimeItem=i(1386),t.rabActivityFrameTimeItem=i(3688),t.rabActivityRowItem=i(6616),t.rabActivityTimeItem=i(4781),t.rabAllocation=i(2205),t.rabAllocationEntry=i(6084),t.rabAllocationEntryTimeItem=i(7450),t.rabAllocationRowItem=i(6621),t.rabAllocationTimeItem=i(3375),t.rabApplication=i(6288),t.rabCalendar=i(6529),t.rabCalendarEntry=i(7333),t.rabCheckLogger=i(1296),t.rabChildItem=i(1094),t.rabColorCalculator=i(4100),t.rabCurve=i(2422),t.rabCurvePointEntry=i(8445),t.rabEntitiesViewModel=i(5265),t.rabEntity=i(4859),t.rabEntityRowItem=i(214),t.rabGanttView=i(9199),t.rabGroup=i(8882),t.rabGroupingLevelDefinition=i(203),t.rabGroupingItemDescriptor=i(9044),t.rabGroupRowItem=i(8037),t.rabHierarchySupplementaryDefinition=i(7613),t.rabHierarchyLevelSupplementaryDefinition=i(3340),t.rabItem=i(1333),t.rabLink=i(1597),t.rabLinkEntry=i(1221),t.rabLinkItem=i(9721),t.rabLoadsViewModel=i(5241),t.rabModel=i(8251),t.rabMultipliedSkill=i(7140),t.rabMultipliedAllocationBase=i(4373),t.rabMultipliedAllocationByActivity=i(3458),t.rabMultipliedResourceBase=i(5354),t.rabMultipliedResourceByActivity=i(3323),t.rabMultipliedResourceRowItem=i(9872),t.rabOptionsCollector=i(2277),t.rabParentItemDescriptor=i(7315),t.rabPeriodHighlighter=i(2900),t.rabPeriodHighlighterEntry=i(5729),t.rabPropertyFactory=i(7273),t.rabRelationshipItemDescriptor=i(5844),t.rabResource=i(817),t.rabResourcePropertiesForSkill=i(1186),t.rabResourceRowItem=i(7437),t.rabResourcesViewModelBase=i(1666),t.rabResourcesViewModel=i(9586),t.rabRootRowItem=i(4144),t.rabSkill=i(2390),t.rabSkilledAllocation=i(497),t.rabSkilledResource=i(7082),t.rabSkilledResourcesViewModel=i(4003),t.rabSkillRowItem=i(6652),t.rabRowItem=i(4613),t.rabTimeItem=i(3786),t.rabVersionInfos=i(7433),t.rabView=i(997),t.rabViewModel=i(7922),t.rabViewModelBase=i(371),t.rabWidget=i(5338),t.rabWidgetApplication=i(8684),t.rabWidgetGanttView=i(501),t.rabWidgetModel=i(5984),t.rabWidgetOptionsCollector=i(5425),t.rabWidgetView=i(508),t.rabWrapper=i(9276),t.vswApplication=i(7776);let n=i(4137);t.vswDefines=n;let o=t.vsWidget=i(5573);if(t.rabCalendarGrid=t.rabPeriodHighlighter,t.rabCalendarGridEntry=t.rabPeriodHighlighterEntry,self){self.netronic||(self.netronic={});var r=self.netronic,l=r.nResourcePlanningAppBase={};for(const[e,i]of Object.entries(t))l[e]=i;var s=r.nVSW={};for(const[e,t]of Object.entries(n))s[e]=t;s.VSWidget=s.visualSchedulingWidget=o}},6898:e=>{var t={hd:'<div class="nrab-about-container">\n   <br />\n   <div class="nrab-about-center nrab-about-logo"></div><br />\n   <span class="nrab-about-title nrab-about-center">%name%</span>\n   <span class="nrab-about-version nrab-about-center">Version %version%\n   </span><br />\n   <span class="nrab-about-center">Copyright (c) %copyrightYear% NETRONIC Software GmbH</span><br />\n   <hr />\n   <span class="nrab-about-center">License %license% for %licensee%</span>\n   <span class="nrab-about-center">Expires %expire%</span><br />\n   <hr />\n   <span class="nrab-about-center">Based on NETRONIC Web Application Framework, Version %nwafVersion%</span>\n   <span class="nrab-about-center">Copyright (c) %nwafYear% NETRONIC Software GmbH</span><br />\n   <hr />%appNameAndVersion%\n   <span class="nrab-about-center">UserAgent: %userAgent%</span><br />\n   <hr />\n   Licenses of incorporated software libraries:<br /><br />\n   %lt%</div>',lt:"<n>Simple JavaScript Inheritance</n>\n<t>\n/* Simple JavaScript Inheritance\n * By John Resig http://ejohn.org\n * MIT Licensed.\n */\n</t>"};e.exports=t},8590:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(9276),o={store:function(e){this._super(e),this._copyOfData=this.getAPIOption("internalObjectCopiesNeeded")&&e?Object.assign({},e):void 0},_modificationClassificationByProperty:{Color:1,NonworkingTimeColor:1,PatternColor:1}},r=a.extendClass("rabActOrAllocEntry",n,o),l=r.prototype;l.defineProperty("Start",{get:function(){return this._data.Start}}),l.defineProperty("End",{get:function(){return this._data.End}}),l.defineProperty("Color",{get:function(){return this._getPropertyAsColorString(this._data.Color??this._data.PM_Color)}}),l.defineProperty("Height",{get:function(){return this._getPropertyAsNumber(this._data.Height??this._data.PM_Height)}}),l.defineProperty("NonworkingTimeColor",{get:function(){return this._getPropertyAsColorString(this._data.NonworkingTimeColor??this._data.PM_NonworkingTimeColor)}}),l.defineProperty("PatternColor",{get:function(){return this._getPropertyAsColorString(this._data.PatternColor??this._data.PM_PatternColor)}}),l.defineProperty("PatternType",{get:function(){return this._getPropertyAsNumber(this._data.PatternType??this._data.PM_PatternType,(e=>-1===e?void 0:e))}}),l.defineProperty("RelativeTopOffset",{get:function(){return this._getPropertyAsNumber(this._data.RelativeTopOffset??this._data.PM_RelativeTopOffset)}}),e.exports=r},1632:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(5674).BarInteractions,o=i(476).ItemType,r=i(5977)._UnifiedBarDesigns,l=i(3786),s={construct:function(e,t,i,a,n){this._super(e,t,i,a,void 0,n),this.respectingCalendar=!0,this.selectable=!0},updateFromReference:function(e){this._super(e);var t,i,a=this.data();e?.triggeredByParent||(i=(t=a.getHierarchyParent()).model(),this.start=i.dateTimeValueToDate(a.Start),this.end=i.dateTimeValueToDate(a.End));let n=this.rab_parentItem??this._bridgedParentItem;if(this.hidden="twice"!==n?.zOrder,this.hidden)return;this.barShape=n.rab_barShape;let l=a.Height,s=a.RelativeTopOffset??0;if(n.rab_unifiedBarDesign&r.ReducedHeight){let e=this.getAPIOption((n.rab_itemType===o.Activity?"activity":"allocation")+"BarTopOffsetAndHeightScaleFactor"),t=this.getAPIOption("reducedBarTopOffsetAndHeightScaleFactor")/e;null!=l&&(l*=t),s&&(s*=t)}this.barHeight=a.Height??n.barHeight,this.barTopOffset=(n.barTopOffset??0)+s,e?.triggeredByParent||(this.barInteractions=this._determineBarInteractions(i,t),this.fillPatternType=a.PatternType)},getParentItemPropName:function(){return this||this._super(),"rab_parentItem"},getChildItemsPropNameInParent:function(){return this||this._super(),"rabvm_childTimeItems"},postUpdateSelf:function(){if(this.getParentItem())if(this.getAPIOption("updateOptimizationEnabled")){var e=this.data().getHierarchyParent();e&&!e.rab_modificationClassification&&this._super()}else this._super()},_determineBarInteractions:function(){return n.None}};e.exports=a.extendClass("rabActOrAllocEntryTimeItemBase",l,s)},6560:(e,t,i)=>{var a=i(7922),n=i(3571),o=n.nClassFactory,r=n.nDataDescriptor,l=n.nDefaultSeparator,s=n.nPrimaryKeyManager,d=n.nStructuralDataDescriptor,c=n.nStructureType,u=i(5674),p=u.DisplayedElements,h=u.HorizontalAlignment,g=i(476),m=g.ItemType,_=g.ViewType,f=g.ObjectType,y=g.VisualType,b=i(5977),A=b.PrimaryKeyInfos,v=b.RAB_ROOT_PROP_NAME,I=b.RAB_RESOURCES_PROP_NAME,C=b.RAB_ACTIVITIES_PROP_NAME,w=b.RAB_ACTIVITY_ENTRIES_PROP_NAME,T=b.RAB_LINKS_PROP_NAME,R=b.RAB_ALLOCATIONS_PROP_NAME,S=b.RAB_ALLOCATION_ENTRIES_PROP_NAME,P=b.RAB_MULTIPLIED_RESOURCES_BY_ACTIVITIES_PROP_NAME,O=b.RAB_MULTIPLIED_ALLOCATIONS_BY_ACTIVITIES_PROP_NAME,D=b.RelationshipInfos,E=b.RowCategory,M=(i(2659),i(6084),i(9044)),B=i(5844),k={construct:function(e,t,i){this._super(e,t,_.Activities,i),this.__barsGeneratedByChildRowObjectData=!0,this._multiplierMode=2},_specifyCategorizedParams:function(){this._super(),this.__CategorizedParams.ChildrenName[E.ChildRow]=C,this.__CategorizedParams.RowSortCodePropertyNameAPIOptionName[E.ChildRow]="activityRowSortCodePropertyName",this.__CategorizedParams.RowSortModeAPIOptionName[E.ChildRow]="activityRowSortMode",this.__CategorizedParams.RowItemsType[E.ChildRow]=m.ActivityRow,this.__CategorizedParams.ChildrenName[E.LeafGroupRow]=I,this.__CategorizedParams.RowSortCodePropertyNameAPIOptionName[E.LeafGroupRow]="resourceRowSortCodePropertyName",this.__CategorizedParams.RowSortModeAPIOptionName[E.LeafGroupRow]="resourceRowSortMode",this.__CategorizedParams.RowItemsType[E.LeafGroupRow]=m.Resource,this.__CategorizedParams.ChildrenName[E.LeafRow]=R,this.__CategorizedParams.RowSortCodePropertyNameAPIOptionName[E.LeafRow]="allocationRowSortCodePropertyName",this.__CategorizedParams.RowSortModeAPIOptionName[E.LeafRow]="allocationRowSortMode",this.__CategorizedParams.RowItemsType[E.LeafRow]=m.AllocationRow},_collectAPIOptions:function(e){e[0].push(["linksVisibleInActivitiesView","allocationRowsVisibleInActivitiesView","resourcesVisibleInActivitiesView"]),e[1].push(["defaultValuesForActivityProperties","defaultValuesForActivityEntryProperties","defaultActivityBarShape","defaultActivityConstraintSymbolColor","detailedActivityConstraintSymbolsEnabled","defaultActivityProgressBackgroundColor","activityCalendarsEnabled","activityBaselineBarsVisible","defaultValuesForAllocationProperties","defaultValuesForAllocationEntryProperties","defaultValuesForLinkProperties","allocationRowsVisibleInActivitiesView","resourcesVisibleInActivitiesView","definedAllocationLinksVisibleInActivitiesView","ignoreCalendarOnActivityBarInteractions","linksVisibleInActivitiesView","activityHierarchySupplementaryDefinitionID","topViewAreaVisibleInActivitiesView","mainViewAreaVisibleInActivitiesView","defaultAllocationBarHeight","defaultActivityMaximumSubRowHeightInTimeArea","defaultActivityMaximumRowHeight","defaultAllocationBarDesign","defaultActivityBarDesign","defaultAllocationBarSelectable","defaultActivityBarSelectable","defaultAllocationAllowedBarDragModesInActivitiesView","forcedAllocationAllowedBarDragModesInActivitiesView","defaultActivityAllowedBarDragModes","forcedActivityAllowedBarDragModes","defaultActivitySnapTargetsForStart","defaultActivitySnapTargetsForEnd","defaultAllocationSnapTargetsForStart","defaultAllocationSnapTargetsForEnd","defaultAllocationTableRowDefinitionID","tableViewWidthInActivitiesView","entitiesTableVisibleInActivitiesView","allocationBarTopOffsetAndHeightScaleFactor","activityBarTopOffsetAndHeightScaleFactor","defaultActivityBarHeight","curvePanesVisibleInActivitiesView","defaultActivityTableRowDefinitionID","tableRowDefinitionIDForTitleInActivitiesView","activityRowSortMode","activityRowSortCodePropertyName","resourceRowSortMode","resourceRowSortCodePropertyName","allocationRowSortMode","allocationRowSortCodePropertyName","compareActivities","compareResources","compareAllocations","visibilityFilterForActivities","visibilityFilterForAllocations","allocationBarDesignOfOtherActivity","reducedBarTopOffsetAndHeightScaleFactor","decouplingOfAllocationPropertiesFromActivities","triggerCalendarOrCalendarGrid","triggerResource","defaultResourceTableRowDefinitionID","defaultResourceTableRowDefinitionIDInActivitiesView"]),this._super(e)},_handleAPIOptionChanged:function(e,t,i,a){var n=this,o=function(){n.getAPIOption("resourcesVisibleInActivitiesView")&&2===n._multiplierMode?n.model().activities().forEach((function(e){0===e.AllocationRowsCollapseState&&n.addMultipliedObjectsForActivity(e);var t=n.itemByWrapper(e);t&&(t.updateFromReference(),n.registerRowItem(t,!1,!0))})):(n.activityItems().forEach((function(e){e.updateFromReference(),n.registerRowItem(e,!1,!0)})),n.model().allocations().forEach((function(e){n.addAllocation(e)})))},r=function(){n.getAPIOption("resourcesVisibleInActivitiesView")&&2===n._multiplierMode?n.model().activities().forEach((function(e){0===e.AllocationRowsCollapseState&&n.removeMultipliedObjectsForActivity(e);var t=n.itemByWrapper(e);t&&(t.updateFromReference(),n.registerRowItem(t,!1,!0))})):(n.model().allocations().forEach((function(e){n.removeAllocation(e)})),n.activityItems().forEach((function(e){e.updateFromReference(),n.registerRowItem(e,!1,!0)})))};switch(e){case"reducedBarTopOffsetAndHeightScaleFactor":this.getAPIOption("allocationRowsVisibleInActivitiesView")&&this._model.allocations().forEach((function(e){n.updateAllocation(e)}));case"defaultValuesForActivityProperties":case"defaultValuesForActivityEntryProperties":case"defaultActivityConstraintSymbolColor":case"detailedActivityConstraintSymbolsEnabled":case"defaultActivityProgressBackgroundColor":case"activityCalendarsEnabled":case"activityBaselineBarsVisible":this._model.activities().forEach((function(e){n.updateChild(e)})),this.delegateToGanttView((function(t){t.ganttWidget().invalidateAllRows(!1,"activityBaselineBarsVisible"===e),t.update()}));break;case"defaultActivityBarHeight":case"defaultActivityBarShape":case"defaultActivityBarDesign":this._model.activities().forEach((function(e){n.updateChild(e)})),this.delegateToGanttView((function(i){"defaultActivityBarHeight"===e?i.ganttWidget().option("barHeight",t):"defaultActivityBarShape"===e?i.ganttWidget().option("defaultBarShape",t):this.delegateToGanttView((function(e){e.ganttWidget().invalidateAllRows(!1,!0),e.update()}))}));break;case"defaultAllocationBarShape":case"defaultAllocationBarDesign":this.getAPIOption("allocationRowsVisibleInActivitiesView")&&(this._model.allocations().forEach((function(e){n.updateAllocation(e)})),this.delegateToGanttView((function(i){"defaultAllocationBarShape"===e&&i.ganttWidget().option("defaultLeafBarShape",t),i.ganttWidget().invalidateAllRows(!1,!0),i.update()})));break;case"defaultValuesForAllocationProperties":case"defaultValuesForAllocationEntryProperties":this.getAPIOption("allocationRowsVisibleInActivitiesView")&&(this._model.allocations().forEach((function(e){n.updateAllocation(e)})),this.delegateToGanttView((function(e){e.ganttWidget().invalidateAllRows(!1,!0),e.update()})));break;case"defaultValuesForLinkProperties":this._model.links().forEach((function(e){n.updateLink(e)})),this.delegateToGanttView((function(e){e.ganttWidget().invalidateAllRows(),e.update()}));break;case"allocationRowsVisibleInActivitiesView":if(!t||!this.getAPIOption("resourcesVisibleInActivitiesView")){1===a&&(t?(n._initializeCompareObjects(O),n._refreshLinksEnabled=!1,o()):(n._refreshLinksEnabled=!1,r()),n._refreshLinksEnabled=!0,n.refreshLinks(),this.delegateToGanttView((function(e){n.autoInvalidateRows(),e.ganttWidget().option("detailingRowsVisible",t),e.update()})));break}case"resourcesVisibleInActivitiesView":if("allocationRowsVisibleInActivitiesView"===e||this.getAPIOption("allocationRowsVisibleInActivitiesView"))switch(a){case 0:r();break;case 1:n._initializeCompareObjects(O),n._refreshLinksEnabled=!1,o(),n._refreshLinksEnabled=!0,n.refreshLinks(),this.delegateToGanttView((function(i){n.autoInvalidateRows(),"allocationRowsVisibleInActivitiesView"===e&&i.ganttWidget().option("detailingRowsVisible",t),i.update()}))}break;case"definedAllocationLinksVisibleInActivitiesView":this.refreshLinks(),this.delegateToGanttView((function(e){e.update()}));break;case"ignoreCalendarOnActivityBarInteractions":this.delegateToGanttView((function(e){e.ganttWidget().option("ignoreCalendarOnBarInteractions",t)}));break;case"linksVisibleInActivitiesView":switch(a){case 0:t||this._model.links().forEach((function(e){n.removeLink(e)}));break;case 1:t&&this._model.links().forEach((function(e){n.addLink(e)})),this.delegateToGanttView((function(e){e.update()}))}break;case"activityHierarchySupplementaryDefinitionID":this._updateGrouping(C,"removeActivities"),this.delegateToGanttView((function(e){e.update()}));break;case"topViewAreaVisibleInActivitiesView":this.delegateToGanttView((function(e){e.ganttWidget().option("topBodyViewAreaVisible",t)}));break;case"mainViewAreaVisibleInActivitiesView":this.delegateToGanttView((function(e){e.ganttWidget().option("commonBodyViewAreaVisible",t)}));break;case"defaultAllocationBarHeight":this.getAPIOption("allocationRowsVisibleInActivitiesView")&&(this._model.allocations().forEach((function(e){n.updateAllocation(e)})),this.delegateToGanttView((function(e){e.ganttWidget().option("defaultLeafBarHeight",t),e.update()})));break;case"defaultActivityMaximumSubRowHeightInTimeArea":this.delegateToGanttView((function(e){e.ganttWidget().option("defaultMaximumSubRowHeight",t)}));break;case"defaultActivityMaximumRowHeight":this.delegateToGanttView((function(e){e.ganttWidget().option("defaultMaximumRowHeight",t)}));break;case"defaultAllocationBarSelectable":this.delegateToGanttView((function(e){e.ganttWidget().option("defaultLeafTimeItemSelectable",t)}));break;case"defaultActivityBarSelectable":this.delegateToGanttView((function(e){e.ganttWidget().option("defaultTimeItemSelectable",t)}));break;case"defaultAllocationAllowedBarDragModesInActivitiesView":case"forcedAllocationAllowedBarDragModesInActivitiesView":this.delegateToGanttView((function(i){i.ganttWidget().option("d"===e.charAt(0)?"defaultLeafBarInteractions":"forcedLeafBarInteractions",t)}));break;case"defaultActivityAllowedBarDragModes":case"forcedActivityAllowedBarDragModes":this.delegateToGanttView((function(i){i.ganttWidget().option("d"===e.charAt(0)?"defaultBarInteractions":"forcedBarInteractions",t)}));break;case"defaultActivitySnapTargetsForStart":this.delegateToGanttView((function(e){e.ganttWidget().option("defaultBarSnapTargetsForStart",t)}));break;case"defaultActivitySnapTargetsForEnd":this.delegateToGanttView((function(e){e.ganttWidget().option("defaultBarSnapTargetsForEnd",t)}));break;case"defaultAllocationSnapTargetsForStart":this.delegateToGanttView((function(e){e.ganttWidget().option("defaultLeafBarSnapTargetsForStart",t)}));break;case"defaultAllocationSnapTargetsForEnd":this.delegateToGanttView((function(e){e.ganttWidget().option("defaultLeafBarSnapTargetsForEnd",t)}));break;case"defaultAllocationTableRowDefinitionID":this.delegateToGanttView((function(){n._setDefaultTableRowDefinitionIDForItemType(m.AllocationRow,n.getAPIOption("defaultAllocationTableRowDefinitionID"))}));break;case"tableViewWidthInActivitiesView":this.delegateToGanttView((function(e){e.ganttWidget().modifyTableViewWidth(t)}));break;case"entitiesTableVisibleInActivitiesView":this.delegateToGanttView((function(e){e._showHideEntitiesTable()}));break;case"allocationBarTopOffsetAndHeightScaleFactor":this.getAPIOption("allocationRowsVisibleInActivitiesView")&&this._model.allocations().forEach((function(e){n.updateAllocation(e)})),this.delegateToGanttView((function(e){e.ganttWidget().option("leafBarTopOffsetAndHeightScaleFactor",t),e.update()}));break;case"activityBarTopOffsetAndHeightScaleFactor":this._model.activities().forEach((function(e){n.updateChild(e)})),this.delegateToGanttView((function(e){e.ganttWidget().option("barTopOffsetAndHeightScaleFactor",t),e.update()}));break;case"curvePanesVisibleInActivitiesView":this._addOrRemoveCurveCollapsingColumnInTableDefinition(this._tableDefinition,t),this.delegateToGanttView((function(e){n.activityItems().forEach((function(t){e.updateRowHeight(t)})),e.ganttWidget().option("tableDefinition",e.ganttWidget().option("tableDefinition"))}));break;case"defaultActivityTableRowDefinitionID":this._setDefaultTableRowDefinitionIDForItemType(m.ActivityRow,t);break;case"tableRowDefinitionIDForTitleInActivitiesView":this._tableDefinition.rowDefinitionIDWithColumnTitles=t,this.delegateToGanttView((function(e){e.ganttWidget().updateTableTitle(!0)}));break;case"activityRowSortCodePropertyName":case"activityRowSortMode":this.updateTableTitleSortingParams(E.ChildRow);case"compareActivities":this._initializeCompareObjects(C);break;case"resourceRowSortCodePropertyName":case"resourceRowSortMode":case"compareResources":this._initializeCompareObjects(P);break;case"allocationRowSortCodePropertyName":case"allocationRowSortMode":case"compareAllocations":this._initializeCompareObjects(O);break;case"visibilityFilterForActivities":this.determineVisibilityOfAllRowObjects(C,void 0,!0);break;case"visibilityFilterForAllocations":this.determineVisibilityOfAllRowObjects(R,void 0,!0);break;case"allocationBarDesignOfOtherActivity":this._model.multipliedAllocationsByActivity().forEach((function(e){n.updateChild(e)})),this.delegateToGanttView((function(e){e.ganttWidget().invalidateAllRows(!1,!0),e.update()}));break;case"decouplingOfAllocationPropertiesFromActivities":this.getAPIOption("allocationRowsVisibleInActivitiesView")&&this.activityItems().forEach((function(e){e?.detailingRowItems?.forEach((function(e){e.updateFromReference({updateChildTimeItems:!0}),n.registerRowItem(e,!0,!1)}))}));break;case"triggerCalendarOrCalendarGrid":if(t&&n.getAPIOption("allocationRowsVisibleInActivitiesView")){var l=this.model().getRelatedObjects(I,t.getPropertyName(),"*",t.getPrimaryKey());l&&(l.forEach((function(e){n.updateResource(e),n.setAPIOption("triggerResource",e)})),n.setAPIOption("triggerResource",null))}break;case"triggerResource":if(t&&this.getAPIOption("allocationRowsVisibleInActivitiesView")){let e=this.model().getRelatedObjects(R,I,"*",t.getPrimaryKey());e?.forEach((e=>{n.updateAllocation(e)}))}break;case"defaultResourceTableRowDefinitionIDInActivitiesView":this._setDefaultTableRowDefinitionIDForItemType(m.Resource,t??this.getAPIOption("defaultResourceTableRowDefinitionID"));break;case"defaultResourceTableRowDefinitionID":this._setDefaultTableRowDefinitionIDForItemType(m.Resource,this.getAPIOption("defaultResourceTableRowDefinitionIDInActivitiesView")??t);break;default:this._super(e,t,i,a)}},_doModifyDisplayedElementsForRowItemType:function(e,t){return e===m.Resource?p.BarsInOwnHiddenLeafRows:this._super(e,t)},_initDataDefinition:function(){var e,t=this,i=this.model(),a=this._dataDescriptors={};a[v]=new d(v,null);var n=!0;a[C]=new M(this,C,i.getOption("activityClass"),this._options.activityRowItemClass,A[C],[D[C][0]],{structureType:c.Parent,relationshipInfos:D[C][0]},D[R],{enableInheritChangedRelationships:n},{getHierarchySupplementaryDefinitionIDFunc:function(){return t.getHierarchySupplementaryDefinitionID()},getSourceValueForGroupingCodeSourceFunc:function(e,i,a,n,o,r){return t.getSourceValueForGroupingCodeSource(f.Activity,e,i,a,n,o,r)}}),e=new d(w,this._options.activityEntryTimeItemClass,void 0,void 0,void 0,{handleParentItemFunc:function(e,i){return t._findItemOfTypeInArray(e.timeItems[0].childTimeItems,m.Activity)}}),a[C].addSubDescriptor(e),a[v].addSubDescriptor(a[C]),a[R]=new B(this,R,i.getOption("allocationClass"),this._options.allocationRowItemClass,A[R],D[R],{structureType:c.Parent,relationshipInfos:D[R][1]},void 0,{enableInheritChangedRelationships:n},{isActiveFunc:function(){return t.getAPIOption("allocationRowsVisibleInActivitiesView")&&!t.getAPIOption("resourcesVisibleInActivitiesView")}}),e=new d(S,this._options.allocationEntryTimeItemClass,void 0,void 0,void 0,{handleParentItemFunc:function(e,t){return e.timeItems[0]}}),a[R].addSubDescriptor(e),a[v].addSubDescriptor(a[R]),a[P]=new B(this,P,i.getOption("multipliedResourceByActivityClass"),this._options.multipliedResourceRowItemClass,A[P],void 0,{structureType:c.Parent,relationshipInfos:D[P][0]},D[O],{_checkPlacement:!0,enableInheritChangedRelationships:n}),a[v].addSubDescriptor(a[P]),a[O]=new B(this,O,i.getOption("multipliedAllocationByActivityClass"),this._options.allocationRowItemClass,A[O],D[O][0],{structureType:c.Parent,relationshipInfos:D[O][1]},void 0,{enableInheritChangedRelationships:n}),e=new d(S,this._options.allocationEntryTimeItemClass,void 0,void 0,void 0,{handleParentItemFunc:function(e,t){return e.timeItems[0]}}),a[O].addSubDescriptor(e),a[v].addSubDescriptor(a[O]),a[T]=new r(T,this._options.linkItemClass,A[T],D[T],{enableInheritChangedRelationships:n},{isActiveFunc:function(){return t.getAPIOption("linksVisibleInActivitiesView")}}),a[v].addSubDescriptor(a[T])},_createViewItems:function(){var e=this;if(this._dataDescriptors&&!1===this.__dataReady){if(this.getAPIOption("resourcesVisibleInActivitiesView")){var t=this.model();switch(this._multiplierMode){case 1:t.allocations().forEach((function(i){var a=e.___getCurrentMultiplierPrimaryKeysForAllocation(i);a?.forEach((e=>i.addMultiplierPrimaryKey(O,e))),e.__iterateMultiplierPrimaryKeys(a,i,(function(e){t.getChildByData(O,e)||t.addMultipliedAllocationByActivity(e)}))}));break;case 2:t.activities().forEach((function(t){0===t.AllocationRowsCollapseState?e.addMultipliedObjectsForActivity(t):e.___getRelatedResourcesByActivityViaAllocations(t)}))}}this._super()}},addMultipliedObjectsForActivity:function(e,t){var i=this,a=this.model(),n=this.___getRelatedResourcesByActivityViaAllocations(e,t);let o=e.getPrimaryKey();n?.size&&(n.forEach((function(e){let t=a.getChildByPrimaryKey(I,e);if(t&&(i._addMultipliedResourcesByActivity(t,[o]),i.__dataReady)){let e={__MultiplierPrimaryKey:o,Role:t.Role,ID:t.ID},a=s.getPrimaryKeyByPrimaryKeyNames(e,A[P]);var n=i.itemByPrimaryKey(P,a);i._checkPlacementOfAllRowItemsInView(!1,R,n)}})),i.__dataReady&&(i.registerRowItem(i.activityItem(e),!1,!0),i.autoInvalidateRows()))},removeMultipliedObjectsForActivity:function(e,t){var i=this,a=this.model(),n=this.___getRelatedResourcesByActivityViaAllocations(e,t);n?.size&&(n.forEach((function(t){let n=a.getChildByPrimaryKey(I,t);n&&i._removeMultipliedResourcesByActivity(n,void 0,[e.getPrimaryKey()])})),i.__dataReady&&(i.registerRowItem(i.activityItem(e),!1,!0),i.autoInvalidateRows()))},areMultipliedObjectsForActivityExistent:function(e){return this.___getRelatedResourcesByActivityViaAllocations(e,!0)?.size>0},addMultipliedResourceByActivity:function(e){var t=this.addChild(e);if(t)return this._expandOrCollapseRowByCollapseStateForRowItem(t),this._expandOrCollapseCurvesInRowByCollapseStateForRowItem(t),t},updateMultipliedResourceByActivity:function(e){this._updateRowObject(e),this._expandOrCollapseRowByCollapseState(e),this._expandOrCollapseCurvesInRowByCollapseState(e)},removeMultipliedResourceByActivity:function(e,t){if(t){var i=this._item(e);i&&(delete i.childRowItems,delete i.detailingRowItems)}this.removeChild(e,t),t||this._checkChildItemsArraysInAncestors(),delete this._temporaryAncestorItemsByRowID},addMultipliedAllocationByActivity:function(e){var t=this.addChild(e);if(t)return t.rab_itemType===m.AllocationRow&&this.registerRowItem(t.rab_parentRowItem,!0,!0),this.getAPIOptionMapped("linksVisible")&&this._invalidateLinkItemsRelatedToAllocation(e.data()),t},updateMultipliedAllocationByActivity:function(e){this.updateChild(e)},removeMultipliedAllocationByActivity:function(e,t){if(this.removeChild(e,t),this.getAPIOptionMapped("linksVisible")&&this._invalidateLinkItemsRelatedToAllocation(e.data()),t){var i=this._item(e);i&&delete i.timeItems}},_addMultipliedResourcesByActivity:function(e,t){var i=this,a=t??this.___getCurrentMultiplierPrimaryKeys(e);this.model().forEachRelatedObject(e,R,(function(e){i.__addMultipliedWrapper(a,e,O,"addMultipliedAllocationByActivity",!0)}))},_updateMultipliedResourcesByActivity:function(e,t){switch(t){case"after":case void 0:var i=this.app();this.model().forEachRelatedObject(e,P,(function(t){e.__MultiplierPrimaryKey=t.__MultiplierPrimaryKey,i._updateObject(e,P,"updateMultipliedResourceByActivity"),delete e.__MultiplierPrimaryKey}))}},_removeMultipliedResourcesByActivity:function(e,t,i){var a=this,n=i??this.___getCurrentMultiplierPrimaryKeys(e);this.model().forEachRelatedObject(e,R,(function(e){a.__removeMultipliedWrapper(n,e,O,"removeMultipliedAllocationByActivity",t,!0)}))},_addMultipliedAllocationsByActivity:function(e){let t=this.model().getRelatedWrapperByRelationshipInfo(e,D[R][0]);if(t){var i=this.___getCurrentMultiplierPrimaryKeys(t,!0);this.__addMultipliedWrapper(i,e,O,"addMultipliedAllocationByActivity",!0)}},_updateMultipliedAllocationsByActivity:function(e,t){switch(t){case"before":this._oldResourceID=e.ResourceID,this._oldActivityID=e.ActivityID,this._oldResourceIDSet=!0;break;case"after":case void 0:var i=!1,a=void 0;if(this._oldResourceIDSet){var n=e.ResourceID,o=e.ActivityID;n==this._oldResourceID&&o==this._oldActivityID||(a={DBG_THIS_IS_RAB_WRAPPER_SUBSTITUTE:!0,Role:e.Role,ID:e.ID,ResourceID:this._oldResourceID,ActivityID:this._oldActivityID},i=!0)}this.__updateMultipliedWrapper(this.___getCurrentMultiplierPrimaryKeysForAllocation(e,i),e,O,"addMultipliedAllocationByActivity","updateMultipliedAllocationByActivity","removeMultipliedAllocationByActivity",a),delete this._oldResourceID,delete this._oldActivityID,delete this._oldResourceIDSet}},_removeMultipliedAllocationsByActivity:function(e,t){let i=this.model().getRelatedWrapperByRelationshipInfo(e,D[R][0]);if(i){var a=this.___getCurrentMultiplierPrimaryKeys(i);this.__removeMultipliedWrapper(a,e,O,"removeMultipliedAllocationByActivity",t,!0)}},___getRelatedActivitiesByResourceViaAllocations:function(e,t){return this.___getOtherRelatedObjectsByObjectViaAllocations(e,C,t)},___getRelatedResourcesByActivityViaAllocations:function(e,t){return this.___getOtherRelatedObjectsByObjectViaAllocations(e,I,t)},___getOtherRelatedObjectsByObjectViaAllocations:function(e,t,i){if(!e.__cachedOtherRelatedObjectsSet||i){let i=this.model();var a=new Set,n=i.getRelatedObjects(R,e.getPropertyName(),"*",e.getPrimaryKey());if(n){let r={[C]:I,[I]:C}[e.getPropertyName()];var o=s.getRelationshipInfoTo(D[R],R,t);Array.isArray(o)&&(o=o[0]),n.forEach((function(e){let t=s.getPrimaryKeyByRelationshipInfo(e,o);(null!=t?i.getChildByPrimaryKey(r,t):void 0)&&a.add(t)}))}e.__cachedOtherRelatedObjectsSet=a}return e.__cachedOtherRelatedObjectsSet},___getCurrentMultiplierPrimaryKeys:function(e,t){var i=this;if(!e.___cachedMultiplierPrimaryKeys||t||2===this._multiplierMode){var a=this.___getRelatedActivitiesByResourceViaAllocations(e,t);let n=this.model(),o=[];a?.size&&a.forEach((function(e){let t=n.getChildByPrimaryKey(C,e);t&&(2!==i._multiplierMode||2===i._multiplierMode&&0===t.AllocationRowsCollapseState)&&o.push(e)})),e.___cachedMultiplierPrimaryKeys=o}return e.___cachedMultiplierPrimaryKeys},___getCurrentMultiplierPrimaryKeysForAllocation:function(e,t){var i=this.model().getRelatedWrapperByRelationshipInfo(e,D[R][0]);return i?this.___getCurrentMultiplierPrimaryKeys(i,t):[]},addActivity:function(e){var t=this.addChild(e);if(t)return this.getAPIOption("linksVisibleInActivitiesView")&&this._invalidateLinkItemsRelatedToActivity(e),this._expandOrCollapseRowByCollapseStateForRowItem(t),this._expandOrCollapseCurvesInRowByCollapseStateForRowItem(t),this.hasMultipliedObjects()&&!0===this.__dataReady&&this.addMultipliedObjectsForActivity(e,!0),t},updateActivity:function(e){this.__relationshipChanged=0,this._updateRowObject(e),this.__relationshipChanged>0&&this.getHierarchySupplementaryDefinitionID()&&this._removeUnnecessaryPseudoGroups(C,"removeActivities",this._viewType),this._expandOrCollapseRowByCollapseState(e),this._expandOrCollapseCurvesInRowByCollapseState(e),this.getAPIOption("allocationRowsVisibleInActivitiesView")&&!this.getAPIOption("decouplingOfAllocationPropertiesFromActivities")&&this._invalidateAllocationsRelatedToActivity(e),this._checkDescendantObjectsForClassification(e),delete this.__relationshipChanged},removeActivity:function(e,t){if(this.hasMultipliedObjects()&&!0===this.__dataReady&&this.removeMultipliedObjectsForActivity(e),t){var i=this.activityItem(e);i&&(delete i.childRowItems,delete i.detailingRowItems)}this.getAPIOption("linksVisibleInActivitiesView")&&this._invalidateLinkItemsRelatedToActivity(e),this.removeChild(e),t||this._checkChildItemsArraysInAncestors(),delete this._temporaryAncestorItemsByRowID},addResource:function(e){!0===this.__dataReady&&this.getAPIOption("resourcesVisibleInActivitiesView")&&this._addMultipliedResourcesByActivity(e)},updateResource:function(e,t){!0===this.__dataReady&&this.getAPIOption("resourcesVisibleInActivitiesView")&&this._updateMultipliedResourcesByActivity(e,t)},removeResource:function(e,t){!0===this.__dataReady&&this.getAPIOption("resourcesVisibleInActivitiesView")&&this._removeMultipliedResourcesByActivity(e,t)},addAllocation:function(e){if(this.getAPIOption("allocationRowsVisibleInActivitiesView")){if(!this.getAPIOption("resourcesVisibleInActivitiesView"))return this.__addAllocation(e);!0===this.__dataReady&&this._addMultipliedAllocationsByActivity(e)}},updateAllocation:function(e,t){if(this.getAPIOption("allocationRowsVisibleInActivitiesView")){if(!this.getAPIOption("resourcesVisibleInActivitiesView"))return this.__updateAllocation(e,t);!0===this.__dataReady&&this._updateMultipliedAllocationsByActivity(e,t)}},removeAllocation:function(e,t,i){(i||this.getAPIOption("allocationRowsVisibleInActivitiesView"))&&(this.getAPIOption("resourcesVisibleInActivitiesView")?!0===this.__dataReady&&this._removeMultipliedAllocationsByActivity(e,t):this.__removeAllocation(e,t))},getHierarchySupplementaryDefinitionID:function(){return this.getAPIOption("activityHierarchySupplementaryDefinitionID")},updateHierarchyByHierarchySupplementaryDefinition:function(e){this._dataDescriptors&&e&&e.ID&&e.ID===this.getHierarchySupplementaryDefinitionID()&&this._updateGrouping(C,"removeActivities")},_initTableDefinition:function(){var e,t=this;t._super();var i=t.getAPIOption("symbolColumnTitleSymbolIDs");let a=t.getAPIOption("symbolColumnTitleVisible");a&&(e=t.ganttView()._getImageURLsForGanttWidget(i)),t._tableDefinition={titleText:t.getAPIOption("titleText"),baseLevel:{className:"",contentsFunc:function(){return t._tableRowFillFunc.apply(t,arguments)},cellDefinitions:[{className:"",width:t.getAPIOption("tableWidth"),contentsFunc:function(){return t._tableCellFillFunc.apply(t,arguments)},titleText:null,horizontalTextAlignment:h.Left}]},symbolColumnTitleImageURLs:e,symbolColumnTitleVisible:a,symbolColumnTitleBackgroundColor:a?t.getAPIOption("symbolColumnTitleBackgroundColor")||t.getAPIOption("symbolColumnBackgroundColor")||"white":t.getAPIOption("tableTitleBackgroundColor")||"#646464"},t._tableDefinition.rowDefinitionIDWithColumnTitles=t.getAPIOption("tableRowDefinitionIDForTitleInActivitiesView"),t._tableDefinition.rowSortMode=t.getAPIOption("activityRowSortMode"),t._tableDefinition.rowSortPropertyName=t.getAPIOption("activityRowSortCodePropertyName"),t._addOrRemoveCurveCollapsingColumnInTableDefinition(t._tableDefinition,t.getAPIOption("curvePanesVisibleInActivitiesView")),t._addOrRemoveSymbolColumnInTableDefinition(t._tableDefinition,t.getAPIOption("symbolColumnVisible"),t.getAPIOption("symbolColumnWidth")),t.updateTableRowDefinitions(t.app().tableRowDefinitionsMap(),!1)},setTableDefinitionIntoWidget:function(e){this._super.apply(this,arguments),this._setDefaultTableRowDefinitionIDForItemType(m.ActivityRow,this.getAPIOption("defaultActivityTableRowDefinitionID")),this._setDefaultTableRowDefinitionIDForItemType(m.Resource,this.getAPIOption("defaultResourceTableRowDefinitionIDInActivitiesView")??this.getAPIOption("defaultResourceTableRowDefinitionID")),this._setDefaultTableRowDefinitionIDForItemType(m.AllocationRow,this.getAPIOption("defaultAllocationTableRowDefinitionID")),e.option("defaultExternalType",m.ActivityRow)},_initializeAllCompareObjects:function(){this._initializeCompareObjects(C),this._initializeCompareObjects(P),this._initializeCompareObjects(O)},determineVisibilityOfAllRowObjects:function(e,t,i,a){(e!==R||this.getAPIOption("allocationRowsVisibleInActivitiesView"))&&this._super(e,t,i,a)},getAPIOptionName:function(e){switch(e){case"allocationRowsVisible":return"allocationRowsVisibleInActivitiesView";case"definedAllocationLinksVisible":return"definedAllocationLinksVisibleInActivitiesView";case"entitiesTableVisible":return"entitiesTableVisibleInActivitiesView";case"linksVisible":return"linksVisibleInActivitiesView";case"mainViewAreaVisible":return"mainViewAreaVisibleInActivitiesView";case"tableRowDefinitionIDForTitle":return"tableRowDefinitionIDForTitleInActivitiesView";case"tableViewWidth":return"tableViewWidthInActivitiesView";case"topViewAreaVisible":return"topViewAreaVisibleInActivitiesView";case"allocationBarDesignOfOther":return"allocationBarDesignOfOtherActivity"}return this._super(e)},_getAllocationRowsCollapseStateForRowItem:function(e){return e.rab_itemType===m.Resource?e.data().AllocationRowsCollapseStateInActivitiesView:this._super(e)},getItemInfoForItemType:function(e,t){var i,a,n,o;if(this._rowItemsRoot){switch(e){case m.Resource:var r=s.getRelationshipInfoTo(D[R],R,C);if(Array.isArray(r)&&(r=r[0]),a=this.getPrimaryKeyByObjectDataOrID(t,I),"string"!=typeof t&&(o=s.getPrimaryKeyByRelationshipInfo(t,r)),!o){var d=this.model().getRelatedObjects(R,I,"*",a);if(d&&d.length>0&&(o=s.getPrimaryKeyByRelationshipInfo(d[0],r)),!o)return}n=`${o}${l}${a}`,i=this.model().getChildByPrimaryKey(P,n);break;case m.Allocation:if(a=this.getPrimaryKeyByObjectDataOrID(t,R),this.getAPIOption("allocationRowsVisibleInActivitiesView"))if(this.getAPIOption("resourcesVisibleInActivitiesView")){r=s.getRelationshipInfoTo(D[R],R,C);if(Array.isArray(r)&&(r=r[0]),!(o=s.getPrimaryKeyByRelationshipInfo(t,r))){var c=this.model().getChildByPrimaryKey(R,a);if(!c)return;if(!(o=s.getPrimaryKeyByRelationshipInfo(c,r)))return}n=`${o}${l}${a}`,i=this.model().getChildByPrimaryKey(O,n)}else i=this.model().getChildByPrimaryKey(R,a);break;case m.Activity:a=this.getPrimaryKeyByObjectDataOrID(t,C),i=this.model().getChildByPrimaryKey(C,a)}return this.buildItemInfo(a,i)}},_invalidateAllocationsRelatedToActivity:function(e){if(this._rowItemsRoot){let t=this._item(e);t?.detailingRowItems?.forEach((function(e){e.updateFromReference({updateChildTimeItems:!0})}))}},hasMultipliedObjects:function(){return this.getAPIOption("allocationRowsVisibleInActivitiesView")&&this.getAPIOption("resourcesVisibleInActivitiesView")},wrappersByPrimaryKeyParts:function(e,t,i,a){if(this.hasMultipliedObjects())switch(e){case m.Allocation:case m.AllocationRow:return this.__multipliedWrappersByPrimaryKey(O,R,a,`${i??""}${l}${t}`);case m.Resource:return this.__multipliedWrappersByPrimaryKey(P,I,a,`${i??""}${l}${t}`)}return this._super(e,t,i,a)},getSelectableItemTypeByObjectType:function(e,t){switch(e){case f.Resource:if(this.hasMultipliedObjects())return e;break;case f.Allocation:if(this.getAPIOption("allocationRowsVisibleInActivitiesView"))return t===y.Row?m.AllocationRow:e;break;case f.Activity:return t===y.Row?m.ActivityRow:e;case f.Entity:case f.Link:return e}},getMultiplierPrimaryKey:function(e,t){switch(e){case m.Allocation:case m.AllocationRow:case m.Resource:if(this.hasMultipliedObjects())return t.ActivityID?`${t.ActivityRole??""}${l}${t.ActivityID}`:void 0}}};e.exports=o.extendClass("rabActivitiesViewModel",a,k)},1222:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(5674).BarInteractions,o=i(476).TextWrapMode,r=i(5977),l=r._BarDragModes_AllSupportedFlags,s=r._activityBarShapesMap,d=r._convertToUnifiedBarDesign,c=r.RAB_ACTIVITY_ENTRIES_PROP_NAME,u=i(8882),p={construct:function(e,t,i,a){this._super(e,t,i,a),void 0===this.rab_cachedCurveCollapseState&&(this.rab_cachedCurveCollapseState=1),void 0===this.rab_cachedAllocationRowsCollapseState&&(this.rab_cachedAllocationRowsCollapseState=1)},store:function(e){if(this._super(e),e){var t=e.CurveCollapseState??e.PM_CurveCollapseState;t>=0&&(this.rab_cachedCurveCollapseState=t),(t=e.AllocationRowsCollapseState??e.PM_AllocationRowsCollapseState)>=0&&(this.rab_cachedAllocationRowsCollapseState=t)}},_modificationClassificationByProperty:{AllocationRowsCollapseState:function(e){var t=e.AllocationRowsCollapseState??e.PM_AllocationRowsCollapseState;return this.rab_cachedAllocationRowsCollapseState===t?2:0},BackgroundColor:1,BackgroundNonworkingTimeColor:1,BarPatternColor:1,BarSelectable:2,BarTextColor:1,BarTooltipTemplateID:2,BaselineBorderColor:1,BaselineColor:1,BaselineNonworkingTimeColor:1,BorderColor:1,BorderDashArray:1,BorderWidth:1,CalendarGridColor:0,Color:1,CurveCollapseState:function(e){var t=e.CurveCollapseState??e.PM_CurveCollapseState;return this.rab_cachedCurveCollapseState===t?2:0},DueDateColor:1,DueDateSymbolWidth:1,EarliestDragStart:2,Editable:2,Entries:-1,LatestDragEnd:2,LeftBarSymbolHeight:1,LeftBarSymbolID:1,LeftBarSymbolWidth:1,NonworkingTimeColor:1,PredictedEndColor:1,ProgressBackgroundColor:1,ProgressColor:1,ProgressNonworkingTimeColor:1,ReleaseDateColor:1,ReleaseDateSymbolWidth:1,RightBarSymbolHeight:1,SnapTargetsForEnd:2,SnapTargetsForStart:2,Status1Color:1,Status1Visible:1,Status2Color:1,Status2Visible:1,Status3Color:1,Status3Visible:1,Status4Color:1,Status4Visible:1,TopLeftBarSymblID:1,TopRightBarSymblID:1},_getDefaultObjectPropName:function(){return"defaultValuesForActivityProperties"},_getAllocationRowsCollapseState:function(){var e=this.rab_cachedAllocationRowsCollapseState;return e>=0?e:this._getPropertyAsNumber(this._data.AllocationRowsCollapseState??this._data.PM_AllocationRowsCollapseState)},_getCurveCollapseState:function(){var e=this.rab_cachedCurveCollapseState;return e>=0?e:this._getPropertyAsNumber(this._data.CurveCollapseState??this._data.PM_CurveCollapseState)}},h=a.extendClass("rabActivity",u,p),g=h.prototype;g.defineProperty("AllocationRowsCollapseState",{get:function(){return this._getAllocationRowsCollapseState()}},void 0,-1),g.defineProperty("AllocationRowsCollapsible",{get:function(){var e=this._data.AllocationRowsCollapsible??this._data.PM_AllocationRowsCollapsible;return null==e?void 0:!!e}}),g.defineProperty("AllowedBarDragModes",{get:function(){var e=this._getPropertyAsNumber(this._data.AllowedBarDragModes??this._data.PM_AllowedBarDragModes);return e?e&l:e}}),g.defineProperty("BackgroundColor",{get:function(){return this._getPropertyAsColorString(this._data.BackgroundColor??this._data.PM_BackgroundColor)}}),g.defineProperty("BackgroundNonworkingTimeColor",{get:function(){return this._getPropertyAsColorString(this._data.BackgroundNonworkingTimeColor??this._data.PM_BackgroundNonworkingTimeColor)}}),g.defineProperty("_UnifiedBarDesign",{get:function(){var e=this._data.BarDesign;return 0!==e&&(e=+e||null),null==e?null:d(e)}},void 0,null),g.defineProperty("BarHeight",{get:function(){return this._getPropertyAsNumber(this._data.BarHeight??this._data.PM_BarHeight)}}),g.defineProperty("BarOpacity",{get:function(){return this._getPropertyAsNumber(this._data.BarOpacity??this._data.PM_BarOpacity,(e=>Math.max(0,e)))}}),g.defineProperty("BarPatternColor",{get:function(){return this._getPropertyAsColorString(this._data.BarPatternColor??this._data.PM_BarPatternColor)}}),g.defineProperty("BarPatternType",{get:function(){return this._getPropertyAsNumber(this._data.BarPatternType??this._data.PM_BarPatternType,(e=>-1===e?void 0:e))}}),g.defineProperty("BarSelectable",{get:function(){var e=this._data.BarSelectable??this._data.PM_BarSelectable;return null==e?void 0:!!e}}),g.defineProperty("BarShape",{get:function(){var e=this._getPropertyAsNumber(this._data.BarShape??this._data.PM_BarShape);return null==e?void 0:s[e]}}),g.defineProperty("BarShapeSymbolID",{get:function(){return this._data.BarShapeSymbolID??this._data.PM_BarShapeSymbolID}}),g.defineProperty("BarShapeSymbolWidth",{get:function(){return this._getPropertyAsFiniteNumber(this._data.BarShapeSymbolWidth??this._data.PM_BarShapeSymbolWidth)}}),g.defineProperty("BarText",{get:function(){return(this._data.BarText??this._data.Name)?.toString()}}),g.defineProperty("BarTextColor",{get:function(){return this._getPropertyAsColorString(this._data.BarTextColor??this._data.TextColor??this._data.PM_TextColor)}}),g.defineProperty("BarTextFormat",{get:function(){return this._data.BarTextFormat?.toString()}}),g.defineProperty("BarTextPrefixSymbolHeight",{get:function(){return this._getPropertyAsFiniteNumber(this._data.BarTextPrefixSymbolHeight??this._data.PM_BarTextPrefixSymbolHeight)}}),g.defineProperty("BarTextPrefixSymbolID",{get:function(){return this._data.BarTextPrefixSymbolID??this._data.PM_BarTextPrefixSymbolID}}),g.defineProperty("BarTextPrefixSymbolWidth",{get:function(){return this._getPropertyAsFiniteNumber(this._data.BarTextPrefixSymbolWidth??this._data.PM_BarTextPrefixSymbolWidth)}}),g.defineProperty("BarTextWrapMode",{get:function(){return this._getPropertyAsNumber(this._data.BarTextWrapMode??this._data.PM_BarTextWrapMode)}},void 0,o.None),g.defineProperty("BarTooltipTemplateID",{get:function(){return this._data.BarTooltipTemplateID??this._data.PM_BarTooltipTemplateID}}),g.defineProperty("BarTopOffset",{get:function(){return this._getPropertyAsNumber(this._data.BarTopOffset??this._data.PM_BarTopOffset)}}),g.defineProperty("BaselineEnd",{get:function(){return this._data.BaselineEnd}}),g.defineProperty("BaselineBorderColor",{get:function(){return this._getPropertyAsColorString(this._data.BaselineBorderColor??this._data.PM_BaselineBorderColor)}}),g.defineProperty("BaselineColor",{get:function(){return this._getPropertyAsColorString(this._data.BaselineColor??this._data.PM_BaselineColor)}}),g.defineProperty("BaselineNonworkingTimeColor",{get:function(){return this._getPropertyAsColorString(this._data.BaselineNonworkingTimeColor??this._data.PM_BaselineNonworkingTimeColor)}}),g.defineProperty("BaselineStart",{get:function(){return this._data.BaselineStart}}),g.defineProperty("BorderColor",{get:function(){return this._getPropertyAsColorString(this._data.BorderColor??this._data.PM_BorderColor)}}),g.defineProperty("BorderDashArray",{get:function(){return(this._data.BorderDashArray??this._data.PM_BorderDashArray)?.toString()??void 0}}),g.defineProperty("BorderWidth",{get:function(){return this._getPropertyAsNumber(this._data.BorderWidth??this._data.PM_BorderWidth)}},void 0,null),g.defineProperty("CalendarGridColor",{get:function(){return this._getPropertyAsColorString(this._data.CalendarGridColor??this._data.PM_CalendarGridColor)}}),g.defineProperty("CollapsedRowDesign",{get:function(){return this._getPropertyAsNumber(this._data.CollapsedRowDesign??this._data.PM_CollapsedRowDesign)}}),g.defineProperty("Color",{get:function(){return this._getPropertyAsColorString(this._data.Color??this._data.PM_Color)}}),g.defineProperty("CurveCollapseState",{get:function(){return this._getCurveCollapseState()}},void 0,-1),g.defineProperty("DueDate",{get:function(){return this._data.DueDate}}),g.defineProperty("DueDateAllowedDragModes",{get:function(){var e=this._getPropertyAsNumber(this._data.DueDateAllowedDragModes??this._data.PM_DueDateAllowedDragModes);return e&&e&n.DragHor}}),g.defineProperty("DueDateColor",{get:function(){return this._getPropertyAsColorString(this._data.DueDateColor??this._data.PM_DueDateColor)}}),g.defineProperty("DueDateSymbolHeight",{get:function(){return this._getPropertyAsFiniteNumber(this._data.DueDateSymbolHeight??this._data.PM_DueDateSymbolHeight)}}),g.defineProperty("DueDateSymbolID",{get:function(){return this._data.DueDateSymbolID??this._data.PM_DueDateSymbolID}}),g.defineProperty("DueDateSymbolWidth",{get:function(){return this._getPropertyAsFiniteNumber(this._data.DueDateSymbolWidth??this._data.PM_DueDateSymbolWidth)}}),g.defineProperty("EarliestDragStart",{get:function(){return this._data.EarliestDragStart??this._data.PM_EarliestDragStart}}),g.defineProperty("EarliestEnd",{get:function(){return this._data.EarliestEnd}}),g.defineProperty("EarliestEndColor",{get:function(){return this._getPropertyAsColorString(this._data.EarliestEndColor??this._data.PM_EarliestEndColor)}}),g.defineProperty("EarliestStart",{get:function(){return this._data.EarliestStart??this._data.StartNotEarlierThan}}),g.defineProperty("EarliestStartColor",{get:function(){return this._getPropertyAsColorString(this._data.EarliestStartColor??this._data.PM_EarliestStartColor)}}),g.defineProperty("Editable",{get:function(){var e=this._data.Editable;return"boolean"==typeof e?e:void 0}},void 0,!0),g.defineProperty("End",{get:function(){return this._data.End}}),g.defineProperty("EndNotLaterThan",{get:function(){return this._data.EndNotLaterThan}}),g.defineProperty("Entries",{get:function(){return this.getChildrenArray(c)}},void 0,[]),h.prototype.areEntriesExistent=function(){return Array.isArray(this._data.Entries)&&this._data.Entries.length},g.defineProperty("ExpandedRowDesign",{get:function(){return this._getPropertyAsNumber(this._data.ExpandedRowDesign??this._data.PM_ExpandedRowDesign)}}),g.defineProperty("HasAllocationRows",{get:function(){var e=this._data.HasAllocationRows??this._data.PM_HasAllocationRows;return"boolean"==typeof e?e:void 0}}),g.defineProperty("LatestDragEnd",{get:function(){return this._data.LatestDragEnd??this._data.PM_LatestDragEnd}}),g.defineProperty("LatestEnd",{get:function(){return this._data.LatestEnd}}),g.defineProperty("LatestEndColor",{get:function(){return this._getPropertyAsColorString(this._data.LatestEndColor??this._data.PM_LatestEndColor)}}),g.defineProperty("LatestStart",{get:function(){return this._data.LatestStart}}),g.defineProperty("LatestStartColor",{get:function(){return this._getPropertyAsColorString(this._data.LatestStartColor??this._data.PM_LatestStartColor)}}),g.defineProperty("LeftBarSymbolHeight",{get:function(){return this._getPropertyAsFiniteNumber(this._data.LeftBarSymbolHeight??this._data.PM_LeftBarSymbolHeight)}}),g.defineProperty("LeftBarSymbolID",{get:function(){return this._data.LeftBarSymbolID??this._data.PM_LeftBarSymbolID}}),g.defineProperty("LeftBarSymbolWidth",{get:function(){return this._getPropertyAsFiniteNumber(this._data.LeftBarSymbolWidth??this._data.PM_LeftBarSymbolWidth)}}),g.defineProperty("LinkSourceDate",{get:function(){return this._data.LinkSourceDate}}),g.defineProperty("LinkTargetDate",{get:function(){return this._data.LinkTargetDate}}),g.defineProperty("MaximumRowHeight",{get:function(){var e=this._data.MaximumRowHeight??this._data.PM_MaximumRowHeight;return e>0?e:void 0}}),g.defineProperty("MaximumSubRowHeightInTimeArea",{get:function(){var e=this._data.MaximumSubRowHeightInTimeArea??this._data.PM_MaximumSubRowHeightInTimeArea;return e>0?e:void 0}}),g.defineProperty("MustEndOn",{get:function(){return this._data.MustEndOn}}),g.defineProperty("MustEndOnColor",{get:function(){return this._getPropertyAsColorString(this._data.MustEndOnColor??this._data.PM_MustEndOnColor)}}),g.defineProperty("MustStartOn",{get:function(){return this._data.MustStartOn}}),g.defineProperty("MustStartOnColor",{get:function(){return this._getPropertyAsColorString(this._data.MustStartOnColor??this._data.PM_MustStartOnColor)}}),g.defineProperty("NonworkingTimeColor",{get:function(){return this._getPropertyAsColorString(this._data.NonworkingTimeColor??this._data.PM_NonworkingTimeColor)}}),g.defineProperty("PeriodHighlighterID",{get:function(){var e=(this._data.PeriodHighlighterID??this._data.PM_PeriodHighlighterID)?.toString();return e||(e=(this._data.CalendarGridID??this._data.PM_CalendarGridID)?.toString()),e}}),g.defineProperty("PredictedEnd",{get:function(){return this._data.PredictedEnd}}),g.defineProperty("PredictedEndColor",{get:function(){return this._getPropertyAsColorString(this._data.PredictedEndColor??this._data.PM_PredictedEndColor)}}),g.defineProperty("Progress",{get:function(){var e=this._data.Progress;return"number"==typeof e?e:void 0}},void 0,0),g.defineProperty("ProgressBackgroundColor",{get:function(){return this._getPropertyAsColorString(this._data.ProgressBackgroundColor??this._data.PM_ProgressBackgroundColor)}}),g.defineProperty("ProgressColor",{get:function(){return this._getPropertyAsColorString(this._data.ProgressColor??this._data.PM_ProgressColor)}}),g.defineProperty("ProgressNonworkingTimeColor",{get:function(){return this._getPropertyAsColorString(this._data.ProgressNonworkingTimeColor??this._data.PM_ProgressNonworkingTimeColor)}}),g.defineProperty("ReleaseDateAllowedDragModes",{get:function(){var e=this._getPropertyAsNumber(this._data.ReleaseDateAllowedDragModes??this._data.PM_ReleaseDateAllowedDragModes);return e&&e&n.DragHor}}),g.defineProperty("ReleaseDate",{get:function(){return this._data.ReleaseDate}}),g.defineProperty("ReleaseDateColor",{get:function(){return this._getPropertyAsColorString(this._data.ReleaseDateColor??this._data.PM_ReleaseDateColor)}}),g.defineProperty("ReleaseDateSymbolHeight",{get:function(){return this._getPropertyAsFiniteNumber(this._data.ReleaseDateSymbolHeight??this._data.PM_ReleaseDateSymbolHeight)}}),g.defineProperty("ReleaseDateSymbolID",{get:function(){return this._data.ReleaseDateSymbolID??this._data.PM_ReleaseDateSymbolID}}),g.defineProperty("ReleaseDateSymbolWidth",{get:function(){return this._getPropertyAsFiniteNumber(this._data.ReleaseDateSymbolWidth??this._data.PM_ReleaseDateSymbolWidth)}}),g.defineProperty("RightBarSymbolHeight",{get:function(){return this._getPropertyAsFiniteNumber(this._data.RightBarSymbolHeight??this._data.PM_RightBarSymbolHeight)}}),g.defineProperty("RightBarSymbolID",{get:function(){return this._data.RightBarSymbolID??this._data.PM_RightBarSymbolID}}),g.defineProperty("RightBarSymbolWidth",{get:function(){return this._getPropertyAsFiniteNumber(this._data.RightBarSymbolWidth??this._data.PM_RightBarSymbolWidth)}}),g.defineProperty("SnapTargetsForEnd",{get:function(){return this._getPropertyAsNumber(this._data.SnapTargetsForEnd??this._data.PM_SnapTargetsForEnd)}}),g.defineProperty("SnapTargetsForStart",{get:function(){return this._getPropertyAsNumber(this._data.SnapTargetsForStart??this._data.PM_SnapTargetsForStart)}}),g.defineProperty("Start",{get:function(){return this._data.Start}}),g.defineProperty("Status1Color",{get:function(){return this._getPropertyAsColorString(this._data.Status1Color??this._data.PM_Status1Color)}}),g.defineProperty("Status1Visible",{get:function(){var e=this._data.Status1Visible??this._data.PM_Status1Visible;return null==e?void 0:!!e}}),g.defineProperty("Status2Color",{get:function(){return this._getPropertyAsColorString(this._data.Status2Color??this._data.PM_Status2Color)}}),g.defineProperty("Status2Visible",{get:function(){var e=this._data.Status2Visible??this._data.PM_Status2Visible;return null==e?void 0:!!e}}),g.defineProperty("Status3Color",{get:function(){return this._getPropertyAsColorString(this._data.Status3Color??this._data.PM_Status3Color)}}),g.defineProperty("Status3Visible",{get:function(){var e=this._data.Status3Visible??this._data.PM_Status3Visible;return null==e?void 0:!!e}}),g.defineProperty("Status4Color",{get:function(){return this._getPropertyAsColorString(this._data.Status4Color??this._data.PM_Status4Color)}}),g.defineProperty("Status4Visible",{get:function(){var e=this._data.Status4Visible??this._data.PM_Status4Visible;return null==e?void 0:!!e}}),g.defineProperty("StatusFrameColor",{get:function(){return this._getPropertyAsColorString(this._data.StatusFrameColor??this._data.PM_StatusFrameColor)}}),g.defineProperty("StatusFrameVisible",{get:function(){var e=this._data.StatusFrameVisible??this._data.PM_StatusFrameVisible;return null==e?void 0:!!e}},void 0,!1),g.defineProperty("TopLeftBarSymbolID",{get:function(){return this._data.TopLeftBarSymbolID??this._data.PM_TopLeftBarSymbolID}}),g.defineProperty("TopRightBarSymbolID",{get:function(){return this._data.TopRightBarSymbolID??this._data.PM_TopRightBarSymbolID}}),g.defineProperty("ViewArea",{get:function(){return this._getPropertyAsNumber(this._data.ViewArea??this._data.PM_ViewArea)}}),e.exports=h},2659:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(8590);e.exports=a.extendClass("rabActivityEntry",n,{_getDefaultObjectPropName:function(){return"defaultValuesForActivityEntryProperties"}})},1386:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(476).ItemType,o=i(1632),r=(i(2659),{construct:function(e,t,i,a){this._super(n.ActivityEntry,e,t,i,a),this.markable=!1}});e.exports=a.extendClass("rabActivityEntryTimeItem",o,r)},3688:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(5674).BarInteractions,o=i(476).ItemType,r=i(5977)._UnifiedBarDesigns,l=i(3786),s=(i(1222),{construct:function(e,t,i,a){this.__ignoreUpdateFromReference=!0,this._cachedTimeItem?(this._cachedTimeItem.construct(o.Activity,e,t,this,null),delete this._cachedTimeItem._dbgIsDisposed,delete this._cachedTimeItem):e._createItem(o.Activity,this,t),this._super(o.ActivityFrame,e,t,i,void 0,a),delete this.__ignoreUpdateFromReference},dispose:function(e){this._cachedTimeItem=this.childTimeItems?.[0],this._cachedTimeItem?.dispose(e),this._super(e),delete this.childTimeItems},postUpdateSelf:function(){if(this.getAPIOption("updateOptimizationEnabled")){var e=this.data();e&&!e.rab_modificationClassification&&this._super()}else this._super()},updateFromReference:function(e){var t=this._super(e);void 0===this.__ignoreUpdateFromReference&&this.childTimeItems&&this.childTimeItems[0]&&this.childTimeItems[0].updateFromReference(e);var i=this.data(),a=i.model();let l=i._UnifiedBarDesign??this.getAPIOption("defaultActivityBarDesign");var s=l&r.Baseline&&this.getAPIOption("activityBaselineBarsVisible"),d=l&r.ReleaseAndDueDate;return this._updateTimeItem(this,o.ActivityBaseline,s&&a.dateTimeValueToDate(i.BaselineStart)&&a.dateTimeValueToDate(i.BaselineEnd),(function(e){e.updateFromReference()})),this._updateTimeItem(this,o.ActivityReleaseDate,d&&a.dateTimeValueToDate(i.ReleaseDate),(function(e){e.updateFromReference()})),this._updateTimeItem(this,o.ActivityDueDate,d&&a.dateTimeValueToDate(i.DueDate),(function(e){e.updateFromReference()})),this.barInteractions=n.None,this.selectable=i.BarSelectable,this.markable=!1,t},_updateTimeItem:function(e,t,i,a){var n=e.rab_itemType===o.ActivityFrame?e.childTimeItems:e.timeItems,r=this._viewModel._findItemOfTypeInArray(n,t);r&&!i?n.splice(n.indexOf(r),1):i&&(r||(r=this._viewModel._createItem(t,e,e.data())),a.call(this._viewModel,r))}});e.exports=a.extendClass("rabActivityFrameTimeItem",l,s)},6616:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(9280).RowInteractions,o=i(476).ItemType,r=i(8037),l=(i(1222),{construct:function(e,t,i,a){this.__ignoreUpdateFromReference=!0,this._cachedTimeItem?(this._cachedTimeItem.construct(e,t,this,null),delete this._cachedTimeItem._dbgIsDisposed,delete this._cachedTimeItem):e._createItem(o.ActivityFrame,this,t),this._super(o.ActivityRow,e,t,i,void 0,a),delete this.__ignoreUpdateFromReference,this.rab_curvePanesVisible=!t.CurveCollapseState},isResourceRelevant:function(){return!0},dispose:function(e){this._cachedTimeItem=this.timeItems&&this.timeItems[0]?this.timeItems[0]:void 0,this._cachedTimeItem&&this._cachedTimeItem.dispose(e),this._super(e)},postUpdateSelf:function(){var e=!0;if(this.getAPIOption("updateOptimizationEnabled")){var t=this.data();t&&!t.rab_modificationClassification||(e=!1)}e&&(this._viewModel.registerRowItem(this,!0,!1),this._super())},getWrapperHasChildrenPropName:function(e){return"detailingRowItems"===e?"HasAllocationRows":this._super(e)},_hasSubRows:function(e,t){var i=this._super(e,t);return i||"detailingRowItems"===t&&this._viewModel.hasMultipliedObjects()&&(i=this._viewModel.areMultipliedObjectsForActivityExistent(e)),i},updateFromReference:function(e){var t=this._super(e);void 0===this.__ignoreUpdateFromReference&&this.timeItems?.[0]?.updateFromReference(e);var i=this.data(),a=i.model();if(this.detailingRowsCollapsible=i.AllocationRowsCollapsible,this.rowInteractions=n.None,i.isPseudo()||(this.rowInteractions=i.AllowedRowDragModes),this.collapsedDisplayedElements=this._viewModel.modifyDisplayedElementsForRowItemType(o.ActivityRow,i.CollapsedRowDesign),this.expandedDisplayedElements=this._viewModel.modifyDisplayedElementsForRowItemType(o.ActivityRow,i.ExpandedRowDesign),this.leavesInitiallyCollapsed=!!i.AllocationRowsCollapseState,this.minimumHeight=i.MinimumRowHeight,this.maximumHeight=i.MaximumRowHeight,this.maximumSubRowHeight=i.MaximumSubRowHeightInTimeArea,!i.isPseudo())if(this.getAPIOption("activityCalendarsEnabled")){var r;r=e&&e.ignoreCalendar?a._defaultNonWorkingTimeCalendar:a.calendarByID(i.CalendarID),this.calendar=r?.nCalendar}else this.calendar=null;for(var l=this;null==l.data()?.PeriodHighlighterID&&(l=l.getHierarchyParent()););var s=l&&a.periodHighlighterByID(l.data().PeriodHighlighterID);return this.dateAreas=s&&s.dateAreaDefinitions,t},getSelectableItem:function(e){if(e===this.rab_itemType)return this._super(e);if(Array.isArray(this.timeItems)&&this.timeItems.length>0){var t=this._viewModel._findItemOfTypeInArray(this.timeItems,o.Activity);return t||(t=this.timeItems[0]),t}},handleRowExpandedOrCollapsed:function(e,t){2===this._viewModel._multiplierMode&&this._viewModel.hasMultipliedObjects()&&(t?this._viewModel.removeMultipliedObjectsForActivity(this.data()):this._viewModel.addMultipliedObjectsForActivity(this.data())),this.data().rab_cachedAllocationRowsCollapseState=t?1:0,this._super(e,t)}});e.exports=a.extendClass("rabActivityRowItem",r,l)},4781:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(5674),o=n.BarInteractions,r=n.BarShape,l=n.BarType,s=i(476).ItemType,d=i(5977),c=d._constraintMappings,u=d._UnifiedBarDesigns,p=d._UnifiedBarDesignEntriesMask,h=(i(1222),i(4100)),g=i(9199),m=i(3786),_={construct:function(e,t,i,a,n){switch(this.rab_propNames={},e){case s.Activity:this.rab_propNames.Start="Start",this.rab_propNames.End="End",this.rab_propNames.AllowedDragModes="AllowedBarDragModes",this.rab_propNames.EarliestDragStart="EarliestDragStart",this.rab_propNames.EarliestEndColor="EarliestEndColor",this.rab_propNames.EarliestStartColor="EarliestStartColor",this.rab_propNames.LatestDragEnd="LatestDragEnd",this.rab_propNames.LatestEndColor="LatestEndColor",this.rab_propNames.LatestStartColor="LatestStartColor",this.barType=l.StartEnd,this.respectingCalendar=!0,this.constraints=[];break;case s.ActivityBaseline:this.rab_propNames.Start="BaselineStart",this.rab_propNames.End="BaselineEnd",this.barType=l.StartEnd,this.barShape=r.Rectangle,this.respectingCalendar=!0,this.markable=!1,this.selectable=!1;break;case s.ActivityDueDate:this.rab_propNames.Start="DueDate",this.rab_propNames.AllowedDragModes="DueDateAllowedDragModes",this.rab_propNames.SymbolID="DueDateSymbolID",this.rab_propNames.SymbolHeight="DueDateSymbolHeight",this.barType=l.SingleRespectedByOptimization,this.zOrder=1,this.selectable=!1;break;case s.ActivityReleaseDate:this.rab_propNames.Start="ReleaseDate",this.rab_propNames.AllowedDragModes="ReleaseDateAllowedDragModes",this.rab_propNames.SymbolID="ReleaseDateSymbolID",this.rab_propNames.SymbolHeight="ReleaseDateSymbolHeight",this.barType=l.SingleRespectedByOptimization,this.zOrder=1,this.selectable=!1}this.rab_subItemType=e,this._super(e,t,i,a,void 0,n),e!==s.ActivityDueDate&&e!==s.ActivityReleaseDate||(this.rab_itemType=s.Activity)},postUpdateSelf:function(){if(this.getAPIOption("updateOptimizationEnabled")){var e=this.data();e&&!e.rab_modificationClassification&&this._super()}else this._super()},updateFromReference:function(e){var t=this,i=this._super(e),a=this.data(),n=a.model();this.rab_unifiedBarDesign=a._UnifiedBarDesign??this.getAPIOption("defaultActivityBarDesign"),this.barInteractions=o.None,this.opacity=this.rab_unifiedBarDesign&u.TonedDownColoring?-1:a.BarOpacity;let d=this.rab_propNames?.Start;var m,_,f;d&&(this.start=n.dateTimeValueToDate(a[d])),d=this.rab_propNames?.End,d&&(this.end=n.dateTimeValueToDate(a[d]));var y=!1;switch(this.rab_subItemType){case s.Activity:if(this.marked=!!(this.rab_unifiedBarDesign&u.Status)&&a.StatusFrameVisible,this.selectable=a.BarSelectable,n.isActivityEditable(a)&&(this.barInteractions=a.AllowedBarDragModes),delete this.leftCaptionOffset,a.BarTextPrefixSymbolID){var b=a.BarTextPrefixSymbolWidth;0===b||b||(b=g.prototype._barSymbolExtent),b=+b,!isNaN(b)&&isFinite(b)&&b>0&&(this.leftCaptionOffset=b)}this.snapTargetsForStart=a.SnapTargetsForStart,this.snapTargetsForEnd=a.SnapTargetsForEnd,this.rab_unifiedBarDesign&u.ProgressAndPredictedEnd?(this.progress=+a.Progress||0,this.progressBackgroundVisible=!(!a.ProgressBackgroundColor&&!this.getAPIOption("defaultActivityProgressBackgroundColor")),this.predictedEnd=n.dateTimeValueToDate(a.PredictedEnd)):(this.progress=0,this.progressBackgroundVisible=!1,delete this.predictedEnd),this.fillPatternType=a.BarPatternType,this.rab_barShape=a.BarShape??this.getAPIOption("defaultActivityBarShape"),this.barType=this.rab_barShape===r.Diamond||"rabSymbol"===this.rab_barShape?l.Single:l.StartEnd;var A=this.barShape;this.barShape="rabSymbol"===this.rab_barShape?r.Diamond:this.rab_barShape,this.barType!==l.Single&&this.rab_barShape!==r.Summary||(this.rab_unifiedBarDesign=this.rab_unifiedBarDesign&~p|u.StartEnd),this.barShape!==r.RectangleWithLeftTopBevel||this.rab_unifiedBarDesign&u.ComplexShape||(this.barShape=this.rab_barShape=r.Rectangle),m=this.barHeight,this.barHeight=this.barShape===r.Summary?16:a.BarHeight,_=this.barTopOffset,this.barTopOffset=a.BarTopOffset??0,this.linkSourceDate=n.dateTimeValueToDate(a.LinkSourceDate),this.linkTargetDate=n.dateTimeValueToDate(a.LinkTargetDate);var v=a.areEntriesExistent();if(this.rabvm_areChildTimeItemsVisible=this.barType!==l.Single&&v&&this.rab_unifiedBarDesign&u.Entries,this.rabvm_childTimeItems?.length?this.rabvm_childTimeItems.forEach((e=>{if(Object.values(s).includes(e.rab_itemType)){var i=e.start;i&&(!t.start||i<t.start)&&(t.start=new Date(i));var a=e.end;a&&(!t.end||a>t.end)&&(t.end=new Date(a))}})):v&&a.Entries.forEach((e=>{var i=n.dateTimeValueToDate(e.Start);i&&(!t.start||i<t.start)&&(t.start=i);var a=n.dateTimeValueToDate(e.End);a&&(!t.end||a>t.end)&&(t.end=a)})),f=this.zOrder,this.zOrder=this.rabvm_areChildTimeItemsVisible&&[r.Rectangle,r.RectangleWithLeftTopBevel].includes(this.barShape)?"twice":0,this.constraints.length=0,this.rab_unifiedBarDesign&u.Constraints){let e,t;c.forEach((i=>{let o=n.dateTimeValueToDate(a[i[0]]);if(o){void 0===e&&(e=this.getAPIOption("detailedActivityConstraintSymbolsEnabled"),t=this.getAPIOption("defaultActivityConstraintSymbolColor"));let n=a[`${i[0]}Color`]||t;this.rab_unifiedBarDesign&u.TonedDownColoring&&(n=h.calculateMixedColor(n,this.getAPIOption("tonedDownOverlayColor"))),this.constraints.push({type:e?i[1]:void 0,date:o,color:n})}}))}break;case s.ActivityBaseline:this.barTopOffset=a.BarHeight??this.getAPIOption("defaultActivityBarHeight"),this.barHeight=3,y=!0;break;case s.ActivityDueDate:case s.ActivityReleaseDate:t.barInteractions=n.isActivityEditable(a)?a[this.rab_propNames.AllowedDragModes]??o.None:o.None,t.barTopOffset=a.BarTopOffset??0,null!=a[t.rab_propNames.SymbolID]?(t.barShape=r.Custom,t.barHeight=a[this.rab_propNames.SymbolHeight]):(t.barShape=r.Diamond,t.barHeight=a.BarHeight??void 0),t.markable=t.barInteractions!==o.None}if(null==this.barHeight&&(this.barHeight=this.getAPIOption("defaultActivityBarHeight")),this.rab_unifiedBarDesign&u.ReducedHeight){let e=this.getAPIOption("allocationBarTopOffsetAndHeightScaleFactor"),t=this.getAPIOption("reducedBarTopOffsetAndHeightScaleFactor")/e,i=y?a.BarHeight??this.getAPIOption("defaultActivityBarHeight"):this.barHeight,n=i*t;y||(this.barHeight=Math.floor(n)),this.barTopOffset&&(this.barTopOffset=Math.ceil(this.barTopOffset*t)),i!==n&&(this.barTopOffset=(this.barTopOffset??0)+Math.floor((i-n)/2))}if(y&&(this.barTopOffset+=2),this.rab_subItemType===s.Activity&&(this.barShape!==A||this.zOrder!==f||m!==this.barHeight||_!==this.barTopOffset)){let e={triggeredByParent:!0};this.childTimeItems?.forEach((t=>{t.updateFromReference(e)}))}return i},getParentItemPropName:function(){return this||this._super(),"rab_parentItem"},getChildItemsPropNameInParent:function(){return this||this._super(),"childTimeItems"}},f=a.extendClass("rabActivityTimeItem",m,_);Object.defineProperty(f.prototype,"childTimeItems",{get:function(){return this.rabvm_areChildTimeItemsVisible?this.rabvm_childTimeItems:void 0}}),e.exports=f},2205:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(476).TextWrapMode,o=i(5977),r=o.RAB_ALLOCATION_ENTRIES_PROP_NAME,l=o._BarDragModes_AllSupportedFlags,s=o._allocationBarShapesMap,d=o._convertPMToUnifiedBarDesign,c=o._convertToUnifiedBarDesign,u=o._RowDragModes_AllSupportedFlags,p=i(9276),h={store:function(e){this._super(e),e instanceof p||(this._copyOfData=this.getAPIOption("internalObjectCopiesNeeded")&&e?Object.assign({},e):void 0)},_modificationClassificationByProperty:{AllowedRowDragModes:2,AllowedRowDragModesInActivitiesView:2,BackgroundColor:1,BackgroundNonworkingTimeColor:1,BarPatternColor:1,BarSelectable:2,BarTextColor:1,BarTooltipTemplateID:2,BorderColor:1,BorderDashArray:1,BorderWidth:1,Color:1,EarliestDragStart:2,EndIsSnapTarget:2,Entries:-1,LatestDragEnd:2,LeftBarSymbolHeight:1,LeftBarSymbolID:1,LeftBarSymbolWidth:1,NonworkingTimeColor:1,PredictedEndColor:1,ProgressColor:1,ProgressNonworkingTimeColor:1,ProgressBackgroundColor:1,RightBarSymbolHeight:1,RowSelectable:2,RowSymbolIDs:-1,RowTooltipTemplateID:2,SkilledRowTooltipTemplateID:2,SnapTargetsForStart:2,SnapTargetsForEnd:2,StartIsSnapTarget:2,Status1Color:1,Status1Visible:1,Status2Color:1,Status2Visible:1,Status3Color:1,Status3Visible:1,Status4Color:1,Status4Visible:1,TableColor:1,TopLeftBarSymbolID:1,TopRightBarSymbolID:1,SuitableActivityIDs:2,SuitableResourceIDs:2},_getDefaultObjectPropName:function(){return"defaultValuesForAllocationProperties"},isInOtherMultiplierSourceObject:function(){return!1}},g=a.extendClass("rabAllocation",p,h),m=g.prototype;m.defineProperty("AllowedBarDragModes",{get:function(){var e=this._getPropertyAsNumber(this._data.AllowedBarDragModes??this._data.PM_AllowedBarDragModes);return e?e&l:e}}),m.defineProperty("AllowedBarDragModesInActivitiesView",{get:function(){var e=this._getPropertyAsNumber(this._data.AllowedBarDragModesInActivitiesView??this._data.PM_AllowedBarDragModesInActivitiesView);return e?e&l:e}}),m.defineProperty("AllowedRowDragModes",{get:function(){var e=this._getPropertyAsNumber(this._data.AllowedRowDragModes);return e&&(e&=u),e}}),m.defineProperty("AllowedRowDragModesInActivitiesView",{get:function(){var e=this._getPropertyAsNumber(this._data.AllowedRowDragModesInActivitiesView);return e&&(e&=u),e}}),m.defineProperty("BackgroundColor",{get:function(){return this._getPropertyAsColorString(this._data.BackgroundColor??this._data.PM_BackgroundColor)}}),m.defineProperty("BackgroundNonworkingTimeColor",{get:function(){return this._getPropertyAsColorString(this._data.BackgroundNonworkingTimeColor??this._data.PM_BackgroundNonworkingTimeColor)}}),m.defineProperty("_UnifiedBarDesign",{get:function(){var e=this.externalData(),t=e.BarDesign;return null==t?(0!==(t=e.PM_BarDesign)&&(t=+t||null),null==t?null:d(t)):(0!==t&&(t=+t||null),null==t?null:c(t))}},void 0,null),m.defineProperty("BarHeight",{get:function(){return this._getPropertyAsNumber(this._data.BarHeight??this._data.PM_BarHeight)}}),m.defineProperty("BarOpacity",{get:function(){var e=this._data.BarOpacity??this._data.PM_BarOpacity;return"number"==typeof e?e:void 0}}),m.defineProperty("BarPatternColor",{get:function(){return this._getPropertyAsColorString(this._data.BarPatternColor??this._data.PM_BarPatternColor)}}),m.defineProperty("BarPatternType",{get:function(){return this._getPropertyAsNumber(this._data.BarPatternType??this._data.PM_BarPatternType,(e=>-1===e?void 0:e))}}),m.defineProperty("BarSelectable",{get:function(){var e=this._data.BarSelectable??this._data.PM_BarSelectable;return null==e?void 0:!!e}}),m.defineProperty("BarShape",{get:function(){var e=this.externalData(),t=this._getPropertyAsNumber(e.BarShape??e.PM_BarShape);return null==t?void 0:s[t]}}),m.defineProperty("BarShapeSymbolID",{get:function(){return this._data.BarShapeSymbolID??this._data.PM_BarShapeSymbolID}}),m.defineProperty("BarShapeSymbolWidth",{get:function(){return this._getPropertyAsFiniteNumber(this._data.BarShapeSymbolWidth??this._data.PM_BarShapeSymbolWidth)}}),m.defineProperty("BarText",{get:function(){return(this._data.BarText??this._data.Name)?.toString()}}),m.defineProperty("BarTextColor",{get:function(){return this._getPropertyAsColorString(this._data.BarTextColor??this._data.TextColor??this._data.PM_TextColor)}}),m.defineProperty("BarTextFormat",{get:function(){return this._data.BarTextFormat?.toString()||void 0}}),m.defineProperty("BarTextPrefixSymbolHeight",{get:function(){return this._getPropertyAsFiniteNumber(this._data.BarTextPrefixSymbolHeight??this._data.PM_BarTextPrefixSymbolHeight)}}),m.defineProperty("BarTextPrefixSymbolID",{get:function(){return this._data.BarTextPrefixSymbolID??this._data.PM_BarTextPrefixSymbolID}}),m.defineProperty("BarTextPrefixSymbolWidth",{get:function(){return this._getPropertyAsFiniteNumber(this._data.BarTextPrefixSymbolWidth??this._data.PM_BarTextPrefixSymbolWidth)}}),m.defineProperty("BarTextWrapMode",{get:function(){return this._getPropertyAsNumber(this._data.BarTextWrapMode??this._data.PM_BarTextWrapMode)}},void 0,n.None),m.defineProperty("BarTooltipTemplateID",{get:function(){return this._data.BarTooltipTemplateID??this._data.PM_BarTooltipTemplateID}}),m.defineProperty("BarTopOffset",{get:function(){return this._getPropertyAsNumber(this._data.BarTopOffset??this._data.PM_BarTopOffset)}}),m.defineProperty("BorderColor",{get:function(){return this._getPropertyAsColorString(this._data.BorderColor??this._data.PM_BorderColor)}}),m.defineProperty("BorderDashArray",{get:function(){return(this._data.BorderDashArray??this._data.PM_BorderDashArray)?.toString()??void 0}}),m.defineProperty("BorderWidth",{get:function(){return this._getPropertyAsNumber(this._data.BorderWidth??this._data.PM_BorderWidth)}},void 0,null),m.defineProperty("Color",{get:function(){return this._getPropertyAsColorString(this._data.Color??this._data.PM_Color)}}),m.defineProperty("EarliestDragStart",{get:function(){return this._data.EarliestDragStart??this._data.PM_EarliestDragStart}}),m.defineProperty("EarliestEnd",{get:function(){return this._data.EarliestEnd}}),m.defineProperty("EarliestEndColor",{get:function(){return this._getPropertyAsColorString(this._data.EarliestEndColor??this._data.PM_EarliestEndColor)}}),m.defineProperty("EarliestStart",{get:function(){return this._data.EarliestStart}}),m.defineProperty("EarliestStartColor",{get:function(){return this._getPropertyAsColorString(this._data.EarliestStartColor??this._data.PM_EarliestStartColor)}}),m.defineProperty("End",{get:function(){return this._data.End}}),m.defineProperty("EndIsSnapTarget",{get:function(){var e=this._data.EndIsSnapTarget??this._data.PM_EndIsSnapTarget;return null==e?void 0:!!e}},void 0,!0),m.defineProperty("Entries",{get:function(){return this.getChildrenArray(r)}},void 0,[]),g.prototype.areEntriesExistent=function(){return Array.isArray(this._data.Entries)&&this._data.Entries.length},m.defineProperty("LatestDragEnd",{get:function(){return this._data.LatestDragEnd??this._data.PM_LatestDragEnd}}),m.defineProperty("LatestEnd",{get:function(){return this._data.LatestEnd}}),m.defineProperty("LatestEndColor",{get:function(){return this._getPropertyAsColorString(this._data.LatestEndColor??this._data.PM_LatestEndColor)}}),m.defineProperty("LatestStart",{get:function(){return this._data.LatestStart}}),m.defineProperty("LatestStartColor",{get:function(){return this._getPropertyAsColorString(this._data.LatestStartColor??this._data.PM_LatestStartColor)}}),m.defineProperty("LeftBarSymbolHeight",{get:function(){return this._getPropertyAsFiniteNumber(this._data.LeftBarSymbolHeight??this._data.PM_LeftBarSymbolHeight)}}),m.defineProperty("LeftBarSymbolID",{get:function(){return this._data.LeftBarSymbolID??this._data.PM_LeftBarSymbolID}}),m.defineProperty("LeftBarSymbolWidth",{get:function(){return this._getPropertyAsFiniteNumber(this._data.LeftBarSymbolWidth??this._data.PM_LeftBarSymbolWidth)}}),m.defineProperty("LinkSourceDate",{get:function(){return this._data.LinkSourceDate}}),m.defineProperty("LinkTargetDate",{get:function(){return this._data.LinkTargetDate}}),m.defineProperty("MinimumRowHeight",{get:function(){return this._getPropertyAsNumber(this._data.MinimumRowHeight??this._data.PM_MinimumRowHeight)}}),m.defineProperty("MustEndOn",{get:function(){return this._data.MustEndOn}}),m.defineProperty("MustEndOnColor",{get:function(){return this._getPropertyAsColorString(this._data.MustEndOnColor??this._data.PM_MustEndOnColor)}}),m.defineProperty("MustStartOn",{get:function(){return this._data.MustStartOn}}),m.defineProperty("MustStartOnColor",{get:function(){return this._getPropertyAsColorString(this._data.MustStartOnColor??this._data.PM_MustStartOnColor)}}),m.defineProperty("NonworkingTimeColor",{get:function(){return this._getPropertyAsColorString(this._data.NonworkingTimeColor??this._data.PM_NonworkingTimeColor)}}),m.defineProperty("PredictedEndColor",{get:function(){return this._getPropertyAsColorString(this._data.PredictedEndColor??this._data.PM_PredictedEndColor)}}),m.defineProperty("ProgressBackgroundColor",{get:function(){return this._getPropertyAsColorString(this._data.ProgressBackgroundColor??this._data.PM_ProgressBackgroundColor)}}),m.defineProperty("ProgressColor",{get:function(){return this._getPropertyAsColorString(this._data.ProgressColor??this._data.PM_ProgressColor)}}),m.defineProperty("ProgressNonworkingTimeColor",{get:function(){return this._getPropertyAsColorString(this._data.ProgressNonworkingTimeColor??this._data.PM_ProgressNonworkingTimeColor)}}),m.defineProperty("RightBarSymbolHeight",{get:function(){return this._getPropertyAsFiniteNumber(this._data.RightBarSymbolHeight??this._data.PM_RightBarSymbolHeight)}}),m.defineProperty("RightBarSymbolID",{get:function(){return this._data.RightBarSymbolID??this._data.PM_RightBarSymbolID}}),m.defineProperty("RightBarSymbolWidth",{get:function(){return this._getPropertyAsFiniteNumber(this._data.RightBarSymbolWidth??this._data.PM_RightBarSymbolWidth)}}),m.defineProperty("RowDesign",{get:function(){return this._getPropertyAsNumber(this._data.RowDesign??this._data.PM_RowDesign)}}),m.defineProperty("RowSelectable",{get:function(){var e=this._data.RowSelectable??this._data.PM_RowSelectable;return null==e?void 0:!!e}}),m.defineProperty("RowSymbolColumnBackgroundColor",{get:function(){return this._getPropertyAsColorString(this._data.RowSymbolColumnBackgroundColor??this._data.PM_RowSymbolColumnBackgroundColor)}}),m.defineProperty("RowSymbolIDs",{get:function(){let e=this._data.RowSymbolIDs??this._data.PM_RowSymbolIDs;return Array.isArray(e)?e:void 0}}),m.defineProperty("RowTooltipTemplateID",{get:function(){return this._data.RowTooltipTemplateID??this._data.PM_RowTooltipTemplateID}}),m.defineProperty("SkilledBarTooltipTemplateID",{get:function(){return this._data.SkilledBarTooltipTemplateID}}),m.defineProperty("SkilledRowTooltipTemplateID",{get:function(){return this._data.SkilledRowTooltipTemplateID}}),m.defineProperty("SimplifiedBarAppearance",{get:function(){return this._data.SimplifiedBarAppearance}}),m.defineProperty("SnapTargetsForStart",{get:function(){return this._getPropertyAsNumber(this._data.SnapTargetsForStart??this._data.PM_SnapTargetsForStart)}}),m.defineProperty("SnapTargetsForEnd",{get:function(){return this._getPropertyAsNumber(this._data.SnapTargetsForEnd??this._data.PM_SnapTargetsForEnd)}}),m.defineProperty("SortCode",{get:function(){return this._data.SortCode??this._data.PM_SortCode}}),m.defineProperty("Start",{get:function(){return this._data.Start}}),m.defineProperty("StartIsSnapTarget",{get:function(){var e=this._data.StartIsSnapTarget??this._data.PM_StartIsSnapTarget;return null==e?void 0:!!e}},void 0,!0),m.defineProperty("Status1Color",{get:function(){return this._getPropertyAsColorString(this._data.Status1Color??this._data.PM_Status1Color)}}),m.defineProperty("Status1Visible",{get:function(){var e=this._data.Status1Visible??this._data.PM_Status1Visible;return null==e?void 0:!!e}}),m.defineProperty("Status2Color",{get:function(){return this._getPropertyAsColorString(this._data.Status2Color??this._data.PM_Status2Color)}}),m.defineProperty("Status2Visible",{get:function(){var e=this._data.Status2Visible??this._data.PM_Status2Visible;return null==e?void 0:!!e}}),m.defineProperty("Status3Color",{get:function(){return this._getPropertyAsColorString(this._data.Status3Color??this._data.PM_Status3Color)}}),m.defineProperty("Status3Visible",{get:function(){var e=this._data.Status3Visible??this._data.PM_Status3Visible;return null==e?void 0:!!e}}),m.defineProperty("Status4Color",{get:function(){return this._getPropertyAsColorString(this._data.Status4Color??this._data.PM_Status4Color)}}),m.defineProperty("Status4Visible",{get:function(){var e=this._data.Status4Visible??this._data.PM_Status4Visible;return null==e?void 0:!!e}}),m.defineProperty("StatusFrameColor",{get:function(){return this._getPropertyAsColorString(this._data.StatusFrameColor??this._data.PM_StatusFrameColor)}}),m.defineProperty("StatusFrameVisible",{get:function(){var e=this._data.StatusFrameVisible??this._data.PM_StatusFrameVisible;return null==e?void 0:!!e}},void 0,!1),m.defineProperty("TableColor",{get:function(){return this._getPropertyAsColorString(this._data.TableColor??this._data.PM_TableColor)}}),m.defineProperty("TableRowDefinitionID",{get:function(){return this._data.TableRowDefinitionID??this._data.PM_TableRowDefinitionID}}),m.defineProperty("TableTextColor",{get:function(){return this._getPropertyAsColorString(this._data.TableTextColor??this._data.PM_TableTextColor)}}),m.defineProperty("TopLeftBarSymbolID",{get:function(){return this._data.TopLeftBarSymbolID??this._data.PM_TopLeftBarSymbolID}}),m.defineProperty("TopRightBarSymbolID",{get:function(){return this._data.TopRightBarSymbolID??this._data.PM_TopRightBarSymbolID}}),m.defineProperty("PredictedEnd",{get:function(){return this._data.PredictedEnd}}),m.defineProperty("Progress",{get:function(){var e=this._data.Progress;return"number"==typeof e?e:void 0}}),m.defineProperty("SuitableActivityIDs",{get:function(){var e=this._data.SuitableActivityIDs;return Array.isArray(e)?e:null!=e?[e.toString()]:void 0}}),m.defineProperty("SuitableResourceIDs",{get:function(){var e=this._data.SuitableResourceIDs;return Array.isArray(e)?e:null!=e?[e.toString()]:void 0}}),m.defineProperty("TableText",{get:function(){return this._data.TableText??this._data.Name}}),Object.defineProperty(g.prototype,"__MultiplierPrimaryKeys",{get:function(){return this.___multiplierPrimaryKeys},set:function(e){this.___multiplierPrimaryKeys=e}}),e.exports=g},6084:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(8590);e.exports=a.extendClass("rabAllocationEntry",n,{_getDefaultObjectPropName:function(){return"defaultValuesForAllocationEntryProperties"}})},7450:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(476),o=n.ItemType,r=n.ViewType,l=i(5977)._entriesShownSeparatelyByUnifiedBarDesign,s=i(1632),d=(i(6084),{construct:function(e,t,i,a){this._super(o.AllocationEntry,e,t,i,a)},_determineBarInteractions:function(e,t){var i=(this.rab_parentItem||this._bridgedParentItem).rab_unifiedBarDesign;return l(i)&&(this.markable=!0,e.isAllocationEditable(t))?this._viewType===r.Activities?t.AllowedBarDragModesInActivitiesView:t.AllowedBarDragModes:(this.markable=!1,this._super(e,t))}});e.exports=a.extendClass("rabAllocationEntryTimeItem",s,d)},6621:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nPropertyComposer,r=i(9280).RowInteractions,l=i(476),s=l.ItemType,d=l.ViewType,c=i(4613),u=(i(2205),{_barsChangedValueOnSetParentItem:!0,construct:function(e,t,i,a){this.__ignoreUpdateFromReference=!0,this._cachedTimeItem?(this._cachedTimeItem.construct(e,t,this,null),delete this._cachedTimeItem._dbgIsDisposed,delete this._cachedTimeItem):e._createItem(s.Allocation,this,t),this._super(s.AllocationRow,e,t,i,void 0,a),delete this.__ignoreUpdateFromReference,[d.Resources,d.SkilledResources].includes(this.viewType())&&(this.calendar="fromParentRow",this.dateAreas="fromParentRow")},dispose:function(e){this._cachedTimeItem=this.timeItems?.[0],this._cachedTimeItem?.dispose(e),this._super(e)},isResourceRelevant:function(){return!0},postUpdateSelf:function(){var e=!0;if(this.getAPIOption("updateOptimizationEnabled")){var t=this.data();t&&!t.rab_modificationClassification||(e=!1)}e&&(this._viewModel.registerRowItem(this,!0,!1),this._super())},getChildItemsPropNameInParent:function(){return this||this._super(),"detailingRowItems"},enrichObject:function(){this.initiallyCollapsed=!1,this.collapsible=!1},updateFromReference:function(e){var t=this._super(e),i=this.data(),a=i.model();if(void 0===this.__ignoreUpdateFromReference&&this.timeItems?.[0]?.updateFromReference(e),this.tableRowDefinitionID=i.TableRowDefinitionID,null!=this.tableRowDefinitionID&&(this.tableRowDefinitionID=this.tableRowDefinitionID.toString()),this.selectable=i.RowSelectable,this.rowInteractions=r.None,!i.isInOtherMultiplierSourceObject()&&a.isAllocationEditable(i)&&(this.rowInteractions=this.viewType()===d.Activities?i.AllowedRowDragModesInActivitiesView:i.AllowedRowDragModes),this.expandedDisplayedElements=this._viewModel.modifyDisplayedElementsForRowItemType(s.AllocationRow,i.RowDesign),this.collapsedDisplayedElements=this.expandedDisplayedElements,this.minimumHeight=i.MinimumRowHeight,this.viewType()===d.Activities)if(this.getAPIOption("resourcesVisibleInActivitiesView"))this.calendar="fromParentRow",this.dateAreas="fromParentRow";else{var n,l=a.resourceByID(o.compose(i,["ResourceRole","ResourceID"]))||null;e&&e.ignoreCalendar?n=a._defaultNonWorkingTimeCalendar:l&&(n=a.calendarByResource(l)),this.calendar=n?n.nCalendar:void 0;var c=l?a.periodHighlighterByID(l.PeriodHighlighterID):void 0;this.dateAreas=c?c.dateAreaDefinitions:void 0}return this.rab_tableColor=i.TableColor,t},getPossiblyActivityDependentPropValues:function(e){var t,i=this.data(),a=function(a){return void 0===t&&(t=i.model().activityByID(o.compose(i,["ActivityRole","ActivityID"]))||null),t?t[a]:e},n=function(e){return i&&(i[e]??a(e))},r=function(e){var t={[i?.[e]??""]:!0};this.timeItems?.[0]?.rabvm_childTimeItems?.forEach((i=>{t[i[e]||"undefined"]=!0}));let n=Object.keys(t).join(",");return"undefined"!==n?n:a(e)};return{progress:this.progress,start:this.start?.getTime(),end:this.end?.getTime(),BorderColor:n("BorderColor"),BorderWidth:n("BorderWidth"),BorderDashArray:n("BorderDashArray"),Color:i&&r.call(this,"Color"),NonWorkingTimeColor:i&&r.call(this,"NonworkingTimeColor")}},getAllocationTimeItemForLinkRelationType:function(e){if(Array.isArray(this.timeItems)&&this.timeItems.length>0)return this.timeItems[0].getAllocationTimeItemForLinkRelationType(e)},getSelectableItem:function(e){return e===this.rab_itemType?this._super(e):Array.isArray(this.timeItems)&&this.timeItems.length>0?this.timeItems[0]:void 0}});e.exports=n.extendClass("rabAllocationRowItem",c,u)},3375:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nPropertyComposer,r=i(5674),l=r.BarInteractions,s=r.BarShape,d=r.BarType,c=i(476),u=c.ItemType,p=c.ViewType,h=i(5977),g=h._constraintMappings,m=h._LinkTypeFlags,_=h._UnifiedBarDesigns,f=h._UnifiedBarDesignEntriesMask,y=(i(2205),i(4100)),b=i(9199),A=i(3786),v={construct:function(e,t,i,a){this.rab_propNames={},this.rab_propNames.Start="Start",this.rab_propNames.End="End",this.respectingCalendar=!0,this.constraints=[],this._super(u.Allocation,e,t,i,void 0,a)},postUpdateSelf:function(){if(this.getAPIOption("updateOptimizationEnabled")){var e=this.data();e&&!e.rab_modificationClassification&&this._super()}else this._super()},updateFromReference:function(e){var t=this,i=this._super(e),a=this.data(),n=a.model(),r=!this.getAPIOption("decouplingOfAllocationPropertiesFromActivities")&&void 0;let c=this.rab_barShape;this.rab_barShape=a.BarShape??this.getAPIOption("defaultAllocationBarShape"),this.barShape="rabSymbol"===this.rab_barShape?s.Diamond:this.rab_barShape,this.barType=this.rab_barShape===s.Diamond||"rabSymbol"===this.rab_barShape?d.Single:d.StartEnd;let h=a.isInOtherMultiplierSourceObject();if(this.sortPriority=h?-2:0,this.rab_unifiedBarDesign=h?this._viewModel.getAPIOptionMapped("allocationBarDesignOfOther"):a._UnifiedBarDesign??this.getAPIOption("defaultAllocationBarDesign"),this.barType!==d.Single&&this.rab_barShape!==s.Summary||(this.rab_unifiedBarDesign=this.rab_unifiedBarDesign&~f|_.StartEnd),this.barShape!==s.RectangleWithLeftTopBevel||this.rab_unifiedBarDesign&_.ComplexShape||(this.barShape=this.rab_barShape=s.Rectangle),this.barInteractions=l.None,!h&&n.isAllocationEditable(a)&&(this.barInteractions=this.viewType()===p.Activities?a.AllowedBarDragModesInActivitiesView:a.AllowedBarDragModes),this.marked=!!(this.rab_unifiedBarDesign&_.Status)&&a.StatusFrameVisible,delete this.leftCaptionOffset,a.BarTextPrefixSymbolID){var m=a.BarTextPrefixSymbolWidth;0===m||m||(m=b.prototype._barSymbolExtent),m=+m,!isNaN(m)&&isFinite(m)&&m>0&&(this.leftCaptionOffset=m)}this.snapTargetsForStart=a.SnapTargetsForStart,this.snapTargetsForEnd=a.SnapTargetsForEnd,this.startIsSnapTarget=a.StartIsSnapTarget,this.endIsSnapTarget=a.EndIsSnapTarget;let A=this.getAPIOption("finishedAllocationBarsShownUnstackedInBackground"),v=this.rab_unifiedBarDesign&_.ProgressAndPredictedEnd;if(A||v){let e=a.Progress;null==e&&!1!==r&&(void 0===r&&(r=n.activityByID(o.compose(a,["ActivityRole","ActivityID"]))||!1),r&&(e=r.Progress)),A&&e>=100?(this.sortPriority--,this.stackingAllowed=!1):delete this.stackingAllowed,v&&(this.progress=e,this.progressBackgroundVisible=!(!a.ProgressBackgroundColor&&!this.getAPIOption("defaultAllocationProgressBackgroundColor")),this.predictedEnd=n.dateTimeValueToDate(a.PredictedEnd))}v?A||delete this.stackingAllowed:(this.progress=0,this.progressBackgroundVisible=!1,delete this.predictedEnd),this.fillPatternType=a.BarPatternType,this.selectable=a.BarSelectable,this.start=n.dateTimeValueToDate(a.Start),this.end=n.dateTimeValueToDate(a.End);var I=a.areEntriesExistent();if(this.barType===d.Single||I||(this.rab_unifiedBarDesign|=_.StartEnd),t.rabvm_areChildTimeItemsVisible=!!(this.barType!==d.Single&&this.rab_unifiedBarDesign&(_.Entries|_.Grouped)),this.rabvm_childTimeItems?.length?this.rabvm_childTimeItems.forEach((e=>{if(Object.values(u).includes(e.rab_itemType)){var i=e.start;i&&(!t.start||i<t.start)&&(t.start=new Date(i));var a=e.end;a&&(!t.end||a>t.end)&&(t.end=new Date(a))}})):I&&a.Entries.forEach((e=>{var t=n.dateTimeValueToDate(e.Start);t&&(!this.start||t<this.start)&&(this.start=t);var i=n.dateTimeValueToDate(e.End);i&&(!this.end||i>this.end)&&(this.end=i)})),!1!==r){let e=!this.start,t=!this.end&&this.barType!==d.Single;(e||t)&&(void 0===r&&(r=n.activityByID(o.compose(a,["ActivityRole","ActivityID"]))||!1),r&&(e&&(this.start=n.dateTimeValueToDate(r.Start)),t&&(this.end=n.dateTimeValueToDate(r.End))))}var C=this.zOrder;this.start&&(this.end||this.barType===d.Single)?this.zOrder=this.rab_unifiedBarDesign&_.Grouped?"twice":0:(delete this.barShape,delete this.zOrder);let w=this.barHeight;this.barHeight=this.barShape===s.Summary?16:a.BarHeight;let T=this.barTopOffset;if(this.barTopOffset=a.BarTopOffset??0,this.rab_unifiedBarDesign&_.ReducedHeight){let e=this.getAPIOption("allocationBarTopOffsetAndHeightScaleFactor"),t=this.getAPIOption("reducedBarTopOffsetAndHeightScaleFactor")/e,i=this.barHeight??this.getAPIOption("defaultAllocationBarHeight"),a=i*t;this.barHeight=Math.floor(a),this.barTopOffset&&(this.barTopOffset=Math.ceil(this.barTopOffset*t)),i!==a&&(this.barTopOffset=(this.barTopOffset??0)+Math.floor((i-a)/2))}if(this.barShape!==c||this.zOrder!==C||w!==this.barHeight||T!==this.barTopOffset){let e={triggeredByParent:!0};this.childTimeItems?.forEach((t=>{t.updateFromReference(e)}))}if(this.constraints.length=0,t.rab_unifiedBarDesign&_.Constraints){let e,t;g.forEach((i=>{let o=n.dateTimeValueToDate(a[i[0]]);if(o){void 0===e&&(e=this.getAPIOption("detailedAllocationConstraintSymbolsEnabled"),t=this.getAPIOption("defaultAllocationConstraintSymbolColor"));let n=a[`${i[0]}Color`]||t;this.rab_unifiedBarDesign&_.TonedDownColoring&&(n=y.calculateMixedColor(n,this.getAPIOption("tonedDownOverlayColor"))),this.constraints.push({type:e?i[1]:void 0,date:o,color:n})}}))}return this.linkSourceDate=n.dateTimeValueToDate(a.LinkSourceDate),this.linkTargetDate=n.dateTimeValueToDate(a.LinkTargetDate),this.opacity=this.rab_unifiedBarDesign&_.TonedDownColoring?-1:a.BarOpacity,i},getAllocationTimeItemForLinkRelationType:function(e){return this.rab_unifiedBarDesign===_.Entries&&Array.isArray(this.childTimeItems)&&this.childTimeItems.length>0?e&m.TargetEnd?this.childTimeItems[this.childTimeItems.length-1]:this.childTimeItems[0]:this}},I=n.extendClass("rabAllocationTimeItem",A,v);Object.defineProperty(I.prototype,"childTimeItems",{get:function(){return this.rabvm_areChildTimeItemsVisible?this.rabvm_childTimeItems:void 0}}),e.exports=I},6288:(e,t,i)=>{var a=i(8680),n=i(3571),o=n.nClass,r=n.nClassFactory,l=n.nContextMenuHandler,s=n.nDateHelper,d=n.nDefaultSeparator,c=n.nLocale,u=n.nLocales,p=n.nPrimaryKeyManager,h=n.nPropertyComposer,g=n.nSubsequentIDGenerator,m=i(5674),_=m.nCalendarHelper,f=m.TimeType,y=i(476),b=y.CollapseState,A=y.CollapseStateTargets,v=y.DateLineCaptionPosition,I=y.HorizontallyScrollableViewArea,C=y.HorizontalScrollPosition,w=y.ItemType,T=y.ObjectType,R=y.TimescaleInteractionModes,S=y.TimescaleNavigationMode,P=y.TimescaleNavigationModeToVersionMap,O=y.UpdateModes,D=y.VerticallyScrollableViewArea,E=y.VerticalScrollPosition,M=y.ViewType,B=y.VisualType,k=y.DateLineCaptionOrientation,V=y.WarningCode,N=i(5977),F=N._GroupTableRowDefinitionID,L=N.ErrorCode,W=N.PrimaryKeyInfos,x=N.RAB_ACTIVITIES_PROP_NAME,j=N.RAB_ALLOCATIONS_PROP_NAME,H=N.RAB_CALENDARS_PROP_NAME,G=N.RAB_CALENDAR_GRIDS_PROP_NAME,K=N.RAB_CURVES_PROP_NAME,U=N.RAB_ENTITIES_PROP_NAME,z=N.RAB_HIERARCHY_SUPPLEMENTARY_DEFINITIONS_PROP_NAME,Y=N.RAB_LINKS_PROP_NAME,X=N.RAB_RESOURCES_PROP_NAME,$=N.RAB_SKILLED_RESOURCES_PROP_NAME,q=N.RAB_SKILLS_PROP_NAME,Q=N.RAB_RESOURCES_PROPERTIES_FOR_SKILLS_PROP_NAME,Z=N.RAB_RESOURCES_PROPERTIES_FOR_ACTIVITIES_PROP_NAME,J=N.RAB_MULTIPLIED_RESOURCES_BY_ACTIVITIES_PROP_NAME,ee=N.RelationshipInfos,te=i(6560),ie=i(9199),ae=i(5265),ne=i(5241),oe=i(2277),re=i(8251),le=i(9586),se=i(4003),de=i(997);var ce={construct:function(e){var t=this;this._invariantDateTimeFormat=a.utcFormat("%Y-%m-%dT%H:%M:%SZ"),this._invariantDateTimeFormatParse=a.utcParse("%Y-%m-%dT%H:%M:%SZ"),this._initOptions(e),this._optionsCollector=new this._options.optionsCollectorClass(this),this._title=this._options.title,this._model=new this._options.modelClass(this,this._options.modelOptions),this._view=new this._options.viewClass(this,this._model,this._options.viewOptions),this._viewInitialized=!1,this._withinFirstCodeSequence=!0,window.setTimeout((function(){this._withinFirstCodeSequence=!1}),0),this._clearCache(),this._symbolsMap={},this._dateLinesMap={},this._tooltipTemplatesMap={},this._tableRowDefinitionsMap={},this._nonWorkingTimeCalendarIsDirty=!1,this._locale=new c,this._viewType=M.Activities;var i=t.handleAPIOptionChanged.bind(t);["locale","language","weekNumbering","editable","firstDayOfWeek","intlNumberFormatOptionsMap","intlDateTimeFormatOptionsMap"].forEach((e=>this.setAPIOptionChangedCallback(e,1,i))),t._contextMenuHandler=new l},destroy:function(){void 0!==this._renderTimerID&&(window.clearTimeout(this._renderTimerID),delete this._renderTimerID),this._view?.destroy(),delete this._view,this._model?.destroy(),delete this._model,delete this._optionsCollector,delete this._contextMenuHandler,delete this._symbolsMap,delete this._dateLinesMap,delete this._tooltipTemplatesMap,delete this._tableRowDefinitionsMap},init:function(){this._model.init(null)},ganttView:function(){return this._view?.ganttView()},handleWarning:function(){},getViewType:function(){return this._viewType},setAPIOption:function(e,t,i){this._optionsCollector.setOption(e,t,i)},getAPIOption:function(e){return this._optionsCollector.getOption(e)},setAPIOptionChangedCallback:function(e,t,i){this._optionsCollector.setCallback(e,t,i)},handleAPIOptionChanged:function(e,t,i){switch(e){case"locale":this._locale.locale(t);break;case"language":this._locale.language(t);break;case"weekNumbering":this._locale.weekNumbering(t);break;case"editable":this._view.setOption(e,t,i),this._removeAllDateLinesFromGanttViews(),this._initializeDateLinesForView();break;case"firstDayOfWeek":this._locale.firstDayOfWeek(t);break;case"intlNumberFormatOptionsMap":this._locale.intlNumberFormatOptionsMap(t);break;case"intlDateTimeFormatOptionsMap":this._locale.intlDateTimeFormatOptionsMap(t)}},handleAPIOptionPostprocessing:function(){this._renderOnIdle()},_initOptions:function(e){var t={appIDForTextLocalizer:"RAB",d3TimeFormatEnabled:!1,modelOptions:{},viewOptions:{},viewModelOptions:{},ganttViewOptions:{ganttWidget:{timescaleInteractionsEnabled:!0,timescaleInteractionMode:R.Default,automaticCalculationOfSubRowIndexesOfBarsInRow:!1,barSelectionFramesShownWithHigherZOrder:!0,timescaleSmartNavigationVersion:P[S.Latest]}},optionsCollectorClass:oe,modelClass:re,viewClass:de,activitiesViewModelClass:te,resourcesViewModelClass:le,loadsViewModelClass:ne,skilledResourcesViewModelClass:se,entitiesViewModelClass:ae,ganttViewClass:ie,boundHandleExceptionFunc:null,widget:null,fullScreenGanttViewElem:null,timeAxisResolutionUnit:null,timeAxisPixelsPerResolutionUnit:null};this._options=Object.assign({},t,e),e.modelOptions&&(this._options.modelOptions=Object.assign({},t.modelOptions,e.modelOptions)),e.viewModelOptions&&(this._options.viewModelOptions=Object.assign({},t.viewModelOptions,e.viewModelOptions)),e.viewOptions&&(this._options.viewOptions=Object.assign({},t.viewOptions,e.viewOptions)),e.ganttViewOptions&&(this._options.ganttViewOptions=Object.assign({},t.ganttViewOptions,e.ganttViewOptions),e.ganttViewOptions.ganttWidget&&(this._options.ganttViewOptions.ganttWidget=Object.assign({},t.ganttViewOptions.ganttWidget,e.ganttViewOptions.ganttWidget))),e.boundHandleExceptionFunc||(this._options.boundHandleExceptionFunc=function(e){throw e})},getOption:function(e){return this._options[e]},optionsCollector:function(){return this._optionsCollector},model:function(){return this._model},view:function(){return this._view},contextMenuHandler:function(){return this._contextMenuHandler},title:function(){return this._title},locale:function(){return this._locale},dateTimeStringToDate:function(e){if(this.getAPIOption("relativeDateModeEnabled"))return s.relativeDateTimeStringToDate(e,this.getAPIOption("referenceDate"));if(this._options.d3TimeFormatEnabled){var t=this._invariantDateTimeFormatParse(e);return t&&t.getFullYear()<2e3&&t.setFullYear(t.getFullYear()+100),t}return new Date(e)},dateToDateTimeString:function(e){return this._invariantDateTimeFormat(e)},localDateToDateTimeString:function(e){var t=u.locale();return a.timeFormat(t.date+" "+t.patterns.T)(e)},localDateToDateString:function(e){return a.timeFormat(u.locale().date)(e)},_getObjectDataForObjects:function(e){return e.map((e=>e.data()))},_addObject:function(e,t,i){var a=this;if("object"==typeof e){var n=a.model()[i](e,t);return n&&a.view()&&a.view()[i](n,t),n}},supplementDifferentialObject:function(e,t){let i=this.getAPIOption("resetValueForDifferentialUpdate");Object.keys(t).forEach((a=>{if("ID"!==a){let n=e[a];void 0===n?e[a]=t[a]:n===i&&delete e[a]}}))},_updateObject:function(e,t,i,a,n){var o=this,r=o.model(),l=r.getChildByData(t,e);if(!l&&a)l=o._addObject(e,t,a);else if(l){n&O.DifferentialValues&&o.supplementDifferentialObject(e,l.data()),o.getAPIOption("updateOptimizationEnabled")&&l.classifyModification(e,t,l.ID)&&r.increaseModificationClassifiedCount(t);var s=o.view();s&&s[i](l,"before"),r[i](l,e),s&&s[i](l,"after")}return l},_removeObject:function(e,t,i,a,n){var o=this,r=o.model().getChildByPrimaryKey(t,e);if(r){var l=o.view();l?l[a](e,n,t):o.model()[a](r,t)}else o.handleWarning(V.PRIMARY_KEY_NOT_EXISTING_AT_INDEX,{key:e,index:i})},_dedupeAndSortObjects:function(e,t,i,a){var n=this;let o=n.model();e=e.slice();let r=a&O.DifferentialValues,l=a&O.ImplicitAddObjects;if(i||!r){let a={},r={};e.forEach((function(e,s){if(e){let d=e.ID;d||n.handleWarning(V.PRIMARY_KEY_EMPTY_AT_INDEX,{index:s});let c=a[d];if(void 0!==c){let a=i||l&&!o.getChildByData(t,e);r[a?s:c]=!0,n.handleWarning(V.PRIMARY_KEY_DUPLICATE_AT_INDEX,{key:d,index:s})}a[d]=s}})),Object.keys(r).sort(((e,t)=>+t-+e)).forEach((t=>{e.splice(t,1)}))}return e},_addObjects:function(e,t,i){var a,n=this;n._model.reinitializeVisibilityDetermination();var o,r=n.ganttView();r&&(a=r.preAddObjects(t)),e=n._dedupeAndSortObjects(e,t,!0,0),a||(o={}),n._tryToAddOrUpdateObjectsConcerningCycles(e,t,o,!0,(function(e,t){return n._addObject(e,t,i)})),r&&r.postAddObjects(t,o,a),n._renderOnIdle()},_updateObjects:function(e,t,i,a){var n=this;n._model.reinitializeVisibilityDetermination();var o=!n._model.getChildrenArray(t).length,r=n.ganttView(),l=(a=a??n.getAPIOption("defaultUpdateMode"))&O.ImplicitAddObjects;l&&r?.invalidateAllRowsIfEmpty(t===U),e=n._dedupeAndSortObjects(e,t,!1,a);var s,d=l?"add"+i:void 0,c="update"+i;o||(s={}),n._tryToAddOrUpdateObjectsConcerningCycles(e,t,s,!1,(function(e,t){return n._updateObject(e,t,c,d,a)})),n._viewInitialized&&r?.postUpdateObjects(t,s),n._renderOnIdle()},_tryToAddOrUpdateObjectsConcerningCycles:function(e,t,i,a,n){var o=this,r=function(l){if(l?.length){let s=[];if(o._pendingObjects=s,l.forEach((function(r){var l=n.call(o,r,t);l?i&&(i[l.ID]=!0):s[s.length-1]!==r&&o.handleWarning(a?V.PRIMARY_KEY_EXISTING_AT_INDEX:V.PRIMARY_KEY_NOT_EXISTING_AT_INDEX,{key:r.ID,index:e.indexOf(r)})})),l.length===s.length){let e=W[t],i=ee[t][0];throw s.forEach((function(a){let n=p.getPrimaryKeyByPrimaryKeyNames(a,e),r=p.getPrimaryKeyByRelationshipInfo(a,i);o.handleWarning(V.RELATED_PRIMARY_KEY_CYCLIC,{prop:r,key:n,type:t})})),new Error(`[E${L.RELATED_PRIMARY_KEY_CYCLIC}] Object relationships lead to one or more cycles!`)}s.length>0&&r(s)}};r(e)},registerPendingObjectData:function(e){this._pendingObjects&&this._pendingObjects.push(e)},_removeObjects:function(e,t,i,a){var n,o=this,r=o._model,l=(n=void 0!==t?e.map((e=>"string"==typeof e?(t||"")+d+e:(e.Role||"")+d+e.ID)):e.map((e=>"string"==typeof e?e:e.ID))).length===r.getChildrenArray(i).length&&n.every((e=>!!r.getChildByPrimaryKey(i,e)));n.forEach(((e,t)=>{o._removeObject(e,i,t,a,l)})),o._viewInitialized&&o.ganttView()?.postRemoveObjects(i),o._renderOnIdle()},_updateSelectedActivities:function(){if(this._viewInitialized){var e=this.ganttView();if(e.viewType()===M.Activities){var t=e.getSelectedObjectsAndType();t.itemType===w.Activity&&e.selectOrHighlightObjectsByItemType(t.itemType,t.objects)}}},_updateSelectedAllocations:function(){if(this._viewInitialized){var e=this.ganttView();if([M.Resources,M.SkilledResources].includes(e.viewType())){var t=e.getSelectedObjectsAndType();t.itemType===w.Allocation&&e.selectOrHighlightObjectsByItemType(t.itemType,t.objects)}}},addSkills:function(e){this._addObjects(e,q,"addSkill")},updateSkills:function(e,t){this._updateObjects(e,q,"Skill",t)},removeSkills:function(e){this._removeObjects(e,void 0,q,"removeSkill")},setResourcePropertiesForSkills:function(e){this.__setResourcePropertiesForParents($,Q,e)},setResourcePropertiesForActivities:function(e){this.__setResourcePropertiesForParents(J,Z,e)},__setResourcePropertiesForParents:function(e,t,i){var a=this;if(i&&Array.isArray(i)&&i.length>0){var n=a.model(),o=a.view();let l=a.getAPIOption("updateOptimizationEnabled");var r=function(e){return Object.keys(e).filter((function(e){return!W[t].includes(e)}))};i.forEach((function(i){var a,s=n.getChildByData(t,i);s?(a=s.getPrimaryKey(),n.PE_updateObject(s,i),r(s.data()).length<=0&&n.PE_removeObject(s)):r(i).length>0&&(a=(s=n.PE_addObject(t,i)).getPrimaryKey()),a&&o?.invalidateMultipliedObject(e,a),l&&(s=n.getChildByData(t,i))&&delete s.rab_modificationClassification})),a._renderOnIdle()}},addResources:function(e){var t=this;t._addObjects(e,X,"addResource"),t._saveCalendarIDsOnAddedObjects(e,X),t._updateSelectedAllocations(),t._nonWorkingTimeCalendarIsDirty=!0},updateResources:function(e,t){var i=this,a=i._saveSavedCalendarIDs(e,X);i._updateObjects(e,X,"Resource",t),i._updateSelectedAllocations(),i._checkSavedCalendarIDsOfUpdatedObjects(e,X,a)},removeResources:function(e){this._removeObjects(e,"",X,"removeResource"),this._updateSelectedAllocations(),this._nonWorkingTimeCalendarIsDirty=!0},addCalendars:function(e){this._addObjects(e,H,"addCalendar"),this._nonWorkingTimeCalendarIsDirty=!0,this._updateResourcesAndActivitiesThatAreUsingTheDefaultCalendar(e)},updateCalendars:function(e,t){this._updateObjects(e,H,"Calendar",t),this._nonWorkingTimeCalendarIsDirty=!0,this._updateResourcesAndActivitiesThatAreUsingTheDefaultCalendar(e)},removeCalendars:function(e){this._removeObjects(e,void 0,H,"removeCalendar"),this._nonWorkingTimeCalendarIsDirty=!0,this._updateResourcesAndActivitiesThatAreUsingTheDefaultCalendar(e)},addCurves:function(e){this._addObjects(e,K,"addCurve")},updateCurves:function(e,t){this._updateObjects(e,K,"Curve",t)},removeCurves:function(e){this._removeObjects(e,void 0,K,"removeCurve")},addActivities:function(e){var t=this;t._addObjects(e,x,"addActivity"),t._saveCalendarIDsOnAddedObjects(e,x),t._updateSelectedActivities(),t._nonWorkingTimeCalendarIsDirty=!0},updateActivities:function(e,t){var i=this,a=i._saveSavedCalendarIDs(e,x);i._updateObjects(e,x,"Activity",t),i._checkSavedCalendarIDsOfUpdatedObjects(e,x,a),i._updateSelectedActivities(),i._nonWorkingTimeCalendarIsDirty=!0},removeActivities:function(e){this._removeObjects(e,"",x,"removeActivity"),this._updateSelectedActivities(),this._nonWorkingTimeCalendarIsDirty=!0},addAllocations:function(e){this._addObjects(e,j,"addAllocation")},updateAllocations:function(e,t){this._updateObjects(e,j,"Allocation",t)},removeAllocations:function(e){this._removeObjects(e,"",j,"removeAllocation")},getAllocationsForActivity:function(e){var t="string"==typeof e?e:e.ID,i="string"==typeof e?void 0:e.Role;return this._getObjectDataForObjects(this.model().getAllocationsForActivityOrResource(T.Activity,t,i))},getAllocationsForResource:function(e){var t="string"==typeof e?e:e.ID,i="string"==typeof e?void 0:e.Role;return this._getObjectDataForObjects(this.model().getAllocationsForActivityOrResource(T.Resource,t,i))},addLinks:function(e){this._addObjects(e,Y,"addLink")},updateLinks:function(e,t){this._updateObjects(e,Y,"Link",t)},removeLinks:function(e){this._removeObjects(e,"",Y,"removeLink")},addEntities:function(e){this._addObjects(e,U,"addEntity")},updateEntities:function(e,t){this._updateObjects(e,U,"Entity",t)},removeEntities:function(e){this._removeObjects(e,void 0,U,"removeEntity")},addHierarchySupplementaryDefinitions:function(e){this._addObjects(e,z,"addHierarchySupplementaryDefinition")},updateHierarchySupplementaryDefinitions:function(e,t){this._updateObjects(e,z,"HierarchySupplementaryDefinition",t)},removeHierarchySupplementaryDefinitions:function(e){this._removeObjects(e,void 0,z,"removeHierarchySupplementaryDefinition")},removeAll:function(e){var t=this;if(t.view())if(null!=e)switch(e){case T.Resource:this.removeResources(this.model().resources());break;case T.Skill:this.removeSkills(this.model().skills());break;case T.Calendar:var i=[];this.model().calendars().forEach((function(e){i.push({ID:e.ID})})),this.removeCalendars(i);break;case T.Activity:this.removeActivities(this.model().activities());break;case T.Allocation:this.removeAllocations(this.model().allocations());break;case T.Curve:this.removeCurves(this.model().curves());break;case T.Link:this.removeLinks(this.model().links());break;case T.Entity:this.removeEntities(this.model().entities());break;case T.PeriodHighlighter:this.removePeriodHighlighters(this.model().periodHighlighters());break;case T.Symbol:t._symbolsMap={},t._updateSymbolsInGanttView(),t._renderOnIdle();break;case T.DateLine:t._removeAllDateLinesFromGanttViews(),t._dateLinesMap={},t._renderOnIdle();break;case T.TooltipTemplate:t._tooltipTemplatesMap={};break;case T.TableRowDefinition:t._tableRowDefinitionsMap={},t._updateTableRowDefinitions(!0),t._renderOnIdle()}else t.view().removeAll(),t._symbolsMap={},t._updateSymbolsInGanttView(),t._tooltipTemplatesMap={},t._tableRowDefinitionsMap={},t._updateTableRowDefinitions(!0),t._removeAllDateLinesFromGanttViews(),t._dateLinesMap={},t._renderOnIdle()},addPseudoObject:function(e,t){switch(t){case x:this._addObjects([e],t,"addActivity");break;case U:this._addObjects([e],t,"addEntity");break;case X:this._addObjects([e],t,"addResource")}},addSymbols:function(e){var t=this;if(Array.isArray(e)){var i=!1;e.forEach((function(e,a){if(e){let n=e.ID?.toString()??"";n?t._symbolsMap[n]?t.handleWarning(V.PRIMARY_KEY_EXISTING_AT_INDEX,{key:n,index:a}):(t._symbolsMap[n]=e,i=!0):t.handleWarning(V.PRIMARY_KEY_EMPTY_AT_INDEX,{index:a})}})),i&&t._updateSymbolsInGanttView()}t._renderOnIdle()},updateSymbols:function(e,t){var i=this;if(Array.isArray(e)){var a=(t=t??i.getAPIOption("defaultUpdateMode"))&O.ImplicitAddObjects,n=t&O.DifferentialValues,o=!1;e.forEach((function(e,t){if("object"==typeof e){let r=e.ID?.toString()??"";if(r){let l=i._symbolsMap[r];a||l?(l&&n&&i.supplementDifferentialObject(e,l),i._symbolsMap[r]=e,o=!0):i.handleWarning(V.PRIMARY_KEY_NOT_EXISTING_AT_INDEX,{key:r,index:t})}else i.handleWarning(V.PRIMARY_KEY_EMPTY_AT_INDEX,{index:t})}})),o&&i._updateSymbolsInGanttView()}i._renderOnIdle()},removeSymbols:function(e){var t=this;Array.isArray(e)&&(e.forEach((function(e,i){if(null!=e){var a="string"==typeof e?e:e.ID;a?a in t._symbolsMap?delete t._symbolsMap[a]:t.handleWarning(V.PRIMARY_KEY_NOT_EXISTING_AT_INDEX,{key:a,index:i}):t.handleWarning(V.PRIMARY_KEY_EMPTY_AT_INDEX,{index:i})}})),t._updateSymbolsInGanttView()),t._renderOnIdle()},_updateSymbolsInGanttView:function(e){this._viewInitialized&&this.ganttView()?.updateSymbols(this._symbolsMap,e)},symbolsMap:function(){return this._symbolsMap},_getSymbolsData:function(){var e=this,t=[];return Object.keys(this._symbolsMap).forEach((function(i){t.push(Object.assign({},e._symbolsMap[i]))})),t},addTooltipTemplates:function(e){var t=this;Array.isArray(e)&&e.forEach((function(e,i){if("object"==typeof e){let a=e.ID?.toString()??"";a?t._tooltipTemplatesMap[a]?t.handleWarning(V.PRIMARY_KEY_EXISTING_AT_INDEX,{key:a,index:i}):t._tooltipTemplatesMap[a]=e:t.handleWarning(V.PRIMARY_KEY_EMPTY_AT_INDEX,{index:i})}}))},updateTooltipTemplates:function(e,t){var i=this;if(Array.isArray(e)){var a=(t=t??i.getAPIOption("defaultUpdateMode"))&O.ImplicitAddObjects,n=t&O.DifferentialValues;e.forEach((function(e,t){if("object"==typeof e){let o=e.ID?.toString()??"";if(o){let r=i._tooltipTemplatesMap[o];a||r?(r&&n&&i.supplementDifferentialObject(e,r),i._tooltipTemplatesMap[o]=e):i.handleWarning(V.PRIMARY_KEY_NOT_EXISTING_AT_INDEX,{key:o,index:t})}else i.handleWarning(V.PRIMARY_KEY_EMPTY_AT_INDEX,{index:t})}}))}},removeTooltipTemplates:function(e){var t=this;Array.isArray(e)&&e.forEach((function(e,i){if(null!=e){var a="string"==typeof e?e:e.ID;a?a in t._tooltipTemplatesMap?delete t._tooltipTemplatesMap[a]:t.handleWarning(V.PRIMARY_KEY_NOT_EXISTING_AT_INDEX,{key:a,index:i}):t.handleWarning(V.PRIMARY_KEY_EMPTY_AT_INDEX,{index:i})}}))},tooltipTemplatesMap:function(){return this._tooltipTemplatesMap},_getTooltipTemplatesData:function(){var e=this,t=[];return Object.keys(this._tooltipTemplatesMap).forEach((function(i){t.push(Object.assign({},e._tooltipTemplatesMap[i]))})),t},addPeriodHighlighters:function(e){this._addObjects(e,G,"addPeriodHighlighter")},updatePeriodHighlighters:function(e,t){this._updateObjects(e,G,"PeriodHighlighter",t)},removePeriodHighlighters:function(e){this._removeObjects(e,void 0,G,"removePeriodHighlighter")},addDateLines:function(e){var t=this;if(Array.isArray(e)){var i=t._viewInitialized?t.ganttView():void 0;let a=e.length-1;e.forEach((function(e,n){if(null!=e){let l=e.ID?.toString()??"";if(l)if(t._dateLinesMap[l])t.handleWarning(V.PRIMARY_KEY_EXISTING_AT_INDEX,{key:l,index:n});else{var o=g.generate(),r=t._createInternalDateLineObject(e,o);t._dateLinesMap[e.ID]=r,t._viewInitialized&&i?.addDateLine(t._createInternalDateLineObject(e,o,i),n!==a)}else t.handleWarning(V.PRIMARY_KEY_EMPTY_AT_INDEX,{index:n})}}))}},updateDateLines:function(e,t){var i=this;if(Array.isArray(e)){var a=!1,n=(t=t??i.getAPIOption("defaultUpdateMode"))&O.ImplicitAddObjects,o=t&O.DifferentialValues,r=i._viewInitialized?i.ganttView():void 0;e.forEach((function(e,t){if("object"==typeof e){let h=e.ID?.toString()??"";if(h){var l=i._dateLinesMap[h];if(n||l){l&&o&&i.supplementDifferentialObject(e,l.rab_data);var s=l?l.rab_ID:g.generate(),d=i._createInternalDateLineObject(e,s);if(i._dateLinesMap[h]=d,i._viewInitialized){var c=l?"updateDateLine":"addDateLine",u=!0;if(l&&(u=!Object.keys(d).every((function(e){var t=d[e],i=l[e];return i instanceof Date&&t instanceof Date?i.valueOf()===t.valueOf():i===t}))),u)var p=i._createInternalDateLineObject(e,s,r);r[c](p,!1),a=!0}}else i.handleWarning(V.PRIMARY_KEY_NOT_EXISTING_AT_INDEX,{key:h,index:t})}else i.handleWarning(V.PRIMARY_KEY_EMPTY_AT_INDEX,{index:t})}})),a&&r?.updateDateLinePresentations()}},removeDateLines:function(e){var t=this;if(Array.isArray(e)){var i=!1,a=t._viewInitialized?t.ganttView():void 0;e.forEach((function(e,n){if(e){var o=("object"==typeof e?e.ID:e)?.toString()??"";if(o)if(o in t._dateLinesMap){var r=t._dateLinesMap[o];t._viewInitialized&&r&&(a?.removeDateLine(t._createInternalDateLineObject({},r.rab_ID,a).id,!1),i=!0),delete t._dateLinesMap[o]}else t.handleWarning(V.PRIMARY_KEY_NOT_EXISTING_AT_INDEX,{key:o,index:n});else t.handleWarning(V.PRIMARY_KEY_EMPTY_AT_INDEX,{index:n})}})),i&&a?.updateDateLinePresentations()}},_initializeDateLinesForView:function(){var e=this;let t=Object.keys(e._dateLinesMap);if(t.length){var i=e.ganttView();let a=t.length-1;t.forEach((function(t,n){var o=e._dateLinesMap[t],r=o.rab_data;i?.addDateLine(e._createInternalDateLineObject(r,o.rab_ID,i),n!==a)}))}},_createInternalDateLineObject:function(e,t,i){return{id:(i?"rab"+i.ganttWidget()._uniqueID+"_":"")+t,date:this._model.dateTimeValueToDate(e.PointInTime),label:e.Caption?e.Caption.toString():"",draggable:!!e.Draggable,labelOrientation:e.CaptionOrientation||k.Vertical,labelPosition:e.CaptionPosition||v.Left,rab_symbolID:e.SymbolID,rab_symbolHeight:e.SymbolHeight||12,rab_symbolWidth:e.SymbolWidth||12,rab_lineColor:e.Color,rab_labelColor:e.CaptionColor,rab_lineWidth:e.Width,rab_lineDashArray:e.DashArray,rab_data:e,rab_ID:t,rab_itemType:w.DateLine,inForeground:null==e.InFrontOfBars||e.InFrontOfBars}},_removeAllDateLinesFromGanttViews:function(){var e=this;if(e.view()){let i=Object.keys(e._dateLinesMap);if(i.length){var t=e.ganttView();i.forEach((function(i){var a=e._dateLinesMap[i];t.removeDateLine("rab"+t.ganttWidget()._uniqueID+"_"+a.rab_ID,!1)})),t.updateDateLinePresentations()}}},_getDateLinesData:function(){var e=this,t=[];return Object.keys(this._dateLinesMap).forEach((function(i){t.push(Object.assign({},e._dateLinesMap[i].rab_data))})),t},addTableRowDefinitions:function(e){var t=this;Array.isArray(e)&&(e.forEach((function(e,i){if("object"==typeof e){let a=e.ID?.toString()??"";a?t._tableRowDefinitionsMap[a]?t.handleWarning(V.PRIMARY_KEY_EXISTING_AT_INDEX,{key:a,index:i}):t._tableRowDefinitionsMap[a]=t._createInternalTableRowDefinition(e):t.handleWarning(V.PRIMARY_KEY_EMPTY_AT_INDEX,{index:i})}})),t._updateTableRowDefinitions(!0))},updateTableRowDefinitions:function(e,t){var i=this;if(Array.isArray(e)){var a=(t=t??i.getAPIOption("defaultUpdateMode"))&O.ImplicitAddObjects,n=t&O.DifferentialValues,o=!1;e.forEach((function(e,t){if("object"==typeof e){let l=e.ID?.toString()??"";if(l){var r=i._tableRowDefinitionsMap[l];if(r||a){r&&n&&i.supplementDifferentialObject(e,r);let t=i._createInternalTableRowDefinition(e);!r||i._isTableRowDefinitionModified(r,t)?(i._tableRowDefinitionsMap[l]=t,o=!0):r.rab_data=e}else i.handleWarning(V.PRIMARY_KEY_NOT_EXISTING_AT_INDEX,{key:l,index:t})}else i.handleWarning(V.PRIMARY_KEY_EMPTY_AT_INDEX,{index:t})}})),i._updateTableRowDefinitions(o)}},removeTableRowDefinitions:function(e){var t=this;Array.isArray(e)&&(e.forEach((function(e,i){if(null!=e){var a=("object"==typeof e?e.ID:e)?.toString()??"";a?a in t._tableRowDefinitionsMap?delete t._tableRowDefinitionsMap[a]:t.handleWarning(V.PRIMARY_KEY_NOT_EXISTING_AT_INDEX,{key:a,index:i}):t.handleWarning(V.PRIMARY_KEY_EMPTY_AT_INDEX,{index:i})}})),t._updateTableRowDefinitions(!0))},_isTableRowDefinitionModified:function(e,t){var i=e.cellDefinitions,a=t.cellDefinitions;if(!!i!=!!a)return!0;if(t.rab_backgroundColor!==e.rab_backgroundColor||t.rab_textColor!==e.rab_textColor||t.rab_titleBackgroundColor!==e.rab_titleBackgroundColor||t.rab_titleTextColor!==e.rab_titleTextColor||t.rab_symbolColumnBackgroundColor!==e.rab_symbolColumnBackgroundColor)return!0;if(i){if(i.length!==a.length)return!0;for(var n=i.length-1;n>=0;n--)if(Object.keys(i[n]).some((function(e){var t=i[n][e],o=a[n][e];return["function","object"].indexOf(typeof t)>=0||t!==o||t&&o&&t.valueOf()!==o.valueOf()})))return!0}return!1},_createInternalTableRowDefinition:function(e){var t=this;return{cellDefinitions:Array.isArray(e.CellDefinitions)?e.CellDefinitions.map((function(e){var i=parseInt(e.Width);let a=parseInt(e.MinimumWidth),n=parseInt(e.MaximumWidth),o=+e.HorizontalAlignment,r=+e.VerticalAlignment,l=+e.HorizontalTitleAlignment,s=parseInt(e.WrapMode),d=+e.SymbolHeight,c=+e.SymbolWidth,u=e.TextSource?.toString(),p=e.SymbolIDSource?.toString();return{width:isNaN(i)?200:i,minimumWidth:isNaN(a)?void 0:a,maximumWidth:isNaN(n)?void 0:n,horizontalTextAlignment:isNaN(o)?void 0:o,horizontalTitleAlignment:isNaN(l)?void 0:l,verticalTextAlignment:isNaN(r)?void 0:r,wrapMode:isNaN(s)?void 0:s,symbolWidth:isNaN(c)?void 0:c,symbolHeight:isNaN(d)?void 0:d,titleText:(e.TitleText||e.Title)?.toString(),contentsFunc:t._tableRowDefinitionCellFillFunc.bind(t),rab_textSource:u||(null==p?"TableText":null),rab_textFormat:e.TextFormat?.toString()||null,rab_sortSource:e.SortSource?.toString()||u||"TableText",rab_symbolIDSource:p||null,rab_backgroundColor:e.BackgroundColor?.toString()||null,rab_backgroundColorSource:e.BackgroundColorSource?.toString()||null,rab_textColor:e.TextColor?.toString()||null,rab_textColorSource:e.TextColorSource?.toString()||null}})):null,contentsFunc:t._tableRowDefinitionRowFillFunc.bind(t),rab_data:e,rab_backgroundColor:e.BackgroundColor?.toString()||null,rab_textColor:e.TextColor?.toString()||null,rab_titleBackgroundColor:e.TitleBackgroundColor?.toString()||null,rab_titleTextColor:e.TitleTextColor?.toString()||null,rab_symbolColumnBackgroundColor:e.SymbolColumnBackgroundColor?.toString()||null}},_updateTableRowDefinitions:function(e){var t=this;t._tableRowDefinitionsMap[F]||(t._tableRowDefinitionsMap[F]={cellDefinitions:[{rab_textSource:"TableText",contentsFunc:function(){return t._tableRowDefinitionCellFillFunc.apply(t,arguments)}}],contentsFunc:function(){return t._tableRowDefinitionRowFillFunc.apply(t,arguments)}}),t.ganttView()?.updateTableRowDefinitions(Object.keys(t._tableRowDefinitionsMap).length?t._tableRowDefinitionsMap:void 0,e)},_tableRowDefinitionCellFillFunc:function(e){this.ganttView()?.__tableCellFillFunc(e)},_tableRowDefinitionRowFillFunc:function(e){e.tableWidget?this.ganttView()?._entitiesTableRowFillFunc(e):this.ganttView()?._tableRowFillFunc(e)},tableRowDefinitionsMap:function(){return this._tableRowDefinitionsMap},_getTableRowDefinitionsData:function(){var e=this,t=[];return Object.keys(this._tableRowDefinitionsMap).forEach((function(i){i!==F&&t.push(Object.assign({},e._tableRowDefinitionsMap[i].rab_data))})),t},calculateWorkingTime:function(e,t,i){var a=this._model.calendarByID(e);if(!a&&e)throw new Error(`[E${L.UNKNOWN_CALENDAR}] Calendar unknown`);return a&&(a=a.nCalendar),_.calculateWorkingTime(a,i,t)},addWorkingTime:function(e,t,i){var a=this._model.calendarByID(e);if(!a&&e)throw new Error(`[E${L.UNKNOWN_CALENDAR}] Calendar unknown`);if(a&&(a=a.nCalendar,!i&&a.determineTimeType(t)===f.NonWorkingTime)){var n=a.findStartOfCurrentTimeTypeInterval(t);if(!n||n.valueOf()===t.valueOf())return new Date(t)}let o=_.addWorkingTime(a,t,i);return this.getAPIOption("relativeDateModeEnabled")?s.dateToRelativeDateTimeString(o):o},_updateResourcesAndActivitiesThatAreUsingTheDefaultCalendar:function(e){var t=this,i=t.model(),a=t.getAPIOption("defaultCalendarID"),n=!1;if(t._viewInitialized&&(!e||e.some((function(e){var t;if((t="string"==typeof e?i.calendarByID(e):e)&&t.ID===a)return!0})))){var o=t.ganttView(),r=o?.viewModel(),l=o.viewType(),s=function(e,t,i){var a=e.call(r,i);if(a&&(a.updateFromReference(),l===t))return r.registerRowItem(a,!0,!1),!0},d=i.getChildrenArray(X);if(d.forEach((function(e){e.CalendarID||(e.curvesChanged(),s(r.resourceItem,M.Resources,e)&&(n=!0))})),(d=i.getChildrenArray($)).forEach((function(e){e.CalendarID||(e.curvesChanged(),s(r.skilledResourceItem,M.SkilledResources,e)&&(n=!0))})),t.getAPIOption("activityCalendarsEnabled"))i.getChildrenArray(x).forEach((function(e){!e.CalendarID&&s(r.activityItem,M.Activities,e)&&(n=!0)}));var c=t.getAPIOption("allocationRowsVisibleInActivitiesView");i.getChildrenArray(j).forEach((function(e){if(e.ResourceID){var t=i.resourceByID(h.compose(e,["ResourceRole","ResourceID"]));t&&!t.CalendarID&&(c&&s(r.allocationItem,M.Activities,e)&&(n=!0),(s(r.allocationItem,M.Resources,e)||s(r.allocationItem,M.SkilledResources,e))&&(n=!0))}}))}return n&&r.autoInvalidateRows(),n},_saveCalendarIDsOnAddedObjects:function(e,t){var i=this;Array.isArray(e)&&e.forEach((function(e){var a=i._model.getChildByData(t,e);a&&(a.rab_savedCalendarID=a.CalendarID)}))},_saveSavedCalendarIDs:function(e,t){var i=this,a=this._nonWorkingTimeCalendarIsDirty||this.getAPIOption("nonWorkingTimeVisible")?void 0:{};return a&&Array.isArray(e)&&e.forEach((function(e){var n=i._model.getChildByData(t,e);n&&(a[n.ID]=n.rab_savedCalendarID)})),a},_checkSavedCalendarIDsOfUpdatedObjects:function(e,t,i){var a=this;Array.isArray(e)&&e.forEach((function(e){var n=a._model.getChildByData(t,e);if(n){var o=n.rab_savedCalendarID=n.CalendarID;i&&i[n.ID]!==o&&(a._nonWorkingTimeCalendarIsDirty=!0)}}))},serializeCollapseStates:function(e){var t=this.ganttView();if(t){var i=e===M._Entities?t.entitiesTableWidget():t.ganttWidget();if(i){var a=t.viewModel(e===M._Entities).rowItemsRoot();if(a){var n=e===M.SkilledResources,o=e===M.Activities,r=i.saveCollapseStates(a,(function(e){return e.rab_itemType===w.AllocationRow?void 0:n?`${e.rab_itemType===w.Resource?"R":"S"}${e.data().getPrimaryKey()}`:o&&e.rab_itemType===w.Resource?e.data().getPrimaryKey():e.ID}),e===M._Entities?function(e,t){delete t.L}:function(e,t){e.rab_curvePanesVisible&&(t.c=!0)},!0);return JSON.stringify(r)}}}},deserializeCollapseStates:function(e,t){if(t){var i=this.ganttView();if(i){let l=e===M.SkilledResources,s=e===M.Activities,c=i._viewModels[e],u=c?.rowItemsRoot();if(u){(e===M._Entities?i.entitiesTableWidget():i.ganttWidget()).restoreCollapseStates(JSON.parse(t),u,(function(e){return e.rab_itemType===w.AllocationRow?void 0:l?`${e.rab_itemType===w.Resource?"R":"S"}${e.getPrimaryKey()}`:s&&e.rab_itemType===w.Resource?e.data().getPrimaryKey():e.ID}),e===M._Entities?void 0:function(t,a){(a.c??a.rab_curvePanesVisible)&&(c._expandOrCollapseCurvesInRowAtLast(t,!0,!1),e!==i.viewType()||s&&t.rab_itemType===w.Resource||i.invalidateRow(t))},!1),c.autoInvalidateRows(),i.update()}else{var a,n=JSON.parse(t),o=this.model(),r={[M._Entities]:o.entityByID,[M.Activities]:o.activityByID,[M.Resources]:o.resourceByID,[M.Loads]:o.resourceByID,[M.SkilledResources]:o.skilledResourceByID}[e]?.bind(o);r&&Object.keys(n).forEach((t=>{var i;if(i=l?"S"===t[0]?o.multipliedSkillByID(t.substring(1)):r(t.substring(1)):s&&t.includes(d)?o.resourceByID(t):r(`${d}${t}`)){var c=n[t];void 0!==c&&(void 0===a&&(a=void 0!==(c.R??c.L)),i.rab_cachedCollapseState=(a?c.R:c._isCollapsed)?1:0,e!==M._Entities&&(i.rab_cachedAllocationRowsCollapseState=(a?c.L:c._areLeavesCollapsed)?1:0),void 0!==(c.c??c.rab_curvePanesVisible)&&(i.rab_cachedAllocationRowsCollapseState=c.rab_curvePanesVisible?1:0))}}))}}}},isRenderingNecessary:function(){return!!this._renderTimerID},setViewOptionIndirectly:function(e,t,i,a){var n=this;i&&!n._viewInitialized?n._updateCache["viewType"===e?0:e.match(/ableViewWidth$/)?2:1].push({key:e,value:t}):n.view()&&n.view().setOption(e,t),a&&n._renderOnIdle()},_renderOnIdle:function(){var e=this;void 0===e._renderTimerID&&(e._renderTimerID=window.setTimeout((function(){e._renderTimerID=void 0,e.render()}),1))},render:function(){var e=this;if(!e._viewInitialized){let t,i,a=e.getAPIOption("start");a||(t=new Date,t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),e.handleWarning(V.REQUIRED_OPTION_UNSET,{name:"start",guessedValue:t}));let n=e.getAPIOption("end");n||(i=new Date((t||a).valueOf()+24192e5),e.handleWarning(V.REQUIRED_OPTION_UNSET,{name:"end",guessedValue:i})),t&&(e.setAPIOption("start",t),!i&&e.setAPIOption("startAndEnd",[t,n])),i&&(e.setAPIOption("end",i),e.setAPIOption("startAndEnd",[t||a,i]))}e._nonWorkingTimeCalendarIsDirty&&(e._viewInitialized&&!e.getAPIOption("nonWorkingTimeVisible")&&e.ganttView()?.hideNonWorkingTime(!0),e._nonWorkingTimeCalendarIsDirty=!1);var t=!e._viewInitialized;t&&(e._viewInitialized=!0,e._model._handleSettings(),e._view.init()),e._updateCache[1].forEach((function(t){t.key&&e._view.setOption(t.key,t.value)})),e._updateCache[2].forEach((function(t){e._view.setOption(t.key,t.value)})),e._clearCache(),t&&(e._view.initForViewType(e._viewType),e._initializeDateLinesForView()),e._view.preRender(),void 0!==e._renderTimerID&&(clearTimeout(e._renderTimerID),e._renderTimerID=void 0),e._view.render(t)},measuredRenderingTime:function(){},_clearCache:function(){this._updateCache=[[],[],[]]},scrollToObjectData:function(e,t,i,a){var n=this;return n.isRenderingNecessary()&&n.render(),n.view()?.scrollToObjectData(e,t,i,null==a||!!a)},scrollViewAreaHorizontally:function(e,t){var i=this;i.isRenderingNecessary()&&i.render();var a=i.ganttView();if(a){var n=t===C.Left?0:Number.MAX_VALUE;if(e===I.EntitiesTable){var o=a.entitiesTableWidget();o&&o.scrollTo(n)}else{var r,l,s=a.ganttWidget();switch(e){case I.Table:l=n;break;case I.TimeArea:r=n}s.scrollTo(l,r,void 0,void 0)}}},scrollViewAreaVertically:function(e,t){var i=this;i.isRenderingNecessary()&&i.render();var a=i.ganttView();if(a){var n=t===E.Top?0:Number.MAX_VALUE;if(e===D.EntitiesTable){var o=a.entitiesTableWidget();o&&o.scrollTo(void 0,n)}else{var r,l,s=a.ganttWidget();switch(e){case D.Main:r=n;break;case D.Top:l=n}s.scrollTo(void 0,void 0,r,l)}}},scrollToDate:function(e,t){var i=this;return i.isRenderingNecessary()&&i.render(),i.ganttView()?.ganttWidget().scrollTimeAreaViewToDate(e,!t,!1,t)},selectOrHighlightObjectsByObjectType:function(e,t,i,a){this.view()?.selectOrHighlightObjectsByObjectType(e,t,i,a)},getSelectedDataObjectsAndType:function(){var e,t=this.view();if(t){var i=t.getSelectedObjectsAndType();e={objectType:this.ganttView().getObjectTypeFromItem({rab_itemType:i.itemType}),objects:i.objects.map((function(e){return e.externalData()}))}}return void 0!==e.objectType&&(e.visualType=e.objectType===T.Allocation&&i.itemType!==w.AllocationRow||e.objectType===T.Activity&&i.itemType!==w.ActivityRow?B.Bar:B.Row),e},fitTimeAreaIntoView:function(e,t){var i=this;return i.isRenderingNecessary()&&i.render(),i.ganttView()?.fitTimeAreaIntoView(e,t,i._withinFirstCodeSequence)},setTimeResolutionForView:function(e,t,i){var a=this;return a.isRenderingNecessary()&&a.render(),a.ganttView()?.setTimeResolutionForView(e,t,i,a._withinFirstCodeSequence)},setCollapseStatesForRows:function(e,t,i,a,n){var o=this.ganttView();if(o){var r=i,l=a;if(null!=i?null==a&&(l=i):(r=0,l=Number.MAX_VALUE),e===M._Entities&&(n=A.Rows),[b.Collapsed,b.Expanded].includes(t))return o.expandOrCollapseAllRowsAtLevelRange(e??o.viewType(),t,r,l,n)}},saveAsPDF:function(e,t){return this.ganttView()?.saveAsPDF(e,t)},cancelSaveAsPDF:function(){return this.ganttView()?.cancelSaveAsPDF()},_getSupportedPageFormatsForPrinting:function(){return this.ganttView()?.getSupportedPageFormatsForPrinting()},getMetrics:function(){var e=this.model(),t={},i=[],a=function(e,t){var i=[];t.Objects=i;var a=e.getDescriptor();if(a){let t=function(e,t){return e.getPropertyName()<t.getPropertyName()?-1:1};var n=a.getSubDescriptorsArray();n&&n.length>0&&(n.sort(t),n.forEach((function(a,n){var o=a.getPropertyName();if(o){let l=e.getChildrenArray(o),s={Index:n,Name:o,Count:l.length};var r=a.getSubDescriptorsArray();if(r&&r.length>0){r.sort(t);let e=[];s.SubObjects=e,r.forEach((function(t,i){var a=t.getPropertyName();if(a){let t,n=0,o=999,r=0;l.forEach((function(e){let i=e.getChildrenArray(a);i&&(t=i.length,n+=t,o=Math.min(o,t),r=Math.max(r,t))}));let s=n>0?n/l.length:0;e.push({Index:i,Name:a,Sum:n,Min:999===o?0:o,Max:r,Average:s})}}))}i.push(s)}})))}};if(e){a(e,t);var n=this.view();n&&n._viewModels?.forEach((function(e,t){var n={};e._rowItemsRoot&&a(e._rowItemsRoot,n),i.push({Index:t,Type:e._viewType,IsInitialized:e.__dataReady,IsActive:null!=e._ganttViewPE,Objects:n.Objects})}))}return{Objects:t.Objects,ViewModels:i}}};e.exports=r.extendClass("rabApplication",o,ce)},6529:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(5674),o=n.nCalendar,r=n.TimeType,l=i(9276),s=new Map,d={postAddToParent:function(){this._super(),this.compile()},postUpdateSelf:function(){this._super(),this.compile()},compile:function(){var e=this,t=new o(r.NonWorkingTime);let i=this.Entries;if(i){let a=this._model.getOption("calendarEntryClass"),n=s.get(a);n||(n=new a,s.set(a,n)),i.forEach((function(i){n.store(i);var a=e._model.dateTimeValueToDate(n.Start),o=e._model.dateTimeValueToDate(n.End);a&&o&&t.allocateTimeSpan(a,o,n.TimeType)})),n.store(null)}this.nCalendar=t}},c=a.extendClass("rabCalendar",l,d);Object.defineProperty(c.prototype,"Entries",{get:function(){let e=this._data.Entries;return Array.isArray(e)?e:void 0}}),e.exports=c},7333:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(9276),o=a.extendClass("rabCalendarEntry",n,{construct:function(e,t,i,a){this._super(e,t,i,a)}});Object.defineProperty(o.prototype,"Start",{get:function(){return this._data.Start}}),Object.defineProperty(o.prototype,"End",{get:function(){return this._data.End}}),Object.defineProperty(o.prototype,"TimeType",{get:function(){return null==this._data.TimeType?1:+this._data.TimeType||2}}),e.exports=o},1296:()=>{},1094:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(1333),o={_barsChangedValueOnSetParentItem:!1,construct:function(e,t,i,a,n,o){this._bridgedParentItem=a,this._super(e,t,i,o),this.attachToParentItem(a,n)},dispose:function(e){this.detachFromParentItem(),this._super(e)},_createChild:function(e,t,i,a){var n,o;if(!a){n=t;var r=this.isBridgeEnabled()&&this._bridgedParentItem?this._bridgedParentItem:this;o=t.handleParentItem?t.handleParentItem(r,e,i):r}return this._createChildAtLast(this._viewModel,e,o,n)},_createChildAtLast:function(e,t,i,a){return new(a.getClassConstructor())(e,t,i,a)},attachToParentItem:function(e,t){if(e)return this.isBridgeEnabled()?void 0:e.attachChildItem(this,t)},detachFromParentItem:function(){var e=this.getParentItem();if(e)return e.detachChildItem(this)},attachChildItem:function(e,t){if(e)if(this.isBridgeEnabled()){if(this._bridgedParentItem)return this._bridgedParentItem.attachChildItem(e,t)}else{var i=e.getChildItemsPropNameInParent(),a=this[i];if(a||(a=this._registerProperty(i,[])),a.indexOf(e)<0){var n=e.getParentItem();return n&&n!==this&&e.detachFromParentItem(),t>=0&&t<a.length?a.splice(t,0,e):a.push(e),e.setParentItem(this),this.childItemAttached(e),this}}},detachChildItem:function(e){var t=this[e.getChildItemsPropNameInParent()];if(t){var i=t.indexOf(e);if(i>=0)return t.splice(i,1),e.setParentItem(void 0),this.childItemDetached(e),this}},getParentItem:function(){return this[this.getParentItemPropName()]},setParentItem:function(e){var t=this.getParentItemPropName(),i=!this.getChildItemsPropNameInParent().endsWith("TimeItems"),a=!i||"rab_rowItem"===t,n=a||this._barsChangedValueOnSetParentItem;i&&this[t]&&this._viewModel.registerRowItem(this[t],a,!a),this[t]=e,e?this.setHierarchyLevel(e.getHierarchyLevel()+1):this.setHierarchyLevel(void 0),i&&e&&this._viewModel.registerRowItem(e,n,!a)},getHierarchyLevel:function(){return this.__hierarchyLevel||0},setHierarchyLevel:function(e){this.__hierarchyLevel=e},getParentItemPropName:function(){},getChildItemsPropNameInParent:function(){},getSimilarChildItems:function(){var e=this.getChildItemsPropNameInParent();if(e)return this[e]},childItemAttached:function(e){this._descriptor&&this._descriptor.childItemAttached(this,e)},childItemDetached:function(e){this._descriptor&&this._descriptor.childItemDetached(this,e)},addOrRemoveChildWithParentSearch:function(e,t,i){var a=this,n=this._descriptor;if(n)if(n.getSubDescriptor(t))switch(e){case 1:return a.addChild(t,i);case 2:var o=i.getHierarchyParent();null!=o&&o.removeChild(i)}else{var r=n.getSubDescriptorsArray();r&&r.length>0&&r.forEach((function(n){var o=n.getPropertyName();if(o)if(n.getSubDescriptor(t))switch(e){case 1:var r=a._getHierarchyParentPrimaryKey(i);if(null!=r){var l=a.getChildByPrimaryKey(o,r);if(l){if(Array.isArray(l)){var s=[];return l.forEach((function(e){var a=e.addChild(t,i);s.push(a)})),s}return l.addChild(t,i)}}break;case 2:var d=i.getHierarchyParent();null!=d&&d.removeChild(i)}else{var c=a.getChildrenArray(o);if(c)switch(e){case 1:return s=[],c.forEach((function(a){var n=a.addOrRemoveChildWithParentSearch(e,t,i);s.push(n)})),s;case 2:c.forEach((function(a){a.addOrRemoveChildWithParentSearch(e,t,i)}))}}}))}},reassignParentItem:function(e){var t=this.getParentItem();return e!==t&&(t.detachChildItem(this),e.attachChildItem(this),!0)},recalculateParentItemForGrouping:function(){},redetectParentItem:function(e,t){var i=this._descriptor;if(i)return i.handleParentItem?i.handleParentItem(e,t):e},getNonPseudoParentItem:function(){var e=this.getParentItem();return e&&!0===e.isPseudo()?e.getNonPseudoParentItem():e}};e.exports=a.extendClass("rabChildItem",n,o)},4100:(e,t,i)=>{var a=i(7422),n={},o={calculateBarColors:function(e,t){var i=e+""+(t=t||"#F0F0F0"),o=n[i];if(o)return o;var r={workingTimeColor:e,nonworkingTimeColor:"#000000",borderColor:"#ff0000",textColor:"#000000"},l=new a(e),s=a.readability(r.workingTimeColor,"#FFFFFF"),d=l.toHsl(),c=d.l,u=d.s,p=u/2*100;l=l.desaturate(p);var h=(new a(t).toHsl().l-c)/2*100;return r.nonworkingTimeColor=l.lighten(h).toString(),r.borderColor=a(e).desaturate(10).darken(c<.5?-10:10).toString(),r.textColor=s>2?"#ffffff":"#000000",r.workingTimeColorLightness=c,r.workingTimeColorSaturation=u,n[i]=r,r},calculateBlackOrWhiteTextColor:function(e){var t=new a(e);return.2126*Math.pow(t.toRgb().r/255,2.2)+.7152*Math.pow(t.toRgb().g/255,2.2)+.0722*Math.pow(t.toRgb().b/255,2.2)<.38?"#ffffff":"#000000"},calculateMixedColor:function(e,t){if(!e||!t||"transparent"===e||"transparent"===t)return e;let i=new a(e).toRgb(),n=new a(t).toRgb(),o=n.a,r=1-o;return new a({r:i.r*r+n.r*o,g:i.g*r+n.g*o,b:i.b*r+n.b*o,a:i.a}).toString()}};e.exports=o},2422:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nSortedDatesWithValuesList,r=i(476).CurveType,l=i(5977)._roundPreservingPrecision,s=i(9276),d=new Map,c={construct:function(e,t,i,a){this._super(e,t,i,a),this.rab_lastCompileTime=0},updateSelf:function(e){this._super(e),this.rab_lastCompileTime=0},compile:function(e){var t=this;if(t.isDirty()&&(t.rab_lastCompileTime=0),!t.rab_lastCompileTime||e!==t.rab_compiledCurveCalendar){switch(t.Type){case r.PointCurve:t._compilePoints(),t.__determineMinMaxFromLoadEntries(t.rab_highestCurveData.values(),!1);break;case r.IntervalCurve:case r.AllocationCurve:break;case r.CurveStack:case r.CurveList:t._compileCurveCollection(e)}t.rab_compiledCurveCalendar=e,t.rab_lastCompileTime=Date.now()}},_isCollection:function(e){return e===r.CurveStack||e===r.CurveList},isDirty:function(){var e=this;if(!this.rab_lastCompileTime)return!0;if(this._isCollection(this.Type)&&Array.isArray(this.CurveIDs)){var t=function(i){return!i.rab_lastCompileTime||!i.CurveIDs.every((function(a){var n=e._model.curveByID(a);return!n||(e._isCollection(n.Type)?!t(n):n.rab_lastCompileTime&&n.rab_lastCompileTime<=i.rab_lastCompileTime)}))};return t(this)}return!1},__determineMinMaxFromLoadEntries:function(e,t){var i=this;t||(i.rab_minValue=i.ScaleMinimumValue,i.rab_maxValue=i.ScaleMaximumValue),e.forEach((function(e){isFinite(e.value)&&(i.rab_minValue>e.value&&(i.rab_minValue=e.value),i.rab_maxValue<e.value&&(i.rab_maxValue=e.value))})),t||isFinite(i.rab_maxValue)||(i.rab_minValue=0,i.rab_maxValue=1)},_compilePoints:function(){var e=this,t=o.ModificationType,i=new o({start:new Date(0),value:0},(function(e,i,a,n){if(e===t.InsertAtStartOfInterval)return{start:i,value:n};if(e===t.InsertAtEndOfInterval)return{start:i,value:0};if(e===t.ModifyInterval)a.value=n;else if(e===t.SplitAtEndOfInterval)return{start:i,value:a.value}})),a=o.DateInfinity,n=e.CurvePointEntries;if(n){let t=this._model.getOption("curvePointEntryClass"),o=d.get(t);o||(o=new t,d.set(t,o)),n.forEach((function(t){o.store(t);let n=o.PointInTime;if(n){var r=e._model.dateTimeValueToDate(n);r&&i.allocateTimeSpan(r,a,o.Value)}})),o.store(null)}(i=e._simplifySortedDatesWithValuesList(i)).rab_interpolationType=e.InterpolationType,i.rab_curveID=e.ID,i.rab_curveType=e.Type,e.rab_compiledCurveData=i,e.rab_highestCurveData=i},_simplifySortedDatesWithValuesList:function(e){var t,i,a=new o(0);return e.forEach((function(e,n,o){i&&i.value===o.value&&n||(i&&a.allocateTimeSpan(i.start,t,i.value),i=o),t=n})),a.convertValues((function(e,t){return{start:e,value:t}})),a},_determineDatesAndEntriesOfHighestCurve:function(){return this.rab_highestCurveData},_compileCurveCollection:function(e,t,i){var a=this,n=[],l=a.Type;if(Array.isArray(a.CurveIDs)&&a.CurveIDs.forEach((function(i){var s=a._model.curveByID(i);if(s){if(l===r.CurveStack&&s.Type===r.CurveList)return;if(s.Type===r.CurveStack)t=s._compileCurveCollection(e,t,l===r.CurveStack),n.push(...s.rab_compiledCurveData);else if(s.Type===r.CurveList)s._compileCurveCollection(e),n.push(...s.rab_compiledCurveData);else{s.compile(e);var d=s.rab_highestCurveData;d&&(t&&l===r.CurveStack&&((d=new o(d)).convertValues((function(e,t){return{start:e,value:t.value}})),a._addBiasToCurve(d,t),(d=a._simplifySortedDatesWithValuesList(d)).rab_interpolationType=s.InterpolationType,d.rab_curveID=s.ID,d.rab_curveType=s.Type),n.push(d),t=d)}}})),!i){if(a.rab_minValue=a.ScaleMinimumValue,a.rab_maxValue=a.ScaleMaximumValue,l===r.CurveStack){if(n.length){n.reverse();var s=n[0].values();s&&a.__determineMinMaxFromLoadEntries(s,!0)}}else Array.isArray(a.CurveIDs)&&a.CurveIDs.forEach((function(e){var t=a._model.curveByID(e);t&&(a._isCollection(t.Type)?(a.rab_minValue>t.rab_minValue&&(a.rab_minValue=t.rab_minValue),a.rab_maxValue<t.rab_maxValue&&(a.rab_maxValue=t.rab_maxValue)):a.__determineMinMaxFromLoadEntries(t.rab_compiledCurveData.values(),!0))}));isFinite(a.rab_maxValue)||(a.rab_minValue=0,a.rab_maxValue=1)}return a.rab_compiledCurveData=n.length?n:void 0,a.rab_highestCurveData=t,t},_addBiasToCurve:function(e,t){var i=o.ModificationType;e.setHandleInsertionFunction((function(e,t,a,n){if(e===i.InsertAtStartOfInterval){var o={start:t,value:a?l(a.value+n.value,a.value,n.value):n.value};return o}if(e===i.InsertAtEndOfInterval)return{start:t,value:l(a.value-n.value,a.value,n.value)};if(e===i.ModifyInterval)a.value=l(a.value+n.value,a.value,n.value);else if(e===i.SplitAtEndOfInterval)return(o=Object.assign({},a)).start=t,o})),t.forEach((function(t,i,a){e.allocateTimeSpan(t,i,a)}))},_compileIntervalCurve:function(){},_compileAllocationCurve:function(){}},u=n.extendClass("rabCurve",s,c);Object.defineProperty(u.prototype,"Type",{get:function(){return+this._data.Type||0}}),Object.defineProperty(u.prototype,"CurvePointEntries",{get:function(){let e=this._data.CurvePointEntries;return Array.isArray(e)?e:void 0}}),Object.defineProperty(u.prototype,"CurveIDs",{get:function(){return this._data.CurveIDs}}),Object.defineProperty(u.prototype,"FillColor",{get:function(){return this._getPropertyAsColorString(this._data.FillColor??this._data.PM_FillColor)}}),Object.defineProperty(u.prototype,"StrokeColor",{get:function(){return this._getPropertyAsColorString(this._data.StrokeColor??this._data.PM_StrokeColor)}}),Object.defineProperty(u.prototype,"StrokeDashArray",{get:function(){return this._data.StrokeDashArray??this._data.PM_StrokeDashArray}}),Object.defineProperty(u.prototype,"OverloadColor",{get:function(){return this._getPropertyAsColorString(this._data.OverloadColor??this._data.PM_OverloadColor)}}),Object.defineProperty(u.prototype,"InterpolationType",{get:function(){return this._data.InterpolationType??this._data.PM_InterpolationType??0}}),Object.defineProperty(u.prototype,"ScaleMaximumValue",{get:function(){var e=this._data.ScaleMaximumValue;return isNaN(e)?Number.NEGATIVE_INFINITY:e}}),Object.defineProperty(u.prototype,"ScaleMinimumValue",{get:function(){var e=this._data.ScaleMinimumValue;return isNaN(e)?1/0:e}}),e.exports=u},8445:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(9276),o=a.extendClass("rabCurvePointEntry",n,{construct:function(e,t,i,a){this._super(e,t,i,a)}});Object.defineProperty(o.prototype,"PointInTime",{get:function(){return this._data.PointInTime}}),Object.defineProperty(o.prototype,"Value",{get:function(){return this._getPropertyAsNumber(this._data.Value)}}),e.exports=o},476:(e,t,i)=>{var a=i(3571).WarningCode,n=i(9280),o=n.PatternType,r=n.WarningCode,l=i(5674).WarningCode,s={Regular:0,Summary:1,Diamond:2,Rectangle:3,Symbol:4},d=1e3,c={TimeArea:-2,Timescale:-1,Root:0,Activity:1,ActivityEntry:1.5,Allocation:2,AllocationEntry:3,AllocationRow:4,Resource:5,Link:6,Curve:7,ActivityRow:8,ActivityReleaseDate:9,ActivityDueDate:10,ActivityBaseline:11,ActivityFrame:12,Entity:13,PeriodHighlighter:14,PeriodHighlighterEntry:19,DateLine:16,Skill:22},u={ViewType:{_Minimum:-1,_Entities:-1,Activities:0,Resources:1,Loads:2,SkilledResources:3,_Maximum:3},CustomItemTypeMinimum:1e3,CustomItemTypeMaximum:1019,ItemType:c,TableType:{Gantt:0,Entities:1},TimescaleNavigationMode:{Latest:0,LegacyVersion1:1},TimescaleNavigationModeToVersionMap:{0:2,1:1},DateLineGridModes:{None:0,Auto:1,Weekly:2,Daily:4},RowDesigns:{None:0,Empty:0,Bars:1,Optimized:2,BarsStacked:2,BarsInHiddenDescendantRows:4,CalendarGrid:8},AllocationBarDesign:{Allocation:0,Entries:1,AllocationAndEntries:2,MergedEntries:3,GroupedEntries:4},UpdateModes:{UpdateOnly:0,Default:0,ImplicitAddObjects:1,DifferentialValues:2},BarDragModes:{None:0,DragStart:1,DragEnd:2,DragHorizontally:4,DragVertically:8,DragAutoHorOrVer:16,DragSmartHorOrVer:256},RowDragModes:{None:0,DragVertically:8,DragOutside:32,DragOnSameLevelOnly:64,DragInSameTableParentOnly:128},VisualType:{Background:-1,Bar:0,Row:1,Curve:2,Link:3,PeriodHighlighter:4,CalendarGrid:4,DateLine:5,Timescale:6},VisualSubtype:{ActivityDueDateSymbol:1,ActivityReleaseDateSymbol:2},TableCellType:{Text:1,ImageList:4},BarShape:s,ActivityBarShape:s,AllocationBarShape:s,DateLineCaptionPosition:{Left:1,Center:2,Right:4,TopLeft:9,TopCenter:10,TopRight:12},DateLineCaptionOrientation:{Horizontal:1,Vertical:2},LinkMarker:{None:0,FilledArrow:1},LinkRoutingType:{Curved:1,Orthogonal:2},ProgressBarWidthCalculationMode:{ConsiderWorkingTimesOnly:0,ConsiderWorkingAndNonworkingTimes:1},TextWrapMode:{None:0,Line:1,Word:2},CurveType:{PointCurve:0,CurveStack:3,CurveList:4},CurveInterpolationType:{StepAfter:0,Linear:1},PaneIndex:{LoadCurve:0,InventoryCurve:1,Bars:2},SelectionBehavior:{Framing:0,Highlighting:1},TargetPositions:{None:0,Left:1,HCenter:2,Right:4,Top:8,VCenter:16,Bottom:32,NoHScroll:64},WorldViewPosition:{Left:1,Right:2,Top:3,Bottom:4},SelectionChangedReason:{Click:0,BackgroundClick:1,ContextMenu:2,DragStart:3},ViewArea:{Top:-1,Main:0,Default:0},HorizontallyScrollableViewArea:{Table:0,TimeArea:1,EntitiesTable:2},VerticallyScrollableViewArea:{Top:-1,Main:0,EntitiesTable:2},HorizontalScrollPosition:{Left:1,Right:2},VerticalScrollPosition:{Top:1,Bottom:2},PatternType:o,TreeVisualizationMode:{ColoredIndentation:0,TreeViewLines:1},BarSortMode:{StartAndEnd:0,ByCompareObjects:1,ByCompareObjectsOnSameStart:2},TimescaleInteractionModes:{None:0,ScrollingByButtons:1,Rescaling:2,Default:3},TimeUnit:{Seconds:0,Minutes:1,Hours:2,Days:3,Weeks:4,Months:5,Quarters:6,Years:7},RowSortMode:{None:0,Ascending:1,Descending:2,AscendingStartAndEnd:3},BarDesigns:{Simple:0,Entries:1,ComplexShape:2,Symbols:4,Status:8,Constraints:16,ReleaseAndDueDate:32,Baseline:64,ProgressAndPredictedEnd:128,Text:256,TonedDownColoring:65536,ReducedHeight:1<<17,Default:65535,DefaultReduced:16711680},CollapseState:{Unchanged:-1,Expanded:0,Collapsed:1},CollapseStateTargets:{Default:1,Rows:1,AllocationRows:2,CurvePanes:4},DayOfWeek:{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},WarningCode:{MISCELLANEOUS:0,PRIMARY_KEY_EMPTY_AT_INDEX:1e3,PRIMARY_KEY_NOT_EXISTING_AT_INDEX:1001,PRIMARY_KEY_EXISTING_AT_INDEX:1002,PRIMARY_KEY_DUPLICATE_AT_INDEX:1003,RELATED_PRIMARY_KEY_CYCLIC:1010,RELATED_PRIMARY_KEY_NOT_EXISTING_AT_INDEX:1011,REFERENCE_IDENTICAL_ON_UPDATE:1020,PRIMARY_KEY_NOT_EXISTING:1021,OBJECT_NOT_VISIBLE_IN_VIEW:1022,OPTION_NAME_UNKNOWN:1100,REQUIRED_OPTION_UNSET:1101,...Object.fromEntries(Object.entries(a).map((e=>["APPTOOLS__"+e[0],e[1]]))),...Object.fromEntries(Object.entries(r).map((e=>["TABLE__"+e[0],e[1]]))),...Object.fromEntries(Object.entries(l).map((e=>["GANTT__"+e[0],e[1]])))},WarningBias:d};u.ObjectType={TimeArea:c.TimeArea,Timescale:c.Timescale,Activity:c.Activity,Allocation:c.Allocation,AllocationEntry:c.AllocationEntry,Resource:c.Resource,Skill:c.Skill,Link:c.Link,Curve:c.Curve,Entity:c.Entity,CalendarGrid:c.PeriodHighlighter,PeriodHighlighter:c.PeriodHighlighter,Symbol:15,DateLine:c.DateLine,TooltipTemplate:17,TableRowDefinition:18,TableRowDefinitions:18,Calendar:20,HierarchySupplementaryDefinition:21},u.ActivityBarShapes=u.ActivityBarShape,e.exports=u},5265:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nStructuralDataDescriptor,r=a.nStructureType,l=i(5674).HorizontalAlignment,s=i(476),d=s.ItemType,c=s.ViewType,u=s.ObjectType,p=s.TableType,h=i(5977),g=h.PrimaryKeyInfos,m=h.RAB_ROOT_PROP_NAME,_=h.RAB_ENTITIES_PROP_NAME,f=h.RelationshipInfos,y=h.RowCategory,b=i(9044),A=i(371),v={construct:function(e,t,i){this._super(e,t,c._Entities,i),this.__TableType=p.Entities},_specifyCategorizedParams:function(){this._super(),this.__CategorizedParams.ChildrenName[y.ChildRow]=_,this.__CategorizedParams.RowSortCodePropertyNameAPIOptionName[y.ChildRow]="entityRowSortCodePropertyName",this.__CategorizedParams.RowSortModeAPIOptionName[y.ChildRow]="entityRowSortMode",this.__CategorizedParams.RowItemsType[y.ChildRow]=d.Entity},_collectAPIOptions:function(e){e[1].push(["defaultValuesForEntityProperties","entityHierarchySupplementaryDefinitionID","entitiesTitleText","entitiesTableSymbolColumnWidth","entitiesTableSymbolColumnVisible","entitiesTableSymbolColumnTitleBackgroundColor","entitiesTableSymbolColumnTitleSymbolIDs","entitiesTableSymbolColumnTitleVisible","entitiesTableTitleBackgroundColor","entitiesTableSymbolColumnBackgroundColor","defaultEntityTableRowDefinitionID","tableRowDefinitionIDForTitleInEntitiesTable","entitiesTableWidth","entitiesTableViewWidth","entityRowSortMode","entityRowSortCodePropertyName","compareEntities","visibilityFilterForEntities"]),this._super(e)},_handleAPIOptionChanged:function(e,t,i,a){var n=this;switch(e){case"defaultValuesForEntityProperties":this._model.entities().forEach((function(e){n.updateEntity(e)})),this.delegateToGanttView((function(e){e.entitiesTableWidget().invalidateAllRows(),e.update()}));break;case"entityHierarchySupplementaryDefinitionID":this._updateGrouping(_,"removeEntities"),this.delegateToGanttView((function(e){e.update()}));break;case"entitiesTitleText":this._tableDefinition.titleText=t,this.delegateToGanttView((function(e){var t=e.entitiesTableWidget().option("tableDefinition");t&&(t.titleText=this._tableDefinition.titleText,e.entitiesTableWidget().updateTableTitle(!0))}));break;case"entitiesTableTitleBackgroundColor":this._tableDefinition.symbolColumnTitleVisible||(this._tableDefinition.symbolColumnTitleBackgroundColor=t||"#646464",this.delegateToGanttView((function(t){t.entitiesTableWidget().updateTableTitle(),t._setColorByOptionValue(e)})));break;case"defaultEntityTableRowDefinitionID":this._setDefaultTableRowDefinitionIDForItemType(d.Entity,t);break;case"tableRowDefinitionIDForTitleInEntitiesTable":this._tableDefinition.rowDefinitionIDWithColumnTitles=t,this.delegateToGanttView((function(e){e.entitiesTableWidget().updateTableTitle(!0)}));break;case"entitiesTableSymbolColumnBackgroundColor":this._tableDefinition.symbolColumnTitleVisible&&(this._tableDefinition.symbolColumnTitleBackgroundColor=n.getAPIOption("entitiesTableSymbolColumnTitleBackgroundColor")||t||"white",this.delegateToGanttView((function(e){e.entitiesTableWidget().updateTableTitle()}))),this.delegateToGanttView((function(e){e.entitiesTableWidget().invalidateAllRows(),e.update()}));break;case"entitiesTableSymbolColumnVisible":this._addOrRemoveSymbolColumnInTableDefinition(this._tableDefinition,t,this.getAPIOption("entitiesTableSymbolColumnWidth"))&&this.delegateToGanttView((function(e){e.entitiesTableWidget().option("tableDefinition",this._tableDefinition),e._setEntitiesTableWidthOptions()}));break;case"entitiesTableSymbolColumnWidth":null==t&&(t=22),t=Math.max(t,22),this._addOrRemoveSymbolColumnInTableDefinition(this._tableDefinition,this.getAPIOption("entitiesTableSymbolColumnVisible"),t)&&this.delegateToGanttView((function(e){e.entitiesTableWidget().option("tableDefinition",this._tableDefinition),e._setEntitiesTableWidthOptions()}));break;case"entitiesTableSymbolColumnTitleBackgroundColor":this._tableDefinition.symbolColumnTitleVisible&&(this._tableDefinition.symbolColumnTitleBackgroundColor=t||n.getAPIOption("entitiesTableSymbolColumnBackgroundColor")||"white",this.delegateToGanttView((function(e){e.entitiesTableWidget().updateTableTitle()})));break;case"entitiesTableSymbolColumnTitleVisible":this._tableDefinition.symbolColumnTitleVisible=t,this._tableDefinition.symbolColumnTitleBackgroundColor=t?this.getAPIOption("entitiesTableSymbolColumnTitleBackgroundColor")||n.getAPIOption("entitiesTableSymbolColumnBackgroundColor")||"white":this.getAPIOption("entitiesTableTitleBackgroundColor")||"#646464",this.delegateToGanttView((function(e){e.entitiesTableWidget().updateTableTitle()}));break;case"entitiesTableSymbolColumnTitleSymbolIDs":this.delegateToGanttView((function(e){JSON.stringify(i)!==JSON.stringify(t)&&this._setTableDefinitionsImageURLs(this._tableDefinition,e._getImageURLsForEntitiesTableWidget(t))&&e.entitiesTableWidget().updateTableTitle()}));break;case"entitiesTableWidth":this.delegateToGanttView((function(e){e._setEntitiesTableWidthOptions()}));break;case"entitiesTableViewWidth":this.delegateToGanttView((function(e){e._resizeWidgets(!0)}));break;case"entityRowSortCodePropertyName":case"entityRowSortMode":this.updateTableTitleSortingParams(y.ChildRow);case"compareEntities":this._initializeCompareObjects(_);break;case"visibilityFilterForEntities":this.determineVisibilityOfAllRowObjects(_,void 0,!0);break;default:this._super(e,t,i,a)}},_initDataDefinition:function(){var e=this,t=this._dataDescriptors={};t[m]=new o(m,null);t[_]=new b(this,_,this.model().getOption("entityClass"),this._options.entityRowItemClass,g[_],f[_],{structureType:r.Parent,relationshipInfos:f[_][0]},void 0,{enableInheritChangedRelationships:!0},{getHierarchySupplementaryDefinitionIDFunc:function(){return e.getHierarchySupplementaryDefinitionID()},getSourceValueForGroupingCodeSourceFunc:function(t,i,a,n,o,r){return e.getSourceValueForGroupingCodeSource(u.Entity,t,i,a,n,o,r)}}),t[m].addSubDescriptor(t[_])},getHierarchySupplementaryDefinitionID:function(){return this.getAPIOption("entityHierarchySupplementaryDefinitionID")},updateHierarchyByHierarchySupplementaryDefinition:function(e){this._dataDescriptors&&e&&e.ID&&e.ID===this.getHierarchySupplementaryDefinitionID()&&this._updateGrouping(_,"removeEntities")},_invalidateRow:function(e,t){this.ganttView()?.invalidateEntityRow(e,t)},_initTableDefinition:function(){var e,t=this;t._super();var i=t.getAPIOption("entitiesTableSymbolColumnTitleSymbolIDs");let a=t.getAPIOption("entitiesTableSymbolColumnTitleVisible");a&&(e=t.ganttView()._getImageURLsForEntitiesTableWidget(i)),t._tableDefinition={titleText:t.getAPIOption("entitiesTitleText"),baseLevel:{className:"",contentsFunc:function(){return t._entitiesTableRowFillFunc.apply(t,arguments)},cellDefinitions:[{className:"",width:200,contentsFunc:function(){return t._entitiesTableCellFillFunc.apply(t,arguments)},horizontalTextAlignment:l.Left}]},symbolColumnTitleImageURLs:e,symbolColumnTitleVisible:a,symbolColumnTitleBackgroundColor:a?t.getAPIOption("entitiesTableSymbolColumnTitleBackgroundColor")||t.getAPIOption("entitiesTableSymbolColumnBackgroundColor")||"white":t.getAPIOption("entitiesTableTitleBackgroundColor")||"#646464",rowDefinitionIDWithColumnTitles:t.getAPIOption("tableRowDefinitionIDForTitleInEntitiesTable"),rowSortMode:t.getAPIOption("entityRowSortMode"),rowSortPropertyName:t.getAPIOption("entityRowSortCodePropertyName")},t._addOrRemoveSymbolColumnInTableDefinition(t._tableDefinition,t.getAPIOption("entitiesTableSymbolColumnVisible"),t.getAPIOption("entitiesTableSymbolColumnWidth")),t.updateTableRowDefinitions(t.app().tableRowDefinitionsMap(),!1)},setTableDefinitionIntoWidget:function(e){this._super.apply(this,arguments),this._setDefaultTableRowDefinitionIDForItemType(d.Entity,this.getAPIOption("defaultEntityTableRowDefinitionID")),e.option("defaultExternalType",d.Entity)},_initializeAllCompareObjects:function(){this._initializeCompareObjects(_)},__rawGetWidget:function(e){return e?.entitiesTableWidget()},addEntity:function(e){var t=this.addChild(e);return this._expandOrCollapseRowByCollapseState(e),t},updateEntity:function(e){this.__relationshipChanged=0,this._updateRowObject(e),this.__relationshipChanged>0&&this.getHierarchySupplementaryDefinitionID()&&this._removeUnnecessaryPseudoGroups(_,"removeEntities",c._Entities),delete this.__relationshipChanged,this._expandOrCollapseRowByCollapseState(e),this._checkDescendantObjectsForClassification(e)},removeEntity:function(e,t){if(t){var i=this.entityItem(e);i&&(delete i.childRowItems,delete i.detailingRowItems)}this.removeChild(e),t||this._checkChildItemsArraysInAncestors(),delete this._temporaryAncestorItemsByRowID},getItemInfoForItemType:function(e,t){var i,a;if(this._rowItemsRoot){if(e===d.Entity)a=this.getPrimaryKeyByObjectDataOrID(t,_),i=this.model().getChildByPrimaryKey(_,a);return this.buildItemInfo(a,i)}}};e.exports=n.extendClass("rabEntitiesViewModel",A,v)},4859:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(8882),o=a.extendClass("rabEntity",n,{_modificationClassificationByProperty:{Duration:2},_getDefaultObjectPropName:function(){return"defaultValuesForEntityProperties"}}),r=o.prototype;r.defineProperty("Duration",{get:function(){return this._getPropertyAsNumber(this._data.Duration)}}),r.defineProperty("SuitableActivityIDs",{get:function(){var e=this._data.SuitableActivityIDs;return Array.isArray(e)?e:null!=e?[e.toString()]:void 0}}),r.defineProperty("SuitableResourceIDs",{get:function(){var e=this._data.SuitableResourceIDs;return Array.isArray(e)?e:null!=e?[e.toString()]:void 0}}),e.exports=o},214:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(476).ItemType,o=i(8037),r=(i(4859),{construct:function(e,t,i,a){this._super(n.Entity,e,t,i,void 0,a)},postUpdateSelf:function(){var e=!0;if(this.getAPIOption("updateOptimizationEnabled")){var t=this.data();t&&!t.rab_modificationClassification||(e=!1)}e&&(this.rab_heightPropertyHasChanged&&(this._viewModel.registerRowItem(this,!0),delete this.rab_heightPropertyHasChanged),this._super())},updateFromReference:function(e){var t=this._super(e),i=this.data(),a=i.model();i.isPseudo()||(this.rowInteractions=i.AllowedRowDragModes),this.duration=i.Duration,this.calendar=this.getAPIOption("ignoreCalendarOnAllocationBarInteractions")||this.getAPIOption("ignoreCalendarOnActivityBarInteractions")?a.fullWorkingTimeNWAFCalendar():void 0;var n=this.minimumHeight;return this.minimumHeight=i.MinimumRowHeight,this.rab_heightPropertyHasChanged=this.rab_heightPropertyHasChanged||n!==this.minimumHeight,t}});e.exports=a.extendClass("rabEntityRowItem",o,r)},9199:(e,t,i)=>{var a=i(8680),n=i(3571),o=n.nD3MigrationHelper.transform,r=n.nClass,l=n.nClassFactory,s=n.nDateHelper,d=n.nDebugHelper,c=n.nDefaultSeparator,u=n.nDOMHelper.eventListenerHelper,p=n.nEventDispatcher,h=n.nFileSaver,g=n.nImageHelper,m=n.nOSDetector,_=n.nOverlayArea,f=n.nPropertyComposer,y=n.nScrollBarWidthDetector,b=n.nSplitterWidget,A=n.nStringHelper,v=n.nSubsequentIDGenerator,I=n.nTooltipWidget,C=i(9280),w=C.RowInsertionMode,T=C.RowInteractions,R=C.nTableWidget,S=i(5674),P=S.BarInteractions,O=S.BarType,D=S.DateLineGridRecurrence,E=S.ElemType,M=S.LinkType,B=S.nCalendarHelper,k=S.nGanttWidget,V=S.nTimeAxis,N=S.TableRowDefinitionType,F=S.TimeType,L=S.TimeUnit,W=i(476),x=W.CollapseState,j=W.CollapseStateTargets,H=W.CustomItemTypeMinimum,G=W.CustomItemTypeMaximum,K=W.SelectionChangedReason,U=W.ViewArea,z=W.WarningCode,Y=i(5977),X=Y._activityBarShapesMap,$=Y._allocationBarShapesMap,q=Y._UnifiedBarDesigns,Q=Y._rabTimeUnitToTimeUnit,Z=Y._roundPreservingPrecision,J=Y.RAB_ACTIVITIES_PROP_NAME,ee=Y.RAB_ALLOCATIONS_PROP_NAME,te=Y.RAB_CALENDARS_PROP_NAME,ie=Y.RAB_CLASS_PREFIX,ae=Y.RAB_ENTITIES_PROP_NAME,ne=Y.RAB_GANTT_VIEW_CLASS,oe=Y.RAB_MULTIPLIED_RESOURCES_BY_ACTIVITIES_PROP_NAME,re=Y.RAB_MULTIPLIED_SKILLS_PROP_NAME,le=Y.RAB_PERIOD_HIGHLIGHTERS_PROP_NAME,se=Y.RAB_RESOURCES_PROP_NAME,de=Y.RAB_SKILLED_RESOURCES_PROP_NAME,ce=i(4100),ue=i(4613),pe=i(3786),he=i(9721),ge=i(9276);const me=i(4859);var _e=W.BarSortMode,fe=W.CurveType,ye=W.CurveInterpolationType,be=W.ViewType,Ae=W.ItemType,ve=W.ObjectType,Ie=W.TableType,Ce=W.TableCellType,we=W.TextWrapMode,Te=W.PaneIndex,Re=W.SelectionBehavior,Se=W.TargetPositions,Pe=ie+"activities-view",Oe=ie+"activity-baseline",De=ie+"activity-due-date",Ee=ie+"activity-release-date",Me=ie+"bar-symbol",Be=ie+"prefix-bar-symbol",ke=ie+"capacity-curve-area",Ve=ie+"capacity-curve-line",Ne=ie+"current-date-area",Fe="rab-currentDateArea",Le=ie+"current-date-line",We="rab-currentDateLine",xe=ie+"curve-axis",je=ie+"curve-button",He=Y.RAB_CURVE_CONTAINER_CLASS,Ge=ie+"curves-parent",Ke=ie+"curve-line-hot-region",Ue=ie+"curve-pane-splitter",ze=ie+"curve-pane-splitter-rect",Ye=ie+"daily-dlg",Xe=ie+"due-date-symbol",$e=ie+"earliest-drag-date-area",qe=$e,Qe=ie+"entities-table",Ze=ie+"entities-splitter",Je=ie+"gc",et=ie+"gc-level",tt=ie+"dgc",it=ie+"dgc-level",at=ie+"inventory-curve-area",nt=ie+"inventory-curve-container-rect",ot=ie+"inventory-x-axis",rt=ie+"latest-drag-date-area",lt=rt,st=ie+"left-bar-symbol",dt=ie+"load-curve-area",ct=ie+"load-curve-container-rect",ut=ie+"load-hor-line",pt=ie+"load-x-axis",ht=ie+"loads-view",gt=ie+"overload-curve-area",mt=ie+"overload-mask",_t=ie+"overload-pattern",ft=ie+"release-date-symbol",yt=ie+"release-due-date-line",bt=ie+"resources-view",At=ie+"right-bar-symbol",vt=ie+"row-base-level",It=ie+"row-level",Ct=ie+"skilled-view",wt=ie+"status-1",Tt=ie+"status-2",Rt=ie+"status-3",St=ie+"status-4",Pt=ie+"status-indicator",Ot=ie+"text-background-filter",Dt="."+ie+"tooltip",Et=ie+"tooltip-pos-anchor",Mt=ie+"top-left-bar-symbol",Bt=ie+"top-right-bar-symbol",kt=ie+"vertical-splitter",Vt=ie+"weekly-dlg",Nt=ie+"work-date-line",Ft="rabview_workDateLine",Lt=ie+"x-axis",Wt=-.5,xt=.5,jt=[{start:new Date(0),value:0}],Ht="rab_tscf",Gt={A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]},Kt={_barSymbolExtent:12,construct:function(e,t,i,o,r){var l=this;this._app=e,this._view=t,this._viewModels=i,this._viewModel=void 0,this._entitiesViewModel=void 0,this._initOptions(r),r=l._options,this._divD3=a.select(o);var s=this._divD3.append("div").attr("tabindex",-1).node();this._ganttWidget=null,this._entitiesTableWidget=null,this._curvePaneSplitterWidgetDivD3=this._divD3.append("svg"),this._curvePaneSplitterWidget=null,this._nonWorkingTimeCalendar=void 0,this._weekendCalendar=void 0,this._viewOffsetForCurrentDateCurrentlyObserved=!1,this._viewOffsetForCurrentDateCurrentlyNotObservedTimer=void 0,this._currentSymbolIDsMap={},this._defaultLinkType=M.EndStart,l.getAPIOption("triggeringOfOnClickedInTimeAreaOfRow")?l._curveTapEventClassNames=p.TAP_EVENT_CLASS_NAME+" "+p.DOUBLE_TAP_EVENT_CLASS_NAME:l._curveTapEventClassNames=p.QUICK_TAP_EVENT_CLASS_NAME;let d=l.model();var c={updateSuspended:!0,transitionDuration:0,linksWithDanglingBarsVisible:this.getAPIOption("linksWithDanglingStartOrEndVisible"),locale:this.app().locale(),timeZone:this.getAPIOption("timeZone"),relativeDateModeEnabled:this.getAPIOption("relativeDateModeEnabled"),dateLineGridColor:this.getAPIOption("dateLineGridColor"),dateLineGridDashArray:this.getAPIOption("dateLineGridDashArray"),dateLineGridWidth:this.getAPIOption("dateLineGridWidth"),dateLineGrids:[{timeType:D.Weekly,className:Vt}],treeLinesVisible:l.getAPIOption("treeVisualizationMode"),separationLinesBetweenGroupCells:l.getAPIOption("separationLinesInColoredIndentation"),defaultRowMainHeightsByExternalTypeMap:{[Ae.Skill]:l.getAPIOption("defaultSkillMinimumRowHeight"),[Ae.ActivityRow]:l.getAPIOption("defaultActivityMinimumRowHeight"),[Ae.Resource]:l.getAPIOption("defaultResourceMinimumRowHeight"),[Ae.AllocationRow]:l.getAPIOption("defaultAllocationMinimumRowHeight")},defaultRowInteractionsByExternalTypeMap:{[Ae.Skill]:l.getAPIOption("defaultSkillAllowedRowDragModes"),[Ae.ActivityRow]:l.getAPIOption("defaultActivityAllowedRowDragModes"),[Ae.Resource]:l.getAPIOption("defaultResourceAllowedRowDragModes"),[Ae.AllocationRow]:l.getAPIOption("defaultAllocationAllowedRowDragModes")},forcedRowInteractionsByExternalTypeMap:{[Ae.Skill]:l.getAPIOption("forcedSkillAllowedRowDragModes"),[Ae.ActivityRow]:l.getAPIOption("forcedActivityAllowedRowDragModes"),[Ae.Resource]:l.getAPIOption("forcedResourceAllowedRowDragModes"),[Ae.AllocationRow]:l.getAPIOption("forcedAllocationAllowedRowDragModes")},defaultRowItemCollapsibleByExternalTypeMap:{[Ae.Skill]:l.getAPIOption("defaultSkillRowCollapsible"),[Ae.ActivityRow]:l.getAPIOption("defaultActivityRowCollapsible"),[Ae.Resource]:l.getAPIOption("defaultResourceRowCollapsible")},defaultRowItemDetailingCollapsibleByExternalTypeMap:{[Ae.ActivityRow]:l.getAPIOption("defaultActivityAllocationRowsCollapsible"),[Ae.Resource]:l.getAPIOption("defaultResourceAllocationRowsCollapsible")},defaultRowItemSelectableByExternalTypeMap:{[Ae.Skill]:l.getAPIOption("defaultSkillRowSelectable"),[Ae.ActivityRow]:l.getAPIOption("defaultActivityRowSelectable"),[Ae.Resource]:l.getAPIOption("defaultResourceRowSelectable"),[Ae.AllocationRow]:l.getAPIOption("defaultAllocationRowSelectable")},defaultRowCollapsedDisplayedElementsByExternalTypeMap:{},defaultRowExpandedDisplayedElementsByExternalTypeMap:{},defaultBarType:O.StartEnd,barSortModeForOptimizedDisplayedElements:l.getAPIOption("compareObjects")?l.getAPIOption("barSortModeForOptimizedRowDesign"):_e.StartAndEnd,barDragAreaExtent:4,editable:l.getAPIOption("editable"),timeItemsEditableInCollapsedRows:!0,timeItemsSelectable:!0,linkItemsSelectable:!0,rowItemsSelectable:!0,separateBarShapeOutlinesEnabled:!0,differentiationBetweenEmptyArrayAndUndefined:!0,contextMenuEventOnRowItemInTimeArea:l.getAPIOption("triggeringOfOnShowContextMenuInTimeAreaOfRow"),tapEventOnRowItemInTimeArea:l.getAPIOption("triggeringOfOnClickedInTimeAreaOfRow"),preventDefaultOnContextMenuEvents:l.getAPIOption("preventDefaultOnContextMenuEvents"),constraintSymbolsInMargin:!0,titleHeight:l.getAPIOption("tableTitleAndTimescaleHeight"),topRowMargin:l.getAPIOption("topRowMarginInTimeArea"),bottomRowMargin:l.getAPIOption("bottomRowMarginInTimeArea"),subRowDistance:l.getAPIOption("subRowDistanceInTimeArea"),cellContentTopOffset:l.getAPIOption("tableCellContentTopOffset"),automaticDraggingOfSelectedTimeItems:l.getAPIOption("multipleBarDraggingEnabled"),worldViewSelectionColor:l.getAPIOption("selectionColor"),timeItemsSelectableByRectangle:l.getAPIOption("multipleSelectionEnabled"),itemHighlightingColor:l.getAPIOption("objectHighlightingColor"),itemHighlightFlashingEnabled:l.getAPIOption("objectHighlightFlashingEnabled"),asynchronousInteractiveTimeAreaStretching:l.getAPIOption("asynchronousInteractiveTimeAreaStretching"),asynchronousRendering:l.getAPIOption("asynchronousRendering"),scrollOffsetsChangedFuncTimeDelay:l.getAPIOption("scrollOffsetsChangedCallbackTimeDelay"),groupCellsWithHorizontalSeparationLine:l.getAPIOption("groupCellsWithHorizontalSeparationLine"),enrichClassFunc:l._enrichClassFunc.bind(l),timeAreaRowFillFunc:l._timeAreaRowFillFunc.bind(l),timeAreaRowUpdateFunc:l._timeAreaRowUpdateFunc.bind(l),rowExpandedOrCollapsedFunc:l._rowExpandedOrCollapsedFunc.bind(l),rowExpandOrCollapseFunc:l._rowExpandOrCollapseFunc.bind(l),createBarFunc:l._processCreateBarFunc.bind(l),positionBarFunc:l._processPositionBarFunc.bind(l),positionLinkFunc:l._positionLinkFunc.bind(l),dragStartFunc:l._dragStartFunc.bind(l),dragEndFunc:l._dragEndFunc.bind(l),draggedFunc:l._draggedFunc.bind(l),droppedFunc:l._droppedFunc.bind(l),onEventFunc:l._onEventFunc.bind(l),convertFunc:l._convertFunc.bind(l),canSelectTimeItemFunc:l._canSelectTimeItemFunc.bind(l),selectTimeItemFunc:l._selectTimeItemFunc.bind(l),canSelectRowItemFunc:l._canSelectRowItemFunc.bind(l),selectRowItemFunc:l._selectRowItemFunc.bind(l),detachEventListenersExFunc:l._detachEventListenersExFunc.bind(l),determineTableRowDefinitionFunc:l._determineTableRowDefinitionFunc.bind(l),checkPossibleInteractionsFunc:l._checkPossibleInteractionsFunc.bind(l),checkRowInsertionModeFunc:l._checkRowInsertionModeFunc.bind(l),checkVisualZoomFactorFunc:l._checkVisualZoomFactorFunc.bind(l),timeAreaViewParametersChangedFunc:l._timeAreaViewParametersChangedFunc.bind(l),verticalScrollOffsetChangedFunc:l._verticalScrollOffsetChangedFunc.bind(l),canSelectLinkItemFunc:l._canSelectLinkItemFunc.bind(l),selectLinkItemFunc:l._selectLinkItemFunc.bind(l),keyDownFunc:l._keyDownFunc.bind(l),tableColumnWidthChangedFunc:l._tableColumnWidthChangedFunc.bind(l),errorFunc:function(e){l._app.getOption("boundHandleExceptionFunc")(e.error),e.rethrow=!1},handleWarningFunc:d.getOption("handleWarningFunc")?.bind(d),measuredRenderingTimeFunc:l._app.measuredRenderingTime?.bind(l._app),closeContextMenuFunc:l._app.contextMenuHandler().close.bind(l._app.contextMenuHandler())};r&&r.ganttWidget&&Object.assign(c,r.ganttWidget),l._ganttWidget=s._ganttWidget=new k(s,c),l.getAPIOption("loggingEnabled")&&a.select(l._ganttWidget.element()).select(".nrab-recording-symbol").style("visibility","visible"),u.on(s,"nganttwidgetsplitterchanged",(function(t){try{let e=t.detail;e.isDropped&&l._updateTableViewWidthInOptionsCollector(e.newValue)}catch(t){e.getOption("boundHandleExceptionFunc")(t)}}));var h={classes:Ue,orientation:b.Orientation.Horizontal,startDrag:function(){},changed:function(e,t){var i={rowItem:t.args.rowItem,paneIndex:t.args.paneIndex,newHeight:t.newValue};l._curvePaneResizedFunc(i)},dragged:function(){},endDrag:function(){}};let g=l._curvePaneSplitterWidgetDivD3.node();this._curvePaneSplitterWidget=new b(g,h),l._curvePaneSplitterWidgetDivD3.attr("visibility","hidden"),this._colorStyleD3={},["calendarGridColor","calendarGridWeekendColor","timescaleBackgroundColor","timescaleWeekendBackgroundColor","timescaleTextColor","timescaleTickColor","timescaleHighlightingColor","timeAreaBackgroundColor","tableColumnSeparatorColor","tableTitleBackgroundColor","tableTitleTextColor","tableTitleColumnSeparatorColor","tableTitleHighlightingColor","selectionColor","splitterHighlightingColor","suitableActivityOverlayColor","unsuitableActivityOverlayColor","suitableResourceOverlayColor","unsuitableResourceOverlayColor","treeViewLineColor","treeViewLineDashArray","entitiesTableTreeViewLineColor","entitiesTableTreeViewLineDashArray","tonedDownOverlayColor","applicationStyleDefinition"].forEach((function(e){l._setColorByOptionValue(e)})),this._resizeSensor=new n.nResizeSensor(this._divD3.node(),(function(){l._resizeWidgets()})),this._statusIndicatorWidth=8,this._barSymbolExtent=Kt._barSymbolExtent,this._tableSymbolExtent=16},_registerAPIOptions:function(){var e=this.handleAPIOptionChanged.bind(this);["cursorDateLineVisible","patternShownOnOverloadCurves","timeZone","treeVisualizationMode","entitiesTableTreeVisualizationMode","separationLinesInColoredIndentation","workDateLineCaption","calendarGridColor","calendarGridWeekendColor","defaultInventoryCurvePaneColor","defaultLoadCurvePaneColor","entitiesTableColumnSeparatorColor","entitiesTableTitleColumnSeparatorColor","entitiesTableTitleHighlightingColor","entitiesTableTitleTextColor","pastBackgroundFillColor","pastBackgroundLineColor","objectHighlightingColor","selectionColor","splitterHighlightingColor","suitableActivityOverlayColor","suitableResourceOverlayColor","tableColumnSeparatorColor","tableTitleColumnSeparatorColor","tableTitleHighlightingColor","tableTitleTextColor","timeAreaBackgroundColor","timescaleBackgroundColor","timescaleHighlightingColor","timescaleTextColor","timescaleTickColor","timescaleWeekendBackgroundColor","unsuitableActivityOverlayColor","unsuitableResourceOverlayColor","treeViewLineColor","treeViewLineDashArray","entitiesTableTreeViewLineColor","entitiesTableTreeViewLineDashArray","tonedDownOverlayColor","defaultSkillCollapsedRowDesign","defaultSkillExpandedRowDesign","defaultActivityCollapsedRowDesign","defaultActivityExpandedRowDesign","defaultAllocationRowDesign","defaultResourceCollapsedRowDesign","defaultResourceExpandedRowDesign","forcedActivityAllowedRowDragModes","forcedResourceAllowedRowDragModes","defaultEntityAllowedRowDragModes","forcedEntityAllowedRowDragModes","defaultEntityRowSelectable","defaultLinkSelectable","defaultEntityRowCollapsible","releaseDueDateConnectionsVisible","triggeringOfOnShowContextMenuInTimeAreaOfRow","triggeringOfOnClickedInTimeAreaOfRow","preventDefaultOnContextMenuEvents","defaultResourceBarsPaneVisible","defaultResourceLoadCurvePaneVisible","defaultResourceInventoryCurvePaneVisible","higherCurvePanesOnExceededScaleMaximumValue","curvePanesResizable","linesShownInLoadCurvePanes","topBarSymbolsVisible","timescaleInteractionMode","objectHighlightFlashingEnabled","worldViewVisible","multipleBarDraggingEnabled","tooltipDelay","animationDuration","currentDate","workDate","start","end","startAndEnd","maximumTimeResolutionUnit","maximumTimeResolutionUnitFactor","timeStepUnit","timeStepUnitFactor","asynchronousInteractiveTimeAreaStretching","asynchronousRendering","defaultLinkRoutingType","defaultLinkTargetMarker","progressBarHeight","progressBarWidthCalculationMode","maximumTopViewAreaHeightRatio","visualZoomFactor","tableTitleAndTimescaleHeight","entitiesTableTitleHeight","defaultSkillMinimumRowHeight","defaultResourceMinimumRowHeight","defaultActivityMinimumRowHeight","defaultAllocationMinimumRowHeight","defaultEntityMinimumRowHeight","defaultSkillAllowedRowDragModes","defaultResourceAllowedRowDragModes","defaultActivityAllowedRowDragModes","defaultAllocationAllowedRowDragModes","defaultAllocationAllowedRowDragModesInActivitiesView","forcedSkillAllowedRowDragModes","forcedResourceAllowedRowDragModes","forcedActivityAllowedRowDragModes","forcedAllocationAllowedRowDragModes","forcedAllocationAllowedRowDragModesInActivitiesView","defaultSkillRowCollapsible","defaultResourceRowCollapsible","defaultActivityRowCollapsible","defaultResourceAllocationRowsCollapsible","defaultActivityAllocationRowsCollapsible","defaultSkillRowSelectable","defaultResourceRowSelectable","defaultActivityRowSelectable","defaultAllocationRowSelectable","minimumLoadCurvePaneHeight","defaultLoadCurvePaneHeight","maximumLoadCurvePaneHeight","minimumInventoryCurvePaneHeight","defaultInventoryCurvePaneHeight","maximumInventoryCurvePaneHeight","topRowMarginInTimeArea","bottomRowMarginInTimeArea","subRowDistanceInTimeArea","tableCellContentTopOffset","entitiesTableCellContentTopOffset","barSortModeForOptimizedRowDesign","timescaleNavigationMode","timeAreaPanningMode","selectionBehavior","pastBackgroundLineWidth","pastBackgroundLineDashArray","worldViewPosition","worldViewExtent","maximumSnapDistance","watermarkSymbolID","watermarkOpacity","scrollOffsetsChangedCallbackTimeDelay","defaultActivityStatusFrameColor","defaultAllocationStatusFrameColor","entitiesTableShownFullScreen","colorOfFirstTableCellAppliedToGroupColoring","groupCellsWithHorizontalSeparationLine","dateLineGridColor","dateLineGridDashArray","dateLineGridWidth","dragDatesShownForSingleSelectedObject","collapseButtonVisibleOnRowsWithoutVisibleChildren","dateLineCaptionOptimizedPositioningEnabled","interactiveSwitchingOfSortOrderEnabled","sortingIndicatorVisible","rowSortModeNoneEnabledOnInteractiveSwitchingOfSortOrder","editable","multipleSelectionEnabled","nonWorkingTimeVisible","nonWorkingTimesCalendarIDs","defaultActivityBarTextFormat","defaultAllocationBarTextFormat","applicationVariablesMap","applicationStyleDefinition","linksWithDanglingStartOrEndVisible"].forEach((t=>this.setAPIOptionChangedCallback(t,1,e)))},destroy:function(){this._tooltipWidget.display(null),this._resizeSensor.detach(),delete this._resizeSensor,Object.values(this._colorStyleD3).forEach((e=>{e.remove()})),delete this._colorStyleD3,this._viewOffsetForCurrentDateCurrentlyNotObservedTimer&&window.clearTimeout(this._viewOffsetForCurrentDateCurrentlyNotObservedTimer),u.off(this._ganttWidget.element(),"nganttwidgetsplitterchanged"),this._ganttWidget.destroy(),delete this._ganttWidget,this._entitiesTableWidget&&(u.off(this._entitiesTableWidget.element(),"ntablewidgetwidthchanged.rab"+this._entitiesTableWidget._uniqueID),this._entitiesTableWidget.element().remove(),this._entitiesTableWidget.destroy(),delete this._entitiesTableWidget,this._entitiesSplitterWidget.element().remove(),this._entitiesSplitterWidget.destroy(),delete this._entitiesSplitterWidget)},_handleException:function(e,t){this._app.getOption("boundHandleExceptionFunc")(e,t)},_updateTableViewWidthInOptionsCollector:function(e){var t=this;if(t.getAPIOption("tableViewWidthsSynchronized"))t.setAPIOption("tableViewWidthInActivitiesView",e),t.setAPIOption("tableViewWidthInResourcesView",e),t.setAPIOption("tableViewWidthInLoadsView",e),t.setAPIOption("tableViewWidthInSkilledResourcesView",e);else switch(t.viewType()){case be.Activities:t.setAPIOption("tableViewWidthInActivitiesView",e);break;case be.Resources:t.setAPIOption("tableViewWidthInResourcesView",e);break;case be.Loads:t.setAPIOption("tableViewWidthInLoadsView",e);break;case be.SkilledResources:t.setAPIOption("tableViewWidthInSkilledResourcesView",e)}},_getImageURLsForGanttWidget:function(e){return this._getImageURLsForWidget(this._ganttWidget,e,"///rabSG")},_getImageURLsForEntitiesTableWidget:function(e){return this._getImageURLsForWidget(this._entitiesTableWidget,e,"///rabSE")},_getImageURLsForWidget:function(e,t,i){var a,n=this;return e&&t&&Array.isArray(t)&&t.length&&(n._currentSymbolIDsMap.length||n.updateSymbols(n.app().symbolsMap()),a=[],t.forEach((t=>{a.push(i+`_${e._uniqueID}`+`_${n._currentSymbolIDsMap[t]}`)}))),a},setAPIOption:function(e,t){this.app().setAPIOption(e,t)},getAPIOption:function(e){return this.app().getAPIOption(e)},setAPIOptionChangedCallback:function(e,t,i){this.app().setAPIOptionChangedCallback(e,t,i)},handleAPIOptionChanged:function(e,t){var i=this;switch(e){case"maximumTimeResolutionUnit":case"maximumTimeResolutionUnitFactor":case"timeStepUnit":case"timeStepUnitFactor":i.updateTimeStepUnitAndFactor();break;case"asynchronousInteractiveTimeAreaStretching":i._ganttWidget.option(e,t);break;case"editable":case"asynchronousRendering":i._ganttWidget.option(e,t),i._entitiesTableWidget?.option(e,t);break;case"dateLineGridColor":this._ganttWidget.option("dateLineGridColor",t);break;case"dateLineGridDashArray":this._ganttWidget.option("dateLineGridDashArray",t);break;case"dateLineGridWidth":this._ganttWidget.option("dateLineGridWidth",t);break;case"colorOfFirstTableCellAppliedToGroupColoring":this._ganttWidget.invalidateAllRows(),this.update();break;case"groupCellsWithHorizontalSeparationLine":this._ganttWidget.option("groupCellsWithHorizontalSeparationLine",t),this._entitiesTableWidget?.option("groupCellsWithHorizontalSeparationLine",t);break;case"dateLineCaptionOptimizedPositioningEnabled":this._ganttWidget.option("dateLineCaptionOptimizedPositioningEnabled",t),i.updateDateLinePresentations();break;case"multipleSelectionEnabled":this._ganttWidget.option("timeItemsSelectableByRectangle",t);break;case"nonWorkingTimeVisible":case"nonWorkingTimesCalendarIDs":this._showHideNonWorkingTime();break;case"defaultActivityBarTextFormat":this.viewType()===be.Activities&&(this._ganttWidget.invalidateAllRows(),this.update());break;case"defaultAllocationBarTextFormat":(this.viewType()===be.Resources||this.viewType()===be.SkilledResources||this.viewType()===be.Activities&&this.getAPIOption("allocationRowsVisibleInActivitiesView"))&&(this._ganttWidget.invalidateAllRows(),this.update());break;case"applicationVariablesMap":i._setColorByOptionValue("applicationStyleDefinition");break;default:this.setOption(e,t)}},_initOptions:function(e){var t={calendarGridVisible:!0,showCurveButtonInView:[be.Activities,be.Resources,be.SkilledResources],curveScaleTicksMode:1,deselectItemsOnInteractionWithUnselectedItem:!0,maximumSnapDistance:8,worldViewBarCallbackEnabled:!1};this._options=Object.assign({},t,e)},_setColorByOptionValue:function(e,t){var i=this,n=i.getAPIOption(e),o=a.select(t??document.head),r=[];switch(e){case"calendarGridColor":r.push({selector:"."+k.CALGRID_CLASS,attribute:"fill"});break;case"calendarGridWeekendColor":r.push({selector:"."+k.CALGRID_WEEKEND_CLASS,attribute:"fill"});break;case"treeViewLineColor":r.push({selector:"."+k.TREEVIEW_LINE_CLASS,attribute:"stroke"});break;case"treeViewLineDashArray":r.push({selector:"."+k.TREEVIEW_LINE_CLASS,attribute:"stroke-dasharray"});break;case"entitiesTableTreeViewLineColor":r.push({selector:"."+R.TREEVIEW_LINE_CLASS,attribute:"stroke"});break;case"entitiesTableTreeViewLineDashArray":r.push({selector:"."+R.TREEVIEW_LINE_CLASS,attribute:"stroke-dasharray"});break;case"timescaleBackgroundColor":r.push({selector:".ntimescale-ribbon-cell, .ntimescale-scroll-handle .ntimescale-scroll-handle-symbol, .ntimescale-up-handle .ntimescale-up-handle-symbol",attribute:"fill"},{selector:".ntimescale-ribbon-cell-nonworking-inner-tick",attribute:"stroke"});break;case"timescaleWeekendBackgroundColor":r.push({selector:".ntimescale-ribbon-cell.ntimescale-ribbon-cell-weekend",attribute:"fill"});break;case"timescaleTextColor":r.push({selector:".ntimescale-ribbon-cell text, .ntimescale-scroll-handle-background:not(.ntimescale-scroll-handle-background-hover), .ntimescale-up-handle-background:not(.ntimescale-up-handle-background-hover) ",attribute:"fill"});break;case"timescaleTickColor":r.push({selector:".ntimescale-ribbon-cell-tick",attribute:"stroke"},{selector:".ntimescale-ribbon-cell-nonworking-outer-tick",attribute:"stroke"});break;case"timescaleHighlightingColor":r.push({selector:".ntimescale-ribbon-cell-rect.ntimescale-ribbon-cell-rect-hover, .ntimescale-scroll-handle-background-hover, .ntimescale-up-handle-background-hover",attribute:"fill"});break;case"timeAreaBackgroundColor":r.push({selector:".ngantt-row-background-rect",attribute:"fill"});break;case"tableColumnSeparatorColor":r.push({selector:".ngantt-table-column-separation-line",attribute:"stroke"});break;case"tableTitleBackgroundColor":r.push({selector:".ngantt-table-title-rect",attribute:"fill"});break;case"tableTitleTextColor":r.push({selector:"text.ngantt-fixed-table-title-text",attribute:"fill"},{selector:"text.ngantt-table-title-text",attribute:"fill"},{selector:"path.ngantt-table-title-sorting-indicator",attribute:"fill"});break;case"tableTitleColumnSeparatorColor":r.push({selector:".ngantt-table-column-splitter .nsplitter-rect",attribute:"fill"},{selector:".ngantt-table-title-column-separation-line",attribute:"stroke"});break;case"tableTitleHighlightingColor":r.push({selector:".ngantt-table-column-splitter .nsplitter-rect-phantom",attribute:"fill"});break;case"entitiesTableColumnSeparatorColor":r.push({selector:".ntable-column-separation-line",attribute:"stroke"});break;case"entitiesTableTitleBackgroundColor":r.push({selector:".ntable-title-rect",attribute:"fill"});break;case"entitiesTableTitleTextColor":r.push({selector:"text.ntable-fixed-title-text",attribute:"fill"},{selector:"text.ntable-title-text",attribute:"fill"},{selector:"text.ntable-title-sorting-indicator",attribute:"fill"});break;case"entitiesTableTitleColumnSeparatorColor":r.push({selector:".ntable-column-splitter .nsplitter-rect",attribute:"fill"},{selector:".ntable-title-column-separation-line",attribute:"stroke"});break;case"entitiesTableTitleHighlightingColor":r.push({selector:".ntable-column-splitter .nsplitter-rect-phantom",attribute:"fill"});break;case"defaultLoadCurvePaneColor":r.push({selector:".ngantt-timearea-row .nrab-load-curve-container-rect",attribute:"fill"});break;case"defaultInventoryCurvePaneColor":r.push({selector:".ngantt-timearea-row .nrab-inventory-curve-container-rect",attribute:"fill"});break;case"selectionColor":r.push({selector:".ngantt-selected-bar",attribute:"fill"},{selector:".ngantt-selected-link",attribute:"stroke"},{selector:".ngantt-table-row-selected-gradient-start, .ngantt-table-row-selected-gradient-end, .ntable-selected-gradient-start, .ntable-selected-gradient-end",attribute:"stop-color",noWidgetPrefix:!0}),this._ganttWidget.option("worldViewSelectionColor",n);break;case"splitterHighlightingColor":r.push({selector:".nsplitter-rect-phantom",attribute:"fill",noWidgetPrefix:!0});break;case"unsuitableActivityOverlayColor":r.push({viewTypePrefix:`${Pe}`,selector:".ngantt-covered-row:not(.ngantt-covered-and-highlighted-row)",attribute:"fill"});break;case"suitableActivityOverlayColor":r.push({viewTypePrefix:`${Pe}`,selector:".ngantt-covered-and-highlighted-row",attribute:"fill"});break;case"unsuitableResourceOverlayColor":r.push({viewTypePrefix:`.${ne}`,selector:".ngantt-covered-row:not(.ngantt-covered-and-highlighted-row)",attribute:"fill"});break;case"suitableResourceOverlayColor":r.push({viewTypePrefix:`.${ne}`,selector:".ngantt-covered-and-highlighted-row",attribute:"fill"});break;case"defaultActivityStatusFrameColor":i.viewType()!==be.Activities&&(n=null),r.push({selector:".ngantt-row:not(.ngantt-dleaf) .ngantt-marked-bar",attribute:"stroke"});break;case"defaultAllocationStatusFrameColor":var l=i.viewType()===be.Activities?".ngantt-dleaf ":"";r.push({selector:l+".ngantt-marked-bar",attribute:"stroke"});break;case"tonedDownOverlayColor":r.push({selector:".ngantt-lessened",attribute:"fill"});break;case"applicationStyleDefinition":n=(null!=n&&i._app.resolveFormat?.(n))??n,r.push({})}if(!n!=!i._colorStyleD3[e+"0"])for(var s=0;s<r.length;s++){var d=e+s;n?i._colorStyleD3[d]=o.append("style"):(i._colorStyleD3[d].remove(),delete i._colorStyleD3[d])}n&&(e.startsWith("entitiesTable")?n&&i._entitiesTableWidget&&r.forEach((function(t,a){let o=`.${R.WIDGET_CLASS}-${i._entitiesTableWidget._uniqueID} `,r=t.selector.replace(/^|(?<=,)/g,o);i._colorStyleD3[e+a].text(`${r}{${t.attribute}: ${n}; }`)})):(n&&r.forEach((function(t,a){let o;if("applicationStyleDefinition"===e)o=n;else{let e=t.selector;if(!t.noWidgetPrefix){let a=`${t.viewTypePrefix??""} .${k.WIDGET_CLASS}-${i._ganttWidget._uniqueID} `;e=e.replace(/^|(?<=,)/g,a)}o=`${e}{${t.attribute}: ${n}; }`}i._colorStyleD3[e+a].text(o)})),e.startsWith("calendarGrid")&&i._ganttWidget&&(i._ganttWidget.invalidateAllRows(),i._ganttWidget.update())))},_modifyMapOption:function(e,t,i,a){let n=a?this._entitiesTableWidget:this._ganttWidget,o=n.option(e);o[t]=i,n.option(e,o)},setOption:function(e,t){var i=this;switch(e){case"viewType":this.selectViewType(t);break;case"start":this.setStart(t);break;case"end":this.setEnd(t);break;case"startAndEnd":this.setTimeRange(t[0],t[1]);break;case"calendarGridVisible":case"editable":case"timeZone":case"worldViewVisible":case"worldViewPosition":case"worldViewExtent":this._ganttWidget.option(e,t);break;case"tooltipDelay":this._tooltipWidget&&this._tooltipWidget.option("delay",t>=0?t:null);break;case"animationDuration":this._ganttWidget.option("transitionDuration",t),this._entitiesWidget&&this._entitiesWidget.option("transitionDuration",t>=0?t:null);break;case"visualZoomFactor":this._ganttWidget.option(e,t),this._entitiesTableWidget&&(this._entitiesTableWidget.option(e,t),this._resizeWidgets());break;case"maximumSnapDistance":this._ganttWidget.option("maximumSnapDistance",t);break;case"timeAreaPanningMode":this._ganttWidget.option("timeAreaPanningMode",t);break;case"cursorDateLineVisible":this._ganttWidget.option("horizontalMousePositionHighlightingEnabled",t);break;case"maximumTopViewAreaHeightRatio":this._ganttWidget.option("maximumTopBodyViewAreaHeightRatio",t);break;case"defaultLinkRoutingType":this._ganttWidget.option("linkRoutingType",t);break;case"progressBarHeight":case"progressBarWidthCalculationMode":case"defaultLinkTargetMarker":this._ganttWidget.option(e,t);break;case"preventDefaultOnContextMenuEvents":case"separationLinesInColoredIndentation":this._ganttWidget.option("separationLinesBetweenGroupCells",t),this._entitiesTableWidget&&this._entitiesTableWidget.option("separationLinesBetweenGroupCells",t);break;case"multipleBarDraggingEnabled":this._ganttWidget.option("automaticDraggingOfSelectedTimeItems",t);break;case"treeVisualizationMode":this._ganttWidget.option("treeLinesVisible",!!t);break;case"entitiesTableTreeVisualizationMode":this._entitiesTableWidget&&this._entitiesTableWidget.option("treeLinesVisible",!!t);break;case"workDate":this.setWorkDate(t);break;case"workDateLineCaption":var a=i._ganttWidget.option("dateLines");Array.isArray(a)&&a.every((function(e){return e.id!==Ft+i._ganttWidget._uniqueID||(e.label=t,i.updateDateLine(e),!1)}));break;case"currentDate":this._updateCurrentDateArea(),this._viewOffsetForCurrentDateCurrentlyObserved&&this.scrollToCurrentDate();break;case"pastBackgroundFillColor":this._updateCurrentDateAreaPresentation();break;case"pastBackgroundLineColor":case"pastBackgroundLineWidth":case"pastBackgroundLineDashArray":this._updateCurrentDateLinePresentation();break;case"tableTitleAndTimescaleHeight":this._ganttWidget.option("titleHeight",t);break;case"entitiesTableTitleHeight":this._entitiesTableWidget&&this._entitiesTableWidget.option("titleHeight",t);break;case"selectionColor":case"calendarGridColor":case"timescaleBackgroundColor":case"timescaleWeekendBackgroundColor":case"timescaleTextColor":case"timescaleTickColor":case"timescaleHighlightingColor":case"timeAreaBackgroundColor":case"tableColumnSeparatorColor":case"tableTitleTextColor":case"tableTitleColumnSeparatorColor":case"tableTitleHighlightingColor":case"entitiesTableColumnSeparatorColor":case"entitiesTableTitleTextColor":case"entitiesTableTitleColumnSeparatorColor":case"entitiesTableTitleHighlightingColor":case"defaultLoadCurvePaneColor":case"defaultInventoryCurvePaneColor":case"splitterHighlightingColor":case"suitableActivityOverlayColor":case"suitableResourceOverlayColor":case"unsuitableActivityOverlayColor":case"unsuitableResourceOverlayColor":case"defaultActivityStatusFrameColor":case"defaultAllocationStatusFrameColor":case"treeViewLineColor":case"treeViewLineDashArray":case"entitiesTableTreeViewLineColor":case"entitiesTableTreeViewLineDashArray":case"tonedDownOverlayColor":case"applicationStyleDefinition":this._setColorByOptionValue(e);break;case"calendarGridWeekendColor":t&&"transparent"!==t?(this._ganttWidget.option("calendarGridWeekendVisible",!0),this._setColorByOptionValue(e)):this._ganttWidget.option("calendarGridWeekendVisible",!1);break;case"defaultEntityAllowedRowDragModes":case"forcedEntityAllowedRowDragModes":if(this._entitiesTableWidget){let a=i.getAPIOption("entitiesTableShownFullScreen")?~T.MoveOutside:-1;t&=a,this._modifyMapOption(("d"===e.charAt(0)?"default":"forced")+"RowInteractionsByExternalTypeMap",Ae.Entity,t,!0)}break;case"linksWithDanglingStartOrEndVisible":this._ganttWidget.option("linksWithDanglingBarsVisible",t);break;case"defaultLinkSelectable":this._ganttWidget.option("defaultLinkItemSelectable",t);break;case"defaultEntityRowSelectable":this._entitiesTableWidget&&this._entitiesTableWidget.option("defaultRowItemSelectable",t);break;case"defaultEntityRowCollapsible":this._entitiesTableWidget&&this._entitiesTableWidget.option("defaultRowItemCollapsible",t);break;case"defaultSkillMinimumRowHeight":case"defaultResourceMinimumRowHeight":case"defaultActivityMinimumRowHeight":case"defaultAllocationMinimumRowHeight":i._modifyMapOption("defaultRowMainHeightsByExternalTypeMap",{defaultSkillMinimumRowHeight:Ae.Skill,defaultResourceMinimumRowHeight:Ae.Resource,defaultActivityMinimumRowHeight:Ae.ActivityRow,defaultAllocationMinimumRowHeight:Ae.AllocationRow}[e],t);break;case"defaultAllocationAllowedRowDragModes":case"defaultAllocationAllowedRowDragModesInActivitiesView":if(i.viewType()===be.Activities!==e.endsWith("w"))break;case"defaultResourceAllowedRowDragModes":t&&i.viewType()===be.SkilledResources&&(t=t&~T.DragOnSameLevelOnly|T.DragInSameTableParentOnly);case"defaultSkillAllowedRowDragModes":case"defaultActivityAllowedRowDragModes":i._modifyMapOption("defaultRowInteractionsByExternalTypeMap",{defaultSkillAllowedRowDragModes:Ae.Skill,defaultResourceAllowedRowDragModes:Ae.Resource,defaultActivityAllowedRowDragModes:Ae.ActivityRow,defaultAllocationAllowedRowDragModes:Ae.AllocationRow,defaultAllocationAllowedRowDragModesInActivitiesView:Ae.AllocationRow}[e],t);break;case"forcedAllocationAllowedRowDragModes":case"forcedAllocationAllowedRowDragModesInActivitiesView":if(i.viewType()===be.Activities!==e.endsWith("w"))break;case"forcedSkillAllowedRowDragModes":case"forcedResourceAllowedRowDragModes":case"forcedActivityAllowedRowDragModes":i._modifyMapOption("forcedRowInteractionsByExternalTypeMap",{forcedSkillAllowedRowDragModes:Ae.Skill,forcedResourceAllowedRowDragModes:Ae.Resource,forcedActivityAllowedRowDragModes:Ae.ActivityRow,forcedAllocationAllowedRowDragModes:Ae.AllocationRow,forcedAllocationAllowedRowDragModesInActivitiesView:Ae.AllocationRow}[e],t);break;case"defaultSkillRowCollapsible":case"defaultResourceRowCollapsible":case"defaultActivityRowCollapsible":i._modifyMapOption("defaultRowItemCollapsibleByExternalTypeMap",{defaultSkillRowCollapsible:Ae.Skill,defaultResourceRowCollapsible:Ae.Resource,defaultActivityRowCollapsible:Ae.ActivityRow}[e],t);break;case"defaultResourceAllocationRowsCollapsible":case"defaultActivityAllocationRowsCollapsible":i._modifyMapOption("defaultRowItemDetailingCollapsibleByExternalTypeMap",{defaultResourceAllocationRowsCollapsible:Ae.Resource,defaultActivityAllocationRowsCollapsible:Ae.ActivityRow}[e],t);break;case"defaultSkillRowSelectable":case"defaultResourceRowSelectable":case"defaultActivityRowSelectable":case"defaultAllocationRowSelectable":i._modifyMapOption("defaultRowItemSelectableByExternalTypeMap",{defaultSkillRowSelectable:Ae.Skill,defaultResourceRowSelectable:Ae.Resource,defaultActivityRowSelectable:Ae.ActivityRow,defaultAllocationRowSelectable:Ae.AllocationRow}[e],t);break;case"defaultSkillCollapsedRowDesign":case"defaultResourceCollapsedRowDesign":case"defaultActivityCollapsedRowDesign":{let a={defaultSkillCollapsedRowDesign:Ae.Skill,defaultResourceCollapsedRowDesign:Ae.Resource,defaultActivityCollapsedRowDesign:Ae.ActivityRow}[e];i._modifyMapOption("defaultRowCollapsedDisplayedElementsByExternalTypeMap",a,i.viewModel().modifyDisplayedElementsForRowItemType(a,t))}break;case"defaultResourceExpandedRowDesign":case"defaultActivityExpandedRowDesign":case"defaultAllocationRowDesign":{let a={defaultResourceExpandedRowDesign:Ae.Resource,defaultActivityExpandedRowDesign:Ae.ActivityRow,defaultAllocationRowDesign:Ae.AllocationRow}[e];i._modifyMapOption("defaultRowExpandedDisplayedElementsByExternalTypeMap",a,i.viewModel().modifyDisplayedElementsForRowItemType(a,t))}break;case"defaultEntityMinimumRowHeight":this._entitiesTableWidget&&this._entitiesTableWidget.option("defaultRowMainHeight",t);break;case"patternShownOnOverloadCurves":case"releaseDueDateConnectionsVisible":case"linesShownInLoadCurvePanes":this._ganttWidget.invalidateAllRows(),this.update();break;case"curvePanesResizable":this._options.curveScaleTicksMode=t?2:1,this._ganttWidget.invalidateAllRows(),this.update();break;case"topBarSymbolsVisible":this._ganttWidget.invalidateAllRows(!1,!0),this.update();break;case"topRowMarginInTimeArea":case"bottomRowMarginInTimeArea":case"subRowDistanceInTimeArea":this._ganttWidget.option(e.substring(0,e.length-10),t),this.updateAllRowHeights();break;case"triggeringOfOnShowContextMenuInTimeAreaOfRow":this._ganttWidget.option("contextMenuEventOnRowItemInTimeArea",t);break;case"triggeringOfOnClickedInTimeAreaOfRow":this._ganttWidget.option("tapEventOnRowItemInTimeArea",t),i._curveTapEventClassNames=t?p.TAP_EVENT_CLASS_NAME+" "+p.DOUBLE_TAP_EVENT_CLASS_NAME:p.QUICK_TAP_EVENT_CLASS_NAME,this._ganttWidget.invalidateAllRows(!1,!1),this.update();break;case"tableCellContentTopOffset":this._ganttWidget.option("cellContentTopOffset",t);break;case"entitiesTableCellContentTopOffset":this._entitiesTableWidget&&this._entitiesTableWidget.option("cellContentTopOffset",t);break;case"timescaleNavigationMode":this._ganttWidget.option("timescaleSmartNavigationVersion",W.TimescaleNavigationModeToVersionMap[t]);break;case"timescaleInteractionMode":this._ganttWidget.option("timescaleInteractionMode",t);break;case"selectionBehavior":var n={selectedItemsShownHighlighted:!!t,rowSelectionWithFrames:!t};t||(n.unselectedItemsShownCovered=!1),this._entitiesTableWidget&&this._entitiesTableWidget.option(n),n.barSelectionWithFrames=!t,this._ganttWidget.option(n);var o=this.getSelectedObjectsAndType();this.selectOrHighlightObjectsByItemType(o.itemType,o.objects,0);break;case"minimumLoadCurvePaneHeight":case"defaultLoadCurvePaneHeight":case"maximumLoadCurvePaneHeight":case"minimumInventoryCurvePaneHeight":case"defaultInventoryCurvePaneHeight":case"maximumInventoryCurvePaneHeight":case"defaultResourceBarsPaneVisible":case"defaultResourceLoadCurvePaneVisible":case"defaultResourceInventoryCurvePaneVisible":case"higherCurvePanesOnExceededScaleMaximumValue":i.updateAllRowHeights(),i._ganttWidget.invalidateAllRows(!1,"defaultResourceBarsPaneVisible"===e),i.update();break;case"objectHighlightingColor":this._ganttWidget.option("itemHighlightingColor",t),this._entitiesTableWidget&&this._entitiesTableWidget.option("itemHighlightingColor",t);break;case"objectHighlightFlashingEnabled":this._ganttWidget.option("itemHighlightFlashingEnabled",!!t),this._entitiesTableWidget&&this._entitiesTableWidget.option("itemHighlightFlashingEnabled",!!t);break;case"scrollOffsetsChangedCallbackTimeDelay":this._ganttWidget.option("scrollOffsetsChangedFuncTimeDelay",t),this._entitiesTableWidget&&this._entitiesTableWidget.option("scrollOffsetsChangedFuncTimeDelay",t);break;case"watermarkSymbolID":i._currentSymbolIDsMap[t]?i._ganttWidget.option("watermarkURL",`///rabSG_${i._ganttWidget._uniqueID}_${i._currentSymbolIDsMap[t]}`):i._ganttWidget.option("watermarkURL",void 0);break;case"watermarkOpacity":i._ganttWidget.option("watermarkOpacity",t);break;case"entitiesTableShownFullScreen":if(this.isEntitiesTableVisible()&&this._resizeWidgets(!0),this._entitiesTableWidget){let e=t?~T.MoveOutside:-1;this._entitiesTableWidget.option("defaultRowInteractions",i.getAPIOption("defaultEntityAllowedRowDragModes")&e)}break;case"dragDatesShownForSingleSelectedObject":i._checkShowHideDragBoundaries();break;case"barSortModeForOptimizedRowDesign":i._ganttWidget.option("barSortModeForOptimizedDisplayedElements",i.getAPIOption("compareObjects")?t:_e.StartAndEnd);break;case"collapseButtonVisibleOnRowsWithoutVisibleChildren":this._ganttWidget.option(e,t),this._ganttWidget.invalidateAllRows(),this._entitiesTableWidget&&(this._entitiesTableWidget.option(e,t),this._entitiesTableWidget.invalidateAllRows()),this.update();break;case"interactiveSwitchingOfSortOrderEnabled":case"sortingIndicatorVisible":this._ganttWidget.option(e,t),this._entitiesTableWidget&&this._entitiesTableWidget.option(e,t)}},getOption:function(e){return this._options[e]},app:function(){return this._app},model:function(){return this.app().model()},view:function(){return this._view},viewModel:function(e){return e?this._entitiesViewModel:this._viewModel},init:function(e){var t=this,i=t.model();t._tooltipWidget=new I(t._divD3.node(),{classNames:["ngantt-bar","ngantt-compound-bar","ngantt-table-row","ngantt-link-hot-region","ntable-row",He]}),t._tooltipWidget.option("delay",t.getAPIOption("tooltipDelay")),t.updateSymbols(t.app().symbolsMap(),!0),t._ganttWidget.option("linkItems",void 0),t.resetTimeAreaView(),t._ganttWidget.timeRange(i.actualStart(),i.actualEnd()),t._ganttWidget.addDateLine({className:Nt,id:Ft+t._ganttWidget._uniqueID,date:i.dateTimeValueToDate(t.getAPIOption("workDate")),label:t.getAPIOption("workDateLineCaption"),draggable:!1}),t._updateCurrentDateArea(),t.updateTimeStepUnitAndFactor(),t.selectViewType(void 0===e?be.Resources:e,!0)},_updateCurrentDateArea:function(){var e,t=this,i=t.model(),a=t._ganttWidget.option("dateAreas")||[],n=t._ganttWidget.option("dateLines")||[];for(e=0;e<a.length;e++)if(a[e].id===Fe+t._ganttWidget._uniqueID){t.getAPIOption("currentDate")?(a[e].start=i.dateTimeValueToDate(t.currentStart()),a[e].end=t.getAPIOption("currentDate")):(a.splice(e,1),e-=1);break}for(var o=0;o<n.length;o++)if(n[o].id===We+t._ganttWidget._uniqueID){if(!t.getAPIOption("currentDate")){n.splice(o,1);break}n[o].date=t.getAPIOption("currentDate")}t.getAPIOption("currentDate")&&e===a.length&&(n.push({className:Le,id:We+t._ganttWidget._uniqueID,date:t.getAPIOption("currentDate"),label:"",draggable:!1}),a.push({className:Ne,id:Fe+t._ganttWidget._uniqueID,start:i.dateTimeValueToDate(t.currentStart()),end:t.getAPIOption("currentDate"),inForeground:!1})),t._ganttWidget.option("dateLines",n.length?n:null),t.updateDateLinePresentations(),t._ganttWidget.option("dateAreas",a.length?a:null),t._updateCurrentDateAreaPresentation()},_updateCurrentDateLinePresentation:function(){this.getAPIOption("currentDate")&&(a.select(this._ganttWidget.element()).select("."+Le+" line").style("stroke",this.getAPIOption("pastBackgroundLineColor")||null).style("stroke-width",this.getAPIOption("pastBackgroundLineWidth")||null).style("stroke-dasharray",this.getAPIOption("pastBackgroundLineDashArray")||null),this._ganttWidget.renderWorldView())},_updateCurrentDateAreaPresentation:function(){this.getAPIOption("currentDate")&&a.select(this._ganttWidget.element()).select("."+Ne+" path").style("fill",this.getAPIOption("pastBackgroundFillColor")||null)},scrollToObjectData:function(e,t,i,a){var n=this;if(t){var o,r;let s=i&Se.NoHScroll;switch(e){case ve.Resource:r=n.viewModel().getItemInfoForItemType(Ae.Resource,t),o=r?.item;break;case ve.Allocation:r=n.viewModel().getItemInfoForItemType(Ae.Allocation,t),o=r?.item,o&&(!s&&o?.timeItems?.[0]?.start?o=o.timeItems[0]:n.viewType()!==be.Activities&&n.getAPIOption("allocationRowsVisibleInResourcesView")||(o=o.rab_parentRowItem));break;case ve.Activity:if(r=n.viewModel().getItemInfoForItemType(Ae.Activity,t),o=r?.item,!s&&o?.timeItems?.[0]?.childTimeItems){let e=n.viewModel(),t=o.timeItems[0].childTimeItems;var l=e._findItemOfTypeInArray(t,Ae.Activity);l?.start||(l=e._findItemOfTypeInArray(t,Ae.ActivityReleaseDate)),l?.start||(l=e._findItemOfTypeInArray(t,Ae.ActivityBaseline)),l?.start||(l=e._findItemOfTypeInArray(t,Ae.ActivityDueDate)),l?.start||(l=o.timeItems[0].childTimeItems[0]),l?.start&&(o=l)}break;case ve.Entity:r=n.viewModel(be._Entities)?.getItemInfoForItemType(Ae.Entity,t),o=r?.item;break;case ve.Skill:r=n.viewModel().getItemInfoForItemType(Ae.Skill,t),o=r?.item}if(o)return n.scrollToItem(o,i,a);r?.wrapper?n.app().handleWarning(z.OBJECT_NOT_VISIBLE_IN_VIEW,{key:r?.primaryKey||""}):n.app().handleWarning(z.PRIMARY_KEY_NOT_EXISTING,{key:r?.primaryKey||""})}},scrollToItem:function(e,t,i){var a=this;let n=a.viewType();var o=[];t&&(t&Se.Left?o.push("left"):t&Se.HCenter?o.push("hcenter"):t&Se.Right&&o.push("right"),t&Se.Top?o.push("top"):t&Se.VCenter?o.push("vcenter"):t&Se.Bottom&&o.push("bottom"));var r=o.length?o.join(","):void 0;switch(e.rab_itemType===Ae.AllocationRow&&[be.Resources,be.SkilledResources].includes(n)&&!a.viewModel().getAPIOptionMapped("allocationRowsVisible")&&(e=e.timeItems[0]),e.rab_itemType){case Ae.Resource:case Ae.Skill:case Ae.ActivityRow:case Ae.AllocationRow:a.scrollToRowItem(n,e,r);break;case Ae.Activity:case Ae.ActivityBaseline:case Ae.ActivityFrame:case Ae.Allocation:this._ganttWidget.scrollToItem(e,r,!0,!0,a.getAPIOption("scrollToObjectAnimationEnabled"));break;case Ae.Entity:a._entitiesTableWidget&&(a.scrollToRowItem(n,e,r),!1!==i&&(a._entitiesTableWidget.showMarkingTemporarily(e),a._ganttWidget.showMarkingTemporarily(null),i=!1));default:e=null}if(!1!==i){if(e&&(e.rab_itemType===Ae.Allocation||e.rab_itemType===Ae.Activity)&&!a._ganttWidget.getElementOfItem(e)){for(;e.rab_parentItem;)e=e.rab_parentItem;(e=e.rab_rowItem)&&e.rab_itemType!==Ae.AllocationRow&&e.rab_itemType!==Ae.ActivityRow&&(e=null)}a._ganttWidget.showMarkingTemporarily(e),a._entitiesTableWidget&&a._entitiesTableWidget.showMarkingTemporarily(null)}},scrollToRowItem:function(e,t,i){var a=this,n=t.rab_itemType===Ae.Entity?a._entitiesTableWidget:a._ganttWidget;if(!n.getElementOfItem(t)){for(var o=[],r=t;r;)o.unshift(r),r=n.getParent(r);o.every((function(e,i){let a=o[i+1]?.isDetailingRow;return!n.isRowCollapsed(e,a)||(n.expandRow(e,!1,a),!n.getElementOfItem(t))}))}n.scrollToItem(t,i,!0,!0,a.getAPIOption("scrollToObjectAnimationEnabled"))},setStart:function(e){return this.setTimeRange(e,this._ganttWidget.timeAxis().end())},setEnd:function(e){if(this._ganttWidget&&e instanceof Date)return this._ganttWidget.timeRange(this._ganttWidget.timeAxis().start(),e),!0},setTimeRange:function(e,t){if(this._ganttWidget&&e instanceof Date&&t instanceof Date)return this._ganttWidget.timeRange(e,t),this.getAPIOption("currentDate")&&this._updateCurrentDateArea(),!0},currentStart:function(){return this._ganttWidget?this._ganttWidget.timeAxis().actualStart():this.model().actualStart()},currentEnd:function(){return this._ganttWidget?this._ganttWidget.timeAxis().actualEnd():this.model().actualEnd()},ganttWidget:function(){return this._ganttWidget},entitiesTableWidget:function(){return this._entitiesTableWidget},viewType:function(){return this._viewModel?.viewType()},updateTimeStepUnitAndFactor:function(){var e=this;let t=e.getAPIOption("maximumTimeResolutionUnit"),i=e.getAPIOption("maximumTimeResolutionUnitFactor"),a=e.getAPIOption("timeStepUnit"),n=e.getAPIOption("timeStepUnitFactor");e._ganttWidget.option("timeResolutionUnit",Q[t??a]??L.Seconds),e._ganttWidget.option("timeResolutionUnitsPerStep",(i??n??1)||1),e._ganttWidget.option("horizontalDraggingUnit",Q[a??t]??L.Seconds),e._ganttWidget.option("horizontalDraggingUnitsPerStep",(n??i??1)||1)},update:function(e,t){var i=this,a=i.viewType();if(null!=a){let r=i._ganttWidget,l=i._entitiesTableWidget;if(!t&&i.getAPIOption("updateOptimizationEnabled")){var n=this.model();let e=n.getModificationClassificationVersion();n.getAndClearModificationClassifiedCount(ae)&&l&&n.entities().forEach((function(t){if(1===t.rab_modificationClassification&&t.rab_modificationClassificationVersion===e){var a=i.viewModel(!0)?.entityItem(t);if(a){var n=l.getElementOfItem(a);n&&i._doTableRowFill({rowItem:a,rowElem:n},Ie.Entities,!0)}}}));let t={};if(a===be.Activities)n.getAndClearModificationClassifiedCount(se),n.getAndClearModificationClassifiedCount(de),n.getAndClearModificationClassifiedCount(J)&&n.activities().forEach((function(a){if(1===a.rab_modificationClassification&&a.rab_modificationClassificationVersion===e){var n=i.viewModel().activityItem(a);if(n){var o=r.getElementOfItem(n);o&&document.contains(o)&&(i._doTableRowFill({rowItem:n,rowElem:o},Ie.Gantt,!0),n.timeItems?.[0]?.childTimeItems.forEach((function(e){var t=r.getElementOfItem(e);if(t&&document.contains(t)){var a,n=e.rab_itemType===Ae.Activity&&e.childTimeItems;n&&(a=r.getElementOfItem(e,!0)),i._updateBar({timeItem:e,elem:t,backgroundElem:a},!0),n&&e.childTimeItems.forEach((function(e){var t=r.getElementOfItem(e);t&&document.contains(t)&&i._updateBar({timeItem:e,elem:t},!0)}))}}))),i.getAPIOption("worldViewVisible")&&(t[a.ID]=!0)}}}));else if(n.getAndClearModificationClassifiedCount(J),n.getAndClearModificationClassifiedCount(se)){let o=i.viewModel(),l=a===be.SkilledResources,s=(l?o.skilledResourceItem:o.resourceItem).bind(o);(l?n.skilledResources():n.resources()).forEach((function(a){if(1===a.rab_modificationClassification&&a.rab_modificationClassificationVersion===e){var n=s(a);if(n){var o=r.getElementOfItem(n);o&&document.contains(o)&&i._doTableRowFill({rowItem:n,rowElem:o},Ie.Gantt,!0),i.getAPIOption("worldViewVisible")&&(t[a.ID]=!0)}}}))}if(n.getAndClearModificationClassifiedCount(ee)){let o=[be.Resources,be.SkilledResources].includes(a);if(o||a===be.Activities&&i.getAPIOption("allocationRowsVisibleInActivitiesView")){let l=i.viewModel(),s=a===be.SkilledResources,d=(s?l.skilledAllocationItem:l.allocationItem).bind(l);(s?n.skilledAllocations():n.allocations()).forEach((function(a){var n=d(a);if(n){var l=r.getElementOfItem(n);if(1===a.rab_modificationClassification&&a.rab_modificationClassificationVersion===e){l&&document.contains(l)&&i._doTableRowFill({rowItem:n,rowElem:l},Ie.Gantt,!0);var s=n.timeItems?.[0];if(s){var c=r.getElementOfItem(s);if(c&&document.contains(c)){var u=r.getElementOfItem(s,!0);i._updateBar({timeItem:s,elem:c,backgroundElem:u},!0),s.childTimeItems?.forEach((function(e){var t=r.getElementOfItem(e);t&&document.contains(t)&&i._updateBar({timeItem:e,elem:t},!0)}))}i.getAPIOption("worldViewVisible")&&(r.options.detailingRowsVisible?r.isRowCollapsed(n)||r.refreshRowForWorldView(n):o&&(t[a.ResourceID]=!0))}}}}))}}let o=i.viewModel(),s=a===be.Activities?ve.Activity:ve.Resource,d=new Set;Object.keys(t).forEach((e=>{let t=o.wrappersByPrimaryKeyParts(s,e);t?.forEach((e=>{let t=o.itemByWrapper(e);t=t&&r.getVisibleParent(t),t&&d.add(t)}))})),Object.keys(d).forEach((e=>{r.refreshRowForWorldView(e)})),n.increaseModificationClassificationVersion()}if(r){if(i._updateLinks(),e){var o=i.getSelectedObjectsAndType();void 0!==o.itemType&&(o.itemType!==ve.Entity?r.option("updateSuspended",!0):l?.option("updateSuspended",!0),i.selectOrHighlightObjectsByItemType(o.itemType,o.objects))}if(r.update(),l?.update(),e&&(r.option("updateSuspended",!1),l?.option("updateSuspended",!1)),t){let e=i.getAPIOption("animationDuration");r.option("transitionDuration",e),l?.option("transitionDuration",e)}r.getAndClearTableViewWidthChanged()&&i._updateTableViewWidthInOptionsCollector(r.actualTableViewWidth())}}},_setTableWidth:function(){if(null!=this.viewType()){var e=this.getAPIOption("tableWidth");if(null!=e){var t=this.viewModel().getTableDefinition();t.fixedColumnsPreceding&&Array.isArray(t.fixedColumnsPreceding.cellDefinitions)&&t.fixedColumnsPreceding.cellDefinitions.forEach((function(t){e+=null==t.width?200:t.width})),t.fixedColumnsSucceeding&&Array.isArray(t.fixedColumnsSucceeding.cellDefinitions)&&t.fixedColumnsSucceeding.cellDefinitions.forEach((function(t){e+=null==t.width?200:t.width}))}this._ganttWidget.option("tableWidth",e)}},selectViewType:function(e,t,i){var a=this,n=a.viewType();if(n!==e||t){if(void 0===n&&(i=!0),a._tooltipWidget.display(null),void 0!==n){var o=a.viewModel();o.setVerticalScrollOffset(a._ganttWidget.verticalScrollOffset()),o.setTopVerticalScrollOffset(a._ganttWidget.topVerticalScrollOffset()),o.setVisibleStartRowItem(a._ganttWidget.visibleStartRowItem(U.Main)),o.setTopVisibleStartRowItem(a._ganttWidget.visibleStartRowItem(U.Top)),n!==e&&(o.clearRegisteredRowItems(),o.detachView())}var r=a._viewModel=a._viewModels[e];if(r&&(r.clearRegisteredRowItems(),r.attachView(this),a._ganttWidget.option("updateSuspended",!0),r.determineVisibilityOfAllObjects(),a.updateAllRowHeights(),a._ganttWidget.option("rowItemsRoot",null),a._switchToViewType(e),a._setTableWidth(),a._ganttWidget.option("rowItemsRoot",r.rowItemsRoot()),a._ganttWidget.option("linksVisible",e!==be.Loads),a._updateLinks(),a._showHideEntitiesTable(void 0===n),void 0!==n&&a._ganttWidget.option("updateSuspended",!1),!i))if(void 0===r.getVerticalScrollOffset()&&void 0===r.getTopVerticalScrollOffset()&&r.getVisibleStartRowItem()){if(a._ganttWidget.options.commonBodyViewAreaVisible||!a._ganttWidget.options.topBodyViewAreaVisible){let e=r.getVisibleStartRowItem(),t=e;for(;t?.rab_parentRowItem?.rab_parentRowItem;)t=t.rab_parentRowItem;t&&!t.atTheTop&&a._ganttWidget.scrollToItem(e,0)}if(a._ganttWidget.options.topBodyViewAreaVisible){let e=r.getTopVisibleStartRowItem(),t=e;for(;t?.rab_parentRowItem?.rab_parentRowItem;)t=t.rab_parentRowItem;t?.atTheTop&&a._ganttWidget.scrollToItem(e,0)}}else a._ganttWidget.scrollTo(void 0,void 0,r.getVerticalScrollOffset()||0,r.getTopVerticalScrollOffset()||0)}},suspendUpdate:function(e){if(this._ganttWidget){var t=this._ganttWidget.option("updateSuspended");return e&&t||(this._ganttWidget.option("updateSuspended",e),this._entitiesTableWidget?.option("updateSuspended",e)),t}},_switchToViewType:function(e){var t=this,i=t.viewModel();if(e===be.Activities)t._divD3.classed(bt,!1).classed(ht,!1).classed(Ct,!1).classed(Pe,!0),i.setTableDefinitionIntoWidget(t._ganttWidget),t._ganttWidget.option({detailingRowsVisible:t.getAPIOption("allocationRowsVisibleInActivitiesView"),leafBarsVisibleOnParentRows:!0,barHeight:t.getAPIOption("defaultActivityBarHeight"),barTopOffsetAndHeightScaleFactor:t.getAPIOption("activityBarTopOffsetAndHeightScaleFactor"),leafBarTopOffsetAndHeightScaleFactor:t.getAPIOption("allocationBarTopOffsetAndHeightScaleFactor"),defaultBarInteractions:t.getAPIOption("defaultActivityAllowedBarDragModes"),ignoreCalendarOnBarInteractions:t.getAPIOption("ignoreCalendarOnActivityBarInteractions"),defaultBarShape:X[t.getAPIOption("defaultActivityBarShape")],defaultBarSnapTargetsForEnd:t.getAPIOption("defaultActivitySnapTargetsForEnd"),defaultBarSnapTargetsForStart:t.getAPIOption("defaultActivitySnapTargetsForStart"),defaultMaximumRowHeight:t.getAPIOption("defaultActivityMaximumRowHeight"),defaultMaximumSubRowHeight:t.getAPIOption("defaultActivityMaximumSubRowHeightInTimeArea"),defaultRowCollapsedDisplayedElementsByExternalTypeMap:{[Ae.ActivityRow]:i.modifyDisplayedElementsForRowItemType(Ae.ActivityRow,t.getAPIOption("defaultActivityCollapsedRowDesign")),[Ae.Resource]:i.modifyDisplayedElementsForRowItemType(Ae.Resource,t.getAPIOption("defaultResourceCollapsedRowDesign"))},defaultRowExpandedDisplayedElementsByExternalTypeMap:{[Ae.ActivityRow]:i.modifyDisplayedElementsForRowItemType(Ae.ActivityRow,t.getAPIOption("defaultActivityExpandedRowDesign")),[Ae.Resource]:i.modifyDisplayedElementsForRowItemType(Ae.Resource,t.getAPIOption("defaultResourceExpandedRowDesign")),[Ae.AllocationRow]:i.modifyDisplayedElementsForRowItemType(Ae.AllocationRow,t.getAPIOption("defaultAllocationRowDesign"))},defaultTimeItemSelectable:t.getAPIOption("defaultActivityBarSelectable"),defaultLeafBarHeight:t.getAPIOption("defaultAllocationBarHeight"),defaultLeafBarInteractions:t.getAPIOption("defaultAllocationAllowedBarDragModesInActivitiesView"),forcedLeafBarInteractions:t.getAPIOption("forcedAllocationAllowedBarDragModesInActivitiesView"),defaultLeafBarShape:X[t.getAPIOption("defaultAllocationBarShape")],defaultLeafBarSnapTargetsForEnd:t.getAPIOption("defaultAllocationSnapTargetsForEnd"),defaultLeafBarSnapTargetsForStart:t.getAPIOption("defaultAllocationSnapTargetsForStart"),defaultLeafTimeItemSelectable:t.getAPIOption("defaultAllocationBarSelectable"),detailedConstraintSymbolsEnabled:t.getAPIOption("detailedActivityConstraintSymbolsEnabled"),forcedBarInteractions:t.getAPIOption("forcedActivityAllowedBarDragModes")}),t._modifyMapOption("defaultRowInteractionsByExternalTypeMap",Ae.Resource,T.None);else if(e===be.Resources)t._divD3.classed(bt,!0).classed(ht,!1).classed(Ct,!1).classed(Pe,!1),i.setTableDefinitionIntoWidget(t._ganttWidget),t._ganttWidget.option({detailingRowsVisible:t.getAPIOption("allocationRowsVisibleInResourcesView"),leafBarsVisibleOnParentRows:!0,barHeight:t.getAPIOption("defaultAllocationBarHeight"),barTopOffsetAndHeightScaleFactor:t.getAPIOption("allocationBarTopOffsetAndHeightScaleFactor"),leafBarTopOffsetAndHeightScaleFactor:t.getAPIOption("allocationBarTopOffsetAndHeightScaleFactor"),defaultBarInteractions:t.getAPIOption("defaultAllocationAllowedBarDragModes"),ignoreCalendarOnBarInteractions:t.getAPIOption("ignoreCalendarOnAllocationBarInteractions"),defaultBarShape:$[t.getAPIOption("defaultAllocationBarShape")],defaultBarSnapTargetsForEnd:t.getAPIOption("defaultAllocationSnapTargetsForEnd"),defaultBarSnapTargetsForStart:t.getAPIOption("defaultAllocationSnapTargetsForStart"),defaultMaximumRowHeight:t.getAPIOption("defaultResourceMaximumRowHeight"),defaultMaximumSubRowHeight:t.getAPIOption("defaultResourceMaximumSubRowHeightInTimeArea"),defaultRowCollapsedDisplayedElementsByExternalTypeMap:{[Ae.Resource]:i.modifyDisplayedElementsForRowItemType(Ae.Resource,t.getAPIOption("defaultResourceCollapsedRowDesign"))},defaultRowExpandedDisplayedElementsByExternalTypeMap:{[Ae.Resource]:i.modifyDisplayedElementsForRowItemType(Ae.Resource,t.getAPIOption("defaultResourceExpandedRowDesign")),[Ae.AllocationRow]:i.modifyDisplayedElementsForRowItemType(Ae.AllocationRow,t.getAPIOption("defaultAllocationRowDesign"))},defaultLeafBarHeight:t.getAPIOption("defaultAllocationBarHeight"),defaultLeafBarInteractions:t.getAPIOption("defaultAllocationAllowedBarDragModes"),forcedLeafBarInteractions:t.getAPIOption("forcedAllocationAllowedBarDragModes"),defaultLeafBarShape:X[t.getAPIOption("defaultAllocationBarShape")],defaultLeafBarSnapTargetsForEnd:t.getAPIOption("defaultAllocationSnapTargetsForEnd"),defaultLeafBarSnapTargetsForStart:t.getAPIOption("defaultAllocationSnapTargetsForStart"),defaultLeafTimeItemSelectable:t.getAPIOption("defaultAllocationBarSelectable"),detailedConstraintSymbolsEnabled:t.getAPIOption("detailedAllocationConstraintSymbolsEnabled"),forcedBarInteractions:t.getAPIOption("forcedAllocationAllowedBarDragModes")}),t._modifyMapOption("defaultRowInteractionsByExternalTypeMap",Ae.Resource,t.getAPIOption("defaultResourceAllowedRowDragModes"));else if(e===be.Loads)t._divD3.classed(bt,!1).classed(ht,!0).classed(Ct,!1).classed(Pe,!1),i.setTableDefinitionIntoWidget(t._ganttWidget),t._ganttWidget.option({detailingRowsVisible:!1,leafBarsVisibleOnParentRows:!1,defaultMaximumRowHeight:t.getAPIOption("defaultResourceMaximumRowHeight")}),t._modifyMapOption("defaultRowInteractionsByExternalTypeMap",Ae.Resource,t.getAPIOption("defaultResourceAllowedRowDragModes"));else if(e===be.SkilledResources){t._divD3.classed(bt,!1).classed(ht,!1).classed(Ct,!0).classed(Pe,!1),i.setTableDefinitionIntoWidget(t._ganttWidget),t._ganttWidget.option({detailingRowsVisible:t.getAPIOption("allocationRowsVisibleInSkilledResourcesView"),leafBarsVisibleOnParentRows:!0,barHeight:t.getAPIOption("defaultAllocationBarHeight"),barTopOffsetAndHeightScaleFactor:t.getAPIOption("allocationBarTopOffsetAndHeightScaleFactor"),leafBarTopOffsetAndHeightScaleFactor:t.getAPIOption("allocationBarTopOffsetAndHeightScaleFactor"),defaultBarInteractions:t.getAPIOption("defaultAllocationAllowedBarDragModes"),ignoreCalendarOnBarInteractions:t.getAPIOption("ignoreCalendarOnAllocationBarInteractions"),defaultBarShape:$[t.getAPIOption("defaultAllocationBarShape")],defaultBarSnapTargetsForEnd:t.getAPIOption("defaultAllocationSnapTargetsForEnd"),defaultBarSnapTargetsForStart:t.getAPIOption("defaultAllocationSnapTargetsForStart"),defaultMaximumRowHeight:t.getAPIOption("defaultResourceMaximumRowHeight"),defaultMaximumSubRowHeight:t.getAPIOption("defaultResourceMaximumSubRowHeightInTimeArea"),defaultRowCollapsedDisplayedElementsByExternalTypeMap:{[Ae.Skill]:i.modifyDisplayedElementsForRowItemType(Ae.Skill,t.getAPIOption("defaultSkillCollapsedRowDesign")),[Ae.Resource]:i.modifyDisplayedElementsForRowItemType(Ae.Resource,t.getAPIOption("defaultResourceCollapsedRowDesign"))},defaultRowExpandedDisplayedElementsByExternalTypeMap:{[Ae.Resource]:i.modifyDisplayedElementsForRowItemType(Ae.Resource,t.getAPIOption("defaultResourceExpandedRowDesign")),[Ae.AllocationRow]:i.modifyDisplayedElementsForRowItemType(Ae.AllocationRow,t.getAPIOption("defaultAllocationRowDesign"))},defaultLeafBarHeight:t.getAPIOption("defaultAllocationBarHeight"),defaultLeafBarInteractions:t.getAPIOption("defaultAllocationAllowedBarDragModes"),forcedLeafBarInteractions:t.getAPIOption("forcedAllocationAllowedBarDragModes"),defaultLeafBarShape:X[t.getAPIOption("defaultAllocationBarShape")],defaultLeafBarSnapTargetsForEnd:t.getAPIOption("defaultAllocationSnapTargetsForEnd"),defaultLeafBarSnapTargetsForStart:t.getAPIOption("defaultAllocationSnapTargetsForStart"),defaultLeafTimeItemSelectable:t.getAPIOption("defaultAllocationBarSelectable"),detailedConstraintSymbolsEnabled:t.getAPIOption("detailedAllocationConstraintSymbolsEnabled"),forcedBarInteractions:t.getAPIOption("forcedAllocationAllowedBarDragModes")});let e=t.getAPIOption("defaultResourceAllowedRowDragModes");e&&(e=e&~T.DragOnSameLevelOnly|T.DragInSameTableParentOnly),t._modifyMapOption("defaultRowInteractionsByExternalTypeMap",Ae.Resource,e)}let a=e===be.Activities?"InActivitiesView":"";t._modifyMapOption("defaultRowInteractionsByExternalTypeMap",Ae.AllocationRow,t.getAPIOption(`defaultAllocationAllowedRowDragModes${a}`)),t._modifyMapOption("forcedRowInteractionsByExternalTypeMap",Ae.AllocationRow,t.getAPIOption(`forcedAllocationAllowedRowDragModes${a}`)),t._ganttWidget.modifyTableViewWidth(i.getAPIOptionMapped("tableViewWidth"),!0),t._ganttWidget.option({topBodyViewAreaVisible:i.getAPIOptionMapped("topViewAreaVisible"),commonBodyViewAreaVisible:i.getAPIOptionMapped("mainViewAreaVisible")}),t.getAPIOption("updateOptimizationEnabled")&&this.model().increaseModificationClassificationVersion()},scrollToCurrentDate:function(){var e=this;e.getAPIOption("currentDate")&&e._ganttWidget.scrollTimeAreaViewToDate(e.getAPIOption("currentDate")).then((function(){}))},resetTimeAreaView:function(){this._app.getOption("timeAxisResolutionUnit")&&this._app.getOption("timeAxisPixelsPerResolutionUnit")&&(this._ganttWidget.timeAxis().baseTimeUnit(Q[this._app.getOption("timeAxisResolutionUnit")]),this._ganttWidget.timeAxis().baseTimeUnitWidth(this._app.getOption("timeAxisPixelsPerResolutionUnit"))),this._ganttWidget.scrollTo(0,0,0,0)},collapseAllRowsAtLevel:function(e,t){this.ganttWidget().collapseAllRowsAtLevel(e,t)},expandAllRowsAtLevel:function(e,t){this.ganttWidget().expandAllRowsAtLevel(e,t)},collapseAllRowsAtLevelRange:function(e,t,i){this.ganttWidget().collapseAllRowsAtLevelRange(e,t,i)},expandAllRowsAtLevelRange:function(e,t,i){this.ganttWidget().expandAllRowsAtLevelRange(e,t,i)},expandOrCollapseAllRowsAtLevelRange:function(e,t,i,a,n){var o=this,r=e===be._Entities?o.entitiesTableWidget():o.ganttWidget(),l=(t===x.Expanded?r.expandAllRowsAtLevelRange:r.collapseAllRowsAtLevelRange).bind(r);let s=this._viewModels[e].rowItemsRoot();if(s){let e=[];if(n&j.Rows&&l(i,a,s),n&j.AllocationRows&&l(i,a,s,!0),n&j.CurvePanes&&r.determineRowItems(!1,s).forEach((function(n){if([Ae.Resource,Ae.ActivityRow,Ae.Skill].includes(n.rab_itemType)){var l=r.getLevelOfRowItem(n);if(l>=i&&l<=a){let i=o._expandOrCollapseCurvesInRow(n,t===x.Expanded,!0);i&&e.push(i)}}})),e.length)return Promise.allSettled(e)}},enableVirtualization:function(e){this._ganttWidget.option("virtualized",e)},showFullTime:function(){this._ganttWidget.option("collapseCalendar",null)},hideNonWorkingTime:function(e){this._nonWorkingTimeCalendar&&!e||(this._nonWorkingTimeCalendar=this.model().calculateNonWorkingTimeCalendar()),this._ganttWidget.option("collapseCalendar",this._nonWorkingTimeCalendar)},hideWeekends:function(){this._weekendCalendar||(this._weekendCalendar=B.createWeekendCalendar(this.currentStart(),this.currentEnd(),6,0)),this._ganttWidget.option("collapseCalendar",this._weekendCalendar)},fitTimeAreaIntoView:function(e,t,i){return this._forceSizeChanged(),this._ganttWidget.fitTimeAreaIntoView(e,t,i)},setTimeResolutionForView:function(e,t,i,a){var n=this;n._forceSizeChanged();var o,r=n._ganttWidget.timeAxis();if(i||(i=r.currentlyVisibleStart()),i){e=Q[e?.toString().toLowerCase()]??L.Seconds,t>0||(t=1);var l=V.timeUnitToSeconds(e)*t,s=V.timeUnitToSeconds(n._ganttWidget.option("timeResolutionUnit"))*n._ganttWidget.option("timeResolutionUnitsPerStep"),d=64;[L.Weeks,L.Months,L.Quarters,L.Years].includes(e)&&(d=n._ganttWidget.timescaleWidget().getMinimumUnitWidthForTimeUnit(e)+1);var c=1e3*Math.max(l,s)*r.timeAreaViewWidth()/d;o=B.addWorkingTime(r.collapseCalendar(),i,c),r.actualEnd()<o&&(i=B.addWorkingTime(r.collapseCalendar(),r.actualEnd(),-c))}return n.fitTimeAreaIntoView(i,o,a)},setWorkDate:function(e){var t=this;if(this._ganttWidget)if(e instanceof Date)this.handleMovedWorkDate(e);else{var i=t._ganttWidget.option("dateLines");Array.isArray(i)&&i.every((function(e){return e.id!==Ft+t._ganttWidget._uniqueID||(e.date=null,t.updateDateLine(e),!1)}))}},handleMovedWorkDate:function(e){this._ganttWidget.moveDateLine(Ft+this._ganttWidget._uniqueID,e)},scrollToWorkDate:function(){var e=this.model().dateTimeValueToDate(this.getAPIOption("workDate"));e&&this._ganttWidget.scrollTimeAreaViewToDate(e)},getVisibleParent:function(e){return this._ganttWidget.getVisibleParent(e)},invalidateRow:function(e,t,i){var a=this;if(e.isResourceRelevant()&&a.updateRowHeight(e),t){var n=function(e){["childRowItems","detailingRowItems"].forEach((function(t){var i=e[t];i&&i.forEach((function(e){e.isResourceRelevant()&&a.updateRowHeight(e),n(e)}))}))};n(e)}this._ganttWidget.invalidateRow(e,i,t)},isSavingAsPDF:function(){return this._isSavingAsPDF},saveAsPDF:function(e,t){var n=this,o=self&&self.PDFDocument?self.PDFDocument:i.m.null,r=self&&self.SVGtoPDF?self.SVGtoPDF:i.m.null,l=self&&self.blobStream?self.blobStream:i.m.null;return new Promise(((i,s)=>{if(o&&r&&l&&!n._isSavingAsPDF){this._isSavingAsPDF=!0;var c=n._ganttWidget,u=c.element().parentElement,p=a.create("div").classed(`ngantt-widget-${c._uniqueID}`,!0),m=n._ganttWidget.actualTableWidth()+1+n._ganttWidget.timeAxis().actualTimeAreaWidth(),_=t&&t.bottomTimescaleVisible?n.getAPIOption("tableTitleAndTimescaleHeight"):0,f=n._ganttWidget.totalHeight()+_,y={printingMode:null!=t?.printingMode?+t.printingMode||0:1,cutMarksVisible:!!t?.cutMarksVisible,zoomFactorInPercent:null!=t?.zoomFactorInPercent&&+t.zoomFactorInPercent||0,horPageCountLimit:null!=t?.horPageCountLimit&&Math.floor(+t.horPageCountLimit)||1/0,verPageCountLimit:null!=t?.verPageCountLimit&&Math.floor(+t.verPageCountLimit)||1/0,pageOrientation:t?.pageOrientation||0,pageFormat:null!=t?.pageFormat?t.pageFormat.toString():"A4",topPageMargin:null!=t?.topPageMargin?Math.max(0,+t.topPageMargin)||0:10,bottomPageMargin:null!=t?.bottomPageMargin?Math.max(0,+t.bottomPageMargin)||0:10,leftPageMargin:null!=t?.leftPageMargin?Math.max(0,+t.leftPageMargin)||0:10,rightPageMargin:null!=t?.rightPageMargin?Math.max(0,+t.rightPageMargin)||0:10,topHTML:t?.topHTML,topText:t?.topText,bottomHTML:t?.bottomHTML,bottomText:t?.bottomText};n._currentSaveAsPDFOptions=y;var b,A,v=72/25.4,I=96/72;if(y.printingMode){var C=Gt[y.pageFormat.toUpperCase()];if(!C){var w=y.pageFormat.split("*");if(Array.isArray(w)&&2==w.length){var T=parseFloat(w[0]),R=parseFloat(w[1]);T&&R&&(C=[T*v,R*v])}}if(!C||C[0]<0||C[1]<0)return void s("Page size not calculable");var S=C[y.pageOrientation],P=C[1-y.pageOrientation];b=S*I,A=P*I}else b=m,A=f;var O={printingMode:y.printingMode||0,cutMarksVisible:!!y.cutMarksVisible,zoomFactorInPercent:y.zoomFactorInPercent,horPageCountLimit:y.horPageCountLimit,verPageCountLimit:y.verPageCountLimit,pageWidth:b,pageHeight:A,margins:{left:y.leftPageMargin*v*I,top:y.topPageMargin*v*I,right:y.rightPageMargin*v*I,bottom:y.bottomPageMargin*v*I},maxTableWidthInPercent:50,maxTitlesHeightInPercent:50,topText:y.topText,bottomText:y.bottomText};if(O.zoomFactorInPercent||y.horPageCountLimit!==1/0||y.verPageCountLimit!==1/0||(O.horPageCountLimit=O.verPageCountLimit=1),O.printingMode){if(O.pageWidth-O.margins.left-O.margins.right<=100)return void s("Inner page width too small");if(O.pageHeight-O.margins.top-O.margins.bottom<=100)return void s("Inner page height too small")}else O.printingMode=1,O.horPageCountLimit=1,O.verPageCountLimit=1,b=O.pageWidth+=O.margins.left+O.margins.right,A=O.pageHeight+=O.margins.top+O.margins.bottom,delete O.zoomFactorInPercent;var D=O.printingMode>0,E=b-O.margins.left-O.margins.right,M=A-O.margins.top-O.margins.bottom;2===O.printingMode?p.style("width",E/2+"px").style("height",M/2+"px"):p.style("width",m+"px").style("height",f+"px");var B=Object.assign({},n._ganttWidget.options,{isForExport:!0,splitterWidth:1,rowItemsRoot:null,bottomTitleHeight:_,visualZoomFactor:1,worldViewVisible:!1});delete B.timeAreaViewParametersChangedFunc,B.tableDefinition=Object.assign(!0,{},B.tableDefinition);var V=new k(p.node(),B);V.timeAxis().baseTimeUnitWidth(c.timeAxis().actualBaseTimeUnitWidth()),V.forceSizeChanged(),n._ganttWidget=V;var N=n._getImageURLsForGanttWidget(n.getAPIOption("symbolColumnTitleSymbolIDs"));n._ganttWidget.options.tableDefinition.symbolColumnTitleImageURLs=N,n.updateSymbols(n.app().symbolsMap());var F=t?.watermarkSymbolID&&n._currentSymbolIDsMap[t.watermarkSymbolID];F&&n._ganttWidget.option("exportWatermarkURL",`///rabSG_${n._ganttWidget._uniqueID}_${F}`),V.timeRange(c.timeAxis().actualStart(),c.timeAxis().actualEnd());var L=c.determineRowItems();L.forEach((function(e){e.rab_temp_initiallyCollapsed=e.initiallyCollapsed,e.initiallyCollapsed=c.isRowCollapsed(e),e.rab_temp_leavesInitiallyCollapsed=e.leavesInitiallyCollapsed,e.leavesInitiallyCollapsed=c.areRowLeavesCollapsed(e)})),u.prepend(p.node()),V.option("dateLines",n._ganttWidget.option("dateLines"));var W=n._ganttWidget._uniqueID;n._ganttWidget._uniqueID=c._uniqueID,n.updateDateLinePresentations(W),n._ganttWidget._uniqueID=W,V.option("rowItemsRoot",c.options.rowItemsRoot);var x=n.viewModel().linkItems();x&&V.option("linkItems",x.slice());var j=D?Math.max(b,A):Math.max(m,f),H=Math.min(1e4/j,1);O.outerScaleFactor=H;var G=p.select(".ngantt-svg-outer-frame").node(),K=void 0,U=p.select(".ngantt-svg-root defs").node();let d={},z=/{{@(.*(?=}}))}}/g;for(const e of[y.topHTML,y.bottomHTML])if(e)for(const t of e.matchAll(z)){let e=t[1],i=n._app.symbolsMap()[e];i&&i.URL&&(d["_"+e]=i.URL)}O.topHTML=y.topHTML?.replace(z,((e,t)=>d["_"+t]||"")),O.bottomHTML=y.bottomHTML?.replace(z,((e,t)=>d["_"+t]||"")),g.convertImagesToBase64(U).then((()=>V.updateExportWatermarks())).then((()=>{g.replaceUseTagsBySVGTags(p.select(".ngantt-svg-root").node(),/^#rabS/),L.forEach((function(e){void 0!==e.rab_temp_initiallyCollapsed?e.initiallyCollapsed=e.rab_temp_initiallyCollapsed:delete e.initiallyCollapsed,delete e.rab_temp_initiallyCollapsed,void 0!==e.rab_temp_leavesInitiallyCollapsed?e.leavesInitiallyCollapsed=e.rab_temp_leavesInitiallyCollapsed:delete e.leavesInitiallyCollapsed,delete e.rab_temp_leavesInitiallyCollapsed})),L.length=0;var a,d=V.preparePageForPrinting(O),u={};t?.author&&(u.Author=t.author),t?.title&&(u.Title=t.title),t?.subject&&(u.Subject=t.subject),t?.keywords&&(u.Keywords=t.keywords),K=new o({compress:!0,pdfVersion:"1.7",info:u,size:void 0,autoFirstPage:!1,ownerPassword:t?.ownerPassword,userPassword:t?.userPassword,permissions:{printing:null==t?.permissionToPrint?"highResolution":t.permissionToPrint,modifying:!!(t?.permissionToModify??1),copying:!!(t?.permissionToCopy??1),annotating:!!(t?.permissionToAnnotate??1),contentAccessibility:!!(t?.permissionToAccessContent??t?.permissionToCopyForContentAccessibility??1),documentAssembly:!!(t?.permissionToAssembleDocument??1)}});for(let e=1;e<=d.maxPageNumber;e++){var m=()=>{if(!n._cancelSaveAsPDF)return a&&(d=V.preparePageForPrinting(O,d)),n._preparePageForPrinting(d)??Promise.resolve()};if(a=a?a.then(m):m()){a=(a=a.then((()=>V.prepareFrameAreas(O,d)))).then((()=>new Promise((e=>{n._cancelSaveAsPDF||(K.addPage({size:[b*H*.75,A*H*.75]}),r(K,G,0,0,{useCSS:!0,width:d.pageWidth,height:d.pageHeight})),n._cancelSaveAsPDF?e():d.currentPageNumber<d.maxPageNumber?window.setTimeout(e,50):e()}))))}}var _=t=>{if(n._cancelSaveAsPDF||t)s(t||"Canceled");else{var a=K.pipe(new l);a.on("finish",(function(){var t=a.toBlob("application/pdf");if(!e){var n=new Date;n.setMilliseconds(0),n.setUTCMinutes(n.getUTCMinutes()-n.getTimezoneOffset()),e="VSW-SavedChart_"+n.toISOString().replace(".000Z","").replace(/:/g,"")+".pdf"}h.saveAs(t,e),i()}))}K.end(),n._ganttWidget=c,V.destroy(),p.remove(),delete n._isSavingAsPDF,delete n._cancelSaveAsPDF,delete n._currentSaveAsPDFOptions};a?a.then((()=>_()),(e=>_(e))):_()}))}else d.assert(!n._isSavingAsPDF,"saveAsPDF: Concurrent call active"),d.assert(o,"saveAsPDF: PDFKit library not loaded"),d.assert(r,"saveAsPDF: SVGtoPDFKit library not loaded"),d.assert(l,"saveAsPDF: BlobStream library not loaded")}))},_getCurrentSaveAsPDFOptions:function(){return this._currentSaveAsPDFOptions},_preparePageForPrinting:function(){},cancelSaveAsPDF:function(){this._isSavingAsPDF&&(this._cancelSaveAsPDF=!0)},getSupportedPageFormatsForPrinting:function(){return Object.keys(Gt)},addDateLine:function(e,t){this._ganttWidget&&(this._ganttWidget.addDateLine(e,t),t||this.updateDateLinePresentations())},updateDateLine:function(e,t){if(this._ganttWidget){var i=this._ganttWidget.option("dateLines");i.every((function(t,a){return t.id!==e.id||(i[a]=e,!1)}))||(this._ganttWidget.option("dateLines",i),!1!==t&&this.updateDateLinePresentations())}},removeDateLine:function(e,t){this._ganttWidget&&(this._ganttWidget.removeDateLine(e),!1!==t&&this.updateDateLinePresentations())},updateDateLinePresentations:function(e){var t=this,i=t._ganttWidget.option("dateLines");if(i){var n=`rab${t._ganttWidget._uniqueID}_`;i.forEach((function(i){if(i.id.startsWith(n)){var o=a.select(t._ganttWidget.element()).select("#"+i.id);o.select("line").style("stroke",i.rab_lineColor||"black").style("stroke-width",i.rab_lineWidth||1).style("stroke-dasharray",i.rab_lineDashArray||null),o.select("text").style("fill",i.rab_labelColor||"black");var r=o.property("_ngantt_date-line-symbol-box");r&&r.setSymbol(`#rabSB_${e??t._ganttWidget._uniqueID}_${t._currentSymbolIDsMap[i.rab_symbolID]}`)}}))}t.getAPIOption("currentDate")?t._updateCurrentDateLinePresentation():t._ganttWidget.renderWorldView()},_determineCurveTooltipArgs:function(e,t){var i,a,n,o,r=this.viewModel().resourceByItem(e);if(e.data().rab_loadCurveData)if(Array.isArray(r.rab_loadCurveData)){var l,s=this.model().curveByID(r.LoadCurveID),d=s.Type,c=s.InterpolationType;a={},r.rab_loadCurveData.forEach((function(e){if(n=c===ye.Linear?e.getValueAtDate(t.date,!0,!0):e.determinePreviousOrSameDateWithValue(t.date)){var o=c===ye.Linear?n.interpolatedValue:n.value.value;l?d===fe.CurveStack&&void 0!==o&&(a[l]=Z(a[l]-o,a[l],o)):i=o,a[e.rab_curveID]=o}l=e.rab_curveID}))}else(n=c===ye.Linear?e.data().rab_loadCurveData.getValueAtDate(t.date,!0,!0):e.data().rab_loadCurveData.determinePreviousOrSameDateWithValue(t.date))&&(i=c===ye.Linear?n.interpolatedValue:n.value.value);var u=e.data().rab_highestCapacityCurveData;u&&(n=u.determinePreviousOrSameDateWithValue(t.date))&&(o=n.value.value);var p={date:t.date,itemType:Ae.Curve,item:e,load:i,capacity:o};return a&&(p.singleLoads=a),p},_handleBeforeShowingTooltip:function(){},_showTooltip:function(e){var t=this;if(!e.sender||!(e.ganttWidget||e.tableWidget||t._ganttWidget).isInInteraction()&&!t._curvePaneSplitterWidget.isCurrentlyDragged()){var i,n=t._showTooltipCounter=void 0!==t._showTooltipCounter?++t._showTooltipCounter:0,o=e.phantom,r=e.sender,l=e.elem;if(r&&!t.getAPIOption("triggeringOfOnShowTooltipForEntriesInBarsEnabled")){(r.rab_itemType===Ae.ActivityEntry||r.rab_itemType===Ae.AllocationEntry&&r.rab_parentItem&&r.rab_parentItem.rab_unifiedBarDesign&q.Grouped)&&(r=r.rab_parentItem,l=t._ganttWidget.getElementOfItem(r));let e=t._tooltipWidget.currentData();if(e&&e.type===(r.rab_itemType===Ae.Activity?"activity":"allocation")&&e.item===r)return void--t._showTooltipCounter}if(!t._tooltipWidget.currentData()||r!==t._lastItemForOnShowTooltipTriggered||e.className===He||t._lastCellIndex!==e.cellIndex){if(t._lastItemForOnShowTooltipTriggered=r,t._lastCellIndex=e.cellIndex,r){if([Ae.Activity,Ae.Allocation].includes(r.rab_itemType)){var s=this._ganttWidget.getParent(r);if(s){var d=r.rab_subItemType;(r=s).rab_subItemType=d}}var c,u,p;if(e.itemType===Ae.Curve){var h=t._ganttWidget.eventPointToTimeArea(e.event);if(h){let a=t._tooltipWidget.currentData();a&&"curve-values"===a.type&&((c=t._tooltipWidget.option("delay"))&&(t._tooltipDelay=c),t._tooltipWidget.option("delay",0)),u=r.data().CurveTooltipTemplateID||t.getAPIOption("defaultResourceCurveTooltipTemplateID");var g=Object.assign(t._determineCurveTooltipArgs(r,h),{ganttWidget:t._ganttWidget,innerHTML:i,cancel:!1,elem:l,event:e.event,tooltipTemplateID:u,promise:null});t._handleBeforeShowingTooltip(g);let o=function(i){t._tooltipWidget.display({refElem:l,item:r,type:"curve-values",followCursorMode:!0,content:i,y:h.y},I.PositionType.BottomX,l,h.pageX,e.event)};!g.cancel&&g.innerHTML?o(g.innerHTML):t._tooltipWidget.display(null),g.promise&&"function"==typeof g.promise.then&&g.promise.then((function(e){n===t._showTooltipCounter&&o(e)}),(function(){t._tooltipWidget.display(null)}))}else t._tooltipWidget.display(null);return void window.setTimeout((function(){t._element&&t._tooltipDelay&&(t._tooltipWidget.option("delay",t._tooltipDelay),delete t._tooltipDelay)}),1)}let y=!1;switch(r.rab_itemType){case Ae.Resource:p="resource",y=!0,u=t.viewType()===be.SkilledResources?r.data().SkilledRowTooltipTemplateID||t.getAPIOption("defaultSkilledResourceRowTooltipTemplateID"):r.data().RowTooltipTemplateID||t.getAPIOption("defaultResourceRowTooltipTemplateID");break;case Ae.Skill:p="skill",y=!0,u=r.data().RowTooltipTemplateID||t.getAPIOption("defaultSkillRowTooltipTemplateID");break;case Ae.Entity:p="entity",y=!0,u=r.data().RowTooltipTemplateID||t.getAPIOption("defaultEntityRowTooltipTemplateID");break;case Ae.AllocationRow:if(t.viewType()===be.SkilledResources&&(p="allocationRow",y=!0,u=r.data().SkilledRowTooltipTemplateID||t.getAPIOption("defaultSkilledAllocationRowTooltipTemplateID")))break;case Ae.ActivityRow:{let e=r.rab_itemType===Ae.AllocationRow?"llocation":"ctivity";p=`a${e}Row`,y=!0,u=r.data().RowTooltipTemplateID||t.getAPIOption(`defaultA${e}RowTooltipTemplateID`);break}case Ae.Allocation:case Ae.Activity:case Ae.ActivityBaseline:case Ae.ActivityFrame:{let e=r.rab_itemType===Ae.Allocation?"llocation":"ctivity";p=`a${e}`,y=!0,t.viewType()===be.SkilledResources&&(u=r.data().SkilledBarTooltipTemplateID||t.getAPIOption("defaultSkilledAllocationBarTooltipTemplateID")),u||(u=r.data().BarTooltipTemplateID||t.getAPIOption(`defaultA${e}BarTooltipTemplateID`));break}case Ae.AllocationEntry:case Ae.ActivityEntry:{let e=r.rab_itemType===Ae.AllocationEntry?"llocation":"ctivity";p=`a${e}Entry`,y=!0,t.viewType()===be.SkilledResources&&(u=r.rab_parentItem.data().SkilledBarTooltipTemplateID||t.getAPIOption("defaultSkilledAllocationBarTooltipTemplateID")),u||(u=r.rab_parentItem.data().BarTooltipTemplateID||t.getAPIOption(`defaultA${e}BarTooltipTemplateID`));var m=t._tooltipWidget.currentData();m&&m.type===p&&m.item.rab_parentItem===r.rab_parentItem&&((c=t._tooltipWidget.option("delay"))&&(t._tooltipDelay=c),t._tooltipWidget.option("delay",0));break}case Ae.Link:p="link",u=r.data().TooltipTemplateID||t.getAPIOption("defaultLinkTooltipTemplateID");break;case Ae.PeriodHighlighterEntry:p="periodHighlighterEntry",u=r.entries?.[e.entryIndex].rab_tooltipTemplateID||t.getAPIOption("defaultPeriodHighlighterEntryTooltipTemplateID");break;case Ae.TimeArea:p="timeArea";break;case Ae.Timescale:p="timescale"}if(p&&(!o||!t._ganttWidget.options.dragDateLinesVisible)){var _=a.select(l).select("."+Et).node();g={itemType:r.rab_itemType,subItemType:r.rab_subItemType,item:r,innerHTML:i,cancel:!1,elem:_||l,event:e.event,tooltipTemplateID:u,cellIndex:e.cellIndex,promise:null};r.rab_itemType===Ae.PeriodHighlighterEntry&&(g.rowItem=e.rowItem,g.entryIndex=e.entryIndex),t._handleBeforeShowingTooltip(g),t._tooltipDelay&&g.innerHTML===m?.content&&(t._tooltipDuration=t._tooltipWidget.option("duration"),t._tooltipWidget.option("duration",0));let o=function(i,a,n){t._tooltipWidget.display({refElem:l,item:r,type:p,content:i,useRefElemWidth:y},n?I.PositionType.Bottom:I.PositionType.BottomX,a,n?a:e.event?e.event.clientX:null,e.event),window.setTimeout((function(){t._element&&t._tooltipDelay&&(t._tooltipWidget.option("delay",t._tooltipDelay),delete t._tooltipDelay,t._tooltipDuration&&(t._tooltipWidget.option("duration",t._tooltipDuration),delete t._tooltipDuration))}),1)};if(!g.cancel&&g.innerHTML){var f;switch(p){case"link":f={getBoundingClientRect:function(){return{left:void 0,top:e.event.clientY,right:void 0,bottom:e.event.clientY,width:void 0,height:void 0}}};break;case"allocation":case"activity":"twice"===r.zOrder&&(f={getBoundingClientRect:function(){let e=t._ganttWidget.determineTimeItemExtent(r,!0),i=l.getBoundingClientRect();return{left:i.left+e.left,right:i.left+e.right,top:i.top+e.top,bottom:i.top+e.bottom}}});break;case"allocationRow":case"activityRow":case"resource":case"entity":case"skill":f={getBoundingClientRect:function(){let t=e.tableWidget??e.ganttWidget,i=t.element().getBoundingClientRect(),a=(_??l).getBoundingClientRect();return{left:i.left,right:i.left+t.actualTableViewWidth(),top:a.top,bottom:a.bottom}},isForRowObject:!0}}o(g.innerHTML,f??_??l,f?.isForRowObject)}else t._tooltipWidget.display(null);return void(g.promise&&"function"==typeof g.promise.then&&g.promise.then((function(e){n===t._showTooltipCounter&&o(e,f??_??l,f?.isForRowObject)}),(function(){t._tooltipWidget.display(null)})))}}if(!o&&t.ganttWidget().option("dragDateLinesVisible")){g={itemType:void 0,item:null,cancel:!1,event:void 0};t._handleBeforeShowingTooltip(g),t._tooltipWidget.display(null)}}}},_handleBackgroundTap:function(){this._deselectOtherItemsIfItemIsNotSelected(null,null,K.BackgroundClick),this._tooltipWidget.display(null)},_rowExpandOrCollapseFunc:function(e){e.rowItem.rab_itemType===Ae.AllocationRow?e.cancel=!0:(e.tableType=Ie.Gantt,this._handleRowExpandOrCollapseFunc(e))},_handleRowExpandOrCollapseFunc:function(){},_rowExpandedOrCollapsedFunc:function(e){this.updateRowHeight(e.rowItem),e.tableType=Ie.Gantt,this._handleRowExpandedOrCollapsedFunc(e)},_handleRowExpandedOrCollapsedFunc:function(e){e.rowItem.handleRowExpandedOrCollapsed(e.isCollapsed,e.areLeavesCollapsed),this._tooltipWidget.display(null)},_updateLinks:function(){var e=this,t=e._ganttWidget.options.linkItems,i=e.viewModel().linkItems()?.slice();!t==!i&&(!i||i.length===t.length&&i.every((function(e,i){return e===t[i]&&!e._rab_isModified})))||e._ganttWidget.option("linkItems",i),[t,i].forEach((e=>{e&&e.forEach((function(e){delete e._rab_isModified}))}))},_beforeRemoveAll:function(){var e=this;e._tooltipWidget.display(null),e._ganttWidget.option("updateSuspended",!0),e._ganttWidget.option("rowItemsRoot",null),e._ganttWidget.disposeUnusedItems(),e._entitiesTableWidget&&(e._entitiesTableWidget.option("updateSuspended",!0),e._entitiesTableWidget.option("rowItemsRoot",null),e._entitiesTableWidget.disposeUnusedItems())},_afterRemoveAll:function(){},_composeObjectIDFromItemType:function(e,t){var i=[];switch(e){case Ae.Resource:case Ae.Allocation:case Ae.AllocationRow:case Ae.Activity:case Ae.ActivityRow:case Ae.Link:i.push(t.Role??"")}return i.push(t.ID),i.join(c)},_validateDraggedItems:function(e){var t=this;if(!t._dragItemCache||!Object.keys(t._dragItemCache).length)return!0;var i=function(e){var i=e.rab_itemType,a=e,n=Object.keys(t._dragItemCache),o=n[n.map((function(e){return t._dragItemCache[e]})).indexOf(e)];o||(o=n[n.map((function(e){return t._consolidatedDragItemCache[e]})).indexOf(e)]),e=t._consolidatedDragItemCache[o];let r=e.data()?.__MultiplierPrimaryKey;var l;if(e.data())switch(i){case Ae.Entity:l=t.model().entityByID(o);break;case Ae.Resource:l=r?t.model().skilledResourceByIDAndSkillID(o,r):t.model().resourceByID(o);break;case Ae.Skill:l=t.model().multipliedObjectByPrimaryKey(i,o,void 0,r);break;case Ae.Allocation:case Ae.AllocationRow:l=r?t.viewType()===be.Activities?t.model().multipliedAllocationByIDAndActivityID(o,r):t.model().skilledAllocationByIDAndSkillID(o,r):t.model().allocationByID(o);break;case Ae.Activity:case Ae.ActivityRow:l=t.model().activityByID(o)}var s=l&&t.viewModel(i===Ae.Entity).itemByWrapper(l);return s&&e.rab_itemType===Ae.Activity&&(s=a),s&&e.rab_itemType===Ae.Allocation&&(s=s.timeItems?.[0]),s};e.sender=i(e.sender);var a=!(!e.sender||!e.sender.data());return a&&(e.coupledItems?(e.coupledItems=e.coupledItems.map((function(e){return i(e)})).filter((function(e){return e})),a=!!e.coupledItems.length):e.startsAndEndsOfCoupledItems&&(a=e.startsAndEndsOfCoupledItems.some((function(e){return e.item=i(e.item),!(!e.item||!e.item.data())})))),a},_dragStartFunc:function(e){var t=this,i=e.sender;t._tooltipWidget.display(null),t._dragItemCache={},t._consolidatedDragItemCache={},e.elemType!==E.Bar&&e.elemType!==E.Row&&e.elemType!==E.TableRow||(t._dragItemCache[t._composeObjectIDFromItemType(i.rab_itemType,i.data())]=i,t._consolidatedDragItemCache[t._composeObjectIDFromItemType(i.rab_itemType,i.data())]=i),e.coupledItems&&e.coupledItems.forEach((function(e){t._dragItemCache[t._composeObjectIDFromItemType(e.rab_itemType,e.data())]=i,t._consolidatedDragItemCache[t._composeObjectIDFromItemType(e.rab_itemType,e.data())]=e})),e.tableType=Ie.Gantt,t._doDragStartFunc(e),e.cancel||(e.elemType!==E.Bar&&e.elemType!==E.Row&&e.elemType!==E.TableRow||t._deselectOtherItemsIfItemIsNotSelected(e.sender,e.ganttWidget,K.DragStart),i&&(i.rab_itemType===Ae.Allocation&&t._handleStartSuitableTargetIDs(i.data(),e),1===Object.keys(t._dragItemCache).length&&(i.rab_itemType!==Ae.Allocation&&i.rab_subItemType!==Ae.Activity||t._showDragBoundaries(i.data()))))},_showDragBoundaries:function(e){var t=this,i=t.ganttWidget().option("dateAreas")||[],a=t.model(),n=t.getAPIOption("dragDatesLimitingInteraction");if(t._hideDragBoundaries(i),e.EarliestDragStart){var o=a.dateTimeValueToDate(e.EarliestDragStart);if(o){var r=t.currentStart();o>r&&(t._dragEarliestDateArea={className:$e,id:qe,start:r,end:o,inForeground:n},i.push(t._dragEarliestDateArea))}}if(e.LatestDragEnd){var l=a.dateTimeValueToDate(e.LatestDragEnd);if(l){var s=t.currentEnd();l<s&&(t._dragLatestDateArea={className:rt,id:lt,start:l,end:s,inForeground:n},i.push(t._dragLatestDateArea))}}t.ganttWidget().option("dateAreas",i)},_hideDragBoundaries:function(e){var t=this,i=!!e;if(i||(e=t.ganttWidget().option("dateAreas")),e){let a=!1;["_dragEarliestDateArea","_dragLatestDateArea"].forEach((i=>{t[i]&&(e.splice(e.indexOf(t[i]),1),delete t[i],a=!0)})),!i&&a&&t.ganttWidget().option("dateAreas",e)}},_checkShowHideDragBoundaries:function(e){var t=this;t.getAPIOption("dragDatesShownForSingleSelectedObject")&&!t._ganttWidget.isInInteraction()?(e||(e=t.ganttWidget().selectedTimeItems()),1===e.length?t._showDragBoundaries(e[0].data()):t._hideDragBoundaries()):t._hideDragBoundaries()},_handleStartSuitableTargetIDs:function(e,t){var i,a,n,o=this,r=o.viewType();let l;if([be.Resources,be.SkilledResources].includes(r)?(n=o.viewModel().getAPIOptionName("allocationRowsVisible"),i=["SuitableResourceIDs"],a=[r===be.SkilledResources?de:se],l=[o._dragSuitableResourceTargetIDsMap=new Map]):r===be.Activities&&(n="allocationRowsVisibleInActivitiesView",i=["SuitableActivityIDs"],a=[J],l=[o._dragSuitableActivityTargetIDsMap=new Map],o.getAPIOption(n)&&o.getAPIOption("resourcesVisibleInActivitiesView")&&(i.push("SuitableResourceIDs"),a.push(oe),l.push(o._dragSuitableResourceTargetIDsMap=new Map))),i){let s;l.forEach(((d,u)=>{let p=0,h=i[u],g=a[u];var m=function(e,t,i){t[i]&&(t[i].forEach((function(t){(t=null!=t?t.toString():"")&&e.set(t,(e.get(t)||0)+1)})),p++)};m(d,e,h);let _=r!==be.SkilledResources||e instanceof me?void 0:e.SkillID??"";if(t.coupledItems&&(t.coupledItems.slice().forEach(((e,i)=>{let a=e.data();void 0===_||a.SkillID===_?m(d,a,h):t.coupledItems.splice(i,1)})),Object.keys(d).forEach((function(e){d.get(e)<p&&delete d[e]}))),p){let e=u===l.length-1,t=u&&o._dragSuitableActivityTargetIDsMap.size?o._dragSuitableActivityTargetIDsMap:{get:()=>!0},i=function(e,i){let a=!(!d.get(e.ID)||!u&&void 0!==_&&e.__SkillID!==_||!t.get(e.__MultiplierPrimaryKey?.split(c)[1]));return i.rab_temp_isSuitableTarget=a,a},a=function(t,i){t[i]=!0,e&&t.detailingRowItems?.forEach((e=>{e.rab_temp_isSuitableTarget=t.rab_temp_isSuitableTarget,a(e,i)}))};o._handleCovering(g,e?n:void 0,i,a)&&(s=!0)}else d===o._dragSuitableResourceTargetIDsMap?delete o._dragSuitableResourceTargetIDsMap:delete o._dragSuitableActivityTargetIDsMap})),s&&o.viewType()===be.SkilledResources&&o._handleCovering(re,void 0,(()=>!1),(function(e,t){e.rab_temp_isSuitableTarget=!1,e[t]=!0})),s&&o.update()}},_handleEndSuitableTargetIDs:function(){var e=this;let t;[e._dragSuitableActivityTargetIDsMap,e._dragSuitableResourceTargetIDsMap].forEach((i=>{if(i){var a,n,o=e.viewType();i===e._dragSuitableResourceTargetIDsMap?(a=o===be.SkilledResources?de:o===be.Activities?oe:se,n=e.viewModel().getAPIOptionName("allocationRowsVisible")):(a=J,n=e.getAPIOption("resourcesVisibleInActivitiesView")?void 0:"allocationRowsVisibleInActivitiesView");let r=function(e,t){delete e.rab_temp_isSuitableTarget,delete e[t],e.detailingRowItems?.forEach((e=>{r(e,t)}))};e._handleCovering(a,n,void 0,r)&&(t=!0)}})),e.viewType()===be.SkilledResources&&e._handleCovering(re,void 0,void 0,(function(e,t){delete e.rab_temp_isSuitableTarget,delete e[t]}))&&(t=!0),t&&e.update(),delete e._dragSuitableActivityTargetIDsMap,delete e._dragSuitableResourceTargetIDsMap},_handleCovering:function(e,t,i,a){var n=this;let o=n.ganttWidget(),r=n.viewModel(),l=t&&n.getAPIOption(t);var s;return n.model().getChildrenArray(e).forEach((function(e){var t=r._item(e);if(t&&(i?a(t,i(e,t)?"isCoveredAndHighlighted":"isCovered"):(a(t,"isCoveredAndHighlighted"),a(t,"isCovered")),o.getElementOfItem(t))){let e=t=>{o.updateRowConcerningCoveredAttributes(t),l&&t.detailingRowItems?.forEach((t=>{e(t)}))};e(t),s=!0}})),s},_doDragStartFunc:function(){},_dragEndFunc:function(e){var t=this;t._validateDraggedItems(e)&&(e.tableType=Ie.Gantt,t._doDragEndFunc(e)),t._handleEndSuitableTargetIDs(),t._checkShowHideDragBoundaries(),delete t._dragItemCache,delete t._consolidatedDragItemCache},_doDragEndFunc:function(){},_draggedFunc:function(e){e.tableType=Ie.Gantt,this._doDraggedFunc(e)},_doDraggedFunc:function(e){var t=this;if([Ae.Allocation,Ae.Entity].includes(e.sender.rab_itemType)&&(e.newRowItemIsSuitableTarget=!1!==e.newRowItem?.rab_temp_isSuitableTarget),t._validateDraggedItems(e)&&e.elemType===E.Bar){var i=e.sender;if(i.rab_itemType===Ae.Activity){let t=(i.rab_parentItem??i).rab_rowItem,a=e.newRowItem;if(a)if(a.rab_itemType!==Ae.ActivityRow)e.dropAllowed=!1;else if(e.interaction&P.DragVer&&a!==t){for(;a&&a!==t;)a=a.rab_parentRowItem;a&&(e.dropAllowed=!1)}}if(t.getAPIOption("dragDatesLimitingInteraction")&&[Ae.Allocation,Ae.Activity].includes(i.rab_itemType)){var a,n=i.data(),o=t.model(),r=!1;if(t._dragEarliestDateArea&&n.EarliestDragStart){var l=o.dateTimeValueToDate(n.EarliestDragStart);l&&e.start<l&&(a=B.calculateWorkingTime(e.actualCalendar,e.end,e.start),e.start=B.addWorkingTime(e.actualCalendar,l,0),e.interaction&P.DragHor&&(e.end=B.addWorkingTime(e.actualCalendar,l,a)),r=!0)}if(!r&&t._dragLatestDateArea&&n.LatestDragEnd){var s=o.dateTimeValueToDate(n.LatestDragEnd);s&&e.end>s&&(a=B.calculateWorkingTime(e.actualCalendar,e.end,e.start),e.end=B.addWorkingTime(e.actualCalendar,B.addWorkingTime(e.actualCalendar,s,-1),1),e.interaction&P.DragHor&&(e.start=B.addWorkingTime(e.actualCalendar,e.end,-a)))}}}},_droppedFunc:function(e){e.tableType=Ie.Gantt,this._validateDraggedItems(e)&&this._doDroppedFunc(e)},_doDroppedFunc:function(){},_detachEventListenersExFunc:function(e){e.elemType===E.Bar?a.selectAll(e.elems).on(Dt,null):e.elemType===E.Row&&a.selectAll(e.elems).selectAll("."+je+",."+He).on(p.TARGET_EVENT_NAME,null).on(Dt,null)},_checkPossibleInteractionsFunc:function(){},_checkRowInsertionModeFunc:function(e){e.sender.rab_itemType===Ae.AllocationRow&&e.newRowItem&&(e.rowInsertionMode!==w.None?(e.newRowItem.rab_itemType===Ae.Skill||e.newRowItem.rab_itemType===Ae.AllocationRow&&e.newRowItem.data().isInOtherMultiplierSourceObject()||e.newRowItem.rab_itemType===Ae.ActivityRow&&this.getAPIOption("resourcesVisibleInActivitiesView")&&e.newRowItem.detailingRowItems?.includes(e.sender.rab_parentRowItem)||e.rowInsertionMode!==w.InsertAsChild&&e.newRowItem.rab_itemType!==Ae.AllocationRow)&&(e.rowInsertionMode=w.None):e.newRowItem.rab_itemType===Ae.ActivityRow&&e.sender.data().ActivityID!==e.newRowItem.data().ID||e.newRowItem.rab_itemType===Ae.Resource&&this.viewType()===be.SkilledResources&&e.sender.data().ResourceID!==e.newRowItem.data().ID?e.rowInsertionMode=w.InsertAsChild:e.newRowItem.rab_itemType===Ae.AllocationRow&&this.viewType()===be.SkilledResources&&e.sender.data().SkillID===e.newRowItem.data().SkillID&&(e.rowInsertionMode=w.InsertAsNextSibling))},_checkVisualZoomFactorFunc:function(){},_timeAreaViewParametersChangedFunc:function(){},_curvePaneResizedFunc:function(){},_verticalScrollOffsetChangedFunc:function(){},_onEventFunc:function(e){e.tableType=Ie.Gantt,this._doOnEventFunc(e)},_doOnEventFunc:function(e){var t=e.item||e.sender||e.rowItem;if(t&&t.rab_itemType===Ae.PeriodHighlighterEntry&&(t=e.rowItem),!t||!t.data||t.data())switch(e.eventType){case"tooltip":this._showTooltip(e);break;case"tap":e.sender&&"TimeAreaBackground"!==e.sender?"TableTitleCell"===e.sender?this._handleTableTitleCellTap(e):"object"==typeof e.sender&&this._handleItemTap(e):this._handleBackgroundTap();break;case"doubletap":"object"==typeof e.sender&&this._handleItemDoubleTap(e);break;case"contextmenu":this._handleContextMenuEvent(e)}},_handleTableTitleCellTap:function(){},_handleItemTap:function(e){var t=this;if("touch"===e.hammerEvent.pointerType){var i=e.sender,a=t._tooltipWidget.option("delay");t._tooltipWidget.option("delay",0);var n=e.tableType===Ie.Gantt,o=n?t._ganttWidget:t._entitiesTableWidget,r={sender:i,elem:o.getElementOfItem(i,2),event:e.event};r[n?"ganttWidget":"tableWidget"]=o,t._showTooltip(r),t._tooltipWidget.option("delay",a),t._tooltipWidget.option("lastTapEvent",e.hammerEvent),t._savedTapEventCallbackArgs=e}},_handleItemDoubleTap:function(){},_handleContextMenuEvent:function(e){var t=this;t._tooltipWidget.display(null),t._deselectOtherItemsIfItemIsNotSelected(e.sender,e.ganttWidget||e.tableWidget,K.ContextMenu),t._app.contextMenuHandler().close()},_deselectOtherItemsIfItemIsNotSelected:function(e,t,i){var a=this;if(a._ganttWidget.showMarkingTemporarily(null),a._entitiesTableWidget&&a._entitiesTableWidget.showMarkingTemporarily(null),a._options.deselectItemsOnInteractionWithUnselectedItem&&(!e||e instanceof pe&&!t.isTimeItemSelected(e)||e instanceof ue&&!t.isRowItemSelected(e)||e instanceof he&&!t.isLinkItemSelected(e))){var n=a._ganttWidget.selectedTimeItems();if(n.length){var o={ganttWidget:a._ganttWidget,timeItem:null,oldSelectedItems:n,oldSelectedRowItems:[],oldSelectedLinkItems:[],newSelectedItems:[],reason:i,reasonItem:e};a._selectTimeItemFunc(o),o.cancel||a._ganttWidget.selectedTimeItems([])}else{if(a._entitiesTableWidget&&(n=a._entitiesTableWidget.selectedRowItems()).length){o={tableWidget:a._entitiesTableWidget,rowItem:null,oldSelectedItems:n,oldSelectedTimeItems:[],oldSelectedLinkItems:[],newSelectedItems:[],reason:i,reasonItem:e};a._entitiesTableSelectRowItemFunc(o),o.cancel||a._entitiesTableWidget.selectedRowItems([])}if(!n.length)if((n=a._ganttWidget.selectedRowItems()).length){o={ganttWidget:a._ganttWidget,rowItem:null,oldSelectedItems:n,oldSelectedTimeItems:[],oldSelectedLinkItems:[],newSelectedItems:[],reason:i,reasonItem:e};a._selectRowItemFunc(o),o.cancel||a._ganttWidget.selectedRowItems([])}else if((n=a._ganttWidget.selectedLinkItems()).length){o={ganttWidget:a._ganttWidget,linkItem:null,oldSelectedItems:n,oldSelectedTimeItems:[],oldSelectedRowItems:[],newSelectedItems:[],reason:i,reasonItem:e};a._selectLinkItemFunc(o),o.cancel||a._ganttWidget.selectedLinkItems([])}}}},updateRowHeight:function(e,t){delete e.totalHeight;var i=this,a=i.viewType(),n=0;let o=e.data(),r=o.data();r instanceof ge&&(o=r);var l=o.rab_hidden||0===e.totalHeight;if(l&&a!==be.Loads)e.totalHeight=0,delete e.additionalHeight;else{if([se,J].includes(o.getPropertyName())&&!o.isPseudo()&&!t&&i._calculateCurvesPaneHeight(e)){let t=i._ganttWidget.determineActualRowMargins();n+=(e.rab_loadCurvePaneHeight||0)+(e.rab_inventoryCurvePaneHeight||0)+2*t.bottom,e.rab_loadCurvePaneHeight&&e.rab_inventoryCurvePaneHeight&&(n+=2*t.bottom)}a===be.Loads?(delete e.additionalHeight,e.rab_totalVisibleHeightInLoadsView=n,e.totalHeight=l?0:o.isPseudo()?void 0:n):e.additionalHeight=n}},updateAllRowHeights:function(){var e=this;if(null!=e.viewType()){let t=e.viewModel().rowItemsRoot();t&&e._ganttWidget.determineRowItems(!1,t).forEach((function(t){e.updateRowHeight(t)}))}},_updateRowVisibility:function(e,t){let i=!1,a=e.data();a instanceof ge&&(e=a);var n=e.isPseudo()||!e.rab_hidden?void 0:0;if(0!==n&&(t.rab_itemType===Ae.AllocationRow||t.rab_itemType===Ae.Resource&&this.viewType()===be.SkilledResources)){let e=t.rab_parentRowItem.data(),i=e.data();i instanceof ge&&(e=i),e.rab_hidden&&(n=0)}return t.oldTotalHeight=t.totalHeight,n!==t.totalHeight&&(i=!0,0===n?t.totalHeight=0:delete t.totalHeight),[Ae.ActivityRow,Ae.AllocationRow].includes(t.rab_itemType)&&(t.timeItems[0].hidden=0===n),i},_itemHasChildren:function(e){var t=!1,i=e.rab_itemType===Ae.Activity;return(i||e.rab_itemType===Ae.Resource||e.rab_itemType===Ae.Entity||e.rab_itemType===Ae.Skill)&&(null==(t=e.data().HasChildren)&&(t=e.childRowItems&&e.childRowItems.length),!t&&i&&(t=e.detailingRowItems&&e.detailingRowItems.length)),t},_enrichClassFunc:function(e){e.tableType=Ie.Gantt,this._doEnrichClassFunc(e)},_doEnrichClassFunc:function(e){var t=e.item,i="";if(e.elemType===E.Row)i=(this._itemHasChildren(t)?It+e.level:vt)+" ";else if([E.GroupCell,E.LeavesIndicator].includes(e.elemType)){if("detailingRowItems"===t.getChildItemsPropNameInParent()){let a=e.ganttWidget??e.tableWidget,n=a.getLevelOfRowItem(t),o=a.getLevelOfRowItem(t,!0);e.level>=n-o&&(i=`${tt} ${it}${e.level-(n-o)}`)}i||(i=`${Je} ${et}${e.level}`)}else[E.Bar,E.BarRectangle].includes(e.elemType)?t.rab_itemType===Ae.ActivityBaseline?i=Oe:t.rab_subItemType===Ae.ActivityReleaseDate?i=Ee:t.rab_subItemType===Ae.ActivityDueDate&&(i=De):e.elemType===E.TableCellText&&(i=Et);e.additionalClasses=`${e.additionalClasses?e.additionalClasses+" ":""}${i}`},updateTableRowDefinitions:function(e,t){for(var i=this,a=be._Minimum;a<=be._Maximum;a++)i._viewModels[a]?.updateTableRowDefinitions(Object.keys(e).length?e:void 0,t);!1!==t&&(i._ganttWidget.option("tableDefinition",i.viewModel().getTableDefinition()),i._entitiesTableWidget?.option("tableDefinition",i.viewModel(!0).getTableDefinition()))},_tableColumnWidthChangedFunc:function(e){e.sender.rab_tableRowDefinition.cellDefinitions[e.columnIndex].width=e.sender.cellDefinitions[e.columnIndex].width},_tableRowFillFunc:function(e){this._doTableRowFill(e,Ie.Gantt)},_tableCellFillFunc:function(e){var t=e.rowItem;e.rowDefinitionType!==N.GroupingLevel&&e.rowDefinitionType!==N.BaseLevel&&e.rowDefinitionType!==N.LeafDefault||(e.text=1===e.columnIndex?t.data().ID:t.data().TableText),this._doTableCellFillFunc(e)},_doTableCellFillFunc:function(e){var t,i=this,n=e.rowItem;if(this.viewModel().resourceByItem(n)&&e.rowDefinitionType===N.FixedColumnsSucceeding){t=a.select(e.parentElem);var o={rowItem:n,cancel:!1};i._handleBeforeShowingCurvesPane(o),i._createCurveButtonAndScaleInRow(n,e.rowLevel,Te.LoadCurve,e.totalHeight,e.width,t),i._createCurveButtonAndScaleInRow(n,e.rowLevel,Te.InventoryCurve,e.totalHeight,e.width,t)}if(0===e.columnIndex&&e.cellType===Ce.ImageList&&e.rowItem.data().RowSymbolIDs){e.imageURLs=[];let t=e.ganttWidget?`///rabSG_${e.ganttWidget._uniqueID}`:`///rabSE_${e.tableWidget._uniqueID}`;e.rowItem.data().RowSymbolIDs.forEach((function(a){e.imageURLs.push(`${t}_${i._currentSymbolIDsMap[a]}`)}))}e.symbolID&&i._currentSymbolIDsMap[e.symbolID]&&(e.symbolURL=`///rabSB_${(e.ganttWidget||e.tableWidget)._uniqueID}_${i._currentSymbolIDsMap[e.symbolID]}`);var r;e.rowDefinition&&e.rowDefinition.rab_tableRowDefinition&&(r=e.rowDefinition.rab_tableRowDefinition.rab_textColor);var l=e.tableCellTextColor||n.data().TableTextColor||r,s=e.rowDefinitionType!==N.FixedColumnsPreceding?e.tableCellBackgroundColor:function(){let e=n.data().RowSymbolColumnBackgroundColor;if(e)return e;let t=n.data().TableRowDefinitionID;if(!t){const e={[Ae.ActivityRow]:"Activity",[Ae.AllocationRow]:"Allocation",[Ae.Entity]:"Entity",[Ae.Resource]:"Resource",[Ae.Skill]:"Skill"}[n.rab_itemType];e&&(t=i.getAPIOption(`default${e}TableRowDefinitionID`))}if(t){let a=i._app.tableRowDefinitionsMap()[t];if(a)return e=a.rab_symbolColumnBackgroundColor,null!=e?e.toString():void 0}}()||i.getAPIOption(e.tableWidget?"entitiesTableSymbolColumnBackgroundColor":"symbolColumnBackgroundColor");if((l||s)&&(e.finalizeFunc=function(){if(l&&a.select(e.cellElem).select(".ngantt-table-column-text").style("fill",l),s){var t="#000000"===ce.calculateBlackOrWhiteTextColor(s)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFjSURBVGhD7ZS7LgZRFEaHKBQKhVKhVEhISCgUHkDhIRQ6Eq3OK0jkj6iUHsEzCEJCp6BTkChIFKxvciYZx56LS1TfSlbOXM7eczvzFcYYY4wxxhhjzM8YSmPEJG7iDL7iKe7hE3Yxjts4V+4VxTkO8L7ca2cUt3AxbV/hId5gb9bwEd8z73AZ29B5zctr1U9925jGa8xrX3ADezGFz5g3qdTN6Q1H6Hh085Xqq/4RI3iGUZ18wyXs5AijBnV3MGIXo/l1DzBiHaP5dU/wE8NprFOt2zbm05jTp3YhjTmzaWzjS230APpxutDnjvj32ugBlBhdNM35Te1FGtvo079cBvphojUolSaK2Agdj9KrUn2bltkY3mJUV7mKvVBkRQ+hFOmKQp2PUkz9uqJQKfOAea1UQHwLvaljVC4r3pQeTRGYo3lKs8uktvv84GIC91HX1LV1DytojDHGGGOMMcb8HUXxAd9DjLLnJpEBAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAGFSURBVGhD7ZSxSsRQEEUT2cLCwsLSYksLwQUFt7DwAyz2Iyy2U7C1218QZFmsLP0Ev0FUFLSz0M5CwULBIt67GcW8vDcJKlb3wGWSmTsvye57kwkhhBBCCCGEED8jt1ijKIpFhB1oGXqDzqCDPM+fEV3QO4+wB/WmiSy7gMbofShv06B3FmEXWod4fQ0dofcWsR1YZAA9QSH30IbZorBuvhCuNzBbFNSXoBuaA16hodl8YOxCL+xKwJfjL1yDeaun4Lpds1dAvgOd05TgHeqbPQ1Mx1O7z77ZKyA/KssuE7NXQH67LLucmv2LGYvf+dy3HqsWQ9r0rlkMWbHoUeuNfQAPThMdiyH/3hv7AE6MJlKe3/ReWvRoXh/7rAfxwKTgNOGIrcG81VNw3eg2Q34OuqPJYcvsPjAOodhHcIo0jUKO4NgU43ruKES9Dz3SHGFktnaggf/ECcS5zPE2gaIjMIQ+iNPsysTrNgecvQvQIcRn8tl8h00rCyGEEEIIIYQQf0OWfQAtFmf8zfgOgAAAAABJRU5ErkJggg";a.select(e.cellElem).select(e.tableWidget?".ntable-cell-background-rect":".ngantt-table-cell-background-rect").style("fill",s),a.select(e.cellElem).select(e.tableWidget?".ntable-cell-show-more-symbols":".ngantt-table-cell-show-more-symbols").attr("href",t)}}),l=l||"black",0===e.columnIndex&&(n.rab_TextColor=l),0===e.columnIndex&&e.rowDefinitionType!==N.FixedColumnsPreceding&&e.rowDefinitionType!==N.FixedColumnsSucceeding&&(a.select(e.rowElem).select(".ngantt-colexp-button .ngantt-plus,.ngantt-colexp-button .ngantt-minus").style("fill",l),a.select(e.rowElem).select(".ngantt-leaves-colexp-button .ngantt-plus,.ngantt-leaves-colexp-button .ngantt-minus").style("stroke",l)),t){t.select(je+"-tfcol").style("fill",l),t.select(je+"-tscol").style("stroke",l);var d=t.select(je+"-cscol");d.size()&&d.style("stroke",i._determineTableRowBackgroundColor(n,e.rowLevel))}n.rab_calculatedAllocationRowIndicatorColor&&a.select(e.rowElem).select(".ngantt-leaves-indicator").style("fill",n.rab_calculatedAllocationRowIndicatorColor)},_determineTableRowDefinitionFunc:function(e){return e.tableType=Ie.Gantt,this._doDetermineTableRowDefinitionFunc(e)},_doDetermineTableRowDefinitionFunc:function(){},_detectContent:function(e,t){if(null!=t){var i,a=e.data();if(null!=(i=t.match(/^[A-Z]/)&&t in a?a[t]:a.externalData()[t]))return i instanceof Date?this.app().localDateToDateTimeString(i):i.toString()}},detectSourcedContent:function(e,t,i,a){var n=e.rowItem,o=e.columnIndex;e[t]=this._detectContent(n,i)||a,n.rab_sourced_contents[t]&&0!==o||(n.rab_sourced_contents[t]=[]),n.rab_sourced_contents[t][o]={propertyName:i,content:e[t]}},__tableCellFillFunc:function(e){var t=this,i=e.rowItem,a=e.columnIndex,n=e.rowDefinition.cellDefinitions[a],o=function(n,o,r,l){e[n]=t._detectContent(i,o,l)||r,i.rab_sourced_contents[n]&&0!==a||(i.rab_sourced_contents[n]=[]),i.rab_sourced_contents[n][a]={propertyName:o,content:e[n]}};i.rab_sourced_contents&&0!=a||(i.rab_sourced_contents={}),o("text",n.rab_textSource,"",n.rab_textFormat),o("symbolID",n.rab_symbolIDSource,""),o("tableCellBackgroundColor",n.rab_backgroundColorSource,n.rab_backgroundColor),o("tableCellTextColor",n.rab_textColorSource,n.rab_textColor),e.ganttWidget?t._doTableCellFillFunc(e):t._doEntitiesTableCellFillFunc(e)},updateSymbols:function(e,t,i){var n=this,o=a.select(n._ganttWidget.element()).select(".ngantt-svg-root defs"),r=n._entitiesTableWidget?a.select(n._entitiesTableWidget.element()).select(".ntable-svg-root defs"):void 0,l=!1,s=!1,d=Object.assign({},n._currentSymbolIDsMap);if(n._currentSymbolIDsMap={},Object.keys(e).forEach((function(t){let a=e[t].URL,c=d[t]||v.generate();if(n._currentSymbolIDsMap[t]=c,delete d[t],!i){let e=`rabSG_${n._ganttWidget._uniqueID}_${c}`,t=o.select("#"+e);t.size()||(t=o.append("image").attr("id",e).attr("width",n._tableSymbolExtent).attr("height",n._tableSymbolExtent),l=!0),t.attr("href")!==a&&(t.attr("href",a),l=!0),e=`rabSB_${n._ganttWidget._uniqueID}_${c}`;let i=o.select("#"+e);i.size()?t=i.select("image"):(i=o.append("symbol").attr("id",e).attr("viewBox",`0 0 ${n._barSymbolExtent} ${n._barSymbolExtent}`).attr("preserveAspectRatio","none"),t=i.append("image").attr("preserveAspectRatio","none").attr("width",n._barSymbolExtent).attr("height",n._barSymbolExtent),l=!0),t.attr("href")!==a&&(t.attr("href",a),l=!0)}if(n._entitiesTableWidget){let e=`rabSE_${n._entitiesTableWidget._uniqueID}_${c}`,t=r.select("#"+e);t.size()||(t=r.append("image").attr("id",e).attr("width",n._tableSymbolExtent).attr("height",n._tableSymbolExtent),s=!0),t.attr("href")!==a&&(t.attr("href",a),s=!0),e=`rabSB_${n._entitiesTableWidget._uniqueID}_${c}`;let i=r.select("#"+e);i.size()?t=i.select("image"):(i=r.append("symbol").attr("id",e).attr("viewBox","0 0 "+n._barSymbolExtent+" "+n._barSymbolExtent).attr("preserveAspectRatio","none"),t=i.append("image").attr("width",n._barSymbolExtent).attr("height",n._barSymbolExtent),s=!0),t.attr("href")!==a&&(t.attr("href",a),s=!0)}})),Object.keys(d).forEach((function(e){if(!i){let t=`rabSG_${n._ganttWidget._uniqueID}_${d[e]}`;o.select("#"+t).remove(),t=`rabSB_${n._ganttWidget._uniqueID}_${d[e]}`,o.select("#"+t).remove(),l=!0}if(r){let t=`rabSE_${n._entitiesTableWidget._uniqueID}_${d[e]}`;r.select("#"+t).remove(),s=!0}})),l){if(n.getAPIOption("symbolColumnVisible")&&n.getAPIOption("symbolColumnTitleVisible")&&n.getAPIOption("symbolColumnTitleSymbolIDs")){let e=n._getImageURLsForGanttWidget(n.getAPIOption("symbolColumnTitleSymbolIDs"));for(var c=be.Activities;c<=be._Maximum;c++){let t=n._viewModels[c]?.getTableDefinition();t&&(t.symbolColumnTitleImageURLs=e)}t||n._ganttWidget.updateTableTitle()}t||(n._ganttWidget.invalidateAllRows(),n._ganttWidget.update());var u=n.getAPIOption("watermarkSymbolID");u&&n._currentSymbolIDsMap[u]&&n._ganttWidget.option("watermarkURL",`///rabSG_${n._ganttWidget._uniqueID}_${n._currentSymbolIDsMap[u]}`)}if(s){if(n.getAPIOption("entitiesTableSymbolColumnVisible")&&n.getAPIOption("entitiesTableSymbolColumnTitleVisible")&&n.getAPIOption("entitiesTableSymbolColumnTitleSymbolIDs")){let e=this._getImageURLsForEntitiesTableWidget(n.getAPIOption("entitiesTableSymbolColumnTitleSymbolIDs")),i=n._viewModels[be._Entities]?.getTableDefinition();i&&(i.symbolColumnTitleImageURLs=e,t||n._entitiesTableWidget.updateTableTitle())}t||(n._entitiesTableWidget.invalidateAllRows(),n._entitiesTableWidget.update())}},_timeAreaRowFillFunc:function(e){var t=this,i=a.select(e.parentElem);let n=e.rowItem,o=e.isForeground;if(!o){var r=(n.rab_itemType===Ae.AllocationRow?n.rab_parentRowItem:n).rab_calendarGridColor,l=t.getAPIOption("calendarGridWeekendColor");if(n.data().TableColorVisibleInTimeArea){r=n.rab_tableRowBackgroundColor||r,l=n.rab_tableRowBackgroundColor||l;var s=n.rab_tableRowBackgroundColor||t.getAPIOption("timeAreaBackgroundColor");s&&a.select(e.parentElem.parentNode).select(".ngantt-row-background-rect").style("fill",s)}i.select("."+k.CALGRID_CLASS).style("fill",r),i.select("."+k.CALGRID_WEEKEND_CLASS).style("fill",l)}n.isPseudo()||(t._createCurvesPaneInRow(n,Te.LoadCurve,e.totalHeight,e.oldTotalHeight,e.width,i,o),t._createCurvesPaneInRow(n,Te.InventoryCurve,e.totalHeight,e.oldTotalHeight,e.width,i,o),o&&delete n.rab_curvePanesVisibleChanged)},_processCreateBarFunc:function(e){var t=this;return t._options.worldViewBarCallbackEnabled||e.elem?t._createBarFunc(e):t._doCreateBarFunc(e)},_createBarFunc:function(e){return this._doCreateBarFunc(e)},_doCreateBarFunc:function(e){var t=this,i=e.timeItem;if([Ae.Allocation,Ae.Activity].includes(i.rab_itemType)?"rabSymbol"===i.rab_barShape&&a.select(e.elem).selectAll(".ngantt-diamond-path,.ngantt-bar-pattern").remove():i.rab_itemType===Ae.AllocationEntry?(i=i.rab_parentItem).barShape&&(i=null):i=null,i&&i.rab_unifiedBarDesign&q.Text&&[void 0,Ae.Activity].includes(i.rab_subItemType)){var n=i.data();let a=n.BarTextFormat;null==a&&(a=t.getAPIOption(`default${i.rab_itemType===Ae.Allocation?"Allocation":"Activity"}BarTextFormat`)),a=null!=a?t._resolveFormatWithCallbackArgsEvaluation?.(a,n,i.rab_itemType):n.BarText,n.BarTextWrapMode===we.Line?e.caption={text:a,width:1e4,wrapMode:"n"}:e.caption=a}t._updateBar(e)},_appendBarSymbolToBarElem:function(e,t,i,a){i.rab_barSymbolElems||(i.rab_barSymbolElems={});var n=Object.keys(i.rab_barSymbolElems).map((function(e){return+e}));n.push(a),n.sort((function(e,t){return e-t}));var o=n.indexOf(a),r=o<n.length-1?e.insert(t,(function(){return i.rab_barSymbolElems[n[o+1]]})):e.append(t);return i.rab_barSymbolElems[a]=r.node(),r},_updateBarSymbol:function(e,t,i,a,n,o,r,l){var s,d,c,u,p=this,h=a+"SymbolID",g=r||p.getAPIOption("topBarSymbolsVisible")?i[h]:void 0;if(g&&((c=p._app.symbolsMap()[g])&&!A.notIsNullOrEmpty(c.URL)&&(c=void 0),c&&r>=1&&(0===(s=i[a+"SymbolWidth"])||s||(s=p._barSymbolExtent),s=+s,isNaN(s)||!isFinite(s)||s<=0?c=void 0:r<3?(0===(d=i[a+"SymbolHeight"])||d||(d=p._barSymbolExtent),d=+d,(isNaN(d)||!isFinite(d)||d<=0)&&(c=void 0)):d=t.barHeight)),o?(u=e.select("."+n),c?r&&(u=u.select("use")):(u.remove(),u=void 0)):u=void 0,!u?.size()&&(t.rab_barSymbolElems&&delete t.rab_barSymbolElems[l],c)){var m=u=p._appendBarSymbolToBarElem(e,r?"g":"use",t,l).attr("class",n);switch(r){case 0:u.attr("y",.66*-p._barSymbolExtent).attr("width",p._barSymbolExtent).attr("height",p._barSymbolExtent);break;case 1:m.classed("ngantt-bar-text",!0),u=m.append("use"),"BarTextPrefix"===a&&u.attr("x",2);break;case 2:u=m.append("use")}}if(u&&(u.attr("href",`#rabSB_${p._ganttWidget._uniqueID}_${p._currentSymbolIDsMap[g]}`),r>=1)){s!==+u.attr("data-nw")&&u.attr("width",s).attr("data-nw",s),2===r&&u.attr("transform","translate("+-s/2+")");var _="ReleaseDate"==a||"DueDate"==a?i.BarHeight:t.barHeight;null==_&&(_=p._ganttWidget.options.barHeight||0);var f=_+"-"+d;f!==u.attr("data-nh")&&u.attr("y",Math.floor((_-d)/2)).attr("height",d).attr("data-nh",f)}},__doCalculateBackgroundColorsForBar:function(e,t,i){let a=t.BackgroundColor??i.BackgroundColor,n=t.Color??i.Color;e&&!a&&(a=this.getAPIOption("defaultAllocationBackgroundColor")),"calculatedFromColor"===a&&(a=n?ce.calculateBarColors(n,this.getAPIOption("calendarGridColor")).nonworkingTimeColor:null),e||null!=a||(a=n);let o=t.BackgroundNonworkingTimeColor??i.BackgroundNonworkingTimeColor,r=o??t.NonworkingTimeColor??i.NonworkingTimeColor;if(r){let e=1/0;"calculated"===r?e=a:"calculatedFromColor"===o&&(e=n),e!==1/0&&(r=e?ce.calculateBarColors(e,this.getAPIOption("calendarGridColor")).nonworkingTimeColor:null)}return{backgroundColor:a,backgroundNonworkingTimeColor:r}},_updateBar:function(e,t){var i=this,n=e.timeItem;if(n.rab_itemType>=H&&n.rab_itemType<=G)return;if(n.rab_itemType===Ae.ActivityFrame)return;var o,r,l,s=i.model();[Ae.Allocation,Ae.AllocationEntry].includes(n.rab_itemType)?(o=l=n.data(),n.rab_itemType===Ae.AllocationEntry&&(l=l.getHierarchyParent()),i.getAPIOption("decouplingOfAllocationPropertiesFromActivities")||(r=s.activityByID(f.compose(l,["ActivityRole","ActivityID"])))):[Ae.Activity,Ae.ActivityReleaseDate,Ae.ActivityDueDate,Ae.ActivityBaseline,Ae.ActivityEntry].includes(n.rab_itemType)&&(o=r=n.data(),n.rab_itemType===Ae.ActivityEntry&&(r=r.getHierarchyParent()),l={}),r||(r={});var d=null,c=null,u={};let p=[Ae.Allocation,Ae.Activity].includes(n.rab_subItemType??n.rab_itemType),h=[Ae.AllocationEntry,Ae.ActivityEntry].includes(n.rab_itemType);if(n.rab_itemType===Ae.ActivityBaseline){let e=r.BaselineColor,t=r.BaselineNonworkingTimeColor;"calculated"===t&&(t=e&&ce.calculateBarColors(e,i.getAPIOption("calendarGridColor")).nonworkingTimeColor),u.workingTimeColor=e,u.nonworkingTimeColor=t||e||null,u.borderColor=r.BaselineBorderColor||null}else if(n.rab_subItemType===Ae.ActivityReleaseDate)u.workingTimeColor=r.ReleaseDateColor,u.borderColor=null;else if(n.rab_subItemType===Ae.ActivityDueDate)u.workingTimeColor=r.DueDateColor,u.borderColor=null;else{if(p&&"twice"===n.zOrder)u.workingTimeColor="transparent";else{var g;if(h){var m=n.data();u.workingTimeColor=m.Color||l.Color||r.Color||null,(g=m.NonworkingTimeColor)||(g=i.__doCalculateBackgroundColorsForBar(n.rab_itemType===Ae.AllocationEntry,l,r).backgroundNonworkingTimeColor),g||(g=l.NonworkingTimeColor||r.NonworkingTimeColor||null),void 0!==n.fillPatternType&&(u.fillPatternColor=m.PatternColor)}else u.workingTimeColor=l.Color||r.Color||null,g=l.NonworkingTimeColor||r.NonworkingTimeColor||null,n.rab_itemType===Ae.Activity&&void 0!==n.fillPatternType&&(u.fillPatternColor=r.BarPatternColor);"calculated"===g&&(g=u.workingTimeColor?ce.calculateBarColors(u.workingTimeColor,i.getAPIOption("calendarGridColor")).nonworkingTimeColor:null),u.nonworkingTimeColor=g}if(h&&n.getParentItem().barShape)d=0;else{var _=l.BorderColor||r.BorderColor||void 0;"calculated"===_&&(_=ce.calculateBarColors(n.rab_unifiedBarDesign&q.Grouped?l.Color||r.Color:u.workingTimeColor,i.getAPIOption("calendarGridColor")).borderColor),u.borderColor=_,c=0!==(d=l.BorderWidth??r.BorderWidth??null)?l.BorderDashArray??r.BorderDashArray??null:null}}if(p||h){if(n.rab_unifiedBarDesign&q.ProgressAndPredictedEnd){u.progressWorkingTimeColor=l.ProgressColor||r.ProgressColor||null;var y=l.ProgressNonworkingTimeColor||r.ProgressNonworkingTimeColor||null;"calculated"===y&&(y=u.progressWorkingTimeColor?ce.calculateBarColors(u.progressWorkingTimeColor,i.getAPIOption("calendarGridColor")).nonworkingTimeColor:null),u.progressNonworkingTimeColor=y||u.progressWorkingTimeColor;var b=n.rab_itemType===Ae.Activity?i.getAPIOption("defaultActivityProgressBackgroundColor"):i.getAPIOption("defaultAllocationProgressBackgroundColor");u.progressBackgroundColor=l.ProgressBackgroundColor||r.ProgressBackgroundColor||b||null}e.worldViewFillColor=u.workingTimeColor||"#646464",e.worldViewBorderColor=u.borderColor}if(e.elem){var A,v=a.select(e.elem);if(u.workingTimeColor&&v.select(".ngantt-pcal,.ngantt-summary-bar-path,.ngantt-diamond-path,.ngantt-arrow-path").style("fill",u.workingTimeColor),(t||u.nonworkingTimeColor)&&v.select(".ngantt-rcal").style("fill",u.nonworkingTimeColor??null),v.select(".ngantt-bar-pattern").style("fill",u.fillPatternColor),t||u.borderColor||null!=d||null!=c){let i;n.rab_subItemType!==Ae.Activity||n.childTimeItems||(i=v.select(".ngantt-bar-rect.ngantt-outline"),i.size()&&v.select(".ngantt-rcal").style("stroke-width",0)),i?.size()||(i=v.selectAll(".ngantt-bar-rect,.ngantt-diamond-path,.ngantt-arrow-path")),i.style("stroke",u.borderColor).style("stroke-width",d).style("stroke-dasharray",c).style("stroke-linecap",c?"butt":null),e.backgroundElem&&(t||null!=d)&&a.select(e.backgroundElem).select(".ngantt-bar-rect.ngantt-outline").style("stroke-width",d)}if((p||h)&&n.rab_unifiedBarDesign&q.ProgressAndPredictedEnd&&((t||u.progressBackgroundColor)&&v.select(".ngantt-progress-bar-background").style("fill",u.progressBackgroundColor),(t||u.progressWorkingTimeColor)&&v.select(".ngantt-progress-bar").style("fill",u.progressWorkingTimeColor),(t||u.progressNonworkingTimeColor)&&v.select(".ngantt-progress-nonworking-bar").style("fill",u.progressNonworkingTimeColor),p&&(t||o?.PredictedEndColor)&&v.select(".ngantt-predicted-end-bar").style("fill",o.PredictedEndColor)),p&&o){var I=n.rab_subItemType===Ae.Activity?i.getAPIOption("defaultActivityStatusFrameColor"):i.getAPIOption("defaultAllocationStatusFrameColor"),C=o.StatusFrameColor||I||null;v.select(".ngantt-marked-bar").style("stroke",C).attr("visibility",o.StatusFrameVisible?null:"hidden")}if(p){var w=l?.BarTextColor??r.BarTextColor;if("calculatedHighContrastFromColor"===w&&(w=ce.calculateBlackOrWhiteTextColor(l.Color||r.Color||"#646464")),t||w){var T=function(){v.selectAll(".ngantt-bar-text").style("fill",w)};t?T():e.finalizeFunc=T}}if(e.backgroundElem){let{backgroundColor:o,backgroundNonworkingTimeColor:s}=i.__doCalculateBackgroundColorsForBar(n.rab_itemType===Ae.Allocation,l,r),d=a.select(e.backgroundElem);(t||o||s)&&(d.select(".ngantt-outline").style("fill",o||s?"transparent":null),d.select(".ngantt-pcal").style("fill",o??(s?"rgba(255,255,255,0.7)":null))),(t||s)&&d.select(".ngantt-rcal").style("fill",s??null)}if(o)if(n.rab_subItemType===Ae.ActivityReleaseDate&&i.getAPIOption("releaseDueDateConnectionsVisible")&&o.ReleaseDate&&o.DueDate&&v.append("path").attr("class",yt),!t&&n.rab_barSymbolElems&&delete n.rab_barSymbolElems,"rabSymbol"===n.rab_barShape)i._updateBarSymbol(v,n,o,"BarShape",Me,t,2,0);else if(n.rab_subItemType===Ae.ActivityDueDate)i._updateBarSymbol(v,n,o,"DueDate",Xe,t,2,0);else if(n.rab_subItemType===Ae.ActivityReleaseDate)i._updateBarSymbol(v,n,o,"ReleaseDate",ft,t,2,0);else if(p&&(n.rab_unifiedBarDesign&q.Symbols&&(i._updateBarSymbol(v,n,o,"LeftBar",st,t,1,0),i._updateBarSymbol(v,n,o,"RightBar",At,t,1,1),i._updateBarSymbol(v,n,o,"BarTextPrefix",Be,t,1,10),i._updateBarSymbol(v,n,o,"TopLeftBar",Mt,t,0,30),i._updateBarSymbol(v,n,o,"TopRightBar",Bt,t,0,31)),n.rab_unifiedBarDesign&q.Status)){let a,r=n.rab_unifiedBarDesign&q.ReducedHeight?i.getAPIOption("reducedBarTopOffsetAndHeightScaleFactor"):1,l=n.progressBackgroundVisible||n.progress?i._ganttWidget.options.progressBarHeight:0,s=Math.floor(n.barHeight??i._ganttWidget.options.barHeight*r)-l,d=t?o[`rab_currentBarWidth${i.viewType()}`]:e.width,c=d<i._statusIndicatorWidth+2?Math.floor(d/2):i._statusIndicatorWidth;if(t&&(A=v.select(`.${wt}`),o.Status1Visible&&o.Status1Color||(A.remove(),A=void 0)),!A?.size()&&(n.rab_barSymbolElems&&delete n.rab_barSymbolElems[20],o.Status1Visible&&o.Status1Color)){let e=Math.min(s,2*i._statusIndicatorWidth);A=i._appendBarSymbolToBarElem(v,"rect",n,20).attr("class",`${Pt} ${wt}`).attr("height",e),null!=d&&A.attr("x",Math.max(0,(d??0)-c)).attr("width",c)}if(A&&A.style("stroke",u.borderColor||"gray").style("fill",o.Status1Color||"white"),t?(A=v.select(`.${Tt}`),o.Status2Visible&&o.Status2Color||(A.remove(),A=void 0)):A=void 0,A?.size()||(n.rab_barSymbolElems&&delete n.rab_barSymbolElems[21],o.Status2Visible&&o.Status2Color&&(A=i._appendBarSymbolToBarElem(v,"rect",n,21).attr("class",`${Pt} ${Tt}`).attr("height",Math.min(s,i._statusIndicatorWidth)),null!=d&&A.attr("x",Math.max(0,(d??0)-c)).attr("width",c))),A&&A.style("stroke",u.borderColor||"gray").style("fill",o.Status2Color||"white"),t?(A=v.select(`.${Rt}`),o.Status3Visible&&o.Status3Color||(A.remove(),A=void 0)):A=void 0,!A?.size()&&(n.rab_barSymbolElems&&delete n.rab_barSymbolElems[22],o.Status3Visible&&o.Status3Color)){var R=Math.min(Math.floor(s/2),i._statusIndicatorWidth)/2;let e=Math.floor(Math.min(d??1/0,i._statusIndicatorWidth)/2);A=i._appendBarSymbolToBarElem(v,"ellipse",n,22).attr("class",`${Pt} ${Rt}`).attr("transform",`translate(${Math.max(0,(d??0)-c)})`).attr("rx",e).attr("ry",R).attr("cx",e).attr("cy",Math.min(s,2*i._statusIndicatorWidth)-R)}A&&A.style("stroke",u.borderColor||"gray").style("fill",o.Status3Color||"white"),t?(A=v.select("."+St),o.Status4Visible&&o.Status4Color||(A.remove(),A=void 0,a=!0)):A=void 0;let p=v.selectAll(".ngantt-bar-text,.ngantt-bar-text .ntexthelper-wrapping-line"),h=(n.leftCaptionOffset||void 0)+2||0;if(!A?.size())if(n.rab_barSymbolElems&&delete n.rab_barSymbolElems[23],o.Status4Visible&&o.Status4Color){var S=s;let e=Math.min(d??0,i._statusIndicatorWidth-2);A=i._appendBarSymbolToBarElem(v,"rect",n,23).attr("class",`${Pt} ${St}`).attr("height",S),null!=d&&(A.attr("width",e),p.size()&&p.attr("x",i._statusIndicatorWidth+h))}else a&&p.size()&&p.attr("x",2+h);A&&A.style("stroke",u.borderColor||"gray").style("fill",o.Status4Color||"white")}}},_processPositionBarFunc:function(e){var t=this;return t._options.worldViewBarCallbackEnabled||e.elem?t._positionBarFunc(e):t._doPositionBarFunc(e)},_positionBarFunc:function(e){return this._doPositionBarFunc(e)},_doPositionBarFunc:function(e){var t,i,n=this,o=e.timeItem,r=n.model();o.rab_itemType===Ae.Allocation||o.rab_itemType===Ae.AllocationEntry?(i=o.data(),o.rab_itemType===Ae.AllocationEntry&&(i=i.getHierarchyParent()),t=r.activityByID(f.compose(i,["ActivityRole","ActivityID"]))):o.rab_itemType!==Ae.Activity&&o.rab_itemType!==Ae.ActivityBaseline&&o.rab_itemType!==Ae.ActivityEntry||(t=o.data(),o.rab_itemType===Ae.ActivityEntry&&(t=t.getHierarchyParent())),null==t&&(t={});var l={};o.rab_itemType===Ae.AllocationEntry&&o.rab_parentItem.rab_unifiedBarDesign===q.Entries?l=i:o.rab_itemType===Ae.ActivityEntry?l=t:Object.values(Ae).includes(o.rab_itemType)&&(l=o.data());var s=a.select(e.elem);if("rabSymbol"===o.rab_barShape){let e=((i||t).BarShapeSymbolWidth||o.barHeight||n._ganttWidget.options.barHeight)/2+2;var d=s.select(".ngantt-bar-text");d.size()&&d.attr("x",e);var c=d.select(".ntexthelper-wrapping-line");c.size()&&c.attr("x",e)}else{if(l["rab_currentBarWidth"+n.viewType()]=e.width,l.Status1Visible&&l.Status1Color){let t=e.width<n._statusIndicatorWidth+2?e.width/2:n._statusIndicatorWidth;s.select("."+wt).attr("x",Math.max(0,e.width-t)).attr("width",t)}if(l.Status2Visible&&l.Status2Color){let t=e.width<n._statusIndicatorWidth+2?e.width/2:n._statusIndicatorWidth;s.select("."+Tt).attr("x",Math.max(0,e.width-t)).attr("width",t)}if(l.Status3Visible&&l.Status3Color){let t=e.width<n._statusIndicatorWidth+2?e.width/2:n._statusIndicatorWidth;s.select("."+Rt).attr("transform","translate("+Math.max(0,e.width-n._statusIndicatorWidth)+")").attr("rx",t/2)}if(l.Status4Visible&&l.Status4Color){let t=Math.min(e.width,n._statusIndicatorWidth-2);s.select("."+St).attr("width",t);let i=s.select(".ngantt-bar-text");i.size()&&i.attr("x",n._statusIndicatorWidth);let a=i.select(".ntexthelper-wrapping-line");a.size()&&a.attr("x",n._statusIndicatorWidth)}if(l.TopRightBarSymbolID){var u=n._app.symbolsMap()[l.TopRightBarSymbolID];u&&A.notIsNullOrEmpty(u.URL)&&s.select("."+Bt).attr("x",Math.max(0,e.width-n._barSymbolExtent))}if(l.RightBarSymbolID){let t=n._app.symbolsMap()[l.RightBarSymbolID];if(t&&A.notIsNullOrEmpty(t.URL)){var p=s.select("."+At+" use");p.size()&&p.attr("x",Math.max(0,e.width-+p.attr("data-nw")))}}if(o.rab_subItemType===Ae.ActivityReleaseDate&&l.ReleaseDate&&l.DueDate){var h,g=n._ganttWidget.timeAxis(),m=r.dateTimeValueToDate(l.DueDate),_=r.dateTimeValueToDate(l.ReleaseDate);h=n._ganttWidget.convertXToLimitedX?n._ganttWidget.convertXToLimitedX(g.convertDateToX(m))-n._ganttWidget.convertXToLimitedX(g.convertDateToX(_)):g.convertDateToX(m)-g.convertDateToX(_);var y=null!=l.BarHeight?l.BarHeight:n._ganttWidget.options.barHeight;s.select("."+yt).attr("transform","translate(0,"+y/2+")").attr("d",`M0.5,-10 v${-y/2+4} h${h-.5} V-10`)}}},_positionLinkFunc:function(e){var t=e.linkItem.data(),i=e.elem;if(t&&t.data()&&i){var n=t.Width||1,o=t.DashArray||"none",r=a.select(i);r.select(".ngantt-link-path").style("stroke-width",n).style("stroke-dasharray",o),r.select(".ngantt-link-target-marker").style("stroke-width",n)}},_viewOffsetForCurrentDateCurrentlyNotObserved:function(){},_timeAreaRowUpdateFunc:function(e){var t=this;if(e.isForeground){if(t._ganttWidget.isInInteraction()||t._curvePaneSplitterWidget.isCurrentlyDragged()||t._tooltipWidget.initializeDeferredUpdate()?.then((function(e){var i=e?.closest("."+p.TAP_EVENT_CLASS_NAME);if(i){var a=Object.assign({},t._savedTapEventCallbackArgs);a.sender=t._ganttWidget.getTimeItem(i),a.sender&&t._handleItemTap(a)}}),(e=>{t._app.getOption("boundHandleExceptionFunc")(e)})),t._viewOffsetForCurrentDateCurrentlyObserved&&e.timeAreaViewScrollOffsetChanged&&(t._viewOffsetForCurrentDateCurrentlyObserved=!1,t._viewOffsetForCurrentDateCurrentlyNotObservedTimer&&window.clearTimeout(t._viewOffsetForCurrentDateCurrentlyNotObservedTimer),t._viewOffsetForCurrentDateCurrentlyNotObservedTimer=window.setTimeout((function(){t._viewOffsetForCurrentDateCurrentlyObserved||t._viewOffsetForCurrentDateCurrentlyNotObserved()}),800)),e.timeAreaWidthChanged||e.baseTimeUnitWidthChanged||e.xCoordTransformChanged||e.rowHeightChanged){var i=e.rowItem;if((i.rab_curvePanesVisible||t.viewType()===be.Loads)&&!i.isPseudo()){let n=a.select(e.parentElem);t._updateCurvesPaneInRow(i,Te.LoadCurve,i.rab_loadCurvePaneHeight||0,n),t._updateCurvesPaneInRow(i,Te.InventoryCurve,i.rab_inventoryCurvePaneHeight||0,n)}}}else{if(e.timeAreaViewScrollOffsetChanged&&(e.rowItem.rab_curvePanesVisible||t.viewType()===be.Loads)){let i=a.select(e.parentElem),n=t._ganttWidget.timeAxis().timeAreaViewScrollOffset();i.selectAll("."+Lt).attr("transform",`translate(${Wt+n})`)}if(e.timeAreaWidthChanged||e.startOrEndChanged){let i=a.select(e.parentElem);var n=i.select("."+ct).attr("width",e.timeAreaWidth);void 0!==t.getAPIOption("defaultLoadCurvePaneColor")&&n.style("fill",t.getAPIOption("defaultLoadCurvePaneColor")),n=i.select("."+nt).attr("width",e.timeAreaWidth),void 0!==t.getAPIOption("defaultInventoryCurvePaneColor")&&n.style("fill",t.getAPIOption("defaultInventoryCurvePaneColor")),i.select("."+ze).attr("width",e.timeAreaWidth)}}},_convertFunc:function(e){e.item.rab_itemType&&e.item.rab_itemType===Ae.Operation&&("_data.Start"===e.attr?e.value=this.model().dateTimeValueToDate(e.item.data().Start):"_data.End"===e.attr&&(e.value=this.model().dateTimeValueToDate(e.item.data().End)))},_keyDownFunc:function(){},_calculateCurvesPaneHeight:function(e){var t=this;if(e.rab_itemType!==Ae.AllocationRow){var i=t.viewType(),a=0,n=0;if(e.rab_curvePanesVisible||i===be.Loads){var o=t.viewModel().resourceByItem(e);if(o){var r;if(t.getAPIOption("higherCurvePanesOnExceededScaleMaximumValue")&&o.compileCurves(),o.HasCurves||o.InventoryCurveID)(null==(r=o.InventoryCurvePaneVisible)?t.getAPIOption("defaultResourceInventoryCurvePaneVisible"):r)&&(void 0===(n=o.InventoryCurvePaneHeight)&&(n=t.getAPIOption("defaultInventoryCurvePaneHeight")),void 0!==n&&(n=Math.min(t.getAPIOption("maximumInventoryCurvePaneHeight"),Math.max(t.getAPIOption("minimumInventoryCurvePaneHeight"),n))));if(o.HasCurves||o.CapacityCurveID||o.LoadCurveID||i===be.Loads)((null==(r=o.LoadCurvePaneVisible)?t.getAPIOption("defaultResourceLoadCurvePaneVisible"):r)||i===be.Loads&&!n)&&(void 0===(a=o.LoadCurvePaneHeight)&&(a=t.getAPIOption("defaultLoadCurvePaneHeight")),void 0!==a&&(a=Math.min(t.getAPIOption("maximumLoadCurvePaneHeight"),Math.max(t.getAPIOption("minimumLoadCurvePaneHeight"),a))),t.getAPIOption("higherCurvePanesOnExceededScaleMaximumValue")&&o.rab_loadCurveExceedingFactor&&(a*=o.rab_loadCurveExceedingFactor))}}e.rab_loadCurvePaneHeight===a&&e.rab_inventoryCurvePaneHeight===n||(e.rab_curvePanesVisibleChanged=!0,e.rab_loadCurvePaneHeight=a,e.rab_inventoryCurvePaneHeight=n),e.rab_curvePanesVisible=!(!a&&!n)}return e.rab_curvePanesVisible},_createCurveButtonAndScaleInRow:function(e,t,i,a,o,r){var l,s,d=this,c=e.data().TableTextColor||e.rab_TextColor||"black";if((e.rab_itemType===Ae.Resource&&d.viewType()!==be.Loads||e.rab_itemType===Ae.ActivityRow&&d.getAPIOption("curvePanesVisibleInActivitiesView"))&&Array.isArray(d._options.showCurveButtonInView)&&d._options.showCurveButtonInView.indexOf(d.viewType())>=0&&!1!==e.barsPaneVisible&&((s=d.viewModel().resourceByItem(e))&&((s.HasCurves||s.CapacityCurveID||s.LoadCurveID)&&null==(l=s.LoadCurvePaneVisible)&&(l=d.getAPIOption("defaultResourceLoadCurvePaneVisible")),l||!s.HasCurves&&!s.InventoryCurveID||null==(l=s.InventoryCurvePaneVisible)&&(l=d.getAPIOption("defaultResourceInventoryCurvePaneVisible")),l&&!i))){var u=2*d._ganttWidget.options.buttonLeftOffset+d._ganttWidget.options.buttonExtent,h=d._ganttWidget.determineActualRowMargins().sum+d._ganttWidget.options.buttonExtent;if(d.viewType()!==be.Loads&&r.append("rect").attr("class",`${je} ${p.QUICK_TAP_EVENT_CLASS_NAME} ${p.PRESS_EVENT_CLASS_NAME}`).attr("x",o-u).attr("width",u).attr("height",h).on(p.TARGET_EVENT_NAME,(function(e){try{var t=e.detail.hammerEvent;switch(t.type){case n.nEventDispatcher.PRESS_EVENT_NAME+"up":if("mouse"!==t.pointerType)break;case n.nEventDispatcher.TAP_EVENT_NAME:d._onCurveButtonClick(this)}}catch(e){d._app.getOption("boundHandleExceptionFunc")(e)}})),d.viewType()!==be.Loads&&(d.viewType()===be.Activities&&d.getAPIOption("curvePanesCollapsibleInResourcesView")&&(!d.getAPIOption("allocationRowsVisibleInActivitiesView")||!d.getAPIOption("resourcesVisibleInActivitiesView")||e.rab_itemType===Ae.Resource)||d.viewModel().getAPIOptionMapped("curvePanesCollapsible")))if(d._options.showCurveButtonSymbols){var g=e.rab_curvePanesVisible?c:"transparent",m=e.rab_curvePanesVisible?d._determineTableRowBackgroundColor(e,t):c,_=r.append("g").attr("transform","scale(1.5), translate(8,8)"),f=_.append("rect").attr("pointer-events","none").attr("width","10").attr("height","10").style("fill",g);e.rab_curvePanesVisible&&f.attr("class",je+"-tfcol"),_.append("path").attr("class",je+(e.rab_curvePanesVisible?"-cscol":"-tscol")).attr("pointer-events","none").attr("d","M9,9H1V1M2,7H4V3h3v2h2").style("stroke",m)}else{var y=r.append("path").attr("class",je+"-tfcol").attr("pointer-events","none").attr("d","M0,6 V-6 L6,0 L0,6").style("fill",c),b="translate("+(o-u/2)+","+d._ganttWidget.determineActualTableCellContentTopOffset(e)+")";e.rab_curvePanesVisibleChanged?y.attr("transform",b+(e.rab_curvePanesVisible?"":"rotate(45)")).transition().duration(d._ganttWidget.option("transitionDuration")).attr("transform",b+(e.rab_curvePanesVisible?"rotate(45)":"")):y.attr("transform",b+(e.rab_curvePanesVisible?"rotate(45)":""))}}((e.rab_curvePanesVisible||d.viewType()===be.Loads)&&e.rab_itemType===Ae.Resource&&!e.isPseudo()||e.rab_itemType===Ae.ActivityRow&&d.getAPIOption("curvePanesVisibleInActivitiesView"))&&((s=d.viewModel().resourceByItem(e))&&(s.compileCurves(),d._createScale(e,i,s,a,o,r,c)))},_getOrCreateTextBackgroundColorFilter:function(e){for(var t="",i=0;i<e.length;i++)t+=e.charCodeAt(i);var n=Ot+t,o=a.select(this._ganttWidget.element()).select(".ngantt-svg-root defs");return o.select("#"+n).size()||o.append("filter").attr("id",n).attr("x",0).attr("y",0).attr("height",1).attr("width",1).append("feFlood").attr("flood-color",e),n},_createScale:function(e,t,i,n,o,r,l){var s=this;if(t?e.rab_inventoryCurvePaneHeight:e.rab_loadCurvePaneHeight){var d=t?i.rab_inventoryCurveMinValue:i.rab_loadCurveMinValue,c=t?i.rab_inventoryCurveMaxValue:i.rab_loadCurveMaxValue,u=t?e.rab_inventoryCurvePaneHeight:e.rab_loadCurvePaneHeight,p=a.scaleLinear().domain([d,c]).range([0,-u]);let h=s.app().locale();h.applyNumberFormat((function(){var g=a.axisLeft(p);switch(s._options.curveScaleTicksMode){case 1:var m=c-d;(!m||m>10&&m%2)&&m++,g.tickValues(1!==m?[d,d+m/2,c]:[d,c]);break;case 2:g.ticks(Math.floor(u/16));break;default:g.ticks(1===c?1:c%2?3:2)}var _=s._ganttWidget.determineActualRowMargins(),f=n-_.bottom;!t&&e.rab_inventoryCurvePaneHeight&&(f-=e.rab_inventoryCurvePaneHeight+2*_.bottom);var y=r.append("g").attr("class",xe).attr("transform","translate("+o+","+f+")").call(g).attr("font-size",null);let b=h.getIntlNumberFormatByKey("default");y.selectAll(".tick").each((function(e){this.rab_value=e,b&&a.select(this).select("text").text(b.format(e))})),l&&(y.selectAll("line,path").style("stroke",l),y.selectAll("text").style("fill",l));let A=e[Ht];if(delete e[Ht],A&&A(),0==i.BarsPaneVisible||s.viewType()===be.Loads){var v=e.data().TableColor;if(!v||"none"===v||"transparent"===v){var I=y.node().closest(".ngantt-table-row"),C=a.select(I).selectAll(".ngantt-table-row-background-rect");v=window.getComputedStyle(C.nodes()[0]).getPropertyValue("fill")}if(v){var w=y.selectAll("text"),T=w.size()-1;w.each((function(e,t){var i=this.getBBox();let n=t===T?1:0;var o=a.select(this.parentNode).insert("rect",(()=>this)).attr("transform",`translate(${-i.width},${i.y+n})translate(${this.getAttribute("x")||0})`).attr("x",this.getAttribute("dx")).attr("width",i.width).style("fill",v);t?o.attr("height",i.height-n):(o.attr("height",-i.y),a.select(this.parentNode).insert("rect",(()=>this)).attr("transform",`translate(${-i.width})translate(${this.getAttribute("x")||0})`).attr("x",this.getAttribute("dx")).attr("width",i.width).attr("height",this.getAttribute("dy")).style("fill",v))}))}}}))}},_onCurvePaneSplitterInteraction:function(e,t){var i=this,n=i._curvePaneSplitterWidget.element().getBoundingClientRect(),o=t.curveContainerD3.node().getBoundingClientRect(),r=o.top-n.top,l=2*i._ganttWidget.determineActualRowMargins().bottom,s=e.detail.hammerEvent;switch(s.type){case p.PAN_EVENT_NAME+"start":case p.PRESS_EVENT_NAME:t.rowItem.rab_oldCurvePaneHeightBeforeInteraction=t.paneIndex?t.rowItem.rab_inventoryCurvePaneHeight:t.rowItem.rab_loadCurvePaneHeight,i._curvePaneSplitterWidget.option("position",{x:i._ganttWidget.actualTableViewWidth()+i._ganttWidget.option("splitterWidth"),y:r+o.height-t.height}),i._curvePaneSplitterWidget.option("width",i._ganttWidget._currentTimeAreaViewWidth),i._curvePaneSplitterWidget.option("height",t.height),i._curvePaneSplitterWidget.option("min",r+t.min+l-t.height/2),i._curvePaneSplitterWidget.option("max",r+t.max+l-t.height/2),a.select(i._curvePaneSplitterWidget.element()).attr("visibility",null),i._curvePaneSplitterWidget.manualStartDrag();var d={cancel:!1};i._curvePaneSplitterWidget._trigger("startDrag",null,d),d.cancel&&(s[p.CANCEL_PROPERTY]=!0);break;case p.PAN_EVENT_NAME+"move":i._curvePaneSplitterWidget.manualDrag(i._curvePaneSplitterWidget._oldValue+s.deltaY);var c=Math.min(Math.max(t.rowItem.rab_oldCurvePaneHeightBeforeInteraction+s.deltaY,t.min),t.max);t.rowItem[t.paneIndex?"rab_inventoryCurvePaneHeight":"rab_loadCurvePaneHeight"]=c,i.updateRowHeight(t.rowItem,!1),i._ganttWidget.invalidateRowHeight(t.rowItem);var u=i._ganttWidget.option("transitionDuration");i._ganttWidget.option("transitionDuration",0),i._ganttWidget.update(),i._ganttWidget.option("transitionDuration",u);break;case p.PAN_EVENT_NAME+"end":case p.PRESS_EVENT_NAME+"up":if(a.select(i._curvePaneSplitterWidget.element()).attr("visibility","hidden"),void 0===i._curvePaneSplitterWidget._newValue)break;i._curvePaneSplitterWidget.manualEndDrag(),i._curvePaneSplitterWidget._trigger("endDrag",null,{canceled:!1});c=Math.min(Math.max(t.rowItem.rab_oldCurvePaneHeightBeforeInteraction+s.deltaY,t.min),t.max);t.rowItem[t.paneIndex?"rab_oldInventoryCurvePaneHeight":"rab_oldLoadCurvePaneHeight"]=c,delete t.rowItem.rab_oldCurvePaneHeightBeforeInteraction,i._curvePaneSplitterWidget._trigger("changed",null,{newValue:c,oldValue:o.height,args:t}),i.invalidateRow(t.rowItem),i._ganttWidget.update();break;case p.PAN_EVENT_NAME+"cancel":t.rowItem[t.paneIndex?"rab_inventoryCurvePaneHeight":"rab_loadCurvePaneHeight"]=t.rowItem.rab_oldCurvePaneHeightBeforeInteraction,delete t.rowItem.rab_oldCurvePaneHeightBeforeInteraction,a.select(i._curvePaneSplitterWidget.element()).attr("visibility","hidden"),i._curvePaneSplitterWidget.manualEndDrag(),i._curvePaneSplitterWidget._trigger("endDrag",null,{canceled:!0}),i.updateRowHeight(t.rowItem),i._ganttWidget.update()}},_addHotRegionCurvePath:function(e){var t=this.model().curveByID(e.curveID);if(t&&("none"===t.FillColor||"transparent"==t.FillColor||null==t.FillColor)){e.doNotChangePointerEvents||e.originalCurvePathD3.attr("pointer-events","visibleStroke");var i=e.curveContainerD3.append("path").attr("class",`${e.classNamesArray.join(" ")} ${this._curveTapEventClassNames} ${Ke}`).attr("transform","translate("+e.translateX+","+e.translateY+")");i.node().__curveID=e.curveID,e.curvePathD3Array.push(i)}},_createCurvesPaneInRow:function(e,t,i,n,o,r,l){var s=this,d=s.model();const c=`rab_tempBGCurveContainerElem${t}`;var h=t?e.rab_inventoryCurvePaneHeight:e.rab_loadCurvePaneHeight,g=t?e.rab_oldInventoryCurvePaneHeight:e.rab_oldLoadCurvePaneHeight,f=e.rab_curvePanesVisible||s.viewType()===be.Loads&&h;if(f||e.rab_curvePanesVisibleChanged&&!s._curvePaneSplitterWidget.isCurrentlyDragged()){var y=f?h:g;let d;if(y){var b=s._ganttWidget.determineActualRowMargins(),A=-b.bottom,I=y?y-A+b.bottom:0,C=g?g-A+b.bottom:0,w="translate(0,"+n+")";if(f&&e.rab_curvePanesVisibleChanged&&null!=g&&I&&(w+=" scale(1,"+Math.max(1e-6,C/I)+")"),l){d=a.select(e[c].parentNode);let t=d;s._curvePaneSplitterWidget.isCurrentlyDragged()||(t=t.transition().duration(s._ganttWidget.options.transitionDuration)),f?t.attr("transform","translate(0,"+i+")"):t.attr("transform","translate(0,"+i+") scale(1,1e-6)").remove()}else d=r.append("g").attr("class",Ge).attr("transform",w);var T,R=-I-A;if(!t&&(f?e.rab_inventoryCurvePaneHeight:e.rab_oldInventoryCurvePaneHeight)&&(R-=(f?e.rab_inventoryCurvePaneHeight:e.rab_oldInventoryCurvePaneHeight)+2*b.bottom),l){let i=e[c];r.node()[c]=i,T=a.select(i),delete e[c],m.isIOS||u.on(T.node(),"pointermove"+Dt,(function(e){try{s._app.contextMenuHandler().isActive()||s._showTooltip({ganttWidget:s._ganttWidget,event:e,sender:s._ganttWidget.getRowItem(this),elem:this,className:He,itemType:Ae.Curve}),this.hasAttribute(_.POINTER_LEAVE_ATTR_NAME)||(a.select(this).attr(_.POINTER_LEAVE_ATTR_NAME,"1"),u.on(this,"pointerleave"+Dt,(function(e){try{a.select(this).attr(_.POINTER_LEAVE_ATTR_NAME,null),u.off(this,"pointerleave"+Dt),s._showTooltip({ganttWidget:s._ganttWidget,event:e,sender:null,elem:null,className:He})}catch(e){s._app.getOption("boundHandleExceptionFunc")(e)}})))}catch(e){s._app.getOption("boundHandleExceptionFunc")(e)}})),T.on(p.TARGET_EVENT_NAME,(function(e){try{var t=e.detail.hammerEvent;s._ganttWidget.handleTapOnTimeAreaBackground(t),"touch"===t.pointerType&&s._showTooltip({ganttWidget:s._ganttWidget,sender:s._ganttWidget.getRowItem(this),elem:this,className:He,itemType:Ae.Curve,event:t.srcEvent}),s.getAPIOption("triggeringOfOnClickedInTimeAreaOfRow")&&s._doOnEventFunc({ganttWidget:s._ganttWidget,eventType:t.type===p.DOUBLE_TAP_EVENT_NAME?"doubletap":"tap",event:t.srcEvent,hammerEvent:t,sender:s._ganttWidget.getRowItem(this),elem:this,className:He,itemType:Ae.Curve})}catch(e){s._app.getOption("boundHandleExceptionFunc")(e)}}));var S=s.viewModel().resourceByItem(e);if(S){var P;S.compileCurves(),T.append("rect").attr(_.TAKE_PARENT_ATTR_NAME,"1").attr("width",o).attr("height",I).attr("transform","translate(0,"+A+")").attr("class",t?nt:ct);var O=[];if(t){if(Array.isArray(S.rab_inventoryCurveData))S.rab_inventoryCurveData.forEach((function(e,t){(P=T.append("path").attr("class",at+" "+at+t+" "+s._curveTapEventClassNames).attr(_.TAKE_PARENT_ATTR_NAME,"1").attr("transform","translate(-0.5,0.5)")).node().__curveID=e.rab_curveID,O.push(P);var i={curvePathD3Array:O,curveID:e.rab_curveID,originalCurvePathD3:P,curveContainerD3:T,classNamesArray:[at,at+t],translateX:Wt,translateY:xt};s._addHotRegionCurvePath(i)}));else if(S.rab_inventoryCurveData){(P=T.append("path").attr("class",at+" "+s._curveTapEventClassNames).attr(_.TAKE_PARENT_ATTR_NAME,"1").attr("transform","translate(-0.5,0.5)")).node().__curveID=S.rab_inventoryCurveData.rab_curveID,O.push(P);D={curvePathD3Array:O,curveID:S.rab_inventoryCurveData.rab_curveID,originalCurvePathD3:P,curveContainerD3:T,classNamesArray:[at],translateX:Wt,translateY:xt};s._addHotRegionCurvePath(D)}}else{s.getAPIOption("patternShownOnOverloadCurves")||((P=T.append("path").attr("class",gt+" "+s._curveTapEventClassNames).attr(_.TAKE_PARENT_ATTR_NAME,"1").attr("transform","translate(-0.5,0.5)")).node().__curveID=S.LoadCurveID,O.push(P)),(P=T.append("path").attr("class",ke+" "+s._curveTapEventClassNames).attr(_.TAKE_PARENT_ATTR_NAME,"1").attr("transform","translate(-0.5,0.5)")).node().__curveID=S.CapacityCurveID,O.push(P);var D={curvePathD3Array:O,curveID:S.CapacityCurveID,originalCurvePathD3:P,curveContainerD3:T,classNamesArray:[ke],translateX:Wt,translateY:xt,doNotChangePointerEvents:!0};s._addHotRegionCurvePath(D),S.rab_capacityCurveAreaClipPathID||(S.rab_capacityCurveAreaClipPathID=v.generate()),Array.isArray(S.rab_loadCurveData)?S.rab_loadCurveData.forEach((function(e,t){(P=T.append("path").attr("class",dt+" "+dt+t+" "+s._curveTapEventClassNames).attr(_.TAKE_PARENT_ATTR_NAME,"1").attr("transform","translate(-0.5,0.5)")).node().__curveID=e.rab_curveID,O.push(P)})):S.rab_loadCurveData&&((P=T.append("path").attr("class",dt+" "+s._curveTapEventClassNames).attr(_.TAKE_PARENT_ATTR_NAME,"1").attr("transform","translate(-0.5,0.5)")).node().__curveID=S.rab_loadCurveData.rab_curveID,O.push(P)),S.rab_isOverloaded&&(s.getAPIOption("patternShownOnOverloadCurves")?T.append("path").attr("class",gt).attr("transform","translate(-0.5,0.5)").attr(_.TAKE_PARENT_ATTR_NAME,"1").attr("mask",`url(#${mt}${s._ganttWidget._uniqueID})`).attr("clip-path","url(#"+ke+S.rab_capacityCurveAreaClipPathID+")"):T.selectAll("."+dt).attr("clip-path","url(#"+ke+S.rab_capacityCurveAreaClipPathID+")")),(P=T.append("path").attr("class",Ve+" "+s._curveTapEventClassNames).attr(_.TAKE_PARENT_ATTR_NAME,"1").attr("transform","translate(-0.5,0.5)")).node().__curveID=S.CapacityCurveID,O.push(P)}if(O.forEach((function(t){t.node()[p.HANDLER_FUNCTION_PROPERTY+k.NAMESPACE+s._ganttWidget._uniqueID]=function(t){try{switch(t.type){case p.TAP_EVENT_NAME:case p.DOUBLE_TAP_EVENT_NAME:s._ganttWidget.handleTapOnTimeAreaBackground(t),s._onEventFunc&&s._onEventFunc.call(s,{ganttWidget:s.ganttWidget(),sender:e,rowItem:e,date:s.ganttWidget().pageXToDate(t.srcEvent.pageX),item:e,itemType:Ae.Curve,curveID:t.target.__curveID,eventType:t.type===p.TAP_EVENT_NAME?"tap":"doubletap",elem:this,elemType:1e3,event:t.srcEvent,hammerEvent:t})}}catch(e){s._handleException(e,"onEventDispatch_curvePane/event")}}})),T.append("g").attr("class",Lt).attr("transform",`translate(${Wt+s._ganttWidget.timeAxis().timeAreaViewScrollOffset()})`).append("line").attr("class",t?ot:pt).attr("x2",s._ganttWidget.getCurrentUpperXLimit()).attr("data-nrabvalue",0),s.getAPIOption("curvePanesResizable")&&(t||0===e.rab_inventoryCurvePaneHeight)){let i=t?"Inventory":"Load";var E={height:4,min:s.getAPIOption(`minimum${i}CurvePaneHeight`),max:s.getAPIOption(`maximum${i}CurvePaneHeight`),curveContainerD3:T,rowItem:e,paneIndex:t};T.append("rect").attr("class",p.PAN_EVENT_CLASS_NAME+" "+ze).attr("width",o).attr("height",4).attr("fill","transparent").attr("transform","translate(-0.5,"+(xt+y)+")").attr("cursor","ns-resize").on(p.TARGET_EVENT_NAME,(function(e){try{s._onCurvePaneSplitterInteraction(e,E)}catch(e){s._app.getOption("boundHandleExceptionFunc")(e)}}))}s._updateCurvesPaneInRow(e,t,y,r)}}else T=d.append("g").attr(_.DIRECT_TRIGGER_ATTR_NAME,"1").attr("class",`${He} ${s._curveTapEventClassNames}`).attr("transform","translate(0,"+R+")"),e[c]=T.node()}}if(l&&(t?e.rab_oldInventoryCurvePaneHeight=e.rab_inventoryCurvePaneHeight:e.rab_oldLoadCurvePaneHeight=e.rab_loadCurvePaneHeight,e.rab_itemType===Ae.Resource||e.rab_itemType===Ae.ActivityRow&&s.getAPIOption("curvePanesVisibleInActivitiesView"))){let i=r.node()[`rab_tempBGCurveContainerElem${t}`]?.parentNode.parentNode;if(i){r=a.select(i);let n=s.viewModel().resourceByItem(e);if(n){var M,B,V;t?V=d.curveByID(n.InventoryCurveID):(M=d.curveByID(n.CapacityCurveID),B=d.curveByID(n.LoadCurveID),s._styleCurveElementD3(B,r.select("."+gt),"OverloadColor"),s._styleCurveElementD3(M,r.select("."+ke),"FillColor"),s._styleCurveElementD3(M,r.select("."+Ve)));var N=[{curve:B,class:dt},{curve:V,class:at}][t],F=N.curve;if(F)if(F.Type===fe.CurveList||F.Type===fe.CurveStack){var L=0,W=function(e){Array.isArray(e.CurveIDs)&&(e.Type===fe.CurveStack?e.CurveIDs.slice().reverse():e.CurveIDs).forEach((function(e){var t=d.curveByID(e);t&&(t.Type===fe.CurveList||t.Type===fe.CurveStack?W(t):(s._styleCurveElementD3(t,r.select("."+N.class+L),"FillColor"),L++))}))};W(F)}else s._styleCurveElementD3(F,r.select("."+N.class),"FillColor")}}}},_styleCurveElementD3:function(e,t,i){let a="OverloadColor"===i,n=e&&(a?e[i]:e.StrokeColor),o=e&&(a?null:e.StrokeDashArray);if(t.style("stroke",null!=n?n:null).style("stroke-dasharray",null!=o?o:null),i){let o=a?n:e&&e[i];t.style("fill",null!=o?o:null)}},_updateCurvesPaneInRow:function(e,t,i,n){var r=this;delete e[Ht];var l=r.viewModel().resourceByItem(e);if(l){var s=n.node()[`rab_tempBGCurveContainerElem${t}`]?.parentNode.parentNode;if(s){n=a.select(s);var d,c=r._ganttWidget.determineActualRowMargins(),u=!1;if(r._curvePaneSplitterWidget.isCurrentlyDragged()&&i&&"rab_oldCurvePaneHeightBeforeInteraction"in e){var p=-c.bottom,h=i-p+c.bottom;n.select("."+(t?nt:ct)).attr("height",h).attr("transform","translate(0,"+p+")");var g=a.select(r._ganttWidget.getElementOfItem(e));g=g.select(".ngantt-fixed-table-row-succeeding .ngantt-table-cell"),d=g.select("."+xe);var m=o(d.attr("transform")).translate[0],_=e.data().TableTextColor;d.remove(),r._createScale(e,t,l,h,m,g.select(".ngantt-table-cell-content"),_),u=!0}var f=a.scaleLinear().range([i,0]).domain([t?l.rab_inventoryCurveMinValue:l.rab_loadCurveMinValue,t?l.rab_inventoryCurveMaxValue:l.rab_loadCurveMaxValue]);let B=function(){n.selectAll("."+(t?ot:pt)).each((function(){var e=a.select(this);e.attr("transform",`translate(0,${xt+f(+e.attr("data-nrabvalue"))})`)}))};if(!t&&(!d||u)&&r.getAPIOption("linesShownInLoadCurvePanes")){let t=n.select("."+He+" ."+Lt),i=function(){return(g=(g=a.select(r._ganttWidget.getElementOfItem(e))).select(".ngantt-fixed-table-row-succeeding .ngantt-table-cell")).select("."+xe)};if(d||(d=i(),u=!t.select("."+ut).size()),u){let a=function(){d.size()||(d=i()),d.selectAll(".tick").each((function(){let e=this.rab_value;e&&t.append("line").attr("class",pt+" "+ut).attr("x2",r._ganttWidget.getCurrentUpperXLimit()).attr("data-nrabvalue",e)}))};d.select(".tick").size()?(a(),u=!1):e[Ht]=function(){a(),B()}}}if(u||B(),t){var y=l.rab_inventoryCurveData;Array.isArray(y)?y.forEach((function(e,t){n.selectAll("."+at+t).attr("d",r._determineCurveAreaPathData(f,e.values(),void 0,void 0,void 0,e.rab_interpolationType))})):y&&n.selectAll("."+at).attr("d",r._determineCurveAreaPathData(f,y.values()),void 0,void 0,void 0,y.rab_interpolationType)}else{var b="";if(l.rab_isOverloaded){var A=l.rab_highestLoadCurveData;b=r._determineCurveAreaPathData(f,A.values(),void 0,void 0,void 0,A.rab_interpolationType)}n.select("."+gt).attr("d",b);var I=l.rab_loadCurveData;Array.isArray(I)?I.forEach((function(e,t){n.select("."+dt+t).attr("d",r._determineCurveAreaPathData(f,e.values(),void 0,void 0,void 0,e.rab_interpolationType))})):I&&n.select("."+dt).attr("d",r._determineCurveAreaPathData(f,I.values(),void 0,void 0,void 0,I.rab_interpolationType));var C=l.rab_highestCapacityCurveData,w=C?C.values():jt;w.rab_interpolationType=C?C.rab_interpolationType:void 0;var T=r._determineCurveAreaPathData(f,w,(function(e){return Math.max(e,0)}),void 0,void 0,w.rab_interpolationType);if(n.selectAll("."+ke).attr("d",T),n.select("."+Ve).attr("d",T),l.rab_isOverloaded){l.rab_capacityCurveAreaClipPathID||(l.rab_capacityCurveAreaClipPathID=v.generate());var R=a.select(r._ganttWidget.element()).select(".ngantt-svg-root defs");if(r.getAPIOption("patternShownOnOverloadCurves")){var S=r._ganttWidget._uniqueID,P=R.select("#"+_t+S);P.size()||(P=R.append("pattern").attr("id",_t+S).attr("width",4).attr("height",4).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("rect").attr("width",1).attr("height",4).style("fill","white"));var O=R.select("#"+mt+S);O.size()||(O=R.append("mask").attr("id",mt+S).append("rect").attr("x",0).attr("y",0).attr("width","100000").attr("height","10000").style("fill",`url(#${_t}${S})`))}var D=R.select("#"+ke+l.rab_capacityCurveAreaClipPathID+" path");if(D.size()||(D=R.append("clipPath").attr("id",ke+l.rab_capacityCurveAreaClipPathID).append("path")),r.getAPIOption("patternShownOnOverloadCurves")){var E=r._determineCurveAreaPathData(f,w,(function(e){return Math.max(e,0)}),i+c.bottom,void 0,w.rab_interpolationType);E=E.replace(/V\d+H(?=-?\d+Z$)/,"V0H"),D.attr("d",E)}else{var M=l.rab_loadCurveMinValue;D.attr("d",M>=0?T:r._determineCurveAreaPathData(f,w,(function(e){return Math.max(e,0)}),i+c.bottom,void 0,w.rab_interpolationType))}}}}}},_handleBeforeShowingCurvesPane:function(){},_expandOrCollapseCurvesInRowAtLast:function(e,t){var i=this,a=i._ganttWidget.isRowVirtualized(e);e.rab_curvePanesVisible=t,(i.viewType()!==be.Activities||i.getAPIOption("curvePanesVisibleInActivitiesView"))&&i.updateRowHeight(e),e.rab_curvePanesVisibleChanged=!a},_expandOrCollapseCurvesInRow:function(e,t,i){this._expandOrCollapseCurvesInRowAtLast(e,t,i)},_onCurveButtonClick:function(e){var t=this;if(t.viewType()!==be.Loads){t._tooltipWidget.display(null);var i=t._ganttWidget.getRowItem(e);if(i.isResourceRelevant()){var a=t._expandOrCollapseCurvesInRow(i,!i.rab_curvePanesVisible),n=function(){i.data().rab_cachedCurveCollapseState=i.rab_curvePanesVisible?0:1,t.invalidateRow(i),t._ganttWidget.update()};a?a.then(n,n):n()}}},_determineCurveAreaPathData:function(e,t,i,n,o,r){var l=this;if(!t)return"";var d=l._ganttWidget.timeAxis(),c=864e5,u=d.convertXToDate(l._ganttWidget.getCurrentLowerXLimit()),p=d.convertXToDate(l._ganttWidget.getCurrentUpperXLimit()),h=function(e){return t[e].start},g=s.findDateWithinSortedArray(t,u,!1,h),m=s.findDateWithinSortedArray(t,p,!1,h),_=t.slice(g,m+1),f=u.getTime();if(_.length?_[0].start.getTime()<f&&(_[0]=Object.assign({},_[0],{start:new Date(f-c)})):_.unshift(new Date(f-c)),_.push(new Date(p.getTime()+c)),o){var y=d.collapseCalendar();if(y)for(var b=_.length-1;b>0;b--){var A=new Date((_[b].start||_[b]).getTime()-1);if(y.determineTimeType(A)===F.NonWorkingTime){var v=y.findStartOfCurrentTimeTypeInterval(A);if(v<A)for(;b>0;){if(!((_[b-1].start||_[b-1])>v))break;_.splice(--b,1)}}}}r===ye.Linear&&_.length>1&&(_[0].start=_[1].start||_[1],_.length>2&&(_[_.length-1]=_[_.length-2]));var I,C=e(0);switch(r){case ye.StepAfter:I=a.curveStepAfter;break;case ye.Linear:I=a.curveLinear;break;default:I=a.curveStepAfter}for(var w=a.line().curve(I).x((function(e){return l._ganttWidget.convertXToLimitedX(d.convertDateToX(e.start||e))})).defined((function(e){return!e.start||isFinite(e.value)})).y((function(t){return t.start?e(i?i(t.value):t.value):C}))(_).split("M"),T=[],R="V"+(n||e(0)),S=R.length,P=w.length-1;P;P--){var O=w[P];T.push("M",O),O.substring(O.length-S)!==R&&T.push(R),T.push("H",O.substring(0,O.indexOf(",")),"Z")}return T=T.join("")},_handleCanSelectTimeItem:function(e){if(this.getAPIOption("allocationsSelectableOnlyOnOneResourceAtATime")&&e.canSelect&&[be.Resources,be.SkilledResources].includes(this.viewType())&&e.otherSelectedTimeItems.length){var t=e.timeItem;t.rab_itemType===Ae.AllocationEntry&&(t=e.ganttWidget.getParent(t));var i=e.otherSelectedTimeItems[0];i.rab_itemType===Ae.AllocationEntry&&(i=e.ganttWidget.getParent(i)),t.data().ResourceID!==i.data().ResourceID&&(e.canSelect=!1)}},_canSelectTimeItemFunc:function(e){var t=this;(m.isMacOrIOS?e.metaKey:e.ctrlKey)&&(!t.getAPIOption("multipleSelectionEnabled")&&e.otherSelectedTimeItems.length||t._ganttWidget.selectedRowItems().length||t._ganttWidget.selectedLinkItems().length||t._entitiesTableWidget?.selectedRowItems().length)&&(e.canSelect=!1),e.canSelect&&t._handleCanSelectTimeItem(e)},_handleSelectTimeItem:function(){},_selectTimeItemFunc:function(e){var t=this;if(t._handleSelectTimeItem(e),!e.cancel){var i=Array.isArray(e.newSelectedItems)&&!!e.newSelectedItems.length;t.getAPIOption("selectionBehavior")===Re.Highlighting&&t._ganttWidget.option("unselectedItemsShownCovered","auto"),t._entitiesTableWidget&&(t.getAPIOption("selectionBehavior")===Re.Highlighting&&t._entitiesTableWidget.option("unselectedItemsShownCovered",i),t._entitiesTableWidget.selectedRowItems([]),t._entitiesTableWidget.showMarkingTemporarily(null)),t._checkShowHideDragBoundaries(e.newSelectedItems)}},_handleCanSelectRowItem:function(){},_canSelectRowItemFunc:function(e){var t=this;(m.isMacOrIOS?e.metaKey:e.ctrlKey)&&(!t.getAPIOption("multipleSelectionEnabled")&&e.otherSelectedRowItems.length||t._ganttWidget.selectedTimeItems().length||t._ganttWidget.selectedLinkItems().length||t._entitiesTableWidget?.selectedRowItems().length)&&(e.canSelect=!1),e.canSelect&&t._handleCanSelectRowItem(e)},_handleSelectRowItem:function(){},_selectRowItemFunc:function(e){var t=this;if(t._handleSelectRowItem(e),!e.cancel){var i=Array.isArray(e.newSelectedItems)&&!!e.newSelectedItems.length;t.getAPIOption("selectionBehavior")===Re.Highlighting&&t._ganttWidget.option("unselectedItemsShownCovered","auto"),t._entitiesTableWidget&&(t._entitiesTableWidget.option("updateSuspended",!0),t.getAPIOption("selectionBehavior")===Re.Highlighting&&t._entitiesTableWidget.option("unselectedItemsShownCovered",i),t._entitiesTableWidget.selectedRowItems([]),t._entitiesTableWidget.option("updateSuspended",!1),t._entitiesTableWidget.showMarkingTemporarily(null))}},_handleCanSelectLinkItem:function(){},_canSelectLinkItemFunc:function(e){var t=this;(m.isMacOrIOS?e.metaKey:e.ctrlKey)&&(!t.getAPIOption("multipleSelectionEnabled")&&e.otherSelectedLinkItems.length||t._ganttWidget.selectedTimeItems().length||t._ganttWidget.selectedRowItems().length||t._entitiesTableWidget?.selectedRowItems().length)&&(e.canSelect=!1),e.canSelect&&t._handleCanSelectLinkItem(e)},_handleSelectLinkItem:function(){},_selectLinkItemFunc:function(e){var t=this;if(t._handleSelectLinkItem(e),!e.cancel){var i=Array.isArray(e.newSelectedItems)&&!!e.newSelectedItems.length;t.getAPIOption("selectionBehavior")===Re.Highlighting&&t._ganttWidget.option("unselectedItemsShownCovered","auto"),t._entitiesTableWidget&&(t._entitiesTableWidget.option("updateSuspended",!0),t.getAPIOption("selectionBehavior")===Re.Highlighting&&t._entitiesTableWidget.option("unselectedItemsShownCovered",i),t._entitiesTableWidget.selectedRowItems([]),t._entitiesTableWidget.option("updateSuspended",!1),t._entitiesTableWidget.showMarkingTemporarily(null))}},getSelectedObjectsAndType:function(){var e=this,t={itemType:void 0,objects:[]};let i=(e,i)=>{var a=i.data();return a?.data()?(t.itemType=i.rab_itemType,t.objects.push(a),!0):e};switch(e._ganttWidget.selectedLinkItems().reduce(i,!1)||e._ganttWidget.selectedTimeItems().reduce(i,!1)||e._ganttWidget.selectedRowItems().reduce(i,!1)||e._entitiesTableWidget?.selectedRowItems().forEach((e=>{i(!1,e)})),t.itemType){case Ae.ActivityBaseline:case Ae.ActivityFrame:t.itemType=Ae.Activity}return t},selectOrHighlightObjectsByObjectType:function(e,t,i,a){var n=this.viewModel();if(n){var o,r=n.getSelectableItemTypeByObjectType(e,i);null!=r&&(o=n.objectsOrIDSToWrapperSubstitutes(r,t)),this.selectOrHighlightObjectsByItemType(r,o,a)}},selectOrHighlightObjectsByItemType:function(e,t,i){var a=this,n=e===Ae.Entity,o=e===Ae.Link,r=e===Ae.Resource||e===Ae.Skill||e===Ae.ActivityRow||e===Ae.AllocationRow,l=null;if(Array.isArray(t)&&t.length>0)switch(e){case Ae.Activity:case Ae.ActivityRow:case Ae.Allocation:case Ae.AllocationRow:case Ae.Entity:case Ae.Link:case Ae.Resource:case Ae.Skill:l=a.viewModel(n).getSelectableItemsByObjectsConcerningMultiples(e,t)}Array.isArray(l)&&l.length>0?i?n?(a._entitiesTableWidget&&a._entitiesTableWidget.showMarkingTemporarily(l),a._ganttWidget.showMarkingTemporarily(null)):(a._entitiesTableWidget&&a._entitiesTableWidget.showMarkingTemporarily(null),a._ganttWidget.showMarkingTemporarily(l)):(a._entitiesTableWidget&&a._entitiesTableWidget.option("updateSuspended",!0),a._ganttWidget.option("updateSuspended",!0),a.getAPIOption("selectionBehavior")===Re.Highlighting&&(a._ganttWidget.option("unselectedItemsShownCovered",n?"auto":!!l.length),a._entitiesTableWidget&&a._entitiesTableWidget.option("unselectedItemsShownCovered",n?!!l.length:"auto")),n?(a._entitiesTableWidget&&a._entitiesTableWidget.selectedRowItems(l),a._ganttWidget.selectedRowItems([]),a._ganttWidget.selectedTimeItems([]),a._ganttWidget.selectedLinkItems([])):(r?a._ganttWidget.selectedRowItems(l):o?a._ganttWidget.selectedLinkItems(l):(a._ganttWidget.selectedTimeItems(l),a._checkShowHideDragBoundaries()),a._entitiesTableWidget&&a._entitiesTableWidget.selectedRowItems([]))):i?(a._entitiesTableWidget&&a._entitiesTableWidget.showMarkingTemporarily(null),a._ganttWidget.showMarkingTemporarily(null)):(a.getAPIOption("selectionBehavior")===Re.Highlighting&&a._ganttWidget.option("unselectedItemsShownCovered",!1),a._ganttWidget.selectedRowItems([]),a._ganttWidget.selectedTimeItems([]),a._ganttWidget.selectedLinkItems([]),a._entitiesTableWidget&&(a.getAPIOption("selectionBehavior")===Re.Highlighting&&a._entitiesTableWidget.option("unselectedItemsShownCovered",!1),a._entitiesTableWidget.selectedRowItems([]))),i||(a._entitiesTableWidget&&a._entitiesTableWidget.option("updateSuspended",!1),a._ganttWidget.option("updateSuspended",!1))},checkObjectVisibility:function(){return!0},isEntitiesTableVisible:function(){var e=this;return e.viewType()===be.Activities?e.getAPIOption("entitiesTableVisibleInActivitiesView"):e.viewType()===be.Resources?e.getAPIOption("entitiesTableVisibleInResourcesView"):e.viewType()===be.SkilledResources&&e.getAPIOption("entitiesTableVisibleInSkilledResourcesView")},_showHideEntitiesTable:function(e){var t,i=this;if(i.isEntitiesTableVisible()){if(!i._entitiesTableWidget&&(this._entitiesViewModel=this._viewModels[be._Entities],this._entitiesViewModel)){t=!0;var a=i._divD3.append("div").classed(Qe,!0),n=i._divD3.append("svg").attr("class",Ze),o={classes:kt,min:0,max:1/0,width:this._ganttWidget.options.splitterWidth,height:parseFloat(window.getComputedStyle(this._divD3.node()).height),orientation:b.Orientation.Vertical,startDrag:function(){i._entitiesSplitterPositionStartDrag=parseFloat(window.getComputedStyle(i._ganttWidget.element()).width)},changed:function(e,t){i._onVerticalSplitterChanged(t.newValue)},dragged:function(e,t){i._ganttWidget.options.virtualized&&i._onVerticalSplitterChanged(t.newValue)},endDrag:function(e,t){t.canceled&&i._onVerticalSplitterChanged(i._entitiesSplitterPositionStartDrag),i._entitiesSplitterPositionStartDrag=void 0}};this._entitiesSplitterWidget=new b(n.node(),o);let e=i.model(),l=i.getAPIOption("entitiesTableShownFullScreen")?~T.MoveOutside:-1;var r={transitionDuration:0,updateSuspended:!0,treeLinesVisible:i.getAPIOption("entitiesTableTreeVisualizationMode"),separationLinesBetweenGroupCells:i.getAPIOption("separationLinesInColoredIndentation"),visualZoomFactor:i.getAPIOption("visualZoomFactor"),autoDisposeOfUnusedItems:!0,differentiationBetweenEmptyArrayAndUndefined:!0,editable:i.getAPIOption("editable"),rowItemsSelectable:!0,defaultRowItemSelectable:i.getAPIOption("defaultEntityRowSelectable"),defaultRowItemCollapsible:i.getAPIOption("defaultEntityRowCollapsible"),defaultRowInteractions:i.getAPIOption("defaultEntityAllowedRowDragModes")&l,titleHeight:i.getAPIOption("entitiesTableTitleHeight"),cellContentTopOffset:i.getAPIOption("entitiesTableCellContentTopOffset"),defaultRowMainHeight:i.getAPIOption("defaultEntityMinimumRowHeight"),preventDefaultOnContextMenuEvents:i.getAPIOption("preventDefaultOnContextMenuEvents"),errorFunc:function(e){i._app.getOption("boundHandleExceptionFunc")(e.error),e.rethrow=!1},handleWarningFunc:e.getOption("handleWarningFunc")?.bind(e),measuredRenderingTimeFunc:i._app.measuredRenderingTime?.bind(i._app),closeContextMenuFunc:i._app.contextMenuHandler().close.bind(i._app.contextMenuHandler()),itemHighlightingColor:i.getAPIOption("objectHighlightingColor"),itemHighlightFlashingEnabled:i.getAPIOption("objectHighlightFlashingEnabled"),scrollOffsetsChangedFuncTimeDelay:i.getAPIOption("scrollOffsetsChangedCallbackTimeDelay"),groupCellsWithHorizontalSeparationLine:i.getAPIOption("groupCellsWithHorizontalSeparationLine"),interactiveSwitchingOfSortOrderEnabled:i.getAPIOption("interactiveSwitchingOfSortOrderEnabled"),sortingIndicatorVisible:i.getAPIOption("sortingIndicatorVisible"),enrichClassFunc:i._enrichEntitiesTableClassFunc.bind(i),dragStartFunc:i._entitiesTableDragStartFunc.bind(i),dragEndFunc:i._entitiesTableDragEndFunc.bind(i),draggedFunc:i._entitiesTableDraggedFunc.bind(i),droppedFunc:i._entitiesTableDroppedFunc.bind(i),onEventFunc:i._entitiesTableOnEventFunc.bind(i),convertFunc:i._convertFunc.bind(i),canSelectRowItemFunc:i._entitiesTableCanSelectRowItemFunc.bind(i),selectRowItemFunc:i._entitiesTableSelectRowItemFunc.bind(i),selectRowItemFuncCalledForDeselectionForced:!0,determineTableRowDefinitionFunc:i._determineEntitiesTableRowDefinitionFunc.bind(i),verticalScrollOffsetChangedFunc:i._verticalScrollOffsetChangedFunc.bind(i),rowExpandOrCollapseFunc:i._entitiesRowExpandOrCollapseFunc.bind(i),rowExpandedOrCollapsedFunc:i._entitiesRowExpandedOrCollapsedFunc.bind(i),keyDownFunc:i._keyDownFunc.bind(i),tableColumnWidthChangedFunc:i._tableColumnWidthChangedFunc.bind(i),checkPossibleInteractionsFunc:i._checkPossibleInteractionsFunc.bind(i),defaultRowInteractionsByExternalTypeMap:{[Ae.Entity]:i.getAPIOption("defaultEntityAllowedRowDragModes")},forcedRowInteractionsByExternalTypeMap:{[Ae.Entity]:i.getAPIOption("forcedEntityAllowedRowDragModes")}};i._options&&i._options.entitiesTableWidget&&Object.assign(r,i._options.entitiesTableWidget),this._entitiesTableWidget=new R(a.node(),r),u.on(a.node(),"ntablewidgettablewidthchanged.rab"+i._entitiesTableWidget._uniqueID,(function(e){try{let t=e.detail;t.inColumnWidthInteraction&&(i._options.entitiesTableWidget&&i._options.entitiesTableWidget.tableWidth===t.oldValue&&i.setAPIOption("entitiesTableWidth",i.getAPIOption("entitiesTableWidth")+(t.newValue-t.oldValue)),i._setEntitiesTableWidthOptions())}catch(e){i._app.getOption("boundHandleExceptionFunc")(e)}})),this._entitiesViewModel.attachView(this),this._entitiesViewModel.clearRegisteredRowItems(),this._entitiesViewModel.determineVisibilityOfAllObjects(),this._setEntitiesTableWidthOptions(),this._entitiesViewModel.setTableDefinitionIntoWidget(this._entitiesTableWidget),i.updateSymbols(i.app().symbolsMap(),!0,!0),this._entitiesTableWidget.option("rowItemsRoot",this._entitiesViewModel.rowItemsRoot()),["entitiesTableColumnSeparatorColor","entitiesTableTitleBackgroundColor","entitiesTableTitleTextColor","entitiesTableTitleColumnSeparatorColor","entitiesTableTitleHighlightingColor","entitiesTableTreeViewLineColor","entitiesTableTreeViewLineDashArray"].forEach((function(e){i._setColorByOptionValue(e)})),i._ganttWidget.option("selectRowItemFuncCalledForDeselectionForced",!0)}}else i._entitiesTableWidget&&(this._entitiesViewModel.clearRegisteredRowItems(),this._entitiesViewModel.detachView(),this._entitiesViewModel=void 0,t=!0,u.off(i._entitiesTableWidget.element(),"ntablewidgettablewidthchanged.rab"+i._entitiesTableWidget._uniqueID),i._entitiesTableWidget.element().remove(),i._entitiesSplitterWidget.element().remove(),delete i._entitiesTableWidget,delete i._entitiesSplitterWidget),i._ganttWidget.option("selectRowItemFuncCalledForDeselectionForced",!1);e&&i._registerAPIOptions(),this._resizeWidgets(t),t&&i._entitiesTableWidget?.option("transitionDuration",i.getAPIOption("animationDuration"))},_enrichEntitiesTableClassFunc:function(e){e.tableType=Ie.Entities,this._doEnrichClassFunc(e)},_entitiesTableRowFillFunc:function(e){this._doTableRowFill(e,Ie.Entities)},_doTableRowFill:function(e,t,i){var n=e.rowItem;if(n){var o;e.rowDefinition&&e.rowDefinition.rab_tableRowDefinition&&(o=e.rowDefinition.rab_tableRowDefinition.rab_backgroundColor);var r=n.rab_tableRowBackgroundColor=n.data().TableColor||o;if(e.rowElem){var l,s;switch(t){case Ie.Entities:l=".ntable-group-cell",s=".ntable-row-background-rect";break;case Ie.Gantt:l=".ngantt-table-group-cell",s=".ngantt-table-row-background-rect"}(r||i)&&a.select(e.rowElem).select(s).style("fill",r||null);var d=n.getParentItem();if(d)for(var c=a.select(e.rowElem).selectAll(l).nodes(),u=c.length-1;u>=0;u--)if(d){var p=void 0;this.getAPIOption("colorOfFirstTableCellAppliedToGroupColoring")&&(p=d.rab_sourced_contents?.tableCellBackgroundColor?.[0].content);let e=p??d.rab_tableRowBackgroundColor;(e||i)&&a.select(c[u]).style("fill",e||null),u===c.length-1&&(n.rab_calculatedAllocationRowIndicatorColor=e),d=d.getParentItem()}e.worldViewFillColor=this._determineTableRowBackgroundColor(n,e.rowLevel)}}},_determineTableRowBackgroundColor:function(e,t){var i=e.rab_tableRowBackgroundColor;return i&&"none"!==i&&"transparent"!==i||(i=e.rab_itemType===Ae.AllocationRow?"#f8f8f8":["#c0c0c0","#d0d0d0","#e0e0e0","#f0f0f0"][t]),i},_entitiesTableOnEventFunc:function(e){e.tableType=Ie.Entities,this._doOnEventFunc(e)},_entitiesTableCellFillFunc:function(e){var t=e.rowItem;e.text=1===e.columnIndex?t.data().ID:t.data().TableText,this._doEntitiesTableCellFillFunc(e)},_doEntitiesTableCellFillFunc:function(e){var t,i=e.rowItem;e.rowDefinition&&e.rowDefinition.rab_tableRowDefinition&&(t=e.rowDefinition.rab_tableRowDefinition.rab_textColor);var n=e.tableCellTextColor||i.data().TableTextColor||t,o=e.rowDefinitionType!==N.FixedColumnsPreceding?e.tableCellBackgroundColor:this.getAPIOption("entitiesTableSymbolColumnBackgroundColor");(n||o)&&(e.finalizeFunc=function(){if(n&&a.select(e.cellElem).select(".ntable-column-text").style("fill",n),o){var t="#000000"===ce.calculateBlackOrWhiteTextColor(o)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFjSURBVGhD7ZS7LgZRFEaHKBQKhVKhVEhISCgUHkDhIRQ6Eq3OK0jkj6iUHsEzCEJCp6BTkChIFKxvciYZx56LS1TfSlbOXM7eczvzFcYYY4wxxhhjzM8YSmPEJG7iDL7iKe7hE3Yxjts4V+4VxTkO8L7ca2cUt3AxbV/hId5gb9bwEd8z73AZ29B5zctr1U9925jGa8xrX3ADezGFz5g3qdTN6Q1H6Hh085Xqq/4RI3iGUZ18wyXs5AijBnV3MGIXo/l1DzBiHaP5dU/wE8NprFOt2zbm05jTp3YhjTmzaWzjS230APpxutDnjvj32ugBlBhdNM35Te1FGtvo079cBvphojUolSaK2Agdj9KrUn2bltkY3mJUV7mKvVBkRQ+hFOmKQp2PUkz9uqJQKfOAea1UQHwLvaljVC4r3pQeTRGYo3lKs8uktvv84GIC91HX1LV1DytojDHGGGOMMcb8HUXxAd9DjLLnJpEBAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAGFSURBVGhD7ZSxSsRQEEUT2cLCwsLSYksLwQUFt7DwAyz2Iyy2U7C1218QZFmsLP0Ev0FUFLSz0M5CwULBIt67GcW8vDcJKlb3wGWSmTsvye57kwkhhBBCCCGEED8jt1ijKIpFhB1oGXqDzqCDPM+fEV3QO4+wB/WmiSy7gMbofShv06B3FmEXWod4fQ0dofcWsR1YZAA9QSH30IbZorBuvhCuNzBbFNSXoBuaA16hodl8YOxCL+xKwJfjL1yDeaun4Lpds1dAvgOd05TgHeqbPQ1Mx1O7z77ZKyA/KssuE7NXQH67LLucmv2LGYvf+dy3HqsWQ9r0rlkMWbHoUeuNfQAPThMdiyH/3hv7AE6MJlKe3/ReWvRoXh/7rAfxwKTgNOGIrcG81VNw3eg2Q34OuqPJYcvsPjAOodhHcIo0jUKO4NgU43ruKES9Dz3SHGFktnaggf/ECcS5zPE2gaIjMIQ+iNPsysTrNgecvQvQIcRn8tl8h00rCyGEEEIIIYQQf0OWfQAtFmf8zfgOgAAAAABJRU5ErkJggg";a.select(e.cellElem).select(".ntable-cell-background-rect").style("fill",o),a.select(e.cellElem).select(".ntable-cell-show-more-symbols").attr("href",t)}}),n=n||"black",0===e.columnIndex&&e.rowDefinitionType!==N.FixedColumnsPreceding&&e.rowDefinitionType!==N.FixedColumnsSucceeding&&(a.select(e.rowElem).select(".ntable-colexp-button .ntable-plus,.ntable-colexp-button .ntable-minus").style("fill",n),a.select(e.rowElem).select(".ntable-leaves-colexp-button .ntable-plus,.ntable-leaves-colexp-button .ntable-minus").style("stroke",n)),e.symbolID&&(e.symbolURL=`///rabSB_${e.tableWidget._uniqueID}_${this._currentSymbolIDsMap[e.symbolID]}`)},_entitiesTableHandleCanSelectRowItem:function(){},_entitiesTableCanSelectRowItemFunc:function(e){var t=this;(m.isMacOrIOS?e.metaKey:e.ctrlKey)&&(!t.getAPIOption("multipleSelectionEnabled")&&e.otherSelectedRowItems.length||t._ganttWidget.selectedTimeItems().length||t._ganttWidget.selectedLinkItems().length||t._ganttWidget.selectedRowItems().length)&&(e.canSelect=!1),e.canSelect&&t._entitiesTableHandleCanSelectRowItem(e)},_entitiesTableHandleSelectRowItem:function(){},_entitiesTableSelectRowItemFunc:function(e){var t=this;if(t._entitiesTableHandleSelectRowItem(e),!e.cancel){var i=Array.isArray(e.newSelectedItems)&&!!e.newSelectedItems.length;t.getAPIOption("selectionBehavior")===Re.Highlighting&&t._entitiesTableWidget.option("unselectedItemsShownCovered","auto"),t._ganttWidget.option("updateSuspended",!0),t.getAPIOption("selectionBehavior")===Re.Highlighting&&t._ganttWidget.option("unselectedItemsShownCovered",i),t._ganttWidget.selectedRowItems([]),t._ganttWidget.selectedTimeItems([]),t._ganttWidget.selectedLinkItems([]),t._ganttWidget.showMarkingTemporarily(null),t._ganttWidget.option("updateSuspended",!1)}},_entitiesTableDragStartFunc:function(e){var t=this;t._deselectOtherItemsIfItemIsNotSelected(e.sender,e.tableWidget,K.DragStart);var i=e.sender;t._dragItemCache={},t._dragItemCache[t._composeObjectIDFromItemType(i.rab_itemType,i.data())]=i,t._consolidatedDragItemCache={},t._consolidatedDragItemCache[t._composeObjectIDFromItemType(i.rab_itemType,i.data())]=e.sender,e.tableType=Ie.Entities,t._doDragStartFunc(e),e.cancel||i&&i.rab_itemType===Ae.Entity&&(t._handleStartSuitableTargetIDs(i.data(),e),t.ganttWidget().setVisibilityForRowCovers(null))},_entitiesTableDragEndFunc:function(e){var t=this;e.tableType=Ie.Entities,t._validateDraggedItems(e)&&t._doDragEndFunc(e),t._handleEndSuitableTargetIDs(),delete t._dragItemCache,delete t._consolidatedDragItemCache},_entitiesTableDraggedFunc:function(e){e.tableType=Ie.Entities,this._doDraggedFunc(e)},_entitiesTableDroppedFunc:function(e){e.tableType=Ie.Entities,this._validateDraggedItems(e)&&this._doDroppedFunc(e)},_determineEntitiesTableRowDefinitionFunc:function(e){return e.tableType=Ie.Entities,this._doDetermineTableRowDefinitionFunc(e)},_onVerticalSplitterChanged:function(e){var t=this,i=parseFloat(window.getComputedStyle(t._divD3.node()).width),n=t._ganttWidget.options.splitterWidth;a.select(t._ganttWidget.element()).style("width",e+"px"),a.select(t._entitiesTableWidget.element()).style("width",i-e-n+"px").style("left",e+n+"px"),t._forceSizeChanged()},_resizeWidgets:function(e){var t=this,i=parseFloat(window.getComputedStyle(t._divD3.node()).width)||1e3,n=i;if(t.isEntitiesTableVisible()&&t._entitiesTableWidget){var o=0,r=0,l=0,s=0;t.getAPIOption("entitiesTableShownFullScreen")?(n=0,l=i):(o=t._ganttWidget.options.splitterWidth,r=i,l=(e?0:parseFloat(window.getComputedStyle(t._entitiesTableWidget.element()).width))||(null!=t.getAPIOption("entitiesTableViewWidth")?t.getAPIOption("entitiesTableViewWidth"):null!=t.getAPIOption("entitiesTableWidth")?t.getAPIOption("entitiesTableWidth"):i),l*=t.getAPIOption("visualZoomFactor")/(!e&&t._oldVisualZoomFactorOnResizeWidgets||1),s=Math.floor(i/3),n=i-(l=Math.min(l,s))-o),a.select(t._ganttWidget.element()).style("width",n+"px"),a.select(t._entitiesTableWidget.element()).style("width",l+"px").style("left",n+o+"px"),a.select(t._entitiesSplitterWidget.element()).style("width",r+"px"),t._entitiesSplitterWidget.option("position",{x:n,y:0}).option("height",parseFloat(window.getComputedStyle(t._divD3.node()).height));var d=y.scrollBarWidth(),c=t._actualEntitiesTableSymbolColumnWidth(),u=null!=t.getAPIOption("entitiesTableWidth")?t.getAPIOption("entitiesTableWidth"):t._entitiesTableWidget.actualTableWidth(),p=r-Math.max(s,u+c+d)-o;t._entitiesSplitterWidget.option("min",Math.max(0,p))}else a.select(t._ganttWidget.element()).style("width",n+"px");t._forceSizeChanged(),t._oldVisualZoomFactorOnResizeWidgets=t.getAPIOption("visualZoomFactor")},_forceSizeChanged:function(){var e=this;e._ganttWidget.forceSizeChanged(),e._entitiesTableWidget&&e._entitiesTableWidget.forceSizeChanged()},_actualEntitiesTableSymbolColumnWidth:function(){var e=this;return e.getAPIOption("entitiesTableSymbolColumnVisible")?null!=e.getAPIOption("entitiesTableSymbolColumnWidth")?e.getAPIOption("entitiesTableSymbolColumnWidth"):22:0},_setEntitiesTableWidthOptions:function(){var e=this.getAPIOption("entitiesTableWidth");if(this._options.entitiesTableWidget&&(this._options.entitiesTableWidget.tableWidth=e),this._entitiesTableWidget){null==e&&this._entitiesTableWidget.isInInteraction()||this._entitiesTableWidget.option("tableWidth",e);var t=parseFloat(window.getComputedStyle(this._divD3.node()).width)||1e3,i=this._ganttWidget.options.splitterWidth;null==e&&(e=this._entitiesTableWidget.actualTableWidth()),e+=this._actualEntitiesTableSymbolColumnWidth()+y.scrollBarWidth();var a=Math.floor(t/3);this._entitiesSplitterWidget.option("min",Math.max(a,t-e-i))}},getVisibleEntityParent:function(e){return this._entitiesTableWidget?this._entitiesTableWidget.getVisibleParent(e):void 0},invalidateEntityRow:function(e,t){this._entitiesTableWidget&&this._entitiesTableWidget.invalidateRow(e,t)},_entitiesRowExpandOrCollapseFunc:function(e){e.tableType=Ie.Entities,this._handleRowExpandOrCollapseFunc(e)},_entitiesRowExpandedOrCollapsedFunc:function(e){e.tableType=Ie.Entities,this._handleRowExpandedOrCollapsedFunc(e)},_showHideNonWorkingTime:function(){this.getAPIOption("nonWorkingTimeVisible")?this.showFullTime():this.hideNonWorkingTime(!0)},invalidateAllRowsIfEmpty:function(e){this.viewModel(e)?.invalidateAllRowsIfEmpty()},preAddObjects:function(e){if(!this.model().getChildrenArray(e).length){var t=this.viewModel(e===ae);if(t&&(t.invalidateAllRowsIfEmpty(),t.isVisibleRowObjectType(e)))return t.checkPlacementOfChildItemsSuppressed(!0,e),!0}},postAddObjects:function(e,t,i){let a=e===ae;var n=this.viewModel(a);n&&(!0===i?(n.isVisibleRowObjectType(e)&&n.determineVisibilityOfAllRowObjects(e,t),n.checkPlacementOfChildItemsSuppressed(!1,e)):n.autoInvalidateRows(),a||this.viewType()===be.Loads||this.ganttWidget().calculateInvalidSubRowIndexesOfBarsInRows())},postUpdateObjects:function(e,t){let i=e===ae,a=this.viewModel(i);if(a){a.isVisibleRowObjectType(e)&&a.determineVisibilityOfAllRowObjects(e,t);let n=this.ganttWidget(),o=[te,le].includes(e);o&&n.deactivateInvalidationOfSubRowIndexesOfBarsInRows(!0),a.autoInvalidateRows(),o?n.deactivateInvalidationOfSubRowIndexesOfBarsInRows(!1):i||n.calculateInvalidSubRowIndexesOfBarsInRows()}},postRemoveObjects:function(e){let t=e===ae;this.viewModel(t)?.autoInvalidateRows(),t||this.viewType()===be.Loads||this.ganttWidget().calculateInvalidSubRowIndexesOfBarsInRows()},RAB_WEEKLY_DATE_LINE_GRID_CLASS:Vt,RAB_DAILY_DATE_LINE_GRID_CLASS:Ye};e.exports=l.extendClass("rabGanttView",r,Kt)},8882:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(9276),o=i(5977)._RowDragModes_AllSupportedFlags,r={construct:function(e,t,i,a){this._super(e,t,i,a),void 0===this.rab_cachedCollapseState&&(this.rab_cachedCollapseState=0)},store:function(e){this._super(e);let t=e instanceof n;if(t||(this._copyOfData=this.getAPIOption("internalObjectCopiesNeeded")&&e?Object.assign({},e):void 0),e){t&&(e=e.externalData());var i=e.CollapseState??e.PM_CollapseState;i>=0&&(this.rab_cachedCollapseState=i)}},_modificationClassificationByProperty:{CollapseState:function(e){var t=e.CollapseState??e.PM_CollapseState;return this.rab_cachedCollapseState===t?2:0},AllowedRowDragModes:2,RowSelectable:2,RowSymbolIDs:-1,RowTooltipTemplateID:2,TableColor:1},preUpdateSelf:function(){this.rab_preUpdateData=this.data()?Object.assign({},this.data()):void 0},isValidForViewType:function(e){return!0!==this.isPseudo()||!0===this.isPseudoForViewType(e)},isPseudoForViewType:function(e){return!0===this.isPseudo()&&this.data()?.__VIEWTYPE===e},isPredefinedPseudoForViewType:function(e){return!0===this.isPseudo()&&this.data()?.__VIEWTYPE===e&&!0===this.data()?.__PREDEFINED},_getTableColor:function(){return this._getPropertyAsColorString(this._data.TableColor??this._data.PM_TableColor)},_getTableRowDefinitionID:function(){return this._data.TableRowDefinitionID??this._data.PM_TableRowDefinitionID},_getRowSymbolIDs:function(){let e=this._data.RowSymbolIDs??this._data.PM_RowSymbolIDs;return Array.isArray(e)?e:void 0},_getSortCode:function(){return this._data.SortCode??this._data.PM_SortCode}},l=a.extendClass("rabGroup",n,r),s=l.prototype;s.defineProperty("AllowedRowDragModes",{get:function(){var e=this._getPropertyAsNumber(this._data.AllowedRowDragModes??this._data.PM_AllowedRowDragModes);return e&&(e&=o),e}}),s.defineProperty("CollapseState",{get:function(){var e=this.rab_cachedCollapseState;return e>=0?e:this._getPropertyAsNumber(this._data.CollapseState??this._data.PM_CollapseState)}},void 0,-1),s.defineProperty("HasChildren",{get:function(){var e=this._data.HasChildren??this._data.PM_HasChildren;return null==e?void 0:!!e}}),s.defineProperty("MinimumRowHeight",{get:function(){return this._getPropertyAsNumber(this._data.MinimumRowHeight??this._data.PM_MinimumRowHeight)}}),s.defineProperty("RowCollapsible",{get:function(){var e=this._data.RowCollapsible??this._data.PM_RowCollapsible;return null==e?void 0:!!e}}),s.defineProperty("RowSelectable",{get:function(){var e=this._data.RowSelectable??this._data.PM_RowSelectable;return null==e?void 0:!!e}}),s.defineProperty("RowSymbolColumnBackgroundColor",{get:function(){return this._getPropertyAsColorString(this._data.RowSymbolColumnBackgroundColor??this._data.PM_RowSymbolColumnBackgroundColor)}}),s.defineProperty("RowSymbolIDs",{get:function(){return this._getRowSymbolIDs()}}),s.defineProperty("RowTooltipTemplateID",{get:function(){return this._data.RowTooltipTemplateID??this._data.PM_RowTooltipTemplateID}}),s.defineProperty("SortCode",{get:function(){return this._getSortCode()}}),s.defineProperty("TableColor",{get:function(){return this._getTableColor()}}),s.defineProperty("TableColorVisibleInTimeArea",{get:function(){var e=this._data.TableColorVisibleInTimeArea;return null!=e&&!!e}}),s.defineProperty("TableRowDefinitionID",{get:function(){return this._getTableRowDefinitionID()}}),s.defineProperty("TableTextColor",{get:function(){return this._getPropertyAsColorString(this._data.TableTextColor??this._data.PM_TableTextColor)}}),s.defineProperty("TableText",{get:function(){return this._data.TableText??this._data.Name}}),e.exports=l},8037:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(9280).RowInteractions,o=i(4613),r=(i(8882),{construct:function(e,t,i,a,o,r){this.rab_firstUpdate=!0,this._super(e,t,i,a,o,r),i.isPseudo()&&(this.rowInteractions=n.None,this.calendar=null)},updateFromReference:function(e){var t=this._super(e),i=this.data();return this.getParentItem()&&this.setAttributesByHierarchySupplementaryDefinition(this.getHierarchySupplementaryDefinitionID()),this.selectable=i.RowSelectable,this.collapsible=i.RowCollapsible,this.atTheTop=-1===i.ViewArea,this.rab_firstUpdate&&(this.rab_tableColor=i.TableColor,this.rab_calendarGridColor=i.CalendarGridColor,this.rab_firstUpdate=!1),t},setParentItem:function(e){this._super(e),this.setAttributesByHierarchySupplementaryDefinition(this.getHierarchySupplementaryDefinitionID())},recalculateParentItemForGrouping:function(e){if(this._descriptor){var t=this.data();t.__PARENTITEM=e;var i=this.redetectParentItem(e,t);delete t.__PARENTITEM,this.reassignParentItem(i)||this._viewModel.registerRowItem(this,!1,!0)}},setAttributesByHierarchySupplementaryDefinition:function(e){var t=this.data(),i=t.isPseudo()||!e?void 0:t.model().hierarchySupplementaryDefinitionByID(e),a=i?.HierarchyLevelSupplementaryDefinitions[this.getHierarchyLevel()-1];this.tableRowDefinitionID=t.TableRowDefinitionID||a?.TableRowDefinitionID,null!=this.tableRowDefinitionID&&(this.tableRowDefinitionID=this.tableRowDefinitionID.toString());var n=void 0;"boolean"==typeof a?.InitiallyCollapsed&&(n=a.InitiallyCollapsed);var o=this.getCollapseState();o>=0&&(n=!!o),"boolean"==typeof n&&(this.initiallyCollapsed=n)},getHierarchySupplementaryDefinitionID:function(){return this._viewModel.getHierarchySupplementaryDefinitionID()},getAllocationRowsCollapseState:function(){return this.data().AllocationRowsCollapseState},getCollapseState:function(){return this.data().CollapseState},getCurveCollapseState:function(){return this.data().CurveCollapseState},handleRowExpandedOrCollapsed:function(e){this.data().rab_cachedCollapseState=e?1:0}});e.exports=a.extendClass("rabGroupRowItem",o,r)},203:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(9276),o={store:function(e){this._super(e),this._copyOfData=this.getAPIOption("internalObjectCopiesNeeded")&&e?Object.assign({},e):void 0},_modificationClassificationByProperty:{}},r=a.extendClass("rabGroupingLevelDefinition",n,o);Object.defineProperty(r.prototype,"CodeToTextMap",{get:function(){return this._data.GroupingCodeToTextMap||this._data.CodeToTextMap}}),Object.defineProperty(r.prototype,"GroupingCodeSource",{get:function(){return this._data.GroupingCodeSource}}),Object.defineProperty(r.prototype,"DefaultCode",{get:function(){return this._data.DefaultGroupingCode||this._data.DefaultCode}}),Object.defineProperty(r.prototype,"InitiallyCollapsed",{get:function(){var e=this._data.InitiallyCollapsed;return null==e?void 0:!!e}}),Object.defineProperty(r.prototype,"MinimumRowHeight",{get:function(){var e=+this._data.MinimumRowHeight;return isNaN(e)||e<0?void 0:e}}),Object.defineProperty(r.prototype,"TableBackgroundColor",{get:function(){return this._data.TableColor||this._data.TableBackgroundColor}}),Object.defineProperty(r.prototype,"TableRowDefinitionID",{get:function(){return this._data.TableRowDefinitionID}}),Object.defineProperty(r.prototype,"TableTextColor",{get:function(){return this._data.TableTextColor}}),Object.defineProperty(r.prototype,"TableTextFormat",{get:function(){var e=this._data.TableTextFormat;return"string"==typeof e?e:"{{>MapText}}"}}),Object.defineProperty(r.prototype,"TableColorVisibleInTimeArea",{get:function(){var e=this._data.TableColorVisibleInTimeArea;return null!=e&&!!e}}),e.exports=r},9044:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=i(5977)._GroupTableRowDefinitionID,r=i(7315),l={construct:function(e,t,i,a,n,o,r,l,s,d){var c=Object.assign({},d||{});c.handleParentItemFunc||(c.handleParentItemFunc=function(e,t){var i=t.__PARENTITEM?t.__PARENTITEM:this.defaultHandleParentItemFunc(e,t),a=this.getHierarchySupplementaryDefinitionID();return a&&(i=this.defaultHandleParentItemForGroupedHierarchy(a,i,t)),i}),c.anyRelationshipChangedFunc||(c.anyRelationshipChangedFunc=function(e,t,i){var a=this.defaultAnyRelationshipChangedFunc(e,t,i);return a?this._viewModel.__relationshipChanged=1:(a=this.hasToSimulateRelationshipChanged(t,i))&&(this._viewModel.__relationshipChanged=2),a}),c.handleRelationshipChangedFunc||(c.handleRelationshipChangedFunc=function(e,t,i,a){switch(this._viewModel.__relationshipChanged){case 1:this.defaultHandleRelationshipChangedFunc(e,t,i,a);break;case 2:var n=t.getNonPseudoParentItem();t.recalculateParentItemForGrouping(n)}}),this._super(e,t,i,a,n,o,r,l,s,c)},getHierarchySupplementaryDefinitionID:function(){return this._functions.getHierarchySupplementaryDefinitionIDFunc?this._functions.getHierarchySupplementaryDefinitionIDFunc.call(this):void 0},_getSourceValueForGroupingCodeSource:function(e,t,i,a,n,o,r){return(r||!this._functions.getSourceValueForGroupingCodeSourceFunc?e[t.GroupingCodeSource]:this._functions.getSourceValueForGroupingCodeSourceFunc.call(this,e,t,i,a,n,o))||t.DefaultCode},defaultHandleParentItemForGroupedHierarchy:function(e,t,i){var n=this._viewModel.model().hierarchySupplementaryDefinitionByID(e);if(n){var o=t.getHierarchyLevel(),r=n.HierarchyLevelSupplementaryDefinitions[o];if(r){var l=r.GroupingLevelDefinitions;if(l&&l.length>0){var s=[];for(let e=0;e<l.length;e++){var d=l[e],c=d.GroupingCodeSource;a.nStringHelper.notIsNullOrEmpty(c)&&s.push(d)}if(s&&s.length>0){var u=i.data();if(!u.__REMAININGCOUNT&&(this._viewArea=i.ViewArea,!this._buildingPrefinedGroups)){var p=r.PredefinedGroups;if(p&&p.length>0){this._buildingPrefinedGroups=!0;for(let e=0;e<p.length;e++){var h=p[e];this.__getOrCreateParentItemForGroupedHierarchy(n,r,t,h,o,s,this._viewArea,!0)}delete this._buildingPrefinedGroups}}return this.__getOrCreateParentItemForGroupedHierarchy(n,r,t,u,o,s,this._viewArea,!1)}}}}return t},__preparePseudoData:function(e,t,i,a,n,r,l,s,d,c){var u={};!0===c&&(u={},Object.keys(a).forEach((function(e){var t=e;e.startsWith("PM_")&&(t=e.substring(3)),u[t]=a[e]})),u.__PREDEFINED=!0),u.__PARENTLEVEL=n,u.__PSEUDO=!0,u.__VIEWTYPE=this._viewType,u.__REMAININGCOUNT=r,u.__HIERARCHYSUPPLEMENTARYDEFINITIONID=e.ID,u.__HIERARCHYLEVELSUPPLEMENTARYDEFINITIONINDEX=n,u.__GROUPINGLEVELDEFINITIONINDEX=r-1,u.__GROUPINGCODES={},u.RowSelectable=!1,u.ViewArea=d;for(var p="000",h=[],g=l.length-1;g>=0;g--){h[g]="XXX";var m=void 0,_=l[g],f=_.GroupingCodeSource;if(g<r){var y={};if(m=this._getSourceValueForGroupingCodeSource(a,_,e,n,g,y,c)??"",h[g]=m||p,g===r-1){if(null!=_.MinimumRowHeight&&null==u.MinimumRowHeight&&(u.MinimumRowHeight=_.MinimumRowHeight),null!=_.TableBackgroundColor&&null==u.TableColor&&(u.TableColor=_.TableBackgroundColor),null!=_.TableColorVisibleInTimeArea&&null==u.TableColorVisibleInTimeArea&&(u.TableColorVisibleInTimeArea=_.TableColorVisibleInTimeArea),null!=_.TableTextColor&&null==u.TableTextColor&&(u.TableTextColor=_.TableTextColor),null!=y.text)u.TableText=y.text;else if(null!=_.TableTextFormat&&null==u.TableText&&(u.TableText=_.TableTextFormat,u.TableText.includes("{{>MapText}}"))){let e=_.CodeToTextMap,t=m??"";var b=(e instanceof Map?e.get(t):e?.[t])??t;u.TableText=u.TableText.replace("{{>MapText}}",b)}if(null==u.TableRowDefinitionID&&(u.TableRowDefinitionID=_.TableRowDefinitionID||o),null==u.CollapseState){var A=void 0;"boolean"==typeof _.InitiallyCollapsed&&(A=_.InitiallyCollapsed),null!=A&&(u.CollapseState=A?1:0)}}}u[f]=m,u.__GROUPINGCODES[f]=m}return u.ID=[this._viewType,s||p,...h,d||p].join("\v"),u},__getOrCreateParentItemForGroupedHierarchy:function(e,t,i,n,o,r,l,s){var d;if(n.__REMAININGCOUNT)d=n.__REMAININGCOUNT-1;else if(d=r.length,!0===s){d=0;for(var c=0;c<r.length;c++){r[c].GroupingCodeSource in n&&(d=c+1)}}if(d>0){var u=i.data(),p=u.Role,h=u.ID,g=this.__preparePseudoData(e,t,u.data(),n,o,d,r,h,l,s);g.ParentRole=p,g.ParentID=h;var m,_=this.getPropertyName(),f=a.nPropertyComposer.compose(g,this.getPrimaryKeyNames()),y=this._viewModel.model().getChildByPrimaryKey(_,f);if(y){var b=!0,A=y.data();!0===A.__PREDEFINED&&"REMOVE"!==A.__STATE&&(b=!1),b&&y.store(g),(m=this._viewModel._item(y))?b&&(m.updateFromReference(),m.recalculateParentItemForGrouping(i)):m=this._viewModel.addChild(y)}else this._viewModel.app().addPseudoObject(g,_),y=this._viewModel.model().getChildByPrimaryKey(_,f),m=this._viewModel._item(y);return m&&m.setHierarchyLevel(o),m}return delete n.__REMAININGCOUNT,i},hasToSimulateRelationshipChanged:function(e,t){var i=this.getHierarchySupplementaryDefinitionID();if(i){var n=e.data().rab_preUpdateData;if(n){var o=t.data();if(n.ViewArea!=o.ViewArea)return!0;var r=this._viewModel.model().hierarchySupplementaryDefinitionByID(i);if(r){var l=r.HierarchyLevelSupplementaryDefinitions[e.getHierarchyLevel()-1];if(l){var s=l.GroupingLevelDefinitions;if(s&&s.length>0)for(let e=0;e<s.length;e++){var d=s[e].GroupingCodeSource;if(a.nStringHelper.notIsNullOrEmpty(d)&&n[d]!==o[d])return!0}}}}}}};e.exports=n.extendClass("rabGroupingItemDescriptor",r,l)},7613:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(5977).RAB_HIERARCHY_LEVEL_SUPPLEMENTARY_DEFINITIONS_PROP_NAME,o=i(9276),r={store:function(e){this._super(e),this._copyOfData=this.getAPIOption("internalObjectCopiesNeeded")&&e?Object.assign({},e):void 0},_modificationClassificationByProperty:{}},l=a.extendClass("rabHierarchySupplementaryDefinition",o,r);Object.defineProperty(l.prototype,"HierarchyLevelSupplementaryDefinitions",{get:function(){return this.getChildrenArray(n)}}),e.exports=l},3340:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(5977).RAB_GROUPING_LEVEL_DEFINITIONS_PROP_NAME,o=i(9276),r={store:function(e){this._super(e),this._copyOfData=this.getAPIOption("internalObjectCopiesNeeded")&&e?Object.assign({},e):void 0},_modificationClassificationByProperty:{}},l=a.extendClass("rabHierarchyLevelSupplementaryDefinition",o,r);Object.defineProperty(l.prototype,"GroupingLevelDefinitions",{get:function(){return this.getChildrenArray(n)}}),Object.defineProperty(l.prototype,"PredefinedGroups",{get:function(){var e=this._data.PredefinedGroups;return Array.isArray(e)?e:void 0}}),Object.defineProperty(l.prototype,"InitiallyCollapsed",{get:function(){var e=this._data.InitiallyCollapsed;return null==e?void 0:!!e}}),Object.defineProperty(l.prototype,"TableRowDefinitionID",{get:function(){return this._data.TableRowDefinitionID}}),e.exports=l},5977:(e,t,i)=>{var a=i(3571).nDefaultSeparator,n=i(5674),o=n.BarShape,r=n.ConstraintType,l=n.TimeUnit,s=i(476),d=s.AllocationBarDesign,c=s.BarDragModes,u=s.BarDesigns,p=s.RowDragModes,h=s.WarningCode,g=Object.assign({StartEnd:1<<24,Grouped:1<<25,Merged:1<<26},u),m=g.StartEnd-1&~g.Entries,_=g.Entries|g.Merged|g.Grouped;const f={[d.Allocation]:g.StartEnd,[d.Entries]:g.Entries,[d.AllocationAndEntries]:g.StartEnd|g.Entries,[d.MergedEntries]:g.Merged,[d.GroupedEntries]:g.Entries|g.Grouped};var y={RAB_ROOT_PROP_NAME:"Root",RAB_ACTIVITIES_PROP_NAME:"Activities",RAB_ACTIVITY_ENTRIES_PROP_NAME:"Entries",RAB_ALLOCATIONS_PROP_NAME:"Allocations",RAB_ALLOCATION_ENTRIES_PROP_NAME:"Entries",RAB_CALENDARS_PROP_NAME:"Calendars",RAB_CALENDAR_GRIDS_PROP_NAME:"PeriodHighlighters",RAB_CALENDAR_GRID_ENTRIES_PROP_NAME:"Entries",RAB_CURVES_PROP_NAME:"Curves",RAB_ENTITIES_PROP_NAME:"Entities",RAB_GROUPING_LEVEL_DEFINITIONS_PROP_NAME:"GroupingLevelDefinitions",RAB_HIERARCHY_LEVEL_SUPPLEMENTARY_DEFINITIONS_PROP_NAME:"HierarchyLevelSupplementaryDefinitions",RAB_HIERARCHY_SUPPLEMENTARY_DEFINITIONS_PROP_NAME:"HierarchySupplementaryDefinitions",RAB_LINKS_PROP_NAME:"Links",RAB_LINK_ENTRIES_PROP_NAME:"Entries",RAB_RESOURCES_PROPERTIES_FOR_SKILLS_PROP_NAME:"ResourcePropertiesForSkills",RAB_RESOURCES_PROPERTIES_FOR_ACTIVITIES_PROP_NAME:"ResourcePropertiesForActivities",RAB_RESOURCES_PROP_NAME:"Resources",RAB_SKILLS_PROP_NAME:"Skills",RAB_SKILLED_RESOURCES_PROP_NAME:"SkilledResources",RAB_SKILLED_ALLOCATIONS_PROP_NAME:"SkilledAllocations",RAB_MULTIPLIED_SKILLS_PROP_NAME:"MultipliedSkills",RAB_MULTIPLIED_RESOURCES_BY_ACTIVITIES_PROP_NAME:"MultipliedResourcesByActivities",RAB_MULTIPLIED_ALLOCATIONS_BY_ACTIVITIES_PROP_NAME:"MultipliedAllocationsByActivities",RAB_GANTT_VIEW_CLASS:"nrab-gantt-view",RAB_MESSAGE_PANE_CLASS:"nrab-message-pane",RAB_RECORDING_SYMBOL_CLASS:"nrab-recording-symbol",PrimaryKeyInfos:{},RelationshipInfos:{},ViewRelationshipInfos:{},_UnifiedBarDesigns:g,_UnifiedBarDesignEntriesMask:_,_convertPMToUnifiedBarDesign:function(e){return f[e]|m&~g.DefaultReduced},_convertToUnifiedBarDesign:function(e){return(e&u.Entries?g.Entries|g.Grouped|g.StartEnd:g.Merged)|e&m},_entriesShownSeparatelyByUnifiedBarDesign:e=>(e&_)===g.Entries,_LinkTypeFlags:{SourceStart:2,TargetEnd:1},_activityBarShapesMap:{0:o.RectangleWithLeftTopBevel,1:o.Summary,2:o.Diamond,3:o.Rectangle,4:"rabSymbol"},_allocationBarShapesMap:{0:o.RectangleWithLeftTopBevel,1:o.Summary,2:o.Diamond,3:o.Rectangle,4:"rabSymbol"},_GroupTableRowDefinitionID:a+a,RowCategory:{SubRootRow:"s",ChildRow:"c",LeafGroupRow:"g",LeafRow:"l"},_roundPreservingPrecision:function(e,t,i){let a=t.toString(),n=i.toString(),o=Math.max(!a.includes("e")&&a.match(/\.\d*/)?.[0].length||1,!n.includes("e")&&n.match(/\.\d*/)?.[0].length||1)-1,r=Math.pow(10,o);return Math.round(e*r)/r},WarningTextsByCode:{[h.MISCELLANEOUS]:"{{text}}",[h.PRIMARY_KEY_EMPTY_AT_INDEX]:"Empty ID (eventually in object reference) at array index {{index}} found!",[h.PRIMARY_KEY_EXISTING_AT_INDEX]:'Object reference with ID "{{key}}" at array index {{index}} exists already!',[h.PRIMARY_KEY_NOT_EXISTING_AT_INDEX]:'Object with ID "{{key}}" at array index {{index}} does not exist!',[h.PRIMARY_KEY_DUPLICATE_AT_INDEX]:'Object reference with same ID "{{key}}" at array index {{index}} found!',[h.RELATED_PRIMARY_KEY_CYCLIC]:'Property "{{prop}}" in {{type}} object with ID "{{key}}" leads to cycle!',[h.RELATED_PRIMARY_KEY_NOT_EXISTING_AT_INDEX]:'Referenced object in property "{{prop}}" with ID "{{key}}" is currently unknown!',[h.REFERENCE_IDENTICAL_ON_UPDATE]:'Reference of {{type}} object with ID "{{key}}" is same as before!',[h.PRIMARY_KEY_NOT_EXISTING]:'Object with ID "{{key}}" does not exist!',[h.OBJECT_NOT_VISIBLE_IN_VIEW]:'Object with ID "{{key}}" is not visible in current view!',[h.OPTION_NAME_UNKNOWN]:'Option named "{{name}}" is unknown!',[h.REQUIRED_OPTION_UNSET]:'Option named "{{name}}" is required, but unset! It will be set internally to {{guessedValue}}.',[h.APPTOOLS__RELATED_PRIMARY_KEY_NOT_EXISTING]:'Related object with ID "{{key}}" does not exist!',[h.TABLE__HTML_CANVAS_FAILED_ON_PRINTING]:'Could not create a canvas for value in option named "{{name}}" ({{message}})!'},ErrorCode:{RELATED_PRIMARY_KEY_CYCLIC:h.RELATED_PRIMARY_KEY_CYCLIC,UNKNOWN_CALENDAR:1500},_constraintMappings:[["EarliestStart",r.StartNoEarlierThan],["LatestStart",r.StartNoLaterThan],["MustStartOn",r.MustStartOn],["EarliestEnd",r.EndNoEarlierThan],["LatestEnd",r.EndNoLaterThan],["MustEndOn",r.MustEndOn]]};y._UnifiedBarDesignsDefault=y._convertToUnifiedBarDesign(u.Default),y._BarDragModes_AllSupportedFlags=Object.values(c).reduce(((e,t)=>e|t)),y._RowDragModes_AllSupportedFlags=Object.values(p).reduce(((e,t)=>e|t)),y.PrimaryKeyInfos[y.RAB_ACTIVITIES_PROP_NAME]=["Role","ID"],y.PrimaryKeyInfos[y.RAB_ALLOCATIONS_PROP_NAME]=["Role","ID"],y.PrimaryKeyInfos[y.RAB_CALENDARS_PROP_NAME]="ID",y.PrimaryKeyInfos[y.RAB_CALENDAR_GRIDS_PROP_NAME]="ID",y.PrimaryKeyInfos[y.RAB_CURVES_PROP_NAME]="ID",y.PrimaryKeyInfos[y.RAB_ENTITIES_PROP_NAME]="ID",y.PrimaryKeyInfos[y.RAB_HIERARCHY_SUPPLEMENTARY_DEFINITIONS_PROP_NAME]="ID",y.PrimaryKeyInfos[y.RAB_LINKS_PROP_NAME]=["Role","ID"],y.PrimaryKeyInfos[y.RAB_RESOURCES_PROP_NAME]=["Role","ID"],y.PrimaryKeyInfos[y.RAB_RESOURCES_PROPERTIES_FOR_SKILLS_PROP_NAME]=["SkillID","Role","ID"],y.PrimaryKeyInfos[y.RAB_RESOURCES_PROPERTIES_FOR_ACTIVITIES_PROP_NAME]=["ActivityRole","ActivityID","Role","ID"],y.PrimaryKeyInfos[y.RAB_SKILLS_PROP_NAME]="ID",y.PrimaryKeyInfos[y.RAB_MULTIPLIED_SKILLS_PROP_NAME]=["__MultiplierPrimaryKey","ID"],y.PrimaryKeyInfos[y.RAB_SKILLED_RESOURCES_PROP_NAME]=["__MultiplierPrimaryKey","Role","ID"],y.PrimaryKeyInfos[y.RAB_SKILLED_ALLOCATIONS_PROP_NAME]=["__MultiplierPrimaryKey","Role","ID"],y.PrimaryKeyInfos[y.RAB_MULTIPLIED_RESOURCES_BY_ACTIVITIES_PROP_NAME]=["__MultiplierPrimaryKey","Role","ID"],y.PrimaryKeyInfos[y.RAB_MULTIPLIED_ALLOCATIONS_BY_ACTIVITIES_PROP_NAME]=["__MultiplierPrimaryKey","Role","ID"],y.RelationshipInfos[y.RAB_MULTIPLIED_SKILLS_PROP_NAME]=[{comingFrom:y.RAB_MULTIPLIED_SKILLS_PROP_NAME,relatedTo:y.RAB_SKILLS_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"ID",essential:!0,empty:null}]}],y.RelationshipInfos[y.RAB_SKILLED_RESOURCES_PROP_NAME]=[{comingFrom:y.RAB_SKILLED_RESOURCES_PROP_NAME,relatedTo:y.RAB_MULTIPLIED_SKILLS_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"SkillIDs",essential:!0,empty:null}]},{comingFrom:y.RAB_SKILLED_RESOURCES_PROP_NAME,relatedTo:y.RAB_MULTIPLIED_SKILLS_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"__ViewArea",autoPropertyGenerationDisabled:!0,essential:!1,empty:null},{primaryKeyName:"__MultiplierPrimaryKey",autoPropertyGenerationDisabled:!0,essential:!0,empty:null}]},{comingFrom:y.RAB_SKILLED_RESOURCES_PROP_NAME,relatedTo:y.RAB_RESOURCES_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"Role",essential:!1,empty:null},{primaryKeyName:"ID",essential:!0,empty:null}]}],y.RelationshipInfos[y.RAB_SKILLED_ALLOCATIONS_PROP_NAME]=[{comingFrom:y.RAB_SKILLED_ALLOCATIONS_PROP_NAME,relatedTo:y.RAB_SKILLS_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"SkillID",essential:!0,empty:null}]},{comingFrom:y.RAB_SKILLED_ALLOCATIONS_PROP_NAME,relatedTo:y.RAB_SKILLED_RESOURCES_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"__MultiplierPrimaryKey",autoPropertyGenerationDisabled:!0,essential:!0,empty:null},{primaryKeyName:"ResourceRole",essential:!1,empty:null},{primaryKeyName:"ResourceID",essential:!0,empty:null}]},{comingFrom:y.RAB_SKILLED_ALLOCATIONS_PROP_NAME,relatedTo:y.RAB_ALLOCATIONS_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"Role",essential:!1,empty:null},{primaryKeyName:"ID",essential:!0,empty:null}]}],y.RelationshipInfos[y.RAB_MULTIPLIED_RESOURCES_BY_ACTIVITIES_PROP_NAME]=[{comingFrom:y.RAB_MULTIPLIED_RESOURCES_BY_ACTIVITIES_PROP_NAME,relatedTo:y.RAB_ACTIVITIES_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"__MultiplierPrimaryKey",autoPropertyGenerationDisabled:!0,essential:!0,empty:null}]},{comingFrom:y.RAB_MULTIPLIED_RESOURCES_BY_ACTIVITIES_PROP_NAME,relatedTo:y.RAB_RESOURCES_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"Role",essential:!1,empty:null},{primaryKeyName:"ID",essential:!0,empty:null}]}],y.RelationshipInfos[y.RAB_MULTIPLIED_ALLOCATIONS_BY_ACTIVITIES_PROP_NAME]=[{comingFrom:y.RAB_MULTIPLIED_ALLOCATIONS_BY_ACTIVITIES_PROP_NAME,relatedTo:y.RAB_ACTIVITIES_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"ActivityRole",essential:!1,empty:null},{primaryKeyName:"ActivityID",essential:!0,empty:null}]},{comingFrom:y.RAB_MULTIPLIED_ALLOCATIONS_BY_ACTIVITIES_PROP_NAME,relatedTo:y.RAB_MULTIPLIED_RESOURCES_BY_ACTIVITIES_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"__MultiplierPrimaryKey",autoPropertyGenerationDisabled:!0,essential:!0,empty:null},{primaryKeyName:"ResourceRole",essential:!1,empty:null},{primaryKeyName:"ResourceID",essential:!0,empty:null}]},{comingFrom:y.RAB_MULTIPLIED_ALLOCATIONS_BY_ACTIVITIES_PROP_NAME,relatedTo:y.RAB_ALLOCATIONS_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"Role",essential:!1,empty:null},{primaryKeyName:"ID",essential:!0,empty:null}]}],y.RelationshipInfos[y.RAB_RESOURCES_PROP_NAME]=[{comingFrom:y.RAB_RESOURCES_PROP_NAME,relatedTo:y.RAB_RESOURCES_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"ParentRole",essential:!1,empty:null},{primaryKeyName:"ParentID",essential:!0,empty:null}]},{comingFrom:y.RAB_RESOURCES_PROP_NAME,relatedTo:y.RAB_CALENDARS_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"CalendarID",essential:!0,empty:null}]},{comingFrom:y.RAB_RESOURCES_PROP_NAME,relatedTo:y.RAB_CALENDAR_GRIDS_PROP_NAME,autoPropertyGenerationDisabled:!0,primaryKeyInfos:[{primaryKeyName:"PeriodHighlighterID",compatiblePrimaryKeyName:"PM_PeriodHighlighterID",essential:!0,empty:null}]},{comingFrom:y.RAB_RESOURCES_PROP_NAME,relatedTo:y.RAB_CURVES_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"CapacityCurveID",essential:!0,empty:null}]},{comingFrom:y.RAB_RESOURCES_PROP_NAME,relatedTo:y.RAB_CURVES_PROP_NAME,autoPropertyGenerationDisabled:!0,primaryKeyInfos:[{primaryKeyName:"InventoryCurveID",essential:!0,empty:null}]},{comingFrom:y.RAB_RESOURCES_PROP_NAME,relatedTo:y.RAB_CURVES_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"LoadCurveID",essential:!0,empty:null}]},{comingFrom:y.RAB_RESOURCES_PROP_NAME,relatedTo:y.RAB_SKILLS_PROP_NAME,isMultiRelationship:!0,primaryKeyInfos:[{primaryKeyName:"SkillIDs",essential:!0,empty:null}]}],y.RelationshipInfos[y.RAB_ACTIVITIES_PROP_NAME]=[{comingFrom:y.RAB_ACTIVITIES_PROP_NAME,relatedTo:y.RAB_ACTIVITIES_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"ParentRole",essential:!1,empty:null},{primaryKeyName:"ParentID",essential:!0,empty:null}]},{comingFrom:y.RAB_ACTIVITIES_PROP_NAME,relatedTo:y.RAB_CALENDARS_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"CalendarID",essential:!0,empty:null}]},{comingFrom:y.RAB_ACTIVITIES_PROP_NAME,relatedTo:y.RAB_CALENDAR_GRIDS_PROP_NAME,autoPropertyGenerationDisabled:!0,primaryKeyInfos:[{primaryKeyName:"PeriodHighlighterID",compatiblePrimaryKeyName:"PM_PeriodHighlighterID",essential:!0,empty:null}]}],y.RelationshipInfos[y.RAB_ALLOCATIONS_PROP_NAME]=[{comingFrom:y.RAB_ALLOCATIONS_PROP_NAME,relatedTo:y.RAB_RESOURCES_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"ResourceRole",essential:!1,empty:null},{primaryKeyName:"ResourceID",essential:!0,empty:null}]},{comingFrom:y.RAB_ALLOCATIONS_PROP_NAME,relatedTo:y.RAB_ACTIVITIES_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"ActivityRole",essential:!1,empty:null},{primaryKeyName:"ActivityID",essential:!0,empty:null}]},{comingFrom:y.RAB_ALLOCATIONS_PROP_NAME,relatedTo:y.RAB_SKILLS_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"SkillID",essential:!0,empty:null}]}],y.RelationshipInfos[y.RAB_LINKS_PROP_NAME]=[{comingFrom:y.RAB_LINKS_PROP_NAME,relatedTo:y.RAB_ACTIVITIES_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"SourceActivityRole",essential:!1,empty:null},{primaryKeyName:"SourceActivityID",essential:!0,empty:null}]},{comingFrom:y.RAB_LINKS_PROP_NAME,relatedTo:y.RAB_ACTIVITIES_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"TargetActivityRole",essential:!1,empty:null},{primaryKeyName:"TargetActivityID",essential:!0,empty:null}]},{comingFrom:y.RAB_LINKS_PROP_NAME,relatedTo:y.RAB_ALLOCATIONS_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"SourceAllocationRole",essential:!1,empty:null},{primaryKeyName:"SourceAllocationID",essential:!0,empty:null}]},{comingFrom:y.RAB_LINKS_PROP_NAME,relatedTo:y.RAB_ALLOCATIONS_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"TargetAllocationRole",essential:!1,empty:null},{primaryKeyName:"TargetAllocationID",essential:!0,empty:null}]}],y.RelationshipInfos[y.RAB_CURVES_PROP_NAME]=[{comingFrom:y.RAB_CURVES_PROP_NAME,relatedTo:y.RAB_CURVES_PROP_NAME,autoPropertyGenerationDisabled:!0,isMultiRelationship:!0,primaryKeyInfos:[{primaryKeyName:"CurveIDs",essential:!0,empty:null}]}],y.RelationshipInfos[y.RAB_ENTITIES_PROP_NAME]=[{comingFrom:y.RAB_ENTITIES_PROP_NAME,relatedTo:y.RAB_ENTITIES_PROP_NAME,primaryKeyInfos:[{primaryKeyName:"ParentID",essential:!0,empty:null}]}],y.RAB_CLASS_PREFIX="nrab-",y.RAB_NAMESPACE_SUFFIX=".nrab",y.RAB_CURVE_CONTAINER_CLASS=y.RAB_CLASS_PREFIX+"curves",y._rabTimeUnitToTimeUnit={second:l.Seconds,seconds:l.Seconds,minute:l.Minutes,minutes:l.Minutes,hour:l.Hours,hours:l.Hours,day:l.Days,days:l.Days,week:l.Weeks,weeks:l.Weeks,month:l.Months,months:l.Months,quarter:l.Quarters,quarters:l.Quarters,year:l.Years,years:l.Years,[l.Seconds]:l.Seconds,[l.Minutes]:l.Minutes,[l.Hours]:l.Hours,[l.Days]:l.Days,[l.Weeks]:l.Weeks,[l.Months]:l.Months,[l.Quarters]:l.Quarters,[l.Years]:l.Years,0:l.Seconds,1:l.Minutes,2:l.Hours,3:l.Days,4:l.Weeks,5:l.Months,6:l.Quarters,7:l.Years},e.exports=y},1333:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nWrapperBase;e.exports=n.extendClass("rabItem",o,{construct:function(e,t,i,a){this._viewModel=t,this.rab_itemType=e,this._super(i,a),this.isBridgeEnabled()||(this.enrichObject(),this.updateFromReference())},externalData:function(){return this.data()?.externalData()},viewType:function(){return this._viewModel.viewType()},_getHandleWarningFunc:function(){return this._viewModel?.model().getHandleWarningFunc()||this._super()},getAPIOption:function(e){return this._viewModel.getAPIOption(e)},CRUDUpdate:function(e){this._super(e),this.isBridgeEnabled()||this.updateFromReference()},isBridgeEnabled:function(){return!!this._descriptor&&this._descriptor.getEnableBridge()},enrichObject:function(){if(this._viewModel){var e=this._viewModel.getOption("enrichObjectFunc");e&&e.call(this._viewModel,this)}},updateFromReference:function(e){if(this._viewModel){var t=this._viewModel.getOption("updateFromReferenceFunc");if(t)return t.call(this._viewModel,this,e)}return this},viewModel:function(){return this._viewModel},getSelectableItem:function(){return this}})},1597:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(5977).RAB_LINK_ENTRIES_PROP_NAME,o=i(9276),r=a.extendClass("rabLink",o,{_getDefaultObjectPropName:function(){return"defaultValuesForLinkProperties"}}),l=r.prototype;l.defineProperty("Color",{get:function(){return this._getPropertyAsColorString(this._data.Color??this._data.PM_Color)}}),l.defineProperty("DashArray",{get:function(){return this._data.DashArray??this._data.PM_DashArray}}),l.defineProperty("Entries",{get:function(){return this.getChildrenArray(n)}}),l.defineProperty("RelationType",{get:function(){return this._data.RelationType}},void 0,0),l.defineProperty("RoutingType",{get:function(){return this._data.RoutingType??this._data.PM_RoutingType}}),l.defineProperty("Selectable",{get:function(){var e=this._data.Selectable??this._data.PM_Selectable;return"boolean"==typeof e?e:void 0}}),l.defineProperty("TargetMarker",{get:function(){var e=this._data.TargetMarker??this._data.PM_TargetMarker;return null==e?void 0:e}},void 0,1),l.defineProperty("TooltipTemplateID",{get:function(){return this._data.TooltipTemplateID??this._data.PM_TooltipTemplateID}}),l.defineProperty("Width",{get:function(){return this._data.Width??this._data.PM_Width}},void 0,1),e.exports=r},1221:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(9276),o=a.extendClass("rabLinkEntry",n,{construct:function(e,t,i,a){this._super(e,t,i,a)}});Object.defineProperty(o.prototype,"Color",{get:function(){return this._getPropertyAsColorString(this._data.Color)}}),Object.defineProperty(o.prototype,"Duration",{get:function(){return this._getPropertyAsFiniteNumber(this._data.Duration)}}),e.exports=o},9721:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nPrimaryKeyManager,r=i(476),l=r.ItemType,s=r.ViewType,d=i(1333),c=(i(1597),i(5977)),u=c.PrimaryKeyInfos,p=c.RAB_ACTIVITIES_PROP_NAME,h=c.RAB_LINKS_PROP_NAME,g=c.RAB_ALLOCATIONS_PROP_NAME,m=c.RAB_SKILLED_ALLOCATIONS_PROP_NAME,_=c.RAB_MULTIPLIED_ALLOCATIONS_BY_ACTIVITIES_PROP_NAME,f=c.RelationshipInfos,y={construct:function(e,t,i,a){this._super(l.Link,e,t,a)},updateFromReference:function(e){var t=this,i=Object.assign({},this),a=this._super(e),n=this.data(),r=n.model(),d=this._viewModel,c=this.viewType();if(c!==s.Resources&&c!==s.SkilledResources||d.getAPIOptionMapped("definedAllocationLinksVisible")||n.rab_sourceAllocation||n.rab_targetAllocation)delete this._linkItems,e&&!e.linkItems||(n.rab_sourceAllocation&&(this.rab_sourceAllocation=n.rab_sourceAllocation),n.rab_targetAllocation&&(this.rab_targetAllocation=n.rab_targetAllocation),this.sourceTimeItem=this._determineTimeItem(n,0,this.rab_sourceAllocation),this.targetTimeItem=this._determineTimeItem(n,1,this.rab_targetAllocation));else if(!e||e.linkItems){t._linkItems=[];var u=o.getRelationshipInfoTo(f[h],h,p),m=o.getPrimaryKeyByRelationshipInfo(n,u[0]);if(m){var _=o.getPrimaryKeyByRelationshipInfo(n,u[1]);if(_){var y=r.getRelatedObjects(g,p,"*",m);if(y){var b=r.getRelatedObjects(g,p,"*",_);b&&(y.forEach((function(e){(c===s.Resources||e.SkillID)&&b.forEach((function(i){if(c===s.Resources||i.SkillID){n.rab_sourceAllocation=e,n.rab_targetAllocation=i;var a=t._viewModel._createItem(l.Link,null,n);t._linkItems.push(a)}}))})),delete n.rab_sourceAllocation,delete n.rab_targetAllocation)}}}}if(!e||e.attributes){let e=n.Color??"black";this.type=n.RelationType,this.selectable=n.Selectable,this.routingType=n.RoutingType,this.targetMarker=n.TargetMarker,this.color=e;let t=[];n.Entries?.forEach((i=>{if(i){let a=i.Duration;a&&t.push({duration:a,color:i.Color??e})}})),t?.length?this.entries=t:delete this.entries}let A=this._rab_isModified,v=n.DashArray,I=n.Width;return this._rab_cachedProp_DashArray!==v||this._rab_cachedProp_Width!==I?(this._rab_cachedProp_DashArray=v,this._rab_cachedProp_Width=I,this._rab_isModified=!0):this._rab_isModified||Object.keys(Object.assign({},this,i)).every((e=>t[e]===i[e]))||(this._rab_isModified=!0),!A&&this._rab_isModified&&this._viewModel.invalidateLink(this),a},_determineTimeItem:function(e,t,i){var a,n,r,d=void 0,c=e.model(),y=this._viewModel,b=this.viewType();if(!!y.getAPIOptionMapped("definedAllocationLinksVisible")){var A=o.getRelationshipInfoTo(f[h],h,g);n=(a=c.getRelatedWrapperInfoByRelationshipInfo(e,A[t])).relatedWrapper}if(b!==s.Resources&&b!==s.SkilledResources||void 0===n&&(n=i),null!=n){if(b===s.SkilledResources){n.__MultiplierPrimaryKey=n.SkillID;let e=o.getPrimaryKeyByPrimaryKeyNames(n,u[m]);delete n.__MultiplierPrimaryKey,n=c.getChildByPrimaryKey(m,e)}else if(b===s.Activities&&this.getAPIOption("resourcesVisibleInActivitiesView")){var v=n.getRelationshipPrimaryKeyTo(p);n.__MultiplierPrimaryKey=v;let e=o.getPrimaryKeyByPrimaryKeyNames(n,u[_]);delete n.__MultiplierPrimaryKey,n=c.getChildByPrimaryKey(_,e)}null!=n&&(r=y._item(n))&&(d=r.getAllocationTimeItemForLinkRelationType(e.RelationType))}else if((void 0===a||void 0===a.relationshipPrimaryKey)&&b===s.Activities){var I=o.getRelationshipInfoTo(f[h],h,p),C=c.getRelatedWrapperByRelationshipInfo(e,I[t]);if(null!=C){var w=y.activityItem(C);d=null!=w&&w.rab_itemType===l.ActivityRow?w.timeItems&&w.timeItems[0]?y._findItemOfTypeInArray(w.timeItems[0].childTimeItems,l.Activity):void 0:w}}return d}};e.exports=n.extendClass("rabLinkItem",d,y)},5241:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nStructuralDataDescriptor,r=a.nStructureType,l=i(5674).HorizontalAlignment,s=i(476),d=s.ItemType,c=s.ObjectType,u=s.ViewType,p=i(5977),h=p.PrimaryKeyInfos,g=p.RAB_ROOT_PROP_NAME,m=p.RAB_RESOURCES_PROP_NAME,_=p.RelationshipInfos,f=p.RowCategory,y=i(9044),b=i(7922),A={construct:function(e,t,i){this._super(e,t,u.Loads,i)},setTableDefinitionIntoWidget:function(e){this._super.apply(this,arguments),this._setDefaultTableRowDefinitionIDForItemType(d.Resource,this.getAPIOption("defaultResourceTableRowDefinitionID")),e.option("defaultExternalType",d.Resource)},_specifyCategorizedParams:function(){this._super(),this.__CategorizedParams.ChildrenName[f.ChildRow]=m,this.__CategorizedParams.RowSortCodePropertyNameAPIOptionName[f.ChildRow]="resourceRowSortCodePropertyName",this.__CategorizedParams.RowSortModeAPIOptionName[f.ChildRow]="resourceRowSortMode",this.__CategorizedParams.RowItemsType[f.ChildRow]=d.Resource},_collectAPIOptions:function(e){e[1].push(["defaultValuesForResourceProperties","resourceHierarchySupplementaryDefinitionIDInLoadsView","topViewAreaVisibleInLoadsView","mainViewAreaVisibleInLoadsView","defaultResourceMaximumSubRowHeightInTimeArea","defaultResourceMaximumRowHeight","tableViewWidthInLoadsView","defaultResourceTableRowDefinitionID","tableRowDefinitionIDForTitleInLoadsView","tableRowDefinitionIDForTitleInResourcesView","resourceRowSortMode","resourceRowSortCodePropertyName","compareResources","visibilityFilterForResources"]),this._super(e)},_handleAPIOptionChanged:function(e,t,i,a){var n=this;switch(e){case"defaultValuesForResourceProperties":this._model.resources().forEach((function(e){n.updateResource(e)})),this.delegateToGanttView((function(e){e.ganttWidget().invalidateAllRows(),e.update()}));break;case"resourceHierarchySupplementaryDefinitionIDInLoadsView":this._updateGrouping(m,"removeResources"),this.delegateToGanttView((function(e){e.update()}));break;case"topViewAreaVisibleInLoadsView":this.delegateToGanttView((function(e){e.ganttWidget().option("topBodyViewAreaVisible",t)}));break;case"mainViewAreaVisibleInLoadsView":this.delegateToGanttView((function(e){e.ganttWidget().option("commonBodyViewAreaVisible",t)}));break;case"defaultResourceMaximumSubRowHeightInTimeArea":this.delegateToGanttView((function(e){e.ganttWidget().option("defaultMaximumSubRowHeight",t)}));break;case"defaultResourceMaximumRowHeight":this.delegateToGanttView((function(e){e.ganttWidget().option("defaultMaximumRowHeight",t)}));break;case"tableViewWidthInLoadsView":this.delegateToGanttView((function(e){e.ganttWidget().modifyTableViewWidth(t)}));break;case"defaultResourceTableRowDefinitionID":this._setDefaultTableRowDefinitionIDForItemType(d.Resource,t);break;case"tableRowDefinitionIDForTitleInLoadsView":{let e=t||n.getAPIOption("tableRowDefinitionIDForTitleInResourcesView");this._tableDefinition.rowDefinitionIDWithColumnTitles!==e&&(this._tableDefinition.rowDefinitionIDWithColumnTitles=e,this.delegateToGanttView((function(e){e.ganttWidget().updateTableTitle(!0)})));break}case"tableRowDefinitionIDForTitleInResourcesView":{let e=n.getAPIOption("tableRowDefinitionIDForTitleInLoadsView")||t;this._tableDefinition.rowDefinitionIDWithColumnTitles!==e&&(this._tableDefinition.rowDefinitionIDWithColumnTitles=e,this.delegateToGanttView((function(e){e.ganttWidget().updateTableTitle(!0)})));break}case"resourceRowSortCodePropertyName":case"resourceRowSortMode":this.updateTableTitleSortingParams(f.ChildRow);case"compareResources":this._initializeCompareObjects(m);break;case"visibilityFilterForResources":this.determineVisibilityOfAllRowObjects(m,void 0,!0);break;default:this._super(e,t,i,a)}},_initDataDefinition:function(){var e=this,t=this._dataDescriptors={};t[g]=new o(g,null);t[m]=new y(this,m,this.model().getOption("resourceClass"),this._options.resourceRowItemClass,h[m],_[m],{structureType:r.Parent,relationshipInfos:_[m][0]},void 0,{enableInheritChangedRelationships:!0},{getHierarchySupplementaryDefinitionIDFunc:function(){return e.getHierarchySupplementaryDefinitionID()},getSourceValueForGroupingCodeSourceFunc:function(t,i,a,n,o,r){return e.getSourceValueForGroupingCodeSource(c.Resource,t,i,a,n,o,r)},dataValidationFunc:function(e,t){if(t.isValidForViewType(this._viewType))return t}}),t[g].addSubDescriptor(t[m])},getHierarchySupplementaryDefinitionID:function(){return this.getAPIOption("resourceHierarchySupplementaryDefinitionIDInLoadsView")},updateHierarchyByHierarchySupplementaryDefinition:function(e){this._dataDescriptors&&e&&e.ID&&e.ID===this.getHierarchySupplementaryDefinitionID()&&this._updateGrouping(m,"removeResources")},_initTableDefinition:function(){var e,t=this;t._super();var i=t.getAPIOption("symbolColumnTitleSymbolIDs");let a=t.getAPIOption("symbolColumnTitleVisible");a&&(e=t.ganttView()._getImageURLsForGanttWidget(i)),t._tableDefinition={titleText:t.getAPIOption("titleText"),baseLevel:{className:"",contentsFunc:function(){return t._tableRowFillFunc.apply(t,arguments)},cellDefinitions:[{className:"",width:t.getAPIOption("tableWidth"),contentsFunc:function(){return t._tableCellFillFunc.apply(t,arguments)},titleText:null,horizontalTextAlignment:l.Left}]},symbolColumnTitleImageURLs:e,symbolColumnTitleVisible:a,symbolColumnTitleBackgroundColor:a?t.getAPIOption("symbolColumnTitleBackgroundColor")||t.getAPIOption("symbolColumnBackgroundColor")||"white":t.getAPIOption("tableTitleBackgroundColor")||"#646464"},t._tableDefinition.rowDefinitionIDWithColumnTitles=t.getAPIOption("tableRowDefinitionIDForTitleInLoadsView")||t.getAPIOption("tableRowDefinitionIDForTitleInResourcesView"),t._tableDefinition.rowSortPropertyName=t.getAPIOption("resourceRowSortCodePropertyName"),t._tableDefinition.rowSortMode=t.getAPIOption("resourceRowSortMode"),t._addOrRemoveCurveCollapsingColumnInTableDefinition(t._tableDefinition,t.getAPIOption("curvePanesCollapsibleInResourcesView")),t._addOrRemoveSymbolColumnInTableDefinition(t._tableDefinition,t.getAPIOption("symbolColumnVisible"),t.getAPIOption("symbolColumnWidth")),t.updateTableRowDefinitions(t.app().tableRowDefinitionsMap(),!1)},_initializeAllCompareObjects:function(){this._initializeCompareObjects(m)},getAPIOptionName:function(e){switch(e){case"mainViewAreaVisible":return"mainViewAreaVisibleInLoadsView";case"tableRowDefinitionIDForTitle":return"tableRowDefinitionIDForTitleInLoadsView";case"tableViewWidth":return"tableViewWidthInLoadsView";case"topViewAreaVisible":return"topViewAreaVisibleInLoadsView"}return this._super(e)},getItemInfoForItemType:function(e,t){var i,a;if(this._rowItemsRoot){if(e===d.Resource)a=this.getPrimaryKeyByObjectDataOrID(t,m),i=this.model().getChildByPrimaryKey(m,a);return this.buildItemInfo(a,i)}},getSelectableItemTypeByObjectType:function(e){if(e===c.Resource)return e}};e.exports=n.extendClass("rabLoadsViewModel",b,A)},8251:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nDataDescriptor,r=a.nDefaultSeparator,l=a.nPrimaryKeyManager,s=a.nPropertyComposer,d=a.nStringHelper,c=i(5674),u=c.nCalendar,p=c.nTimeAxis,h=c.TimeType,g=i(476),m=g.ItemType,_=g.ObjectType,f=i(5977),y=f.PrimaryKeyInfos,b=f.RelationshipInfos,A=f.RAB_ROOT_PROP_NAME,v=f.RAB_SKILLS_PROP_NAME,I=f.RAB_MULTIPLIED_SKILLS_PROP_NAME,C=f.RAB_SKILLED_RESOURCES_PROP_NAME,w=f.RAB_SKILLED_ALLOCATIONS_PROP_NAME,T=f.RAB_MULTIPLIED_RESOURCES_BY_ACTIVITIES_PROP_NAME,R=f.RAB_MULTIPLIED_ALLOCATIONS_BY_ACTIVITIES_PROP_NAME,S=f.RAB_RESOURCES_PROPERTIES_FOR_SKILLS_PROP_NAME,P=f.RAB_RESOURCES_PROPERTIES_FOR_ACTIVITIES_PROP_NAME,O=f.RAB_RESOURCES_PROP_NAME,D=f.RAB_CALENDARS_PROP_NAME,E=f.RAB_ACTIVITIES_PROP_NAME,M=f.RAB_ACTIVITY_ENTRIES_PROP_NAME,B=f.RAB_ALLOCATIONS_PROP_NAME,k=f.RAB_ALLOCATION_ENTRIES_PROP_NAME,V=f.RAB_CURVES_PROP_NAME,N=f.RAB_LINKS_PROP_NAME,F=f.RAB_LINK_ENTRIES_PROP_NAME,L=f.RAB_ENTITIES_PROP_NAME,W=f.RAB_CALENDAR_GRIDS_PROP_NAME,x=f.RAB_CALENDAR_GRID_ENTRIES_PROP_NAME,j=f.RAB_HIERARCHY_SUPPLEMENTARY_DEFINITIONS_PROP_NAME,H=f.RAB_HIERARCHY_LEVEL_SUPPLEMENTARY_DEFINITIONS_PROP_NAME,G=f.RAB_GROUPING_LEVEL_DEFINITIONS_PROP_NAME,K=i(9276),U=i(1296),z=i(6529),Y=i(7333),X=i(2900),$=i(5729),q=i(2422),Q=i(8445),Z=i(2390),J=i(7140),ee=i(3323),te=i(3458),ie=i(7082),ae=i(497),ne=i(1186),oe=i(817),re=i(1222),le=i(2659),se=i(2205),de=i(6084),ce=i(1597),ue=i(1221),pe=i(4859),he=i(203),ge=i(7613),me=i(3340),_e={construct:function(e,t){this._app=e,this._checkLogger=null,this._defaultCalendar=null,this.__dataReady=!1,this._initOptions(t),this._super(this,null,"",null)},destroy:function(){},_getHandleWarningFunc:function(){return this.getHandleWarningFunc()||this._super()},getHandleWarningFunc:function(){return this._options.handleWarningFunc},getAPIOption:function(e){return this.app().getAPIOption(e)},_initOptions:function(e){var t={checkLoggerClass:U,calendarClass:z,calendarEntryClass:Y,periodHighlighterClass:X,periodHighlighterEntryClass:$,curveClass:q,curvePointEntryClass:Q,skillClass:Z,multipliedSkillClass:J,skilledResourceClass:ie,skilledAllocationClass:ae,resourcePropertiesForSkillClass:ne,multipliedResourceByActivityClass:ee,multipliedAllocationByActivityClass:te,resourcePropertiesForActivityClass:ne,resourceClass:oe,activityClass:re,activityEntryClass:le,allocationClass:se,allocationEntryClass:de,linkClass:ce,linkEntryClass:ue,entityClass:pe,groupingLevelDefinitionClass:he,hierarchySupplementaryDefinitionClass:ge,hierarchyLevelSupplementaryDefinitionClass:me,version:"3.0",handleWarningFunc:null};this._options=Object.assign({},t,e)},getOption:function(e){return this._options[e]},app:function(){return this._app},initDataDefinition:function(){var e=this;let t;this._dataDescriptors={},this._dataDescriptors[A]=new o(A,null),this._dataDescriptors[D]=new o(D,this._options.calendarClass,y[D]),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[D]),this._dataDescriptors[W]=new o(W,this._options.periodHighlighterClass,y[W]),t=new o(x,this._options.periodHighlighterEntryClass),this._dataDescriptors[W].addSubDescriptor(t),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[W]),this._dataDescriptors[V]=new o(V,this._options.curveClass,y[V],b[V],{enableRelationshipCache:!0}),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[V]),this._dataDescriptors[j]=new o(j,this._options.hierarchySupplementaryDefinitionClass,y[j]),this._dataDescriptors[H]=new o(H,this._options.hierarchyLevelSupplementaryDefinitionClass),this._dataDescriptors[G]=new o(G,this._options.groupingLevelDefinitionClass),this._dataDescriptors[H].addSubDescriptor(this._dataDescriptors[G]),this._dataDescriptors[j].addSubDescriptor(this._dataDescriptors[H]),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[j]),this._dataDescriptors[v]=new o(v,this._options.skillClass,y[v],void 0,{enableRelationshipCache:!0}),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[v]),this._dataDescriptors[I]=new o(I,this._options.multipliedSkillClass,y[I],b[I],{enableRelationshipCache:!0}),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[I]),this._dataDescriptors[C]=new o(C,this._options.skilledResourceClass,y[C],b[C],{enableRelationshipCache:!0},{preAddToParentFunc:function(t){t.unusedSkillsVisibleInViewArea()||e.__addMultipliedSkillIfMissing(t.__ViewArea,t.__MultiplierPrimaryKey)},postAddToParentFunc:function(t){e.__addDependentMultipliedWrappers(w,t.data(),B,t.__MultiplierPrimaryKey,"addSkilledAllocation")},preRemoveFromParentFunc:function(t){e.__removeDependentMultipliedWrappers(w,t,w,"removeSkilledAllocation")},postRemoveFromParentFunc:function(t){t.unusedSkillsVisibleInViewArea()||e.__removeMultipliedSkillIfEmpty(t.__ViewArea,t.__MultiplierPrimaryKey)}}),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[C]),this._dataDescriptors[w]=new o(w,this._options.skilledAllocationClass,y[w],b[w],{enableRelationshipCache:!0}),t=new o(k,this._options.allocationEntryClass,void 0,void 0,{isArrayProperty:!0},{primaryKeyManipulationFunc:function(e,t,i){return i?.toString()}}),this._dataDescriptors[w].addSubDescriptor(t),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[w]),this._dataDescriptors[T]=new o(T,this._options.multipliedResourceByActivityClass,y[T],b[T],{enableRelationshipCache:!0},{postAddToParentFunc:function(t){e.__addDependentMultipliedWrappers(R,t.data(),B,t.__MultiplierPrimaryKey,"addMultipliedAllocationByActivity",(function(t){return t.getRelationshipPrimaryKeyTo(E)!==t.__MultiplierPrimaryKey&&!e.getChildByData(R,t)}))},preRemoveFromParentFunc:function(t){e.__removeDependentMultipliedWrappers(R,t,R,"removeMultipliedAllocationByActivity",(function(t){return!(t.getRelationshipPrimaryKeyTo(E)===t.__MultiplierPrimaryKey||!e.getChildByData(R,t))}))}}),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[T]),this._dataDescriptors[R]=new o(R,this._options.multipliedAllocationByActivityClass,y[R],b[R],{enableRelationshipCache:!0},{preAddToParentFunc:function(t){t.isInOtherMultiplierSourceObject()||e.__addMultipliedResourceByActivityIfMissing(t.__MultiplierPrimaryKey,t.ResourceRole,t.ResourceID)},postRemoveFromParentFunc:function(t){t.isInOtherMultiplierSourceObject()||e.__removeMultipliedResourceByActivityIfEmpty(t.__MultiplierPrimaryKey,t.ResourceRole,t.ResourceID)}}),t=new o(k,this._options.allocationEntryClass,void 0,void 0,{isArrayProperty:!0},{primaryKeyManipulationFunc:function(e,t,i){return i?.toString()}}),this._dataDescriptors[R].addSubDescriptor(t),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[R]),this._dataDescriptors[S]=new o(S,this._options.resourcePropertiesForSkillClass,y[S]),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[S]),this._dataDescriptors[P]=new o(P,this._options.resourcePropertiesForActivityClass,y[P]),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[P]),this._dataDescriptors[O]=new o(O,this._options.resourceClass,y[O],b[O],{enableRelationshipCache:!0,enableCycleDetection:!0}),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[O]),this._dataDescriptors[E]=new o(E,this._options.activityClass,y[E],b[E],{enableRelationshipCache:!0,enableCycleDetection:!0}),t=new o(M,this._options.activityEntryClass,void 0,void 0,{isArrayProperty:!0},{primaryKeyManipulationFunc:function(e,t,i){return i?.toString()}}),this._dataDescriptors[E].addSubDescriptor(t),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[E]),this._dataDescriptors[N]=new o(N,this._options.linkClass,y[N],b[N],{enableRelationshipCache:!0}),t=new o(F,this._options.linkEntryClass),this._dataDescriptors[N].addSubDescriptor(t),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[N]),this._dataDescriptors[B]=new o(B,this._options.allocationClass,y[B],b[B],{enableRelationshipCache:!0}),t=new o(k,this._options.allocationEntryClass,void 0,void 0,{isArrayProperty:!0},{primaryKeyManipulationFunc:function(e,t,i){return i?.toString()}}),this._dataDescriptors[B].addSubDescriptor(t),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[B]),this._dataDescriptors[L]=new o(L,this._options.entityClass,y[L],b[L],{enableRelationshipCache:!0,enableCycleDetection:!0}),this._dataDescriptors[A].addSubDescriptor(this._dataDescriptors[L])},__addDependentMultipliedWrappers:function(e,t,i,a,n,o){var r=this;this.forEachRelatedObject(t,i,(function(t){t.__MultiplierPrimaryKey=a,r.___shouldHandleDependentWrapper(t,o)&&(t.addMultiplierPrimaryKey(e,a),r[n](t)),delete t.__MultiplierPrimaryKey}))},__removeDependentMultipliedWrappers:function(e,t,i,a,n){var o=this;this.forEachRelatedObject(t,i,(function(t){o.___shouldHandleDependentWrapper(t,n)&&(t.removeMultiplierPrimaryKey(e,t.__MultiplierPrimaryKey),o[a](t))}))},___shouldHandleDependentWrapper:function(e,t){return!t||"function"!=typeof t||t.call(this,e)},__getMultipliedSkill:function(e,t){var i={__MultiplierPrimaryKey:e,ID:t},a=l.getPrimaryKeyByPrimaryKeyNames(i,y[I]);if(a)return this.getChildByPrimaryKey(I,a)},__addMultipliedSkillIfMissing:function(e,t){this.__addMultipliedObjectIfMissingByPrimaryKeyParts(e,null,t,I,v,"addMultipliedSkill")},__removeMultipliedSkillIfEmpty:function(e,t){this.__removeMultipliedObjectIfEmptyByPrimaryKeyParts(e,null,t,I,C,"removeMultipliedSkill")},__addMultipliedResourceByActivityIfMissing:function(e,t,i){null!=e&&null!=i&&this.__addMultipliedObjectIfMissingByPrimaryKeyParts(e,t,i,T,O,"addMultipliedResourceByActivity")},removeMultipliedResourceByActivityIfEmpty:function(e){var t=e.getRelationshipPrimaryKeyTo(E);this.__removeMultipliedResourceByActivityIfEmpty(t,e.ResourceRole,e.ResourceID)},__removeMultipliedResourceByActivityIfEmpty:function(e,t,i){this.__removeMultipliedObjectIfEmptyByPrimaryKeyParts(e,t,i,T,R,"removeMultipliedResourceByActivity",(function(e){return e.isInOtherMultiplierSourceObject()}))},__getMultipliedObjectByIDObject:function(e,t){var i=l.getPrimaryKeyByPrimaryKeyNames(e,y[t]);if(i)return this.getChildByPrimaryKey(t,i)},__getMultipliedObjectByPrimaryKeyParts:function(e,t,i,a){var n={__MultiplierPrimaryKey:e,Role:t,ID:i};return this.__getMultipliedObjectByIDObject(n,a)},__addMultipliedObjectIfMissingByPrimaryKeyParts:function(e,t,i,a,n,o){if(!this.__getMultipliedObjectByPrimaryKeyParts(e,t,i,a)){var r=this.__getObjectByPrimaryKeyParts(t,i,n);r&&(r.__MultiplierPrimaryKey=e,r.addMultiplierPrimaryKey(a,e),this.app()._addObject(r,a,o),delete r.__MultiplierPrimaryKey)}},__removeMultipliedObjectIfEmptyByPrimaryKeyParts:function(e,t,i,a,n,o,r){var l=this.__getMultipliedObjectByPrimaryKeyParts(e,t,i,a);if(l){let t=this.getRelatedObjects(n,a,"*",l.getPrimaryKey());var s=!1;if(t?r&&(s=t.every(r)):s=!0,s)l.data().removeMultiplierPrimaryKey(a,e),this.app()._removeObject(l.getPrimaryKey(),a,0,o)}},__getObjectByPrimaryKeyParts:function(e,t,i){return this.getChildByData(i,{Role:e,ID:t})},_createCheckLogger:function(){this._checkLogger||(this._checkLogger=this._newCheckLogger())},checkResults:function(){return this._checkLogger?this._checkLogger.results():""},init:function(e,t){this._checkLogger=null,this._defaultCalendar=null,this._defaultNonWorkingTimeCalendar=null,this._fullWorkingTimeNWAFCalendar=null,this.__dataReady=!1,t&&this._fastCheck(e),e||(e={}),(t?""===this._checkLogger.results():e)&&(delete e.Settings,this.store(e),this._createObjects(t),this._handleSettings(),this._handleResources(t))},_fastCheck:function(e){this._createCheckLogger(),e?e.Resources||this._checkLogger.log("Data.Resources object is null!"):this._checkLogger.log("Data object is null!")},_createObjects:function(e){var t=this._options.version;this._defaultNonWorkingTimeCalendar=this._newCalendar({},t),this._defaultNonWorkingTimeCalendar.nCalendar=new u(h.NonWorkingTime),this._defaultCalendar=this._defaultNonWorkingTimeCalendar,this.initDataDefinition(t),this.initHierarchy(this._data,t,this._dataDescriptors[A]),e&&this.check(this._checkLogger),this.__dataReady=!0},_handleSettings:function(){var e=new p;this.getAPIOption("start")&&e.start(this.dateTimeValueToDate(this.getAPIOption("start"))),this.getAPIOption("end")&&e.end(this.dateTimeValueToDate(this.getAPIOption("end"))),this._actualStart=e.actualStart(),this._actualEnd=e.actualEnd()},actualStart:function(){return this._actualStart},actualEnd:function(){return this._actualEnd},_newCheckLogger:function(){return new this._options.checkLoggerClass(this)},_newCalendar:function(e,t){return new this._options.calendarClass(this,e,t)},calendars:function(){return this.getChildrenArray(D)},defaultNonWorkingTimeCalendar:function(){return this._defaultNonWorkingTimeCalendar},fullWorkingTimeNWAFCalendar:function(){return this._fullWorkingTimeNWAFCalendar||(this._fullWorkingTimeNWAFCalendar=new u(h.WorkingTime)),this._fullWorkingTimeNWAFCalendar},calendarByID:function(e){return e?this.getChildByPrimaryKey(D,e)||this._defaultNonWorkingTimeCalendar:this._defaultCalendar},calendarByResource:function(e){return this.calendarByID(e.CalendarID)},addCalendar:function(e){return this.PE_addObject(D,e)},updateCalendar:function(e,t){return this.PE_updateObject(e,t)},removeCalendar:function(e,t){this.PE_removeObject(e,t)},calculateNonWorkingTimeCalendar:function(){var e=this,t=new u(h.NonWorkingTime),i=e.getAPIOption("nonWorkingTimesCalendarIDs");if(i&&Array.isArray(i))e._doCalculateNonWorkingTimeCalendarAtLast(t,i);else{var a={};e._collectCalendarIDsForObjects(a,e.resources()),e.getAPIOption("activityCalendarsEnabled")&&e._collectCalendarIDsForObjects(a,e.activities()),e._doCalculateNonWorkingTimeCalendarAtLast(t,Object.keys(a))}return t},_collectCalendarIDsForObjects:function(e,t,i){var a=this;t.forEach((function(t){var n=i?i(t):t.CalendarID;n?e[n]=!0:a._defaultCalendar&&(e[a._defaultCalendar.ID]=!0)}))},_doCalculateNonWorkingTimeCalendarAtLast:function(e,t){var i=this;t.forEach((function(t){var a=i.calendarByID(t);if(a){var n=a.nCalendar.defaultTimeType()===h.WorkingTime?null:"-";a.nCalendar.timeTypeChangeTimes().forEach((function(t){n?("-"!==n&&e.allocateTimeSpan(n,t,h.WorkingTime),n=null):n=t}))}}))},_handleResources:function(){var e=this,t=this.getChildrenArray(O);t.forEach((function(e){e.rab_children=[]})),t.forEach((function(t){if(d.notIsNullOrEmpty(t.ParentID)){var i=s.compose(t,["ParentRole","ParentID"]);if(null!=i){var a=e.resourceByID(i);a&&a.rab_children.push(t)}}})),t.forEach((function(t){if(t.rab_children.length){var i=!0,a=e._actualStart,n=e.calendarByResource(t);if(n){var o=n.nCalendar;t.rab_children.forEach((function(t){if(i&&(n=e.calendarByResource(t))){var r=n.nCalendar;if(r!==o)if(r&&o){var l=a,s=a;do{l=o.findStartOfNextTimeTypeChange(l),s=r.findStartOfNextTimeTypeChange(s),l||s?(!l&&s||l&&!s||l.getTime()!=s.getTime())&&(i=!1,l=e._actualEnd):l=e._actualEnd}while((l||s)<e._actualEnd)}else i=!1}}))}t.rab_childResourcesHaveSameCalendar=i}}))},resources:function(){return this.getChildrenArray(O)},resourceByID:function(e){return this.getChildByPrimaryKey(O,e)},addResource:function(e){return this.PE_addObject(O,e)},updateResource:function(e,t){return this.PE_updateObject(e,t)},removeResource:function(e,t){this.PE_removeObject(e,t)},skills:function(){return this.getChildrenArray(v)},skillByID:function(e){return this.getChildByPrimaryKey(v,e)},addSkill:function(e){return this.PE_addObject(v,e)},updateSkill:function(e,t){return this.PE_updateObject(e,t)},removeSkill:function(e){this.PE_removeObject(e)},multipliedSkills:function(){return this.getChildrenArray(I)},multipliedSkillByID:function(e){return this.getChildByPrimaryKey(I,e)},addMultipliedSkill:function(e){return this.PE_addObject(I,e)},updateMultipliedSkill:function(e,t){return this.PE_updateObject(e,t)},removeMultipliedSkill:function(e){this.PE_removeObject(e)},skilledResources:function(){return this.getChildrenArray(C)},skilledResourceByID:function(e){return this.getChildByPrimaryKey(C,e)},skilledResourceByIDAndSkillID:function(e,t){let i={__MultiplierPrimaryKey:t},a=e.split(r);y[O].forEach(((e,t)=>{i[e]=a[t]}));let n=l.getPrimaryKeyByPrimaryKeyNames(i,y[C]);return this.skilledResourceByID(n)},addSkilledResource:function(e){return this.PE_addObject(C,e)},updateSkilledResource:function(e,t){return this.PE_updateObject(e,t)},removeSkilledResource:function(e){this.PE_removeObject(e)},skilledAllocations:function(){return this.getChildrenArray(w)},skilledAllocationByID:function(e){return this.getChildByPrimaryKey(w,e)},skilledAllocationByIDAndSkillID:function(e,t){let i={__MultiplierPrimaryKey:t},a=e.split(r);y[B].forEach(((e,t)=>{i[e]=a[t]}));let n=l.getPrimaryKeyByPrimaryKeyNames(i,y[w]);return this.skilledAllocationByID(n)},addSkilledAllocation:function(e){return this.PE_addObject(w,e)},updateSkilledAllocation:function(e,t){return this.PE_updateObject(e,t)},removeSkilledAllocation:function(e){this.PE_removeObject(e)},addMultipliedResourceByActivity:function(e){return this.PE_addObject(T,e)},updateMultipliedResourceByActivity:function(e,t){return this.PE_updateObject(e,t)},removeMultipliedResourceByActivity:function(e){return this.PE_removeObject(e)},multipliedAllocationsByActivity:function(){return this.getChildrenArray(R)},multipliedAllocationByIDAndActivityID:function(e,t){let i={__MultiplierPrimaryKey:t},a=e.split(r);y[B].forEach(((e,t)=>{i[e]=a[t]}));let n=l.getPrimaryKeyByPrimaryKeyNames(i,y[R]);return this.multipliedAllocationByActivityByID(n)},multipliedAllocationByActivityByID:function(e){return this.getChildByPrimaryKey(R,e)},addMultipliedAllocationByActivity:function(e){return this.PE_addObject(R,e)},updateMultipliedAllocationByActivity:function(e,t){return this.PE_updateObject(e,t)},removeMultipliedAllocationByActivity:function(e){return this.PE_removeObject(e)},addResourcePropertiesForSkill:function(e){return this.PE_addObject(S,e)},updateResourcePropertiesForSkill:function(e,t){return this.PE_updateObject(e,t)},removeResourcePropertiesForSkill:function(e){this.PE_removeObject(e)},addResourcePropertiesForActivity:function(e){return this.PE_addObject(P,e)},updateResourcePropertiesForActivity:function(e,t){return this.PE_updateObject(e,t)},removeResourcePropertiesForActivity:function(e){this.PE_removeObject(e)},resourcePropertiesForSkillByID:function(e){return this.getChildByPrimaryKey(S,e)},resourcePropertiesForActivityByID:function(e){return this.getChildByPrimaryKey(P,e)},PE_addObject:function(e,t){return this.addChild(e,t,this._options.version)},PE_updateObject:function(e,t){return this.updateChild(e,t,this._options.version)},PE_removeObject:function(e,t){return this.removeChild(e,t)},curves:function(){return this.getChildrenArray(V)},curveByID:function(e){return this.getChildByPrimaryKey(V,e)},addCurve:function(e){return this.PE_addObject(V,e)},updateCurve:function(e,t){return this.PE_updateObject(e,t)},removeCurve:function(e,t){this.PE_removeObject(e,t)},activities:function(){return this.getChildrenArray(E)},activityByID:function(e){return this.getChildByPrimaryKey(E,e)},addActivity:function(e){return this.PE_addObject(E,e)},updateActivity:function(e,t){return this.PE_updateObject(e,t)},removeActivity:function(e,t){this.PE_removeObject(e,t)},isActivityEditable:function(e){return e.Editable},isAllocationEditable:function(e){var t=this.activityByID(s.compose(e,["ActivityRole","ActivityID"]));return!t||this.isActivityEditable(t)},allocations:function(){return this.getChildrenArray(B)},allocationByID:function(e){return this.getChildByPrimaryKey(B,e)},addAllocation:function(e){return this.PE_addObject(B,e)},updateAllocation:function(e,t){return this.PE_updateObject(e,t)},removeAllocation:function(e,t){this.PE_removeObject(e,t)},getAllocationsForActivityOrResource:function(e,t,i){let a=e===_.Activity?"ActivityID":"ResourceID",n=e===_.Activity?"ActivityRole":"ResourceRole";return this.allocations().filter((e=>e[a]===t&&e[n]===i))},getAllocationsForActivitiesOrResources:function(e,t){let i=e===_.Activity?"ActivityID":"ResourceID";return this.allocations().filter((e=>t.includes(e[i])))},links:function(){return this.getChildrenArray(N)},linkByID:function(e){return this.getChildByPrimaryKey(N,e)},addLink:function(e){return this.PE_addObject(N,e)},updateLink:function(e,t){this.PE_updateObject(e,t)},removeLink:function(e,t){this.PE_removeObject(e,t)},entities:function(){return this.getChildrenArray(L)},entityByID:function(e){return this.getChildByPrimaryKey(L,e)},addEntity:function(e){return this.PE_addObject(L,e)},updateEntity:function(e,t){this.PE_updateObject(e,t)},removeEntity:function(e,t){this.PE_removeObject(e,t)},periodHighlighters:function(){return this.getChildrenArray(W)},periodHighlighterByID:function(e){if(e)return this.getChildByPrimaryKey(W,e)},addPeriodHighlighter:function(e){return this.PE_addObject(W,e)},updatePeriodHighlighter:function(e,t){return this.PE_updateObject(e,t)},removePeriodHighlighter:function(e,t){this.PE_removeObject(e,t)},hierarchySupplementaryDefinitions:function(){return this.getChildrenArray(j)},hierarchySupplementaryDefinitionByID:function(e){return this.getChildByPrimaryKey(j,e)},addHierarchySupplementaryDefinition:function(e){return this.PE_addObject(j,e)},updateHierarchySupplementaryDefinition:function(e,t){this.PE_updateObject(e,t)},removeHierarchySupplementaryDefinition:function(e,t){this.PE_removeObject(e,t)},dateTimeValueToDate:function(e){if(e)if(e===this.getAPIOption("additionalDateStringInterpretedAsEmpty"))e=void 0;else{let t=this.getAPIOption("additionalDateInterpretedAsEmpty");t&&e.valueOf()===t.valueOf()&&(e=void 0)}var t="string"==typeof e?this._app.dateTimeStringToDate(e):e instanceof Date&&new Date(e);return t&&!isNaN(t.valueOf())&&t||null},displayRelativeDates:function(){return this.getAPIOption("relativeDateModeEnabled")&&!this.getAPIOption("referenceDate")},removeAll:function(){if(this.__dataReady){var e=this._options.version;this.initHierarchy(null,e,this._dataDescriptors[A])}},objectByPrimaryKeyParts:function(e,t,i){if("string"==typeof t)switch(e){case m.Activity:case m.ActivityRow:return this.activityByID(`${i??""}${r}${t}`);case m.Allocation:case m.AllocationRow:return this.allocationByID(`${i??""}${r}${t}`);case m.Resource:return this.resourceByID(`${i??""}${r}${t}`);case m.Skill:return this.skillByID(t);case m.Calendar:return this.calendarByID(t);case m.Curve:return this.curveByID(t);case m.Entity:return this.entityByID(t);case m.Link:return this.linkByID(`${i??""}${r}${t}`)}},objectByID:function(e,t,i){return this.objectByPrimaryKeyParts(e,t,i)},multipliedObjectByPrimaryKey:function(e,t,i,a){var n=this;if("string"==typeof t)switch(e){case m.Allocation:case m.AllocationRow:if(!a){let e=n.allocationByID(`${i??""}${r}${t}`);if(!e)return;if(!(a=e.SkillID)){let t=s.compose(e,b[B][0].primaryKeyInfos);if(!t)return;let i=n.resourceByID(t);if(a=i.SkillIDs?.[0],!a)return}}return n.skilledAllocationByID(`${a}${r}${i??""}${r}${t}`);case m.Resource:if(!a){let e=n.resourceByID(`${i||""}${r}${t}`);if(a=e.SkillIDs?.[0],!a)return}return n.skilledResourceByID(`${a}${r}${i??""}${r}${t}`);case m.Skill:if(null==a){let e=n.skillByID(`${t}`);if(a=e.getMultiplierPrimaryKeys(I)?.values().next().value,null==a)return}return n.multipliedSkillByID(`${a}${r}${t}`);default:return n.objectByPrimaryKeyParts(e,t,i)}},getRelatedWrapperInfoByRelationshipInfo:function(e,t){var i={};if(e&&t){var a=l.getPrimaryKeyByRelationshipInfo(e,t);d.notIsNullOrEmpty(a)&&(i.relatedWrapper=this.getChildByPrimaryKey(t.relatedTo,a),i.relationshipPrimaryKey=a)}return i},getRelatedWrapperByRelationshipInfo:function(e,t){return this.getRelatedWrapperInfoByRelationshipInfo(e,t).relatedWrapper},handleCycleDetected:function(e){this._app.registerPendingObjectData(e)},__ensureCompatibleValue:function(e,t){return e[t]??("BarTextColor"===t&&(e.TextColor??e.PM_TextColor))??("BarDesign"!==t?e[`PM_${t}`]:void 0)},reinitializeVisibilityDetermination:function(){delete this._forcedVisibilityDeterminationDone},deferForcedVisibilityDetermination:function(e){this._forcedVisibilityDeterminationNecessary||(this._forcedVisibilityDeterminationNecessary={}),this._forcedVisibilityDeterminationNecessary[e]=!0},determineVisibilityOfObjects:function(e,t,i,a){var n=this;n._forcedVisibilityDeterminationNecessary?.[e]?(t=null,n._forcedVisibilityDeterminationNecessary[e]=!1,a=!0):t?a=!0:a&&(n._forcedVisibilityDeterminationDone?.[e]?a=!1:(n._forcedVisibilityDeterminationDone||(n._forcedVisibilityDeterminationDone={}),n._forcedVisibilityDeterminationDone[e]=!0));let o=t?Object.keys(t).map((t=>n.getChildByPrimaryKey(e,t))):n.getChildrenArray(e);return o=o.filter((e=>null!=e)),o.forEach((t=>{(a||void 0===t.rab_hidden)&&(t.rab_hidden=!i(e,t))})),o},_modificationClassificationVersion:0,increaseModificationClassificationVersion:function(){this._modificationClassificationVersion++},getModificationClassificationVersion:function(){return this._modificationClassificationVersion},_modificationClassifiedCounts:{[E]:0,[O]:0,[B]:0,[L]:0},increaseModificationClassifiedCount:function(e){this._modificationClassifiedCounts[e]++},getAndClearModificationClassifiedCount:function(e){let t=this._modificationClassifiedCounts[e];return this._modificationClassifiedCounts[e]=0,t}},fe=n.extendClass("rabModel",K,_e);Object.defineProperty(fe.prototype,v,{get:function(){return this.getChildrenArray(v)}}),Object.defineProperty(fe.prototype,I,{get:function(){return this.getChildrenArray(I)}}),Object.defineProperty(fe.prototype,C,{get:function(){return this.getChildrenArray(C)}}),Object.defineProperty(fe.prototype,w,{get:function(){return this.getChildrenArray(w)}}),Object.defineProperty(fe.prototype,T,{get:function(){return this.getChildrenArray(T)}}),Object.defineProperty(fe.prototype,R,{get:function(){return this.getChildrenArray(R)}}),Object.defineProperty(fe.prototype,S,{get:function(){return this.getChildrenArray(S)}}),Object.defineProperty(fe.prototype,P,{get:function(){return this.getChildrenArray(P)}}),Object.defineProperty(fe.prototype,O,{get:function(){return this.getChildrenArray(O)}}),Object.defineProperty(fe.prototype,D,{get:function(){return this.getChildrenArray(D)}}),Object.defineProperty(fe.prototype,V,{get:function(){return this.getChildrenArray(V)}}),Object.defineProperty(fe.prototype,E,{get:function(){return this.getChildrenArray(E)}}),Object.defineProperty(fe.prototype,B,{get:function(){return this.getChildrenArray(B)}}),Object.defineProperty(fe.prototype,N,{get:function(){return this.getChildrenArray(N)}}),Object.defineProperty(fe.prototype,L,{get:function(){return this.getChildrenArray(L)}}),Object.defineProperty(fe.prototype,W,{get:function(){return this.getChildrenArray(W)}}),Object.defineProperty(fe.prototype,j,{get:function(){return this.getChildrenArray(j)}}),e.exports=fe},4373:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(2205),o=a.extendClass("rabMultipliedAllocationBase",n,{construct:function(e,t,i,a){this._super(e,t,i,a),this.__MultiplierPrimaryKey=t.__MultiplierPrimaryKey,delete t.__MultiplierPrimaryKey},externalData:function(){return this.data()?.externalData()}});Object.defineProperty(o.prototype,"__MultiplierPrimaryKey",{get:function(){return this.___multiplierPrimaryKey},set:function(e){this.___multiplierPrimaryKey=e}}),e.exports=o},3458:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nDefaultSeparator,r=i(4373),l=i(5977).RAB_ACTIVITIES_PROP_NAME,s={isInOtherMultiplierSourceObject:function(){return!this.__MultiplierPrimaryKey||!(this.getRelationshipPrimaryKeyTo(l)===this.__MultiplierPrimaryKey)},extendCallbackArgsForMultiplierPrimaryKey:function(e,t,i){if(this.__MultiplierPrimaryKey){!i&&e&&(e.__multiplierPrimaryKey=this.__MultiplierPrimaryKey);var a=this.__MultiplierPrimaryKey.split(o);a.length>1&&(t[(i?"newA":"a")+"ctivityID"]=a[1])}}};e.exports=n.extendClass("rabMultipliedAllocationByActivity",r,s)},5354:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(817),o=a.extendClass("rabMultipliedResourceBase",n,{construct:function(e,t,i,a){this._super(e,t,i,a),this.__MultiplierPrimaryKey=t.__MultiplierPrimaryKey,delete t.__MultiplierPrimaryKey},externalData:function(){return this.data()?.externalData()},_getAllocationRowsCollapseState:function(){return this.__getPropertyForMultiplierSourceObject("AllocationRowsCollapseState")??this._super()},_getAllocationRowsCollapseStateInActivitiesView:function(){return this.__getPropertyForMultiplierSourceObject("AllocationRowsCollapseStateInActivitiesView")??this._super()},_getCurveCollapseState:function(){return this.__getPropertyForMultiplierSourceObject("CurveCollapseState")??this._super()},_getTableColor:function(){return this.__getPropertyForMultiplierSourceObject("TableColor")??this._super()},_getTableRowDefinitionID:function(){return this.__getPropertyForMultiplierSourceObject("TableRowDefinitionID")??this._super()},_getRowSymbolIDs:function(){return this.__getPropertyForMultiplierSourceObject("RowSymbolIDs")??this._super()},_getSortCode:function(){return this.__getPropertyForMultiplierSourceObject("SortCode")??this._super()},__getPropertyForMultiplierSourceObject:function(e){var t=this.model().getChildByPrimaryKey(this.__getChildrenNameForIndividualProperties(),this.getPrimaryKey());return t?.[e]},__getChildrenNameForIndividualProperties:function(){}});Object.defineProperty(o.prototype,"__MultiplierPrimaryKey",{get:function(){return this.___multiplierPrimaryKey},set:function(e){this.___multiplierPrimaryKey=e}}),e.exports=o},3323:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nDefaultSeparator,r=i(5354),l=i(5977).RAB_RESOURCES_PROPERTIES_FOR_ACTIVITIES_PROP_NAME,s={extendCallbackArgsForMultiplierPrimaryKey:function(e,t,i){if(this.__MultiplierPrimaryKey){!i&&e&&(e.__multiplierPrimaryKey=this.__MultiplierPrimaryKey);var a=this.__MultiplierPrimaryKey.split(o);a.length>1&&(t[(i?"newA":"a")+"ctivityID"]=a[1])}},__getChildrenNameForIndividualProperties:function(){return l}};e.exports=n.extendClass("rabMultipliedResourceByActivity",r,s)},9872:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(5977),o=(n.RAB_RESOURCES_PROP_NAME,n.RAB_ALLOCATIONS_PROP_NAME,i(7437));e.exports=a.extendClass("rabMultipliedResourceRowItem",o,{getChildItemsPropNameInParent:function(){return"detailingRowItems"}})},7140:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(2390),o=a.extendClass("rabMultipliedSkill",n,{construct:function(e,t,i,a){this._super(e,t,i,a),this.__MultiplierPrimaryKey=t.__MultiplierPrimaryKey,delete t.__MultiplierPrimaryKey},externalData:function(){return this.data()?.externalData()},extendCallbackArgsForMultiplierPrimaryKey:function(e,t,i){!i&&e&&(e.__multiplierPrimaryKey=this.__MultiplierPrimaryKey),i?t.newSkillID=this.ID:t.viewArea=this.__MultiplierPrimaryKey}});Object.defineProperty(o.prototype,"__MultiplierPrimaryKey",{get:function(){return this.___multiplierPrimaryKey},set:function(e){this.___multiplierPrimaryKey=e}}),Object.defineProperty(o.prototype,"__ViewArea",{get:function(){return this.__MultiplierPrimaryKey},set:function(e){this.__MultiplierPrimaryKey=e}}),Object.defineProperty(o.prototype,"ViewArea",{get:function(){return this.__ViewArea}}),e.exports=o},2277:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nDebugHelper,r=i(5674).BarShape,l=i(476),s=l.BarDragModes,d=l.BarSortMode,c=l.LinkMarker,u=l.LinkRoutingType,p=l.ProgressBarWidthCalculationMode,h=l.RowDesigns,g=l.RowDragModes,m=l.RowSortMode,_=l.SelectionBehavior,f=l.TimescaleNavigationMode,y=l.TimescaleInteractionModes,b=l.TreeVisualizationMode,A=l.UpdateModes,v=l.WorldViewPosition,I=i(5977),C=I._rabTimeUnitToTimeUnit,w=I._UnifiedBarDesignsDefault,T=I._UnifiedBarDesigns,R={construct:function(e){this._app=e,this._handleAppAPIOptionPostprocessingBoundToApp=this._app.handleAPIOptionPostprocessing.bind(this._app),this._super(),this.defineOption("defaultUpdateMode",A.Default,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("resetValueForDifferentialUpdate",null),this.defineOption("additionalDateInterpretedAsEmpty",null,this.convertStringToDate,this.assertDateOrNull),this.defineOption("additionalDateStringInterpretedAsEmpty","",this.convertAnyToString),this.defineOption("cursorDateLineVisible",!1,this.convertAnyToBoolean),this.defineOption("allocationRowsVisibleInActivitiesView",!1,this.convertAnyToBoolean,void 0,!0),this.defineOption("resourcesVisibleInActivitiesView",!1,this.convertAnyToBoolean,void 0,!0),this.defineOption("curvePanesVisibleInActivitiesView",!1,this.convertAnyToBoolean,void 0,!0),this.defineOption("definedAllocationLinksVisibleInActivitiesView",!1,this.convertAnyToBoolean),this.defineOption("entitiesTableVisibleInActivitiesView",!1,this.convertAnyToBoolean),this.defineOption("linksVisibleInActivitiesView",!0,this.convertAnyToBoolean),this.defineOption("mainViewAreaVisibleInActivitiesView",!0,this.convertAnyToBoolean),this.defineOption("tableRowDefinitionIDForTitleInActivitiesView",null,this.convertAnyToString),this.defineOption("tableViewWidthInActivitiesView",null,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("topViewAreaVisibleInActivitiesView",!1,this.convertAnyToBoolean),this.defineOption("allocationBarDesignOfOtherActivity",T.DefaultReduced|T.Text,this.convertStringToNumber,this.assertNumberOrNull,!0),this.defineOption("allocationRowsVisibleInResourcesView",!1,this.convertAnyToBoolean,void 0,!0),this.defineOption("definedAllocationLinksVisibleInResourcesView",!1,this.convertAnyToBoolean),this.defineOption("curvePanesCollapsibleInResourcesView",!0,this.convertAnyToBoolean,void 0,!0),this.defineOption("entitiesTableVisibleInResourcesView",!1,this.convertAnyToBoolean),this.defineOption("linksVisibleInResourcesView",!1,this.convertAnyToBoolean),this.defineOption("mainViewAreaVisibleInResourcesView",!0,this.convertAnyToBoolean),this.defineOption("tableRowDefinitionIDForTitleInResourcesView",null,this.convertAnyToString),this.defineOption("tableViewWidthInResourcesView",null,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("topViewAreaVisibleInResourcesView",!1,this.convertAnyToBoolean),this.defineOption("mainViewAreaVisibleInLoadsView",!0,this.convertAnyToBoolean),this.defineOption("tableRowDefinitionIDForTitleInLoadsView",null,this.convertAnyToString),this.defineOption("tableViewWidthInLoadsView",null,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("topViewAreaVisibleInLoadsView",!1,this.convertAnyToBoolean),this.defineOption("allocationRowsVisibleInSkilledResourcesView",!1,this.convertAnyToBoolean,void 0,!0),this.defineOption("definedAllocationLinksVisibleInSkilledResourcesView",!1,this.convertAnyToBoolean),this.defineOption("curvePanesCollapsibleInSkilledResourcesView",!0,this.convertAnyToBoolean,void 0,!0),this.defineOption("entitiesTableVisibleInSkilledResourcesView",!1,this.convertAnyToBoolean),this.defineOption("linksVisibleInSkilledResourcesView",!1,this.convertAnyToBoolean),this.defineOption("mainViewAreaVisibleInSkilledResourcesView",!0,this.convertAnyToBoolean),this.defineOption("tableRowDefinitionIDForTitleInSkilledResourcesView",null,this.convertAnyToString),this.defineOption("tableViewWidthInSkilledResourcesView",null,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("topViewAreaVisibleInSkilledResourcesView",!1,this.convertAnyToBoolean),this.defineOption("allocationBarDesignOfOtherSkill",T.DefaultReduced|T.Text,this.convertStringToNumber,this.assertNumberOrNull,!0),this.defineOption("unusedSkillsVisibleInTopViewArea",!1,this.convertAnyToBoolean),this.defineOption("unusedSkillsVisibleInMainViewArea",!0,this.convertAnyToBoolean),this.defineOption("tableRowDefinitionIDForTitleInEntitiesTable",null,this.convertAnyToString),this.defineOption("entitiesTitleText",null,this.convertEmptyStringToUndefined),this.defineOption("nonWorkingTimeVisible",!0,this.convertAnyToBoolean),this.defineOption("nonWorkingTimesCalendarIDs",null,this.convertAnyToStringOrStringArray),this.defineOption("entitiesTableSymbolColumnTitleBackgroundColor",null,this.convertAnyToString),this.defineOption("entitiesTableSymbolColumnTitleSymbolIDs",null),this.defineOption("entitiesTableSymbolColumnTitleVisible",!1,this.convertAnyToBoolean),this.defineOption("entitiesTableSymbolColumnVisible",!1,this.convertAnyToBoolean),this.defineOption("entitiesTableSymbolColumnWidth",22,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("patternShownOnOverloadCurves",!1,this.convertAnyToBoolean),this.defineOption("symbolColumnTitleBackgroundColor",null,this.convertAnyToString),this.defineOption("symbolColumnTitleSymbolIDs",null),this.defineOption("symbolColumnTitleVisible",!1,this.convertAnyToBoolean),this.defineOption("symbolColumnVisible",!1,this.convertAnyToBoolean),this.defineOption("symbolColumnWidth",22,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("relativeDateModeEnabled",!1,this.convertAnyToBoolean),this.defineOption("referenceDate",null,this.convertStringToDateEx,this.assertDateOrNull),this.defineOption("maximumTimeResolutionUnit",null,void 0,this.assert_timeUnit),this.defineOption("maximumTimeResolutionUnitFactor",null,this.convertStringToNumber,this.assertFiniteNumberGreaterZeroOrNull),this.defineOption("timeStepUnit",null,void 0,this.assert_timeUnit),this.defineOption("timeStepUnitFactor",null,this.convertStringToNumber,this.assertFiniteNumberGreaterZeroOrNull),this.defineOption("titleText",null,this.convertEmptyStringToUndefined),this.defineOption("workDateLineCaption","",this.convertAnyToString),this.defineOption("tooltipDelay",500,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("animationDuration",400,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("treeVisualizationMode",b.ColoredIndentation,this.convertStringToNumber),this.defineOption("treeViewLineColor",null,this.convertAnToString),this.defineOption("treeViewLineDashArray",null,this.convertAnyToString),this.defineOption("entitiesTableTreeVisualizationMode",b.ColoredIndentation,this.convertStringToNumber),this.defineOption("entitiesTableTreeViewLineColor",null,this.convertAnyToString),this.defineOption("entitiesTableTreeViewLineDashArray",null,this.convertAnyToString),this.defineOption("separationLinesInColoredIndentation",!1,this.convertAnyToBoolean),this.defineOption("defaultValuesForActivityProperties",null,void 0,void 0,!0),this.defineOption("defaultValuesForActivityEntryProperties",null,void 0,void 0,!0),this.defineOption("defaultValuesForAllocationProperties",null,void 0,void 0,!0),this.defineOption("defaultValuesForAllocationEntryProperties",null,void 0,void 0,!0),this.defineOption("defaultValuesForEntityProperties",null,void 0,void 0,!0),this.defineOption("defaultValuesForLinkProperties",null,void 0,void 0,!0),this.defineOption("defaultValuesForResourceProperties",null,void 0,void 0,!0),this.defineOption("defaultValuesForSkillProperties",null,void 0,void 0,!0),this.defineOption("defaultAllocationBackgroundColor",null,this.convertAnyToString,void 0,!0),this.defineOption("defaultAllocationConstraintSymbolColor","#646464",this.convertAnyToString,void 0,!0),this.defineOption("defaultAllocationProgressBackgroundColor",null,this.convertAnyToString,void 0,!0),this.defineOption("defaultInventoryCurvePaneColor",null,this.convertAnyToString),this.defineOption("defaultLoadCurvePaneColor",null,this.convertAnyToString),this.defineOption("entitiesTableColumnSeparatorColor",null,this.convertAnyToString),this.defineOption("entitiesTableTitleBackgroundColor",null,this.convertAnyToString),this.defineOption("entitiesTableTitleColumnSeparatorColor",null,this.convertAnyToString),this.defineOption("entitiesTableTitleHighlightingColor",null,this.convertAnyToString),this.defineOption("entitiesTableTitleTextColor",null,this.convertAnyToString),this.defineOption("pastBackgroundFillColor",null,this.convertAnyToString),this.defineOption("pastBackgroundLineColor",null,this.convertAnyToString),this.defineOption("objectHighlightingColor",null,this.convertAnyToString),this.defineOption("suitableResourceOverlayColor",null,this.convertAnyToString),this.defineOption("unsuitableResourceOverlayColor",null,this.convertAnyToString),this.defineOption("suitableActivityOverlayColor",null,this.convertAnyToString),this.defineOption("unsuitableActivityOverlayColor",null,this.convertAnyToString),this.defineOption("calendarGridColor",null,this.convertAnyToString),this.defineOption("calendarGridWeekendColor","transparent",this.convertAnyToString),this.defineOption("selectionColor","#ffa000",this.convertAnyToString),this.defineOption("splitterHighlightingColor",null,this.convertAnyToString),this.defineOption("tableColumnSeparatorColor",null,this.convertAnyToString),this.defineOption("tableTitleBackgroundColor",null,this.convertAnyToString),this.defineOption("tableTitleColumnSeparatorColor",null,this.convertAnyToString),this.defineOption("tableTitleHighlightingColor",null,this.convertAnyToString),this.defineOption("tableTitleTextColor",null,this.convertAnyToString),this.defineOption("timeAreaBackgroundColor",null,this.convertAnyToString),this.defineOption("timescaleBackgroundColor",null,this.convertAnyToString),this.defineOption("timescaleHighlightingColor",null,this.convertAnyToString),this.defineOption("timescaleTextColor",null,this.convertAnyToString),this.defineOption("timescaleTickColor",null,this.convertAnyToString),this.defineOption("timescaleWeekendBackgroundColor",null,this.convertAnyToString),this.defineOption("symbolColumnBackgroundColor",null,this.convertAnyToString),this.defineOption("entitiesTableSymbolColumnBackgroundColor",null,this.convertAnyToString),this.defineOption("defaultActivityAllowedRowDragModes",g.None,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultActivityCollapsedRowDesign",h.Bars|h.Optimized|h.BarsInHiddenDescendantRows,this.convertStringToNumber,this.assertNumberOrNull,!0),this.defineOption("defaultActivityExpandedRowDesign",h.Bars|h.Optimized,this.convertStringToNumber,this.assertNumberOrNull,!0),this.defineOption("defaultActivityMaximumRowHeight",null,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("defaultActivityMinimumRowHeight",42,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero,!0),this.defineOption("defaultActivityRowCollapsible",!0,this.convertAnyToBoolean),this.defineOption("defaultActivityRowSelectable",!0,this.convertAnyToBoolean),this.defineOption("defaultActivityRowTooltipTemplateID",null,this.convertAnyToString),this.defineOption("defaultActivityTableRowDefinitionID",null,this.convertAnyToString),this.defineOption("forcedActivityAllowedRowDragModes",null,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultActivityMaximumSubRowHeightInTimeArea",null,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("defaultActivitySnapTargetsForStart",null,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultActivitySnapTargetsForEnd",null,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultActivityAllowedBarDragModes",s.DragHorizontally,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("forcedActivityAllowedBarDragModes",null,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultActivityBarSelectable",!0,this.convertAnyToBoolean),this.defineOption("defaultActivityAllocationRowsCollapsible",!0,this.convertAnyToBoolean),this.defineOption("detailedActivityConstraintSymbolsEnabled",!0,this.convertAnyToBoolean,void 0,!0),this.defineOption("defaultActivityBarHeight",22,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("defaultActivityBarShape",r.RectangleWithLeftTopBevel,void 0,this.assertStringOrNull,!0),this.defineOption("defaultActivityBarTooltipTemplateID",null,this.convertAnyToString),this.defineOption("defaultActivityBarDesign",w,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultActivityBarTextFormat",null,this.convertAnyToString),this.defineOption("defaultActivityConstraintSymbolColor","#646464",this.convertAnyToString,void 0,!0),this.defineOption("defaultActivityProgressBackgroundColor",null,this.convertAnyToString,void 0,!0),this.defineOption("defaultResourceTableRowDefinitionIDInActivitiesView",null,this.convertAnyToString),this.defineOption("defaultResourceAllowedRowDragModes",g.None,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultResourceCollapsedRowDesign",h.Bars|h.Optimized|h.BarsInHiddenDescendantRows|h.CalendarGrid,this.convertStringToNumber,this.assertNumberOrNull,!0),this.defineOption("defaultResourceExpandedRowDesign",h.Bars|h.Optimized|h.CalendarGrid,this.convertStringToNumber,this.assertNumberOrNull,!0),this.defineOption("defaultResourceMaximumRowHeight",null,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("defaultResourceMinimumRowHeight",42,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero,!0),this.defineOption("defaultResourceRowCollapsible",!0,this.convertAnyToBoolean),this.defineOption("defaultResourceRowSelectable",!0,this.convertAnyToBoolean),this.defineOption("defaultResourceRowTooltipTemplateID",null,this.convertAnyToString),this.defineOption("defaultResourceTableRowDefinitionID",null,this.convertAnyToString),this.defineOption("forcedResourceAllowedRowDragModes",null,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultResourceAllocationRowsCollapsible",!0,this.convertAnyToBoolean),this.defineOption("defaultResourceBarsPaneVisible",!0,this.convertAnyToBoolean),this.defineOption("defaultResourceLoadCurvePaneVisible",!0,this.convertAnyToBoolean),this.defineOption("defaultResourceInventoryCurvePaneVisible",!1,this.convertAnyToBoolean),this.defineOption("defaultResourceCurveTooltipTemplateID",null,this.convertAnyToString),this.defineOption("defaultResourceMaximumSubRowHeightInTimeArea",null,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("defaultAllocationRowDesign",h.Bars|h.CalendarGrid,this.convertStringToNumber,this.assertNumberOrNull,!0),this.defineOption("defaultAllocationSnapTargetsForStart",null,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultAllocationSnapTargetsForEnd",null,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultAllocationAllowedBarDragModes",s.DragAutoHorOrVer,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("forcedAllocationAllowedBarDragModes",null,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultAllocationAllowedBarDragModesInActivitiesView",s.DragHorizontally,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("forcedAllocationAllowedBarDragModesInActivitiesView",null,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultAllocationAllowedRowDragModes",g.None,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("forcedAllocationAllowedRowDragModes",null,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultAllocationAllowedRowDragModesInActivitiesView",g.None,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("forcedAllocationAllowedRowDragModesInActivitiesView",null,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultAllocationBarSelectable",!0,this.convertAnyToBoolean),this.defineOption("defaultAllocationRowSelectable",!0,this.convertAnyToBoolean),this.defineOption("defaultAllocationTableRowDefinitionID",null,this.convertAnyToString),this.defineOption("detailedAllocationConstraintSymbolsEnabled",!0,this.convertAnyToBoolean,void 0,!0),this.defineOption("defaultAllocationBarHeight",22,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("defaultAllocationMinimumRowHeight",42,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero,!0),this.defineOption("defaultAllocationBarShape",r.RectangleWithLeftTopBevel,void 0,this.assertStringOrNull,!0),this.defineOption("defaultAllocationTableRowDefinitionID",null,this.convertAnyToString),this.defineOption("defaultAllocationBarTooltipTemplateID",null,this.convertAnyToString),this.defineOption("defaultAllocationRowTooltipTemplateID",null,this.convertAnyToString),this.defineOption("defaultAllocationBarDesign",w,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultAllocationBarTextFormat",null,this.convertAnyToString),this.defineOption("finishedAllocationBarsShownUnstackedInBackground",!1,this.convertAnyToBoolean),this.defineOption("defaultEntityAllowedRowDragModes",g.DragOutside,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultEntityMinimumRowHeight",42,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero,!0),this.defineOption("defaultEntityRowCollapsible",!0,this.convertAnyToBoolean),this.defineOption("defaultEntityRowSelectable",!0,this.convertAnyToBoolean),this.defineOption("defaultEntityRowTooltipTemplateID",null,this.convertAnyToString),this.defineOption("defaultEntityTableRowDefinitionID",null,this.convertAnyToString),this.defineOption("forcedEntityAllowedRowDragModes",null,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("watermarkSymbolID",null,this.convertAnyToString),this.defineOption("watermarkOpacity",.2,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("defaultLinkSelectable",!0,this.convertAnyToBoolean),this.defineOption("releaseDueDateConnectionsVisible",!1,this.convertAnyToBoolean),this.defineOption("activityCalendarsEnabled",!1,this.convertAnyToBoolean),this.defineOption("internalObjectCopiesNeeded",!1,this.convertAnyToBoolean),this.defineOption("updateOptimizationEnabled",!1,this.convertAnyToBoolean),this.defineOption("asynchronousInteractiveTimeAreaStretching",!1,this.convertAnyToBoolean),this.defineOption("asynchronousRendering",!1,this.convertAnyToBoolean),this.defineOption("decouplingOfAllocationPropertiesFromActivities",!0,this.convertAnyToBoolean,void 0,!0),this.defineOption("dragDatesLimitingInteraction",!1,this.convertAnyToBoolean),this.defineOption("triggeringOfOnShowContextMenuInTimeAreaOfRow",!1,this.convertAnyToBoolean),this.defineOption("triggeringOfOnClickedInTimeAreaOfRow",!1,this.convertAnyToBoolean),this.defineOption("preventDefaultOnContextMenuEvents",!0,this.convertAnyToBoolean),this.defineOption("curvePanesResizable",!1,this.convertAnyToBoolean),this.defineOption("linesShownInLoadCurvePanes",!1,this.convertAnyToBoolean),this.defineOption("defaultSkillAllowedRowDragModes",g.None,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultSkillCollapsedRowDesign",h.None,this.convertStringToNumber,this.assertNumberOrNull,!0),this.defineOption("defaultSkillMinimumRowHeight",42,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero,!0),this.defineOption("defaultSkillRowCollapsible",!0,this.convertAnyToBoolean),this.defineOption("defaultSkillRowSelectable",!0,this.convertAnyToBoolean),this.defineOption("defaultSkillRowTooltipTemplateID",null,this.convertAnyToString),this.defineOption("defaultSkillTableRowDefinitionID",null,this.convertAnyToString),this.defineOption("forcedSkillAllowedRowDragModes",null,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultSkilledResourceRowTooltipTemplateID",null,this.convertAnyToString),this.defineOption("defaultSkilledAllocationRowTooltipTemplateID",null,this.convertAnyToString),this.defineOption("defaultSkilledAllocationBarTooltipTemplateID",null,this.convertAnyToString),this.defineOption("topBarSymbolsVisible",!0,this.convertAnyToBoolean),this.defineOption("timescaleInteractionMode",y.Default,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("ignoreCalendarOnAllocationBarInteractions",!1,this.convertAnyToBoolean),this.defineOption("ignoreCalendarOnActivityBarInteractions",!1,this.convertAnyToBoolean),this.defineOption("objectHighlightFlashingEnabled",!0,this.convertAnyToBoolean),this.defineOption("scrollToObjectAnimationEnabled",!1,this.convertAnyToBoolean),this.defineOption("worldViewVisible",!1,this.convertAnyToBoolean),this.defineOption("multipleBarDraggingEnabled",!1,this.convertAnyToBoolean),this.defineOption("allocationsSelectableOnlyOnOneResourceAtATime",!1,this.convertAnyToBoolean),this.defineOption("dragDatesShownForSingleSelectedObject",!1,this.convertAnyToBoolean),this.defineOption("tableViewWidthsSynchronized",!0,this.convertAnyToBoolean),this.defineOption("tableWidth",null,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("fixedTableColumnWidth",30,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero,!0),this.defineOption("entitiesTableWidth",null,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("entitiesTableViewWidth",null,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("tableTitleAndTimescaleHeight",60,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("entitiesTableTitleHeight",60,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("minimumLoadCurvePaneHeight",30,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("defaultLoadCurvePaneHeight",50,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("maximumLoadCurvePaneHeight",200,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("minimumInventoryCurvePaneHeight",30,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("defaultInventoryCurvePaneHeight",50,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("maximumInventoryCurvePaneHeight",200,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("topRowMarginInTimeArea",10,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero,!0),this.defineOption("bottomRowMarginInTimeArea",5,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero,!0),this.defineOption("subRowDistanceInTimeArea",5,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("tableCellContentTopOffset",21,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("entitiesTableCellContentTopOffset",21,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("activityBarTopOffsetAndHeightScaleFactor",1,this.convertStringToNumber,this.assert_barTopOffsetAndHeightScaleFactor),this.defineOption("allocationBarTopOffsetAndHeightScaleFactor",1,this.convertStringToNumber,this.assert_barTopOffsetAndHeightScaleFactor),this.defineOption("barSortModeForOptimizedRowDesign",d.StartAndEnd,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("timescaleNavigationMode",f.Latest,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("timeAreaPanningMode",3,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("selectionBehavior",_.Framing,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("pastBackgroundLineWidth",null,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull),this.defineOption("pastBackgroundLineDashArray",null,this.convertAnyToString),this.defineOption("visualZoomFactor",1,this.convertStringToNumber,this.assertFiniteNumberGreaterZero),this.defineOption("worldViewPosition",v.Bottom,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("worldViewExtent",150,this.convertStringToNumber,this.assertFiniteNumberGreaterZero),this.defineOption("maximumSnapDistance",8,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("defaultLinkRoutingType",u.Curved,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("defaultLinkTargetMarker",c.FilledArrow,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("progressBarHeight",4,this.convertStringToNumber,this.assertNumberGreaterZero),this.defineOption("progressBarWidthCalculationMode",p.ConsiderWorkingTimesOnly,this.convertStringToNumber,this.assertNumberOrNull),this.defineOption("maximumTopViewAreaHeightRatio",.5,this.convertStringToNumber,this.assert_maximumTopViewAreaHeightRatio),this.defineOption("scrollOffsetsChangedCallbackTimeDelay",500,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualZero),this.defineOption("multipleSelectionEnabled",!0),this.defineOption("editable",!0,this.convertAnyToBoolean),this.defineOption("currentDate",null,this.convertStringToDateEx,this.assertDateOrNull),this.defineOption("workDate",null,this.convertStringToDateEx,this.assertDateOrNull),this.defineOption("start",null,this.convertStringToDateEx,this.assertDateOrNull),this.defineOption("end",null,this.convertStringToDateEx,this.assertDateOrNull),this.defineOption("startAndEnd",[null,null]),this.defineOption("locale","en-US",void 0,this.assertStringOrNull),this.defineOption("language",null,void 0,this.assertStringOrNull),this.defineOption("weekNumbering",null,void 0,this.assertStringOrNull),this.defineOption("firstDayOfWeek",null,void 0,this.assertDayOrNull),this.defineOption("timeZone",null,void 0,this.assertStringOrNull),this.defineOption("intlNumberFormatOptionsMap",null,this.convertObjectToMapOrNull,this.assertMapOrNull),this.defineOption("intlDateTimeFormatOptionsMap",null,this.convertObjectToMapOrNull,this.assertMapOrNull),this.defineOption("defaultActivityStatusFrameColor",null,this.convertAnyToString),this.defineOption("defaultAllocationStatusFrameColor",null,this.convertAnyToString),this.defineOption("entitiesTableShownFullScreen",!1,this.convertAnyToBoolean),this.defineOption("defaultLinkTooltipTemplateID",null,this.convertAnyToString),this.defineOption("defaultPeriodHighlighterEntryTooltipTemplateID",null,this.convertAnyToString),this.defineOption("activityBaselineBarsVisible",!0,this.convertAnyToBoolean),this.defineOption("colorOfFirstTableCellAppliedToGroupColoring",!0,this.convertAnyToBoolean),this.defineOption("groupCellsWithHorizontalSeparationLine",!1,this.convertAnyToBoolean),this.defineOption("dateLineGridColor",null,this.convertAnyToString),this.defineOption("dateLineGridDashArray",null,this.convertAnyToString),this.defineOption("dateLineGridWidth",null,this.convertStringToNumber,this.assertFiniteNumberGreaterOrEqualNullOrNull,!0),this.defineOption("activityHierarchySupplementaryDefinitionID",null,this.convertAnyToString),this.defineOption("resourceHierarchySupplementaryDefinitionID",null,this.convertAnyToString),this.defineOption("resourceHierarchySupplementaryDefinitionIDInLoadsView",null,this.convertAnyToString),this.defineOption("entityHierarchySupplementaryDefinitionID",null,this.convertAnyToString),this.defineOption("collapseButtonVisibleOnRowsWithoutVisibleChildren",!0,this.convertAnyToBoolean,void 0,!0),this.defineOption("triggeringOfOnCollapseStateChangedByUpdateCalls",!0,this.convertAnyToBoolean),this.defineOption("dateLineCaptionOptimizedPositioningEnabled",!1,this.convertAnyToBoolean),this.defineOption("activityRowSortCodePropertyName","SortCode",this.convertAnyToString,void 0,!0),this.defineOption("entityRowSortCodePropertyName","SortCode",this.convertAnyToString,void 0,!0),this.defineOption("resourceRowSortCodePropertyName","SortCode",this.convertAnyToString,void 0,!0),this.defineOption("skillRowSortCodePropertyName","SortCode",this.convertAnyToString,void 0,!0),this.defineOption("allocationRowSortCodePropertyName","SortCode",this.convertAnyToString,void 0,!0),this.defineOption("activityRowSortMode",m.None,this.convertStringToNumber,this.assertNumber,!0),this.defineOption("entityRowSortMode",m.None,this.convertStringToNumber,this.assertNumber,!0),this.defineOption("resourceRowSortMode",m.None,this.convertStringToNumber,this.assertNumber,!0),this.defineOption("skillRowSortMode",m.None,this.convertStringToNumber,this.assertNumber,!0),this.defineOption("allocationRowSortMode",m.None,this.convertStringToNumber,this.assertNumber,!0),this.defineOption("interactiveSwitchingOfSortOrderEnabled",!1,this.convertAnyToBoolean),this.defineOption("sortingIndicatorVisible",!1,this.convertAnyToBoolean),this.defineOption("rowSortModeNoneEnabledOnInteractiveSwitchingOfSortOrder",!0,this.convertAnyToBoolean),this.defineOption("triggeringOfOnShowTooltipForEntriesInBarsEnabled",!1,this.convertAnyToBoolean),this.defineOption("higherCurvePanesOnExceededScaleMaximumValue",!1,this.convertAnyToBoolean),this.defineOption("tonedDownOverlayColor","rgba(64,64,64,0.5)",this.convertAnyToString,void 0,!0),this.defineOption("reducedBarTopOffsetAndHeightScaleFactor",1,this.convertStringToNumber,this.assertNumberGT0AndLE1),this.defineOption("applicationVariablesMap",null,this.convertObjectToMapOrNull,this.assertMapOrNull,!0),this.defineOption("applicationStyleDefinition",null,this.convertAnyToString),this.defineOption("triggerResource",null),this.defineOption("triggerCalendarOrCalendarGrid",null),this.defineOption("linksWithDanglingStartOrEndVisible",!1,this.convertAnyToBoolean)},defineOption:function(e,t,i,a,n){this._super(e,t,i,a),n&&this.setCallback(e,2,this._handleAppAPIOptionPostprocessingBoundToApp)},convertEmptyStringToUndefined:function(e){return e||void 0},convertStringToDateEx:function(e){return"string"==typeof e?this._app.model().dateTimeValueToDate(e):e},assert_timeUnit:function(e,t){return o.assert(null==t||null!=C[t],"timeUnit with invalid value"),!0},assert_maximumTopViewAreaHeightRatio:function(e,t){return o.assert(t>=-.8&&t<=.8,e+" is out of range"),!0},assert_dateLineGridMode:function(e,t){return o.assert(null==t||[0,1,2,4].includes(t),e+" is out of range"),!0},assert_barTopOffsetAndHeightScaleFactor:function(e,t){return o.assert(null==t||t>0&&t<=10,e+" is out of range"),!0}};e.exports=n.extendClass("rabOptionsCollector",a.nOptionsCollector,R)},7315:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(5844),o={construct:function(e,t,i,a,n,o,r,l,s,d){var c=l?l.slice():[];c.push(r.relationshipInfos);var u=Object.assign({},s||{});u._applyToRootEnabled=!0,u._checkPlacement=!0,this._super(e,t,i,a,n,o,r,c,u,d)},defaultHandleRelationshipChangedFunc:function(e,t,i){var a;this.checkRelatedItemExistence(i)&&(a=this._viewModel.rowItemsRoot());var n=t.redetectParentItem(a,i);return n?(t.updateFromReference(),t.reassignParentItem(n)||this._viewModel.registerRowItem(this,!1,!0),t):e.removeChild(t)}};e.exports=a.extendClass("rabParentItemDescriptor",n,o)},2900:(e,t,i)=>{var a=i(8680),n=i(3571),o=n.nClassFactory,r=i(476).ItemType,l=i(5977).RAB_CALENDAR_GRID_ENTRIES_PROP_NAME,s=i(9276),d={postAddToParent:function(){this._super(),this.compile()},postUpdateSelf:function(){this._super(),this.compile()},compile:function(){var e=this,t=function(e){var t=a.select(e.dateArea);e.dateAreaDefinition.rab_color&&t.select("path").style("fill",e.dateAreaDefinition.rab_color);var i=t.selectAll("text").nodes(),n=0;i.length&&e.dateAreaDefinition.entries.forEach((function(e){e.caption&&a.select(i[n++]).style("fill",e.rab_captionColor)}))},i={},o=0;this.Entries?.forEach((function(a,l){var s=a.Color||"",d=i[s];d||(d=i[s]={rab_itemType:r.PeriodHighlighterEntry,id:e.ID+n.nDefaultSeparator+o++,inForeground:!1,rab_color:a.Color,entries:[],createFunc:t}),d.entries.push({start:e._model.dateTimeValueToDate(a.Start),end:e._model.dateTimeValueToDate(a.End),caption:a.Caption,rab_captionColor:a.CaptionColor,rab_entryIndex:l,rab_tooltipTemplateID:a.TooltipTemplateID,data:a})})),this.dateAreaDefinitions=Object.keys(i).map((function(e){return i[e]}))}},c=o.extendClass("rabPeriodHighlighter",s,d);Object.defineProperty(c.prototype,"Entries",{get:function(){return this.getChildrenArray(l)}}),e.exports=c},5729:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(9276),o=a.extendClass("rabPeriodHighlighterEntry",n,{construct:function(e,t,i,a){this._super(e,t,i,a)}});Object.defineProperty(o.prototype,"Start",{get:function(){return this._data.Start}}),Object.defineProperty(o.prototype,"End",{get:function(){return this._data.End}}),Object.defineProperty(o.prototype,"Caption",{get:function(){return this._data.Caption}}),Object.defineProperty(o.prototype,"Color",{get:function(){return this._data.Color}}),Object.defineProperty(o.prototype,"CaptionColor",{get:function(){return this._data.CaptionColor}}),Object.defineProperty(o.prototype,"TooltipTemplateID",{get:function(){return this._data.TooltipTemplateID??this._data.PM_TooltipTemplateID}}),e.exports=o},7273:e=>{var t={defineProperty(e,t,i,a,n,o){if(null!=e&&!(Object.hasOwn?Object.hasOwn(e,t):e.hasOwnProperty(t))){if(i.get){var r=i.get;i.get=function(){let e=r.call(this);if(void 0!==e)return e;let i=a||this._getDefaultObjectPropName();if(i){var l=this.getAPIOption(i);if(l){let e=l[t];if(void 0!==e)return e}}if(n){let e=this.getAPIOption(n);if(void 0!==e)return e}return o}}Object.defineProperty(e,t,i)}}};e.exports=t},5844:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nFunctionDispatcher,r=a.nStructuralRelationshipDataDescriptor,l={construct:function(e,t,i,a,n,o,r,l,s,d){var c=this;c._viewModel=e,c._viewType=e.viewType();var u=Object.assign({},d||{});if(u.getChildWrapperByPrimaryKey=function(e,t){return c._viewModel.model().getChildByPrimaryKey(e,t)},u.getItemByWrapper=function(e){return c._viewModel._item(e)},!u.sharedDepositoryGetterFunc){var p=c._viewModel._sharedDepositories;p&&(u.sharedDepositoryGetterFunc=function(){return p[t]})}u.postAddToParentFunc||(u.postAddToParentFunc=c.defaultPostAddToParentFunc),u.preRemoveFromParentFunc||(u.preRemoveFromParentFunc=c.defaultPreRemoveFromParentFunc),c._super(t,i,a,n,o,r,l,s,u)},defaultPostAddToParentFunc:function(e){var t=this;if(e&&t._classConstructor,t._booleans._checkPlacement&&t._viewModel._checkPlacementInChildItemsOfParent(e),t._viewModel.isHierarchyInitialized()&&t._reloadOrUnloadRelatedItems(1,e),t._booleans._additionallyUpdateChildTimeItems){var i=e.childTimeItems;i||e.timeItems&&Array.isArray(e.timeItems)&&e.timeItems[0]&&(i=e.timeItems[0].childTimeItems),i&&Array.isArray(i)&&i.forEach((function(e){e.updateFromReference()}))}return!0},defaultPreRemoveFromParentFunc:function(e){var t=this;return e&&t._classConstructor,t._viewModel.isHierarchyInitialized()&&(t._booleans._checkPlacement&&t._viewModel._saveAncestorItems(e),t._reloadOrUnloadRelatedItems(2,e)),!0},_reloadOrUnloadRelatedItems:function(e,t){var i=this;if(i._dependentObjectRelationshipInfos){var a=t.getPropertyName();o.each(i._dependentObjectRelationshipInfos,(function(n){n.relatedTo===a&&i._viewModel.reloadOrUnloadRelatedItems(e,t,n)}))}}};e.exports=n.extendClass("rabRelationshipItemDescriptor",r,l)},817:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=i(8882),r=i(9276),l={construct:function(e,t,i,a){this._super(e,t,i,a),void 0===this.rab_cachedCurveCollapseState&&(this.rab_cachedCurveCollapseState=1),void 0===this.rab_cachedAllocationRowsCollapseState&&(this.rab_cachedAllocationRowsCollapseState=1),void 0===this.rab_cachedAllocationRowsCollapseStateInActivitiesView&&(this.rab_cachedAllocationRowsCollapseStateInActivitiesView=1),this.curvesChanged()},postUpdateSelf:function(){this._super(),this.curvesChanged()},store:function(e){if(this._super(e),e){e instanceof r&&(e=e.externalData());var t=e.CollapseStateInLoadsView??e.PM_CollapseStateInLoadsView;t>=0&&(this.rab_cachedCollapseStateInLoadsView=t),(t=e.CurveCollapseState??e.PM_CurveCollapseState)>=0&&(this.rab_cachedCurveCollapseState=t),(t=e.AllocationRowsCollapseState??e.PM_AllocationRowsCollapseState)>=0&&(this.rab_cachedAllocationRowsCollapseState=t),(t=e.AllocationRowsCollapseStateInActivitiesView)>=0&&(this.rab_cachedAllocationRowsCollapseStateInActivitiesView=t)}},_modificationClassificationByProperty:{AllocationRowsCollapseState:function(e){var t=e.AllocationRowsCollapseState??e.PM_AllocationRowsCollapseState;return this.rab_cachedAllocationRowsCollapseState===t?2:0},AllocationRowsCollapseStateInActivitiesView:function(e){var t=e.AllocationRowsCollapseStateInActivitiesView;return this.rab_cachedAllocationRowsCollapseStateInActivitiesView===t?2:0},CalendarGridColor:0,CollapseStateInLoadsView:function(e){var t=e.CollapseStateInLoadsView??e.PM_CollapseStateInLoadsView;return this.rab_cachedCollapseStateInLoadsView===t?2:0},CurveCollapseState:function(e){var t=e.CurveCollapseState??e.PM_CurveCollapseState;return this.rab_cachedCurveCollapseState===t?2:0},CurveTooltipTemplateID:2},_getDefaultObjectPropName:function(){return"defaultValuesForResourceProperties"},curvesChanged:function(){this._curveDatesAndEntriesAreDirty=!0},compileCurves:function(){var e,t,i,a=this;if(a._curveDatesAndEntriesAreDirty||((e=a.CapacityCurveID?a._model.curveByID(a.CapacityCurveID):null)&&e.isDirty()&&(a._curveDatesAndEntriesAreDirty=!0),(t=a.LoadCurveID?a._model.curveByID(a.LoadCurveID):null)&&t.isDirty()&&(a._curveDatesAndEntriesAreDirty=!0),(i=a.InventoryCurveID?a._model.curveByID(a.InventoryCurveID):null)&&i.isDirty()&&(a._curveDatesAndEntriesAreDirty=!0)),a._curveDatesAndEntriesAreDirty){var n=a._model.calendarByResource(a);void 0===e&&(e=a.CapacityCurveID?a._model.curveByID(a.CapacityCurveID):void 0),e&&e.compile(n),void 0===t&&(t=a.LoadCurveID?a._model.curveByID(a.LoadCurveID):void 0),t&&t.compile(n),void 0===i&&(i=a.InventoryCurveID?a._model.curveByID(a.InventoryCurveID):void 0),i&&i.compile(n),a.rab_highestCapacityCurveData=e?e._determineDatesAndEntriesOfHighestCurve():void 0,a.rab_highestLoadCurveData=t?t._determineDatesAndEntriesOfHighestCurve():void 0,a.rab_highestInventoryCurveData=i?i._determineDatesAndEntriesOfHighestCurve():void 0,a.rab_loadCurveData=t?t.rab_compiledCurveData:void 0,a.rab_inventoryCurveData=i?i.rab_compiledCurveData:void 0,a._determineOverloadDatesAndEntries(t,e),a.rab_loadCurveMinValue=t?t.rab_minValue:0,a.rab_loadCurveMaxValue=t?t.rab_maxValue:1,e&&(a.rab_loadCurveMinValue=Math.min(a.rab_loadCurveMinValue,Math.max(e.rab_minValue,0)),a.rab_loadCurveMaxValue=Math.max(a.rab_loadCurveMaxValue,e.rab_maxValue)),t&&(a.rab_loadCurveMaxValue>t.ScaleMaximumValue?a.rab_loadCurveExceedingFactor=1+(a.rab_loadCurveMaxValue-t.ScaleMaximumValue)/(t.ScaleMaximumValue-a.rab_loadCurveMinValue):delete a.rab_loadCurveExceedingFactor),a.rab_inventoryCurveMinValue=i?i.rab_minValue:0,a.rab_inventoryCurveMaxValue=i?i.rab_maxValue:1,this._curveDatesAndEntriesAreDirty=!1}},_determineOverloadDatesAndEntries:function(e,t){var i=this;if(i.rab_isOverloaded=!1,e&&t){var n=i.rab_highestLoadCurveData,o=i.rab_highestCapacityCurveData;if(n){var r={date:new Date(0),value:{start:new Date(0),value:0}},l={date:a.nSortedDatesWithValuesList.DateInfinity,value:{start:a.nSortedDatesWithValuesList.DateInfinity,value:0}},s=l,d=o?o.determineNextOrSameDateWithValue(new Date(0)):r;o&&d&&(r=d,d=o.determineNextDateWithValue(d.date),s=d||l);var c=Math.max(r.value.value,0);n.forEach((function(e,t,a){for(;;){if(e<s.date&&a.value>c)return i.rab_isOverloaded=!0,!1;if(!(t>s.date))break;r=s,c=Math.max(r.value.value,0),o&&(s=o.determineNextDateWithValue(s.date)||l)}return!0}))}}},_getAllocationRowsCollapseState:function(){var e=this.rab_cachedAllocationRowsCollapseState;return e>=0?e:this._getPropertyAsNumber(this._data.AllocationRowsCollapseState??this._data.PM_AllocationRowsCollapseState)},_getAllocationRowsCollapseStateInActivitiesView:function(){var e=this.rab_cachedAllocationRowsCollapseStateInActivitiesView;return e>=0?e:this._getPropertyAsNumber(this._data.AllocationRowsCollapseStateInActivitiesView)},_getCurveCollapseState:function(){var e=this.rab_cachedCurveCollapseState;return e>=0?e:this._getPropertyAsNumber(this._data.CurveCollapseState??this._data.PM_CurveCollapseState)},getCurrentMultiplierPrimaryKeys:function(){return this.ParentID?void 0:this.SkillIDs}},s=n.extendClass("rabResource",o,l),d=s.prototype;d.defineProperty("InventoryCurveID",{get:function(){var e=!!this.model().app()._f&&this.model().app()._f.indexOf(1e3)>=0,t=this.externalData();return null!=t.InventoryCurveID&&e?t.InventoryCurveID.toString():void 0}}),d.defineProperty("AllocationRowsCollapseState",{get:function(){return this._getAllocationRowsCollapseState()}},void 0,-1),d.defineProperty("AllocationRowsCollapseStateInActivitiesView",{get:function(){return this._getAllocationRowsCollapseStateInActivitiesView()}},void 0,-1),d.defineProperty("AllocationRowsCollapsible",{get:function(){var e=this._data.AllocationRowsCollapsible??this._data.PM_AllocationRowsCollapsible;return null==e?void 0:!!e}}),d.defineProperty("BarsPaneVisible",{get:function(){var e=this._data.BarsPaneVisible??this._data.PM_BarsPaneVisible;return null==e?void 0:!!e}}),d.defineProperty("CalendarGridColor",{get:function(){return this._getPropertyAsColorString(this._data.CalendarGridColor??this._data.PM_CalendarGridColor)}}),d.defineProperty("CollapsedRowDesign",{get:function(){return this._getPropertyAsNumber(this._data.CollapsedRowDesign??this._data.PM_CollapsedRowDesign)}}),d.defineProperty("CollapseStateInLoadsView",{get:function(){var e=this.rab_cachedCollapseStateInLoadsView;return e>=0?e:this._getPropertyAsNumber(this._data.CollapseStateInLoadsView??this._data.PM_CollapseStateInLoadsView??this.CollapseState)}},void 0,-1),d.defineProperty("CurveCollapseState",{get:function(){return this._getCurveCollapseState()}},void 0,-1),d.defineProperty("CurveTooltipTemplateID",{get:function(){return this._data.CurveTooltipTemplateID??this._data.PM_CurveTooltipTemplateID}}),d.defineProperty("ExpandedRowDesign",{get:function(){return this._getPropertyAsNumber(this._data.ExpandedRowDesign??this._data.PM_ExpandedRowDesign)}}),d.defineProperty("HasAllocationRows",{get:function(){var e=this._data.HasAllocationRows??this._data.PM_HasAllocationRows;return null==e?void 0:!!e}}),d.defineProperty("HasCurves",{get:function(){var e=this._data.HasCurves??this._data.PM_HasCurves;return null==e?void 0:!!e}}),d.defineProperty("LoadCurvePaneHeight",{get:function(){var e=this._getPropertyAsNumber(this._data.LoadCurvePaneHeight??this._data.PM_LoadCurvePaneHeight);return e>0?e:void 0}}),d.defineProperty("InventoryCurvePaneVisible",{get:function(){var e=this._data.InventoryCurvePaneVisible??this._data.PM_InventoryCurvePaneVisible;return null==e?void 0:!!e}}),d.defineProperty("LoadCurvePaneVisible",{get:function(){var e=this._data.LoadCurvePaneVisible??this._data.PM_LoadCurvePaneVisible;return null==e?void 0:!!e}}),d.defineProperty("MaximumRowHeight",{get:function(){var e=this._getPropertyAsNumber(this._data.MaximumRowHeight??this._data.PM_MaximumRowHeight);return e>0?e:void 0}}),d.defineProperty("MaximumSubRowHeightInTimeArea",{get:function(){var e=this._data.MaximumSubRowHeightInTimeArea??this._data.PM_MaximumSubRowHeightInTimeArea;return e>0?e:void 0}}),d.defineProperty("PeriodHighlighterID",{get:function(){return(this._data.PeriodHighlighterID??this._data.PM_PeriodHighlighterID??this._data.CalendarGridID??this._data.PM_CalendarGridID)?.toString()}}),d.defineProperty("SkilledRowTooltipTemplateID",{get:function(){return this._data.SkilledRowTooltipTemplateID}}),d.defineProperty("SkillIDs",{get:function(){let e=this._data.SkillIDs;return Array.isArray(e)?e:void 0}}),d.defineProperty("ViewArea",{get:function(){return this._getPropertyAsNumber(this._data.ViewArea??this._data.PM_ViewArea??this._data.PM_HorizontalBodyViewArea)}}),Object.defineProperty(s.prototype,"__ViewArea",{get:function(){return this.ViewArea??0}}),Object.defineProperty(s.prototype,"__MultiplierPrimaryKeys",{get:function(){return this.___multiplierPrimaryKeys},set:function(e){this.___multiplierPrimaryKeys=e}}),e.exports=s},1186:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(817),o={construct:function(e,t,i,a){this._super(e,t,i,a),this.rab_cachedCurveCollapseState=void 0,this.rab_cachedAllocationRowsCollapseState=void 0,this.rab_cachedAllocationRowsCollapseStateInActivitiesView=void 0}};e.exports=a.extendClass("rabResourcePropertiesForSkill",n,o)},7437:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(9280).RowInteractions,o=i(5674).DisplayedElements,r=i(476),l=r.ItemType,s=r.ViewType,d=(i(817),i(8037)),c={construct:function(e,t,i,a){this.rab_curvePanesVisible=!t.CurveCollapseState,this._super(l.Resource,e,t,i,void 0,a)},postUpdateSelf:function(){var e=!0;if(this.getAPIOption("updateOptimizationEnabled")){var t=this.data();t&&!t.rab_modificationClassification||(e=!1)}e&&(this.rab_barsOrHeightChanged&&(this._viewModel.registerRowItem(this,!0,!1),delete this.rab_barsOrHeightChanged),this._super())},isResourceRelevant:function(){return!0},getWrapperHasChildrenPropName:function(e){return"detailingRowItems"===e?"HasAllocationRows":this._super(e)},enrichObject:function(){switch(this.viewType()){case s.Loads:this.collapsedDisplayedElements=o.None,this.expandedDisplayedElements=o.None;break;case s.Activities:this.collapsedDisplayedElements=o.CalendarGrid|o.BarsInOwnHiddenLeafRows|o.Optimized,this.expandedDisplayedElements=o.CalendarGrid}},updateFromReference:function(e){var t,i=this._super(e),a=this.data(),o=a.model();if(a.isPseudo()||(t=e&&e.ignoreCalendar?o._defaultNonWorkingTimeCalendar:o.calendarByResource(a),this.calendar=t?.nCalendar),this.viewType()!==s.Loads){var r,d=this;if(!e||!e.ignorePeriodHighlighter){for(;null==d.data()?.PeriodHighlighterID&&(d=d.getHierarchyParent()););r=d&&o.periodHighlighterByID(d.data().PeriodHighlighterID)}this.dateAreas=r&&r.dateAreaDefinitions}this.detailingRowsCollapsible=a.AllocationRowsCollapsible,a.isPseudo()||(this.rowInteractions=this.viewType()===s.Activities?n.None:a.AllowedRowDragModes,this.rowInteractions&&this.viewType()===s.SkilledResources&&(this.rowInteractions=this.rowInteractions&~n.DragOnSameLevelOnly|n.DragInSameTableParentOnly));var c=this.collapsedDisplayedElements,u=this.expandedDisplayedElements;this.viewType()===s.Activities?this.leavesInitiallyCollapsed=!!a.AllocationRowsCollapseStateInActivitiesView:this.viewType()!==s.Loads&&(this.collapsedDisplayedElements=this._viewModel.modifyDisplayedElementsForRowItemType(l.Resource,a.CollapsedRowDesign),this.expandedDisplayedElements=this._viewModel.modifyDisplayedElementsForRowItemType(l.Resource,a.ExpandedRowDesign),this.leavesInitiallyCollapsed=!!a.AllocationRowsCollapseState);var p=this.minimumHeight,h=this.maximumHeight,g=this.maximumSubRowHeight;this.minimumHeight=a.MinimumRowHeight,this.maximumHeight=a.MaximumRowHeight,this.maximumSubRowHeight=a.MaximumSubRowHeightInTimeArea;var m=this.barsPaneVisible,_=this.rab_curvePanesVisible;return this.barsPaneVisible=a.BarsPaneVisible,null==this.barsPaneVisible&&(this.barsPaneVisible=this.getAPIOption("defaultResourceBarsPaneVisible")),!1===this.barsPaneVisible&&(this.rab_curvePanesVisible=!0),this.rab_barsOrHeightChanged=this.rab_barsOrHeightChanged||c!==this.collapsedDisplayedElements||u!==this.expandedDisplayedElements||p!==this.minimumHeight||h!==this.maximumHeight||g!==this.maximumSubRowHeight||m!==this.barsPaneVisible||_!==this.rab_curvePanesVisible,i},getCollapseState:function(){return this.viewType()===s.Loads?this.data().CollapseStateInLoadsView:this._super()},getAllocationRowsCollapseState:function(){return this.viewType()===s.Activities?this.data().AllocationRowsCollapseStateInActivitiesView:this._super()},handleRowExpandedOrCollapsed:function(e,t){switch(this.viewType()){case s.Loads:this.data().rab_cachedCollapseStateInLoadsView=e?1:0;break;case s.Activities:this.data().rab_cachedAllocationRowsCollapseStateInActivitiesView=t?1:0,this._super(e,t);break;default:this.data().rab_cachedAllocationRowsCollapseState=t?1:0,this._super(e,t)}}};e.exports=a.extendClass("rabResourceRowItem",d,c)},9586:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nDataDescriptor,r=a.nStructuralDataDescriptor,l=a.nStructureType,s=i(476),d=s.ItemType,c=s.ObjectType,u=s.ViewType,p=s.VisualType,h=i(5977),g=h.PrimaryKeyInfos,m=h.RAB_ROOT_PROP_NAME,_=h.RAB_RESOURCES_PROP_NAME,f=h.RAB_LINKS_PROP_NAME,y=h.RAB_ALLOCATIONS_PROP_NAME,b=h.RAB_ALLOCATION_ENTRIES_PROP_NAME,A=h.RelationshipInfos,v=h.RowCategory,I=(i(6084),i(9044)),C=i(5844),w=i(1666),T={construct:function(e,t,i){this._super(e,t,u.Resources,i)},_collectAPIOptions:function(e){e[0].push(["linksVisibleInResourcesView"]),e[1].push(["allocationRowsVisibleInResourcesView","definedAllocationLinksVisibleInResourcesView","linksVisibleInResourcesView","resourceHierarchySupplementaryDefinitionID","topViewAreaVisibleInResourcesView","mainViewAreaVisibleInResourcesView","tableViewWidthInResourcesView","entitiesTableVisibleInResourcesView","curvePanesCollapsibleInResourcesView","tableRowDefinitionIDForTitleInResourcesView","resourceRowSortMode","resourceRowSortCodePropertyName","allocationRowSortMode","allocationRowSortCodePropertyName","compareResources","compareAllocations","decouplingOfAllocationPropertiesFromActivities"]),this._super(e)},_handleAPIOptionChanged:function(e,t,i,a){var n=this;switch(e){case"allocationRowsVisibleInResourcesView":this.delegateToGanttView((function(e){e.ganttWidget().option("detailingRowsVisible",t)}));break;case"definedAllocationLinksVisibleInResourcesView":this.refreshLinks(),this.delegateToGanttView((function(e){e.update()}));break;case"linksVisibleInResourcesView":switch(a){case 0:t||this._model.links().forEach((function(e){n.removeLink(e)}));break;case 1:t&&this._model.links().forEach((function(e){n.addLink(e)})),this.delegateToGanttView((function(e){e.update()}))}break;case"resourceHierarchySupplementaryDefinitionID":this._updateGrouping(_,"removeResources"),this.delegateToGanttView((function(e){e.update()}));break;case"topViewAreaVisibleInResourcesView":this.delegateToGanttView((function(e){e.ganttWidget().option("topBodyViewAreaVisible",t)}));break;case"mainViewAreaVisibleInResourcesView":this.delegateToGanttView((function(e){e.ganttWidget().option("commonBodyViewAreaVisible",t)}));break;case"tableViewWidthInResourcesView":this.delegateToGanttView((function(e){e.ganttWidget().modifyTableViewWidth(t)}));break;case"entitiesTableVisibleInResourcesView":this.delegateToGanttView((function(e){e._showHideEntitiesTable()}));break;case"curvePanesCollapsibleInResourcesView":this._addOrRemoveCurveCollapsingColumnInTableDefinition(this._tableDefinition,t),this.delegateToGanttView((function(e){e.ganttWidget().option("tableDefinition",e.ganttWidget().option("tableDefinition"))}));break;case"tableRowDefinitionIDForTitleInResourcesView":this._tableDefinition.rowDefinitionIDWithColumnTitles=t,this.delegateToGanttView((function(e){e.ganttWidget().updateTableTitle(!0)}));break;case"resourceRowSortCodePropertyName":case"resourceRowSortMode":this.updateTableTitleSortingParams(v.ChildRow);case"compareResources":this._initializeCompareObjects(_);break;case"allocationRowSortCodePropertyName":case"allocationRowSortMode":case"compareAllocations":this._initializeCompareObjects(y);break;case"decouplingOfAllocationPropertiesFromActivities":this.allocationItems().forEach((function(e){e.updateFromReference({updateChildTimeItems:!0}),n.registerRowItem(e,!0,!1)}));break;default:this._super(e,t,i,a)}},_initDataDefinition:function(){var e,t=this,i=this._dataDescriptors={};i[m]=new r(m,null);var a=!0;i[_]=new I(this,_,this.model().getOption("resourceClass"),this._options.resourceRowItemClass,g[_],[A[_][0]],{structureType:l.Parent,relationshipInfos:A[_][0]},A[y],{enableInheritChangedRelationships:a},{getHierarchySupplementaryDefinitionIDFunc:function(){return t.getHierarchySupplementaryDefinitionID()},getSourceValueForGroupingCodeSourceFunc:function(e,i,a,n,o,r){return t.getSourceValueForGroupingCodeSource(c.Resource,e,i,a,n,o,r)},dataValidationFunc:function(e,t){if(t.isValidForViewType(this._viewType))return t}}),i[m].addSubDescriptor(i[_]),i[y]=new C(this,y,this.model().getOption("allocationClass"),this._options.allocationRowItemClass,g[y],A[y],{structureType:l.Parent,relationshipInfos:A[y][0]},void 0,{_additionallyUpdateChildTimeItems:t._getAdditionallyUpdateChildTimeItemsFlag(),_checkPlacement:!0,enableInheritChangedRelationships:a}),i[m].addSubDescriptor(i[y]),e=new r(b,this._options.allocationEntryTimeItemClass,void 0,void 0,void 0,{handleParentItemFunc:function(e,t){return e.timeItems[0]}}),i[y].addSubDescriptor(e),i[f]=new o(f,this._options.linkItemClass,g[f],A[f],{enableInheritChangedRelationships:a},{isActiveFunc:function(){return t.getAPIOption("linksVisibleInResourcesView")}}),i[m].addSubDescriptor(i[f])},getHierarchySupplementaryDefinitionID:function(){return this.getAPIOption("resourceHierarchySupplementaryDefinitionID")},updateHierarchyByHierarchySupplementaryDefinition:function(e){this._dataDescriptors&&e&&e.ID&&e.ID===this.getHierarchySupplementaryDefinitionID()&&this._updateGrouping(_,"removeResources")},_initializeAllCompareObjects:function(){this._initializeCompareObjects(_),this._initializeCompareObjects(y),this._super()},getAPIOptionName:function(e){switch(e){case"allocationRowsVisible":return"allocationRowsVisibleInResourcesView";case"curvePanesCollapsible":return"curvePanesCollapsibleInResourcesView";case"definedAllocationLinksVisible":return"definedAllocationLinksVisibleInResourcesView";case"entitiesTableVisible":return"entitiesTableVisibleInResourcesView";case"linksVisible":return"linksVisibleInResourcesView";case"mainViewAreaVisible":return"mainViewAreaVisibleInResourcesView";case"tableRowDefinitionIDForTitle":return"tableRowDefinitionIDForTitleInResourcesView";case"tableViewWidth":return"tableViewWidthInResourcesView";case"topViewAreaVisible":return"topViewAreaVisibleInResourcesView"}return this._super(e)},getItemInfoForItemType:function(e,t){var i,a;if(this._rowItemsRoot){switch(e){case d.Resource:a=this.getPrimaryKeyByObjectDataOrID(t,_),i=this.model().getChildByPrimaryKey(_,a);break;case d.Allocation:a=this.getPrimaryKeyByObjectDataOrID(t,y),i=this.model().getChildByPrimaryKey(y,a)}return this.buildItemInfo(a,i)}},getSelectableItemTypeByObjectType:function(e,t){switch(e){case c.Allocation:return t===p.Row?d.AllocationRow:e;case c.Resource:case c.Entity:case c.Link:return e}}};e.exports=n.extendClass("rabResourcesViewModel",w,T)},1666:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(5674),o=n.DisplayedElements,r=n.HorizontalAlignment,l=i(476).ItemType,s=i(5977),d=s.RAB_RESOURCES_PROP_NAME,c=s.RAB_ACTIVITIES_PROP_NAME,u=s.RAB_ALLOCATIONS_PROP_NAME,p=s.RowCategory,h=i(7922),g={construct:function(e,t,i,a){this._super(e,t,i,a)},_specifyCategorizedParams:function(){this.__CategorizedParams.ChildrenName[p.ChildRow]=d,this.__CategorizedParams.RowSortCodePropertyNameAPIOptionName[p.ChildRow]="resourceRowSortCodePropertyName",this.__CategorizedParams.RowSortModeAPIOptionName[p.ChildRow]="resourceRowSortMode",this.__CategorizedParams.RowItemsType[p.ChildRow]=l.Resource,this.__CategorizedParams.ChildrenName[p.LeafRow]=u,this.__CategorizedParams.RowSortCodePropertyNameAPIOptionName[p.LeafRow]="allocationRowSortCodePropertyName",this.__CategorizedParams.RowSortModeAPIOptionName[p.LeafRow]="allocationRowSortMode",this.__CategorizedParams.RowItemsType[p.LeafRow]=l.AllocationRow},_collectAPIOptions:function(e){e[1].push(["defaultValuesForAllocationProperties","defaultValuesForAllocationEntryProperties","defaultAllocationBackgroundColor","defaultAllocationConstraintSymbolColor","detailedAllocationConstraintSymbolsEnabled","defaultAllocationProgressBackgroundColor","defaultAllocationBarShape","defaultAllocationBarDesign","defaultValuesForLinkProperties","defaultValuesForResourceProperties","ignoreCalendarOnAllocationBarInteractions","defaultAllocationBarHeight","defaultResourceMaximumSubRowHeightInTimeArea","defaultResourceMaximumRowHeight","defaultAllocationBarSelectable","defaultAllocationAllowedBarDragModes","forcedAllocationAllowedBarDragModes","defaultAllocationSnapTargetsForStart","defaultAllocationSnapTargetsForEnd","defaultAllocationTableRowDefinitionID","finishedAllocationBarsShownUnstackedInBackground","allocationBarTopOffsetAndHeightScaleFactor","defaultResourceTableRowDefinitionID","visibilityFilterForResources","visibilityFilterForAllocations","reducedBarTopOffsetAndHeightScaleFactor"]),this._super(e)},_handleAPIOptionChanged:function(e,t,i,a){var n=this;switch(e){case"defaultValuesForAllocationProperties":case"defaultValuesForAllocationEntryProperties":case"defaultAllocationBackgroundColor":case"defaultAllocationConstraintSymbolColor":case"detailedAllocationConstraintSymbolsEnabled":case"defaultAllocationProgressBackgroundColor":case"finishedAllocationBarsShownUnstackedInBackground":this._model.allocations().forEach((function(e){n.updateAllocation(e)})),this.delegateToGanttView((function(e){e.ganttWidget().invalidateAllRows(!1,!0),e.update()}));break;case"reducedBarTopOffsetAndHeightScaleFactor":case"defaultAllocationBarDesign":case"defaultAllocationBarHeight":case"defaultAllocationBarShape":this._model.allocations().forEach((function(e){n.updateAllocation(e)})),this.delegateToGanttView((function(i){"defaultAllocationBarHeight"===e?(i.ganttWidget().option("barHeight",t),i.ganttWidget().option("defaultLeafBarHeight",t)):"defaultAllocationBarShape"===e&&i.ganttWidget().option("defaultBarShape",t),i.ganttWidget().invalidateAllRows(!1,!0),i.update()}));break;case"defaultValuesForLinkProperties":this._model.links().forEach((function(e){n.updateLink(e)})),this.delegateToGanttView((function(e){e.ganttWidget().invalidateAllRows(),e.update()}));break;case"defaultValuesForResourceProperties":this._model.resources().forEach((function(e){n.updateResource(e)})),this.delegateToGanttView((function(e){e.ganttWidget().invalidateAllRows(),e.update()}));break;case"ignoreCalendarOnAllocationBarInteractions":this.delegateToGanttView((function(e){e.ganttWidget().option("ignoreCalendarOnBarInteractions",t)}));break;case"defaultResourceMaximumSubRowHeightInTimeArea":this.delegateToGanttView((function(e){e.ganttWidget().option("defaultMaximumSubRowHeight",t)}));break;case"defaultResourceMaximumRowHeight":this.delegateToGanttView((function(e){e.ganttWidget().option("defaultMaximumRowHeight",t)}));break;case"defaultAllocationBarSelectable":this.delegateToGanttView((function(e){e.ganttWidget().option("defaultLeafTimeItemSelectable",t)}));break;case"defaultAllocationAllowedBarDragModes":case"forcedAllocationAllowedBarDragModes":this.delegateToGanttView((function(i){i.ganttWidget().option("d"===e.charAt(0)?"defaultBarInteractions":"forcedBarInteractions",t),i.ganttWidget().option("d"===e.charAt(0)?"defaultLeafBarInteractions":"forcedLeafBarInteractions",t)}));break;case"defaultAllocationSnapTargetsForStart":this.delegateToGanttView((function(e){e.ganttWidget().option("defaultBarSnapTargetsForStart",t)}));break;case"defaultAllocationSnapTargetsForEnd":this.delegateToGanttView((function(e){e.ganttWidget().option("defaultBarSnapTargetsForEnd",t)}));break;case"defaultAllocationTableRowDefinitionID":this.delegateToGanttView((function(){n._setDefaultTableRowDefinitionIDForItemType(l.AllocationRow,n.getAPIOption("defaultAllocationTableRowDefinitionID"))}));break;case"allocationBarTopOffsetAndHeightScaleFactor":this._model.allocations().forEach((function(e){n.updateAllocation(e)})),this.delegateToGanttView((function(e){e.ganttWidget().option("barTopOffsetAndHeightScaleFactor",t),e.ganttWidget().option("leafBarTopOffsetAndHeightScaleFactor",t)}));break;case"defaultResourceTableRowDefinitionID":this._setDefaultTableRowDefinitionIDForItemType(l.Resource,t);break;case"visibilityFilterForResources":this.determineVisibilityOfAllRowObjects(d,void 0,!0);break;case"visibilityFilterForAllocations":this.determineVisibilityOfAllRowObjects(u,void 0,!0);break;default:this._super(e,t,i,a)}},_doModifyDisplayedElementsForRowItemType:function(e,t){return t&&e===l.Resource?this.exchangeFlag(this.exchangeFlag(t,o.BarsInHiddenDescendantRows,o.BarsInLeafRowsInHiddenDescendantRows),o.Bars,o.BarsInOwnHiddenLeafRows):this._super(e,t)},_initTableDefinition:function(){var e,t=this;t._super();var i=t.getAPIOption("symbolColumnTitleSymbolIDs");let a=t.getAPIOption("symbolColumnTitleVisible");a&&(e=t.ganttView()._getImageURLsForGanttWidget(i)),t._tableDefinition={titleText:t.getAPIOption("titleText"),baseLevel:{className:"",contentsFunc:function(){return t._tableRowFillFunc.apply(t,arguments)},cellDefinitions:[{className:"",width:t.getAPIOption("tableWidth"),contentsFunc:function(){return t._tableCellFillFunc.apply(t,arguments)},titleText:null,horizontalTextAlignment:r.Left}]},symbolColumnTitleImageURLs:e,symbolColumnTitleVisible:a,symbolColumnTitleBackgroundColor:a?t.getAPIOption("symbolColumnTitleBackgroundColor")||t.getAPIOption("symbolColumnBackgroundColor")||"white":t.getAPIOption("tableTitleBackgroundColor")||"#646464"},t._tableDefinition.rowDefinitionIDWithColumnTitles=t.getAPIOptionMapped("tableRowDefinitionIDForTitle"),t._tableDefinition.rowSortPropertyName=t.getAPIOption("resourceRowSortCodePropertyName"),t._tableDefinition.rowSortMode=t.getAPIOption("resourceRowSortMode"),t._addOrRemoveCurveCollapsingColumnInTableDefinition(t._tableDefinition,t.getAPIOptionMapped("curvePanesCollapsible")),t._addOrRemoveSymbolColumnInTableDefinition(t._tableDefinition,t.getAPIOption("symbolColumnVisible"),t.getAPIOption("symbolColumnWidth")),t.updateTableRowDefinitions(t.app().tableRowDefinitionsMap(),!1)},setTableDefinitionIntoWidget:function(e){this._super.apply(this,arguments),this._setDefaultTableRowDefinitionIDForItemType(l.Resource,this.getAPIOption("defaultResourceTableRowDefinitionID")),this._setDefaultTableRowDefinitionIDForItemType(l.AllocationRow,this.getAPIOption("defaultAllocationTableRowDefinitionID")),e.option("defaultExternalType",l.Resource)},_initializeAllCompareObjects:function(){},addActivity:function(e){this.getAPIOption("decouplingOfAllocationPropertiesFromActivities")||this._invalidateAllocationsRelatedToActivity(e),this.getAPIOptionMapped("linksVisible")&&this._invalidateLinkItemsRelatedToActivity(e)},updateActivity:function(e){this.getAPIOption("decouplingOfAllocationPropertiesFromActivities")||this._invalidateAllocationsRelatedToActivity(e)},removeActivity:function(e){this.getAPIOptionMapped("linksVisible")&&this._invalidateLinkItemsRelatedToActivity(e),this.getAPIOption("decouplingOfAllocationPropertiesFromActivities")||this._invalidateAllocationsRelatedToActivity(e)},addAllocation:function(e){return this.__addAllocation(e)},updateAllocation:function(e,t){switch(t){case"after":case void 0:return this.__updateAllocation(e)}},removeAllocation:function(e,t){return this.__removeAllocation(e,t)},_invalidateAllocationsRelatedToActivity:function(e){var t=this;if(this._rowItemsRoot){var i=this.getAPIOptionMapped("allocationRowsVisible"),a=t.model().getRelatedObjects(u,c,"*",e.getPrimaryKey());a?.forEach((function(e){t.__invalidateAllocation(e,i)}))}},__invalidateAllocation:function(e,t){this.__invalidateAllocationAtLast(e,t)},__invalidateAllocationAtLast:function(e,t){let i=this.allocationItem(e);if(i){let e=i.getPossiblyActivityDependentPropValues(!1);i.updateFromReference({updateChildTimeItems:!0});let a=i.getPossiblyActivityDependentPropValues(!0);Object.keys(e).every((t=>e[t]===a[t]))||this.registerRowItem(t?i.getParentItem():i,!0,!1)}}};e.exports=a.extendClass("rabResourcesViewModelBase",h,g)},4144:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nDefaultSeparator,r=i(476).ItemType,l=i(5977).RAB_ACTIVITIES_PROP_NAME,s=i(4613),d={construct:function(e,t){this._super(r.Root,e,t,void 0,void 0,void 0)},dispose:function(e){delete this._removedItemsCache,this._super(e)},clearRemovedItemsCache:function(e){if(this._removedItemsCache){if(e)for(let t of this._removedItemsCache.values())e.disposeUnusedItem(t);this._removedItemsCache.clear()}else this._removedItemsCache=new Map},_createChildAtLast:function(e,t,i,a,n,r){var l=this;if(l._removedItemsCache){var s=[t.getPrimaryKey(),n?r:""].join(o),d=l._removedItemsCache.get(s);if(d)return l._removedItemsCache.delete(s),delete d._dbgIsDisposed,void 0!==r?d.construct(r,e,t,i,a):d.construct(e,t,i,a),d}return n?void 0!==r?new n(r,e,t,i):new n(e,t,i):l._super(e,t,i,a)},_removeChildAtLast:function(e,t,i){var a=this;if(a._removedItemsCache||this.clearRemovedItemsCache(),a._removedItemsCache){var n=[t.data().getPrimaryKey(),t.getParentItemPropName&&"rab_rowItem"===t.getParentItemPropName()&&e===l?t.rab_itemType:""].join(o);a._removedItemsCache.set(n,t)}a._super(e,t,i)}};e.exports=n.extendClass("rabRootRowItem",s,d)},4613:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(1094),o={construct:function(e,t,i,a,n,o){this._super(e,t,i,a,n,o),this.externalType=e},postUpdateSelf:function(){this._super(),!1===this.isBridgeEnabled()&&this._viewModel.registerRowItem(this,!1,!1)},isResourceRelevant:function(){return!1},_getHierarchyParentPrimaryKey:function(e){if(e._hierarchyParent)return e._hierarchyParent.getPrimaryKey()},getParentItemPropName:function(){return this||this._super(),"rab_parentRowItem"},getChildItemsPropNameInParent:function(){return this||this._super(),"childRowItems"},detachChildItem:function(e){var t=this._super(e),i=e.getChildItemsPropNameInParent();if(this[i]&&!this[i].length){var a=this.data();a&&this._hasSubRows(a,i)||delete this[i]}return t},getWrapperHasChildrenPropName:function(e){return"childRowItems"===e?"HasChildren":void 0},updateFromReference:function(e){var t=this,i=this._super(e),a=t.data();return["childRowItems","detailingRowItems"].forEach((function(e){t[e]?.length||(t[e]=a&&t._hasSubRows(a,e)?[]:void 0)})),i},_hasSubRows:function(e,t){var i=this.getWrapperHasChildrenPropName(t);return!!i&&!!e[i]},needsChildRowItemsUpdate:function(){var e=!1,t=this.data();if(this.rab_calendarGridColor!==t.CalendarGridColor&&(this.rab_calendarGridColor=t.CalendarGridColor,t.rab_modificationClassification||(e=!0)),this.rab_tableColor!==t.TableColor&&(this.rab_tableColor=t.TableColor,this.getAPIOption("updateOptimizationEnabled")&&t.rab_modificationClassification||(e=!0)),!e){var i=this.rab_sourced_contents?.tableCellBackgroundColor?.[0];i&&i.propertyName&&i.content!=t[i.propertyName]&&(e=!0)}return e},handleRowExpandedOrCollapsed:function(){}};e.exports=a.extendClass("rabRowItem",n,o)},2390:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(8882),o=i(7273),r=i(5977),l=r.RAB_SKILLS_PROP_NAME,s=r.RAB_RESOURCES_PROP_NAME,d={construct:function(e,t,i,a){this._super(e,t,i,a)},_modificationClassificationByProperty:{},_getDefaultObjectPropName:function(){return"defaultValuesForSkillProperties"},getCurrentMultiplierPrimaryKeys:function(){var e=this,t=void 0,i=!1,a=[],n=function(a){if(t=i?t:(i=!0,e.model().getRelatedObjects(s,l,"*",e.getPrimaryKey())))return t.some((function(e){if(null!=e.getCurrentMultiplierPrimaryKeys()&&e.__ViewArea===a)return!0}))},o=function(t,i){(e.getAPIOption(t)||n(i))&&a.push(i)};return o("unusedSkillsVisibleInTopViewArea",-1),o("unusedSkillsVisibleInMainViewArea",0),a}},c=a.extendClass("rabSkill",n,d),u=c.prototype;u.defineProperty=function(e,t,i,a){o.defineProperty(u,e,t,"defaultValuesForSkillProperties",i,a)},u.defineProperty("CollapsedRowDesign",{get:function(){return this._getPropertyAsNumber(this._data.CollapsedRowDesign??this._data.PM_CollapsedRowDesign)}}),e.exports=c},6652:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(9280).RowInteractions,o=i(5674).DisplayedElements,r=i(476).ItemType,l=(i(2390),i(8037)),s={construct:function(e,t,i,a){this._super(r.Skill,e,t,i,void 0,a),this.expandedDisplayedElements=o.None,this.calendar=null},postUpdateSelf:function(){var e=!0;if(this.getAPIOption("updateOptimizationEnabled")){var t=this.data();t&&!t.rab_modificationClassification||(e=!1)}e&&(this.rab_barsOrHeightChanged&&(this._viewModel.registerRowItem(this,!0,!1),delete this.rab_barsOrHeightChanged),this._super())},updateFromReference:function(e){var t=this._super(e),i=this.data(),a=this.collapsedDisplayedElements;this.collapsedDisplayedElements=this._viewModel.modifyDisplayedElementsForRowItemType(r.Skill,i.CollapsedRowDesign),this.rowInteractions=i.AllowedRowDragModes,this.rowInteractions&&(this.rowInteractions=this.rowInteractions&n.DragVertically|n.DragInSameTableParentOnly);var o=this.minimumHeight;return this.minimumHeight=i.MinimumRowHeight,this.rab_barsOrHeightChanged=this.rab_barsOrHeightChanged||a!==this.collapsedDisplayedElements||o!==this.minimumHeight,t}};e.exports=a.extendClass("rabSkillRowItem",l,s)},497:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(4373),o=a.extendClass("rabSkilledAllocation",n,{isInOtherMultiplierSourceObject:function(){let e=this.__MultiplierPrimaryKey;return null==e||!(e===this.data().SkillID)},extendCallbackArgsForMultiplierPrimaryKey:function(e,t,i){!i&&e&&(e.__multiplierPrimaryKey=this.__MultiplierPrimaryKey),t[(i?"newS":"s")+"killID"]=this.__MultiplierPrimaryKey}});Object.defineProperty(o.prototype,"__SkillID",{get:function(){return this.__MultiplierPrimaryKey},set:function(e){this.__MultiplierPrimaryKey=e}}),e.exports=o},7082:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(5354),o=i(5977).RAB_RESOURCES_PROPERTIES_FOR_SKILLS_PROP_NAME,r={unusedSkillsVisibleInViewArea:function(){return-1===this.__ViewArea?this.getAPIOption("unusedSkillsVisibleInTopViewArea"):this.getAPIOption("unusedSkillsVisibleInMainViewArea")},extendCallbackArgsForMultiplierPrimaryKey:function(e,t,i){!i&&e&&(e.__multiplierPrimaryKey=this.__MultiplierPrimaryKey),t[(i?"newS":"s")+"killID"]=this.__MultiplierPrimaryKey},__getChildrenNameForIndividualProperties:function(){return o}},l=a.extendClass("rabSkilledResource",n,r);Object.defineProperty(l.prototype,"__SkillID",{get:function(){return this.__MultiplierPrimaryKey},set:function(e){this.__MultiplierPrimaryKey=e}}),e.exports=l},4003:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nDataDescriptor,r=a.nDefaultSeparator,l=a.nStructuralDataDescriptor,s=a.nStructureType,d=i(5674),c=d.DisplayedElements,u=d.HorizontalAlignment,p=i(476),h=p.ItemType,g=p.ObjectType,m=p.ViewType,_=p.VisualType,f=i(5977),y=f.PrimaryKeyInfos,b=f.RAB_ROOT_PROP_NAME,A=f.RAB_SKILLS_PROP_NAME,v=f.RAB_MULTIPLIED_SKILLS_PROP_NAME,I=f.RAB_SKILLED_RESOURCES_PROP_NAME,C=f.RAB_SKILLED_ALLOCATIONS_PROP_NAME,w=f.RAB_RESOURCES_PROP_NAME,T=f.RAB_LINKS_PROP_NAME,R=f.RAB_ALLOCATIONS_PROP_NAME,S=f.RAB_ALLOCATION_ENTRIES_PROP_NAME,P=f.RelationshipInfos,O=f.RowCategory,D=(i(6084),i(5844)),E=i(1666),M={construct:function(e,t,i){var a=this;a._super(e,t,m.SkilledResources,i),a._internalDefaultForSkillTableDefinition={className:"",contentsFunc:a._tableRowFillFunc.bind(a),cellDefinitions:[{className:"",width:a.getAPIOption("tableWidth"),contentsFunc:a._tableCellFillFunc.bind(a),titleText:null,horizontalTextAlignment:u.Left}]}},setTableDefinitionIntoWidget:function(){this._super.apply(this,arguments),this._setDefaultTableRowDefinitionIDForItemType(h.Skill,this.getAPIOption("defaultSkillTableRowDefinitionID"))},_specifyCategorizedParams:function(){this._super(),this.__CategorizedParams.ChildrenName[O.SubRootRow]=A,this.__CategorizedParams.RowSortCodePropertyNameAPIOptionName[O.SubRootRow]="skillRowSortCodePropertyName",this.__CategorizedParams.RowSortModeAPIOptionName[O.SubRootRow]="skillRowSortMode",this.__CategorizedParams.RowItemsType[O.SubRootRow]=h.Skill},_collectAPIOptions:function(e){e[0].push(["linksVisibleInSkilledResourcesView"]),e[1].push(["defaultValuesForSkillProperties","allocationRowsVisibleInSkilledResourcesView","definedAllocationLinksVisibleInSkilledResourcesView","linksVisibleInSkilledResourcesView","topViewAreaVisibleInSkilledResourcesView","mainViewAreaVisibleInSkilledResourcesView","tableViewWidthInSkilledResourcesView","entitiesTableVisibleInSkilledResourcesView","curvePanesCollapsibleInSkilledResourcesView","defaultSkillTableRowDefinitionID","tableRowDefinitionIDForTitleInSkilledResourcesView","resourceRowSortMode","resourceRowSortCodePropertyName","skillRowSortMode","skillRowSortCodePropertyName","allocationRowSortMode","allocationRowSortCodePropertyName","compareResources","compareSkills","compareAllocations","visibilityFilterForSkills","allocationBarDesignOfOtherSkill","decouplingOfAllocationPropertiesFromActivities","unusedSkillsVisibleInTopViewArea","unusedSkillsVisibleInMainViewArea"]),this._super(e)},_handleAPIOptionChanged:function(e,t,i,a){var n=this;switch(e){case"defaultValuesForSkillProperties":this._model.skills().forEach((function(e){n.updateSkill(e)})),this.delegateToGanttView((function(e){e.ganttWidget().invalidateAllRows(),e.update()}));break;case"allocationRowsVisibleInSkilledResourcesView":this.delegateToGanttView((function(e){e.ganttWidget().option("detailingRowsVisible",t)}));break;case"definedAllocationLinksVisibleInSkilledResourcesView":this.refreshLinks(),this.delegateToGanttView((function(e){e.update()}));break;case"linksVisibleInSkilledResourcesView":switch(a){case 0:t||this._model.links().forEach((function(e){n.removeLink(e)}));break;case 1:t&&this._model.links().forEach((function(e){n.addLink(e)})),this.delegateToGanttView((function(e){e.update()}))}break;case"topViewAreaVisibleInSkilledResourcesView":this.delegateToGanttView((function(e){e.ganttWidget().option("topBodyViewAreaVisible",t)}));break;case"mainViewAreaVisibleInSkilledResourcesView":this.delegateToGanttView((function(e){e.ganttWidget().option("commonBodyViewAreaVisible",t)}));break;case"tableViewWidthInSkilledResourcesView":this.delegateToGanttView((function(e){e.ganttWidget().modifyTableViewWidth(t)}));break;case"entitiesTableVisibleInSkilledResourcesView":this.delegateToGanttView((function(e){e._showHideEntitiesTable()}));break;case"curvePanesCollapsibleInSkilledResourcesView":this._addOrRemoveCurveCollapsingColumnInTableDefinition(this._tableDefinition,t),this.delegateToGanttView((function(e){e.ganttWidget().option("tableDefinition",e.ganttWidget().option("tableDefinition"))}));break;case"defaultSkillTableRowDefinitionID":this._setDefaultTableRowDefinitionIDForItemType(h.Skill,t);break;case"tableRowDefinitionIDForTitleInSkilledResourcesView":this._tableDefinition.rowDefinitionIDWithColumnTitles=t,this.delegateToGanttView((function(e){e.ganttWidget().updateTableTitle(!0)}));break;case"resourceRowSortCodePropertyName":case"resourceRowSortMode":this.updateTableTitleSortingParams(O.ChildRow);case"compareResources":this._initializeCompareObjects(I);break;case"allocationRowSortCodePropertyName":case"allocationRowSortMode":case"compareAllocations":this._initializeCompareObjects(C);break;case"skillRowSortCodePropertyName":case"skillRowSortMode":this.updateTableTitleSortingParams(O.SubRootRow);case"compareSkills":this._initializeCompareObjects(A);break;case"visibilityFilterForSkills":this.determineVisibilityOfAllRowObjects(A,void 0,!0);break;case"allocationBarDesignOfOtherSkill":this._model.skilledAllocations().forEach((function(e){n.updateChild(e)})),this.delegateToGanttView((function(e){e.ganttWidget().invalidateAllRows(!1,!0),e.update()}));break;case"decouplingOfAllocationPropertiesFromActivities":this.skilledAllocationItems().forEach((function(e){e.updateFromReference({updateChildTimeItems:!0}),n.registerRowItem(e,!0,!1)}));break;case"unusedSkillsVisibleInTopViewArea":case"unusedSkillsVisibleInMainViewArea":var o=n.model(),r=n.app();if(t){var l=function(e){o.skills().forEach((function(t){o.__getMultipliedSkill(e,t.ID)||(t.__MultiplierPrimaryKey=e,r._addObject(t,v,"addMultipliedSkill"),delete t.__MultiplierPrimaryKey)}))};switch(e){case"unusedSkillsVisibleInTopViewArea":l(-1);break;case"unusedSkillsVisibleInMainViewArea":l(0)}}else{var s=function(e){o.multipliedSkills().slice().forEach((function(t){if(t.__ViewArea===e){o.getRelatedObjects(I,v,"*",t.getPrimaryKey())||r._removeObject(t.getPrimaryKey(),v,0,"removeMultipliedSkill")}}))};switch(e){case"unusedSkillsVisibleInTopViewArea":s(-1);break;case"unusedSkillsVisibleInMainViewArea":s(0)}}this.delegateToGanttView((function(e){e.ganttWidget().invalidateAllRows(),n.update(),e.update()}));break;default:this._super(e,t,i,a)}},_doModifyDisplayedElementsForRowItemType:function(e,t){if(t)switch(e){case h.Resource:return this.exchangeFlag(t,c.Bars,c.BarsInOwnHiddenLeafRows);case h.Skill:return this.exchangeFlag(t&~(c.Bars|c.CalendarGrid),c.BarsInHiddenDescendantRows,c.BarsInLeafRowsInHiddenDescendantRows)}return this._super(e,t)},_initDataDefinition:function(){var e,t=this,i=this.model(),a=this._dataDescriptors={};a[b]=new l(b,null);var n=!0;a[v]=new D(this,v,i.getOption("multipliedSkillClass"),this._options.skillRowItemClass,y[v],void 0,void 0,P[I][0],{_applyToRootEnabled:!0,_checkPlacement:!0,enableInheritChangedRelationships:n}),a[b].addSubDescriptor(a[v]),a[I]=new D(this,I,i.getOption("skilledResourceClass"),this._options.resourceRowItemClass,y[I],P[I][0],{structureType:s.Parent,relationshipInfos:P[I][1]},P[C][1],{enableInheritChangedRelationships:n}),a[b].addSubDescriptor(a[I]),a[C]=new D(this,C,i.getOption("skilledAllocationClass"),this._options.allocationRowItemClass,y[C],P[C][1],{structureType:s.Parent,relationshipInfos:P[C][1]},void 0,{_additionallyUpdateChildTimeItems:t._getAdditionallyUpdateChildTimeItemsFlag(),_checkPlacement:!0,enableInheritChangedRelationships:n},{postAddToParentFunc:function(e){if(this.defaultPostAddToParentFunc(e),t.isHierarchyInitialized()&&t.getAPIOptionMapped("linksVisible")){let i=e.data().data();t._invalidateLinkItemsRelatedToAllocation(i)}},preRemoveFromParentFunc:function(e){if(t.isHierarchyInitialized()){if(t.getAPIOptionMapped("linksVisible")){let i=e.data().data();t._invalidateLinkItemsRelatedToAllocation(i)}this.defaultPreRemoveFromParentFunc(e)}}}),a[b].addSubDescriptor(a[C]),e=new l(S,this._options.allocationEntryTimeItemClass,void 0,void 0,void 0,{handleParentItemFunc:function(e,t){return e.timeItems[0]}}),a[C].addSubDescriptor(e),a[T]=new o(T,this._options.linkItemClass,y[T],P[T],{enableInheritChangedRelationships:n},{isActiveFunc:function(){return t.getAPIOption("linksVisibleInSkilledResourcesView")}}),a[b].addSubDescriptor(a[T])},_createViewItems:function(){var e=this;if(this._dataDescriptors&&!1===this.__dataReady){var t=this.model();(this.getAPIOption("unusedSkillsVisibleInTopViewArea")||this.getAPIOption("unusedSkillsVisibleInMainViewArea"))&&t.skills().forEach((function(i){let a=i.getCurrentMultiplierPrimaryKeys();a?.forEach((e=>i.addMultiplierPrimaryKey(v,e))),e.__iterateMultiplierPrimaryKeys(a,i,(function(e){t.addMultipliedSkill(e)}))})),t.resources().forEach((function(i){let a=i.getCurrentMultiplierPrimaryKeys();a?.forEach((e=>i.addMultiplierPrimaryKey(I,e))),e.__iterateMultiplierPrimaryKeys(a,i,(function(e){t.addSkilledResource(e)}))})),this._super()}},addMultipliedSkill:function(e){var t=this.addChild(e);if(t)return this._expandOrCollapseRowByCollapseStateForRowItem(t),this._expandOrCollapseCurvesInRowByCollapseStateForRowItem(t),t},updateMultipliedSkill:function(e){this._updateRowObject(e),this._expandOrCollapseRowByCollapseState(e),this._expandOrCollapseCurvesInRowByCollapseState(e)},removeMultipliedSkill:function(e,t){if(t){var i=this.multipliedSkillItem(e);i&&(delete i.childRowItems,delete i.detailingRowItems)}this.removeChild(e,t),t||this._checkChildItemsArraysInAncestors(),delete this._temporaryAncestorItemsByRowID},addSkilledResource:function(e){var t=this.addChild(e);if(t)return this._expandOrCollapseRowByCollapseStateForRowItem(t),this._expandOrCollapseCurvesInRowByCollapseStateForRowItem(t),t},updateSkilledResource:function(e){this._updateRowObject(e),this._expandOrCollapseRowByCollapseState(e),this._expandOrCollapseCurvesInRowByCollapseState(e)},removeSkilledResource:function(e,t){if(t){var i=this._item(e);i&&(delete i.childRowItems,delete i.detailingRowItems)}this.removeChild(e,t),t||this._checkChildItemsArraysInAncestors(),delete this._temporaryAncestorItemsByRowID},addSkilledAllocation:function(e){var t=this.addChild(e);if(t)return t.rab_itemType===h.AllocationRow&&this.registerRowItem(t.rab_parentRowItem,!0,!0),this.getAPIOptionMapped("linksVisible")&&this._invalidateLinkItemsRelatedToAllocation(e.data()),t},updateSkilledAllocation:function(e){var t=this;if(this.updateChild(e),this.getAPIOption("allocationRowsVisibleInSkilledResourcesView")){let a=this._item(e);if(a){let e=function(){var e=t._getCompareRowItemsFunc(C);return t.registerRowItem(a,!1,!1),e&&!t._checkPlacementOfChildItemsSuppressedCounts[O.LeafRow]&&t._checkPlacementInChildItemsOfParent(a),a};var i=t.getWidget();i?i.invalidateRowsForTreeViewUpdate(a,e):e()}}},removeSkilledAllocation:function(e,t){if(this.removeChild(e,t),this.getAPIOptionMapped("linksVisible")&&this._invalidateLinkItemsRelatedToAllocation(e.data()),t){var i=this._item(e);i&&delete i.timeItems}},_addMultipliedSkills:function(e){this.__addMultipliedWrapper(e.getCurrentMultiplierPrimaryKeys(),e,v,"addMultipliedSkill")},_updateMultipliedSkills:function(e){this.__updateMultipliedWrapper(e.getCurrentMultiplierPrimaryKeys(),e,v,"addMultipliedSkill","updateMultipliedSkill","removeMultipliedSkill")},_removeMultipliedSkills:function(e,t){this.__removeMultipliedWrapper(e.getCurrentMultiplierPrimaryKeys(),e,v,"removeMultipliedSkill",t)},_addSkilledResources:function(e){this.__addMultipliedWrapper(e.getCurrentMultiplierPrimaryKeys(),e,I,"addSkilledResource")},_updateSkilledResources:function(e,t){switch(t){case"before":this._oldViewArea=e.__ViewArea,this._oldSkillIDs=e.SkillIDs?.slice(),this._oldValueSet=!0;break;case"after":case void 0:var i=void 0;if(this._oldValueSet){var a=e.__ViewArea,n=this._oldSkillIDs?.join(","),o=e.SkillIDs?.join(",");a==this._oldViewArea&&o==n||(i={DBG_THIS_IS_RAB_WRAPPER_SUBSTITUTE:!0,Role:e.Role,ID:e.ID,ViewArea:this._oldViewArea,SkillIDs:this._oldSkillIDs})}this.__updateMultipliedWrapper(e.getCurrentMultiplierPrimaryKeys(),e,I,"addSkilledResource","updateSkilledResource","removeSkilledResource",i),delete this._oldViewArea,delete this._oldSkillIDs,delete this._oldValueSet}},_removeSkilledResources:function(e,t){this.__removeMultipliedWrapper(e.getCurrentMultiplierPrimaryKeys(),e,I,"removeSkilledResource",t)},_addSkilledAllocations:function(e){let t=this.model().getRelatedWrapperByRelationshipInfo(e,P[R][0]);t&&this.__addMultipliedWrapper(t.getCurrentMultiplierPrimaryKeys(),e,C,"addSkilledAllocation")},_updateSkilledAllocations:function(e,t){switch(t){case"before":this._oldResourceID=e.ResourceID,this._oldSkillID=e.SkillID,this._oldResourceIDSet=!0;break;case"after":case void 0:var i=void 0;if(this._oldResourceIDSet){var a=e.ResourceID,n=e.SkillID;a==this._oldResourceID&&n==this._oldSkillID||(i={DBG_THIS_IS_RAB_WRAPPER_SUBSTITUTE:!0,Role:e.Role,ID:e.ID,ResourceID:this._oldResourceID,SkillID:this._oldSkillID})}var o=this.model().getRelatedWrapperByRelationshipInfo(e,P[R][0]);o&&this.__updateMultipliedWrapper(o.getCurrentMultiplierPrimaryKeys(),e,C,"addSkilledAllocation","updateSkilledAllocation","removeSkilledAllocation",i),delete this._oldResourceID,delete this._oldResourceIDSet}},_removeSkilledAllocations:function(e,t){let i=this.model().getRelatedWrapperByRelationshipInfo(e,P[R][0]);i&&this.__removeMultipliedWrapper(i.getCurrentMultiplierPrimaryKeys(),e,C,"removeSkilledAllocation",t)},_invalidateSkilledAllocations:function(e,t){var i=this;let a=this.model().getRelatedWrapperByRelationshipInfo(e,P[R][0]);a&&this.__iterateMultiplierPrimaryKeys(a.getCurrentMultiplierPrimaryKeys(),e,(function(e){i.__invalidateAllocationAtLast(e,t)}))},addSkill:function(e){!0===this.__dataReady&&this._addMultipliedSkills(e)},updateSkill:function(e){!0===this.__dataReady&&this._updateMultipliedSkills(e)},removeSkill:function(e,t){!0===this.__dataReady&&this._removeMultipliedSkills(e,t)},addResource:function(e){!0===this.__dataReady&&this._addSkilledResources(e)},updateResource:function(e,t){!0===this.__dataReady&&this._updateSkilledResources(e,t)},removeResource:function(e,t){!0===this.__dataReady&&this._removeSkilledResources(e,t)},addAllocation:function(e){!0===this.__dataReady&&this._addSkilledAllocations(e)},updateAllocation:function(e,t){!0===this.__dataReady&&this._updateSkilledAllocations(e,t)},removeAllocation:function(e,t){!0===this.__dataReady&&this._removeSkilledAllocations(e,t)},__invalidateAllocation:function(e,t){this._invalidateSkilledAllocations(e,t)},getHierarchySupplementaryDefinitionID:function(){},updateHierarchyByHierarchySupplementaryDefinition:function(){},_initTableDefinition:function(){this._super(),this._tableDefinition.groupingLevels=[this._internalDefaultForSkillTableDefinition]},_initializeAllCompareObjects:function(){this._initializeCompareObjects(A),this._initializeCompareObjects(I),this._initializeCompareObjects(C),this._super()},getAPIOptionName:function(e){switch(e){case"allocationRowsVisible":return"allocationRowsVisibleInSkilledResourcesView";case"curvePanesCollapsible":return"curvePanesCollapsibleInSkilledResourcesView";case"definedAllocationLinksVisible":return"definedAllocationLinksVisibleInSkilledResourcesView";case"entitiesTableVisible":return"entitiesTableVisibleInSkilledResourcesView";case"linksVisible":return"linksVisibleInSkilledResourcesView";case"mainViewAreaVisible":return"mainViewAreaVisibleInSkilledResourcesView";case"tableRowDefinitionIDForTitle":return"tableRowDefinitionIDForTitleInSkilledResourcesView";case"tableViewWidth":return"tableViewWidthInSkilledResourcesView";case"topViewAreaVisible":return"topViewAreaVisibleInSkilledResourcesView";case"allocationBarDesignOfOther":return"allocationBarDesignOfOtherSkill"}return this._super(e)},getItemInfoForItemType:function(e,t){var i,a,n,o;if(this._rowItemsRoot){switch(e){case h.Resource:if(a=this.getPrimaryKeyByObjectDataOrID(t,w),null==(o=t.SkillID)){var l=this.model().getChildByPrimaryKey(w,a);if(!l)return;if(o=l.SkillIDs?.[0],null==o)return}n=`${o}${r}${a}`,i=this.model().getChildByPrimaryKey(I,n);break;case h.Allocation:if(a=this.getPrimaryKeyByObjectDataOrID(t,R),null==(o=t.SkillID)){var s=this.model().getChildByPrimaryKey(R,a);if(!s)return;if(null==(o=s.SkillID))return}n=`${o}${r}${a}`,i=this.model().getChildByPrimaryKey(C,n);break;case h.Skill:a=this.getPrimaryKeyByObjectDataOrID(t,A),(null==(o=t.ViewArea)||"-1"!==o&&-1!==o)&&(o=0),n=`${o}${r}${a}`,i=this.model().getChildByPrimaryKey(v,n)}return this.buildItemInfo(a,i)}},invalidateSkilledResourceByPrimaryKey:function(e){var t=this;let i=t._rowItemsRoot;if(i){var a=i.getChildrenDepository(I);if(a){var n=a.getObjectByPrimaryKey(e);if(n){n.updateFromReference();let e=function(){var e=t._getCompareRowItemsFunc(I);return t.registerRowItem(n,!1,!1),e&&!t._checkPlacementOfChildItemsSuppressedCounts[O.ChildRow]&&t._checkPlacementInChildItemsOfParent(n),n??null};var o=t.getWidget();o?o.invalidateRowsForTreeViewUpdate(n,e):e(),t._expandOrCollapseRowByCollapseStateForRowItem(n),t._expandOrCollapseCurvesInRowByCollapseStateForRowItem(n)}}}},hasMultipliedObjects:function(){return!0},wrappersByPrimaryKeyParts:function(e,t,i,a){if(this.hasMultipliedObjects())switch(e){case h.Allocation:case h.AllocationRow:return this.__multipliedWrappersByPrimaryKey(C,R,a,`${i??""}${r}${t}`);case h.Resource:return this.__multipliedWrappersByPrimaryKey(I,w,a,`${i??""}${r}${t}`);case h.Skill:return this.__multipliedWrappersByPrimaryKey(v,A,a,t)}return this._super(e,t,i,a)},getSelectableItemTypeByObjectType:function(e,t){switch(e){case g.Allocation:return t===_.Row?h.AllocationRow:e;case g.Skill:case g.Resource:case g.Entity:case g.Link:return e}},getMultiplierPrimaryKey:function(e,t){switch(e){case h.Allocation:case h.AllocationRow:case h.Resource:if(this.hasMultipliedObjects())return t.SkillID?t.SkillID:void 0}}};e.exports=n.extendClass("rabSkilledResourcesViewModel",E,M)},3786:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(1094),o={postUpdateSelf:function(){this._super(),this.isBridgeEnabled()||this._viewModel.registerRowItem(this.getParentItem(),!0,!1)},updateFromReference:function(e){var t=this._super(e);return e&&!0===e.updateChildTimeItems&&Array.isArray(this.childTimeItems)&&this.childTimeItems.length>0&&this.childTimeItems.forEach((function(t){t.updateFromReference(e)})),t},updatePropertiesDependentOnParent:function(){this.updateFromReference()},getParentItemPropName:function(){return this||this._super(),"rab_rowItem"},getChildItemsPropNameInParent:function(){return this||this._super(),"timeItems"},calcStartEndX:function(e,t){return{startX:e,endX:t}}};e.exports=a.extendClass("rabTimeItem",n,o)},7433:e=>{e.exports={nwafVersion:"9.0.1",nwafCopyrightYear:"2013-2024",vswVersion:"8.0.1",vswCopyrightYear:"2020-2024"}},997:(e,t,i)=>{var a=i(3571),n=a.nClass,o=a.nClassFactory,r=i(476).ViewType,l=i(5977),s=l.RAB_ACTIVITIES_PROP_NAME,d=l.RAB_ALLOCATIONS_PROP_NAME,c=l.RAB_CALENDAR_GRIDS_PROP_NAME,u=l.RAB_CALENDARS_PROP_NAME,p=l.RAB_CURVES_PROP_NAME,h=l.RAB_ENTITIES_PROP_NAME,g=l.RAB_HIERARCHY_SUPPLEMENTARY_DEFINITIONS_PROP_NAME,m=l.RAB_LINKS_PROP_NAME,_=l.RAB_RESOURCES_PROP_NAME,f=l.RAB_SKILLS_PROP_NAME,y=l.RAB_MULTIPLIED_SKILLS_PROP_NAME,b=l.RAB_SKILLED_RESOURCES_PROP_NAME,A=l.RAB_SKILLED_ALLOCATIONS_PROP_NAME,v=l.RAB_MULTIPLIED_RESOURCES_BY_ACTIVITIES_PROP_NAME,I=l.RAB_MULTIPLIED_ALLOCATIONS_BY_ACTIVITIES_PROP_NAME,C={construct:function(e,t,i){this._app=e,this._model=t,this._initOptions(i),this._viewModels=[],this._ganttViewPE=void 0},destroy:function(){this._resizeSensor?(this._resizeSensor.detach(),delete this._resizeSensor):this._onWindowResizedWithException&&window.removeEventListener("resize",this._onWindowResizedWithException);for(var e=r._Minimum;e<=r._Maximum;e++)this._viewModels[e]?.destroy();this._ganttViewPE?.destroy()},getAPIOption:function(e){return this.app().getAPIOption(e)},setAPIOptionChangedCallback:function(e,t,i){this.app().setAPIOptionChangedCallback(e,t,i)},_initOptions:function(e){var t={views:[r.Activities,r.Resources,r.Loads,r.SkilledResources]};this._options=Object.assign({},t,e)},setOption:function(e,t,i){switch(e){case"editable":case"maximumSnapDistance":this._ganttViewPE?.setOption(e,t,i)}},getOption:function(e){return this._options[e]},app:function(){return this._app},model:function(){return this._model},init:function(){var e=this,t=e._app,i=e._model;e._app.getOption("fullScreenGanttViewElem")&&(e._viewModels=[],Array.isArray(e._options.views)&&(e._options.views.includes(r.Activities)&&(e._viewModels[r.Activities]=new(t.getOption("activitiesViewModelClass"))(t,i,t.getOption("viewModelOptions"))),e._options.views.includes(r.Resources)&&(e._viewModels[r.Resources]=new(t.getOption("resourcesViewModelClass"))(t,i,t.getOption("viewModelOptions"))),e._options.views.includes(r.Loads)&&(e._viewModels[r.Loads]=new(t.getOption("loadsViewModelClass"))(t,i,t.getOption("viewModelOptions"))),e._options.views.includes(r.SkilledResources)&&(e._viewModels[r.SkilledResources]=new(t.getOption("skilledResourcesViewModelClass"))(t,i,t.getOption("viewModelOptions"))),[r.Activities,r.Resources,r.SkilledResources].some((t=>e._options.views.includes(t)))&&(e._viewModels[r._Entities]=new(t.getOption("entitiesViewModelClass"))(t,i,t.getOption("viewModelOptions"))),e._ganttViewPE=new(t.getOption("ganttViewClass"))(t,e,e._viewModels,t.getOption("fullScreenGanttViewElem"),t.getOption("ganttViewOptions"))))},initForViewType:function(e){var t,i=this;(i._initViewModels(),i._viewModels)&&(void 0!==e&&i._viewModels[e]?t=e:[r.Activities,r.Resources,r.Loads,r.SkilledResources].forEach((function(e){i._viewModels[e]&&null==t&&i._viewModels[e]&&(t=e)})),void 0!==t&&i._ganttViewPE.init(t))},_initViewModels:function(){},ganttViews:function(){var e=[];return this._ganttViewPE&&e.push(this._ganttViewPE),e},ganttView:function(){return this._ganttViewPE},removeAll:function(){for(let e=r._Minimum;e<=r._Maximum;e++)this._viewModels[e]?.beforeRemoveAll();this._model.removeAll();for(let e=r._Minimum;e<=r._Maximum;e++)this._viewModels[e]?.afterRemoveAll()},addAllocation:function(e){return this.PE_addObject(e,"addAllocation")},updateAllocation:function(e,t){this._viewModels.forEach((function(i){i.updateAllocation(e,t)}))},removeAllocation:function(e,t){return this.PE_removeObjectByPrimaryKey(d,e,t,"removeAllocation","PE_removeObject")},addCalendar:function(e){return this.PE_addObject(e,"addCalendar")},updateCalendar:function(e,t){return this.PE_updateObject(e,t,"updateCalendar")},removeCalendar:function(e){return this.PE_removeObjectByPrimaryKey(u,e,!1,"removeCalendar","PE_removeObject")},addCurve:function(e){return this.PE_addObject(e,"addCurve")},updateCurve:function(e,t){return this.PE_updateObject(e,t,"updateCurve")},removeCurve:function(e){return this.PE_removeObjectByPrimaryKey(p,e,!1,"removeCurve","PE_removeObject")},addResource:function(e){return this.PE_addObject(e,"addResource")},updateResource:function(e,t){this._viewModels.forEach((function(i){i.updateResource(e,t)}))},removeResource:function(e,t){return this.PE_removeObjectByPrimaryKey(_,e,t,"removeResource","PE_removeObject")},addSkill:function(e){return this.PE_addObject(e,"addSkill")},updateSkill:function(e,t){return this.PE_updateObject(e,t,"updateSkill")},removeSkill:function(e,t){return this.PE_removeObjectByPrimaryKey(f,e,t,"removeSkill","PE_removeObject")},addMultipliedSkill:function(e){return this.PE_addObject(e,"addMultipliedSkill")},updateMultipliedSkill:function(e,t){return this.PE_updateObject(e,t,"updateMultipliedSkill")},removeMultipliedSkill:function(e,t){return this.PE_removeObjectByPrimaryKey(y,e,t,"removeMultipliedSkill","PE_removeObject")},addSkilledResource:function(e){return this.PE_addObject(e,"addSkilledResource")},updateSkilledResource:function(e,t){return this.PE_updateObject(e,t,"updateSkilledResource")},removeSkilledResource:function(e,t){return this.PE_removeObjectByPrimaryKey(b,e,t,"removeSkilledResource","PE_removeObject")},addSkilledAllocation:function(e){return this.PE_addObject(e,"addSkilledAllocation")},updateSkilledAllocation:function(e,t){return this.PE_updateObject(e,t,"updateSkilledAllocation")},removeSkilledAllocation:function(e,t){return this.PE_removeObjectByPrimaryKey(A,e,t,"removeSkilledAllocation","PE_removeObject")},invalidateMultipliedObject:function(e,t){this._viewModels.forEach((function(i){i.invalidateMultipliedObject(e,t)}))},addMultipliedResourceByActivity:function(e){return this.PE_addObject(e,"addMultipliedResourceByActivity")},updateMultipliedResourceByActivity:function(e,t){return this.PE_updateObject(e,t,"updateMultipliedResourceByActivity")},removeMultipliedResourceByActivity:function(e,t){return this.PE_removeObjectByPrimaryKey(v,e,t,"removeMultipliedResourceByActivity","PE_removeObject")},addMultipliedAllocationByActivity:function(e){return this.PE_addObject(e,"addMultipliedAllocationByActivity")},updateMultipliedAllocationByActivity:function(e,t){return this.PE_updateObject(e,t,"updateMultipliedAllocationByActivity")},removeMultipliedAllocationByActivity:function(e,t){return this.PE_removeObjectByPrimaryKey(I,e,t,"removeMultipliedAllocationByActivity","PE_removeObject")},PE_addObject:function(e,t){this._viewModels.forEach((function(i){i[t](e)}))},PE_updateObject:function(e,t,i){switch(t){case"after":case void 0:this._viewModels.forEach((function(t){t[i](e)}))}},PE_removeObjectByPrimaryKey:function(e,t,i,a,n){this.PE_removeObjectByObject(this._model.getChildByPrimaryKey(e,t),i,a,n)},PE_removeObjectByObject:function(e,t,i,a){e&&(this._viewModels.forEach((function(a){a[i](e,t)})),this._model[a](e,t))},addActivity:function(e){return this.PE_addObject(e,"addActivity")},updateActivity:function(e,t){return this.PE_updateObject(e,t,"updateActivity")},removeActivity:function(e){return this.PE_removeObjectByPrimaryKey(s,e,!1,"removeActivity","PE_removeObject")},addLink:function(e){return this.PE_addObject(e,"addLink")},updateLink:function(e,t){return this.PE_updateObject(e,t,"updateLink")},removeLink:function(e){return this.PE_removeObjectByPrimaryKey(m,e,!1,"removeLink","PE_removeObject")},addEntity:function(e){this._viewModels[r._Entities]&&this._viewModels[r._Entities].addEntity(e)},updateEntity:function(e,t){"after"===t&&this._viewModels[r._Entities]&&this._viewModels[r._Entities].updateEntity(e)},removeEntity:function(e){var t=this._model.getChildByPrimaryKey(h,e);t&&(this._viewModels[r._Entities]&&this._viewModels[r._Entities].removeEntity(t),this._model.removeEntity(t))},addPeriodHighlighter:function(e){return this.PE_addObject(e,"addPeriodHighlighter")},updatePeriodHighlighter:function(e,t){return this.PE_updateObject(e,t,"updatePeriodHighlighter")},removePeriodHighlighter:function(e){return this.PE_removeObjectByPrimaryKey(c,e,!1,"removePeriodHighlighter","PE_removeObject")},addHierarchySupplementaryDefinition:function(e){for(var t=r._Minimum;t<=r._Maximum;t++)this._viewModels[t]?.addHierarchySupplementaryDefinition(e)},updateHierarchySupplementaryDefinition:function(e,t){switch(t){case"after":case void 0:for(var i=r._Minimum;i<=r._Maximum;i++)this._viewModels[i]?.updateHierarchySupplementaryDefinition(e)}},removeHierarchySupplementaryDefinition:function(e,t){var i=this._model.getChildByPrimaryKey(g,e);if(i){for(var a=r._Minimum;a<=r._Maximum;a++)this._viewModels[a]?.removeHierarchySupplementaryDefinition(i);this._model.removeHierarchySupplementaryDefinition(i,t)}},preRender:function(){},render:function(e){for(var t=r._Minimum;t<=r._Maximum;t++)this._viewModels[t]?.update();this._ganttViewPE?.update(!0,e)},scrollToObjectData:function(e,t,i,a){return this._ganttViewPE?.scrollToObjectData(e,t,i,a)},scrollToDate:function(e,t){this._ganttViewPE?.ganttWidget().scrollTimeAreaViewToDate(e,t)},getSelectedObjectsAndType:function(){return this._ganttViewPE?.getSelectedObjectsAndType()},selectOrHighlightObjectsByObjectType:function(e,t,i,a){this._ganttViewPE?.selectOrHighlightObjectsByObjectType(e,t,i,a)}};e.exports=o.extendClass("rabView",n,C)},7922:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nFunctionDispatcher,r=a.nPrimaryKeyManager,l=i(5674).HorizontalAlignment,s=i(476),d=s.ItemType,c=s.ViewType,u=s.TableType,p=i(5977),h=p.PrimaryKeyInfos,g=p.RAB_RESOURCES_PROP_NAME,m=p.RAB_CURVES_PROP_NAME,_=p.RAB_ACTIVITIES_PROP_NAME,f=i(371),y={construct:function(e,t,i,a){this._super(e,t,i,a),this.__TableType=u.Gantt},_collectAPIOptions:function(e){e[1].push(["symbolColumnTitleBackgroundColor","symbolColumnTitleSymbolIDs","symbolColumnTitleVisible","symbolColumnVisible","symbolColumnWidth","titleText","tableTitleBackgroundColor","symbolColumnBackgroundColor","fixedTableColumnWidth","tableWidth"]),this._super(e)},_handleAPIOptionChanged:function(e,t,i,a){var n=this;switch(e){case"titleText":this._tableDefinition.titleText=t,this.delegateToGanttView((function(e){e.ganttWidget().updateTableTitle(!0)}));break;case"tableTitleBackgroundColor":this._tableDefinition.symbolColumnTitleVisible||(this._tableDefinition.symbolColumnTitleBackgroundColor=t||"#646464",this.delegateToGanttView((function(t){t.ganttWidget().updateTableTitle(),t._setColorByOptionValue(e)})));break;case"symbolColumnBackgroundColor":this._tableDefinition.symbolColumnTitleVisible&&(this._tableDefinition.symbolColumnTitleBackgroundColor=n.getAPIOption("symbolColumnTitleBackgroundColor")||t||"white",this.delegateToGanttView((function(e){e.ganttWidget().updateTableTitle()}))),this.delegateToGanttView((function(e){e.ganttWidget().invalidateAllRows(),e.update()}));break;case"symbolColumnTitleBackgroundColor":this._tableDefinition.symbolColumnTitleVisible&&(this._tableDefinition.symbolColumnTitleBackgroundColor=t||n.getAPIOption("symbolColumnBackgroundColor")||"white",this.delegateToGanttView((function(e){e.ganttWidget().updateTableTitle()})));break;case"symbolColumnTitleVisible":this._tableDefinition.symbolColumnTitleVisible=t,this._tableDefinition.symbolColumnTitleBackgroundColor=t?this.getAPIOption("symbolColumnTitleBackgroundColor")||n.getAPIOption("symbolColumnBackgroundColor")||"white":this.getAPIOption("tableTitleBackgroundColor")||"#646464",this.delegateToGanttView((function(e){e.ganttWidget().updateTableTitle()}));break;case"symbolColumnTitleSymbolIDs":this.delegateToGanttView((function(e){JSON.stringify(i)!==JSON.stringify(t)&&this._setTableDefinitionsImageURLs(this._tableDefinition,e._getImageURLsForGanttWidget(t))&&e.ganttWidget().updateTableTitle()}));break;case"symbolColumnVisible":this._addOrRemoveSymbolColumnInTableDefinition(this._tableDefinition,t,this.getAPIOption("symbolColumnWidth"))&&this.delegateToGanttView((function(e){e.ganttWidget().option("tableDefinition",this._tableDefinition)}));break;case"symbolColumnWidth":t=Math.max(t,22),this._addOrRemoveSymbolColumnInTableDefinition(this._tableDefinition,this.getAPIOption("symbolColumnVisible"),t)&&this.delegateToGanttView((function(e){e.ganttWidget().option("tableDefinition",this._tableDefinition)}));break;case"fixedTableColumnWidth":this.setFixedTableColumnWidth(t);break;case"tableWidth":this.delegateToGanttView((function(e){e._setTableWidth()}));break;default:this._super(e,t,i,a)}},setFixedTableColumnWidth:function(e){this._tableDefinition.fixedColumnsSucceeding&&this._tableDefinition.fixedColumnsSucceeding.cellDefinitions[0]&&(this._tableDefinition.fixedColumnsSucceeding.cellDefinitions[0].width=e),this.delegateToGanttView((function(t){var i=t.ganttWidget().option("tableDefinition");i&&(i.fixedColumnsSucceeding&&i.fixedColumnsSucceeding.cellDefinitions[0]&&(i.fixedColumnsSucceeding.cellDefinitions[0].width=e),t.ganttWidget().option("tableDefinition",i))}))},_invalidateRow:function(e,t,i){this.ganttView()?.invalidateRow(e,t,i)},invalidateLink:function(e){this.ganttView()?.ganttWidget().invalidateLink(e)},_addOrRemoveCurveCollapsingColumnInTableDefinition:function(e,t){t?e.fixedColumnsSucceeding={cellDefinitions:[{className:"",width:this.getAPIOption("fixedTableColumnWidth"),contentsFunc:this._tableCellFillFunc.bind(this),titleText:"",horizontalTextAlignment:l.Left,clippingEnabled:!1}]}:delete e.fixedColumnsSucceeding},_tableRowFillFunc:function(e){this.delegateToGanttView((function(t){return t._tableRowFillFunc.call(t,e)}))},_tableCellFillFunc:function(e){this.delegateToGanttView((function(t){return t._tableCellFillFunc.call(t,e)}))},__rawGetWidget:function(e){return e?.ganttWidget()},addActivity:function(){},updateActivity:function(){},removeActivity:function(){},addAllocation:function(){},updateAllocation:function(){},removeAllocation:function(){},__addAllocation:function(e){var t=this.addChild(e);if(t)return t.rab_itemType===d.AllocationRow&&this.registerRowItem(t.rab_parentRowItem,!0,!0),this.getAPIOptionMapped("linksVisible")&&this._invalidateLinkItemsRelatedToAllocation(e),t},__updateAllocation:function(e,t){switch(t){case"after":case void 0:this._updateRowObject(e)}},__removeAllocation:function(e,t){if(this.removeChild(e,t),this.getAPIOptionMapped("linksVisible")&&this._invalidateLinkItemsRelatedToAllocation(e),t){var i=this._item(e);i&&delete i.timeItems}},addResource:function(e){var t=this._viewType;if(t===c.Resources||t===c.Loads){var i=this.addChild(e);return this._expandOrCollapseRowByCollapseState(e),t===c.Resources&&this._expandOrCollapseCurvesInRowByCollapseState(e),i}},updateResource:function(e,t){switch(t){case"after":case void 0:var i=this._viewType;i!==c.Resources&&i!==c.Loads||(this.__relationshipChanged=0,this._updateRowObject(e),this.__relationshipChanged>0&&this.getHierarchySupplementaryDefinitionID()&&this._removeUnnecessaryPseudoGroups(g,"removeResources",i),this._expandOrCollapseRowByCollapseState(e),i===c.Resources&&this._expandOrCollapseCurvesInRowByCollapseState(e),this._checkDescendantObjectsForClassification(e),delete this.__relationshipChanged)}},removeResource:function(e,t){var i=this._viewType;if(i===c.Resources||i===c.Loads){if(t){var a=this.resourceItem(e);a&&(delete a.childRowItems,delete a.detailingRowItems)}this.removeChild(e,t),t||this._checkChildItemsArraysInAncestors(),delete this._temporaryAncestorItemsByRowID}},addCalendar:function(e){this._updateRowObjectsByCalendar(e)},updateCalendar:function(e){this._updateRowObjectsByCalendar(e)},removeCalendar:function(e){this._updateRowObjectsByCalendar(e,!0)},_updateRowObjectsByCalendar:function(e,t){var i;t&&((i={}).ignoreCalendar=t),this._updateRowObjectsByCalendarOrCalendarGrid(e,i)},_updateRowObjectsByCalendarOrCalendarGrid:function(e,t){var i=this,a=this._viewType;if(a!==c.Activities||i.getAPIOption("activityCalendarsEnabled")){var n=a===c.Activities?_:g;this.updateRowObjectsByWrapperWithCache(e,n,(function(e){e.updateFromReference(t),i.registerRowItem(e,!1,!0)}))}a===c.Activities&&(i.setAPIOption("triggerCalendarOrCalendarGrid",e),i.setAPIOption("triggerCalendarOrCalendarGrid",null))},updateRowObjectsByWrapperWithCache:function(e,t,i){var a=this,n=this.model().getRelatedObjects(t,e.getPropertyName(),"*",e.getPrimaryKey());n&&n.forEach((function(e){var t=a._item(e);t&&o.each(t,i)}))},addCurve:function(e){this.updateRowObjectsByCurve(e)},updateCurve:function(e){this.updateRowObjectsByCurve(e)},removeCurve:function(e){this.updateRowObjectsByCurve(e)},updateRowObjectsByCurve:function(e){var t=this,i=this._viewType;if(i!==c.Activities||this.getAPIOption("curvePanesVisibleInActivitiesView")){var a=i===c.Activities,n=this.model().getRelatedObjectsWithIndirection(g,m,e);n&&n.forEach((function(e){e.curvesChanged();var i=void 0;if(a){var n=t._activityByResource(e);n&&(i=t.activityItem(n))}else i=t.resourceItem(e);i&&o.each(i,(function(e){t.registerRowItem(e,!1,!1)}))}))}},addLink:function(e){return this.addChild(e)},updateLink:function(e){this.updateChild(e)},removeLink:function(e){this.removeChild(e)},addPeriodHighlighter:function(e){this._updateRowObjectsByPeriodHighlighter(e)},updatePeriodHighlighter:function(e){this._updateRowObjectsByPeriodHighlighter(e)},removePeriodHighlighter:function(e){this._updateRowObjectsByPeriodHighlighter(e,!0)},_updateRowObjectsByPeriodHighlighter:function(e,t){var i;t&&((i={}).ignorePeriodHighlighter=t),this._updateRowObjectsByCalendarOrCalendarGrid(e,i)},addSkill:function(){},updateSkill:function(){},removeSkill:function(){},addMultipliedSkill:function(){},updateMultipliedSkill:function(){},removeMultipliedSkill:function(){},addSkilledResource:function(){},updateSkilledResource:function(){},removeSkilledResource:function(){},addSkilledAllocation:function(){},updateSkilledAllocation:function(){},removeSkilledAllocation:function(){},addMultipliedResourceByActivity:function(){},updateMultipliedResourceByActivity:function(){},removeMultipliedResourceByActivity:function(){},addMultipliedAllocationByActivity:function(){},updateMultipliedAllocationByActivity:function(){},removeMultipliedAllocationByActivity:function(){},getAPIOptionName:function(){return null},__iterateMultiplierPrimaryKeys:function(e,t,i){if(e&&Array.isArray(e))for(var a=[...new Set(e)],n=0;n<a.length;n++)t.__MultiplierPrimaryKey=a[n],i.call(this,t),delete t.__MultiplierPrimaryKey},__addMultipliedWrapper:function(e,t,i,a,n){var o=this.app(),r=this.model();this.__iterateMultiplierPrimaryKeys(e,t,(function(e){n&&r.getChildByData(i,e)||(e.addMultiplierPrimaryKey(i,e.__MultiplierPrimaryKey),o._addObject(e,i,a))}))},__updateMultipliedWrapper:function(e,t,i,a,n,o,l){var s=this.app(),d=this.model(),c=t.getMultiplierPrimaryKeys(i),u=e,p=[...new Set([...c||[],...u||[]])];p.length>0&&this.__iterateMultiplierPrimaryKeys(p,t,(function(e){var t=e.__MultiplierPrimaryKey;if(l&&(l.__MultiplierPrimaryKey=t),c?.has(t))if(u?.includes(t))if(l){let t=r.getPrimaryKeyByPrimaryKeyNames(e,h[i]),n=d.getChildByPrimaryKey(i,t);n&&n.store(l),s._removeObject(t,i,0,o),s._addObject(e,i,a)}else s._updateObject(e,i,n);else{let a=r.getPrimaryKeyByPrimaryKeyNames(e,h[i]);if(l){let e=d.getChildByPrimaryKey(i,a);e&&e.store(l)}e.removeMultiplierPrimaryKey(i,t),s._removeObject(a,i,0,o)}else u&&u.includes(t)&&(e.addMultiplierPrimaryKey(i,t),s._addObject(e,i,a))}))},__removeMultipliedWrapper:function(e,t,i,a,n,o){var l=this.app(),s=this.model();this.__iterateMultiplierPrimaryKeys(e,t,(function(e){if(!o||s.getChildByData(i,e)){e.removeMultiplierPrimaryKey(i,e.__MultiplierPrimaryKey);var t=r.getPrimaryKeyByPrimaryKeyNames(e,h[i]);l._removeObject(t,i,0,a,n)}}))}};e.exports=n.extendClass("rabViewModel",f,y)},371:(e,t,i)=>{var a=i(3571),n=a.nClass,o=a.nClassFactory,r=a.nDefaultSeparator,l=a.nFunctionDispatcher,s=a.nPrimaryKeyManager,d=a.nPropertyComposer,c=a.nSubsequentIDGenerator,u=i(5674),p=u.DisplayedElements,h=u.HorizontalAlignment,g=i(476),m=g.BarSortMode,_=g.ItemType,f=g.ViewType,y=g.TableCellType,b=g.RowSortMode,A=i(5977),v=A.PrimaryKeyInfos,I=A.RAB_ACTIVITIES_PROP_NAME,C=A.RAB_ACTIVITY_ENTRIES_PROP_NAME,w=A.RAB_ALLOCATIONS_PROP_NAME,T=A.RAB_ALLOCATION_ENTRIES_PROP_NAME,R=A.RAB_ENTITIES_PROP_NAME,S=A.RAB_LINKS_PROP_NAME,P=A.RAB_MULTIPLIED_SKILLS_PROP_NAME,O=A.RAB_MULTIPLIED_ALLOCATIONS_BY_ACTIVITIES_PROP_NAME,D=A.RAB_MULTIPLIED_RESOURCES_BY_ACTIVITIES_PROP_NAME,E=A.RAB_RESOURCES_PROP_NAME,M=A.RAB_ROOT_PROP_NAME,B=A.RAB_SKILLS_PROP_NAME,k=A.RAB_SKILLED_RESOURCES_PROP_NAME,V=A.RAB_SKILLED_ALLOCATIONS_PROP_NAME,N=A.RowCategory,F=i(6616),L=i(3688),W=i(4781),x=i(1386),j=i(6621),H=i(3375),G=i(7450),K=i(214),U=i(9721),z=i(9872),Y=i(7437),X=i(4144),$=i(4613),q=i(6652),Q=i(9276),Z={[I]:N.ChildRow,[w]:N.LeafRow,[R]:N.ChildRow,[E]:N.ChildRow,[k]:N.ChildRow,[D]:N.LeafGroupRow,[V]:N.LeafRow,[O]:N.LeafRow,[B]:N.SubRootRow,[P]:N.SubRootRow},J={construct:function(e,t,i,a){this._app=e,this._model=t,this._viewType=i,this._ganttViewPE=null,this._initOptions(a),this._refreshLinksEnabled=!0,this._linksDirty=void 0,this._verticalScrollOffset=void 0,this._topVerticalScrollOffset=void 0,this._visibleStartRowItem=void 0,this._topVisibleStartRowItem=void 0,this._checkPlacementOfChildItemsSuppressedCounts=this.__createCategorizedObject(0),this._nextAutoRowInvalidationID=0,this._rowItemsRoot=void 0,this._dataDescriptors=void 0,this.__dataReady=!1,this.__CategorizedParams={},this.__CategorizedParams.ChildrenName=this.__createCategorizedObject(null),this.__CategorizedParams.RowSortCodePropertyNameAPIOptionName=this.__createCategorizedObject(null),this.__CategorizedParams.RowSortModeAPIOptionName=this.__createCategorizedObject(null),this.__CategorizedParams.RowCompareFuncAPIOptionName=this.__createCategorizedObject(null),this.__CategorizedParams.RowItemsType=this.__createCategorizedObject(null),this.__CategorizedParams.AddFuncName=this.__createCategorizedObject(null),this.__CategorizedParams.UpdateFuncName=this.__createCategorizedObject(null),this.__CategorizedParams.RemoveFuncName=this.__createCategorizedObject(null),this.__TableType=null,this.__barsGeneratedByChildRowObjectData=!1,this._uniqueID=c.generate()},__createCategorizedObject:function(e){var t={};return Object.keys(N).forEach((i=>{t[N[i]]=e})),t},_defineCategorizedParams:function(){var e=this;this._specifyCategorizedParams(),Object.keys(N).forEach((function(t){var i=N[t],a=e.__CategorizedParams.ChildrenName[i];a&&(e.__CategorizedParams.RowCompareFuncAPIOptionName[i]="compare"+a,e.__CategorizedParams.AddFuncName[i]="add"+a,e.__CategorizedParams.UpdateFuncName[i]="update"+a,e.__CategorizedParams.RemoveFuncName[i]="remove"+a)}))},_specifyCategorizedParams:function(){},_registerAPIOptions:function(){var e=[[],[],[]];this._collectAPIOptions(e);for(var t=["handleAPIOptionChanged","handleAPIOptionChanged","handleAPIOptionChanged"],i=0;i<=2;i++)if(e[i].length>0){var a=this[t[i]].bind(this);e[i].flat().forEach((e=>this.setAPIOptionChangedCallback(e,i,a)))}},_collectAPIOptions:function(e){e[1].push(["compareObjects","visibilityFilter","allocationRowSortingByStartAndEnd"])},exchangeFlag:(e,t,i)=>e&t?e&~t|i:e,modifyDisplayedElementsForRowItemType:function(e,t){return this._doModifyDisplayedElementsForRowItemType(e,t?t&~(p.BarsInOwnHiddenLeafRows|p.BarsInLeafRowsInHiddenDescendantRows):t)},_doModifyDisplayedElementsForRowItemType:function(e,t){return t&&e===_.AllocationRow?t&~p.BarsInHiddenDescendantRows:t},setVerticalScrollOffset:function(e){this._verticalScrollOffset=e},setTopVerticalScrollOffset:function(e){this._topVerticalScrollOffset=e},setVisibleStartRowItem:function(e){this._visibleStartRowItem=e},setTopVisibleStartRowItem:function(e){this._topVisibleStartRowItem=e},getVerticalScrollOffset:function(){return this._verticalScrollOffset},getTopVerticalScrollOffset:function(){return this._topVerticalScrollOffset},getVisibleStartRowItem:function(){return this._visibleStartRowItem},getTopVisibleStartRowItem:function(){return this._topVisibleStartRowItem},destroy:function(){this._ganttViewPE=null},attachView:function(e){this._ganttViewPE||(this._ganttViewPE=e,this.init())},detachView:function(){this._ganttViewPE&&(this._ganttViewPE=null)},delegateToGanttView:function(e){this._ganttViewPE&&e.call(this,this._ganttViewPE)},ganttView:function(){return this._ganttViewPE},setAPIOption:function(e,t){this.app().setAPIOption(e,t)},getAPIOption:function(e){return this.app().getAPIOption(e)},getAPIOptionMapped:function(e){return this.getAPIOption(this.getAPIOptionName(e))},setAPIOptionChangedCallback:function(e,t,i){this.app().setAPIOptionChangedCallback(e,t,i)},handleAPIOptionChanged:function(e,t,i,a){this.isHierarchyInitialized()&&this._handleAPIOptionChanged(e,t,i,a)},_handleAPIOptionChanged:function(e,t){switch(e){case"compareObjects":this._initializeAllCompareObjects();break;case"visibilityFilter":this.determineVisibilityOfAllObjects(!0);break;default:this.setOption(e,t)}},_setTableDefinitionsImageURLs:function(e,t){var i=!1;return e&&(e.symbolColumnTitleImageURLs=t,e.symbolColumnTitleVisible&&(i=!0)),i},_updateGrouping:function(e,t){this.__inUpdateGrouping=!0;var i=this.viewType();this._model.getChildrenArray(e).forEach((function(e){!0===e.isPredefinedPseudoForViewType(i)&&(e.data().__STATE="REMOVE")})),this._items(e).forEach((function(e){if(!0!==e.isPseudo()){e.updateFromReference();var t=e.getNonPseudoParentItem();e.recalculateParentItemForGrouping(t)}})),this._removeUnnecessaryPseudoGroups(e,t,i),this.__inUpdateGrouping=!1},_removeUnnecessaryPseudoGroups:function(e,t,i){var a=this,n=[];this._model.getChildrenArray(e).forEach((function(e){!0===a.isUnnecessaryPseudoGroup(e,i)&&n.push(e.data())})),this.app()[t](n)},isUnnecessaryPseudoGroup:function(e,t){if(!0===e.isPseudoForViewType(t)){var i=this._item(e);if(!i)return!0;var a=e.data();if(a.__PARENTLEVEL!==i.getHierarchyLevel())return!0;var n=i.getSimilarChildItems();if(!n||!n.length)return!0!==a.__PREDEFINED||"REMOVE"===a.__STATE;for(var o=0;o<n.length;o++)if(!0!==this.isUnnecessaryPseudoGroup(n[o].data(),t))return!1;return!0}return!1},_initOptions:function(e){var t={resourceRowItemClass:Y,multipliedResourceRowItemClass:z,skillRowItemClass:q,activityRowItemClass:F,activityFrameTimeItemClass:L,activityTimeItemClass:W,activityReleaseDateTimeItemClass:W,activityDueDateTimeItemClass:W,activityBaselineTimeItemClass:W,activityEntryTimeItemClass:x,allocationRowItemClass:j,allocationTimeItemClass:H,allocationEntryTimeItemClass:G,linkItemClass:U,entityRowItemClass:K,compareRowItemsFuncForAllocations:null,compareRowItemsFuncForActivities:null,compareRowItemsFuncForResources:null,compareRowItemsFuncForSkills:null,compareRowItemsFuncForEntities:null,determineGroupingCodeFunc:null};this._options=Object.assign({},t,e)},setOption:function(e,t){if(e in this._options&&(this._options[e]=t,t&&this._dataDescriptors)){const t={compareRowItemsFuncForAllocations:w,compareRowItemsFuncForActivities:I,compareRowItemsFuncForResources:E,compareRowItemsFuncForSkills:B,compareRowItemsFuncForEntities:R}[e];t&&this._checkPlacementOfAllRowItemsInView(!0,t)}},getOption:function(e){return this._options[e]},checkPlacementOfChildItemsSuppressed:function(e,t){var i=this,a=Z[t];e?++i._checkPlacementOfChildItemsSuppressedCounts[a]:i._checkPlacementOfChildItemsSuppressedCounts[a]&&--i._checkPlacementOfChildItemsSuppressedCounts[a]||i._checkPlacementOfAllRowItemsInView(!0,t)},app:function(){return this._app},model:function(){return this._model},rowItemsRoot:function(){return this._rowItemsRoot},init:function(){this._dataDescriptors||(this._defineCategorizedParams(),this._registerAPIOptions(),this._initTableDefinition(),this._initDataDefinition(),this._initializeAllCompareObjects(),this._createViewItems())},viewType:function(){return this._viewType},isHierarchyInitialized:function(){return this.__dataReady},reloadOrUnloadRelatedItems:function(e,t,i){var a=this,n=i.comingFrom;if(this.isHierarchyInitialized()&&(!this._isRemovingAllObjectsOfList||!this._isRemovingAllObjectsOfList.includes(n))&&!this.__inUpdateGrouping)if(2===e){let e=[];t.childRowItems&&(e=e.concat(t.childRowItems.slice())),t.detailingRowItems&&(e=e.concat(t.detailingRowItems.slice())),e&&e.length>0&&e.forEach((function(e){a.removeChild(e.data())}))}else{let e=this.model().getRelatedObjects(n,t.getPropertyName(),"*",t.getPrimaryKey());e&&e.forEach((function(e){let t=a._item(e);t||(t=a.addChild(e))}))}},_initDataDefinition:function(){},hasObjects:function(e){return this._dataDescriptors&&this._dataDescriptors[e]},getSourceValueForGroupingCodeSource:function(e,t,i,a,n,o,r){let l=this.getOption("determineGroupingCodeFunc");if(l){var s={};return s.objectType=e,s.object=t,s.hierarchySupplementaryDefinitionID=a.ID,s.hierarchySupplementaryLevelDefinitionIndex=n,s.groupingLevelDefinition=i.data(),s.groupingLevelDefinitionIndex=o,s.code=t[i.GroupingCodeSource],l.call(this,s),r.text=s.text,s.code}return t[i.GroupingCodeSource]},getHierarchySupplementaryDefinitionID:function(){},_getAdditionallyUpdateChildTimeItemsFlag:function(){return!1},_saveAncestorItems:function(e){var t=this;t._temporaryAncestorItemsByRowID||(t._temporaryAncestorItemsByRowID={});for(var i=t._temporaryAncestorItemsByRowID[(e.Role||"")+r+e.ID]=[],a=e.rab_parentRowItem;a;a=a.rab_parentRowItem)i.push(a)},_checkChildItemsArraysInAncestors:function(){if(this._temporaryAncestorItemsByRowID){var e={};Object.values(this._temporaryAncestorItemsByRowID).forEach((t=>{for(var i;i=t.pop();){var a=(i.Role||"")+r+i.ID;if(!e[a]){e[a]=!0;let t=i.data();t&&["childRowItems","detailingRowItems"].forEach((function(e){!i[e]||i[e].length||i._hasSubRows?.(t,e)||delete i[e]}))}}}))}},_getCompareRowItemsFuncOptionName:function(e){return`compareRowItemsFuncFor${{[k]:E,[D]:E,[V]:w,[O]:w,[P]:B}[e]??e}`},_getRowSortCodePropertyNameAPIOptionName:function(e){return this.__CategorizedParams.RowSortCodePropertyNameAPIOptionName[Z[e]]},_getRowSortModeAPIOptionName:function(e){return this.__CategorizedParams.RowSortModeAPIOptionName[Z[e]]},_getCompareObjectsForSingleTypeFuncAPIOptionName:function(e){return this.__CategorizedParams.RowCompareFuncAPIOptionName[Z[e]]},_getCompareRowItemsFunc:function(e){return this.getOption(this._getCompareRowItemsFuncOptionName(e))},_getCompareRowItemsFuncWithCount:function(e,t){if(!this._checkPlacementOfChildItemsSuppressedCounts[t])return this._getCompareRowItemsFunc(e)},_checkPlacementInChildItemsOfParent:function(e){var t=this;let i=e.getPropertyName();var a=Z[i];let n=t._getCompareRowItemsFuncWithCount(i,a);if(n){let i=!(g=e.rab_parentRowItem).rab_parentRowItem,a=e.atTheTop;var o=g[g.getChildItemsPropNameInParent()],l=o?o.indexOf(e):-1;l<0&&(l=(o=g.detailingRowItems).indexOf(e)),o.splice(l,1),l-=.5;for(var s=0,d=o.length-1,c={itemB:e,viewType:t.viewType()};s<=d;){var u=(s+d)/2|0;c.itemA=o[u],c.isALowerThanB=u<l,i&&a!==c.itemA.atTheTop?c.isALowerThanB=!a:e.isPseudo()!==c.itemA.isPseudo()?c.isALowerThanB=!e.isPseudo():n.call(this,c),null==c.isALowerThanB&&(c.isALowerThanB=u<l),c.isALowerThanB?s=u+1:d=u-1}var p=Math.max(s,d);o.splice(p,0,e)}else if(t._temporaryAncestorItemsByRowID){var h=t._temporaryAncestorItemsByRowID[(e.Role||"")+r+e.ID];if(h){var g=e.rab_parentRowItem;h.every((function(t,i){if(t===g){var a=g[g.getChildItemsPropNameInParent()],n=a?a.indexOf(e):-1;n<0&&(n=(a=g.detailingRowItems).indexOf(e));var o=a.indexOf(h[i+1]);return o>=0&&(a.splice(n,1),a.splice(o+1,0,e)),!1}return!0}))}}},_checkPlacementOfAllRowItemsInView:function(e,t,i){var a=this;if(a._rowItemsRoot){let n={},o=a.__CategorizedParams.ChildrenName[N.ChildRow];if(t&&o!==t||(n[a.__CategorizedParams.RowItemsType[N.ChildRow]]=a._getCompareRowItemsFuncWithCount(o,N.ChildRow)),o=a.__CategorizedParams.ChildrenName[N.SubRootRow],!o||t&&o!==t||(n[a.__CategorizedParams.RowItemsType[N.SubRootRow]]=a._getCompareRowItemsFuncWithCount(o,N.SubRootRow)),o=a.__CategorizedParams.ChildrenName[N.LeafGroupRow],!o||t&&o!==t||(n[a.__CategorizedParams.RowItemsType[N.LeafGroupRow]]=a._getCompareRowItemsFuncWithCount(o,N.LeafGroupRow)),o=a.__CategorizedParams.ChildrenName[N.LeafRow],!o||t&&o!==t||(n[a.__CategorizedParams.RowItemsType[N.LeafRow]]=a._getCompareRowItemsFuncWithCount(o,N.LeafRow)),Object.values(n).some((e=>e))){let t=a.viewType(),o=i??a._rowItemsRoot,r=!o.rab_parentRowItem,l=[];do{["childRowItems","detailingRowItems"].forEach((function(e){var i=o[e];let s=i?.length;if(s){if(s>1){let e=n[i[0].rab_itemType];e&&i.sort((function(n,o){if(n===o)return 0;if(r){let e=n.atTheTop;if(e!==o.atTheTop)return e?-1:1}var l={itemA:n,itemB:o,viewType:t,isALowerThanB:i.indexOf(n)<i.indexOf(o)};return e.call(a,l),l.isALowerThanB?-1:1}))}l.push(...i),r=!1}}))}while(o=l.pop());e&&(a.registerRowItem(a._rowItemsRoot,!1,!0),a.autoInvalidateRows())}}},_createViewItems:function(){if(this._dataDescriptors&&!1===this.__dataReady){let e,t=this.__CategorizedParams.ChildrenName;Object.keys(t).forEach((e=>{let i=t[e];if(i){this.getOption(this._getCompareRowItemsFuncOptionName(i))&&++this._checkPlacementOfChildItemsSuppressedCounts[e]}})),this._rowItemsRoot=new X(this,this._model),this._rowItemsRoot.initHierarchy(this._model,this._dataDescriptors[M]),this.__dataReady=!0,this.enableRegisterRowItems(!0),Object.keys(t).forEach((i=>{let a=t[i];if(a){this.getOption(this._getCompareRowItemsFuncOptionName(a))&&!--this._checkPlacementOfChildItemsSuppressedCounts[i]&&(e=!0)}})),e&&this._checkPlacementOfAllRowItemsInView(!1)}},resourceItem:function(e){return this._item(e)},resourceItems:function(){return this._items(E)},resourceByItem:function(e){return e.rab_itemType===_.Resource?e.data():e.rab_itemType===_.ActivityRow&&this.getAPIOption("curvePanesVisibleInActivitiesView")?this._resourceByActivity(e.data()):void 0},_resourceByActivity:function(e){return this._getCorrespondingWrapperViaAllocation(E,e)},_activityByResource:function(e){return this._getCorrespondingWrapperViaAllocation(I,e)},_getCorrespondingWrapperViaAllocation:function(e,t){var i=this.model(),a=i.getRelatedObjects(w,t.getPropertyName(),"*",t.getPrimaryKey());if(a&&a.length){var n=a[0].getRelationshipInfoTo(e);return Array.isArray(n)&&(n=n[0]),i.getRelatedWrapperByRelationshipInfo(a[0],n)}},activityItem:function(e){return this._item(e)},activityItems:function(){return this._items(I)},linkItem:function(e,t){if(this.getAPIOptionMapped("linksVisible")&&!t)return this._item(e)},linkItems:function(e){if(this.getAPIOptionMapped("linksVisible"))switch(this._viewType){case f.Activities:return this._items(S);case f.Resources:case f.SkilledResources:if(this.getAPIOptionMapped("definedAllocationLinksVisible"))return this._items(S);var t=this._items(S);if(e||!t)return t;var i=[];return t.forEach((function(e){e._linkItems&&(i=i.concat(e._linkItems))})),i}},refreshLinks:function(){if(!0===this._refreshLinksEnabled){var e=this.linkItems(!0);e&&e.length&&e.forEach((function(e){e.updateFromReference({linkItems:!0})}))}},allocationItem:function(e){return this._item(e)},allocationByItem:function(e){return e.rab_itemType===_.Allocation?e.data():e.rab_itemType===_.AllocationEntry?e.data().getHierarchyParent():void 0},allocationItems:function(){return this._items(w)},entityItem:function(e){return this._item(e)},entityItems:function(){return this._items(R)},_createItem:function(e,t,i,a){var n=this,o=this._viewType,r=null;switch(e){case _.Resource:break;case _.ActivityFrame:r=this._rowItemsRoot._createChildAtLast(this,i,t,null,n._options.activityFrameTimeItemClass);break;case _.Activity:r=this._rowItemsRoot._createChildAtLast(this,i,t,null,n._options.activityTimeItemClass,e);break;case _.ActivityDueDate:r=this._rowItemsRoot._createChildAtLast(this,i,t,null,n._options.activityDueDateTimeItemClass,e);break;case _.ActivityReleaseDate:r=this._rowItemsRoot._createChildAtLast(this,i,t,null,n._options.activityReleaseDateTimeItemClass,e);break;case _.ActivityBaseline:r=this._rowItemsRoot._createChildAtLast(this,i,t,null,n._options.activityBaselineTimeItemClass,e);break;case _.Link:o!==f.Resources&&f.SkilledResources,r=new n._options.linkItemClass(this,i,void 0,void 0);break;case _.Allocation:r=this._rowItemsRoot._createChildAtLast(this,i,t,null,n._options.allocationTimeItemClass)}return r&&a&&Object.assign(r,a),r},_updateRowObject:function(e){var t=this,i=t._item(e),a=!i;if(i||(t.updateChild(e),i=t._item(e)),i){var n=t.getWidget();let l=e.getPropertyName(),s=l===w;var o=i.atTheTop;let d=function(){var o=Z[l],r=t._getCompareRowItemsFunc(l);if(r&&++t._checkPlacementOfChildItemsSuppressedCounts[o],!a){let a=i;var d=a.calendar,c=a.dateAreas;t.updateChild(e),(i=t._item(e))&&(n&&(i!==a||r?t.registerRowItem(i.rab_parentRowItem,!1,!s):i.calendar===d&&i.dateAreas===c||t.registerRowItem(i,!1,!s)),i.rab_itemType!==_.Resource||i.calendar===d&&i.dateAreas===c||(t.setAPIOption("triggerResource",e),t.setAPIOption("triggerResource",null)))}return r&&!--t._checkPlacementOfChildItemsSuppressedCounts[o]&&i&&t._checkPlacementInChildItemsOfParent(i),i??null};n?n.invalidateRowsForTreeViewUpdate(i,d):d(),t._checkChildItemsArraysInAncestors();var r=!s&&t._invalidateRelatedChildRows(e);!i||s||r||i.rab_parentRowItem.rab_parentRowItem||o===i.atTheTop||t.registerRowItem(i,!1,!0)}delete t._temporaryAncestorItemsByRowID},addHierarchySupplementaryDefinition:function(e){this.updateHierarchyByHierarchySupplementaryDefinition(e)},updateHierarchySupplementaryDefinition:function(e){this.updateHierarchyByHierarchySupplementaryDefinition(e)},removeHierarchySupplementaryDefinition:function(e){this.updateHierarchyByHierarchySupplementaryDefinition(e)},updateHierarchyByHierarchySupplementaryDefinition:function(){},addObject:function(e){return this.addChild(e)},updateObject:function(e,t){this.__relationshipChanged=0,this._updateRowObject(e),this.__relationshipChanged>0&&this.getHierarchySupplementaryDefinitionID()&&this._removeUnnecessaryPseudoGroups(t,"removeResources",this.viewType()),delete this.__relationshipChanged},removeWrapper:function(e,t){if(t){var i=this._item(e);i&&(delete i.childRowItems,delete i.detailingRowItems)}this.removeChild(e,t),t||this._checkChildItemsArraysInAncestors(),delete this._temporaryAncestorItemsByRowID},addChild:function(e){let t=e.getPropertyName();if(this.hasObjects(t))return this._rowItemsRoot?.addOrRemoveChildWithParentSearch(1,t,e)},updateChild:function(e){let t=e.getPropertyName();if(this.hasObjects(t)){var i=this._rowItemsRoot;if(i){var a=this._item(e);if(a)if(Array.isArray(a))a.slice().forEach((function(t){i.updateChild(t,e)}));else i.updateChild(a,e);else this.addChild(e)}}},removeChild:function(e,t){let i=e.getPropertyName();if(this.hasObjects(i)){var a=this._rowItemsRoot;if(a){var n=this._item(e);if(n){if(t&&(this._isRemovingAllObjectsOfList=[i],i==E?this._isRemovingAllObjectsOfList.push(w,T):i==I?this._isRemovingAllObjectsOfList.push(w,C):i===w&&this._isRemovingAllObjectsOfList.push(T)),Array.isArray(n))n.slice().forEach((function(e){a.addOrRemoveChildWithParentSearch(2,i,e)}));else a.addOrRemoveChildWithParentSearch(2,i,n);t&&delete this._isRemovingAllObjectsOfList}}}},beforeRemoveAll:function(){if(this._rowItemsRoot){var e=this._dataDescriptors;this.delegateToGanttView((function(e){e._beforeRemoveAll()})),this.enableRegisterRowItems(!1),this._rowItemsRoot.initHierarchy(null,e[M])}},afterRemoveAll:function(){this._rowItemsRoot&&(this.__dataReady=!0,this.enableRegisterRowItems(!0),this.getWidget()?.option("rowItemsRoot",this.rowItemsRoot()))},_getAllocationRowsCollapseStateForRowItem:function(e){return e.data().AllocationRowsCollapseState},registerRowItem:function(e,t,i){if(e&&this.isRegisterRowItemsEnabled()){if(!(e instanceof $))return;if(e instanceof j){t=!0;let a=e.rab_parentRowItem;if(!a||!a.data())return;this.getAPIOptionMapped("allocationRowsVisible")&&!this._getAllocationRowsCollapseStateForRowItem(a)||(e=a,i=!0)}if(this._registeredRowItemsMap||(this._registeredRowItemsMap=new Map),e===this._rowItemsRoot)this._registeredRowItemsMap.clear(),this._registeredRowItemsMap.set("root",!0);else if(!this._registeredRowItemsMap.has("root")){void 0===e.rab_autoInvalidationID&&(e.rab_autoInvalidationID=this._nextAutoRowInvalidationID++);var a=this._registeredRowItemsMap.get(e.rab_autoInvalidationID);a?(a.barsChanged|=t,a.childRowsChanged|=i):this._registeredRowItemsMap.set(e.rab_autoInvalidationID,{rowItem:e,barsChanged:t,childRowsChanged:i})}}},invalidateAllRowsIfEmpty:function(){var e=this._rowItemsRoot;!e||e.childRowItems&&e.childRowItems.length||this.registerRowItem(e,!1,!0)},getWidget:function(e){let t=this.__rawGetWidget(this.ganttView());return!t&&!0===e&&this.isHierarchyInitialized()&&(t=this.__rawGetWidget(this.app().view().ganttView())),t},__rawGetWidget:function(){},autoInvalidateRows:function(){var e=this;if(e.ganttView()){var t=e._viewType;if(e.isRegisterRowItemsEnabled()&&e._registeredRowItemsMap){var i;if(t!==f._Entities&&(i=e.getWidget().selectedTimeItems()),e._registeredRowItemsMap?.size){var a=e.getWidget(),n=a?.options.rowItemsRoot;if(n)if(e._registeredRowItemsMap.has("root"))e._invalidateRow(n,!0,!0);else{var o;do{o=!1;for(let t of e._registeredRowItemsMap.values()){let i=t.rowItem;if(!t.deleted&&!t.barsChanged){let a=i.getParentItem();if(a&&void 0!==a.rab_autoInvalidationID){var r=e._registeredRowItemsMap.get(a.rab_autoInvalidationID);r&&(r.childRowsChanged||r.deleted)&&(t.deleted=!0,r.barsChanged|=t.barsChanged,o=!0)}}}}while(o);for(let i of e._registeredRowItemsMap.values())if(!i.deleted){let n=i.rowItem,o=n.getParentItem();if(o){if(void 0===a.isRowHidden(n)){if(void 0===a.isRowHidden(o))return;n=o,i.childRowsChanged=!0,i.barsChanged=!1}if(t!==f._Entities){var l=i.barsChanged?a.getVisibleParent(n):n;e._invalidateRow(l,i.childRowsChanged||l!==n,i.barsChanged)}else e._invalidateRow(n,i.childRowsChanged)}}}delete e._registeredRowItemsMap}i&&i.length&&e.getWidget().selectedTimeItems(i)}}},clearRegisteredRowItems:function(){this.isRegisterRowItemsEnabled()&&(this.enableRegisterRowItems(!1),this.enableRegisterRowItems(!0))},enableRegisterRowItems:function(e){var t=this.isRegisterRowItemsEnabled();return this._registerRowItemsEnabled=e,!e&&this._registeredRowItemsMap&&delete this._registeredRowItemsMap,t},isRegisterRowItemsEnabled:function(){return this._registerRowItemsEnabled||!1},_findItemOfTypeInArray:function(e,t){if(e)return e.reduce((function(e,i){return!e&&i&&(i.rab_subItemType?i.rab_subItemType===t:i.rab_itemType===t)?i:e}),null)||void 0},itemByWrapper:function(e,t){return this._item(e,null,t)},itemByPrimaryKey:function(e,t,i){let a=this._rowItemsRoot;if(a&&e&&t){var n=a.getChildrenDepository(e);if(n)return n.getObjectByPrimaryKey(t,i)}},getItemInfoForItemType:function(){},buildItemInfo:function(e,t){if(e){var i={primaryKey:e};return t&&(i.wrapper=t,i.item=this._item(t)),i}},getSelectableItemByWrapper:function(e,t){var i=this.itemByWrapper(t);if(i)return i.getSelectableItem(e)},getPrimaryKeyByObjectDataOrID:function(e,t){return"string"==typeof e&&(e={ID:e}),s.getPrimaryKeyByPrimaryKeyNames(e,v[t])},_item:function(e,t,i){if(this._rowItemsRoot&&e){var a=e.getPropertyName(),n=e.detectExtendedPrimaryKey();return this.itemByPrimaryKey(a,n,i)}},_items:function(e){let t=this._rowItemsRoot;if(t&&e){var i=t.getChildrenDepository(e);if(i)return i.getArray()}},_innerItem:function(e,t){return a._innerObject(e,t)},getTopmostItem:function(e){var t=e.getParentItem();return t&&t.rab_itemType!==_.Root?this.getTopmostItem(t):e},__invalidateLinkItemsRelatedToActivityOrAllocation:function(e,t){var i,a=this,n=this.model().getRelatedObjects(S,e,"*",t);n&&n.forEach((function(e){i||(i=a._linksDirty)||(i=a._linksDirty={});var t=e.getPrimaryKey();i[t]||(i[t]=!0)}))},_invalidateLinkItemsRelatedToActivity:function(e){this._rowItemsRoot&&this.__invalidateLinkItemsRelatedToActivityOrAllocation(I,e.getPrimaryKey())},_invalidateLinkItemsRelatedToAllocation:function(e){var t=this._viewType;if(this._rowItemsRoot){var i,a;switch(t){case f.Activities:this.getAPIOption("definedAllocationLinksVisibleInActivitiesView")&&(i=d.compose(e,["Role","ID"]),a=w);break;case f.Resources:case f.SkilledResources:this.getAPIOptionMapped("definedAllocationLinksVisible")?(i=d.compose(e,["Role","ID"]),a=w):(i=d.compose(e,["ActivityRole","ActivityID"]),a=I)}i&&this.__invalidateLinkItemsRelatedToActivityOrAllocation(a,i)}},_invalidateRelatedChildRows:function(e){var t=this,i=t._item(e);if(i)return l.each(i,(function(e){if(e.needsChildRowItemsUpdate())return t.registerRowItem(e,!1,!0),!0}))},update:function(){var e=this;if(e.__dataReady){e._rowItemsRoot.clearRemovedItemsCache(e.getWidget()),e.autoInvalidateRows();var t=e._linksDirty;if(t){var i=e._rowItemsRoot.getChildrenDepository(S);i&&(Object.keys(t).forEach((function(e){var t=i.getObjectByPrimaryKey(e);t&&t.updateFromReference()})),e._linksDirty=void 0)}}},_invalidateRow:function(){},_initTableDefinition:function(){this._tableDefinition=void 0},_addOrRemoveSymbolColumnInTableDefinition:function(e,t,i){return!t&&e.fixedColumnsPreceding?(delete e.fixedColumnsPreceding,!0):!!t&&(e.fixedColumnsPreceding={cellDefinitions:[{className:"",width:i,contentsFunc:this._tableCellFillFunc.bind(this),titleText:"",horizontalTextAlignment:h.Left,type:y.ImageList}]},!0)},_addOrRemoveCurveCollapsingColumnInTableDefinition:function(e,t){t?e.fixedColumnsSucceeding={cellDefinitions:[{className:"",width:this.getAPIOption("fixedTableColumnWidth"),contentsFunc:this._tableCellFillFunc.bind(this),titleText:"",horizontalTextAlignment:h.Left,clippingEnabled:!1}]}:delete e.fixedColumnsSucceeding},setTableDefinitionIntoWidget:function(e){e.option("tableDefinition",this._tableDefinition),e.option("defaultTableRowDefinitionIDsByExternalTypeMap",{})},_setDefaultTableRowDefinitionIDForItemType:function(e,t){this.delegateToGanttView((function(i){let a=e===_.Entity?i.entitiesTableWidget():i.ganttWidget(),n="defaultTableRowDefinitionIDsByExternalTypeMap";a?.option(n,Object.assign(a?.option(n),{[e]:t}))}))},updateTableRowDefinitions:function(e,t){var i=this;!i._tableDefinition||!t&&i._tableDefinition.rowDefinitionsMap||(i._tableDefinition.rowDefinitionsMap=i._cloneTableRowDefinitionsMap(e))},updateTableTitleSortingParams:function(e){switch(this._rowSortParams||(this._rowSortParams={}),this._rowSortParams[e]=this.getRowSortParamsForCategory(e),e){case N.ChildRow:this._tableDefinition.rowSortPropertyName=this._rowSortParams[e].rowSortPropertyName,this._tableDefinition.rowSortMode=this._rowSortParams[e].rowSortMode;case N.LeafRow:}},getRowSortParamsForCategory:function(e){let t={};return this.__CategorizedParams.RowSortCodePropertyNameAPIOptionName[e]&&(t.rowSortPropertyName=this.getAPIOption(this.__CategorizedParams.RowSortCodePropertyNameAPIOptionName[e])),this.__CategorizedParams.RowSortModeAPIOptionName[e]&&(t.rowSortMode=this.getAPIOption(this.__CategorizedParams.RowSortModeAPIOptionName[e])),t},_cloneTableRowDefinitionsMap:function(e){var t=this,i={};return e&&Object.keys(e).forEach((function(a){var n=e[a],o=Object.assign({},n,{rab_viewType:t.viewType(),rab_tableRowDefinition:n,contentsFunc:function(){return n.contentsFunc.apply(this,arguments)}});o.cellDefinitions=[],n.cellDefinitions&&n.cellDefinitions.forEach((function(e){o.cellDefinitions.push(Object.assign({},e,{contentsFunc:function(e){return n.cellDefinitions[e.columnIndex].contentsFunc.apply(this,arguments)}}))})),i[a]=o})),i},_tableRowFillFunc:function(e){this.delegateToGanttView((function(t){return t._tableRowFillFunc.call(t,e)}))},_tableCellFillFunc:function(e){this.delegateToGanttView((function(t){return t._tableCellFillFunc.call(t,e)}))},_entitiesTableRowFillFunc:function(e){this.delegateToGanttView((function(t){return t._entitiesTableRowFillFunc.call(t,e)}))},_entitiesTableCellFillFunc:function(e){this.delegateToGanttView((function(t){return t._entitiesTableCellFillFunc.call(t,e)}))},getTableDefinition:function(){return this._tableDefinition},_initializeAllCompareObjects:function(){},_initializeCompareObjects:function(e){var t=this;let i=t._getCompareRowItemsFuncOptionName(e),a=t._getRowSortCodePropertyNameAPIOptionName(e),n=t.getAPIOption(a)||"SortCode",o="SortCode"===n?function(e,t){return e?.[n]??t[n]}:function(e,t,i){return e?.data()[n]??i[n]},l=t._getRowSortModeAPIOptionName(e),s=t.getAPIOption(l)||b.None,d=t._getCompareObjectsForSingleTypeFuncAPIOptionName(e),c=t.getAPIOption(d)?d:t.getAPIOption("compareObjects")?"compareObjects":void 0,u=t.model(),p=t.hasMultipliedObjects(),h=p&&[E,D,k].includes(e),g=[w,O,V].includes(e),f=p&&g,y=g||e===I,A=p&&(h||f||e===B),v=g&&s===b.None?u.getChildrenArray(e):void 0,C=c||s!==b.None||f?function(e){let i=e.itemA,a=e.itemB,n=i.data(),l=a.data(),d=A?n.data():n,p=A?l.data():l,m=h?`${n.__MultiplierPrimaryKey}${r}${r}`:void 0,I=m&&u.resourcePropertiesForSkillByID(`${m}${d.ID}`),C=m&&u.resourcePropertiesForSkillByID(`${m}${p.ID}`);var w=d.externalData(),T=p.externalData();if(f){let t=(n.isInOtherMultiplierSourceObject()?1:0)-(l.isInOtherMultiplierSourceObject()?1:0);if(t)return void(e.isALowerThanB=t<0)}if(s!==b.None)if(s===b.AscendingStartAndEnd){if(y){let n=g?i.timeItems?.[0]:t._findItemOfTypeInArray(i.timeItems?.[0]?.childTimeItems,_.Activity),o=g?a.timeItems?.[0]:t._findItemOfTypeInArray(a.timeItems?.[0]?.childTimeItems,_.Activity),r=n?.start<o?.start;r||(r=n?.start?.getTime()===o?.start?.getTime()&&n?.end<o?.end),e.isALowerThanB=r}}else{var R=o(I,d,w),S=o(C,p,T),P=null!=R,O=null!=S;(P||O)&&(e.isALowerThanB=P&&O?s===b.Ascending?R<S:R>S:O)}else if(c){let i={objectType:t.app().ganttView().getObjectTypeFromItem(e.itemA),viewType:e.viewType,isALowerThanB:e.isALowerThanB};e.itemA.isPseudo()?(i.hierarchySupplementaryDefinitionID=w.__HIERARCHYSUPPLEMENTARYDEFINITIONID,i.hierarchyLevelSupplementaryDefinitionIndex=w.__HIERARCHYLEVELSUPPLEMENTARYDEFINITIONINDEX,i.groupingLevelDefinitionIndex=w.__GROUPINGLEVELDEFINITIONINDEX,i.groupingCodeA=Object.values(w.__GROUPINGCODES)[0],i.groupingCodeB=Object.values(T.__GROUPINGCODES)[0],i.objectA=null,i.objectB=null):(i.objectA=w,i.objectB=T),n.extendCallbackArgsForMultiplierPrimaryKey(void 0,i),t.app().getOption("widget")?._callCompareObjects(c,i),e.isALowerThanB=i.isALowerThanB}else{let t=v.indexOf(n),i=v.indexOf(l);e.isALowerThanB=t<i}}:void 0;if(!C||y&&t._currentRowSortModes?.[e]===b.AscendingStartAndEnd&&s!==t._currentRowSortModes[e]){if(t.getOption(i)){let a=u.getChildrenArray(e),n=function(e){let t=e.itemA.data(),i=e.itemB.data();if(f){let a=(t.isInOtherMultiplierSourceObject()?1:0)-(i.isInOtherMultiplierSourceObject()?1:0);if(a)return void(e.isALowerThanB=a<0)}A&&(t=t.data(),i=i.data());let n=a.indexOf(t),o=a.indexOf(i);e.isALowerThanB=n<o};t.setOption(i,n,void 0)}}y&&(t._currentRowSortModes||(t._currentRowSortModes={}),t._currentRowSortModes[e]=s),t.setOption(i,C,void 0),t.getWidget()?.updateTableTitle();let T=t.getAPIOption("compareObjects")?t.getAPIOption("barSortModeForOptimizedRowDesign"):m.StartAndEnd;t.getWidget()?.option("barSortModeForOptimizedDisplayedElements",T)},_expandOrCollapseRowByCollapseState:function(e){var t=this._item(e);t&&this._expandOrCollapseRowByCollapseStateForRowItem(t)},_expandOrCollapseRowByCollapseStateForRowItem:function(e){var t=e.getCollapseState();if(t>=0&&this.__expandOrCollapseRowByCollapseState(e,t,"childRowItems"),[_.Resource,_.ActivityRow].includes(e.rab_itemType)){var i=e.getAllocationRowsCollapseState();i>=0&&this.__expandOrCollapseRowByCollapseState(e,i,"detailingRowItems",!0)}},__expandOrCollapseRowByCollapseState:function(e,t,i,a){if(Array.isArray(e[i])){let i=this.getWidget(!0);i?t?i.collapseRow(e,!0,a):i.expandRow(e,!0,a):a?e.leavesInitiallyCollapsed=!!t:e.initiallyCollapsed=!!t}},_expandOrCollapseCurvesInRowByCollapseState:function(e){var t=this._item(e);t&&this._expandOrCollapseCurvesInRowByCollapseStateForRowItem(t)},_expandOrCollapseCurvesInRowByCollapseStateForRowItem:function(e){var t=e.getCurveCollapseState();if(t>=0){var i=!t;e.rab_curvePanesVisible!==i&&this._expandOrCollapseCurvesInRowAtLast(e,i)}},_expandOrCollapseCurvesInRowAtLast:function(e,t){var i=this,a=i.getWidget(!0).isRowVirtualized(e);e.rab_curvePanesVisible=t,(i.viewType()!==f.Activities||i.getAPIOption("curvePanesVisibleInActivitiesView"))&&i.app().view().ganttView().updateRowHeight(e),e.rab_curvePanesVisibleChanged=!a},_checkDescendantObjectsForClassification:function(e){if(this.getAPIOption("updateOptimizationEnabled")){var t=this._item(e);if(t&&(t.childRowItems||t.detailingRowItems)&&1===e.rab_modificationClassification){let e=this.model().getModificationClassificationVersion();var i=function(t,a){t.forEach((function(t){var n=t.data();((n.rab_modificationClassificationVersion??0)<e||n.rab_modificationClassification>1)&&(n.rab_modificationClassification=1,n.rab_modificationClassificationVersion=e),a||(t.childRowItems&&i(t.childRowItems),t.detailingRowItems&&i(t.detailingRowItems,a))}))};t.childRowItems&&i(t.childRowItems),t.detailingRowItems&&i(t.detailingRowItems,!0)}}},isVisibleRowObjectType:function(e){return Object.values(this.__CategorizedParams.ChildrenName).includes(e)},determineVisibilityOfAllObjects:function(e){Object.values(this.__CategorizedParams.ChildrenName).forEach((t=>{t&&this.determineVisibilityOfAllRowObjects(t,void 0,e,!e)}))},determineVisibilityOfAllRowObjects:function(e,t,i,a){var n=this;if(i||n.getAPIOption("visibilityFilter")||n.getAPIOption(`visibilityFilterFor${e}`)){let o=n.model(),r=n.ganttView(),l=n.__barsGeneratedByChildRowObjectData,s=n.__CategorizedParams.ChildrenName[N.LeafRow]!==e;if(r){let d=o.determineVisibilityOfObjects(e,t,r.checkObjectVisibility.bind(r),i);if(n.hasMultipliedObjects()&&Object.values(n.__CategorizedParams.ChildrenName).includes(e)){let t={[B]:_.Skill,[E]:_.Resource,[w]:_.AllocationRow}[e];if(void 0!==t){let e=[];d.forEach((i=>{let a=this.wrappersByPrimaryKeyParts(t,i.ID,i.Role);a&&e.push(...a)})),d=e}}let c=n.getWidget(),u=!s||l,p=i?void 0:new Map,h=c.options.treeLinesVisible;if(d.forEach((e=>{let t=n._item(e);if(t&&r._updateRowVisibility(e,t)&&(i||r.updateRowHeight(t),!h&&!i)){if(l)for(;t.rab_parentRowItem&&c.isRowCollapsed(t);)t=t.rab_parentRowItem;s&&p.has(t)||p.set(t,{barsChanged:u,childRowsChanged:s}),!s&&t.rab_parentRowItem&&p.set(t.rab_parentRowItem,{barsChanged:!0,childRowsChanged:!1})}})),i)a||(c.invalidateAllRows(!1,!0),r.updateAllRowHeights());else if(h)n.registerRowItem(n._rowItemsRoot,u,!0);else for(let e in p.keys()){let t=p.get(e);n.registerRowItem(e,t.barsChanged,t.childRowsChanged)}}else i&&o.deferForcedVisibilityDetermination(n.__CategorizedParams.ChildrenName[N.ChildRow])}},multipliedSkillItem:function(e){return this._item(e)},multipliedSkillItems:function(){return this._items(B)},skilledResourceItem:function(e){return this._item(e)},skilledResourceItems:function(){return this._items(k)},skilledAllocationItem:function(e){return this._item(e)},skilledAllocationItems:function(){return this._items(V)},invalidateMultipliedObject:function(e,t){if(this.hasObjects(e)){let n=this._rowItemsRoot;if(n){var i=n.getChildrenDepository(e);if(i){var a=i.getObjectByPrimaryKey(t);a&&(a.updateFromReference(),this.registerRowItem(a,!1,!0),this._expandOrCollapseRowByCollapseStateForRowItem(a),this._expandOrCollapseCurvesInRowByCollapseStateForRowItem(a),this._checkPlacementInChildItemsOfParent(a))}}}},hasMultipliedObjects:function(){return!1},wrappersByPrimaryKeyPartsContainer:function(e,t){return this.wrappersByPrimaryKeyParts(e,t.ID,t.Role,t.__MultiplierPrimaryKey)},wrappersByPrimaryKeyParts:function(e,t,i){let a=this.model().objectByPrimaryKeyParts(e,t,i);if(a)return[a]},getSelectableItemsByObjectsConcerningMultiples:function(e,t){var i=this,a=[],n=function(t){var n=i.getSelectableItemByWrapper(e,t);n&&a.push(n)};return t.forEach((function(t){if(t instanceof Q)n(t);else{var a=i.wrappersByPrimaryKeyParts(e,t.ID,t.Role,t.__MultiplierPrimaryKey);Array.isArray(a)&&a.length>0&&a.forEach((function(e){n(e)}))}})),a},objectOrIDToWrapperSubstitute:function(e,t){if("string"==typeof t){var i=t.split(r);return i.length>1?{Role:i[0],ID:i[1]}:{ID:i[0]}}return{__MultiplierPrimaryKey:this.getMultiplierPrimaryKey(e,t),Role:t.Role,ID:t.ID}},objectsOrIDSToWrapperSubstitutes:function(e,t){var i=this;if(Array.isArray(t)&&t.length>0){var a=[];return t.forEach((function(t){a.push(i.objectOrIDToWrapperSubstitute(e,t))})),a}},getSelectableItemTypeByObjectType:function(){},getMultiplierPrimaryKey:function(){},__multipliedWrappersByPrimaryKey:function(e,t,i,a){var n=this.model();if(i){let t=n.getChildByPrimaryKey(e,`${i}${r}${a}`);return t?[t]:void 0}let o=n.getRelatedObjects(e,t,"*",a);if(o&&o.length>0)return o}};e.exports=o.extendClass("rabViewModelBase",n,J)},5338:(e,t,i)=>{var a=i(8680),n=i(3571),o=n.nClassFactory,r=n.nDebugHelper,l=n.nDefaultSeparator,s=n.nFileSaver,d=n.nScrollBarWidthDetector,c=n.nWidget,u=n.nWorldViewCanvasWidget.Position,p=i(476),h=p.BarDragModes,g=p.AllocationBarDesign,m=p.BarDesigns,_=p.BarShape,f=p.BarSortMode,y=p.DateLineGridModes,b=p.ItemType,A=p.LinkMarker,v=p.LinkRoutingType,I=p.ProgressBarWidthCalculationMode,C=p.RowDesigns,w=p.RowDragModes,T=p.CollapseStateTargets,R=p.RowSortMode,S=p.SelectionBehavior,P=p.TimescaleInteractionModes,O=p.TimescaleNavigationMode,D=p.TreeVisualizationMode,E=p.UpdateModes,M=p.ViewType,B=p.WarningCode,k=i(5977),V=k._BarDragModes_AllSupportedFlags,N=k._allocationBarShapesMap,F=k._activityBarShapesMap,L=k._convertPMToUnifiedBarDesign,W=k._convertToUnifiedBarDesign,x=k._RowDragModes_AllSupportedFlags,j=k.RAB_ACTIVITIES_PROP_NAME,H=k.RAB_ALLOCATIONS_PROP_NAME,G=k.RAB_CALENDARS_PROP_NAME,K=k.RAB_CALENDAR_GRIDS_PROP_NAME,U=k.RAB_CURVES_PROP_NAME,z=k.RAB_ENTITIES_PROP_NAME,Y=k.RAB_HIERARCHY_SUPPLEMENTARY_DEFINITIONS_PROP_NAME,X=k.RAB_LINKS_PROP_NAME,$=k.RAB_RESOURCES_PROP_NAME,q=k.RAB_RESOURCES_PROPERTIES_FOR_SKILLS_PROP_NAME,Q=k.RAB_RESOURCES_PROPERTIES_FOR_ACTIVITIES_PROP_NAME,Z=k.RAB_SKILLS_PROP_NAME,J=k.WarningTextsByCode,ee="nrab-about",te=`${ee}-frame`,ie=`${ee}-title`,ae=`${ee}-center`,ne=k.RAB_GANTT_VIEW_CLASS,oe=k.RAB_MESSAGE_PANE_CLASS,re=k.RAB_RECORDING_SYMBOL_CLASS,le="nrab-widget",se=i(8684),de=i(6898),ce=i(7433);let ue=["relativeDateModeEnabled","viewType"];var pe={entitiesTableVisible:"entitiesTableVisibleInResourcesView",nonworkingTimeVisible:"nonWorkingTimeVisible",nonworkingTimesCalendarIDs:"nonWorkingTimesCalendarIDs",customVersion:"version",delayedInteractiveTimeAreaStretching:"asynchronousInteractiveTimeAreaStretching",pm_topBodyViewAreaVisible:"topViewAreaVisible",pm_maximumTopBodyViewAreaHeightRatio:"maximumTopViewAreaHeightRatio",pm_defaultMinimumActivityRowHeight:"defaultActivityMinimumRowHeight",pm_defaultMinimumResourceRowHeight:"defaultResourceMinimumRowHeight",pm_defaultMinimumEntityRowHeight:"defaultEntityMinimumRowHeight",pm_defaultAllowedAllocationBarDragModes:"defaultAllocationAllowedBarDragModes",pm_defaultAllowedActivityBarDragModes:"defaultActivityAllowedBarDragModes",pm_defaultAllowedActivityRowDragModes:"defaultActivityAllowedRowDragModes",pm_defaultAllowedResourceRowDragModes:"defaultResourceAllowedRowDragModes",pm_defaultAllowedEntityRowDragModes:"defaultEntityAllowedRowDragModes",pm_suitableResourcesOverlayColor:"suitableResourceOverlayColor",pm_unsuitableResourcesOverlayColor:"unsuitableResourceOverlayColor",pm_commonViewAreaVisible:"mainViewAreaVisible",pm_activityTableRowDefinitionIDForTitle:"tableRowDefinitionIDForTitleInActivitiesView",pm_resourceTableRowDefinitionIDForTitle:"tableRowDefinitionIDForTitleInResourcesView",pm_entityTableRowDefinitionIDForTitle:"tableRowDefinitionIDForTitleInEntitiesTable",pm_tableHeaderBackgroundColor:"tableTitleBackgroundColor",pm_tableHeaderTextColor:"tableTitleTextColor",pm_tableHeaderColumnSeparatorColor:"tableTitleColumnSeparatorColor",pm_tableHeaderHighlightingColor:"tableTitleHighlightingColor",pm_entitiesTableHeaderBackgroundColor:"entitiesTableTitleBackgroundColor",pm_entitiesTableHeaderTextColor:"entitiesTableTitleTextColor",pm_entitiesTableHeaderColumnSeparatorColor:"entitiesTableTitleColumnSeparatorColor",pm_entitiesTableHeaderHighlightingColor:"entitiesTableTitleHighlightingColor",pm_scrollToObjectHighlightingColor:"objectHighlightingColor",pm_scrollToObjectHighlightFlashingEnabled:"objectHighlightFlashingEnabled",onCollapseStateChangedTriggeredByUpdateCalls:"triggeringOfOnCollapseStateChangedByUpdateCalls",pm_clickCallbackTriggeringOnRowInTimeArea:"triggeringOfOnClickedInTimeAreaOfRow",pm_contextMenuCallbackOnRowInTimeArea:"triggeringOfOnShowContextMenuInTimeAreaOfRow"};Object.keys(pe).forEach((e=>{e.startsWith("pm_")&&(pe[e.substring(3)]=pe[e])}));let he={...c.prototype.optionDefaults,defaultUpdateMode:E.Default,resetValueForDifferentialUpdate:null,version:null,customName:null,customCopyrightYear:null,customVersion:null,customLicenseTexts:null,applicationName:null,applicationVersion:null,licenseKey:null,newCallbackBehaviorEnabled:!1,contextMenuRemainsOpenOnUpdateCalls:!1,locale:"en-US",language:null,weekNumbering:null,firstDayOfWeek:null,timeZone:null,intlNumberFormatOptionsMap:null,intlDateTimeFormatOptionsMap:null,viewType:M.Activities,titleText:null,treeVisualizationMode:D.ColoredIndentation,treeViewLineColor:null,treeViewLineDashArray:null,entitiesTableTreeVisualizationMode:D.ColoredIndentation,entitiesTableTreeViewLineColor:null,entitiesTableTreeViewLineDashArray:null,separationLinesInColoredIndentation:!1,start:null,end:null,startAndEnd:[null,null],maximumTimeResolutionUnit:null,maximumTimeResolutionUnitFactor:null,timeStepUnit:null,timeStepUnitFactor:null,visualZoomFactor:1,workDate:null,workDateLineCaption:"",currentDate:null,fixedTableColumnWidth:30,tableTitleAndTimescaleHeight:60,entitiesTableTitleHeight:60,tableViewWidth:null,tableViewWidthInActivitiesView:null,tableViewWidthInResourcesView:null,tableViewWidthInLoadsView:null,tableViewWidthsSynchronized:!0,tableWidth:null,defaultCalendarID:null,additionalDateInterpretedAsEmpty:null,additionalDateStringInterpretedAsEmpty:"",internalObjectCopiesNeeded:!1,updateOptimizationEnabled:!1,asynchronousInteractiveTimeAreaStretching:!1,asynchronousRendering:!1,decouplingOfAllocationPropertiesFromActivities:!0,multipleSelectionEnabled:!0,multipleBarDraggingEnabled:!1,allocationsSelectableOnlyOnOneResourceAtATime:!1,dragDatesShownForSingleSelectedObject:!1,nonWorkingTimeVisible:!0,nonWorkingTimesCalendarIDs:null,cursorDateLineVisible:!1,editable:!0,entitiesTitleText:null,entitiesTableVisibleInResourcesView:!1,entitiesTableVisibleInActivitiesView:!1,entitiesTableWidth:null,entitiesTableViewWidth:null,dateLineGridMode:y.Weekly,dateLineGridColor:null,dateLineGridDashArray:null,dateLineGridWidth:null,curvePanesVisibleInActivitiesView:!1,curvePanesCollapsibleInResourcesView:!0,curvePanesCollapsibleInSkilledResourcesView:!0,relativeDateModeEnabled:!1,referenceDate:null,timescaleNavigationMode:O.Latest,timescaleInteractionsEnabled:!0,timescaleInteractionMode:P.Default,maximumSnapDistance:8,linksVisibleInActivitiesView:!0,linksVisibleInResourcesView:!1,linksWithDanglingStartOrEndVisible:!1,dragDatesLimitingInteraction:!1,patternShownOnOverloadCurves:!1,triggeringOfOnShowContextMenuInTimeAreaOfRow:!1,triggeringOfOnClickedInTimeAreaOfRow:!1,preventDefaultOnContextMenuEvents:!0,topViewAreaVisible:!1,mainViewAreaVisible:!0,topViewAreaVisibleInActivitiesView:!1,mainViewAreaVisibleInActivitiesView:!0,topViewAreaVisibleInResourcesView:!1,mainViewAreaVisibleInResourcesView:!0,topViewAreaVisibleInLoadsView:!1,mainViewAreaVisibleInLoadsView:!0,maximumTopViewAreaHeightRatio:.5,calendarGridColor:null,calendarGridWeekendColor:"transparent",timescaleBackgroundColor:null,timescaleWeekendBackgroundColor:null,timescaleTextColor:null,timescaleTickColor:null,timescaleHighlightingColor:null,timeAreaBackgroundColor:null,tableColumnSeparatorColor:null,tableTitleBackgroundColor:null,tableTitleTextColor:null,tableTitleColumnSeparatorColor:null,tableTitleHighlightingColor:null,selectionColor:null,splitterHighlightingColor:null,entitiesTableColumnSeparatorColor:null,entitiesTableTitleBackgroundColor:null,entitiesTableTitleTextColor:null,entitiesTableTitleColumnSeparatorColor:null,entitiesTableTitleHighlightingColor:null,symbolColumnBackgroundColor:null,entitiesTableSymbolColumnBackgroundColor:null,defaultActivityTableRowDefinitionID:null,defaultAllocationTableRowDefinitionID:null,defaultResourceTableRowDefinitionID:null,defaultResourceTableRowDefinitionIDInActivitiesView:null,defaultEntityTableRowDefinitionID:null,tableRowDefinitionIDForTitleInActivitiesView:null,tableRowDefinitionIDForTitleInResourcesView:null,tableRowDefinitionIDForTitleInLoadsView:null,tableRowDefinitionIDForTitleInEntitiesTable:null,defaultActivityCollapsedRowDesign:C.Bars|C.Optimized|C.BarsInHiddenDescendantRows,defaultActivityExpandedRowDesign:C.Bars|C.Optimized,defaultAllocationRowDesign:C.Bars|C.CalendarGrid,defaultResourceCollapsedRowDesign:C.Bars|C.Optimized|C.BarsInHiddenDescendantRows|C.CalendarGrid,defaultResourceExpandedRowDesign:C.Bars|C.Optimized|C.CalendarGrid,defaultAllocationSnapTargetsForStart:null,defaultAllocationSnapTargetsForEnd:null,defaultActivitySnapTargetsForStart:null,defaultActivitySnapTargetsForEnd:null,defaultAllocationAllowedBarDragModes:h.DragAutoHorOrVer,forcedAllocationAllowedBarDragModes:null,defaultAllocationAllowedBarDragModesInActivitiesView:h.DragHorizontally,forcedAllocationAllowedBarDragModesInActivitiesView:null,defaultActivityAllowedBarDragModes:h.DragHorizontally,forcedActivityAllowedBarDragModes:null,defaultActivityAllowedRowDragModes:w.None,forcedActivityAllowedRowDragModes:null,defaultAllocationAllowedRowDragModes:w.None,forcedAllocationAllowedRowDragModes:null,defaultAllocationAllowedRowDragModesInActivitiesView:w.None,forcedAllocationAllowedRowDragModesInActivitiesView:null,defaultResourceAllowedRowDragModes:w.None,forcedResourceAllowedRowDragModes:null,defaultEntityAllowedRowDragModes:w.DragOutside,forcedEntityAllowedRowDragModes:null,defaultAllocationBarSelectable:!0,defaultAllocationRowSelectable:!0,defaultActivityBarSelectable:!0,defaultActivityRowSelectable:!0,defaultResourceRowSelectable:!0,defaultEntityRowSelectable:!0,defaultLinkSelectable:!0,defaultActivityRowCollapsible:!0,defaultActivityAllocationRowsCollapsible:!0,defaultResourceRowCollapsible:!0,defaultResourceAllocationRowsCollapsible:!0,defaultEntityRowCollapsible:!0,pm_defaultAllocationBarDesign:g.Entries,defaultAllocationBarDesign:null,defaultActivityBarDesign:null,defaultActivityBarShape:_.Regular,defaultAllocationBarShape:_.Regular,defaultActivityBarTextFormat:null,defaultAllocationBarTextFormat:null,defaultActivityConstraintSymbolColor:"#646464",defaultAllocationConstraintSymbolColor:"#646464",defaultValuesForActivityProperties:null,defaultValuesForActivityEntryProperties:null,defaultValuesForAllocationProperties:null,defaultValuesForAllocationEntryProperties:null,defaultValuesForEntityProperties:null,defaultValuesForLinkProperties:null,defaultValuesForResourceProperties:null,defaultValuesForSkillProperties:null,defaultAllocationBackgroundColor:null,defaultLinkRoutingType:v.Curved,defaultLinkTargetMarker:A.FilledArrow,progressBarHeight:4,progressBarWidthCalculationMode:I.ConsiderWorkingTimesOnly,defaultActivityProgressBackgroundColor:null,defaultAllocationProgressBackgroundColor:null,defaultActivityBarHeight:22,defaultAllocationBarHeight:22,defaultActivityMinimumRowHeight:42,defaultAllocationMinimumRowHeight:42,defaultResourceMinimumRowHeight:42,defaultEntityMinimumRowHeight:42,minimumLoadCurvePaneHeight:30,defaultLoadCurvePaneHeight:50,maximumLoadCurvePaneHeight:200,minimumInventoryCurvePaneHeight:30,defaultInventoryCurvePaneHeight:50,maximumInventoryCurvePaneHeight:200,defaultResourceBarsPaneVisible:!0,defaultResourceLoadCurvePaneVisible:!0,defaultLoadCurvePaneColor:null,defaultResourceInventoryCurvePaneVisible:!1,defaultInventoryCurvePaneColor:null,releaseDueDateConnectionsVisible:!1,symbolColumnTitleBackgroundColor:null,symbolColumnTitleSymbolIDs:null,symbolColumnTitleVisible:!1,symbolColumnVisible:!1,symbolColumnWidth:22,entitiesTableSymbolColumnTitleBackgroundColor:null,entitiesTableSymbolColumnTitleSymbolIDs:null,entitiesTableSymbolColumnTitleVisible:!1,entitiesTableSymbolColumnVisible:!1,entitiesTableSymbolColumnWidth:22,topBarSymbolsVisible:!0,topRowMarginInTimeArea:10,bottomRowMarginInTimeArea:5,subRowDistanceInTimeArea:5,tableCellContentTopOffset:21,entitiesTableCellContentTopOffset:21,defaultResourceMaximumSubRowHeightInTimeArea:null,defaultResourceMaximumRowHeight:null,defaultActivityMaximumSubRowHeightInTimeArea:null,defaultActivityMaximumRowHeight:null,activityBarTopOffsetAndHeightScaleFactor:1,allocationBarTopOffsetAndHeightScaleFactor:1,activityCalendarsEnabled:!1,detailedActivityConstraintSymbolsEnabled:!0,detailedAllocationConstraintSymbolsEnabled:!0,curvePanesResizable:!1,linesShownInLoadCurvePanes:!1,timeAreaPanningMode:3,selectionBehavior:S.Framing,pastBackgroundFillColor:null,pastBackgroundLineColor:null,pastBackgroundLineWidth:null,pastBackgroundLineDashArray:null,suitableResourceOverlayColor:null,unsuitableResourceOverlayColor:null,suitableActivityOverlayColor:null,unsuitableActivityOverlayColor:null,ignoreCalendarOnAllocationBarInteractions:!1,ignoreCalendarOnActivityBarInteractions:!1,objectHighlightingColor:null,objectHighlightFlashingEnabled:!0,loggingEnabled:!1,interactiveActivationOfLoggingEnabled:!1,loggingVerboseLevel:0,worldViewVisible:!1,worldViewPosition:u.Bottom,worldViewExtent:150,scrollOffsetsChangedCallbackTimeDelay:500,tooltipDelay:500,animationDuration:400,watermarkSymbolID:null,watermarkOpacity:.2,allocationRowsVisibleInActivitiesView:!1,resourcesVisibleInActivitiesView:!1,allocationRowsVisibleInResourcesView:!1,finishedAllocationBarsShownUnstackedInBackground:!1,definedAllocationLinksVisibleInResourcesView:!1,definedAllocationLinksVisibleInActivitiesView:!1,defaultActivityStatusFrameColor:null,defaultAllocationStatusFrameColor:null,entitiesTableShownFullScreen:!1,defaultActivityBarTooltipTemplateID:null,defaultActivityRowTooltipTemplateID:null,defaultAllocationBarTooltipTemplateID:null,defaultAllocationRowTooltipTemplateID:null,defaultEntityRowTooltipTemplateID:null,defaultLinkTooltipTemplateID:null,defaultPeriodHighlighterEntryTooltipTemplateID:null,defaultResourceCurveTooltipTemplateID:null,defaultResourceRowTooltipTemplateID:null,activityBaselineBarsVisible:!0,activityHierarchySupplementaryDefinitionID:null,resourceHierarchySupplementaryDefinitionID:null,resourceHierarchySupplementaryDefinitionIDInLoadsView:null,entityHierarchySupplementaryDefinitionID:null,colorOfFirstTableCellAppliedToGroupColoring:!0,groupCellsWithHorizontalSeparationLine:!1,collapseButtonVisibleOnRowsWithoutVisibleChildren:!0,triggeringOfOnCollapseStateChangedByUpdateCalls:!0,dateLineCaptionOptimizedPositioningEnabled:!1,barSortModeForOptimizedRowDesign:f.StartAndEnd,activityRowSortCodePropertyName:"SortCode",entityRowSortCodePropertyName:"SortCode",resourceRowSortCodePropertyName:"SortCode",skillRowSortCodePropertyName:"SortCode",allocationRowSortCodePropertyName:"SortCode",activityRowSortMode:R.None,entityRowSortMode:R.None,resourceRowSortMode:R.None,skillRowSortMode:R.None,allocationRowSortMode:R.None,interactiveSwitchingOfSortOrderEnabled:!1,sortingIndicatorVisible:!1,rowSortModeNoneEnabledOnInteractiveSwitchingOfSortOrder:!0,triggeringOfOnShowTooltipForEntriesInBarsEnabled:!1,higherCurvePanesOnExceededScaleMaximumValue:!1,allocationBarDesignOfOtherSkill:null,allocationBarDesignOfOtherActivity:null,tonedDownOverlayColor:"rgba(64,64,64,0.5)",reducedBarTopOffsetAndHeightScaleFactor:1,applicationVariablesMap:null,applicationStyleDefinition:null,onShowTooltip:null,onDetermineColumnDefinitions:null,onShowContextMenu:null,onCloseContextMenu:null,canDrag:null,onDrag:null,onDragStart:null,onDragEnd:null,onDrop:null,onClicked:null,onDoubleClicked:null,canSelect:null,onSelectionChanged:null,onTimeAreaViewParametersChanged:null,onVerticalScrollOffsetChanged:null,onCollapseStateChanged:null,onCurveCollapseStateChanged:null,onLogError:null,onLogWarning:null,onLogMethodCall:null,compareObjects:null,compareActivities:null,compareAllocations:null,compareEntities:null,compareResources:null,compareSkills:null,onCurvePaneResized:null,onTableCellDefinitionWidthChanged:null,visibilityFilter:null,visibilityFilterForActivities:null,visibilityFilterForAllocations:null,visibilityFilterForResources:null,visibilityFilterForEntities:null,visibilityFilterForSkills:null,onSaveAsPDFProgress:null,determineGroupingCode:null,onRowSortingChangeRequested:null,__initialLogState__:null,defaultSkillAllowedRowDragModes:w.None,forcedSkillAllowedRowDragModes:w.None,defaultSkillCollapsedRowDesign:C.None,defaultSkillMinimumRowHeight:42,defaultSkillRowCollapsible:!0,defaultSkillRowSelectable:!0,defaultSkillRowTooltipTemplateID:null,defaultSkillTableRowDefinitionID:null,defaultSkilledResourceRowTooltipTemplateID:null,defaultSkilledAllocationRowTooltipTemplateID:null,defaultSkilledAllocationBarTooltipTemplateID:null,allocationRowsVisibleInSkilledResourcesView:!1,definedAllocationLinksVisibleInSkilledResourcesView:!1,entitiesTableVisibleInSkilledResourcesView:!1,linksVisibleInSkilledResourcesView:!1,mainViewAreaVisibleInSkilledResourcesView:!0,tableRowDefinitionIDForTitleInSkilledResourcesView:null,tableViewWidthInSkilledResourcesView:null,topViewAreaVisibleInSkilledResourcesView:!1,unusedSkillsVisibleInTopViewArea:!1,unusedSkillsVisibleInMainViewArea:!0};var ge={__rabApplicationClass:se,optionDefaults:he,construct:function(e,t){var i=this;i._super(e),i._currentCommandCounter=0;var n=a.select(i._element).classed(le,!0);n.append("div").attr("class",oe).attr("tabindex","-1");var o=n.append("div").attr("class",ne).attr("tabindex","-1");n.append("div").attr("tabindex","-1").attr("class",re).text("Rec"),null==n.attr("tabindex")&&n.attr("tabindex","-1"),i._defaultColumnDefinitions={},i._application=new i.__rabApplicationClass(i,{fullScreenGanttViewElem:o.node(),boundHandleExceptionFunc:i._handleException.bind(i)}),ue.forEach((e=>{let a=t?.[e]??i.optionDefaults[e];null!=a&&a!==he[e]&&i._setOption(e,a)})),i._application.init();let r={},l={...i.optionDefaults};if(t)for(const[e,a]of Object.entries(t)){let t=i.__renameKey(e);t!==e&&delete l[t],r[e]=t,l[e]=a}for(const[e,t]of Object.entries(l))if(!ue.includes(e)){let a=he[r[e]??i.__renameKey(e)];null!=t&&t!==a&&i._setOption(e,t)}i._logMethodResult||(i._logMethodResult=e=>e),i._application._renderOnIdle(),i._loggingActionActiveCounter=0},__renameKey:function(e){let t="´"===e[0]?"´":"";t&&(e=e.substring(1));let i=pe[e];return!i&&e.startsWith("pm_")&&"pm_defaultAllocationBarDesign"!==e&&(i=e.substring(3)),`${t}${i||e}`},destroy:function(){this._application.destroy(),a.select(this._element).classed(le,!1).selectAll("*").remove(),this._super()},_setAPIOption:function(e,t){this._application.setAPIOption(e,t,this._setAPIOptionSilently)},_getAPIOption:function(e){return this._application.getAPIOption(e)},option:function(e){var t="option";if(this._currentCommandCounter++,this._currentMethodName=t,this._logMethod?.(t,arguments),!("version"===e&&arguments.length>1)){if(1===arguments.length&&"object"==typeof e){var i,a={};ue.forEach((t=>{null!=e[t]&&(a[t]=this.options[t])})),Object.keys(e).forEach((function(t){if(!["loggingEnabled"].includes(t)){if("start"===t||"end"===t){if(e.startAndEnd)return;if("start"===t?e.end:e.start)return void(a.startAndEnd=[e.start,e.end])}a[t]=e[t]}})),"loggingEnabled"in e&&(a.loggingEnabled=e.loggingEnabled);var n=this._application.view();if(n)if(i=n.ganttView())!1!==i.suspendUpdate(!0)&&(i=void 0);try{this._super.call(this,a)}catch(e){this._handleException(e,t)}finally{i&&i.suspendUpdate(!1),delete this._currentMethodName}return this._logMethodResult()}try{var o=this._super.apply(this,arguments);1!==arguments.length&&(o=void 0)}catch(e){this._handleException(e,t)}finally{delete this._currentMethodName}return this._logMethodResult(o)}this._logMethodResult()},_setOption:function(e,t){try{"´"===e[0]&&(e=e.substring(1),this._setAPIOptionSilently=!0);let g=e;if(e=this.__renameKey(e),!this._currentCommandCounter||this.options.contextMenuRemainsOpenOnUpdateCalls||"contextMenuRemainsOpenOnUpdateCalls"===e&&t||this._closeContextMenu(),e in this.optionDefaults){switch(e){case"customName":case"customCopyrightYear":case"customVersion":case"customLicenseTexts":if(this._currentCommandCounter)return;case"contextMenuRemainsOpenOnUpdateCalls":case"applicationName":case"applicationVersion":break;case"timescaleInteractionsEnabled":this._setAPIOption("timescaleInteractionMode",t?P.Default:P.None);break;case"timescaleInteractionMode":this._setAPIOption(e,"boolean"==typeof t?t?P.Default:P.None:t);break;case"topViewAreaVisible":this._setAPIOption("topViewAreaVisibleInResourcesView",t);break;case"mainViewAreaVisible":this._setAPIOption("mainViewAreaVisibleInResourcesView",t);break;case"tableViewWidth":this._setOption("tableViewWidthInActivitiesView",t),this._setOption("tableViewWidthInResourcesView",t),this._setOption("tableViewWidthInLoadsView",t),this._setOption("tableViewWidthInSkilledResourcesView",t);break;case"rowMarginInTimeArea":this._setAPIOption("topRowMarginInTimeArea",t),this._setAPIOption("bottomRowMarginInTimeArea",t);break;case"multipleSelectionEnabled":if("string"==typeof t){var i=parseFloat(t);isNaN(i)||(t=i)}r.assert(null===t||"boolean"==typeof t||"number"==typeof t,e+" is out of range"),this._setAPIOption(e,2===t?2:null===t?t:!!t);break;case"startAndEnd":r.assertArray(t),"string"!=typeof t[0]&&r.assertDateOrNull(t[0]),"string"!=typeof t[1]&&r.assertDateOrNull(t[1]);var n=null!=t[0]?this._application.model().dateTimeValueToDate(t[0]):null,o=null!=t[1]?this._application.model().dateTimeValueToDate(t[1]):null;n&&o&&(this._setAPIOption(e,[n,o]),this._setAPIOption("start",n),this._setAPIOption("end",o),this.options.start=t[0],this.options.end=t[1]);break;case"start":this._setAPIOption(e,t),this.options.startAndEnd[0]=t;break;case"end":this._setAPIOption(e,t),this.options.startAndEnd[1]=t;break;case"pm_defaultAllocationBarDesign":{let e=+t;this._setAPIOption("defaultAllocationBarDesign",null===t?m.Default:isNaN(e)?t:L(e));break}case"allocationBarDesignOfOtherSkill":case"allocationBarDesignOfOtherActivity":{let i=+t;this._setAPIOption(e,null===t?null:isNaN(i)?t:W(i));break}case"defaultAllocationBarDesign":case"defaultActivityBarDesign":{let i=+t;this._setAPIOption(e,null===t?null:isNaN(i)?t:W(i));break}case"defaultAllocationBarShape":this._setAPIOption(e,N[+t]??null);break;case"defaultActivityBarShape":this._setAPIOption(e,F[+t]??null);break;case"visibilityFilter":case"visibilityFilterForActivities":case"visibilityFilterForAllocations":case"visibilityFilterForResources":case"visibilityFilterForEntities":case"visibilityFilterForSkills":null!=(t="function"==typeof t?t:null)&&t===this.options[e]&&(this._setAPIOptionSilently=!0,this._setAPIOption(e,null),delete this._setAPIOptionSilently),this._super(e,t),this._application.model().reinitializeVisibilityDetermination(),this._setAPIOption(e,t),this._application.view().ganttView()?.update();break;case"compareObjects":case"compareActivities":case"compareAllocations":case"compareEntities":case"compareResources":case"compareSkills":null!=(t="function"==typeof t?t:null)&&t===this.options[e]&&(this._setAPIOptionSilently=!0,this._setAPIOption(e,null),delete this._setAPIOptionSilently),this._super(e,t),this._setAPIOption(e,t),this._application.view().ganttView()?.update();break;case"__initialLogState__":if(this._application.view()){let e=this,i=this._application.view().ganttView();if(i){var l=i.ganttWidget(),s=i.entitiesTableWidget();if(null!=t.baseTimeUnit&&("number"==typeof t.baseTimeUnit&&(t.baseTimeUnit=["s","m","h","d","w","M","Q","y"][t.baseTimeUnit]),l.timeAxis().baseTimeUnit(t.baseTimeUnit)),null!=t.baseTimeUnitWidth&&l.timeAxis().baseTimeUnitWidth(t.baseTimeUnitWidth),null!=t.actualTableViewWidth&&l.modifyTableViewWidth(t.actualTableViewWidth),t.collapseStates&&[M.Activities,M.Resources,M.Loads,M.SkilledResources].forEach((function(a){if(t.collapseStates[a]){let s=i._viewModels[a];var n=s?.rowItemsRoot();if(n){var o=a===M.SkilledResources,r=a===M.Activities;l.restoreCollapseStates(t.collapseStates[a],n,(function(e){return e.rab_itemType===b.AllocationRow?void 0:o?`${e.rab_itemType===b.Resource?"R":"S"}${e.data().getPrimaryKey()}`:r&&e.rab_itemType===b.Resource?e.data().getPrimaryKey():e.ID}),(function(e,t){t.rab_curvePanesVisible&&(i._expandOrCollapseCurvesInRowAtLast(e,!0,!1),a!==i.viewType()||r&&e.rab_itemType===b.Resource||i.invalidateRow(e))}),!0),a===i.viewType()&&(s.autoInvalidateRows(),i.update())}else e._application.deserializeCollapseStates(a,JSON.stringify(t.collapseStates[a]))}})),s&&null!=t.entitiesTableActualTableViewWidth){var c=parseFloat(window.getComputedStyle(i._divD3.node()).width),u=l.options.splitterWidth;i._onVerticalSplitterChanged(c-u-t.entitiesTableActualTableViewWidth-d.scrollBarWidth()),t.entitiesCollapseStates&&(s.restoreCollapseStates(t.entitiesCollapseStates,s.option("rowItemsRoot"),(e=>e.ID)),i.update())}t.verticalScrollOffsetExt&&(i._verticalScrollOffsetByViewType=t.verticalScrollOffsetExt),l.scrollTo(t.horizontalTableViewScrollOffset,t.horizontalTimeAreaViewScrollOffset,t.verticalScrollOffset,t.topVerticalScrollOffset),s&&s.scrollTo(t.entitiesTableHorizontalScrollOffset,t.entitiesTableVerticalScrollOffset),t.selectedObjects&&e.selectObjects(t.selectedObjects.objectType,t.selectedObjects.objectIDs,t.selectedObjects.visualType)}}break;case atob("bGljZW5zZUtleQ=="):r.assertStringOrNull(t),this._application.setOption("maximumSnapDistance",t,void 0);break;case"viewType":"string"==typeof t&&(i=+t,isNaN(i)||(t=i)),r.assertNumber(t),r.assert(t>=0&&t<=M._Maximum,e+" is out of range"),t>=M.Activities&&t<=M._Maximum&&this._application.setOption(e,t,void 0);break;case"onLogError":case"onLogWarning":r.assertFunctionOrNull(t);break;case"onLogMethodCall":r.assertFunctionOrNull(t),this._logMethod=t||this.options.loggingEnabled?this._doLogMethodCall:void 0,this._logMethodResult=t||this.options.loggingEnabled?this._doLogMethodCallResult:function(e){return e};break;case"loggingEnabled":var p=isNaN(t);t=!!t;var h=this._getAPIOption(e);t!==h&&(this._setAPIOption(e,t),this._logMethod=t||this.options.onLogMethodCall?this._doLogMethodCall:void 0,this._logMethodResult=t||this.options.onLogMethodCall?this._doLogMethodCallResult:function(e){return e},a.select(this._element).select(`.${re}`).style("visibility",t?"visible":"hidden"),t?this._saveCurrentStateToLoggingCache():this._saveLoggingCacheAsJSONFile(p));break;case"loggingVerboseLevel":t=t??0,r.assertNumber(t);break;case"defaultAllocationAllowedBarDragModes":case"forcedAllocationAllowedBarDragModes":case"defaultAllocationAllowedBarDragModesInActivitiesView":case"forcedAllocationAllowedBarDragModesInActivitiesView":case"defaultActivityAllowedBarDragModes":case"forcedActivityAllowedBarDragModes":null!=t&&(t=+t,t=isNaN(t)?null:t&V),this._setAPIOption(e,t);break;case"defaultSkillAllowedRowDragModes":case"forcedSkillAllowedRowDragModes":null!=t&&(t=+t,t=isNaN(t)?null:t&w.DragVertically|w.DragInSameTableParentOnly),this._setAPIOption(e,t);break;case"defaultActivityAllowedRowDragModes":case"forcedActivityAllowedRowDragModes":case"defaultAllocationAllowedRowDragModes":case"forcedAllocationAllowedRowDragModes":case"defaultAllocationAllowedRowDragModesInActivitiesView":case"forcedAllocationAllowedRowDragModesInActivitiesView":case"defaultResourceAllowedRowDragModes":case"forcedResourceAllowedRowDragModes":case"defaultEntityAllowedRowDragModes":case"forcedEntityAllowedRowDragModes":null!=t&&(t=+t,t=isNaN(t)?null:t&x),this._setAPIOption(e,t);break;default:this._setAPIOption(e,t)}g!==e&&this._super(g,t),this._super(e,t)}else this._handleWarning(B.OPTION_NAME_UNKNOWN,{name:e})}finally{delete this._setAPIOptionSilently}},_closeContextMenu:function(){this._application.contextMenuHandler().close(),delete this._lastContextMenuEventTimeStamp},appendTagToLog:function(e){try{var t="appendTagToLog";return r.assertString(e,t,0),this._logMethod?.(t,arguments),this._logMethodResult(void 0)}catch(e){this._handleException(e,t)}},addLoggingTag:function(e){this.appendTagToLog(e)},_mapFunctionToString:function(e){if("function"==typeof e){let t="*Function*";return e.name&&(t+=` named ${e.name}`),t}return e},_doLogMethodCall:function(e,t){var i="function"==typeof this.options.onLogMethodCall;if(this._startLoggingAction(e,t),this._cachedLogOfMethodCall&&(i&&this.options.onLogMethodCall.call(this,this._cachedLogOfMethodCall),this._cachedLogOfMethodCall=void 0),i){var a=[e,"("];if(t.length){"option"===e&&("object"==typeof(t=Array.from(t))[0]?(t[0]=Object.assign({},t[0]),Object.keys(t[0]).forEach((e=>{t[0][e]=this._mapFunctionToString(t[0][e])}))):t.length>1&&(t[1]=this._mapFunctionToString(t[1])));for(var n=0;n<t.length;n++)a.push(JSON.stringify(t[n]),", ");a.pop()}a.push(");"),this._cachedLogOfMethodCall={command:a.join("")}}return!0},_doLogMethodCallResult:function(e){return this._endLoggingAction(e),this._cachedLogOfMethodCall&&(this._cachedLogOfMethodCall.result=e,"function"==typeof this.options.onLogMethodCall&&this.options.onLogMethodCall.call(this,this._cachedLogOfMethodCall),this._cachedLogOfMethodCall=void 0),e},_saveCurrentStateToLoggingCache:function(){var e=this,t=new Date;e._loggingCache={timestamp:t.toISOString(),name:e._getAPIOption("customName")||"NETRONIC RAB Widget",version:e._getAPIOption("version")||"x.x.x",rabVersion:ce.nwafVersion,license:e._application.__id,licensee:e._application.__n,expire:e._application.__e,userAgent:navigator?navigator.userAgent:""};var i=e._loggingCache.options=Object.assign({},e.options);["version","customName","customCopyrightYear","customVersion","customLicenseTexts","licenseKey","newCallbackBehaviorEnabled","contextMenuRemainsOpenOnUpdateCalls","compareObjects","compareActivities","compareAllocations","compareResources","compareSkills","compareEntities","visibilityFilter","visibilityFilterForActivities","visibilityFilterForAllocations","visibilityFilterForResources","visibilityFilterForSkills","visibilityFilterForEntities","determineGroupingCode","timescaleInteractionsEnabled"].forEach((e=>{delete i[e]})),Object.keys(ge.optionDefaults).forEach((e=>{(e.startsWith("on")||e.startsWith("can"))&&delete i[e]}));var a=e._application.view().ganttView();if(a){var n=a.ganttWidget(),o=a.entitiesTableWidget(),r=[];[M.Activities,M.Resources,M.Loads,M.SkilledResources].forEach((function(e){var t=a.viewModel()?.rowItemsRoot();if(t){var i=e===M.SkilledResources,o=e===M.Activities;r[e]=Object.assign({},n.saveCollapseStates(t,(function(e){return e.rab_itemType===b.AllocationRow?void 0:i?`${e.rab_itemType===b.Resource?"R":"S"}${e.data().getPrimaryKey()}`:o&&e.rab_itemType===b.Resource?e.data().getPrimaryKey():e.ID}),(function(e,t){e.rab_curvePanesVisible&&(t.rab_curvePanesVisible=!0)})))}else r[e]={}}));var l=n.timeAxis();let t=e._loggingCache.options.__initialLogState__={baseTimeUnit:l.baseTimeUnit(),baseTimeUnitWidth:l.baseTimeUnitWidth(),horizontalTableViewScrollOffset:n.horizontalTableViewScrollOffset(),horizontalTimeAreaViewScrollOffset:n.horizontalTimeAreaViewScrollOffset(),verticalScrollOffset:n.verticalScrollOffset(),verticalScrollOffsetExt:a._verticalScrollOffsetByViewType,topVerticalScrollOffset:n.topVerticalScrollOffset(),actualTableViewWidth:n.actualTableViewWidth(),collapseStates:r};o&&(t.entitiesTableActualTableViewWidth=o.actualTableViewWidth(),t.entitiesTableHorizontalScrollOffset=o.horizontalScrollOffset(),t.entitiesTableVerticalScrollOffset=o.verticalScrollOffset(),t.entitiesCollapseStates=o.saveCollapseStates(o.option("rowItemsRoot"),(e=>e.ID)));let i=e.getSelectedObjects();i.objects?.length&&(t.selectedObjects=e._mapObjectsToIDsInArrayForLogging(i,"object*s"))}delete e._loggingCache.options.loggingEnabled,[j,H,G,U,z,X,$,Z,K,Y].forEach((function(t){var i=e._application.model().getChildrenArray(t).filter((e=>!e.isPseudo()));e._loggingCache[t]=i.map((function(e){return Object.assign({},e.data())}))})),e._loggingCache.DateLines=e._application._getDateLinesData(),e._loggingCache.TableRowDefinitions=e._application._getTableRowDefinitionsData(),e._loggingCache.Symbols=e._application._getSymbolsData(),e._loggingCache.TooltipTemplates=e._application._getTooltipTemplatesData(),e._loggingCache.Actions=[],this._loggingActionActiveCounter=0},_saveLoggingCacheAsJSONFile:function(e){e&&(delete this._loggingCache.options.__initialLogState__.collapseStates,delete this._loggingCache.options.__initialLogState__.entitiesCollapseStates);var t=JSON.stringify(this._loggingCache),i=new Blob([t],{type:"text/plain;charset=utf-8"}),n=new Date,o="VSW-Logging_"+a.timeFormat("%Y-%m-%d_%H%M%S")(n)+".json";s.saveAs(i,o),this._loggingCache={},this._loggingActionActiveCounter=0},_startLoggingAction:function(e,t,i){if(this.options.loggingEnabled){this._loggingActionActiveCounter++;var a=new Date;return t=Array.from(t),"option"===e&&("object"==typeof t[0]?(t[0]=Object.assign({},t[0]),Object.keys(t[0]).forEach((e=>{t[0][e]=this._mapFunctionToString(t[0][e])}))):t.length>1&&(t[1]=this._mapFunctionToString(t[1]))),this._loggingCache.Actions.push({type:i,name:e,args:t,start:a.toISOString()}),this._lastActiveTimeLogged=a.getTime(),this._loggingCache.Actions.length}},_findActiveLoggedAction:function(){for(var e=this._loggingCache.Actions.length-1;e>=0;e--){var t=this._loggingCache.Actions[e];if("callback-result"===t.type)e=0;else if(t.type||!t.end)break}return e>=0?t:void 0},_addWarningToLoggedAction:function(e){if(this.options.loggingEnabled&&this._loggingActionActiveCounter){var t=this._findActiveLoggedAction();t&&(t.warnings||(t.warnings=[]),t.warnings.push(e))}},_endLoggingAction:function(e,t){if(this.options.loggingEnabled&&this._loggingActionActiveCounter){var i,a=new Date;if("#exception#"===e){if(!(i=this._findActiveLoggedAction()))return}else if(i=this._loggingCache.Actions[(t??this._loggingCache.Actions.length)-1],null!=t){var n=i.start;(i=this._loggingCache.Actions[this._startLoggingAction(i.name,i.args,(i.type||"")+"-result")-1]).start=n}i.result=e,i.end=a.toISOString();var o=new Date(i.start).getTime(),r=a.getTime();i.duration=r-o,this._loggingActionActiveCounter--,this._lastActiveTimeLogged=r}},_handleEventuallyAsynchronousFunctionStart:function(e){if(!this._currentMethodName)return this._currentCommandCounter++,this._currentMethodName=e+"/asynchronous",!0},_handleEventuallyAsynchronousFunctionEnd:function(){delete this._currentMethodName},_logRenderingTime:function(e,t){this._loggingCache&&(null==t?(this._lastActiveTimeLogged=(new Date).getTime(),window.requestAnimationFrame((()=>{this._loggingCache?.Actions?.push({type:"renderingTime",name:e??"",duration:(new Date).getTime()-this._lastActiveTimeLogged})}))):this._loggingCache.Actions?.push({type:"renderingTime",name:e??"",duration:t}))},_mapObjectToIDForLogging:function(e,t){let i=t.replace(/\*/,"");e[i]&&(e[t.replace(/\*|$/,"ID")]=e[i].ID,delete e[i])},_mapObjectsToIDsInArrayForLogging:function(e,t){let i=e=>"string"==typeof e?e:e.ID,a=t.replace(/\*/,"");return a?(e[a]&&(e[t.replace(/\*/,"ID")]=e[a].map(i),delete e[a]),e):e?.map(i)},_handleWarning:function(e,t){var i=J[e].replace(/{{.*?}}/g,(function(e){e=e.substring(2,e.length-2);let i=t[e];return"key"===e&&(i=i?.replace(l,"")),i})),a=`W${e}`;this._addWarningToLoggedAction(`[${a}] ${i}`);let n=this.options.onLogWarning;if("function"==typeof n){let e=this._currentMethodName??this._currentCallbackName??"";e||this._currentCommandCounter++,n.call(this,{commandName:e,commandCounter:this._currentCommandCounter,code:a,description:i})}},_handleException:function(e,t){if(this._cachedLogOfMethodCall&&this._doLogMethodCallResult("#exception#"),this._lastHandledError===e)throw e;{this._lastHandledError=e;var i=Object.getPrototypeOf(this).widgetName;t&&(t=t.replace(new RegExp(`^${i}.`),"")),this._startLoggingAction(t||"",[{name:e.name,message:e.message,stack:e.stack}],"exception");let n=this._currentMethodName??this._currentCallbackName??t??"";n||this._currentCommandCounter++;var a={commandName:n,commandCounter:this._currentCommandCounter,error:e,rethrow:!0};let o=this.options.onLogError;if("function"==typeof o&&o.call(this,a),this._endLoggingAction(a.rethrow?"*rethrown*":"*catched*"),a.rethrow)throw e}},_handleCall:function(e,t,i,a,n){this._currentCommandCounter++,this._currentMethodName=e;let o=this._logMethod?.(e,t);try{i?.call(this,e),!1!==n?.ctx&&this._closeContextMenu();var r=a.call(this);return r}catch(t){this._handleException(t,e)}finally{o&&this._logMethodResult(n?.r?n.r(r):r),delete this._currentMethodName}},_addObjects:function(e,t,i){return this._handleCall(e,i,(e=>{r.assertArray(i[0],e,0)}),(()=>this._application[e](i[0],t)))},_updateObjects:function(e,t,i){return this._handleCall(e,i,(e=>{r.assertArray(i[0],e,0),r.assertNumberOrNull(i[1],e,1)}),(()=>this._application[e](i[0],t,i[1])))},_removeObjects:function(e,t,i){return this._handleCall(e,i,(e=>{r.assertArray(i[0],e,0)}),(()=>this._application[e](i[0],t)))},addSkills:function(){return this._addObjects("addSkills",Z,arguments)},updateSkills:function(){return this._updateObjects("updateSkills",Z,arguments)},removeSkills:function(){return this._removeObjects("removeSkills",Z,arguments)},setResourcePropertiesForSkills:function(){return this._updateObjects("setResourcePropertiesForSkills",q,arguments)},addResources:function(e){return this._handleCall("addResources",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.addResources(e)))},updateResources:function(e,t){return this._handleCall("updateResources",arguments,(i=>{r.assertArray(e,i,0),r.assertNumberOrNull(t,i,1)}),(()=>this._application.updateResources(e,t)))},removeResources:function(e){return this._handleCall("removeResources",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.removeResources(e)))},addCalendars:function(e){return this._handleCall("addCalendars",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.addCalendars(e)))},updateCalendars:function(e,t){return this._handleCall("updateCalendars",arguments,(i=>{r.assertArray(e,i,0),r.assertNumberOrNull(t,i,1)}),(()=>this._application.updateCalendars(e,t)))},removeCalendars:function(e){return this._handleCall("removeCalendars",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.removeCalendars(e)))},addCurves:function(e){return this._handleCall("addCurves",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.addCurves(e)))},updateCurves:function(e,t){return this._handleCall("updateCurves",arguments,(i=>{r.assertArray(e,i,0),r.assertNumberOrNull(t,i,1)}),(()=>this._application.updateCurves(e,t)))},removeCurves:function(e){return this._handleCall("removeCurves",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.removeCurves(e)))},addActivities:function(e){return this._handleCall("addActivities",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.addActivities(e)))},updateActivities:function(e,t){return this._handleCall("updateActivities",arguments,(i=>{r.assertArray(e,i,0),r.assertNumberOrNull(t,i,1)}),(()=>this._application.updateActivities(e,t)),{ctx:!this.options.contextMenuRemainsOpenOnUpdateCalls})},removeActivities:function(e){return this._handleCall("removeActivities",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.removeActivities(e)))},setResourcePropertiesForActivities:function(){return this._updateObjects("setResourcePropertiesForActivities",Q,arguments)},addAllocations:function(e){return this._handleCall("addAllocations",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.addAllocations(e)))},updateAllocations:function(e,t){return this._handleCall("updateAllocations",arguments,(i=>{r.assertArray(e,i,0),r.assertNumberOrNull(t,i,1)}),(()=>this._application.updateAllocations(e,t)),{ctx:!0})},removeAllocations:function(e){return this._handleCall("removeAllocations",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.removeAllocations(e)))},getAllocationsForActivity:function(e){var t=this;return t._handleCall("getAllocationsForActivity",arguments,(t=>{r.assertNotNull(e,t,0)}),(()=>t._application.getAllocationsForActivity(e)),{ctx:!1,r:e=>t._mapObjectsToIDsInArrayForLogging(e)})},getAllocationsForResource:function(e){var t=this;return t._handleCall("getAllocationsForResource",arguments,(t=>{r.assertNotNull(e,t,0)}),(()=>t._application.getAllocationsForResource(e)),{ctx:!1,r:e=>t._mapObjectsToIDsInArrayForLogging(e)})},addLinks:function(e){return this._handleCall("addLinks",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.addLinks(e)))},updateLinks:function(e,t){return this._handleCall("updateLinks",arguments,(i=>{r.assertArray(e,i,0),r.assertNumberOrNull(t,i,1)}),(()=>this._application.updateLinks(e,t)))},removeLinks:function(e){return this._handleCall("removeLinks",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.removeLinks(e)))},addEntities:function(e){return this._handleCall("addEntities",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.addEntities(e)))},updateEntities:function(e,t){return this._handleCall("updateEntities",arguments,(i=>{r.assertArray(e,i,0),r.assertNumberOrNull(t,i,1)}),(()=>this._application.updateEntities(e,t)))},removeEntities:function(e){return this._handleCall("removeEntities",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.removeEntities(e)))},addHierarchySupplementaryDefinitions:function(e){return this._handleCall("addHierarchySupplementaryDefinitions",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.addHierarchySupplementaryDefinitions(e)))},updateHierarchySupplementaryDefinitions:function(e,t){return this._handleCall("updateHierarchySupplementaryDefinitions",arguments,(i=>{r.assertArray(e,i,0),r.assertNumberOrNull(t,i,1)}),(()=>this._application.updateHierarchySupplementaryDefinitions(e,t)))},removeHierarchySupplementaryDefinitions:function(e){return this._handleCall("removeHierarchySupplementaryDefinitions",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.removeHierarchySupplementaryDefinitions(e)))},addSymbols:function(e){return this._handleCall("addSymbols",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.addSymbols(e)))},updateSymbols:function(e,t){return this._handleCall("updateSymbols",arguments,(i=>{r.assertArray(e,i,0),r.assertNumberOrNull(t,i,1)}),(()=>this._application.updateSymbols(e,t)))},removeSymbols:function(e){return this._handleCall("removeSymbols",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.removeSymbols(e)))},addTooltipTemplates:function(e){return this._handleCall("addTooltipTemplates",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.addTooltipTemplates(e)))},updateTooltipTemplates:function(e,t){return this._handleCall("updateTooltipTemplates",arguments,(i=>{r.assertArray(e,i,0),r.assertNumberOrNull(t,i,1)}),(()=>this._application.updateTooltipTemplates(e,t)))},removeTooltipTemplates:function(e){return this._handleCall("removeTooltipTemplates",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.removeTooltipTemplates(e)))},addCalendarGrids:function(e){this.addPeriodHighlighters(e)},addPeriodHighlighters:function(e){return this._handleCall("addPeriodHighlighters",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.addPeriodHighlighters(e)))},updateCalendarGrids:function(e,t){return this.updatePeriodHighlighters(e,t)},updatePeriodHighlighters:function(e,t){return this._handleCall("updatePeriodHighlighters",arguments,(i=>{r.assertArray(e,i,0),r.assertNumberOrNull(t,i,1)}),(()=>this._application.updatePeriodHighlighters(e,t)))},removeCalendarGrids:function(e){return this.removePeriodHighlighters(e)},removePeriodHighlighters:function(e){return this._handleCall("removePeriodHighlighters",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.removePeriodHighlighters(e)))},addDateLines:function(e){return this._handleCall("addDateLines",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.addDateLines(e)))},updateDateLines:function(e,t){return this._handleCall("updateDateLines",arguments,(i=>{r.assertArray(e,i,0),r.assertNumberOrNull(t,i,1)}),(()=>this._application.updateDateLines(e,t)))},removeDateLines:function(e){return this._handleCall("removeDateLines",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.removeDateLines(e)))},addTableRowDefinitions:function(e){return this._handleCall("addTableRowDefinitions",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.addTableRowDefinitions(e)))},updateTableRowDefinitions:function(e,t){return this._handleCall("updateTableRowDefinitions",arguments,(i=>{r.assertArray(e,i,0),r.assertNumberOrNull(t,i,1)}),(()=>this._application.updateTableRowDefinitions(e,t)))},removeTableRowDefinitions:function(e){return this._handleCall("removeTableRowDefinitions",arguments,(t=>{r.assertArray(e,t,0)}),(()=>this._application.removeTableRowDefinitions(e)))},removeAll:function(e){return this._handleCall("removeAll",arguments,void 0,(()=>this._application.removeAll(e)))},scrollToObject:function(e,t,i,a){return this._handleCall("scrollToObject",arguments,(a=>{r.assertNumber(e,a,0),"string"!=typeof t&&r.assertNotNull(t,a,1),r.assertNumberOrNull(i,a,2)}),(()=>this._application.scrollToObjectData(e,t,i,a)))},scrollViewAreaHorizontally:function(e,t){return this._handleCall("scrollViewAreaHorizontally",arguments,(i=>{r.assertNumber(e,i,0),r.assertNumber(t,i,1)}),(()=>this._application.scrollViewAreaHorizontally(e,t)))},scrollViewAreaVertically:function(e,t){return this._handleCall("scrollViewAreaVertically",arguments,(i=>{r.assertNumber(e,i,0),r.assertNumber(t,i,1)}),(()=>this._application.scrollViewAreaVertically(e,t)))},calculateWorkingTime:function(e,t,i){var a=this;return a._handleCall("calculateWorkingTime",arguments,(e=>{let n=a._application.model();t=n.dateTimeValueToDate(t),i=n.dateTimeValueToDate(i),r.assertDate(t,e,1),r.assertDate(i,e,2)}),(()=>this._application.calculateWorkingTime(e,t,i)),{ctx:!1})},addWorkingTime:function(e,t,i){var a=this;return a._handleCall("addWorkingTime",arguments,(e=>{t=a._application.model().dateTimeValueToDate(t),"-0"===i&&(i=-0),r.assertDate(t,e,1),r.assertNumber(i,e,2)}),(()=>this._application.addWorkingTime(e,t,i)),{ctx:!1})},scrollToDate:function(e,t){var i=this;return i._handleCall("scrollToDate",arguments,(a=>{e=i._application.model().dateTimeValueToDate(e),r.assertDate(e,a,0),r.assertStringOrNull(t,a,1)}),(()=>i._application.scrollToDate(e,t)))},selectObjects:function(e,t,i){return this._doSelectOrHighlightObjects(e,t,i,"selectObjects",0)},highlightObjects:function(e,t,i){return this._doSelectOrHighlightObjects(e,t,i,"highlightObjects",1)},_doSelectOrHighlightObjects:function(e,t,i,a,n){return this._handleCall(a,arguments,(i=>{r.assertNumber(e,i,0),r.assertArray(t,i,1)}),(()=>this._application.selectOrHighlightObjectsByObjectType(e,t,i,n)),{ctx:!1})},getSelectedObjects:function(){var e=this;return e._handleCall("getSelectedObjects",arguments,void 0,(()=>this._application.getSelectedDataObjectsAndType()),{ctx:!1,r:t=>e._mapObjectsToIDsInArrayForLogging(Object.assign({},t),"object*s")})},fitTimeAreaIntoView:function(e,t){var i=this;let a="fitTimeAreaIntoView";return i._handleCall(a,arguments,(a=>{let n=i._application.model();e=n.dateTimeValueToDate(e),t=n.dateTimeValueToDate(t),r.assertDateOrNull(e,a,0),r.assertDateOrNull(t,a,1)}),(()=>{let n=i._application.fitTimeAreaIntoView(e,t);return n?.catch((e=>{e&&i._handleException(e,a)})),n}))},setTimeResolutionForView:function(e,t,i){var a=this;return a._handleCall("setTimeResolutionForView",arguments,(n=>{i=a._application.model().dateTimeValueToDate(i),r.assertNumberOrString(e,n,0),r.assertNumberOrNull(t,n,1),r.assertDateOrNull(i,n,2)}),(()=>a._application.setTimeResolutionForView(e,t,i)))},render:function(){return this._handleCall("render",arguments,void 0,(()=>this._application.render()))},_showAbout:function(){var e=`${de.lt}${this.options.customLicenseTexts??""}`.replace(/<n>/g,`<div class="${te}"><span class="${ie}">`).replace(/<\/n>/g,"</span>").replace(/<t>/g,"").replace(/<\/t>\n*/g,"</div>").replace(/\n/g,"<br/>"),t=this.options.customCopyrightYear||"2018-"+ce.nwafCopyrightYear.substring(ce.nwafCopyrightYear.length-4),i=this.options.applicationName,a=this.options.applicationVersion;let n=this.element().querySelector(`.${ee}`);n||(this.element().querySelector(`.${oe}`).innerHTML=`\n         <dialog class="${ee}">\n            ${de.hd.replace("%nwafVersion%",ce.nwafVersion).replace("%version%",this._getAPIOption("version")||"x.x.x").replace("%name%",this.options.customName||"NETRONIC RAB Widget").replace("%appNameAndVersion%",i&&a?`<span class="${ae}">${i}</span><span class="${ae}">${a}</span><hr/>`:"").replace("%name%",this.options.customName||"NETRONIC RAB Widget").replace("%copyrightYear%",t).replace("%nwafYear%",ce.nwafCopyrightYear).replace("%license%",this._application.__id).replace("%licensee%",this._application.__n).replace("%expire%",this._application.__e).replace("%userAgent%",navigator?navigator.userAgent:"").replace("%lt%",e)}\n         </dialog>\n         `,n=this.element().querySelector(`.${ee}`),n.addEventListener("click",(function(e){let t=n.getBoundingClientRect();t.top<=e.clientY&&e.clientY<=t.top+t.height&&t.left<=e.clientX&&e.clientX<=t.left+t.width||n.close()}))),n.showModal(),n.scrollTop=0},about:function(){return this._handleCall("about",arguments,void 0,(()=>{this._application.render(),this._showAbout()}))},saveAsPDF:function(e,t){var i=this;let a="saveAsPDF";return i._handleCall(a,arguments,(e=>{if(t){var i="options.printingMode";r.assertNumberOrNull(t.printingMode,e,i),null!=t.printingMode&&r.assert(t.printingMode>=0&&t.printingMode<=2,i+" is out of range"),i="options.zoomFactorInPercent",r.assertNumberOrNull(t.zoomFactorInPercent,e,i),null!=t.zoomFactorInPercent&&r.assert(t.zoomFactorInPercent>=0,i+" is out of range"),i="options.horPageCountLimit",r.assertNumberOrNull(t.horPageCountLimit,e,i),null!=t.horPageCountLimit&&r.assert(t.horPageCountLimit>=0,i+" is out of range"),i="options.verPageCountLimit",r.assertNumberOrNull(t.verPageCountLimit,e,i),null!=t.verPageCountLimit&&r.assert(t.verPageCountLimit>=0,i+" is out of range"),i="options.pageOrientation",r.assertNumberOrNull(t.pageOrientation,e,i),null!=t.pageOrientation&&r.assert(0===t.pageOrientation||1===t.pageOrientation,i+" is out of range"),i="options.leftPageMargin",null!=t.leftPageMargin&&r.assert(t.leftPageMargin>=0,e,i+" is out of range"),i="options.topPageMargin",null!=t.topPageMargin&&r.assert(t.topPageMargin>=0,e,i+" is out of range"),i="options.rightPageMargin",null!=t.rightPageMargin&&r.assert(t.rightPageMargin>=0,e,i+" is out of range"),i="options.bottomPageMargin",null!=t.bottomPageMargin&&r.assert(t.bottomPageMargin>=0,e,i+" is out of range"),i="options.pageFormat",r.assertStringOrNull(t.pageFormat,e,i),t.pageFormat&&t.pageFormat.indexOf("*")<0&&r.assert(this._application._getSupportedPageFormatsForPrinting().indexOf(t.pageFormat.toUpperCase())>=0,i+" is out of range"),i="options.watermarkSymbolID",r.assertStringOrNull(t.watermarkSymbolID,e,i),i="options.author",r.assertStringOrNull(t.author,e,i),i="options.title",r.assertStringOrNull(t.title,e,i),i="options.subject",r.assertStringOrNull(t.subject,e,i),i="options.keywords",r.assertStringOrNull(t.keywords,e,i)}}),(()=>{let n=i._application.saveAsPDF(e,t);return n?.then((e=>{e&&i._handleWarning(B.MISCELLANEOUS,{text:e})})).catch((e=>{e&&i._handleException(e,a)})),n}))},cancelSaveAsPDF:function(){return this._handleCall("cancelSaveAsPDF",arguments,void 0,(()=>this._application.cancelSaveAsPDF()),{ctx:!1})},serializeCollapseStates:function(e){return this._handleCall("serializeCollapseStates",arguments,(t=>{r.assert(e>=M._Minimum&&e<=M._Maximum,t,!0)}),(()=>this._application.serializeCollapseStates(e)),{ctx:!1})},deserializeCollapseStates:function(e,t){return this._handleCall("deserializeCollapseStates",arguments,(i=>{r.assert(e>=M._Minimum&&e<=M._Maximum,i,!0),r.assertStringOrNull(t,i,1)}),(()=>this._application.deserializeCollapseStates(e,t)))},determineObjectByPageCoordinates:function(e,t){return this._handleCall("determineObjectByPageCoordinates",arguments,(i=>{r.assertNumber(e,i,0),r.assertNumber(t,i,1)}),(()=>this._application.determineObjectByPageCoordinates(e,t)))},setCollapseStatesForEntityRows:function(e,t,i){return this._handleCall("setCollapseStatesForEntityRows",arguments,(a=>{r.assertNumber(e,a,0),r.assertNumberOrNull(t,a,1),r.assertNumberOrNull(i,a,2)}),(()=>this._application.setCollapseStatesForRows(M._Entities,e,t,i)))},setCollapseStatesForRows:function(e,t,i,a,n){return this._handleCall("setCollapseStatesForRows",arguments,(o=>{r.assert(e>=M.Activities&&e<=M._Maximum,o,!0),r.assertNumber(t,o,1),r.assertNumberOrNull(i,o,2),r.assertNumberOrNull(a,o,3),r.assertNumberOrNull(n,o,4)}),(()=>this._application.setCollapseStatesForRows(e,t,i,a,n??T.Default)))},processOnDrop:function(e){return this._handleCall("processOnDrop",arguments,(t=>{r.assert("object"==typeof e,t,!0)}),(()=>this._application.processOnDrop(e)))},_handleCallback:function(e,t,i){var a=this;a._currentCallbackName=e;var n=!1!==i?.l&&a.options.loggingEnabled;if(n){var o=t&&Object.assign({},t);i?.o?.forEach((e=>{a._mapObjectToIDForLogging(o,e)})),i?.a?.forEach((e=>{a._mapObjectsToIDsInArrayForLogging(o,e)})),i?.d?.forEach((e=>{delete o[e]}));var r=a._startLoggingAction(e,t?[o]:void 0,"callback"),l={},s=i?.p?.call(this,t)}try{var d=a.options[e];"function"==typeof d?d.call(a,t):i?.n?.call(a)}catch(e){throw n&&(l._error=e),e}finally{n&&(i?.m?.call(a,o,t,s,l),a._endLoggingAction(Object.keys(l).length?l:void 0,r)),delete a._currentCallbackName}},_areArraysEqual:function(e,t){var i=e.length;if(i!==t.length)return!1;for(var a=0;a<i;a++)if(e[a]!==t[a])return!1;return!0},_callOnDrag:function(e){this._handleCallback("onDrag",e,{l:this.options.loggingVerboseLevel>=20,o:["object","newRowObject"],m:function(e,t,i,a){t.cancel!==e.cancel&&(a.cancel=t.cancel),t.dropAllowed!==e.dropAllowed&&(a.dropAllowed=t.dropAllowed),t.promise&&(a.promise="*Promise*")}})},_callOnDragStart:function(e){this._handleCallback("onDragStart",e,{o:["object"],m:function(e,t,i,a){t.cancel!==e.cancel&&(a.cancel=t.cancel)}})},_callOnDragEnd:function(e){this._handleCallback("onDragEnd",e,{o:["object"]})},_callOnDrop:function(e){this._handleCallback("onDrop",e,{o:["object","newRowObject"],a:["coupledObject*s"],m:function(e,t,i,a){t.cancel!==e.cancel&&(a.cancel=t.cancel),t.promise&&(a.promise="*Promise*")}})},_callCanDrag:function(e){this._handleCallback("canDrag",e,{l:this.options.loggingVerboseLevel>=10,o:["object"],a:["selectedObject*s"],d:["event"],m:function(e,t,i,a){t.cancel!==e.cancel&&(a.cancel=t.cancel),t.allowedDragModes!==e.allowedDragModes&&(a.allowedDragModes=t.allowedDragModes),t.promise&&(a.promise="*Promise*")}})},_callOnDetermineColumnDefinitions:function(e){var t=this;t._handleCallback("onDetermineColumnDefinitions",e,{o:["object"],n:function(){var i=e.tableType?"E":t.options.viewType;t._defaultColumnDefinitions[i]||(t._defaultColumnDefinitions[i]=e.columns.slice(),t._defaultColumnDefinitions[i][0]=Object.assign({},e.columns[0],{textSource:"TableText"})),e.columns=t._defaultColumnDefinitions[i]},m:function(t,i,a,n){i.columns!==t.columns&&(n.columns=e.columns)}})},_callOnShowTooltip:function(e){this._handleCallback("onShowTooltip",e,{l:this.options.loggingVerboseLevel>=10,o:["object","periodHighlighter"],d:["event","calendarGrid"],m:function(e,t,i,a){t.promise&&(a.promise="*Promise*")}})},_callOnShowContextMenu:function(e){var t=this;t._lastContextMenuEventTimeStamp!==e.event.timeStamp&&(t._lastContextMenuEventTimeStamp=e.event.timeStamp,t._handleCallback("onShowContextMenu",e,{o:["object","periodHighlighter"],d:["calendarGrid","event"],m:function(e,t,i,a){t.promise&&(a.promise="*Promise*")}}))},_callOnCloseContextMenu:function(){this._handleCallback("onCloseContextMenu"),delete this._lastContextMenuEventTimeStamp},_callOnClicked:function(e){this._handleCallback("onClicked",e,{o:["object","periodHighlighter"],d:["calendarGrid","event"]})},_callOnDoubleClicked:function(e){this._handleCallback("onDoubleClicked",e,{o:["object","periodHighlighter"],d:["calendarGrid","event"]})},_callCanSelect:function(e){this._handleCallback("canSelect",e,{o:["object"],a:["otherSelectedObject*s"],d:["event"]})},_callOnSelectionChanged:function(e){var t=this;this._handleCallback("onSelectionChanged",e,{o:["object"],a:["selectedObject*s","previouslySelectedObject*s"],d:["event"],p:function(){return e.selectedObjects?.slice()},m:function(i,a,n,o){a.cancel!==i.cancel&&(o.cancel=a.cancel),Array.isArray(a.selectedObjects)&&t._areArraysEqual(n,a.selectedObjects)||(o.selectedObjects=a.selectedObjects,t._mapObjectsToIDsInArrayForLogging(o,"selectedObject*s")),a.objectType!==i.objectType&&(o.objectType=a.objectType||0),a.visualType!==i.visualType&&(o.visualType=e.visualType)}})},_callOnTimeAreaViewParametersChanged:function(e){this._handleCallback("onTimeAreaViewParametersChanged",e)},_callOnVerticalScrollOffsetChanged:function(e){this._handleCallback("onVerticalScrollOffsetChanged",e,{o:["rowObject*AtTop","topViewRowObject*AtTop"]})},_callOnCollapseStateChanged:function(e){this._handleCallback("onCollapseStateChanged",e,{o:["object"],m:function(e,t,i,a){t.promise&&(a.promise="*Promise*")}})},_callOnCurveCollapseStateChanged:function(e){this._handleCallback("onCurveCollapseStateChanged",e,{o:["object"],m:function(e,t,i,a){t.promise&&(a.promise="*Promise*")}})},_callOnCurvePaneResized:function(e){this._handleCallback("onCurvePaneResized",e,{o:["object"]})},_callOnTableCellDefinitionWidthChanged:function(e){this._handleCallback("onTableCellDefinitionWidthChanged",e,{o:["tableRowDefinition"]})},_callVisibilityFilter:function(e,t){let i=`visibilityFilterFor${e}`;this._handleCallback(this.options[i]?i:"visibilityFilter",t,{l:this.options.loggingVerboseLevel>=30,o:["object"],m:function(e,t,i,a){a.result=t.result}})},_callCompareObjects:function(e,t){this._handleCallback(e,t,{l:this.options.loggingVerboseLevel>=30,o:["objectA","objectB"],m:function(e,t,i,a){a.isALowerThanB=t.isALowerThanB}})},_callOnSaveAsPDFProgress:function(e){this._handleCallback("onSaveAsPDFProgress",e,{m:function(e,t,i,a){t.promise&&(a.promise="*Promise*")}})},_callOnRowSortingChangeRequested:function(e){this._handleCallback("onRowSortingChangeRequested",e)}};e.exports=o.extendClass("rabWidget",c,ge)},8684:(e,t,i)=>{var a=i(8680),n=i(3571),o=n.nClassFactory,r=n.nDateHelper,l=n.nDefaultSeparator,s=n.nPropertyComposer,d=n.nTemplateResolver,c=i(9280).RowInsertionMode,u=i(5674).TimeUnit,p=i(476),h=p.BarDragModes,g=p.ObjectType,m=p.TargetPositions,_=p.UpdateModes,f=p.ViewType,y=p.VisualType,b=i(5977),A=b.RAB_GANTT_VIEW_CLASS,v=b.RAB_MESSAGE_PANE_CLASS,I=b._rabTimeUnitToTimeUnit,C=i(7433).vswVersion,w=i(6288),T=i(5984),R=i(501),S=i(5425),P=i(508);const O=i(7082);var D={construct:function(e,t){n.nLocales.locale(e.options.locale);let i=Object.assign({widget:e,fullScreenGanttViewElem:e.element().querySelector(`.${A}`),title:"",optionsCollectorClass:S,modelClass:T,ganttViewClass:R,viewClass:P},t);i.modelOptions=Object.assign({handleWarningFunc:this.handleWarning.bind(this)},t.modelOptions||{}),this._super(i);var a=this.handleAPIOptionChanged.bind(this);["defaultCalendarID"].forEach((e=>this.setAPIOptionChangedCallback(e,1,a)))},handleWarning:function(e,t){this._options.widget._handleWarning(e,t)||this._super(e,t)},handleAPIOptionChanged:function(e,t,i){if("defaultCalendarID"===e){this.model().handleAPIOptionChanged(e,t,i);var a=this.isRenderingNecessary(),n=this._updateResourcesAndActivitiesThatAreUsingTheDefaultCalendar();n&&!a&&(n=!1,this.render())}else this._super(e,t,i)},setOption:function(e,t,i){var a=this,n=!1;switch(e){case"viewType":a._viewType=t,n=!0;break;case"maximumSnapDistance":n=!0}a.setViewOptionIndirectly(e,t,n,false),void 0===a&&a._super(e,t,i)},setViewOptionIndirectly:function(e,t,i,a){var n=this;if("maximumSnapDistance"===e&&"string"==typeof t){if(!this._viewInitialized){var o=function(e,t,i,a){if(isFinite(t)){var n,o,r,l=e.length;for(r=0,n=0,o=317;r<l;r++)n+=o*e.charCodeAt(r),o=(o*=317)%i||i;0==(n%=a)&&(n=1);var s=t%1e3,d=n*((t-s)/1e3);return d=1e3*(d%=a)+n*s,1===(d%=a)}};t=function(e){if(e){for(var t,i="",a=e.length,n=0;n<a;n++)t=e[n],i+=String.fromCharCode(t>251&&t<254&&n+5<a?1073741824*(t-252)+(e[++n]-128<<24)+(e[++n]-128<<18)+(e[++n]-128<<12)+(e[++n]-128<<6)+e[++n]-128:t>247&&t<252&&n+4<a?(t-248<<24)+(e[++n]-128<<18)+(e[++n]-128<<12)+(e[++n]-128<<6)+e[++n]-128:t>239&&t<248&&n+3<a?(t-240<<18)+(e[++n]-128<<12)+(e[++n]-128<<6)+e[++n]-128:t>223&&t<240&&n+2<a?(t-224<<12)+(e[++n]-128<<6)+e[++n]-128:t>191&&t<224&&n+1<a?(t-192<<6)+e[++n]-128:t);return i}}(function(e,t){var i,a=e.length,n=t?Math.ceil((3*a+1>>>2)/t)*t:3*a+1>>>2,o=new Array(n);if(!e.match(/[^A-Za-z0-9\+=\/]/)){for(var r,l,s=0,d=0,c=0;c<a;c++)if(l=3&c,s|=((i=e.charCodeAt(c))>64&&i<91?i-65:i>96&&i<123?i-71:i>47&&i<58?i+4:43===i?62:47===i?63:0)<<18-6*l,3===l||a-c==1){for(r=0;r<3&&d<n;r++,d++)o[d]=s>>>(16>>>r&24)&255;s=0}return o}}(t.replace(/\s+/g,""))),this.l=function(){if(t){var e=t.indexOf("-{"),i=t.substring(0,Math.max(e,0)).split("-");if(3===i.length&&(i.push(t.substring(++e).replace(/\s+$|\0+$/g,"")),o(i[3],+i[0]||0,1009,979907)&&o(i[3],+i[1]||0,1013,983347)&&o(i[3],+i[2]||0,1019,987457)))try{if(t=JSON.parse(i[3])){if(9912===t.e)n.__e="never";else{var a=new Date(2e3+Math.floor(t.e%1e4/100),t.e%100,1);a.setDate(a.getDate()-1),n.__e=("0"+a.getDate()).slice(-2)+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+a.getFullYear()}n.__id=t.id,n.__n=t.n+(""!==t.u?" ("+t.u+")":""),n._f=t.f,n._ed=btoa(t.ed),n.getAPIOption("version")||"U0U="!==n._ed||(n.setAPIOption("version",C),n.setAPIOption("customName",n.getAPIOption("customName")+" "+t.ed))}if(t&&t.f&&t.f.indexOf(1001)>=0&&(!Microsoft||!Microsoft.Dynamics||!Microsoft.Dynamics.NAV||!Microsoft.Dynamics.NAV.InvokeExtensibilityMethod))return;if(t){if(t.e){var r=new Date(2e3+Math.floor(t.e%1e4/100),t.e%100,1),l=Date.now();if(r>l){var s=Math.floor((r.getTime()-l)/864e5);return 0===s?window.alert(atob("TkVUUk9OSUM6IExpY2Vuc2UgZXhwaXJlcyBhdCB0aGUgZW5kIG9mIHRvZGF5ISA")):s<15&&window.alert(atob("TkVUUk9OSUM6IExpY2Vuc2UgZXhwaXJlcyBpbiA")+s+atob("IGRheXMh")),!0}return!1}return!0}}catch(e){}}}(),void 0===n.l&&window.alert(atob("TkVUUk9OSUM6IEludmFsaWQgbGljZW5zZSBrZXkh"))}}else this._super(e,t,i,a)},isInUpdateRowObjectMethod:function(){return this._isInUpdateRowObjectMethod},updateActivities:function(e,t){var i=this;if(i._isInUpdateRowObjectMethod=!0,i._super(e,t),i.view()){var a=i.ganttView();a.viewType()===f.Activities&&a.checkResendingCanDrag(e)}i._isInUpdateRowObjectMethod=!1},updateAllocations:function(e,t){var i=this;if(i._super(e,t),i.view()){var a=i.ganttView();[f.Resources,f.SkilledResources].includes(a.viewType())&&a.checkResendingCanDrag(e)}},updateEntities:function(e,t){var i=this;i._isInUpdateRowObjectMethod=!0,i._super(e,t),i._isInUpdateRowObjectMethod=!1},updateResources:function(e,t){var i=this;i._isInUpdateRowObjectMethod=!0,i._super(e,t),i._isInUpdateRowObjectMethod=!1},render:function(){if(this.l){let e=this._options.widget._handleEventuallyAsynchronousFunctionStart("render");this._super(),e&&this._options.widget._handleEventuallyAsynchronousFunctionEnd("render"),this._options.widget._logRenderingTime()}else{var e=this._options.widget,t=a.select(e.element());t.selectAll("*").remove(),t.append("div").style("width","100%").style("height","100%").style("background-image",'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAY0AAAFxCAYAAACP9/SzAAAACXBIWXMAAAwuAAALEwF92bblAAAAIGNIUk0AAHolAACAgwAA+f8AAIDoAABSCAABFVgAADqXAAAXb9daH5AAABBxSURBVHja7N3vcxT3fcDxz+6e7iQjCQuEpHONbBPkEGcmnbFxbadjJ+kEN3nS/J3NwzbJTJOmmTyrk8wYG8GkNjiuAElGIAnF0v2SdvsAmxnXtBZwd9pbvV6PGBD68bnTvm93b7+b7LXaRYyI+9vb8etf/1u0Wq2v/dvfvfFGXLjwnQD40s7OTvx1ZyciGfAXKiLSLI2ZmVMxPj7+lX+6ubISv/vdf3ztv6RpGu+++48xNz8/UjOteVoBVfXpXz6JTqcztK9357PP4vzSy3HixInKzjT1tAKqqiiGeyCl2+3Gvbt3Kz1T0QCqK0mG/iXTrNqbVdEA6JOpqamYm5uv9M/onAZwrCwsNGNqaiqK6N+hq6KIyLIsJicnI8sy0QCo0t7AszMzBvGEHJ4CjpW8yA3h2ETjCE5qAdimjWg0EtEAKuLBu4GLkfu+a7/5za9Ho25JEr3e/lAv1AEYXDTy+MN778XExETkxejEo7a2uurRAzgCm5ubI/c9V+ZEeFF4AgIl3DZV7OepTDSeeWbCsxMonRMnTkS9XheNMmk2m7Gw0PTsBErn1KlTcf78UmV+npG+uC9N0zi7uBgXL74ejUbDsxMonSRJ4tXXXot6ox43rl9/eGuH/f390fx5Pv30v0fykFteFNFoNGLGlZ3A/+GDDy5H93+94/Jb58/HqVOnj+T76XQ60Wm3H/y52408z2PULiSojdoNQABGVaPRGPmjIpYRAUA0ABANAEQDANEAQDQARsIj1hey5JBoADxSrfbV65eTJKnUkh6iAdBHzz9/NhqNRqRpGrVaLZrN52JyctJgnkKy12rbWQMqa3+/F71uL9Iss9xQP/bejACo9EauNha12phB9InDUwCIBgAD2HO7f//+E/3HifHxqDs+CIyAdrsdnU47YuTWlC1hND76rz8/2X+sjUXzOTc/Asorz/NYvX0r7ty5EwcHBwbSB098eGp/vxc3V1bi3r17pgiU0s2bK7G2tiYYZYjGl7a2Nk0RKKXtrS1DKFs0ABANgNGXOPHdb7Uzc3P//8wjovhiN6/X65kYMPIajfE4efJkFGFBjMeOxosvvnSoD/xzuy0aQCVMTU/FCy++aBBP4FCHp/I8D0EGKsP2bLDRAFANRAMA0QBANAAQDQBEAwDRAEA0AEA0ABANAEQDANEAQDQAEA0AeMpouAEWUBXu6PfEakVRfMNsHwz3mz4OYFTkB/nDP9u2PWY0ri5f+eYiF0V0Oh3TAiphe3srlq98+HD7xmNEo9VqmQJwvPY08jxs+57M058IF2mgrOxFlC8aWeYNWEA5ZVlmCGWKRpqmcXr2jCkCpbTQbD58Mw/9URsbG3uCPb4i6vV6zC80Y3p62hSBUpqdPRNpmsVn6+vR7XYiSdMo8tw7pp5Cstdqmx4Ah+KEBACiAYBoACAaAIgGAKIBgGgAgGgAIBoAiAYAogGAaAAgGgAgGgCIBgCiAYBoACAaAIgGAIgGAKIBgGgAIBoAiAYAogGAaACAaAAgGgCIBgCiAYBoACAaACAaAIgGAKIBgGgAIBoAiAYAiAYAogGAaAAgGgCIBgCiAYBoAIBoACAaAIgGAKIBgGgAIBoAIBoAiAYAogGAaAAgGgCIBgCIBgCiAYBoACAaAIgGAFVWMwKqaPfzz2N5eTlWV1ej1+tGJImhDEtRRCRJzDw7ExcuXIizi4tmUiHJXqtdGANV0um047f//tu4e3fDMI56A5Mk8eZbb8XS0suGUREOT1E5KysrglGanY4irl27ZhCiAeW1vb1tCCWy3+sZgmhAeSXh/EW5HhCPR5U4Ec4x2nalMT7eiCRJoiicyuv3bHu9bvTsVYgGVMXk5GT8+NKlqNfrESEa/Y7G1eXluHLlQ8MQDaiGNE2i0Wh8EQ36vjEZszk5Fr9HRsBx4rCU2SIaAIgGAKIBgGgAIBoA8JD3yNF3eZ4P9CLgB4uoJpG40hhEg9G1u7sbly+/Hzs7OwNdyqOIIrI0jTNzc3HhwndiYmLC8EE0GDW3bt2MG9evD+3rra+vx8adO/GDH/4oGo2GBwCGwDkN+rcHkA//4q6NjY24f/++4YNoMHKO4BTD6dOnY3p62uxhSByeYqCyLIvpkyf72pMiItIkjfn5+Xjlu6/E+Pi4QYNoUAVTU9Nx6dK70WjUo59LE6WpnWQQDSonSb58e2zqXjxQAV6uMQRWPwXRgBFUr48ZwoBkWWYIx4DDUxwb7XY7rly5EmO1Mfd+6PerzyyNtdU1gxANqI5OpxOX33/fIOBpXiAYAVVTOIdSsgfE4yEaUGKWFAHRgEM7e3bRBX8lMjc3bwiiAeU1MzMTb7/zTpw+PesiwCOUZVmcO/eteOPNNw2jQpwIp5KazefiJz+dj83Nzej1unFwkEen3TaYIXp2ZiZmZ2cNQjRgdF7pnjlzxiCgj+y7AyAaAIgGAKIBgGgAIBrwKI9aLaIoCqtIgGjA143Vvv4O7lqtZslsEA34uoVmM6anp7/ydy+dOxdjY+5hAVWR7LXaDh7QN1tbW3F1eTk6nXacXVyMpaWXI3GfVxANAI4fh6cAEA0ARAOAI2SVWwZib28v2pYiPxL1ej0mJycNAtGg/Pb39+ODDy7HjevXReMIo7H4wgvx6quvuYMhfefdU/RNnufx3nv/GR9/9JFhlMDfPP98vP32O1Gv1w2DvnFOg765u7ERn9y4YRAlcfvWrVi9fdsgEA3Kqd1ux8HBgUGUSMshQkSDsnLldxkfEzOgv5wIZyjm5ufjmYmJyPPcMPoZhTSNXrcX6+trZotoUJHd2TSNixdfj9nZWcMYgN3d3fjVL38RrVbLMBj877MRMAy5cx0Ds9/rGQKiAYBoACAaAIgGAIgGAKIBwEC5TqMidnZ24q87OxGDvgK4iEizNGZmTllBFUSDUfXpXz6JTqcztK9357PP4vzSy3HixAnDh2PE4amKKIrhrnDf7Xbj3t27Bg+iwUg6gpXp0szTB0QDDmFqairm5uYNAo4Z5zQqbGGhGVNTU1FE/w5dFUVElmUxOTkZWZYZMogGVdobeHZmxiCAvnF4qsLywv0VANFgFLmFnNkiGnAYD94NXBjEwJohGgyPcxoMIRp5/OG992JiYiLyQjz6+qovSaLX2x/qhZ2IBgzc5uamIUAVXqgYAX3bozCCEu7lmQGiQUmdOHEi6vW6QZTIM89MGAKiQTmdOnUqzp9fMoiSaDabsbDQNAj6yjkN+iZJknj1tdei3qjHjevXo9VqRUTE/v6+4QzzlWCaxtnFxbh48fVoNBoGgmhQ7g3W9773t/Htb1+ITrsdERGdbjfyPA9vDB28vCii0WjEjJUAEA1GSaPR8CoXqvjC0AgAEA0ARAMA0QBANAAQDcrnEetFWEICEA0eqVb76runkySxpAcgGjza88+fjUajEWmaRq1Wi2bzuZicnDQYoK+SvVbbQYyK2N/vRa/bizTLXFgHDIQrwqv0YNbGolYbMwhgYByeAkA0AOg/h6cqpt1uR6fTjrCm7JGYGB+PuvNJiAZll+d5rN6+FXfu3ImDgwMDOapfqNpYNJ9z8yOqy+Gpirh5cyXW1tYE44jt7/fi5spK3Lt3zzAQDcpre2vLEEpka2vTEBANAESDKkic+AYGz4nwims0xuPkyZNRhAv/+9roiCjiwWHBXq9nIIgG1TA1PRUvvPiiQQzIn9tt0eBYcXiq6uxgDEye5+aLaKAaAKIBgGgAIBoAiAYAogGAaACAaAAgGgCIBgCiAYBoACAaACAaAIgGX3BHvwHP1wg4XtyEqeLyg/zhn4vCMun9a3FipogG1bO9vRXLVz58sMdhA9ffPbiiiE6nYxaIBhXa08jzaLVaBgH0hXMaVWEvomSPhxEgGpRYlmWGUKrHw68WokGJLTSbD0/OcsS/VGkap2fPGASV5JxGRczOnok0zeKz9fXodjuRpGkUee7dPUNUFEXU6/WYX2jG9PS0gVBJyV6rbasCwOH2pI0AANEAQDQAEA0ARAMA0QBANABANAAQDQBEAwDRAEA0ABANABANAEQDANEAQDQAEA0ARAMARAMA0QBANAAQDQBEAwDRAEA0AEA0ABANAEQDANEAQDQAEA0AEA0ARAMA0QBANAAQDQBEAwBEAwDRAEA0ABANAEQDANEAQDQAQDQAEA0ARAMA0QBANAAQDQAQDQBEAwDRAEA0ABANAEQDAEQDANEAQDQAEA0ARAOACqv9/Of/bApPqigikiRmnp2JCxcuxNnFRTMBSmv3889jeXk5VldXo9frRiTJ40ej3WqZ5FNaa7VifX0t3nzrrVhaetlAgNLpdNrx+9//Pu7e3Xiqz+PwVN92Ooq4du2aQQCltLKy8tTBEI0+2+/1DAEope3t7b58HtHopyc4PggwlM1T9Gf7VJuYmDDNx+pCGr1eN3r2KoCKbNPGxxuRJEkURfHN0finn/3M1B5zwFeXl+PKlQ8NAxh5k5OT8eNLl6Jer0fEIaLRaIyb2uPuno3VDAGohDRNotFofBGNQ3y8kT2+w+zCAVRxmyYaAIgGAKIBgGgAIBoAVIr3jgIMQZ7nA1004sGi20kkA16ZQjQABmh3dzcuX34/dnZ2+raUxyOjEUVkaRpn5ubiwoXvxKBW+xANgAG6detm3Lh+fWhfb319PTbu3Ikf/PBH0Wg0+v75ndMAGKAiH/7FwBsbG3H//v2BfG7RABikI1j8+vTp0zE9PT2Qz+3wFMCQZVkW0ydP9rUnRUSkSRrz8/PxyndfifHxwawrKBoAQzY1NR2XLr0bjUY9+rmUXZoO/uCRaAAMWZJ8+fbYdOTu3eacBsCRGM3VskXjCWRZZghAZdTrY4f+2Nq1q1dN7HEqm6WxtrpmEEAltNvtuHLlSozVxg53u9c//emPpgZwTHU6nbj8/vuHf+FsZH3kjn5AWTdPfTqHIhoAx0C/lhQRjT6am5s3BKCUzp5d7MsFf6LRB1mWxblz34o33nzTMIBSmpmZibffeSdOn559qosAa9///t+b5lN6dmYmZmdnDQIotWbzufjJT+djc3Mzer1uHBzk0Wm3Hy8a55eWTBLgmMiyLM6cOfPE/9/hKQBEAwDRAEA0ABANAEQDgMN51OpCRVGM7KpDogEwQGO1r9/rrlarjewtFkQDYIAWms2Ynp7+yt+9dO5cjI2NjeTPk+y12pZmBRigra2tuLq8HJ1OO84uLsbS0suRjNp9XkUDgMfl8BQAogGAaABwhGqbm5sj+83X6/WYnJz0KAIjYW9vL9qPuRR56aLxi3/9l5GOxuILL8Srr77WlztSAQzC/v5+fPDB5bhx/froR2OUv/lutxvXP/44Wq1WvP32O1Gv1z07gVLJ8zz++Mc/xMcffVSJn6cS5zRu37oVq7dve3YCpXN3YyM+uXGjMj9PZU6Et0Z8lw+opna7HQcHB6JRNiN6cSVQcUnFNk61xcXF0Rh8mkav24v19bXI89wzERh5c/Pz8czExEht02o//NE/jMw3u7u7G7/65S+i1Wp5tgEjLU3TuHjx9ZidnR2t73uUvtn9Xs8zDaiMfATPdbgiHADRAEA0ABANAEQDANEA4HiqGQFQVTs7O/HXnZ2IQV+UXUSkWRozM6cqv+L2/wwA+p/h6gQLYCAAAAAASUVORK5CYII=")').node().innerHTML=atob("PGRpdiBzdHlsZT0id2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtkaXNwbGF5OnRhYmxlOyI+PGgyIHN0eWxlPSJkaXNwbGF5OnRhYmxlLWNlbGw7dGV4dC1hbGlnbjpjZW50ZXI7dmVydGljYWwtYWxpZ246bWlkZGxlO2NvbG9yOiNjZDVjNWMiPkxpY2Vuc2UgbWlzc2luZyEgUGxlYXNlIGNvbnRhY3QgeW91ciBzb2Z0d2FyZSB2ZW5kb3IhPC9oMj48L2Rpdj4="),this._viewInitialized=!0,t.append("div").classed(`${v}`,!0),e._showAbout(),delete this._view}},measuredRenderingTime:function(e){this._options.widget._logRenderingTime(e.ganttWidget?"Gantt":"Entities",e.duration)},resolveFormat:function(e,t,i,n,o,l){var c=this,p=c.model();if(e){var h=t,m=i;let f;n&&(t=p.periodHighlighterByID(n.ID),m=g.PeriodHighlighter);var _=function(e,t,a){a?i=m:f!==t&&(i=-1);let n=l?.(e,t,i,a);if(void 0!==n)({wrapperObject:t,wrapperObjectType:i}=n);else if(a&&e.startsWith("?"))t=e.length>1?c.getAPIOption("applicationVariablesMap")?.get(e.substring(1)):void 0,i=-1;else if(a&&e.startsWith("@"))t=e.length>1?c._symbolsMap?.[e.substring(1)].URL:void 0,i=-1;else{let n,o=-1;switch(i){case g.Activity:">Parent"===e?n=p.activityByID(s.compose(t,["ParentRole","ParentID"])):">Calendar"===e&&(n=p.calendarByID(t.CalendarID),o=g.Calendar);break;case g.Resource:">Parent"===e?n=p.resourceByID(s.compose(t,["ParentRole","ParentID"])):">CapacityCurve"===e?(n=p.curveByID(t.CapacityCurveID),o=g.Curve):">LoadCurve"===e?(n=p.curveByID(t.LoadCurveID),o=g.Curve):">InventoryCurve"===e?(n=p.curveByID(t.InventoryCurveID),o=g.Curve):">Calendar"===e?(n=p.calendarByID(t.CalendarID),o=g.Calendar):">Skill"===e&&t instanceof O&&(n=p.skillByID(t.__SkillID),o=g.Skill);break;case g.Entity:">Parent"===e&&(n=p.entityByID(t.ParentID));break;case g.Allocation:">Resource"===e?(n=p.resourceByID(s.compose(t,["ResourceRole","ResourceID"])),o=g.Resource):">Activity"===e&&(n=p.activityByID(s.compose(t,["ActivityRole","ActivityID"])),o=g.Activity);break;case g.Link:if(">SourceActivity"===e||">TargetActivity"===e){let i=e.substring(1);n=p.activityByID(s.compose(t,[i+"Role",i+"ID"])),o=g.Activity}else if(">SourceAllocation"===e||">TargetAllocation"===e){let i=e.substring(1);n=p.allocationByID(s.compose(t,[i+"Role",i+"ID"])),o=g.Allocation}break;case g.PeriodHighlighter:a&&"#RowObject"===e&&(n=h,o=m)}t=n,i=o}return f=t,t};let y=c.locale();if(e){let i=I[c.getAPIOption("maximumTimeResolutionUnit")??c.getAPIOption("timeStepUnit")]??u.Seconds,n=c.model().displayRelativeDates();e=r.applyTimeZone(c.getAPIOption("timeZone"),(function(){return d.resolve(e,`>?@${o??""}`,t,_.bind(c),(function(e,t,o){switch(e){case"date":return r.formatDate(y,i,n,new Date(t),o);case"number":return y.applyNumberFormat((function(){return y.getIntlNumberFormatByKey(o??"default")?.format(t)??a.format("")(t)}))}return t}))}))}}return e},determineObjectByPageCoordinates:function(e,t){return this.ganttView()?.determineObjectByPageCoordinates(e,t)},processOnDrop:function(e){var t=this,i=this.ganttView();if(e&&i){var a=i.viewType(),n=t.model();let o={[g.Activity]:"updateActivities",[g.Allocation]:"updateAllocations",[g.Entity]:"updateEntities",[g.Resource]:a===f.SkilledResources?"setResourcePropertiesForSkills":a===f.Activities?"setResourcePropertiesForActivities":"updateResources",[g.Skill]:"updateSkills",[g.DateLine]:"updateDateLines"}[e.objectType],d=[],u=t.getAPIOption("resetValueForDifferentialUpdate"),p=function(e,i,a,n){e[a]&&(t.getAPIOption("relativeDateModeEnabled")?i[a]="string"==typeof n?n:r.dateToRelativeDateTimeString(n):"string"==typeof e[a]?i[a]=n.toISOString():i[a]=n)},b=function(t,i,a){let o;a.Entries=i.Entries.map((e=>({...e})));let r=e.dragMode&h.DragStart,l=e.dragMode&h.DragEnd;r?o=n.dateTimeValueToDate(t.startsAndEndsOfEntries?.reduce(((e,t)=>n.dateTimeValueToDate(e.Start)>n.dateTimeValueToDate(t.Start)?t:e))?.newStart):l&&(o=n.dateTimeValueToDate(t.startsAndEndsOfEntries?.reduce(((e,t)=>n.dateTimeValueToDate(e.Start)<n.dateTimeValueToDate(t.Start)?t:e))?.newEnd)),t.startsAndEndsOfEntries?.forEach((t=>{let i=a.Entries[t.entryIndex],o=a.Entries[t.entryIndex],s=(r||l)&&n.dateTimeValueToDate(i.Start)<=n.dateTimeValueToDate(i.End);p(i,o,"Start",t.newStart),p(i,o,"End",t.newEnd??t.newStart),s&&n.dateTimeValueToDate(o.Start)>n.dateTimeValueToDate(o.End)&&(e.dragMode===h.DragStart?p(i,o,"Start",n.dateTimeValueToDate(i.End)):p(i,o,"End",n.dateTimeValueToDate(i.Start)))})),o&&a.Entries.forEach(((e,t)=>{let a=i.Entries[t],l=n.dateTimeValueToDate(a.Start),s=n.dateTimeValueToDate(a.End);l?.valueOf()===s?.valueOf()&&(r?l<o:s>o)&&(p(a,e,"Start",o),p(a,e,"End",o))}))},A=function(i,o,r,l){var c={ID:o.ID},m=!1;e.objectType===g.Allocation?m=t.getAPIOption("ignoreCalendarOnAllocationBarInteractions"):e.objectType===g.Activity&&(m=t.getAPIOption("ignoreCalendarOnActivityBarInteractions"));let _=e.newRowObjectType===g.Allocation?n.resourceByID(s.compose(e.newRowObject,["ResourceRole","ResourceID"])):e.newRowObject;var y=_.CalendarID?.toString()||t.getAPIOption("defaultCalendarID");if(r||(r=t.addWorkingTime(y,new Date(-864e13),0))||(r=n.dateTimeValueToDate(t.getAPIOption("start"))),l||(l=t.addWorkingTime(y,new Date(864e13),-0))&&864e13!==l.getTime()||(l=n.dateTimeValueToDate(t.getAPIOption("end"))),m&&(y=null),e.objectType===g.Allocation){if(Array.isArray(o.Entries)&&o.Entries.length&&b(e??i,o,c),p(o,c,"Start",r),p(o,c,"End",l),e.dragMode&h.DragVertically){let i=a!==f.Activities||e.newRowObjectType!==g.Activity&&(t.getAPIOption("resourcesVisibleInActivitiesView")||e.newRowObjectType!==g.Allocation)?"ResourceID":"ActivityID";e.newRowObjectType===g.Allocation?c[i]=e.newRowObject[i]?.toString()||u:c[i]=e.newRowObject?.ID?.toString()||u}}else if(e.objectType===g.Activity){var A=e.startPropertyName;A&&p(o,c,A,r);var v=e.endPropertyName;v&&p(o,c,v,l),null!=e.workingTimeDistance&&(null!=c.LinkSourceDate&&p(o,c,"LinkSourceDate",t.addWorkingTime(y,n.dateTimeValueToDate(c.LinkSourceDate),e.workingTimeDistance)),null!=c.LinkTargetDate&&p(o,c,"LinkTargetDate",t.addWorkingTime(y,n.dateTimeValueToDate(c.LinkTargetDate),e.workingTimeDistance))),"Start"===A&&Array.isArray(o.Entries)&&o.Entries.length&&b(e??i,o,c),e.dragMode&h.DragVertically&&(e.newRowObjectType===g.Allocation?c.ParentID=e.newRowObject.ActivityID:e.object!==e.newRowObject&&(c.ParentID=e.newRowObject?.ID?.toString()||u))}d.push(c)};const v=function(){const i=function(t,i){let a;return a="setResourcePropertiesForSkills"===o?Object.assign(n.resourcePropertiesForSkillByID(`${e.skillID}${l}${l}${t}`)?.data()??{ID:t,SkillID:e.skillID},{[s]:i}):"setResourcePropertiesForActivities"===o?Object.assign(n.resourcePropertiesForActivityByID(`${l}${e.activityID}${l}${l}${t}`)?.data()??{ID:t,ActivityID:e.activityID},{[s]:i}):{ID:t,[s]:i},a};let r={[g.Activity]:"activityRowSortCodePropertyName",[g.Allocation]:"allocationRowSortCodePropertyName",[g.Entity]:"entityRowSortCodePropertyName",[g.Resource]:"resourceRowSortCodePropertyName",[g.Skill]:"skillRowSortCodePropertyName"}[e.objectType],s=t.getAPIOption(r)||"SortCode",p=i(e.object.ID,e.newSortCode);if(e.objectType!==g.Skill&&(a!==f.SkilledResources||e.objectType!==g.Resource)){let t=e.objectType!==g.Allocation?"ParentID":a===f.Activities&&e.newRowObjectType!==g.Resource?"ActivityID":"ResourceID";switch(e.rowInsertionMode){case c.InsertAsChild:p[t]=e.newRowObject.ID;break;case c.InsertAsPreviousSibling:case c.InsertAsNextSibling:p[t]=e.newRowObject[t]?.toString()||u}}[g.Allocation,g.Entity].includes(e.objectType)||o.startsWith("setResourcePropertiesFor")||("ViewArea"in e.newRowObject?p.ViewArea=e.newRowObject.ViewArea??u:"PM_ViewArea"in e.newRowObject&&(p.PM_ViewArea=e.newRowObject.PM_ViewArea??u)),d.push(p),e.otherNewSortCodesForSiblingObjects&&e.otherNewSortCodesForSiblingObjects.forEach((e=>{d.push(i(e.object.ID,e.newSortCode))}))};e.visualType===y.Row?e.rowInsertionMode!==c.None&&v():e.visualType===y.Bar?(A(void 0,e.object,e.newStart,e.newEnd),e.startsAndEndsOfCoupledObjects?.forEach((function(e){A(e,e.object,e.newStart,e.newEnd)}))):e.objectType===g.DateLine&&"newDate"in e&&d.push({ID:e.object.ID,PointInTime:e.newDate});let I=t.getAPIOption("updateOptimizationEnabled");I&&t.setAPIOption("updateOptimizationEnabled",!1),t[o](d,o.startsWith("setResourcePropertiesFor")?_.Default:_.DifferentialValues),t.render(),e.objectType!==g.DateLine&&t.scrollToObjectData(e.objectType,e.object,e.visualType===y.Row?m.NoHScroll:m.None,!1),I&&t.setAPIOption("updateOptimizationEnabled",!0)}}};e.exports=o.extendClass("rabWidgetApplication",w,D)},501:(e,t,i)=>{var a=i(8680),n=i(3571),o=n.nClassFactory,r=n.nDateHelper,l=n.nDefaultSeparator,s=n.nPropertyComposer,d=i(9280),c=d.RowInsertionMode,u=d.RowInteractions,p=i(5674),h=p.BarInteractions,g=p.DateLineGridRecurrence,m=p.ElemType,_=p.nCalendarHelper,f=i(476),y=f.DateLineGridModes,b=f.ObjectType,A=f.ItemType,v=f.RowSortMode,I=f.SelectionChangedReason,C=f.TableType,w=f.TextWrapMode,T=f.ViewType,R=f.VisualSubtype,S=f.VisualType,P=i(5977),O=P._BarDragModes_AllSupportedFlags,D=P._entriesShownSeparatelyByUnifiedBarDesign,E=P._RowDragModes_AllSupportedFlags,M=P.RAB_ACTIVITIES_PROP_NAME,B=P.RAB_ALLOCATIONS_PROP_NAME,k=P.RAB_CLASS_PREFIX,V=P.RAB_CURVE_CONTAINER_CLASS,N=P.RAB_ENTITIES_PROP_NAME,F=P.RAB_RESOURCES_PROP_NAME,L=P.RAB_SKILLS_PROP_NAME,W=P.RAB_RESOURCES_PROPERTIES_FOR_SKILLS_PROP_NAME,x=P.RowCategory,j=i(9199),H=i(7082),G=i(9276);const K={[M]:b.Activity,[B]:b.Allocation,[N]:b.Entity,[F]:b.Resource,[L]:b.Skill};var U={construct:function(e,t,i,a,n){var o=this,r=e.getOption("widget");let l=Object.assign({},n||{});l.ganttWidget||(l.ganttWidget={}),l.ganttWidget.keyboardEventsSourceElem||(l.ganttWidget.keyboardEventsSourceElem=r.element()),l.entitiesTableWidget||(l.entitiesTableWidget={}),l.entitiesTableWidget.keyboardEventsSourceElem||(l.entitiesTableWidget.keyboardEventsSourceElem=r.element()),o._super(e,t,i,a,l),o._columns=[],o._rowDefinitions=[],o._callbackForCloseContextMenu=function(){o._handleCloseContextMenu()},e.contextMenuHandler().addCallbackForClose(o._callbackForCloseContextMenu),o._promiseCountForCanDrag=0;var s=o.handleAPIOptionChanged.bind(o);["dateLineGridMode"].forEach((e=>this.setAPIOptionChangedCallback(e,1,s)))},destroy:function(){this._super(),this.app().contextMenuHandler().removeCallbackForClose(this._callbackForCloseContextMenu)},handleAPIOptionChanged:function(e,t,i){if("dateLineGridMode"===e){this._ganttWidget.option("timescaleRibbonDateLinesVisible",!!(t&y.Auto));var a=[];t&y.Weekly&&a.push({timeType:g.Weekly,className:this.RAB_WEEKLY_DATE_LINE_GRID_CLASS}),t&y.Daily&&a.push({timeType:g.Daily,className:this.RAB_DAILY_DATE_LINE_GRID_CLASS}),this._ganttWidget.option("dateLineGrids",a)}else this._super(e,t,i)},_initOptions:function(e){var t=this._options=Object.assign({},{},e);this._super(t)},getObjectTypeFromItem:function(e){var t=void 0;if(e)switch(e.rab_itemType){case A.Activity:case A.ActivityBaseline:case A.ActivityFrame:case A.ActivityRow:t=b.Activity;break;case A.Allocation:case A.AllocationRow:t=b.Allocation;break;case A.Curve:t=this.getAPIOption("newCallbackBehaviorEnabled")?b.Resource:e.rab_itemType;break;default:t=e.rab_itemType}return t},_eventuallyExtractSkilledWrapper:function(e){for(;;){let t=e.data();if(!(t instanceof G))break;e=t}return e},_transferObjectOfCallbackArgs:function(e,t,i){var a=this,n=e.item||e.sender||e.rowItem,o=n&&n.rab_itemType===A.PeriodHighlighterEntry;o&&(n=e.rowItem);var l=void 0!==e.itemType?e.itemType:n?n.rab_itemType:void 0;e.event&&(t.event=e.event),t.objectType="TimeAreaBackground"===n?b.TimeArea:"Timescale"===n?b.Timescale:a.getObjectTypeFromItem(n);var d=void 0;"TimeAreaBackground"!==n&&"Timescale"!==n&&n?"function"==typeof n.data?((d=n.data()).extendCallbackArgsForMultiplierPrimaryKey(e,t),d=(d=a._eventuallyExtractSkilledWrapper(d)).data()):d=n.rab_data:d=null,t.object=d,t.visualType=o?S.PeriodHighlighter:[A.ActivityRow,A.AllocationRow,A.Resource,A.Entity,A.Skill].includes(l)?S.Row:l===A.Curve?S.Curve:l===A.Link?S.Link:l===A.DateLine?S.DateLine:"Timescale"===n?S.Timescale:n?S.Bar:-1;var c=e.ganttWidget;t.visualType===S.Row&&c&&(e.event&&c.pageXToTimeAxisX(e.event.pageX)>=0?c.pageXToDate(e.event.pageX)>=c.timeAxis().currentlyVisibleStart()&&(t.visualType=S.Background):e.date&&(t.date=a.model().displayRelativeDates()?r.dateToRelativeDateTimeString(e.date):e.date,t.visualType=S.Background));if(e.event&&c&&t.visualType!==S.Row&&(t.date=a.model().displayRelativeDates()?r.dateToRelativeDateTimeString(c.pageXToDate(e.event.pageX)):c.pageXToDate(e.event.pageX)),i&&null!=n.rab_propNames&&(t.startPropertyName=n.rab_propNames.Start,t.endPropertyName=n.rab_propNames.End),a.getAPIOption("newCallbackBehaviorEnabled")||l!==A.AllocationEntry){if([A.AllocationEntry,A.ActivityEntry].includes(l)){t.entry=t.object;let i=n.data().getHierarchyParent();i.extendCallbackArgsForMultiplierPrimaryKey(e,t),t.object=a._eventuallyExtractSkilledWrapper(i).data(),t.objectType=l===A.AllocationEntry?b.Allocation:b.Activity,t.entryIndex=t.object.Entries?.indexOf?.(t.entry)??-1}else if([b.Activity,b.Entity,b.Resource].includes(t.objectType)&&n.isPseudo())t.hierarchySupplementaryDefinitionID=t.object.__HIERARCHYSUPPLEMENTARYDEFINITIONID,t.hierarchyLevelSupplementaryDefinitionIndex=t.object.__HIERARCHYLEVELSUPPLEMENTARYDEFINITIONINDEX,t.groupingLevelDefinitionIndex=t.object.__GROUPINGLEVELDEFINITIONINDEX,t.groupingCodes=Object.values(t.object.__GROUPINGCODES).reverse(),t.object=null;else if(o){let i;i=n.rab_itemType===A.AllocationRow?a.viewType()===T.Activities?a.model().resourceByID(s.compose(n.data(),["ResourceRole","ResourceID"])):n.rab_parentRowItem.data():n.data();var u=a.model().periodHighlighterByID(i.PeriodHighlighterID);t.calendarGrid=t.periodHighlighter=u.data(),null!=e.entryIndex&&(t.entryIndex=(e.item||e.sender).entries[e.entryIndex].rab_entryIndex,t.entry=u.data()?.Entries?.[t.entryIndex])}}else t.allocation=a._eventuallyExtractSkilledWrapper(n.data().getHierarchyParent()).data();"tooltipTemplateID"in e&&(t.tooltipTemplateID=e.tooltipTemplateID),"curveID"in e&&(t.curve=a.model().curveByID(e.curveID).data()),"cellIndex"in e&&(t.cellIndex=e.cellIndex),"symbolIndex"in e&&(t.symbolIndex=e.symbolIndex),"timePeriodStartDate"in e&&(t.timePeriodStart=e.timePeriodStartDate),"timePeriodEndDate"in e&&(t.timePeriodEnd=e.timePeriodEndDate)},_resolveFormatWithCallbackArgsEvaluation:function(e,t,i,a){var n=this,o=a?.htmlFormat??a?.innerHTML;return e&&(o=n._app.resolveFormat(e,t,i,a?.periodHighlighter&&n.model().periodHighlighterByID(a.periodHighlighter.ID),"#",a&&((e,t,i,o)=>{switch(i){case b.Resource:if(o)if(a.visualType===S.Curve){if(["#Date","#Load","#Capacity","#SingleLoads"].includes(e))return{wrapperObject:a[e.substring(1,2).toLowerCase()+e.substring(2)],wrapperObjectType:-1}}else if("#Skill"===e&&"skillID"in a){let e=n.model().skillByID(a.skillID);if(e)return{wrapperObject:e,wrapperObjectType:b.Skill}}break;case b.Curve:if(a.visualType===S.Curve&&"#Entry"===e)return{wrapperObject:t.data().CurvePointEntries?.[a.entryIndex],wrapperObjectType:-1};break;case b.Activity:case b.Allocation:if(o&&"#Entry"===e)return{wrapperObject:t.data().Entries?.[a.entryIndex],wrapperObjectType:-1};break;case b.PeriodHighlighter:if(o){if("#RowObject"===e)return{wrapperObject:a.object,wrapperObjectType:a.objectType};if("#Entry"===e)return{wrapperObject:t.data().Entries?.[a.entryIndex],wrapperObjectType:-1}}}}))),o??""},_handleBeforeShowingTooltip:function(e){try{var t=this;e.item||(t._lastTimeItemWithCanDragTriggered=null);var i={innerHTML:e.innerHTML};if(t._transferObjectOfCallbackArgs(e,i),e.itemType===A.Curve?(i.load=e.load,e.singleLoads&&(i.singleLoads=e.singleLoads),i.capacity=e.capacity):e.subItemType===A.ActivityDueDate?i.visualSubtype=R.ActivityDueDateSymbol:e.subItemType===A.ActivityReleaseDate?i.visualSubtype=R.ActivityReleaseDateSymbol:!t.getAPIOption("triggeringOfOnShowTooltipForEntriesInBarsEnabled")&&[A.Activity,A.Allocation].includes(e.itemType)&&(delete i.entry,delete i.entryIndex),i.promise=null,this._app.getOption("widget")._callOnShowTooltip(i),null!=i.tooltipTemplateID){var a=e.itemType===A.PeriodHighlighterEntry?e.rowItem.data():e.itemType===A.AllocationEntry||e.itemType===A.ActivityEntry?e.item.rab_parentItem.data():e.item.data();let n=t._app.tooltipTemplatesMap()[i.tooltipTemplateID];e.innerHTML=t._resolveFormatWithCallbackArgsEvaluation(n?.HTMLFormat??n?.InnerHTML,a,i.objectType,i)}else e.innerHTML=i.innerHTML||void 0;e.promise=i.promise,this._super(e)}catch(e){this._handleCallbackException(e,"onShowTooltip")}},_handleCloseContextMenu:function(){this._app.getOption("widget")._callOnCloseContextMenu()},_handleContextMenuEvent:function(e){try{var t=this;if(this._super(e),e.sender){var i={promise:null};if(e.dateArea&&(e.item=e.rowItem),t._transferObjectOfCallbackArgs(e,i),e.event&&e.elemType===m.Row&&i.visualType===S.Background)for(var n=a.select(e.event.target);n.attr("class").indexOf(k)>=0;n=a.select(n.node().parentNode))if(n.classed(V)){i.visualType=S.Curve;break}e.event&&i.visualType!==S.Row&&(i.date=t.model().displayRelativeDates()?r.dateToRelativeDateTimeString(t._ganttWidget.pageXToDate(e.event.pageX)):t._ganttWidget.pageXToDate(e.event.pageX)),t.app().contextMenuHandler().setActive(!0),t.ganttWidget().option("isContextMenuActive",!0),t.entitiesTableWidget()?.option("isContextMenuActive",!0),t.app().getOption("widget")._callOnShowContextMenu(i);let o=function(){t.app().contextMenuHandler().setActive(!1),t.ganttWidget().option("isContextMenuActive",!1),t.entitiesTableWidget()?.option("isContextMenuActive",!1)};i.promise&&"function"==typeof i.promise.then?i.promise.then(o,o):o()}}catch(e){this._handleCallbackException(e,"onShowContextMenu")}},_handleCallbackException:function(e,t){this._handleException(e,t+"/callback")},_doOnEventFunc:function(e){switch(e.eventType){case"tap":case"doubletap":this._app.getOption("widget")._closeContextMenu()}this._super(e)},_handleTableTitleCellTap:function(e){var t=this;try{if(t.getAPIOption("interactiveSwitchingOfSortOrderEnabled")&&t.viewType()!==T.SkilledResources){let a=e.cellDefinition.rab_sortSource;if(a){let n;if(1===e.tableType)n=A.Entity;else switch(t.viewType()){case T.Activities:n=A.Activity;break;case T.Resources:case T.Loads:n=A.Resource}let o=v.None,r=this.viewModel(n===A.Entity).getRowSortParamsForCategory(x.ChildRow);a===r.rowSortPropertyName?(o=r.rowSortMode+1,o>v.Descending&&(o=t.getAPIOption("rowSortModeNoneEnabledOnInteractiveSwitchingOfSortOrder")?v.None:v.Ascending)):o=v.Ascending;var i={event:e.event,objectType:t.getObjectTypeFromItem({rab_itemType:n}),sortMode:o,sortCodeSource:a,cancel:!1};t._tooltipWidget.display(null);let l=t._app.getOption("widget");if(l._callOnRowSortingChangeRequested(i),!i.cancel){let e={[A.Activity]:"activity",[A.Entity]:"entity",[A.Resource]:"resource",[A.Skill]:"skill",[A.Allocation]:"allocation"}[n],t=`${e}RowSortMode`,a=l.option(t)!==i.sortMode;l.option({[`${a?"´":""}${e}RowSortCodePropertyName`]:i.sortCodeSource,[t]:i.sortMode})}t._super(e)}}else this._handleBackgroundTap()}catch(e){this._handleCallbackException(e,"onRowSortingChangeRequested")}},_handleItemTap:function(e){try{var t=this,i={};t._transferObjectOfCallbackArgs(e,i),t._app.getOption("widget")._callOnClicked(i),t._super(e)}catch(e){this._handleCallbackException(e,"onClicked")}},_handleItemDoubleTap:function(e){try{var t=this,i={};t._transferObjectOfCallbackArgs(e,i),t._tooltipWidget.display(null),t._app.getOption("widget")._callOnDoubleClicked(i),t._super(e)}catch(e){this._handleCallbackException(e,"onDoubleClicked")}},_doDetermineTableRowDefinitionFunc:function(e){var t=this;try{this._super(e);var i={level:e.level,tableType:e.tableType,objectType:t.getObjectTypeFromItem(e.rowItem),object:e.rowItem.data(),hasColumnTitles:!1},a=e.rowDefinition.cellDefinitions.map((function(e){return{initialWidth:e.width,horizontalTextAlignment:e.horizontalTextAlignment,textSource:"",wrapMode:w.None}}));if(i.columns=a,this._app.getOption("widget")._callOnDetermineColumnDefinitions(i),i.columns!==a&&Array.isArray(i.columns)){var n,o=t._columns.indexOf(i.columns);o>=0?n=t._rowDefinitions[o]:(t._columns.push(i.columns),n={cellDefinitions:[],contentsFunc:e.rowDefinition.contentsFunc,hasColumnTitles:i.hasColumnTitles},i.columns.forEach((function(e){n.cellDefinitions.push({className:"",title:e.title,width:e.initialWidth,horizontalTextAlignment:e.horizontalTextAlignment,rab_textSource:e.textSource,rab_symbolIDSource:e.symbolIDSource,rab_sortSource:e.sortSource,wrapMode:e.wrapMode,contentsFunc:function(){return t.__tableCellFillFunc.apply(t,arguments)}})})),t._rowDefinitions.push(n)),e.rowDefinition=n}}catch(e){this._handleCallbackException(e,"onDetermineColumnDefinitions")}},_detectContent:function(e,t,i){var a=this;return null!=i?a._resolveFormatWithCallbackArgsEvaluation(i,e.data(),a.getObjectTypeFromItem(e),null):a._super(e,t,i)},_handleCanSelectTimeItem:function(e){try{this._super(e),e.canSelect&&this._canSelectItem(e)}catch(e){this._handleCallbackException(e,"canSelect")}},_handleSelectTimeItem:function(e){try{e.cancel||this._selectItem(e),this._super(e)}catch(e){this._handleCallbackException(e,"onSelectionChanged")}},_handleCanSelectRowItem:function(e){try{this._super(e),e.canSelect&&this._canSelectItem(e)}catch(e){this._handleCallbackException(e,"canSelect")}},_handleSelectRowItem:function(e){try{e.cancel||this._selectItem(e),this._super(e)}catch(e){this._handleCallbackException(e,"onSelectionChanged")}},_handleCanSelectLinkItem:function(e){try{this._super(e),e.canSelect&&this._canSelectItem(e)}catch(e){this._handleCallbackException(e,"canSelect")}},_handleSelectLinkItem:function(e){try{e.cancel||this._selectItem(e),this._super(e)}catch(e){this._handleCallbackException(e,"onSelectionChanged")}},_entitiesTableHandleCanSelectRowItem:function(e){try{this._super(e),e.canSelect&&this._canSelectItem(e)}catch(e){this._handleCallbackException(e,"canSelect")}},_entitiesTableHandleSelectRowItem:function(e){try{e.cancel||this._selectItem(e),this._super(e)}catch(e){this._handleCallbackException(e,"onSelectionChanged")}},_canSelectItem:function(e){if(e.event&&e.event.shiftKey)e.canSelect=!1;else{var t=e.rowItem||e.timeItem||e.linkItem,i=e.otherSelectedRowItems||e.otherSelectedTimeItems||e.otherSelectedLinkItems,a={otherSelectedObjects:[...new Set(i.map((function(e){return e.externalData()})))],event:e.event,cancel:!1};e.item=t,this._transferObjectOfCallbackArgs(e,a),this._app.getOption("widget")._callCanSelect(a),e.canSelect=!a.cancel}},_selectItem:function(e){var t=this;if(this.getAPIOption("multipleSelectionEnabled")||e.oldSelectedItems[0]!==e.newSelectedItems[0]){var i=e.rowItem||e.timeItem||e.linkItem,a=[...new Set(e.newSelectedItems.filter((function(e){return e.data()})).map((function(e){return e.externalData()})))],n={selectedObjects:a.slice(),event:e.event,cancel:e.cancel};if(e.item=i,t._transferObjectOfCallbackArgs(e,n),!i){var o=t.getObjectTypeFromItem(e.oldSelectedItems[0]);n.visualType=o===A.ActivityRow||o===A.AllocationRow||o===A.Resource||o===A.Entity?S.Row:o===A.Curve?S.Curve:o===A.Link?S.Link:S.Bar}var r=t._ganttWidget.selectedTimeItems();if(r.length||(r=t._ganttWidget.selectedRowItems()),!r.length&&t._entitiesTableWidget&&(r=t._entitiesTableWidget.selectedRowItems()),r.length)n.previouslySelectedObjects=[...new Set(r.filter((function(e){return e.data()})).map((function(e){return e.externalData()})))],n.previouslySelectedObjectsType=t.getObjectTypeFromItem(r[0]);else if(!n.object)return;n.reason=e.reason||I.Click,e.reasonItem&&(n.reasonObject=e.reasonItem.externalData(),n.reasonObjectType=t.getObjectTypeFromItem(e.reasonItem)),t._app.getOption("widget")._callOnSelectionChanged(n),!n.cancel&&Array.isArray(n.selectedObjects)&&(n.selectedObjects.length!=(e.newSelectedItems?.length||0)||n.selectedObjects.some(((e,t)=>e!=a[t])))&&(e.newSelectedItems=t._mapObjectsOrObjectIDsToItems(n.objectType,n.selectedObjects,n.visualType,e.__multiplierPrimaryKey)),e.cancel=n.cancel}},_checkPossibleInteractionsFunc:function(e){try{var t=this;let a=e.item,n=e.elemType===m.Bar,o=!n||t.getAPIOption("newCallbackBehaviorEnabled")?"allowedDragModes":"dragMode",r=n?h.None:u.None,l=n?O:E;if(e.item.data().isPseudo())e.interactions=r;else{const s=function(e){return t.viewType()===T.SkilledResources&&e&&(a.rab_itemType===A.Skill?e|=u.DragOnSameLevelOnly:a.rab_itemType===A.Resource&&(e=e&~u.DragOnSameLevelOnly|u.DragInSameTableParentOnly)),e};let d={cancel:!1,promise:null};if(t._lastTimeItemWithCanDragTriggered===a)return void(e.interactions=t._lastCanDragAllowedDragModes);t._lastTimeItemWithCanDragTriggered=a,++t._promiseCountForCanDrag,d[o]=s(e.interactions),t._transferObjectOfCallbackArgs(e,d,n);var i=t._ganttWidget.selectedTimeItems();if(i.length&&(d.selectedObjects=[...new Set(i.filter((function(e){return e.data()})).map((function(e){return e.externalData()})))]),t._app.getOption("widget")._callCanDrag(d),d.cancel)e.interactions=r;else if(d.promise?.then){let e=`forced${{[b.Activity]:"Activity",[b.Allocation]:"Allocation",[b.Resource]:"Resource",[b.Skill]:"Skill",[b.Entity]:"Entity"}[d.objectType]}Allowed${n?"Bar":"Row"}DragModes`,i=t._promiseCountForCanDrag;d.promise?.then((function(a){if(i===t._promiseCountForCanDrag){let i;a.cancel?i=r:(i=s(+a.allowedDragModes??r),i&=l),t.app().setAPIOption(e,i)}}),(function(){i===t._promiseCountForCanDrag&&t.app().setAPIOption(e,r)}))}else e.interactions=s(+d[o]??r),e.interactions&=l;t._lastCanDragAllowedDragModes=e.interactions}t._super(e),t._savedPropertiesOfCheckPossibleInteractionsFunc={callbackArgs:e,boundingClientRect:e.elem.getBoundingClientRect()}}catch(e){this._handleCallbackException(e,"canDrag")}},checkResendingCanDrag:function(e){var t=this;t._savedPropertiesOfCheckPossibleInteractionsFunc&&t._savedPropertiesOfCheckPossibleInteractionsFunc.callbackArgs.item.data()&&Array.isArray(e)&&e.every((function(e){if(e===t._savedPropertiesOfCheckPossibleInteractionsFunc.callbackArgs.item.data().data()){var i=t._savedPropertiesOfCheckPossibleInteractionsFunc.boundingClientRect,a=t._savedPropertiesOfCheckPossibleInteractionsFunc.callbackArgs.elem.getBoundingClientRect(),n=a.left<=i.left,o=a.right>=i.right,r=a.top<=i.top,l=a.bottom>=i.bottom;return(n&&o&&r&&l||!n&&!o&&!r&&!l)&&t._ganttWidget.recheckBarInteractions(t._savedPropertiesOfCheckPossibleInteractionsFunc.callbackArgs.item),!1}return!0}))},_doDraggedFunc:function(e){try{var t=this;if(t._super(e),e.elemType===m.Bar||e.elemType===m.Row){var i=e.sender;if(e.elemType!==m.Bar||!i.rab_parentItem||D(i.rab_parentItem.rab_unifiedBarDesign)){var a={newRowObjectType:e.newRowItem?t.getObjectTypeFromItem(e.newRowItem):void 0,newRowObject:e.newRowItem?e.newRowItem.externalData():void 0,dragMode:e.interaction,rowInsertionMode:e.rowInsertionMode,dropAllowed:e.dropAllowed??!0,cancel:!1,promise:null};if(e.elemType!==m.Bar||i.rab_itemType!==A.Allocation&&i.rab_itemType!==A.Entity||([T.Resources,T.SkilledResources].includes(t.viewType())?a.newRowObjectIsSuitableResource=e.newRowItemIsSuitableTarget:t.viewType()===T.Activities&&(a.newRowObjectIsSuitableActivity=e.newRowItemIsSuitableTarget)),t._transferObjectOfCallbackArgs(e,a,e.elemType===m.Bar),e.newRowItem&&t.viewModel(e.tableType===C.Entities).hasMultipliedObjects()){e.newRowItem.data().extendCallbackArgsForMultiplierPrimaryKey(e,a,!0)}e.elemType===m.Bar?(a.newStart=t.model().displayRelativeDates()?r.dateToRelativeDateTimeString(e.start):e.start,a.newEnd=t.model().displayRelativeDates()?r.dateToRelativeDateTimeString(e.end):e.end):e.elemType===m.Row&&e.start&&(a.newStart=t.model().displayRelativeDates()?r.dateToRelativeDateTimeString(e.start):e.start),t._app.getOption("widget")._callOnDrag(a),e.dropAllowed=a.dropAllowed,e.cancel=a.cancel,!a.cancel&&"promise"in e&&"function"==typeof a.promise?.then&&(e.promise=new Promise(((e,t)=>{a.promise.then((function(i){i?.cancel?t():e(i)})).catch((function(){t()}))})))}}}catch(e){this._handleCallbackException(e,"onDrag")}},_doDroppedFunc:function(e){try{var t,i=this,a=i.model(),n=e=>a.displayRelativeDates()?r.dateToRelativeDateTimeString(e):e,o=e.sender;if(e.elemType===m.Bar||e.elemType===m.Row||e.elemType===m.DateLine){var l;if(l=e.elemType===m.DateLine?{newDate:n(e.newDate),cancel:!1,promise:null}:{newRowObjectType:e.newRowItem?i.getObjectTypeFromItem(e.newRowItem):void 0,newRowObject:e.newRowItem?e.newRowItem.externalData():void 0,dragMode:e.interaction,rowInsertionMode:e.rowInsertionMode??c.None,cancel:!1,promise:null},i._transferObjectOfCallbackArgs(e,l,e.elemType===m.Bar),i.viewModel(e.tableType===C.Entities).hasMultipliedObjects()){let t=e.newRowItem?.data();t?.extendCallbackArgsForMultiplierPrimaryKey(e,l,!0)}if(e.elemType===m.Bar){l.workingTimeDistance=e.workingTimeDistance,l.newStart=n(e.start),l.newEnd=n(e.end);let t=e.startsAndEndsOfChildItems;if(t&&(e.interaction&h.DragLeftSide?(t=[t.reduce(((e,t)=>e.start<t.start?e:t))],t.length&&(t[0].start=e.start)):e.interaction&h.DragRightSide&&(t=[t.reduce(((e,t)=>(e.end??e.start)>(t.end??t.start)?e:t))],t.length&&(t[0][t[0].end?"end":"start"]=e.end)),l.startsAndEndsOfEntries=t.map((e=>({entryIndex:o.childTimeItems.indexOf(e.item),newStart:n(e.start),newEnd:n(e.end),duration:e.duration})))),i.getAPIOption("multipleBarDraggingEnabled")&&(l.coupledObjects=[],l.startsAndEndsOfCoupledObjects=[]),l.coupledObjects&&e.startsAndEndsOfCoupledItems){var s=e.newRowItem,d=i._ganttWidget.getRowItem(o);s===d&&(s=null),l.startsAndEndsOfCoupledObjects=e.startsAndEndsOfCoupledItems.map((function(t){var a=t.start,o=t.end;if(!a){d=i._ganttWidget.getRowItem(t.item);var r=s||d,c=t.item;c.rab_itemType===A.ActivityFrame&&(c=i._viewModel._findItemOfTypeInArray(c.childTimeItems,A.Activity));var u=c.calendar||d&&d.calendar||i._ganttWidget.options.defaultCalendar,p=c.calendar||r&&r.calendar||i._ganttWidget.options.defaultCalendar,h=c.start&&c.end?_.calculateWorkingTime(u,c.end,c.start):void 0;(a=c.start?_.addWorkingTime(p,c.start,e.workingTimeDistance):null)&&(o=h&&_.addWorkingTime(p,a,h)||null)}var g=t.item.data().externalData();l.coupledObjects.push(g);var m={object:g,newStart:n(a),newEnd:n(o)};return t.startsAndEndsOfChildItems&&(m.startsAndEndsOfEntries=t.startsAndEndsOfChildItems.map((e=>({entryIndex:t.item.childTimeItems.indexOf(e.item),newStart:n(e.start),newEnd:n(e.end),duration:e.duration})))),m}))}}else if(e.elemType===m.Row)if(e.newRowItem?.rab_itemType===A.ActivityRow&&delete l.activityID,e.rowInsertionMode){let a={[b.Activity]:"activity",[b.Entity]:"entity",[b.Resource]:"resource",[b.Skill]:"skill",[b.Allocation]:"allocation"}[l.objectType];if((t=i.getAPIOption(`${a}RowSortCodePropertyName`))&&i.getAPIOption(`${a}RowSortMode`)===v.Ascending){let a=[];l.newSortCode=i._determineSortCode(o,e.rowInsertionMode,e.newRowItem,t,a),a.length&&(l.otherNewSortCodesForSiblingObjects=a)}}else if(e.start){l.newStart=e.start;var u=e.newRowItem&&o.data().Duration;if(u){var p=e.end||_.addWorkingTime(null,e.start,u);l.newEnd=i.model().displayRelativeDates()?r.dateToRelativeDateTimeString(p):p}}if(i._app.getOption("widget")._callOnDrop(l),void 0===this&&i._super(e),l.cancel)e.cancel=!0;else if("promise"in e&&"function"==typeof l.promise?.then){let t=new Promise(((e,t)=>{l.promise.then((function(i){i&&i.cancel?t():e()})).catch((function(){t()}))}));e.promise=t}}}catch(e){this._handleCallbackException(e,"onDrop")}},_doDragStartFunc:function(e){try{var t=this;t._super(e);var i={dragMode:e.interaction,cancel:!1};t._transferObjectOfCallbackArgs(e,i,e.elemType===m.Bar),t._app.getOption("widget")._callOnDragStart(i),e.cancel=i.cancel}catch(t){e.cancel=!0,this._handleCallbackException(t,"onDragStart")}},_doDragEndFunc:function(e){try{var t=this;t._super(e);var i={dragMode:e.interaction,canceled:e.canceled};t._transferObjectOfCallbackArgs(e,i,e.elemType===m.Bar),t._app.getOption("widget")._callOnDragEnd(i)}catch(e){this._handleCallbackException(e,"onDragEnd")}},_determineSortCode:function(e,t,i,a,n){let o=0,r=0;var l=this.model();let s="SortCode"===a?function(e){return e[a]}:function(e){if(e instanceof H){let t=l.getChildByPrimaryKey(W,e.getPrimaryKey()),i=t?.data()[a];if(null!=i)return i}return e.externalData()[a]},d=e.rab_itemType===A.AllocationRow?"detailingRowItems":"childRowItems",u=t===c.InsertAsChild?i:i.rab_parentRowItem,p=u[d];if(p){if(!u.rab_parentRowItem){let e=i.atTheTop,t=p.filter((t=>t.atTheTop!==e));p=p.filter((t=>t.atTheTop===e)),e&&(r=-p.length);let a=e?e=>e>0:e=>e<0,o=e?0:-t.length;t.every((e=>a(s(e.data()))))||t.forEach(((e,t)=>{n.push({object:e.externalData(),newSortCode:t+o})}))}let a=p.indexOf(e);if(a>=0&&(p=p.slice()).splice(a,1),p.length){let e=t===c.InsertAsChild?0:p.indexOf(i)+(t===c.InsertAsNextSibling?1:0);if(e>0&&(o=s(p[0].data()),"number"==typeof o&&p.slice(1,e).every((e=>{let t=s(e.data());if(t>o)return o=t,!0}))?++o:(p.slice(0,e).forEach(((e,t)=>{n.push({object:e.externalData(),newSortCode:t})})),o=e)),e<p.length){let t=s(p[e].data()),i=t,a="number"!=typeof i||!(o<t);!a&&p.slice(e+1).every((e=>{let t=s(e.data());if(t>i)return i=t,!0}))||(a&&(t=o+1),p.slice(e).forEach(((e,i)=>{n.push({object:e.externalData(),newSortCode:t+i+r})})))}}}return o+r},_setColorByOptionValue:function(e,t){var i=t??this._app.getOption("widget").element().getRootNode?.()??document;this._super(e,i.nodeType==Node.DOCUMENT_FRAGMENT_NODE?i:i.head)},_mapObjectsOrObjectIDsToItems:function(e,t,i,a){var n=[];if(Array.isArray(t)&&t.length>0){var o=this.viewModel(e===b.Entity);switch(e){case b.Activity:case b.Allocation:case b.Entity:case b.Link:case b.Resource:case b.Skill:t.forEach((function(t){var r;if("string"==typeof t){var s=t.split(l);r=s.length>1?o.wrappersByPrimaryKeyParts(e,s[1],s[0]):o.wrappersByPrimaryKeyParts(e,s[0])}else r=o.wrappersByPrimaryKeyParts(e,t.ID,t.Role,a);r?.forEach((t=>{var a=o.itemByWrapper(t);a&&i===S.Bar?e!==b.Activity&&e!==b.Allocation||(a=a.timeItems?.[0]):e===b.Link&&Array.isArray(a?._linkItems)&&(n.push(...a._linkItems),a=void 0),a&&n.push(a)}))}))}}return n},_preparePageForPrinting:function(e){let t=this._app.getOption("widget");var i={pageCount:e.maxPageNumber,currentPageNumber:e.currentPageNumber,promise:null};if(t._callOnSaveAsPDFProgress(i),"function"==typeof i.promise?.then)return new Promise(((e,t)=>{i.promise.then(e,t).catch(t)}))},_keyDownFunc:function(e){var t=this;t._super(e);var i=e.event,a=t.app().getOption("widget");i.shiftKey&&i.ctrlKey&&i.altKey&&("F12"===i.key?(a.about(),i.stopPropagation(),i.preventDefault()):"l"!==i.key.toLowerCase()&&(i.which??i.keyCode)!=="L".charCodeAt(0)||!t.getAPIOption("interactiveActivationOfLoggingEnabled")||(a.option("loggingEnabled",!a.options.loggingEnabled),i.stopPropagation(),i.preventDefault()))},_timeAreaViewParametersChangedFunc:function(e){try{var t=this;this._super(e);var i=Math.max(1,1/(t.ganttWidget().timeAxis().actualWidthPerSecond()/64)),a="seconds";i>=60&&(a="minutes",(i/=60)>=60&&(a="hours",(i/=60)>=24&&(i/=24,a="days")));var n={scrollOffset:e.scrollOffset,horizontalScrollOffset:e.scrollOffset,width:e.width,start:t.model().displayRelativeDates()?r.dateToRelativeDateTimeString(new Date(e.start)):new Date(e.start),end:t.model().displayRelativeDates()?r.dateToRelativeDateTimeString(new Date(e.end)):new Date(e.end),timeResolutionUnit:a,timeResolutionUnitCount:i,tableViewWidth:e.ganttWidget.actualTableViewWidth(),entitiesTableViewWidth:this.entitiesTableWidget()&&parseFloat(window.getComputedStyle(this.entitiesTableWidget().element()).width)/t.getAPIOption("visualZoomFactor")};t._app.getOption("widget")._callOnTimeAreaViewParametersChanged(n)}catch(e){this._handleCallbackException(e,"onTimeAreaViewParametersChanged")}},_curvePaneResizedFunc:function(e){try{this._super(e);var t={paneIndex:e.paneIndex,newHeight:e.newHeight};this._transferObjectOfCallbackArgs(e,t),delete t.visualType,this._app.getOption("widget")._callOnCurvePaneResized(t)}catch(e){this._handleCallbackException(e,"onCurvePaneResized")}},_verticalScrollOffsetChangedFunc:function(e){try{var t=this;this._super(e);let a=[e.topViewRowItemAtTop,e.rowItemAtTop],n=[];for(let e=0;e<=1;e++)for(;a[e]&&(n[e]=t._eventuallyExtractSkilledWrapper(a[e]?.data()),n[e]?.isPseudo());)a[e]=a[e].childRowItems?.[0];var i={tableType:e.ganttWidget?C.Gantt:C.Entities,scrollOffset:e.scrollOffset,rowObjectTypeAtTop:t.getObjectTypeFromItem(a[0]||a[1]),rowObjectAtTop:a[1]&&n[1].data(),topViewScrollOffset:e.topViewScrollOffset,topViewRowObjectAtTop:a[0]&&n[0].data()};t._app.getOption("widget")._callOnVerticalScrollOffsetChanged(i)}catch(e){this._handleCallbackException(e,"onOnVerticalScrollOffsetChanged")}},_tableColumnWidthChangedFunc:function(e){try{this._super(e);var t=e.sender.rab_tableRowDefinition,i={tableType:e.ganttWidget?C.Gantt:C.Entities,tableRowDefinition:t.rab_data,cellIndex:e.columnIndex,newWidth:e.newWidth,oldWidth:e.oldWidth};this._app.getOption("widget")._callOnTableCellDefinitionWidthChanged(i)}catch(e){this._handleCallbackException(e,"onOnVerticalScrollOffsetChanged")}},_handleRowExpandOrCollapseFunc:function(e){try{var t=this;t._super(e);var i={newCollapseState:(e.concernsLeaves?e.areLeavesCollapsed:e.isCollapsed)?1:0,interactively:e.interactively,isForAllocationRows:e.concernsLeaves,promise:null};if(t._transferObjectOfCallbackArgs(e,i),i.object){var a=(e.newCollapseState?"c":"e")+(e.concernsLeaves?"A":"C")+i.objectType+(i.object.Role||"")+l+i.object.ID;if(t._prefixedObjectIDsSetWithPendingCollapseStateChange||(t._prefixedObjectIDsSetWithPendingCollapseStateChange={}),!t._prefixedObjectIDsSetWithPendingCollapseStateChange[a]){t._prefixedObjectIDsSetWithPendingCollapseStateChange[a]=!0,!t.getAPIOption("triggeringOfOnCollapseStateChangedByUpdateCalls")&&t._app.isInUpdateRowObjectMethod()||t._app.getOption("widget")._callOnCollapseStateChanged(i);var n=function(e){delete t._prefixedObjectIDsSetWithPendingCollapseStateChange[a],e?.()};try{"function"==typeof i.promise?.then?e.promise=new Promise(((e,t)=>{i.promise.then((()=>{n(e)}),(()=>{n(t)})).catch(n)})):n()}catch{n()}}}else t._app.getOption("widget")._callOnCollapseStateChanged(i)}catch(e){this._handleCallbackException(e,"onCollapseStateChanged")}},_expandOrCollapseCurvesInRow:function(e,t,i){try{var a=this;a._super(e,t,i);var n={objectType:a.getObjectTypeFromItem(e),object:e.externalData(),newCollapseState:t?0:1,interactively:!0,promise:null};e.rab_itemType!==A.Resource&&(n.resource=a._viewModel.resourceByItem(e).data());var o=(t?"e":"c")+"U"+e.rab_itemType+(n.object.Role||"")+l+n.object.ID;if(a._prefixedObjectIDsSetWithPendingCollapseStateChange||(a._prefixedObjectIDsSetWithPendingCollapseStateChange={}),!a._prefixedObjectIDsSetWithPendingCollapseStateChange[o]){a._prefixedObjectIDsSetWithPendingCollapseStateChange[o]=!0,a._app.getOption("widget")._callOnCurveCollapseStateChanged(n);var r=function(){delete a._prefixedObjectIDsSetWithPendingCollapseStateChange[o]};try{if("function"==typeof n.promise?.then)return new Promise(((e,t)=>{n.promise.then((()=>{r()}),(()=>{r()})).catch(r)}));r()}catch{r()}}}catch(e){return void this._handleCallbackException(e,"onCurveCollapseStateChanged")}},checkObjectVisibility:function(e,t){var i={objectType:K[e],object:t.externalData(),result:!0};return t.extendCallbackArgsForMultiplierPrimaryKey(void 0,i),this._app.getOption("widget")._callVisibilityFilter(e,i),i.result},determineObjectByPageCoordinates:function(e,t){var i=this;let n=i.entitiesTableWidget()?.determineItemByPageCoordinates(e,t)||i.ganttWidget().determineItemByPageCoordinates(e,t);if(n){let l={};if(n.ganttWidget&&n.elemType===m.Row){var o=i._ganttWidget.pagePointToTimeArea(e,t);if(o){let s=!1,d=i._ganttWidget.elementFromPoint(e,t);for(var r=a.select(d);r.attr("class").indexOf(k)>=0;r=a.select(r.node().parentNode))if(r.classed(V)){s=!0;break}s?(n=i._determineCurveTooltipArgs(n.item,o),n.ganttWidget=i.ganttWidget(),n.curveID=d.__curveID,l.capacity=n.capacity,l.load=n.load,n.singleLoads&&(l.singleLoads=n.singleLoads)):n.date=o.date}}return i._transferObjectOfCallbackArgs(n,l),n.subItemType===A.ActivityDueDate?l.visualSubtype=R.ActivityDueDateSymbol:n.subItemType===A.ActivityReleaseDate&&(l.visualSubtype=R.ActivityReleaseDateSymbol),l}}};e.exports=o.extendClass("rabWidgetGanttView",j,U)},5984:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(8251);e.exports=a.extendClass("rabWidgetModel",n,{handleAPIOptionChanged:function(e,t){if("defaultCalendarID"===e)this._defaultCalendar=""===t||null==t?this._defaultNonWorkingTimeCalendar:this.calendarByID(t)},addCalendar:function(e){var t=this._super(e);return e.ID===this.getAPIOption("defaultCalendarID")&&(this._defaultCalendar=t),t},updateCalendar:function(e,t){var i=this._super(e,t);return t.ID===this.getAPIOption("defaultCalendarID")&&(this._defaultCalendar=e),i},removeCalendar:function(e,t){e.ID===this.getAPIOption("defaultCalendarID")&&(this._defaultCalendar=this._defaultNonWorkingTimeCalendar),this.removeChild(e,t)}})},5425:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nDebugHelper,r=i(2277),l=i(476).DateLineGridModes,s={construct:function(e){this._super(e),this.defineOption("version",null),this.defineOption("customName",null),this.defineOption("customCopyrightYear",null),this.defineOption("customVersion",null),this.defineOption("applicationName",null),this.defineOption("applicationVersion",null),this.defineOption("licenseKey",null),this.defineOption("defaultCalendarID",null,this.convertAnyToString),this.defineOption("newCallbackBehaviorEnabled",!1,this.convertAnyToBoolean),this.defineOption("onShowTooltip",null,void 0,this.assertFunctionOrNull),this.defineOption("onDetermineColumnDefinitions",null,void 0,this.assertFunctionOrNull),this.defineOption("onShowContextMenu",null,void 0,this.assertFunctionOrNull),this.defineOption("onCloseContextMenu",null,void 0,this.assertFunctionOrNull),this.defineOption("canDrag",null,void 0,this.assertFunctionOrNull),this.defineOption("onDrag",null,void 0,this.assertFunctionOrNull),this.defineOption("onDragStart",null,void 0,this.assertFunctionOrNull),this.defineOption("onDragEnd",null,void 0,this.assertFunctionOrNull),this.defineOption("onDrop",null,void 0,this.assertFunctionOrNull),this.defineOption("onClicked",null,void 0,this.assertFunctionOrNull),this.defineOption("onDoubleClicked",null,void 0,this.assertFunctionOrNull),this.defineOption("canSelect",null,void 0,this.assertFunctionOrNull),this.defineOption("onSelectionChanged",null,void 0,this.assertFunctionOrNull),this.defineOption("onTimeAreaViewParametersChanged",null,void 0,this.assertFunctionOrNull),this.defineOption("onVerticalScrollOffsetChanged",null,void 0,this.assertFunctionOrNull),this.defineOption("onCollapseStateChanged",null,void 0,this.assertFunctionOrNull),this.defineOption("onCurveCollapseStateChanged",null,void 0,this.assertFunctionOrNull),this.defineOption("onCurvePaneResized",null,void 0,this.assertFunctionOrNull),this.defineOption("onTableCellDefinitionWidthChanged",null,void 0,this.assertFunctionOrNull),this.defineOption("compareObjects",null,void 0,this.assertFunctionOrNull,!0),this.defineOption("compareActivities",null,void 0,this.assertFunctionOrNull,!0),this.defineOption("compareAllocations",null,void 0,this.assertFunctionOrNull,!0),this.defineOption("compareResources",null,void 0,this.assertFunctionOrNull,!0),this.defineOption("compareSkills",null,void 0,this.assertFunctionOrNull,!0),this.defineOption("compareEntities",null,void 0,this.assertFunctionOrNull,!0),this.defineOption("visibilityFilter",null,void 0,this.assertFunctionOrNull),this.defineOption("visibilityFilterForActivities",null,void 0,this.assertFunctionOrNull),this.defineOption("visibilityFilterForAllocations",null,void 0,this.assertFunctionOrNull),this.defineOption("visibilityFilterForResources",null,void 0,this.assertFunctionOrNull),this.defineOption("visibilityFilterForSkills",null,void 0,this.assertFunctionOrNull),this.defineOption("visibilityFilterForEntities",null,void 0,this.assertFunctionOrNull),this.defineOption("onSaveAsPDFProgress",null,void 0,this.assertFunctionOrNull),this.defineOption("determineGroupingCode",null,void 0,this.assertFunctionOrNull),this.defineOption("onRowSortingChangeRequested",null,void 0,this.assertFunctionOrNull),this.defineOption("dateLineGridMode",l.Weekly,this.convertStringToNumber,this.assert_dateLineGridMode),this.defineOption("loggingEnabled",!1),this.defineOption("interactiveActivationOfLoggingEnabled",!1)},assert_dateLineGridMode:function(e,t){return o.assertNumberOrNull(t),null!=t&&o.assert([0,1,2,4].indexOf(t)>=0,e+" is out of range"),!0}};e.exports=n.extendClass("rabWidgetOptionsCollector",r,s)},508:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(476).ViewType,o=i(997),r={construct:function(e,t,i){this._super(e,t,i);var a=this.handleAPIOptionChanged.bind(this);["determineGroupingCode"].forEach((e=>this.setAPIOptionChangedCallback(e,1,a)))},handleAPIOptionChanged:function(e,t,i){if("determineGroupingCode"===e)this.ganttView()&&this._initializeDetermineGroupingCode();else this._super(e,t,i)},_initOptions:function(e){this._super({...e})},setOption:function(e,t){if("viewType"===e)this.ganttView().setOption(e,t);this._super(e,t)},_initViewModels:function(){this._super(),this._initializeDetermineGroupingCode()},_initializeDetermineGroupingCode:function(){for(var e=this,t=e.getAPIOption("determineGroupingCode"),i=n._Minimum;i<=n._Maximum;i++)e._viewModels[i].setOption("determineGroupingCodeFunc",t?.bind(e.app().getOption("widget")))}};e.exports=a.extendClass("rabWidgetView",o,r)},9276:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nWrapperBase,r=i(7273),l=i(476).WarningCode,s={construct:function(e,t,i,a){this._model=e,this.initHierarchy(t,i,a)},initHierarchy:function(e,t,i){this._version=t,this._super(e,i,this._handleWarningFunc)},_getHandleWarningFunc:function(){return this._model.getHandleWarningFunc()||this._super()},model:function(){return this._model},getAPIOption:function(e){return this._model.getAPIOption(e)},_getDefaultObjectPropName:function(){},_getPropertyAsColorString:function(e){return e?.toString()||void 0},_getPropertyAsNumber:function(e,t){var i=null!=e?+e:void 0;return isNaN(i)?void 0:t?t(i):i},_getPropertyAsFiniteNumber:function(e){var t=null!=e?+e:void 0;return!isNaN(t)&&isFinite(t)?t:void 0},_createChild:function(e,t,i,a){return new(t.getClassConstructor())(this._model,e,this._version,a?null:t)},addChild:function(e,t,i){if(void 0===i||i===this._version)return this._super(e,t)},updateChild:function(e,t,i){if(void 0===i||i===this._version)return this._super(e,t)},classifyModification:function(e,t,i){var a=this;let n=a._model,o=n.getModificationClassificationVersion();var r=(a.rab_modificationClassificationVersion===o?a.rab_modificationClassification:void 0)??9;if(r){var s=a.constructor.prototype,c=s._modificationClassificationByProperty,u=a._copyOfData||a.data();if(u===e&&c){let e=t.replace(/ies$/,"y").replace(/s$/,"");n.app().handleWarning(l.REFERENCE_IDENTICAL_ON_UPDATE,{type:e,key:i})}else for(;s&&c&&Object.getOwnPropertyNames(s).every((function(o){if(o.match(/^[A-Z]/)){var l=c[o]||0;if("function"==typeof l&&(l=l.call(a,e)),-1===l){if(!Array.isArray(u[o])||!Array.isArray(e[o])||u[o].length!==e[o].length)return r=0,!1;var s=n.__ensureCompatibleValue(u,o);if(s&&s[0]){var p=n.__ensureCompatibleValue(e,o);if(s[0]instanceof d){for(var h=s.length-1;h>=0;h--)if(s[h].classifyModification(p[h],`${o}[${h}] object within ${t}`,i),!(r=Math.min(r,s[h].rab_modificationClassification||0)))return!1}else for(h=s.length-1;h>=0;h--)if(s[h]?.valueOf()!==p[h]?.valueOf())return r=0,!1}}else{if(n.__ensureCompatibleValue(e,o)===n.__ensureCompatibleValue(u,o)&&(l=2),!(r=Math.min(r,l)))return!1}}return!0}));)s=Object.getPrototypeOf(s),c=s?._modificationClassificationByProperty;9===r&&(r=0),a.rab_modificationClassification=r,a.rab_modificationClassificationVersion=o}return r},extendCallbackArgsForMultiplierPrimaryKey:function(){}},d=n.extendClass("rabWrapper",o,s);d.prototype.defineProperty=function(e,t,i,a){r.defineProperty(this,e,t,void 0,i,a)},e.exports=d},5573:(e,t,i)=>{var a=i(3571),n=a.nClassFactory,o=a.nWidget,r=i(5674).BarSnapTargets,l=i(476).RowDesigns,s=i(7433),d=i(5338),c=i(7776),u="nvs-widget",p={__rabApplicationClass:c,optionDefaults:{...d.prototype.optionDefaults,customName:"NETRONIC Visual Scheduling Widget (VSW)",customCopyrightYear:s.copyrightYear,customVersion:s.vswVersion,newCallbackBehaviorEnabled:!0,triggeringOfOnShowContextMenuInTimeAreaOfRow:!0,activityCalendarsEnabled:!0,defaultActivityCollapsedRowDesign:l.Bars|l.Optimized|l.CalendarGrid,defaultActivityExpandedRowDesign:l.Bars|l.Optimized|l.CalendarGrid,defaultResourceCollapsedRowDesign:l.Bars|l.Optimized|l.CalendarGrid,defaultResourceExpandedRowDesign:l.Bars|l.Optimized|l.CalendarGrid,defaultAllocationSnapTargetsForStart:r.Start|r.End|r.CalendarGrids,defaultAllocationSnapTargetsForEnd:r.Start|r.End|r.CalendarGrids,defaultActivitySnapTargetsForStart:r.CalendarGrids,defaultActivitySnapTargetsForEnd:r.CalendarGrids,defaultLinkSelectable:!1},construct:function(){this._super.apply(this,arguments),this._element.classList.add(u)},destroy:function(){this._element.classList.remove(u),this._super()}},h=n.extendClass("nVSWidget",d,p),g=self?.$??self?.jQuery??i.m.null;g?.widget&&function(){let e={options:{...p.optionDefaults},_create:function(){let e={},t={},i=g.Widget.prototype.options,a=this.options;Object.keys(a).forEach((n=>{(n in i?t:e)[n]=a[n]}));let n=this._w=new h(this.element[0],e);this.options=Object.assign(n.options,t);for(const e in n){let t=n[e];e.startsWith("_")||"function"!=typeof t||e in o.prototype||(this[e]=t.bind(n))}this._super()},option:function(){return this._w.option.apply(this._w,arguments)},_destroy:function(){this._w.destroy(),this._super()}};g.widget("netronic.nVSWidget",e)}(),e.exports=h},7776:(e,t,i)=>{var a=i(3571).nClassFactory,n=i(8684);e.exports=a.extendClass("nVSWApplication",n,{construct:function(e,t){this._super(e,{ganttViewOptions:{ganttWidget:{rowItemsSelectable:!0,detailedConstraintSymbolsEnabled:!0}},...t})}})},4137:(e,t,i)=>{var a=i(476),n=a.BarDesigns,o=a.BarDragModes,r=a.BarShape,l=a.WarningCode,s={ViewType:{Activities:0,Resources:1,Loads:2,SkilledResources:3},ObjectType:{TimeArea:-2,Timescale:-1,Activity:1,Allocation:2,Resource:5,Link:6,Curve:7,Entity:13,CalendarGrid:14,PeriodHighlighter:14,Symbol:15,DateLine:16,TooltipTemplate:17,TableRowDefinition:18,TableRowDefinitions:18,Calendar:20,HierarchySupplementaryDefinition:21,Skill:22},DragMode:{None:0,DragStart:1,DragEnd:2,DragHor:4,DragVer:8},RowInsertionMode:{None:0,InsertAsChild:1,InsertAsNextSibling:2,InsertAsPreviousSibling:3},SnapTargets:{None:0,Start:1,End:2,DateLines:4,CalendarGrids:8,DateLineGrids:16},TableType:{Gantt:0,Entities:1},TimescaleNavigationMode:{Latest:0,LegacyVersion1:1},AllocationBarDesign:{Allocation:0,Entries:1,AllocationAndEntries:2,MergedEntries:3,GroupedEntries:4},BarDesigns:{...n},RowDesigns:{None:0,Bars:1,Optimized:2,BarsStacked:2,BarsInHiddenDescendantRows:4,CalendarGrid:8},HorizontalAlignment:{Left:0,Center:1,Right:2},VerticalAlignment:{FirstLineOnBaseline:0,AllLinesCenteredAroundBaseline:1},CollapseState:{Unchanged:-1,Expanded:0,Collapsed:1},UpdateModes:{Default:0,UpdateOnly:0,ImplicitAddObjects:1,DifferentialValues:2},BarDragModes:o,ActivityBarDragModes:o,AllocationBarDragModes:o,RowDragModes:{None:0,DragVertically:8,DragOutside:32,DragOnSameLevelOnly:64,DragInSameTableParentOnly:128},VisualType:{Background:-1,Bar:0,Row:1,Curve:2,Link:3,CalendarGrid:4,PeriodHighlighter:4,DateLine:5,Timescale:6},VisualSubtype:{ActivityDueDateSymbol:1,ActivityReleaseDateSymbol:2},DateLineGridModes:{None:0,Auto:1,Weekly:2,Daily:4},BarShape:r,ActivityBarShape:r,AllocationBarShape:r,ActivityBarShapes:r,LinkMarker:{None:0,FilledArrow:1},LinkRoutingType:{Curved:1,Orthogonal:2},RelationType:{FinishToStart:0,FinishToFinish:1,StartToStart:2,StartToFinish:3,SourceDateToStart:4,SourceDateToFinish:5,FinishToTargetDate:8,StartToTargetDate:10,SourceDateToTargetDate:12},ProgressBarWidthCalculationMode:{ConsiderWorkingTimesOnly:0,ConsiderWorkingAndNonworkingTimes:1},TextWrapMode:{None:0,Line:1,Word:2},TimeType:{WorkingTime:1,NonworkingTime:2,NonWorkingTime:2},CurveType:{PointCurve:0,CurveStack:3,CurveList:4},CurveInterpolationType:{StepAfter:0,Linear:1},PaneIndex:{LoadCurve:0,InventoryCurve:1},ViewArea:{Top:-1,Main:0,Default:0},HorizontallyScrollableViewArea:{Table:0,TimeArea:1,EntitiesTable:2},VerticallyScrollableViewArea:{Top:-1,Main:0,EntitiesTable:2},HorizontalScrollPosition:{Left:1,Right:2},VerticalScrollPosition:{Top:1,Bottom:2},PanningMode:{None:0,HorizontallyOnly:1,VerticallyOnly:2,HorAndVer:3,AutoHorOrVer:4},DateLineCaptionPosition:{Left:1,Center:2,Right:4,TopLeft:9,TopCenter:10,TopRight:12},DateLineCaptionOrientation:{Horizontal:1,Vertical:2},SelectionBehavior:{Framing:0,Highlighting:1},TargetPositions:{None:0,Necesssary:0,Left:1,HCenter:2,Right:4,Top:8,VCenter:16,Bottom:32},WorldViewPosition:{Left:1,Right:2,Top:3,Bottom:4},SelectionChangedReason:{Click:0,BackgroundClick:1,ContextMenu:2,DragStart:3},PrintingMode:{Single:0,Cutting:1,Paging:2},PageOrientation:{Portrait:0,Landscape:1},PatternType:{None:-1,VerticalHatch:0,ForwardHatch:1,BackwardHatch:2},TreeVisualizationMode:{ColoredIndentation:0,TreeViewLines:1},BarSortMode:{StartAndEnd:0,ByCompareObjects:1,ByCompareObjectsOnSameStart:2},RowSortMode:{None:0,Ascending:1,Descending:2,AscendingStartAndEnd:3},TimescaleInteractionModes:{None:0,ScrollingByButtons:1,Rescaling:2,Default:3},TimeUnit:{Seconds:0,Minutes:1,Hours:2,Days:3,Weeks:4,Months:5,Quarters:6,Years:7},CollapseStateTargets:{Default:1,Rows:1,AllocationRows:2,CurvePanes:4},WarningCode:{EmptyIDAtIndex:"W"+l.PRIMARY_KEY_EMPTY_AT_INDEX,UnknownIDAtIndex:"W"+l.PRIMARY_KEY_NOT_EXISTING_AT_INDEX,ExistingIDAtIndex:"W"+l.PRIMARY_KEY_EXISTING_AT_INDEX,DuplicateIDAtIndex:"W"+l.PRIMARY_KEY_DUPLICATE_AT_INDEX,CyclicByParentID:"W"+l.RELATED_PRIMARY_KEY_CYCLIC,RelatedIDUnknownAtIndex:"W"+l.RELATED_PRIMARY_KEY_NOT_EXISTING_AT_INDEX,ReferenceIdentical:"W"+l.REFERENCE_IDENTICAL_ON_UPDATE,UnknownID:"W"+l.PRIMARY_KEY_NOT_EXISTING,ObjectNotVisibleInView:"W"+l.OBJECT_NOT_VISIBLE_IN_VIEW,UnknownOptionName:"W"+l.OPTION_NAME_UNKNOWN,RequiredOptionUnset:"W"+l.REQUIRED_OPTION_UNSET,HTMLCanvasFailedOnSaveAsPDF:"W"+l.TABLE__HTML_CANVAS_FAILED_ON_PRINTING},DayOfWeek:{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6}};e.exports=s},3571:t=>{t.exports=e},5674:e=>{e.exports=t},9280:e=>{e.exports=i},9816:e=>{e.exports=a},3098:e=>{e.exports=n},4379:e=>{e.exports=o},8680:e=>{e.exports=r},8625:e=>{e.exports=l},2582:e=>{e.exports=s},274:e=>{e.exports=d},7422:e=>{e.exports=c}},p={};function h(e){var t=p[e];if(void 0!==t)return t.exports;var i=p[e]={exports:{}};return u[e](i,i.exports,h),i.exports}return h.m=u,h(8138)})()));
/*! (c) Copyright 2020-2023 NETRONIC Software GmbH. All rights reserved. Version 8.0.1 */
"use strict";(()=>{var e={528:(e,t,i)=>{var n=i(108).nClassFactory,o=i(564).rabActivity,a={_getPropertyAsNumber:function(e,t){var i=this._super(e,t);return-1===i?void 0:i},_getPropertyAsFiniteNumber:function(e){var t=this._super(e);return-1===t?void 0:t},_modificationClassificationByProperty:{BarContextMenuID:2,ContextMenuID:2,ContextMenuIDInBarsPane:2,ContextMenuIDInCurvesPane:2}},r=n.extendClass("appActivity",o,a);e.exports=r;var s=r.prototype;Object.defineProperty(s,"BarText",{get:function(){return(this._data.BarText??this._data.AddIn_BarText??Object.getPrototypeOf(o).BarText)?.toString()}}),Object.defineProperty(s,"BarContextMenuID",{get:function(){return this._data.BarContextMenuID??this._data.AddIn_BarContextMenuID}}),Object.defineProperty(s,"ContextMenuID",{get:function(){return this._data.ContextMenuID??this._data.AddIn_ContextMenuID}}),Object.defineProperty(s,"ContextMenuIDInBarsPane",{get:function(){return this._data.ContextMenuIDInBarsPane??this._data.AddIn_ContextMenuIDInBarsPane}}),Object.defineProperty(s,"ContextMenuIDInCurvesPane",{get:function(){return this._data.ContextMenuIDInCurvesPane??this._data.AddIn_ContextMenuIDInCurvesPane}}),Object.defineProperty(s,"TableSortCode",{get:function(){return this._data.TableSortCode??this._data.AddIn_TableSortCode}}),Object.defineProperty(s,"TableText",{get:function(){return(this._data.TableText??this._data.AddIn_TableText??Object.getPrototypeOf(o).TableText)?.toString()}})},391:(e,t,i)=>{var n=i(108).nClassFactory,o=i(564).rabActivityEntry,a={_getPropertyAsNumber:function(e,t){var i=this._super(e,t);return-1===i?void 0:i},_getPropertyAsFiniteNumber:function(e){var t=this._super(e);return-1===t?void 0:t}};e.exports=n.extendClass("appActivityEntry",o,a)},476:(e,t,i)=>{var n=i(108).nClassFactory,o=i(564).rabAllocation,a={_getPropertyAsNumber:function(e,t){var i=this._super(e,t);return-1===i?void 0:i},_getPropertyAsFiniteNumber:function(e){var t=this._super(e);return-1===t?void 0:t},_modificationClassificationByProperty:{BarContextMenuID:2,ContextMenuID:2,ContextMenuIDInBarsPane:2}},r=n.extendClass("appAllocation",o,a);e.exports=r;var s=r.prototype;Object.defineProperty(s,"BarContextMenuID",{get:function(){var e=this.externalData();return e.BarContextMenuID??e.AddIn_BarContextMenuID}}),Object.defineProperty(s,"BarText",{get:function(){var e=this.externalData();return(e.BarText??e.AddIn_BarText??Object.getPrototypeOf(o).BarText)?.toString()}}),Object.defineProperty(s,"ContextMenuID",{get:function(){var e=this.externalData();return e.ContextMenuID??e.AddIn_ContextMenuID}}),Object.defineProperty(s,"ContextMenuIDInBarsPane",{get:function(){var e=this.externalData();return e.ContextMenuIDInBarsPane??e.AddIn_ContextMenuIDInBarsPane}}),Object.defineProperty(s,"TableSortCode",{get:function(){var e=this.externalData();return e.TableSortCode??e.AddIn_TableSortCode}}),Object.defineProperty(s,"TableText",{get:function(){var e=this.externalData();return(e.TableText??e.AddIn_TableText??Object.getPrototypeOf(o).TableText)?.toString()}})},154:(e,t,i)=>{var n=i(108).nClassFactory,o=i(564).rabAllocationEntry,a={_getPropertyAsNumber:function(e,t){var i=this._super(e,t);return-1===i?void 0:i},_getPropertyAsFiniteNumber:function(e){var t=this._super(e);return-1===t?void 0:t}},r=n.extendClass("appAllocationEntry",o,a);e.exports=r},925:(e,t,i)=>{var n=i(108).nClassFactory,o=i(564).rabWidgetApplication,a=i(528),r=i(391),s=i(476),d=i(154),l=i(670),c=i(841),I=i(722),u=i(193),_=i(555),T={construct:function(e){this._super(e,{modelOptions:{activityClass:a,activityEntryClass:r,allocationClass:s,allocationEntryClass:d,linkClass:c,resourceClass:u,skillClass:_,entityClass:l,periodHighlighterEntryClass:I},ganttViewOptions:{ganttWidget:{rowItemsSelectable:!0}}})}};e.exports=n.extendClass("appApplication",o,T)},670:(e,t,i)=>{var n=i(108).nClassFactory,o=i(564).rabEntity,a={_getPropertyAsNumber:function(e,t){var i=this._super(e,t);return-1===i?void 0:i},_getPropertyAsFiniteNumber:function(e){var t=this._super(e);return-1===t?void 0:t},_modificationClassificationByProperty:{ContextMenuID:2}},r=n.extendClass("appEntity",o,a);e.exports=r;var s=r.prototype;Object.defineProperty(s,"ContextMenuID",{get:function(){return this._data.ContextMenuID??this._data.AddIn_ContextMenuID}}),Object.defineProperty(s,"TableSortCode",{get:function(){return this._data.TableSortCode??this._data.AddIn_TableSortCode}}),Object.defineProperty(s,"TableText",{get:function(){return(this._data.TableText??this._data.AddIn_TableText??Object.getPrototypeOf(o).TableText)?.toString()}})},841:(e,t,i)=>{var n=i(108).nClassFactory,o=i(564).rabLink,a=n.extendClass("appLink",o,{_modificationClassificationByProperty:{ContextMenuID:2}});e.exports=a;var r=a.prototype;Object.defineProperty(r,"ContextMenuID",{get:function(){return this._data.ContextMenuID??this._data.AddIn_ContextMenuID}})},722:(e,t,i)=>{var n=i(108).nClassFactory,o=i(564).rabPeriodHighlighterEntry,a=n.extendClass("appPeriodHighlighterEntry",o,{});e.exports=a;var r=a.prototype;Object.defineProperty(r,"ContextMenuID",{get:function(){return this._data.ContextMenuID??this._data.AddIn_ContextMenuID}}),Object.defineProperty(r,"TooltipText",{get:function(){return this._data.TooltipText??this._data.AddIn_TooltipText}})},193:(e,t,i)=>{var n=i(108).nClassFactory,o=i(564).rabResource,a={_getPropertyAsNumber:function(e,t){var i=this._super(e,t);return-1===i?void 0:i},_getPropertyAsFiniteNumber:function(e){var t=this._super(e);return-1===t?void 0:t},_modificationClassificationByProperty:{ContextMenuID:2,ContextMenuIDInBarsPane:2,ContextMenuIDInCurvesPane:2}},r=n.extendClass("appResource",o,a);e.exports=r;var s=r.prototype;Object.defineProperty(s,"ContextMenuID",{get:function(){var e=this.externalData();return e.ContextMenuID??e.AddIn_ContextMenuID}}),Object.defineProperty(s,"ContextMenuIDInBarsPane",{get:function(){var e=this.externalData();return e.ContextMenuIDInBarsPane??e.AddIn_ContextMenuIDInBarsPane}}),Object.defineProperty(s,"ContextMenuIDInCurvesPane",{get:function(){var e=this.externalData();return e.ContextMenuIDInCurvesPane??e.AddIn_ContextMenuIDInCurvesPane}}),Object.defineProperty(s,"TableSortCode",{get:function(){var e=this.externalData();return e.TableSortCode??e.AddIn_TableSortCode}}),Object.defineProperty(s,"TableText",{get:function(){var e=this.externalData();return(e.TableText??e.AddIn_TableText??Object.getPrototypeOf(o).TableText)?.toString()}})},555:(e,t,i)=>{var n=i(108).nClassFactory,o=i(564).rabSkill,a={_getPropertyAsNumber:function(e,t){var i=this._super(e,t);return-1===i?void 0:i},_getPropertyAsFiniteNumber:function(e){var t=this._super(e);return-1===t?void 0:t},_modificationClassificationByProperty:{ContextMenuID:2}},r=n.extendClass("appSkill",o,a);e.exports=r;var s=r.prototype;Object.defineProperty(s,"ContextMenuID",{get:function(){return this.externalData().ContextMenuID}}),Object.defineProperty(s,"TableSortCode",{get:function(){return this.externalData().TableSortCode}})},396:(e,t,i)=>{var n=i(673),o=i(108),a=o.nClass,r=o.nClassFactory,s=o.nDOMHelper.eventListenerHelper,d=o.nEventDispatcher,l=o.nOSDetector,c=o.nScrollBarWidthDetector,I=i(564),u=I.ObjectType,_=I.RowSortMode,T=I.TableType,h=I.UpdateModes,p=I.ViewType,A=I.VisualType,g=i(992),S=i(613),b=i(909),m=i(430),f=["Activity","Allocation","Entity","Resource","Skill"],v=f.map((e=>`${e}SortCodeSources`)),O={construct:function(){this._options={PingTimeInMilliseconds:0,ForcedFillOfPageSpace:!1,DeselectionOfRowsOrBarsOnLinkContextMenu:!0,ActivitySortCodeSources:null,AllocationSortCodeSources:null,EntitySortCodeSources:null,ResourceSortCodeSources:null,SkillSortCodeSources:null,TopStatusAreaHeight:0,BottomStatusAreaHeight:0,TopStatusAreaContent:null,BottomStatusAreaContent:null,StatusAreaVariables:null,VisiblePropertyName:"Visible",CanDragTriggeringEnabled:!0},window.Hamlet&&Object.assign(this._options,{FullObjectsInEvents:!1,HamletTooltips:!1,HamletTableText:!1,OnDropWithCompletion:!1,OnCollapseStateChangedWithCompletion:!1,OnCurveCollapseStateChangedWithCompletion:!1,KeydownList:null,KeyupList:null,ProductName:null,ProductVersion:null}),this._interfaceReady=!1,this._implementInterface(),this._prepareWorkArea(),this._completionResolveFuncs={},this._nextCompletionID=0,this._visibilityObjectTypes=[u.Activity,u.Allocation,u.Entity,u.Resource],this._hiddenObjectsCounts={},this._visibilitiesByObjectType={},this._objectsByIDAndObjectType={},this._visibilityObjectTypes.forEach((e=>{this._hiddenObjectsCounts[e]=0,this._visibilitiesByObjectType[e]={},this._objectsByIDAndObjectType[e]={}}))},_implementInterface:function(){var e=this;!1===this._interfaceReady&&(window.FitFullTimeAreaIntoView=e._II_fitTimeAreaIntoView.bind(e),window.FitTimeAreaIntoView=e._II_fitTimeAreaIntoView.bind(e),window.SetTimeResolutionForView=e._II_setTimeResolutionForView.bind(e),window.SaveAsPDF=e._II_saveAsPDF.bind(e),window.CancelSaveAsPDF=e._II_cancelSaveAsPDF.bind(e),window.RemoveAll=e._II_removeAll.bind(e),window.RemoveAllOfType=e._II_removeAll.bind(e),window.Render=e._II_render.bind(e),window.ScrollToDate=e._II_scrollToDate.bind(e),window.ScrollToDateWithOffset=e._II_scrollToDate.bind(e),window.ScrollToObject=e._II_scrollToObject.bind(e),window.ScrollViewAreaHorizontally=e._II_scrollViewAreaHorizontally.bind(e),window.ScrollViewAreaVertically=e._II_scrollViewAreaVertically.bind(e),window.SelectObjects=e._II_selectObjects.bind(e),window.HighlightObjects=e._II_highlightObjects.bind(e),window.SetCollapseStatesForEntityRows=e._II_setCollapseStatesForEntityRows.bind(e),window.SetCollapseStatesForRows=e._II_setCollapseStatesForRows.bind(e),window.SetSettings=e._II_setSettings.bind(e),window.About=e._II_about.bind(e),window.AddActivities=e._II_addActivities.bind(e),window.UpdateActivities=e._II_updateActivities.bind(e),window.RemoveActivities=e._II_removeActivities.bind(e),window.AddAllocations=e._II_addAllocations.bind(e),window.UpdateAllocations=e._II_updateAllocations.bind(e),window.RemoveAllocations=e._II_removeAllocations.bind(e),window.AddCalendars=e._II_addCalendars.bind(e),window.UpdateCalendars=e._II_updateCalendars.bind(e),window.RemoveCalendars=e._II_removeCalendars.bind(e),window.AddCurves=e._II_addCurves.bind(e),window.UpdateCurves=e._II_updateCurves.bind(e),window.RemoveCurves=e._II_removeCurves.bind(e),window.AddResources=e._II_addResources.bind(e),window.UpdateResources=e._II_updateResources.bind(e),window.RemoveResources=e._II_removeResources.bind(e),window.AddLinks=e._II_addLinks.bind(e),window.UpdateLinks=e._II_updateLinks.bind(e),window.RemoveLinks=e._II_removeLinks.bind(e),window.AddEntities=e._II_addEntities.bind(e),window.UpdateEntities=e._II_updateEntities.bind(e),window.RemoveEntities=e._II_removeEntities.bind(e),window.AddSymbols=e._II_addSymbols.bind(e),window.UpdateSymbols=e._II_updateSymbols.bind(e),window.RemoveSymbols=e._II_removeSymbols.bind(e),window.AddContextMenus=e._II_addContextMenus.bind(e),window.UpdateContextMenus=e._II_updateContextMenus.bind(e),window.RemoveContextMenus=e._II_removeContextMenus.bind(e),window.AddCalendarGrids=e._II_addPeriodHighlighters.bind(e),window.UpdateCalendarGrids=e._II_updatePeriodHighlighters.bind(e),window.RemoveCalendarGrids=e._II_removePeriodHighlighters.bind(e),window.AddPeriodHighlighters=e._II_addPeriodHighlighters.bind(e),window.UpdatePeriodHighlighters=e._II_updatePeriodHighlighters.bind(e),window.RemovePeriodHighlighters=e._II_removePeriodHighlighters.bind(e),window.AddDateLines=e._II_addDateLines.bind(e),window.UpdateDateLines=e._II_updateDateLines.bind(e),window.RemoveDateLines=e._II_removeDateLines.bind(e),window.AddTooltipTemplates=e._II_addTooltipTemplates.bind(e),window.UpdateTooltipTemplates=e._II_updateTooltipTemplates.bind(e),window.RemoveTooltipTemplates=e._II_removeTooltipTemplates.bind(e),window.AddTableRowDefinitions=e._II_addTableRowDefinitions.bind(e),window.UpdateTableRowDefinitions=e._II_updateTableRowDefinitions.bind(e),window.RemoveTableRowDefinitions=e._II_removeTableRowDefinitions.bind(e),window.AddHierarchySupplementaryDefinitions=e._II_addHierarchySupplementaryDefinitions.bind(e),window.UpdateHierarchySupplementaryDefinitions=e._II_updateHierarchySupplementaryDefinitions.bind(e),window.RemoveHierarchySupplementaryDefinitions=e._II_removeHierarchySupplementaryDefinitions.bind(e),window.AddSkills=e._II_addSkills.bind(e),window.UpdateSkills=e._II_updateSkills.bind(e),window.RemoveSkills=e._II_removeSkills.bind(e),window.SetResourcePropertiesForSkill=e._II_setResourcePropertiesForSkill.bind(e),window.ProcessOnDrop=e._II_processOnDrop.bind(e),window.EventProcessingDone=e._II_eventProcessingDone.bind(e),window.EventProcessingDoneEx=e._II_eventProcessingDone.bind(e),window.AppendTextToLog=e._II_appendTagToLog.bind(e),window.LogToConsole=window.LogTextToConsole=window.LogJsonArrayToConsole=function(e){console&&console.log(e)},this._interfaceReady=!0)},_prepareWorkArea:function(){if(!this._vsWidget){var e=document.getElementById("controlAddIn");this._createStatusArea(e,"TopStatusArea");var t=document.createElement("div");t.setAttribute("id","WorkArea"),t.style.width="100%",t.setAttribute("class","nvscai-logo"),e.appendChild(t),this._createStatusArea(e,"BottomStatusArea"),this._setAreaHeights();var i={Version:S[window.Hamlet?"hamletVersionNumber":"versionNumber"]};this._invokeExtensibilityMethod("OnRequestSettings",[i])}},_createStatusArea:function(e,t){var i=document.createElement("div");return i.setAttribute("id",t),i.style.width="100%",i.style.overflowY="clip",e.appendChild(i),this._eventDispatchers||(this._eventDispatchers={}),this._eventDispatchers[t]=new d(i,[o.nEventDispatcher.TAP_EVENT_NAME,o.nEventDispatcher.DOUBLE_TAP_EVENT_NAME],"nvscai"),i.addEventListener("contextmenu",(function(e){e.stopPropagation(),e.preventDefault()})),i},_setAreaHeights:function(){var e=parseFloat(this._options.TopStatusAreaHeight)||0,t=parseFloat(this._options.BottomStatusAreaHeight)||0,i=e+"px",n=t+"px",o="calc(100% - "+(e+t+"px")+")";document.querySelector("#TopStatusArea").style.height=i,document.querySelector("#WorkArea").style.height=o,document.querySelector("#BottomStatusArea").style.height=n},_setStatusAreaContents:function(e){e&&!0!==e.TopStatusArea||this._setStatusAreaContent(document.querySelector("#TopStatusArea"),this._options.TopStatusAreaContent),e&&!0!==e.BottomStatusArea||this._setStatusAreaContent(document.querySelector("#BottomStatusArea"),this._options.BottomStatusAreaContent)},_setStatusAreaContent:function(e,t){if(e.length&&t){e[0].innerHTML=this._textReplacements(t);var i="."+d.TAP_EVENT_CLASS_NAME+", ."+d.DOUBLE_TAP_EVENT_CLASS_NAME;e.find(i).data(d.HANDLER_FUNCTION_PROPERTY+"nvscai",(function(t){var i={ObjectID:t.target.id,ObjectType:e[0].id,VisualType:-1,CellIndex:-1,EntryIndex:-1,SymbolIndex:-1,SymbolID:""};try{switch(t.type){case d.TAP_EVENT_NAME:this._invokeExtensibilityMethod("OnClicked",[i]);break;case d.DOUBLE_TAP_EVENT_NAME:this._invokeExtensibilityMethod("OnDoubleClicked",[i])}}catch(e){this._handleException(e,"tapEvents")}}))}},_textReplacements:function(e){if(e){var t=this._vsWidget._application,i=this._options.StatusAreaVariables;e=e.replace(/{{(?![{#>@.?])/g,"{{#"),e=t.resolveFormat?.(e,null,null,null,"#",((e,t,n,o)=>{if(o&&"#"===e[0])return{wrapperObject:i?.[e.substring(1)],wrapperType:-1}}))}return e},_stretchContainer:function(){var e=c.scrollBarWidth(),t=window.frameElement;if(t){var i=t.closest(".ms-nav-scrollable");if(i){let n=i.getBoundingClientRect().height,o=i.scrollHeight,a=0;o>n&&(a=o-n),t.style.maxHeight="10000px",t.style.height="10000px";let r,s=i.scrollHeight;r=s===o?n-e+a:n-(s-1e4)-e+a;let d=parseFloat(t.style.minHeight);return r<d&&(r=d),t.style.height=r+"px",void(t.style.maxHeight=r+"px")}if((i=parent.document.querySelector(".ms-core-overlay"))||!(i=parent.document.querySelector(".entity-content-container"))){if(0!==i.length){let t=i.getBoundingClientRect().height,n=i.scrollHeight,o=0;n>t&&(o=n-t);let a=parent.document.querySelector("iframe:first");a.style.height="10000px";let r=t-(i.scrollHeight-1e4)-e+o,s=parseFloat(a.style.minHeight);r<s&&(r=s),a.style.height=r+"px"}}else{i.querySelector("iframe:first").style.height=i.offsetHeight-3+"px"}}},_invokeExtensibilityMethod:function(e,t){Microsoft.Dynamics.NAV.InvokeExtensibilityMethod(e,t)},_doCompareObjectsFunc:function(e,t){var i=function(e){var i=!0;if("-"===e.charAt(0)&&(i=!1,e=e.substring(1)),e){var n,o=e.split(".").reverse(),a=t.objectA,r=t.objectB;do{if(n=o.pop(),!o.length||!n)break;a=a[n],r=r[n]}while(a&&r);if(n&&a&&r){var s=a[n],d=r[n];if(s!==d)return t.isALowerThanB=i?s<d:s>d,!1}}return!0};Array.isArray(e)&&!e.every(i)||i("TableSortCode")&&i("AddIn_TableSortCode")&&i("ID")},_compareActivitiesFunc:function(e){this._doCompareObjectsFunc(this._options.ActivitySortCodeSources,e)},_compareAllocationsFunc:function(e){this._doCompareObjectsFunc(this._options.AllocationSortCodeSources,e)},_compareEntitiesFunc:function(e){this._doCompareObjectsFunc(this._options.EntitySortCodeSources,e)},_compareResourcesFunc:function(e){this._doCompareObjectsFunc(this._options.ResourceSortCodeSources,e)},_compareSkillsFunc:function(e){this._doCompareObjectsFunc(this._options.SkillSortCodeSources,e)},_initResize:function(e){if(window.netronic_isCALVersion){var t=this;if(e){var i;top.window.addEventListener("resize",(function(){clearTimeout(i),i=setTimeout(t._stretchContainer,500)}));var n=window.innerWidth,o=window.innerHeight;window.addEventListener("resize",(function(){var e=window.innerWidth,a=window.innerHeight;e===n&&a===o||(clearTimeout(i),i=setTimeout(t._stretchContainer,10)),n=e,o=a})),t._stretchContainer()}}else document.querySelector("#controlAddIn").style.boxSizing="border-box"},_initWidget:function(){var e=this;if(!this._vsWidget){var t=document.querySelector("#WorkArea");t.setAttribute("class","");var i={viewType:p.Resources,additionalDateStringInterpretedAsEmpty:window.netronic_isCALVersion?"0001-01-01T00:00:00":"0001-01-01T00:00:00.0000000",onDetermineColumnDefinitions:this._onDetermineColumnDefinitionsTriggered.bind(this),onShowTooltip:this._onShowTooltipTriggered.bind(this),canDrag:this._canDragTriggered.bind(this),onDragStart:this._onDragStartTriggered.bind(this),onDragEnd:this._onDragEndTriggered.bind(this),onDrop:this._onDropTriggered.bind(this),onTableCellDefinitionWidthChanged:this._onTableCellDefinitionWidthChangedTriggered.bind(this),onClicked:this._onClickedTriggered.bind(this),onDoubleClicked:this._onDoubleClickedTriggered.bind(this),onSelectionChanged:this._onSelectionChangedTriggered.bind(this),onCollapseStateChanged:this._onCollapseStateChangedTriggered.bind(this),onCurveCollapseStateChanged:this._onCurveCollapseStateChangedTriggered.bind(this),onTimeAreaViewParametersChanged:this._onTimeAreaViewParametersChangedTriggered.bind(this),onVerticalScrollOffsetChanged:this._onVerticalScrollOffsetChangedTriggered.bind(this),onSaveAsPDFProgress:this._onSaveAsPDFProgressTriggered.bind(this),onLogWarning:this._onLogWarningTriggered.bind(e),onLogError:this._onLogErrorTriggered.bind(e),onShowContextMenu:this._onShowContextMenuTriggered.bind(e),onCloseContextMenu:this._onCloseContextMenuTriggered.bind(e),onRowSortingChangeRequested:this._onRowSortingChangeRequested.bind(e)};return f.forEach((t=>{t=`${t.replace(/y$/,"ie")}s`,i[`compare${t}`]=e[`_compare${t}Func`].bind(e)})),this._vsWidget=this._createWidgetInstance(t,i),this._vsWidget._vscai_options=this._options,this._initResize(this._options.ForcedFillOfPageSpace),this._activitiesTableColumns=[{}],this._resourcesTableColumns=[{}],this._entitiesTableColumns=[{}],window.Hamlet&&s.on(this._vsWidget.element(),"keydown.nVSCAI keyup.nVSCAI",(function(t){return e._handleKeyEvent(t)})),!0}return!1},_createWidgetInstance:function(e,t){return new g(e,t)},_handlePingTimeInMilliseconds:function(){var e=this;void 0!==this._pingIntervalID&&(window.clearInterval(this._pingIntervalID),delete this._pingIntervalID),this._options.PingTimeInMilliseconds>0&&(this._pingIntervalID=window.setInterval((function(){e._invokeExtensibilityMethodQueue?.length||Microsoft.Dynamics.NAV.InvokeExtensibilityMethod("OnPing",[],!0)}),this._options.PingTimeInMilliseconds))},_sendKeyEventToD365:function(e,t){this._invokeExtensibilityMethod("On"+t,[{AltKey:e.altKey,CtrlKey:e.ctrlKey,Key:e.key,Location:e.location,MetaKey:e.metaKey,Repeat:e.repeat,ShiftKey:e.shiftKey}]),e.preventDefault()},_handleKeyEvent:function(e){var t=this;function i(e,t){return!e&&"boolean"!=typeof e||!!e===t}if(!e.defaultPrevented){var n=e.type.substring(0,1).toUpperCase()+e.type.substring(1),o=this._options[[n,"List"].join("")];Array.isArray(o)&&!e.isComposing&&229!==e.keyCode&&o.every((function(a){switch(typeof a){case"string":if(o.indexOf(e.key)>=0)return t._sendKeyEventToD365(e,n),!1;break;case"object":if(a.Key===e.key){var r=a.AltKey,s=a.CtrlKey,d=a.MetaKey,c=a.ShiftKey;if((a.CmdKey||"boolean"==typeof a.CmdKey)&&(s=!(d=l.isMac?!!a.CmdKey:!a.CmdKey)),i(r,e.altKey)&&i(s,e.ctrlKey)&&i(d,e.metaKey)&&i(c,e.shiftKey))return t._sendKeyEventToD365(e,n),!1}}return!0}))}},_updateVisibilityFilterCallback:function(e,t,i){var n=this;if(Array.isArray(t)||3===i){let s=`visibilityFilterFor${{[u.Activity]:"Activities",[u.Allocation]:"Allocations",[u.Resource]:"Resources",[u.Entity]:"Entities",[u.Skill]:"Skills"}[e]}`,d=n._options.VisiblePropertyName,l="Visible"===d?"AddIn_Visible":void 0,c=n._objectsByIDAndObjectType[e];var o=n._visibilitiesByObjectType[e];if(o){switch(i){case-1:t=Object.values(c),n._hiddenObjectsCounts[e]=0,n._visibilitiesByObjectType[e]={};case 0:t.forEach((function(t){var i=t.ID,a=t[d]??(l&&t[l])??!0;a||n._hiddenObjectsCounts[e]++,o[i]=a,c[i]=t}));break;case 1:var a=n._vsWidget.options.defaultUpdateMode&h.DifferentialValues,r=n._vsWidget.options.defaultUpdateMode&h.ImplicitAddObjects;t.forEach((function(t){a&&c[t.ID]&&n._vsWidget._application.supplementDifferentialObject(t,c[t.ID]);var i=t.ID,s=t[d]??(l&&t[l])??!0,I=o[i];(r||void 0!==I)&&I!==s&&(s?!1===I&&n._hiddenObjectsCounts[e]--:n._hiddenObjectsCounts[e]++),o[i]=s,c[i]=t}));break;case 2:t.forEach((function(t){var i="string"==typeof object?t:t.ID;o[i]||n._hiddenObjectsCounts[e]--,delete o[i],delete c[i]}));break;case 3:n._hiddenObjectsCounts[e]=0,n._visibilitiesByObjectType[e]={},n._objectsByIDAndObjectType[e]={}}n._hiddenObjectsCounts[e]?n._vsWidget.options[s]&&-1!==i||n._vsWidget.option(s,n._visibilityFilterFunc.bind(n)):n._vsWidget.options[s]&&n._vsWidget.option(s,null)}}},_visibilityFilterFunc:function(e){let t=this._options.VisiblePropertyName,i="Visible"===t?"AddIn_Visible":void 0,n=e.object;e.result=!1!==(n[t]??(i&&n[i]))},_onDetermineColumnDefinitionsTriggered:function(e){var t=this;e.tableType===T.Entities?e.columns=t._entitiesTableColumns:e.viewType===p.Activities?e.columns=t._activitiesTableColumns:e.columns=t._resourcesTableColumns,e.columns[0].textSource=t._options.HamletTableText?"Name":"TableText"},_onShowTooltipTriggered:function(e){if(this._options.HamletTooltips){var t=e.objectType,i=e.object;if(null!=i&&null!=i.NET_CustomPropertyBag&&null!=i.NET_CustomPropertyBag.ToolTipInfo){var n=i.NET_CustomPropertyBag.ToolTipInfo;if(null!=n){var o=null!=n.preLine?n.preLine:"</tr>",a=null!=n.htmlTooltipLineTemplate?n.htmlTooltipLineTemplate:"<td>#description#</td><td>#value#</td>",r=null!=n.postLine?n.postLine:"</tr>",s=null!=n.postBlock?n.postBlock:"</table>";if(null!=t&&t==I.ObjectType.Resource){var d="",l=n.isResourceGroup?"RG_":"R_",c=function(e,t,i){if(void 0===i&&(i=!0),null!=e&&null!=t&&(!i||t>0||""!=t)){var n=o;return n=(n+=a.replace("#description#",e)).replace("#value#",t),n+=r}return""},u=function(t,i,n){var o=t+i+_,a=e.singleLoads[o];null!=a&&a>0&&(d+=c(n,a))};if(d+=c(null!=n.capacityCurveDescription?n.capacityCurveDescription:"capacity",e.capacity,!1),d+=c(null!=n.loadCurveDescription?n.loadCurveDescription:"total load",e.load,!1),e.singleLoads){var _=i.ID.substring(l.length);u("","ALC_",null!=n.absenceCurveDescription?n.absenceCurveDescription:"Absence"),u(l,"PC_AL_",null!=n.ALCurveDescription?n.ALCurveDescription:"Assembly Load"),u(l,"PC_JPL_",null!=n.JPLCurveDescription?n.JPLCurveDescription:"Job Load"),u(l,"PC_SOA_",null!=n.SOACurveDescription?n.SOACurveDescription:"Service Load: ")}if(null!=e.date){var T=e.date;d+=c(null!=n.dateDescription?n.dateDescription:"Date",T.toLocaleDateString(this._vsWidget.options.locale))}d+=s}var h="";let p=n.TooltipText||n.AddIn_TooltipText;p&&(h=null!=d?p+d:p),e.innerHTML=h}}}else{var p=e.object;if(p&&!e.tooltipTemplateID){let t=e.calendarGrid&&e.entry||p;e.innerHTML=t.TooltipText||t.AddIn_TooltipText}}},_overwriteOption:function(e,t,i){var n=this,o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};e&&o(e,t)?(n._origValues||(n._origValues={}),o(n._origValues,i)||(n._origValues[i]=n._vsWidget.option(i)),n._vsWidget.option(i,e[t])):n._origValues&&o(n._origValues,i)&&n._origValues[i]!==n._vsWidget.option(i)&&(n._vsWidget.option(i,n._origValues[i]),delete n._origValues[i])},_canDragTriggered:function(e){var t=this;if(t._overwriteOption(e.object,"PM_BarTimeStepUnit","timeStepUnit"),t._overwriteOption(e.object,"PM_BarTimeStepUnitFactor","timeStepUnitFactor"),t._options.CanDragTriggeringEnabled){var i={ObjectType:e.objectType,VisualType:e.visualType,AllowedDragModes:e.allowedDragModes,StartPropertyName:e.startPropertyName||"",EndPropertyName:e.endPropertyName||""};t._options.FullObjectsInEvents?i.Object=e.object:i.ObjectID=e.object?e.object.ID:"",e.selectedObjects&&(i.SelectedObjectIDs=e.selectedObjects.map((function(e){return e.ID}))),e.skillID&&(i.SkillID=e.skillID),e.activityID&&(i.ActivityID=e.activityID),t._cachedCanDragEventArgs=i,null!=t._cachedCanDragEventsTimerID&&window.clearTimeout(t._cachedCanDragEventsTimerID),t._cachedCanDragEventsTimerID=window.setTimeout((function(){delete t._cachedCanDragEventsTimerID,t._invokeExtensibilityMethod("CanDrag",[t._cachedCanDragEventArgs])}),100)}},_onDragStartTriggered:function(e){var t=this,i={ObjectType:e.objectType,VisualType:e.visualType,DragMode:e.dragMode,StartPropertyName:e.startPropertyName||"",EndPropertyName:e.endPropertyName||""};if(i.EntryIndex=null!=e.entryIndex?e.entryIndex:-1,e.skillID&&(i.SkillID=e.skillID),e.activityID&&(i.ActivityID=e.activityID),t._options.FullObjectsInEvents?i.Object=e.object:i.ObjectID=e.object?e.object.ID:"",t._invokeExtensibilityMethod("OnDragStart",[i]),e.visualType===A.Row){let i={[u.Activity]:"Activity",[u.Allocation]:"Allocation",[u.Entity]:"Entity",[u.Resource]:"Resource",[u.Skill]:"Skill"}[e.objectType];if(i){let e=t._options[`${i}SortCodeSources`]?.[0]||"TableSortCode";i=`${i[0].toLowerCase()}${i.substring(1)}`,t._rowDragStartedObjectTypeName=i,t._vsWidget.option({[`´${i}RowSortCodePropertyName`]:e.replace(/^[+-]/,""),[`´${i}RowSortMode`]:"-"===e[0]?_.Descending:_.Ascending})}}},_finishRowDragging:function(){if(this._rowDragStartedObjectTypeName){let e=this._rowDragStartedObjectTypeName;this._rowDroppedObjectTypeName=e,this._vsWidget.option({[`´${e}RowSortMode`]:_.None}),delete this._rowDragStartedObjectTypeName}},_onDragEndTriggered:function(e){var t=this,i={ObjectType:e.objectType,VisualType:e.visualType,DragMode:e.dragMode,StartPropertyName:e.startPropertyName||"",EndPropertyName:e.endPropertyName||""};i.EntryIndex=null!=e.entryIndex?e.entryIndex:-1,e.skillID&&(i.SkillID=e.skillID),e.activityID&&(i.ActivityID=e.activityID),t._options.FullObjectsInEvents?i.Object=e.object:i.ObjectID=e.object?e.object.ID:"",t._invokeExtensibilityMethod("OnDragEnd",[i]),t._finishRowDragging()},_onDropTriggered:function(e){var t=this;t._callbackArgsOfLastOnDropCallback=e;var i={ObjectType:e.objectType,VisualType:e.visualType,DragMode:e.dragMode,NewRowObjectType:e.newRowObjectType,WorkingTimeDistance:e.workingTimeDistance||0,StartPropertyName:e.startPropertyName||"",EndPropertyName:e.endPropertyName||""};if(e.skillID&&(i.SkillID=e.skillID),e.activityID&&(i.ActivityID=e.activityID),e.newStart&&(i.NewStart=e.newStart),e.newEnd&&(i.NewEnd=e.newEnd),e.newDate&&(i.NewDate=e.newDate),"rowInsertionMode"in e&&(i.RowInsertionMode=e.rowInsertionMode),"newSortCode"in e&&(i.NewSortCode=e.newSortCode),"newSkillID"in e&&(i.NewSkillID=e.newSkillID),"newActivityID"in e&&(i.NewActivityID=e.newActivityID),e.startsAndEndsOfEntries?.length&&(i.StartsAndEndsOfEntries=e.startsAndEndsOfEntries.map((e=>({EntryIndex:e.entryIndex,NewStart:e.newStart,NewEnd:e.newEnd,Duration:e.duration})))),e.coupledObjects?.length&&(i.CoupledObjectIDs=e.coupledObjects.map((e=>e.ID))),i.EntryIndex=null!=e.entryIndex?e.entryIndex:-1,t._options.FullObjectsInEvents?(i.Object=e.object,i.NewRowObject=e.newRowObject):(i.ObjectID=e.object?e.object.ID:"",i.NewRowObjectID=e.newRowObject?e.newRowObject.ID:""),e.startsAndEndsOfCoupledObjects&&(i.StartsAndEndsOfCoupledObjects=e.startsAndEndsOfCoupledObjects.map((function(e){var i={NewStart:e.newStart,NewEnd:e.newEnd};return t._options.FullObjectsInEvents?i.Object=e.object:i.ObjectID=e.object.ID,e.startsAndEndsOfEntries?.length&&(i.StartsAndEndsOfEntries=e.startsAndEndsOfEntries.map((e=>({EntryIndex:e.entryIndex,NewStart:e.newStart,NewEnd:e.newEnd,Duration:e.duration})))),i}))),e.otherNewSortCodesForSiblingObjects&&(i.OtherNewSortCodesForSiblingObjects=e.otherNewSortCodesForSiblingObjects.map((function(e){var i={NewSortCode:e.newSortCode};return t._options.FullObjectsInEvents?i.Object=e.object:i.ObjectID=e.object.ID,i}))),t._options.OnDropWithCompletion){var n=new Promise((e=>{i.CompletionID=(t._nextCompletionID++).toString(),t._completionResolveFuncs[i.CompletionID]=e}));e.promise=n}t._invokeExtensibilityMethod("OnDrop",[i]),t._finishRowDragging()},_onTableCellDefinitionWidthChangedTriggered:function(e){var t={TableType:e.tableType,TableRowDefinitionID:e.tableRowDefinition.ID,CellIndex:e.cellIndex,NewWidth:Math.floor(e.newWidth+.001),OldWidth:Math.floor(e.oldWidth+.001)};this._invokeExtensibilityMethod("OnTableCellDefinitionWidthChanged",[t])},_onClickedTriggered:function(e){var t={ObjectType:e.objectType,VisualType:e.visualType,CellIndex:null!=e.cellIndex?e.cellIndex:-1,EntryIndex:null!=e.entryIndex?e.entryIndex:-1,SymbolIndex:null!=e.symbolIndex?e.symbolIndex:-1,SymbolID:Array.isArray(e.object.PM_RowSymbolIDs)&&null!=e.symbolIndex?e.object.PM_RowSymbolIDs[e.symbolIndex]:""};e.date&&(t.Date=e.date),e.visualType===A.PeriodHighlighter&&(t.PeriodHighlighterID=e.calendarGrid.ID,t.PeriodHighlighterEntryIndex=e.entryIndex,window.Hamlet&&(t.CalendarGridID=t.PeriodHighlighterID,t.CalendarGridEntryIndex=t.PeriodHighlighterEntryIndex)),e.hierarchySupplementaryDefinitionID&&(t.HierarchySupplementaryDefinitionID=e.hierarchySupplementaryDefinitionID,t.HierarchyLevelSupplementaryDefinitionIndex=e.hierarchyLevelSupplementaryDefinitionIndex,t.GroupingLevelDefinitionIndex=e.groupingLevelDefinitionIndex,t.GroupingCodes=e.groupingCodes),this._options.FullObjectsInEvents?t.Object=e.object:t.ObjectID=e.object?e.object.ID:"",e.skillID&&(t.SkillID=e.skillID),e.activityID&&(t.ActivityID=e.activityID),this._invokeExtensibilityMethod("OnClicked",[t])},_onDoubleClickedTriggered:function(e){var t={ObjectType:e.objectType,VisualType:e.visualType,CellIndex:null!=e.cellIndex?e.cellIndex:-1,EntryIndex:null!=e.entryIndex?e.entryIndex:-1,SymbolIndex:null!=e.symbolIndex?e.symbolIndex:-1,SymbolID:Array.isArray(e.object.PM_RowSymbolIDs)&&null!=e.symbolIndex?e.object.PM_RowSymbolIDs[e.symbolIndex]:""};e.date&&(t.Date=e.date),e.visualType===A.PeriodHighlighter&&(t.PeriodHighlighterID=e.calendarGrid.ID,t.PeriodHighlighterEntryIndex=e.entryIndex,window.Hamlet&&(t.CalendarGridID=t.PeriodHighlighterID,t.CalendarGridEntryIndex=t.PeriodHighlighterEntryIndex)),e.hierarchySupplementaryDefinitionID&&(t.HierarchySupplementaryDefinitionID=e.hierarchySupplementaryDefinitionID,t.HierarchyLevelSupplementaryDefinitionIndex=e.hierarchyLevelSupplementaryDefinitionIndex,t.GroupingLevelDefinitionIndex=e.groupingLevelDefinitionIndex,t.GroupingCodes=e.groupingCodes),this._options.FullObjectsInEvents?t.Object=e.object:t.ObjectID=e.object?e.object.ID:"",e.skillID&&(t.SkillID=e.skillID),e.activityID&&(t.ActivityID=e.activityID),this._invokeExtensibilityMethod("OnDoubleClicked",[t])},_onSelectionChangedTriggered:function(e){var t=this;if(!t._options.DeselectionOfRowsOrBarsOnLinkContextMenu&&e.reason===I.SelectionChangedReason.ContextMenu&&e.reasonObjectType===I.ObjectType.Link&&e.previouslySelectedObjects&&e.previouslySelectedObjects.length&&e.previouslySelectedObjectsType!==I.ObjectType.Link)e.cancel=!0;else{var i={ObjectType:e.objectType,VisualType:e.visualType};t._options.FullObjectsInEvents?i.Object=e.object:i.ObjectID=e.object?e.object.ID:"",i.SelectedObjectIDs=e.selectedObjects.map((function(e){return e.ID})),e.skillID&&(i.SkillID=e.skillID),e.activityID&&(i.ActivityID=e.activityID),t._invokeExtensibilityMethod("OnSelectionChanged",[i])}},_onCollapseStateChangedTriggered:function(e){var t=this,i={ObjectType:e.objectType,NewCollapseState:e.newCollapseState,Interactively:e.interactively,IsForAllocationRows:e.isForAllocationRows};if(t._options.FullObjectsInEvents?i.Object=e.object:i.ObjectID=e.object?e.object.ID:"",t._options.OnCollapseStateChangedWithCompletion){var n=new Promise((e=>{i.CompletionID=(t._nextCompletionID++).toString(),t._completionResolveFuncs[i.CompletionID]=e}));e.promise=n}e.skillID&&(i.SkillID=e.skillID),e.activityID&&(i.ActivityID=e.activityID),t._invokeExtensibilityMethod("OnCollapseStateChanged",[i]),e.object.PM_CollapseState=e.newCollapseState?1:0},_onCurveCollapseStateChangedTriggered:function(e){var t=this,i={ObjectType:e.objectType,NewCollapseState:e.newCollapseState};if(t._options.FullObjectsInEvents?i.Object=e.object:i.ObjectID=e.object?e.object.ID:"",e.resource&&(t._options.FullObjectsInEvents?i.Resource=e.resource:i.ResourceID=e.resource.ID),t._options.OnCurveCollapseStateChangedWithCompletion){var n=new Promise((e=>{i.CompletionID=(t._nextCompletionID++).toString(),t._completionResolveFuncs[i.CompletionID]=e}));e.promise=n}e.skillID&&(i.SkillID=e.skillID),e.activityID&&(i.ActivityID=e.activityID),t._invokeExtensibilityMethod("OnCurveCollapseStateChanged",[i]),e.object.PM_CurveCollapseState=e.newCollapseState?1:0},_onTimeAreaViewParametersChangedTriggered:function(e){var t={ScrollOffset:Math.floor(e.scrollOffset+.001),HorizontalScrollOffset:Math.floor(e.horizontalScrollOffset+.001),Width:Math.floor(e.width+.001),Start:e.start,End:e.end,TimeResolutionUnit:e.timeResolutionUnit,TimeResolutionUnitCount:e.timeResolutionUnitCount,TableViewWidth:Math.floor(e.tableViewWidth+.001),EntitiesTableViewWidth:Math.floor(e.entitiesTableViewWidth+.001)||0};this._invokeExtensibilityMethod("OnTimeAreaViewParametersChanged",[t])},_onVerticalScrollOffsetChangedTriggered:function(e){var t={TableType:e.tableType,ScrollOffset:Math.floor(e.scrollOffset+.001),TopViewScrollOffset:Math.floor(e.topViewScrollOffset+.001)};this._options.FullObjectsInEvents?(t.RowObjectAtTop=e.rowObjectAtTop,t.TopViewRowObjectAtTop=e.topViewRowObjectAtTop):(t.RowObjectIDAtTop=e.rowObjectAtTop?e.rowObjectAtTop.ID:"",t.TopViewRowObjectIDAtTop=e.topViewRowObjectAtTop?e.topViewRowObjectAtTop.ID:""),this._invokeExtensibilityMethod("OnVerticalScrollOffsetChanged",[t])},_onSaveAsPDFProgressTriggered:function(e){var t={PageCount:e.pageCount,CurrentPageNumber:e.currentPageNumber};this._invokeExtensibilityMethod("OnSaveAsPDFProgress",[t])},_onLogWarningTriggered:function(e){var t=this;if(null!=t._warningTimeoutHandle&&window.clearTimeout(t._warningTimeoutHandle),t._warningCommandCounter!==e.commandCounter){t._warningCommandCounter=e.commandCounter,t._warningEventArgs&&t._invokeExtensibilityMethod("OnLogWarnings",[t._warningEventArgs]);let i=e.commandName;i&&(i=`${i.at(0).toUpperCase()}${i.substring(1)}`),t._warningEventArgs={CommandName:i||null,WarningTexts:[]}}t._warningEventArgs.WarningTexts.push(e.description),t._warningTimeoutHandle=window.setTimeout((function(){delete t._warningTimeoutHandle,t._invokeExtensibilityMethod("OnLogWarnings",[t._warningEventArgs]),delete t._warningEventArgs}),500)},_onLogErrorTriggered:function(e){let t=e.commandName;t&&(t=`${t.at(0).toUpperCase()}${t.substring(1)}`);let i={CommandName:t||null,ErrorName:e.error.name,ErrorMessage:e.error.message,ErrorStack:e.error.stack};this._invokeExtensibilityMethod("OnLogError",[i]),e.rethrow=!1},_onRowSortingChangeRequested:function(e){let t={ObjectType:e.objectType,SortMode:e.sortMode,SortCodeSource:e.sortCodeSource};this._invokeExtensibilityMethod("OnRowSortingChangeRequested",[t]),e.cancel=!0},_onShowContextMenuTriggered:function(e){var t,i,o,a=this;if(e.object){if(e.visualType===A.Background)i="ContextMenuIDInBarsPane";else{if(e.visualType===A.Row&&"symbolIndex"in e)return;i=e.visualType===A.Curve?"ContextMenuIDInCurvesPane":"BarContextMenuID"}var r=e.object,s=r;e.visualType===A.PeriodHighlighter&&(s=e.periodHighlighter).Entries&&(s=s.Entries[e.entryIndex]);t=s&&(a._vsWidget.options.viewType===p.SkilledResources&&e.skillID&&(i?"BarContextMenuID"===i&&(o=s.SkilledBarContextMenuID):o=s.SkilledRowContextMenuID),!o&&0!==o&&i&&(o=s[i]??s[`AddIn_${i}`]),o||0===o||(o=s.ContextMenuID??s.AddIn_ContextMenuID),e.visualType===A.PeriodHighlighter&&(o||0===o||(o=r.ContextMenuIDInBarsPane)||0===o||(o=r.ContextMenuID??r.AddIn_ContextMenuID)),o)}else e.objectType===u.Timescale&&(t=a._vsWidget.options.timescaleContextMenuID);if(t||0===t){var d=[],l=a._vsWidget._contextMenus[t];if(l){var c=function(t){return r&&a._vsWidget._application.resolveFormat(`{{${t}}}`,e.object,e.objectType,e.periodHighlighter)},I=l.Items;if(I){var _=[],T={};let i=function(i){var n=T[i],o={ContextMenuID:t,ContextMenuItemIndex:n.index,ContextMenuItemCode:n.Code,ItemIndex:n.index,ObjectID:r?.ID,ObjectType:e.objectType,VisualType:e.visualType};e.skillID&&(o.SkillID=e.skillID),e.activityID&&(o.ActivityID=e.activityID),r?(o.Date=e.date,e.visualType===A.PeriodHighlighter&&(o.CalendarGridID=o.PeriodHighlighterID=r.PeriodHighlighterID||r.PM_PeriodHighlighterID,o.CalendarGridEntryIndex=o.PeriodHighlighterEntryIndex=e.entryIndex)):(o.TimePeriodStart=e.timePeriodStartDate,o.TimePeriodEnd=e.timePeriodEndDate),a._invokeExtensibilityMethod("OnContextMenuItemClicked",[o]),a._vsWidget._callOnContextMenuItemClicked(o)};new Promise((t=>{let o=!1,r=a._vsWidget._application;var s=function(e,t,a){t.map((function(e,t){var i=e&&"object"==typeof e,n=i?e.Text:e,a=i?e.SymbolIDSource?.toString():void 0,s=a&&c(a)||(i?e.SymbolID?.toString():void 0),d=(s&&r.symbolsMap()[s])?.URL;return d&&(o=!0),{index:t,Text:n?.toString()??"undefined",Code:i?e.Code?.toString():void 0,SortCode:i?e.SortCode?.toString():void 0,SymbolURL:d,DisabledSource:i?e.DisabledSource?.toString():void 0,Disabled:i&&!!e.Disabled,SubItems:i&&e.SubItems}})).sort((function(e,t){var i=e.SortCode,n=t.SortCode,o=null!=n;return null!=i?o?i>n?1:i<n?-1:0:1:o?-1:e.index1-t.index2})).forEach((function(t,r){var l=a+r;T[l]=t;var I=t.Text.startsWith("-")?{divider:!0}:{title:t.Text,disabled:t.Disabled};if(I.disabled||I.divider||(I.action=function(){i(l)}),Array.isArray(t.SubItems)&&s(I.children=[],t.SubItems,l+"_"),t.DisabledSource){var u=c(t.DisabledSource);"false"!==u&&(isNaN(+u)||+u)||(u=!1),null!=u&&""!==u&&(I.disabled=!!u)}if((t.SymbolURL||o)&&!I.divider){var _="vscai-ctxmi-"+l;I.title=`<div class="vscai-ctxm-div vscai-ctxm-image ${_}"></div><div class"vscai-ctxm-div">${I.title}</div>`;let e=t.SymbolURL?`background-image:url("${t.SymbolURL}");`:"",i=n.select("head").append("style").text(`.${_} {${e}}`).node();d.push(i)}e.push(I)}))};s(_,I,""),n.contextMenu(_,{onClose:t})(e.event)})).then((function(){n.select(d).remove()})).catch((function(){n.select(d).remove()}))}}}},_onCloseContextMenuTriggered:function(){n.contextMenu("close")},_II_fitTimeAreaIntoView:function(e,t){if(this._vsWidget){var i=void 0,n=void 0;e&&(i=new Date(e)),t&&(n=new Date(t)),this._vsWidget.fitTimeAreaIntoView(i,n)}else alert("_II_fitTimeAreaIntoView failed")},_II_setTimeResolutionForView:function(e,t,i){this._vsWidget?(i&&(i=new Date(i)),this._vsWidget.setTimeResolutionForView(e,t,i)):alert("_II_setTimeResolutionForView failed")},_II_removeAll:function(e){var t=this;this._vsWidget?(this._vsWidget.removeAll(e),void 0===e?Object.keys(this._visibilitiesByObjectType).forEach((function(e){t._updateVisibilityFilterCallback(e,void 0,3)})):this._updateVisibilityFilterCallback(e,void 0,3),this._vsWidget.option("defaultCalendarID",null),void 0!==e&&e!==u.Symbol||this._setStatusAreaContents()):alert("_II_removeAll failed")},_II_render:function(){this._vsWidget?this._vsWidget.render():alert("_II_render failed")},_II_saveAsPDF:function(e,t){var i=this;if(this._vsWidget){var n={};t&&Object.keys(t).forEach((function(e){n[e.charAt(0).toLowerCase()+e.substring(1)]=t[e]}));var o=document.createElement("div");o.style.position="absolute",o.style.zIndex=100,o.style.cursor="wait",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0, 0, 0, 0.1)",document.body.prepend(o),window.setTimeout((function(){var t,a=function(){o.remove(),i._invokeExtensibilityMethod("OnSaveAsPDFFinished",[])};try{i._vsWidget.saveAsPDF(e,n).then(a,a)}catch(e){t=e.message}t&&(alert(t),a())}),1)}else alert("_II_saveAsPDF failed")},_II_cancelSaveAsPDF:function(){this._vsWidget?this._vsWidget.cancelSaveAsPDF():alert("_II_cancelSaveAsPDF failed")},_II_scrollToDate:function(e,t){this._vsWidget?this._vsWidget.scrollToDate(new Date(e),t||void 0):alert("_II_scrollToDate failed")},_II_scrollToObject:function(e,t,i,n){this._vsWidget?this._vsWidget.scrollToObject(e,t,i,n):alert("_II_scrollToObject failed")},_II_scrollViewAreaHorizontally:function(e,t){this._vsWidget?this._vsWidget.scrollViewAreaHorizontally(e,t):alert("_II_scrollViewAreaHorizontally failed")},_II_scrollViewAreaVertically:function(e,t){this._vsWidget?this._vsWidget.scrollViewAreaVertically(e,t):alert("_II_scrollViewAreaVertically failed")},_II_selectObjects:function(e,t,i){this._vsWidget?this._vsWidget.selectObjects(e,t,i):alert("_II_selectObjects failed")},_II_highlightObjects:function(e,t,i){this._vsWidget?this._vsWidget.highlightObjects(e,t,i):alert("_II_highlightObjects failed")},_II_setCollapseStatesForEntityRows:function(e,t,i){this._vsWidget?this._vsWidget.setCollapseStatesForEntityRows(e,t,i):alert("_II_setCollapseStatesForEntityRows failed")},_II_setCollapseStatesForRows:function(e,t,i,n,o){this._vsWidget?this._vsWidget.setCollapseStatesForRows(e,t,i,n,o):alert("_II_setCollapseStatesForRows failed")},_II_setSettings:function(e){var t=this;if(e){var i=this._initWidget();if(this._vsWidget){var n={},o=!1,a=!1,r={};Object.keys(e).forEach((function(i){var s=e[i];if(i in t._options||i.startsWith("AddIn_")&&i.substring(6)in t._options)if(i=i.replace(/^AddIn_/,""),t._options[i]=s,"PingTimeInMilliseconds"===i)t._handlePingTimeInMilliseconds();else if("ForcedFillOfPageSpace"===i)t._initResize(s);else if("TopStatusAreaHeight"===i||"BottomStatusAreaHeight"===i)o=!0;else if("TopStatusAreaContent"===i)r.TopStatusArea=!0;else if("BottomStatusAreaContent"===i)r.BottomStatusArea=!0;else if("StatusAreaVariables"===i)r.TopStatusArea=!0,r.BottomStatusArea=!0;else if("VisiblePropertyName"===i)a=!0;else if(v.indexOf(i)>-1){Array.isArray(s)||(s=null);let e=`${i.match(/(.*)Sort/)[1].replace(/y$/,"ie")}s`;n[`compare${e}`]=t[`_compare${e}Func`].bind(t)}else window.Hamlet&&("ProductName"===i?n.customName=s:"ProductVersion"===i&&(n.customVersion=s));else if("custom_"!==i.substring(0,7).toLowerCase()&&!((i="PM_"===i.substring(0,3)?i.substring(0,4).toLowerCase()+i.substring(4):i.substring(0,1).toLowerCase()+i.substring(1)).startsWith("can")||i.startsWith("on")&&"onCollapseStateChangedTriggeredByUpdateCalls"!==i)){switch(i){case"workDate":if("0001-01-01T00:00:00"===s)return;s=new Date(s);break;case"viewType":case"tableWidth":case"tableViewWidth":case"entitiesTableWidth":case"entitiesTableViewWidth":case"pm_symbolColumnWidth":case"symbolColumnWidth":case"pm_entitiesTableSymbolColumnWidth":case"entitiesTableSymbolColumnWidth":if(s<0)return;break;case"localeId":case"languageId":if(null==(s=b[s]))return;s=s.replace(/_/g,"-"),i=i.substring(0,i.length-2);break;case"timeZone":if(null==s)return;s=m[s];break;case"pm_clickEventTriggeringOnRowInTimeArea":case"clickEventTriggeringOnRowInTimeArea":i="clickCallbackTriggeringOnRowInTimeArea";break;case"updateMode":i="defaultUpdateMode";break;case"timeStepUnit":case"timeStepUnitFactor":t._origValues&&delete t._origValues[i]}n[i]=s}})),Object.keys(n).length&&t._vsWidget.option(n),o&&this._setAreaHeights(),Object.keys(r).length&&this._setStatusAreaContents(r),a&&this._visibilityObjectTypes.forEach((e=>{this._updateVisibilityFilterCallback(e,null,-1)})),this._vsWidget.render(),i&&t._invokeExtensibilityMethod("OnControlAddInReady",[])}}else alert("_II_setSettings failed")},_II_about:function(){this._vsWidget?this._vsWidget.about():alert("_II_about failed")},_II_addActivities:function(e){this._vsWidget?(this._vsWidget.addActivities(e),this._updateVisibilityFilterCallback(u.Activity,e,0)):alert("_II_addActivities failed")},_II_updateActivities:function(e){this._vsWidget?(this._vsWidget.updateActivities(e),this._updateVisibilityFilterCallback(u.Activity,e,1)):alert("_II_updateActivities failed")},_II_removeActivities:function(e){this._vsWidget?(this._vsWidget.removeActivities(e),this._updateVisibilityFilterCallback(u.Activity,e,2)):alert("_II_removeActivities failed")},_II_addAllocations:function(e){this._vsWidget?(this._vsWidget.addAllocations(e),this._updateVisibilityFilterCallback(u.Allocation,e,0)):alert("_II_addAllocations failed")},_II_updateAllocations:function(e){this._vsWidget?(this._vsWidget.updateAllocations(e),this._updateVisibilityFilterCallback(u.Allocation,e,1)):alert("_II_updateAllocations failed")},_II_removeAllocations:function(e){this._vsWidget?(this._vsWidget.removeAllocations(e),this._updateVisibilityFilterCallback(u.Allocation,e,2)):alert("_II_removeAllocations failed")},_II_addCalendars:function(e){this._vsWidget?this._vsWidget.addCalendars(e):alert("_II_addCalendars failed")},_II_updateCalendars:function(e){this._vsWidget?this._vsWidget.updateCalendars(e):alert("_II_updateCalendars failed")},_II_removeCalendars:function(e){this._vsWidget?this._vsWidget.removeCalendars(e):alert("_II_removeCalendars failed")},_II_addCurves:function(e){this._vsWidget?this._vsWidget.addCurves(e):alert("_II_addCurves failed")},_II_updateCurves:function(e){this._vsWidget?this._vsWidget.updateCurves(e):alert("_II_updateCurves failed")},_II_removeCurves:function(e){this._vsWidget?this._vsWidget.removeCurves(e):alert("_II_removeCurves failed")},_II_addResources:function(e){this._vsWidget?(this._vsWidget.addResources(e),this._updateVisibilityFilterCallback(u.Resource,e,0)):alert("_II_addResources failed")},_II_updateResources:function(e){this._vsWidget?(this._vsWidget.updateResources(e),this._updateVisibilityFilterCallback(u.Resource,e,1)):alert("_II_updateResources failed")},_II_removeResources:function(e){this._vsWidget?(this._vsWidget.removeResources(e),this._updateVisibilityFilterCallback(u.Resource,e,2)):alert("_II_removeResources failed")},_II_addLinks:function(e){this._vsWidget?this._vsWidget.addLinks(e):alert("_II_addLinks failed")},_II_updateLinks:function(e){this._vsWidget?this._vsWidget.updateLinks(e):alert("_II_updateLinks failed")},_II_removeLinks:function(e){this._vsWidget?this._vsWidget.removeLinks(e):alert("_II_removeLinks failed")},_II_addEntities:function(e){this._vsWidget?(this._vsWidget.addEntities(e),this._updateVisibilityFilterCallback(u.Entity,e,0)):alert("_II_addEntities failed")},_II_updateEntities:function(e){this._vsWidget?(this._vsWidget.updateEntities(e),this._updateVisibilityFilterCallback(u.Entity,e,1)):alert("_II_updateEntities failed")},_II_removeEntities:function(e){this._vsWidget?(this._vsWidget.removeEntities(e),this._updateVisibilityFilterCallback(u.Entity,e,2)):alert("_II_removeEntities failed")},_II_addSymbols:function(e){this._vsWidget?(this._vsWidget.addSymbols(e),this._setStatusAreaContents()):alert("_II_addSymbols failed")},_II_updateSymbols:function(e){this._vsWidget?(this._vsWidget.updateSymbols(e),this._setStatusAreaContents()):alert("_II_updateSymbols failed")},_II_removeSymbols:function(e){this._vsWidget?(this._vsWidget.removeSymbols(e),this._setStatusAreaContents()):alert("_II_removeSymbols failed")},_II_addContextMenus:function(e){this._vsWidget?this._vsWidget.addContextMenus(e):alert("_II_addContextMenus failed")},_II_updateContextMenus:function(e){this._vsWidget?this._vsWidget.updateContextMenus(e):alert("_II_updateContextMenus failed")},_II_removeContextMenus:function(e){this._vsWidget?this._vsWidget.removeContextMenus(e):alert("_II_removeContextMenus failed")},_II_addPeriodHighlighters:function(e){this._vsWidget?this._vsWidget.addPeriodHighlighters(e):alert("_II_addPeriodHighlighters failed")},_II_updatePeriodHighlighters:function(e){this._vsWidget?this._vsWidget.updatePeriodHighlighters(e):alert("_II_updatePeriodHighlighters failed")},_II_removePeriodHighlighters:function(e){this._vsWidget?this._vsWidget.removePeriodHighlighters(e):alert("_II_removePeriodHighlighters failed")},_II_addDateLines:function(e){this._vsWidget?this._vsWidget.addDateLines(e):alert("_II_addDateLines failed")},_II_updateDateLines:function(e){this._vsWidget?this._vsWidget.updateDateLines(e):alert("_II_updateDateLines failed")},_II_removeDateLines:function(e){this._vsWidget?this._vsWidget.removeDateLines(e):alert("_II_removeDateLines failed")},_II_addTooltipTemplates:function(e){this._vsWidget?this._vsWidget.addTooltipTemplates(e):alert("_II_addTooltipTemplates failed")},_II_updateTooltipTemplates:function(e){this._vsWidget?this._vsWidget.updateTooltipTemplates(e):alert("_II_updateTooltipTemplates failed")},_II_removeTooltipTemplates:function(e){this._vsWidget?this._vsWidget.removeTooltipTemplates(e):alert("_II_removeTooltipTemplates failed")},_II_addTableRowDefinitions:function(e){this._vsWidget?this._vsWidget.addTableRowDefinitions(e):alert("_II_addTableRowDefinitions failed")},_II_updateTableRowDefinitions:function(e){this._vsWidget?this._vsWidget.updateTableRowDefinitions(e):alert("_II_updateTableRowDefinitions failed")},_II_removeTableRowDefinitions:function(e){this._vsWidget?this._vsWidget.removeTableRowDefinitions(e):alert("_II_removeTableRowDefinitions failed")},_II_addHierarchySupplementaryDefinitions:function(e){this._vsWidget?this._vsWidget.addHierarchySupplementaryDefinitions(e):alert("_II_addHierarchySupplementaryDefinitions failed")},_II_updateHierarchySupplementaryDefinitions:function(e){this._vsWidget?this._vsWidget.updateHierarchySupplementaryDefinitions(e):alert("_II_updateHierarchySupplementaryDefinitions failed")},_II_removeHierarchySupplementaryDefinitions:function(e){this._vsWidget?this._vsWidget.removeHierarchySupplementaryDefinitions(e):alert("_II_removeHierarchySupplementaryDefinitions failed")},_II_addSkills:function(e){this._vsWidget?(this._vsWidget.addSkills(e),this._updateVisibilityFilterCallback(u.Skill,e,0)):alert("_II_addSkills failed")},_II_updateSkills:function(e){this._vsWidget?(this._vsWidget.updateSkills(e),this._updateVisibilityFilterCallback(u.Skill,e,1)):alert("_II_updateSkills failed")},_II_removeSkills:function(e){this._vsWidget?(this._vsWidget.removeSkills(e),this._updateVisibilityFilterCallback(u.Skill,e,2)):alert("_II_removeSkills failed")},_II_setResourcePropertiesForSkill:function(e){this._vsWidget?this._vsWidget.setResourcePropertiesForSkill(e):alert("_II_setResourcePropertiesForSkill failed")},_II_processOnDrop:function(){if(this._vsWidget&&this._callbackArgsOfLastOnDropCallback){this._vsWidget.processOnDrop(this._callbackArgsOfLastOnDropCallback);let e=`compare${this._rowDroppedObjectTypeName[0].toUpperCase()}${this._rowDroppedObjectTypeName.substring(1).replace(/y$/,"ie")}s`;this._vsWidget.option(e,this._vsWidget.option(e)),delete this._callbackArgsOfLastOnDropCallback}else alert("_II_processOnDrop failed")},_II_eventProcessingDone:function(e,t){if(this._vsWidget){if((e=parseInt(e))>=0){var i=this._completionResolveFuncs[e];i&&(delete this._completionResolveFuncs[e],i(t))}}else alert("_II_eventProcessingDone failed")},_II_appendTagToLog:function(e){this._vsWidget?this._vsWidget.appendTagToLog(e):alert("_II_appendTagToLog failed")}};e.exports=r.extendClass("appVSControlAddIn",a,O)},992:(e,t,i)=>{var n=i(108),o=n.nClassFactory,a=n.nDebugHelper,r=i(7).BarSnapTargets,s=i(564),d=s.rabWidget,l=s.RowDesigns,c=i(925),I=i(200),u=i(613),_="nvscai",T={__rabApplicationClass:c,_contextMenus:{},optionDefaults:{...d.prototype.optionDefaults,customName:"VS Add-in Developers Toolbox Control Add-in",customCopyrightYear:u.copyrightYear,customVersion:u[window.Hamlet?"hamletVersionNumber":"versionNumber"],customLicenseTexts:I,newCallbackBehaviorEnabled:!0,pm_defaultAllocationBarDesign:s.AllocationBarDesign.GroupedEntries,triggeringOfOnShowContextMenuInTimeAreaOfRow:!0,defaultActivityCollapsedRowDesign:l.Bars|l.Optimized|l.CalendarGrid,defaultActivityExpandedRowDesign:l.Bars|l.Optimized|l.CalendarGrid,defaultResourceCollapsedRowDesign:l.Bars|l.Optimized|l.CalendarGrid,defaultResourceExpandedRowDesign:l.Bars|l.Optimized|l.CalendarGrid,defaultAllocationSnapTargetsForStart:r.Start|r.End|r.CalendarGrids,defaultAllocationSnapTargetsForEnd:r.Start|r.End|r.CalendarGrids,defaultActivitySnapTargetsForStart:r.CalendarGrids,defaultActivitySnapTargetsForEnd:r.CalendarGrids,defaultLinkSelectable:!1,additionalDateInterpretedAsEmpty:"0001-01-01T00:00:00.0000000",locale:"en-US",weekNumbering:"ISO8601",tableViewWidth:300,onContextMenuItemClicked:null,timescaleContextMenuID:null},construct:function(){this._super.apply(this,arguments),this._element.classList.add(_+"-widget")},destroy:function(){this._element.classList.remove(_+"-widget"),this._super()},_setOption:function(e,t){switch(e){case"loggingEnabled":this._super(e,t),t&&this.appendTagToLog("\nVSCAISettings",this._vscai_options);break;case"onContextMenuItemClicked":case"timescaleContextMenuID":this.options[e]=t;break;case"viewType":if(-1===t)return;case"entitiesTableViewWidth":case"entitiesTableWidth":case"tableViewWidth":case"tableViewWidthInActivitiesView":case"tableViewWidthInLoadsView":case"tableViewWidthInResourcesView":case"tableViewWidthInSkilledResourcesView":case"tableWidth":case"pm_forcedAllocationAllowedBarDragModes":case"forcedAllocationAllowedBarDragModes":case"pm_forcedAllocationAllowedBarDragModesInActivitiesView":case"forcedAllocationAllowedBarDragModesInActivitiesView":case"pm_forcedActivityAllowedBarDragModes":case"forcedActivityAllowedBarDragModes":case"pm_forcedActivityAllowedRowDragModes":case"forcedActivityAllowedRowDragModes":case"pm_forcedEntityAllowedRowDragModes":case"forcedEntityAllowedRowDragModes":case"pm_forcedResourceAllowedRowDragModes":case"forcedResourceAllowedRowDragModes":case"firstDayOfWeek":-1===t&&(t=null);default:"Color"!==e.substring(e.length-5)&&"DashArray"!==e.substring(e.length-9)||t||(t=null),this._super(e,t)}},addContextMenus:function(e){var t=this;return t._handleCall("addContextMenus",arguments,(t=>{a.assertArray(e,t,0)}),(()=>{Array.isArray(e)&&e.forEach((function(e){e&&"string"==typeof e.ID&&Array.isArray(e.Items)&&(t._contextMenus[e.ID]=e)}))}))},updateContextMenus:function(e){var t=this;return t._handleCall("updateContextMenus",arguments,(t=>{a.assertArray(e,t,0)}),(()=>{Array.isArray(e)&&e.forEach((function(e){e&&"string"==typeof e.ID&&Array.isArray(e.Items)&&(t._contextMenus[e.ID]=e)}))}))},removeContextMenus:function(e){var t=this;return t._handleCall("removeContextMenus",arguments,(t=>{a.assertArray(e,t,0)}),(()=>{Array.isArray(e)&&e.forEach((function(e){e&&("string"==typeof e?delete t._contextMenus[e]:"string"==typeof e.ID&&delete t._contextMenus[e.ID])}))}))},_callOnContextMenuItemClicked:function(e){this._handleCallback("onContextMenuItemClicked",e)},_saveCurrentStateToLoggingCache:function(){this._super();var e=this._loggingCache.Actions;delete this._loggingCache.Actions,this._loggingCache.ContextMenus=Object.values(this._contextMenus).map((e=>Object.assign({},e))),this._loggingCache.Actions=e}};e.exports=o.extendClass("appWidget",d,T)},371:(e,t,i)=>{e.exports=i(396)},200:e=>{e.exports='<n>d3.js 7.8.5</n>\n<t>\nCopyright 2010-2023 Mike Bostock\n\nPermission to use, copy, modify, and/or distribute this software for any purpose\nwith or without fee is hereby granted, provided that the above copyright notice\nand this permission notice appear in all copies.\n\nTHE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND\nFITNESS.IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n   INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS\nOF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER\nTORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF\nTHIS SOFTWARE.\n</t>\n<n>d3-context-menu 2.1.0</n>\n<t>\nThe MIT License (MIT)\n\nCopyright (C) 2014-present Patrick Gillespie and other contributors\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the "Software"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n</t>\n<n>hammer.js 2.0.8</n>\n<t>\nThe MIT License (MIT)\n\nCopyright (C) 2011-2017 by Jorik Tangelder (Eight Media)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the "Software"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n</t>\n<n>TinyColor 1.4.1</n>\n<t>\nCopyright (c), Brian Grinstead, http://briangrinstead.com\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n"Software"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\nLIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\nWITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n</t>\n<n>PDFKit 0.11.0</n>\n<t>\nMIT LICENSE\nCopyright (c) 2014 Devon Govett\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n</t>\n<n>SVG-to-PDFKit 0.1.8</n>\n<t>\nThe MIT License (MIT)\n\nCopyright (c) 2019 SVG-to-PDFKit contributors\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n</t>\n<n>blob-stream 0.1.3</n>\n<t>\nMIT LICENSE\nCopyright (c) 2014 Devon Govett\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n</t>\n<n>blob 0.1.0</n>\n<t>\nMIT License\n\nCopyright (C) 2014 Rase-\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the "Software"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n</t>\n<n>stream 0.0.2</n>\n<t>\n(MIT)\n\nCopyright (c) 2012 Julian Gruber <julian@juliangruber.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n</t>\n<n>buffer</n>\n<t>\nThe MIT License (MIT)\n\nCopyright (c) Feross Aboukhadijeh, and other contributors.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the "Software"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n</t>\n<n>emitter-component 1.1.1</n>\n<t>\n(The MIT License)\n\nCopyright (c) 2014 Component contributors <dev@component.io>\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the "Software"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n</t>\n<n>Moment.js 2.29.4</n>\n<t>\nCopyright (c) JS Foundation and other contributors\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the "Software"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n</t>\n<n>Moment Timezone 0.5.43-2023c</n>\n<t>\nThe MIT License (MIT)\n\nCopyright (c) JS Foundation and other contributors\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the "Software"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n</t>'},613:e=>{e.exports={versionNumber:"8.0.1",hamletVersionNumber:"8.0.1",copyrightYear:"2020-2023"}},909:e=>{e.exports={4:"zh_CHS",1025:"ar_SA",1026:"bg_BG",1027:"ca_ES",1028:"zh_TW",1029:"cs_CZ",1030:"da_DK",1031:"de_DE",1032:"el_GR",1033:"en_US",1034:"es_ES",1035:"fi_FI",1036:"fr_FR",1037:"he_IL",1038:"hu_HU",1039:"is_IS",1040:"it_IT",1041:"ja_JP",1042:"ko_KR",1043:"nl_NL",1044:"nb_NO",1045:"pl_PL",1046:"pt_BR",1047:"rm_CH",1048:"ro_RO",1049:"ru_RU",1050:"hr_HR",1051:"sk_SK",1052:"sq_AL",1053:"sv_SE",1054:"th_TH",1055:"tr_TR",1056:"ur_PK",1057:"id_ID",1058:"uk_UA",1059:"be_BY",1060:"sl_SI",1061:"et_EE",1062:"lv_LV",1063:"lt_LT",1064:"tg_TJ",1065:"fa_IR",1066:"vi_VN",1067:"hy_AM",1069:"eu_ES",1070:"wen_DE",1071:"mk_MK",1074:"tn_ZA",1076:"xh_ZA",1077:"zu_ZA",1078:"af_ZA",1079:"ka_GE",1080:"fo_FO",1081:"hi_IN",1082:"mt_MT",1083:"se_NO",1086:"ms_MY",1087:"kk_KZ",1088:"ky_KG",1089:"sw_KE",1090:"tk_TM",1092:"tt_RU",1093:"bn_IN",1094:"pa_IN",1095:"gu_IN",1096:"or_IN",1097:"ta_IN",1098:"te_IN",1099:"kn_IN",1100:"ml_IN",1101:"as_IN",1102:"mr_IN",1103:"sa_IN",1104:"mn_MN",1105:"bo_CN",1106:"cy_GB",1107:"kh_KH",1108:"lo_LA",1109:"my_MM",1110:"gl_ES",1111:"kok_IN",1114:"syr_SY",1115:"si_LK",1118:"am_ET",1121:"ne_NP",1122:"fy_NL",1123:"ps_AF",1124:"fil_PH",1125:"div_MV",1128:"ha_NG",1130:"yo_NG",1131:"quz_BO",1132:"ns_ZA",1133:"ba_RU",1134:"lb_LU",1135:"kl_GL",1144:"ii_CN",1146:"arn_CL",1148:"moh_CA",1150:"br_FR",1152:"ug_CN",1153:"mi_NZ",1154:"oc_FR",1155:"co_FR",1156:"gsw_FR",1157:"sah_RU",1158:"qut_GT",1159:"rw_RW",1160:"wo_SN",1164:"gbz_AF",2049:"ar_IQ",2052:"zh_CN",2055:"de_CH",2057:"en_GB",2058:"es_MX",2060:"fr_BE",2064:"it_CH",2067:"nl_BE",2068:"nn_NO",2070:"pt_PT",2077:"sv_FI",2080:"ur_IN",2092:"az_AZ",2094:"dsb_DE",2107:"se_SE",2108:"ga_IE",2110:"ms_BN",2115:"uz_UZ",2128:"mn_CN",2129:"bo_BT",2141:"iu_CA",2143:"tmz_DZ",2155:"quz_EC",3073:"ar_EG",3076:"zh_HK",3079:"de_AT",3081:"en_AU",3082:"es_ES",3084:"fr_CA",3098:"sr_SP",3131:"se_FI",3179:"quz_PE",4097:"ar_LY",4100:"zh_SG",4103:"de_LU",4105:"en_CA",4106:"es_GT",4108:"fr_CH",4122:"hr_BA",4155:"smj_NO",5121:"ar_DZ",5124:"zh_MO",5127:"de_LI",5129:"en_NZ",5130:"es_CR",5132:"fr_LU",5179:"smj_SE",6145:"ar_MA",6153:"en_IE",6154:"es_PA",6156:"fr_MC",6203:"sma_NO",7169:"ar_TN",7177:"en_ZA",7178:"es_DO",7194:"sr_BA",7227:"sma_SE",8193:"ar_OM",8201:"en_JA",8202:"es_VE",8218:"bs_BA",8251:"sms_FI",9217:"ar_YE",9225:"en_CB",9226:"es_CO",9242:"rs_latn_RS",9275:"smn_FI",10241:"ar_SY",10249:"en_BZ",10250:"es_PE",11265:"ar_JO",11273:"en_TT",11274:"es_AR",12289:"ar_LB",12297:"en_ZW",12298:"es_EC",13313:"ar_KW",13321:"en_PH",13322:"es_CL",14337:"ar_AE",14346:"es_UR",15361:"ar_BH",15370:"es_PY",16385:"ar_QA",16394:"es_BO",17417:"en_MY",17418:"es_SV",18441:"en_IN",18442:"es_HN",19466:"es_NI",20490:"es_PR",21514:"es_US",31748:"zh_CHT"}},430:e=>{e.exports={"Dateline Standard Time":"Etc/GMT+12","UTC-11":"Etc/GMT+11","Aleutian Standard Time":"America/Adak","Hawaiian Standard Time":"Pacific/Honolulu","Marquesas Standard Time":"Pacific/Marquesas","Alaskan Standard Time":"America/Anchorage","UTC-09":"Etc/GMT+9","Pacific Standard Time (Mexico)":"America/Tijuana","UTC-08":"Etc/GMT+8","Pacific Standard Time":"America/Los_Angeles","US Mountain Standard Time":"America/Phoenix","Mountain Standard Time (Mexico)":"America/Chihuahua","Mountain Standard Time":"America/Denver","Central America Standard Time":"America/Guatemala","Central Standard Time":"America/Chicago","Easter Island Standard Time":"Pacific/Easter","Central Standard Time (Mexico)":"America/Mexico_City","Canada Central Standard Time":"America/Regina","SA Pacific Standard Time":"America/Bogota","Eastern Standard Time (Mexico)":"America/Cancun","Eastern Standard Time":"America/New_York","Haiti Standard Time":"America/Port-au-Prince","Cuba Standard Time":"America/Havana","US Eastern Standard Time":"America/Indianapolis","Paraguay Standard Time":"America/Asuncion","Atlantic Standard Time":"America/Halifax","Venezuela Standard Time":"America/Caracas","Central Brazilian Standard Time":"America/Cuiaba","SA Western Standard Time":"America/La_Paz","Pacific SA Standard Time":"America/Santiago","Turks And Caicos Standard Time":"America/Grand_Turk","Newfoundland Standard Time":"America/St_Johns","Tocantins Standard Time":"America/Araguaina","E. South America Standard Time":"America/Sao_Paulo","SA Eastern Standard Time":"America/Cayenne","Argentina Standard Time":"America/Buenos_Aires","Greenland Standard Time":"America/Godthab","Montevideo Standard Time":"America/Montevideo","Magallanes Standard Time":"America/Punta_Arenas","Saint Pierre Standard Time":"America/Miquelon","Bahia Standard Time":"America/Bahia","UTC-02":"Etc/GMT+2","Azores Standard Time":"Atlantic/Azores","Cape Verde Standard Time":"Atlantic/Cape_Verde",UTC:"Etc/GMT","GMT Standard Time":"Europe/London","Greenwich Standard Time":"Atlantic/Reykjavik","W. Europe Standard Time":"Europe/Berlin","Central Europe Standard Time":"Europe/Budapest","Romance Standard Time":"Europe/Paris","Morocco Standard Time":"Africa/Casablanca","Sao Tome Standard Time":"Africa/Sao_Tome","Central European Standard Time":"Europe/Warsaw","W. Central Africa Standard Time":"Africa/Lagos","Jordan Standard Time":"Asia/Amman","GTB Standard Time":"Europe/Bucharest","Middle East Standard Time":"Asia/Beirut","Egypt Standard Time":"Africa/Cairo","E. Europe Standard Time":"Europe/Chisinau","Syria Standard Time":"Asia/Damascus","West Bank Standard Time":"Asia/Hebron","South Africa Standard Time":"Africa/Johannesburg","FLE Standard Time":"Europe/Kiev","Israel Standard Time":"Asia/Jerusalem","Kaliningrad Standard Time":"Europe/Kaliningrad","Sudan Standard Time":"Africa/Khartoum","Libya Standard Time":"Africa/Tripoli","Namibia Standard Time":"Africa/Windhoek","Arabic Standard Time":"Asia/Baghdad","Turkey Standard Time":"Europe/Istanbul","Arab Standard Time":"Asia/Riyadh","Belarus Standard Time":"Europe/Minsk","Russian Standard Time":"Europe/Moscow","E. Africa Standard Time":"Africa/Nairobi","Iran Standard Time":"Asia/Tehran","Arabian Standard Time":"Asia/Dubai","Astrakhan Standard Time":"Europe/Astrakhan","Azerbaijan Standard Time":"Asia/Baku","Russia Time Zone 3":"Europe/Samara","Mauritius Standard Time":"Indian/Mauritius","Saratov Standard Time":"Europe/Saratov","Georgian Standard Time":"Asia/Tbilisi","Caucasus Standard Time":"Asia/Yerevan","Afghanistan Standard Time":"Asia/Kabul","West Asia Standard Time":"Asia/Tashkent","Ekaterinburg Standard Time":"Asia/Yekaterinburg","Pakistan Standard Time":"Asia/Karachi","India Standard Time":"Asia/Calcutta","Sri Lanka Standard Time":"Asia/Colombo","Nepal Standard Time":"Asia/Katmandu","Central Asia Standard Time":"Asia/Almaty","Bangladesh Standard Time":"Asia/Dhaka","Omsk Standard Time":"Asia/Omsk","Myanmar Standard Time":"Asia/Rangoon","SE Asia Standard Time":"Asia/Bangkok","Altai Standard Time":"Asia/Barnaul","W. Mongolia Standard Time":"Asia/Hovd","North Asia Standard Time":"Asia/Krasnoyarsk","N. Central Asia Standard Time":"Asia/Novosibirsk","Tomsk Standard Time":"Asia/Tomsk","China Standard Time":"Asia/Shanghai","North Asia East Standard Time":"Asia/Irkutsk","Singapore Standard Time":"Asia/Singapore","W. Australia Standard Time":"Australia/Perth","Taipei Standard Time":"Asia/Taipei","Ulaanbaatar Standard Time":"Asia/Ulaanbaatar","Aus Central W. Standard Time":"Australia/Eucla","Transbaikal Standard Time":"Asia/Chita","Tokyo Standard Time":"Asia/Tokyo","North Korea Standard Time":"Asia/Pyongyang","Korea Standard Time":"Asia/Seoul","Yakutsk Standard Time":"Asia/Yakutsk","Cen. Australia Standard Time":"Australia/Adelaide","AUS Central Standard Time":"Australia/Darwin","E. Australia Standard Time":"Australia/Brisbane","AUS Eastern Standard Time":"Australia/Sydney","West Pacific Standard Time":"Pacific/Port_Moresby","Tasmania Standard Time":"Australia/Hobart","Vladivostok Standard Time":"Asia/Vladivostok","Lord Howe Standard Time":"Australia/Lord_Howe","Bougainville Standard Time":"Pacific/Bougainville","Russia Time Zone 10":"Asia/Srednekolymsk","Magadan Standard Time":"Asia/Magadan","Norfolk Standard Time":"Pacific/Norfolk","Sakhalin Standard Time":"Asia/Sakhalin","Central Pacific Standard Time":"Pacific/Guadalcanal","Russia Time Zone 11":"Asia/Kamchatka","New Zealand Standard Time":"Pacific/Auckland","UTC+12":"Etc/GMT-12","Fiji Standard Time":"Pacific/Fiji","Chatham Islands Standard Time":"Pacific/Chatham","UTC+13":"Etc/GMT-13","Tonga Standard Time":"Pacific/Tongatapu","Samoa Standard Time":"Pacific/Apia","Line Islands Standard Time":"Pacific/Kiritimati"}},673:e=>{e.exports=window.d3},108:e=>{e.exports=window.nwaf_apptools},7:e=>{e.exports=window.nwaf_gantt},564:e=>{e.exports=window.nwaf_rab}},t={};var i=function i(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,i),a.exports}(371);window.netronic_vscai=i})();
//# sourceMappingURL=vscai-widget.min.js.map
